function oO(e,t){for(var n=0;n<t.length;n++){const s=t[n];if(typeof s!="string"&&!Array.isArray(s)){for(const u in s)if(u!=="default"&&!(u in e)){const h=Object.getOwnPropertyDescriptor(s,u);h&&Object.defineProperty(e,u,h.get?h:{enumerable:!0,get:()=>s[u]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))s(u);new MutationObserver(u=>{for(const h of u)if(h.type==="childList")for(const f of h.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function n(u){const h={};return u.integrity&&(h.integrity=u.integrity),u.referrerPolicy&&(h.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?h.credentials="include":u.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function s(u){if(u.ep)return;u.ep=!0;const h=n(u);fetch(u.href,h)}})();var lO=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function xP(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var _P={exports:{}},ay={},wP={exports:{}},Qt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vf=Symbol.for("react.element"),uO=Symbol.for("react.portal"),cO=Symbol.for("react.fragment"),hO=Symbol.for("react.strict_mode"),dO=Symbol.for("react.profiler"),fO=Symbol.for("react.provider"),pO=Symbol.for("react.context"),mO=Symbol.for("react.forward_ref"),gO=Symbol.for("react.suspense"),yO=Symbol.for("react.memo"),vO=Symbol.for("react.lazy"),_2=Symbol.iterator;function xO(e){return e===null||typeof e!="object"?null:(e=_2&&e[_2]||e["@@iterator"],typeof e=="function"?e:null)}var bP={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},SP=Object.assign,EP={};function oh(e,t,n){this.props=e,this.context=t,this.refs=EP,this.updater=n||bP}oh.prototype.isReactComponent={};oh.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};oh.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function TP(){}TP.prototype=oh.prototype;function pw(e,t,n){this.props=e,this.context=t,this.refs=EP,this.updater=n||bP}var mw=pw.prototype=new TP;mw.constructor=pw;SP(mw,oh.prototype);mw.isPureReactComponent=!0;var w2=Array.isArray,CP=Object.prototype.hasOwnProperty,gw={current:null},PP={key:!0,ref:!0,__self:!0,__source:!0};function AP(e,t,n){var s,u={},h=null,f=null;if(t!=null)for(s in t.ref!==void 0&&(f=t.ref),t.key!==void 0&&(h=""+t.key),t)CP.call(t,s)&&!PP.hasOwnProperty(s)&&(u[s]=t[s]);var o=arguments.length-2;if(o===1)u.children=n;else if(1<o){for(var w=Array(o),b=0;b<o;b++)w[b]=arguments[b+2];u.children=w}if(e&&e.defaultProps)for(s in o=e.defaultProps,o)u[s]===void 0&&(u[s]=o[s]);return{$$typeof:Vf,type:e,key:h,ref:f,props:u,_owner:gw.current}}function _O(e,t){return{$$typeof:Vf,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function yw(e){return typeof e=="object"&&e!==null&&e.$$typeof===Vf}function wO(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var b2=/\/+/g;function wx(e,t){return typeof e=="object"&&e!==null&&e.key!=null?wO(""+e.key):t.toString(36)}function zm(e,t,n,s,u){var h=typeof e;(h==="undefined"||h==="boolean")&&(e=null);var f=!1;if(e===null)f=!0;else switch(h){case"string":case"number":f=!0;break;case"object":switch(e.$$typeof){case Vf:case uO:f=!0}}if(f)return f=e,u=u(f),e=s===""?"."+wx(f,0):s,w2(u)?(n="",e!=null&&(n=e.replace(b2,"$&/")+"/"),zm(u,t,n,"",function(b){return b})):u!=null&&(yw(u)&&(u=_O(u,n+(!u.key||f&&f.key===u.key?"":(""+u.key).replace(b2,"$&/")+"/")+e)),t.push(u)),1;if(f=0,s=s===""?".":s+":",w2(e))for(var o=0;o<e.length;o++){h=e[o];var w=s+wx(h,o);f+=zm(h,t,n,w,u)}else if(w=xO(e),typeof w=="function")for(e=w.call(e),o=0;!(h=e.next()).done;)h=h.value,w=s+wx(h,o++),f+=zm(h,t,n,w,u);else if(h==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return f}function um(e,t,n){if(e==null)return e;var s=[],u=0;return zm(e,s,"","",function(h){return t.call(n,h,u++)}),s}function bO(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Pi={current:null},Om={transition:null},SO={ReactCurrentDispatcher:Pi,ReactCurrentBatchConfig:Om,ReactCurrentOwner:gw};Qt.Children={map:um,forEach:function(e,t,n){um(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return um(e,function(){t++}),t},toArray:function(e){return um(e,function(t){return t})||[]},only:function(e){if(!yw(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Qt.Component=oh;Qt.Fragment=cO;Qt.Profiler=dO;Qt.PureComponent=pw;Qt.StrictMode=hO;Qt.Suspense=gO;Qt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=SO;Qt.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=SP({},e.props),u=e.key,h=e.ref,f=e._owner;if(t!=null){if(t.ref!==void 0&&(h=t.ref,f=gw.current),t.key!==void 0&&(u=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(w in t)CP.call(t,w)&&!PP.hasOwnProperty(w)&&(s[w]=t[w]===void 0&&o!==void 0?o[w]:t[w])}var w=arguments.length-2;if(w===1)s.children=n;else if(1<w){o=Array(w);for(var b=0;b<w;b++)o[b]=arguments[b+2];s.children=o}return{$$typeof:Vf,type:e.type,key:u,ref:h,props:s,_owner:f}};Qt.createContext=function(e){return e={$$typeof:pO,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:fO,_context:e},e.Consumer=e};Qt.createElement=AP;Qt.createFactory=function(e){var t=AP.bind(null,e);return t.type=e,t};Qt.createRef=function(){return{current:null}};Qt.forwardRef=function(e){return{$$typeof:mO,render:e}};Qt.isValidElement=yw;Qt.lazy=function(e){return{$$typeof:vO,_payload:{_status:-1,_result:e},_init:bO}};Qt.memo=function(e,t){return{$$typeof:yO,type:e,compare:t===void 0?null:t}};Qt.startTransition=function(e){var t=Om.transition;Om.transition={};try{e()}finally{Om.transition=t}};Qt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Qt.useCallback=function(e,t){return Pi.current.useCallback(e,t)};Qt.useContext=function(e){return Pi.current.useContext(e)};Qt.useDebugValue=function(){};Qt.useDeferredValue=function(e){return Pi.current.useDeferredValue(e)};Qt.useEffect=function(e,t){return Pi.current.useEffect(e,t)};Qt.useId=function(){return Pi.current.useId()};Qt.useImperativeHandle=function(e,t,n){return Pi.current.useImperativeHandle(e,t,n)};Qt.useInsertionEffect=function(e,t){return Pi.current.useInsertionEffect(e,t)};Qt.useLayoutEffect=function(e,t){return Pi.current.useLayoutEffect(e,t)};Qt.useMemo=function(e,t){return Pi.current.useMemo(e,t)};Qt.useReducer=function(e,t,n){return Pi.current.useReducer(e,t,n)};Qt.useRef=function(e){return Pi.current.useRef(e)};Qt.useState=function(e){return Pi.current.useState(e)};Qt.useSyncExternalStore=function(e,t,n){return Pi.current.useSyncExternalStore(e,t,n)};Qt.useTransition=function(){return Pi.current.useTransition()};Qt.version="18.2.0";wP.exports=Qt;var Q=wP.exports;const _t=xP(Q),kP=oO({__proto__:null,default:_t},[Q]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EO=Q,TO=Symbol.for("react.element"),CO=Symbol.for("react.fragment"),PO=Object.prototype.hasOwnProperty,AO=EO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,kO={key:!0,ref:!0,__self:!0,__source:!0};function IP(e,t,n){var s,u={},h=null,f=null;n!==void 0&&(h=""+n),t.key!==void 0&&(h=""+t.key),t.ref!==void 0&&(f=t.ref);for(s in t)PO.call(t,s)&&!kO.hasOwnProperty(s)&&(u[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)u[s]===void 0&&(u[s]=t[s]);return{$$typeof:TO,type:e,key:h,ref:f,props:u,_owner:AO.current}}ay.Fragment=CO;ay.jsx=IP;ay.jsxs=IP;_P.exports=ay;var vw=_P.exports;const rs=vw.Fragment,K=vw.jsx,Ne=vw.jsxs;var k_={},MP={exports:{}},os={},RP={exports:{}},DP={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(Re,Ke){var ft=Re.length;Re.push(Ke);e:for(;0<ft;){var Rt=ft-1>>>1,Bt=Re[Rt];if(0<u(Bt,Ke))Re[Rt]=Ke,Re[ft]=Bt,ft=Rt;else break e}}function n(Re){return Re.length===0?null:Re[0]}function s(Re){if(Re.length===0)return null;var Ke=Re[0],ft=Re.pop();if(ft!==Ke){Re[0]=ft;e:for(var Rt=0,Bt=Re.length,It=Bt>>>1;Rt<It;){var vn=2*(Rt+1)-1,hi=Re[vn],hr=vn+1,Zr=Re[hr];if(0>u(hi,ft))hr<Bt&&0>u(Zr,hi)?(Re[Rt]=Zr,Re[hr]=ft,Rt=hr):(Re[Rt]=hi,Re[vn]=ft,Rt=vn);else if(hr<Bt&&0>u(Zr,ft))Re[Rt]=Zr,Re[hr]=ft,Rt=hr;else break e}}return Ke}function u(Re,Ke){var ft=Re.sortIndex-Ke.sortIndex;return ft!==0?ft:Re.id-Ke.id}if(typeof performance=="object"&&typeof performance.now=="function"){var h=performance;e.unstable_now=function(){return h.now()}}else{var f=Date,o=f.now();e.unstable_now=function(){return f.now()-o}}var w=[],b=[],C=1,A=null,M=3,N=!1,V=!1,$=!1,G=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function H(Re){for(var Ke=n(b);Ke!==null;){if(Ke.callback===null)s(b);else if(Ke.startTime<=Re)s(b),Ke.sortIndex=Ke.expirationTime,t(w,Ke);else break;Ke=n(b)}}function J(Re){if($=!1,H(Re),!V)if(n(w)!==null)V=!0,ct(fe);else{var Ke=n(b);Ke!==null&&je(J,Ke.startTime-Re)}}function fe(Re,Ke){V=!1,$&&($=!1,F(ve),ve=-1),N=!0;var ft=M;try{for(H(Ke),A=n(w);A!==null&&(!(A.expirationTime>Ke)||Re&&!pt());){var Rt=A.callback;if(typeof Rt=="function"){A.callback=null,M=A.priorityLevel;var Bt=Rt(A.expirationTime<=Ke);Ke=e.unstable_now(),typeof Bt=="function"?A.callback=Bt:A===n(w)&&s(w),H(Ke)}else s(w);A=n(w)}if(A!==null)var It=!0;else{var vn=n(b);vn!==null&&je(J,vn.startTime-Ke),It=!1}return It}finally{A=null,M=ft,N=!1}}var Ee=!1,Pe=null,ve=-1,Ve=5,Me=-1;function pt(){return!(e.unstable_now()-Me<Ve)}function qe(){if(Pe!==null){var Re=e.unstable_now();Me=Re;var Ke=!0;try{Ke=Pe(!0,Re)}finally{Ke?it():(Ee=!1,Pe=null)}}else Ee=!1}var it;if(typeof B=="function")it=function(){B(qe)};else if(typeof MessageChannel<"u"){var ut=new MessageChannel,bt=ut.port2;ut.port1.onmessage=qe,it=function(){bt.postMessage(null)}}else it=function(){G(qe,0)};function ct(Re){Pe=Re,Ee||(Ee=!0,it())}function je(Re,Ke){ve=G(function(){Re(e.unstable_now())},Ke)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Re){Re.callback=null},e.unstable_continueExecution=function(){V||N||(V=!0,ct(fe))},e.unstable_forceFrameRate=function(Re){0>Re||125<Re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ve=0<Re?Math.floor(1e3/Re):5},e.unstable_getCurrentPriorityLevel=function(){return M},e.unstable_getFirstCallbackNode=function(){return n(w)},e.unstable_next=function(Re){switch(M){case 1:case 2:case 3:var Ke=3;break;default:Ke=M}var ft=M;M=Ke;try{return Re()}finally{M=ft}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Re,Ke){switch(Re){case 1:case 2:case 3:case 4:case 5:break;default:Re=3}var ft=M;M=Re;try{return Ke()}finally{M=ft}},e.unstable_scheduleCallback=function(Re,Ke,ft){var Rt=e.unstable_now();switch(typeof ft=="object"&&ft!==null?(ft=ft.delay,ft=typeof ft=="number"&&0<ft?Rt+ft:Rt):ft=Rt,Re){case 1:var Bt=-1;break;case 2:Bt=250;break;case 5:Bt=1073741823;break;case 4:Bt=1e4;break;default:Bt=5e3}return Bt=ft+Bt,Re={id:C++,callback:Ke,priorityLevel:Re,startTime:ft,expirationTime:Bt,sortIndex:-1},ft>Rt?(Re.sortIndex=ft,t(b,Re),n(w)===null&&Re===n(b)&&($?(F(ve),ve=-1):$=!0,je(J,ft-Rt))):(Re.sortIndex=Bt,t(w,Re),V||N||(V=!0,ct(fe))),Re},e.unstable_shouldYield=pt,e.unstable_wrapCallback=function(Re){var Ke=M;return function(){var ft=M;M=Ke;try{return Re.apply(this,arguments)}finally{M=ft}}}})(DP);RP.exports=DP;var IO=RP.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LP=Q,is=IO;function Qe(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var zP=new Set,uf={};function Cu(e,t){Gc(e,t),Gc(e+"Capture",t)}function Gc(e,t){for(uf[e]=t,e=0;e<t.length;e++)zP.add(t[e])}var fo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),I_=Object.prototype.hasOwnProperty,MO=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,S2={},E2={};function RO(e){return I_.call(E2,e)?!0:I_.call(S2,e)?!1:MO.test(e)?E2[e]=!0:(S2[e]=!0,!1)}function DO(e,t,n,s){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function LO(e,t,n,s){if(t===null||typeof t>"u"||DO(e,t,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ai(e,t,n,s,u,h,f){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=u,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=h,this.removeEmptyString=f}var qr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){qr[e]=new Ai(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];qr[t]=new Ai(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){qr[e]=new Ai(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){qr[e]=new Ai(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){qr[e]=new Ai(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){qr[e]=new Ai(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){qr[e]=new Ai(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){qr[e]=new Ai(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){qr[e]=new Ai(e,5,!1,e.toLowerCase(),null,!1,!1)});var xw=/[\-:]([a-z])/g;function _w(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(xw,_w);qr[t]=new Ai(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(xw,_w);qr[t]=new Ai(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(xw,_w);qr[t]=new Ai(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){qr[e]=new Ai(e,1,!1,e.toLowerCase(),null,!1,!1)});qr.xlinkHref=new Ai("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){qr[e]=new Ai(e,1,!1,e.toLowerCase(),null,!0,!0)});function ww(e,t,n,s){var u=qr.hasOwnProperty(t)?qr[t]:null;(u!==null?u.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(LO(t,n,u,s)&&(n=null),s||u===null?RO(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):u.mustUseProperty?e[u.propertyName]=n===null?u.type===3?!1:"":n:(t=u.attributeName,s=u.attributeNamespace,n===null?e.removeAttribute(t):(u=u.type,n=u===3||u===4&&n===!0?"":""+n,s?e.setAttributeNS(s,t,n):e.setAttribute(t,n))))}var vo=LP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,cm=Symbol.for("react.element"),vc=Symbol.for("react.portal"),xc=Symbol.for("react.fragment"),bw=Symbol.for("react.strict_mode"),M_=Symbol.for("react.profiler"),OP=Symbol.for("react.provider"),FP=Symbol.for("react.context"),Sw=Symbol.for("react.forward_ref"),R_=Symbol.for("react.suspense"),D_=Symbol.for("react.suspense_list"),Ew=Symbol.for("react.memo"),Ho=Symbol.for("react.lazy"),NP=Symbol.for("react.offscreen"),T2=Symbol.iterator;function Ed(e){return e===null||typeof e!="object"?null:(e=T2&&e[T2]||e["@@iterator"],typeof e=="function"?e:null)}var Hn=Object.assign,bx;function Nd(e){if(bx===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);bx=t&&t[1]||""}return`
`+bx+e}var Sx=!1;function Ex(e,t){if(!e||Sx)return"";Sx=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(b){var s=b}Reflect.construct(e,[],t)}else{try{t.call()}catch(b){s=b}e.call(t.prototype)}else{try{throw Error()}catch(b){s=b}e()}}catch(b){if(b&&s&&typeof b.stack=="string"){for(var u=b.stack.split(`
`),h=s.stack.split(`
`),f=u.length-1,o=h.length-1;1<=f&&0<=o&&u[f]!==h[o];)o--;for(;1<=f&&0<=o;f--,o--)if(u[f]!==h[o]){if(f!==1||o!==1)do if(f--,o--,0>o||u[f]!==h[o]){var w=`
`+u[f].replace(" at new "," at ");return e.displayName&&w.includes("<anonymous>")&&(w=w.replace("<anonymous>",e.displayName)),w}while(1<=f&&0<=o);break}}}finally{Sx=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Nd(e):""}function zO(e){switch(e.tag){case 5:return Nd(e.type);case 16:return Nd("Lazy");case 13:return Nd("Suspense");case 19:return Nd("SuspenseList");case 0:case 2:case 15:return e=Ex(e.type,!1),e;case 11:return e=Ex(e.type.render,!1),e;case 1:return e=Ex(e.type,!0),e;default:return""}}function L_(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case xc:return"Fragment";case vc:return"Portal";case M_:return"Profiler";case bw:return"StrictMode";case R_:return"Suspense";case D_:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case FP:return(e.displayName||"Context")+".Consumer";case OP:return(e._context.displayName||"Context")+".Provider";case Sw:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ew:return t=e.displayName||null,t!==null?t:L_(e.type)||"Memo";case Ho:t=e._payload,e=e._init;try{return L_(e(t))}catch{}}return null}function OO(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return L_(t);case 8:return t===bw?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function gl(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function BP(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function FO(e){var t=BP(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var u=n.get,h=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return u.call(this)},set:function(f){s=""+f,h.call(this,f)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(f){s=""+f},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function hm(e){e._valueTracker||(e._valueTracker=FO(e))}function VP(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),s="";return e&&(s=BP(e)?e.checked?"true":"false":e.value),e=s,e!==n?(t.setValue(e),!0):!1}function ug(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function z_(e,t){var n=t.checked;return Hn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function C2(e,t){var n=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;n=gl(t.value!=null?t.value:n),e._wrapperState={initialChecked:s,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function jP(e,t){t=t.checked,t!=null&&ww(e,"checked",t,!1)}function O_(e,t){jP(e,t);var n=gl(t.value),s=t.type;if(n!=null)s==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?F_(e,t.type,n):t.hasOwnProperty("defaultValue")&&F_(e,t.type,gl(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function P2(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function F_(e,t,n){(t!=="number"||ug(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Bd=Array.isArray;function Oc(e,t,n,s){if(e=e.options,t){t={};for(var u=0;u<n.length;u++)t["$"+n[u]]=!0;for(n=0;n<e.length;n++)u=t.hasOwnProperty("$"+e[n].value),e[n].selected!==u&&(e[n].selected=u),u&&s&&(e[n].defaultSelected=!0)}else{for(n=""+gl(n),t=null,u=0;u<e.length;u++){if(e[u].value===n){e[u].selected=!0,s&&(e[u].defaultSelected=!0);return}t!==null||e[u].disabled||(t=e[u])}t!==null&&(t.selected=!0)}}function N_(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Qe(91));return Hn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function A2(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Qe(92));if(Bd(n)){if(1<n.length)throw Error(Qe(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:gl(n)}}function $P(e,t){var n=gl(t.value),s=gl(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),s!=null&&(e.defaultValue=""+s)}function k2(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function UP(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function B_(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?UP(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var dm,qP=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,s,u){MSApp.execUnsafeLocalFunction(function(){return e(t,n,s,u)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(dm=dm||document.createElement("div"),dm.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=dm.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function cf(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Wd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},NO=["Webkit","ms","Moz","O"];Object.keys(Wd).forEach(function(e){NO.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Wd[t]=Wd[e]})});function GP(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Wd.hasOwnProperty(e)&&Wd[e]?(""+t).trim():t+"px"}function ZP(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var s=n.indexOf("--")===0,u=GP(n,t[n],s);n==="float"&&(n="cssFloat"),s?e.setProperty(n,u):e[n]=u}}var BO=Hn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function V_(e,t){if(t){if(BO[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Qe(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Qe(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Qe(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Qe(62))}}function j_(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $_=null;function Tw(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var U_=null,Fc=null,Nc=null;function I2(e){if(e=Uf(e)){if(typeof U_!="function")throw Error(Qe(280));var t=e.stateNode;t&&(t=hy(t),U_(e.stateNode,e.type,t))}}function WP(e){Fc?Nc?Nc.push(e):Nc=[e]:Fc=e}function HP(){if(Fc){var e=Fc,t=Nc;if(Nc=Fc=null,I2(e),t)for(e=0;e<t.length;e++)I2(t[e])}}function KP(e,t){return e(t)}function XP(){}var Tx=!1;function QP(e,t,n){if(Tx)return e(t,n);Tx=!0;try{return KP(e,t,n)}finally{Tx=!1,(Fc!==null||Nc!==null)&&(XP(),HP())}}function hf(e,t){var n=e.stateNode;if(n===null)return null;var s=hy(n);if(s===null)return null;n=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Qe(231,t,typeof n));return n}var q_=!1;if(fo)try{var Td={};Object.defineProperty(Td,"passive",{get:function(){q_=!0}}),window.addEventListener("test",Td,Td),window.removeEventListener("test",Td,Td)}catch{q_=!1}function VO(e,t,n,s,u,h,f,o,w){var b=Array.prototype.slice.call(arguments,3);try{t.apply(n,b)}catch(C){this.onError(C)}}var Hd=!1,cg=null,hg=!1,G_=null,jO={onError:function(e){Hd=!0,cg=e}};function $O(e,t,n,s,u,h,f,o,w){Hd=!1,cg=null,VO.apply(jO,arguments)}function UO(e,t,n,s,u,h,f,o,w){if($O.apply(this,arguments),Hd){if(Hd){var b=cg;Hd=!1,cg=null}else throw Error(Qe(198));hg||(hg=!0,G_=b)}}function Pu(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function YP(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function M2(e){if(Pu(e)!==e)throw Error(Qe(188))}function qO(e){var t=e.alternate;if(!t){if(t=Pu(e),t===null)throw Error(Qe(188));return t!==e?null:e}for(var n=e,s=t;;){var u=n.return;if(u===null)break;var h=u.alternate;if(h===null){if(s=u.return,s!==null){n=s;continue}break}if(u.child===h.child){for(h=u.child;h;){if(h===n)return M2(u),e;if(h===s)return M2(u),t;h=h.sibling}throw Error(Qe(188))}if(n.return!==s.return)n=u,s=h;else{for(var f=!1,o=u.child;o;){if(o===n){f=!0,n=u,s=h;break}if(o===s){f=!0,s=u,n=h;break}o=o.sibling}if(!f){for(o=h.child;o;){if(o===n){f=!0,n=h,s=u;break}if(o===s){f=!0,s=h,n=u;break}o=o.sibling}if(!f)throw Error(Qe(189))}}if(n.alternate!==s)throw Error(Qe(190))}if(n.tag!==3)throw Error(Qe(188));return n.stateNode.current===n?e:t}function JP(e){return e=qO(e),e!==null?eA(e):null}function eA(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=eA(e);if(t!==null)return t;e=e.sibling}return null}var tA=is.unstable_scheduleCallback,R2=is.unstable_cancelCallback,GO=is.unstable_shouldYield,ZO=is.unstable_requestPaint,cr=is.unstable_now,WO=is.unstable_getCurrentPriorityLevel,Cw=is.unstable_ImmediatePriority,nA=is.unstable_UserBlockingPriority,dg=is.unstable_NormalPriority,HO=is.unstable_LowPriority,rA=is.unstable_IdlePriority,oy=null,Ea=null;function KO(e){if(Ea&&typeof Ea.onCommitFiberRoot=="function")try{Ea.onCommitFiberRoot(oy,e,void 0,(e.current.flags&128)===128)}catch{}}var na=Math.clz32?Math.clz32:YO,XO=Math.log,QO=Math.LN2;function YO(e){return e>>>=0,e===0?32:31-(XO(e)/QO|0)|0}var fm=64,pm=4194304;function Vd(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function fg(e,t){var n=e.pendingLanes;if(n===0)return 0;var s=0,u=e.suspendedLanes,h=e.pingedLanes,f=n&268435455;if(f!==0){var o=f&~u;o!==0?s=Vd(o):(h&=f,h!==0&&(s=Vd(h)))}else f=n&~u,f!==0?s=Vd(f):h!==0&&(s=Vd(h));if(s===0)return 0;if(t!==0&&t!==s&&!(t&u)&&(u=s&-s,h=t&-t,u>=h||u===16&&(h&4194240)!==0))return t;if(s&4&&(s|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)n=31-na(t),u=1<<n,s|=e[n],t&=~u;return s}function JO(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function eF(e,t){for(var n=e.suspendedLanes,s=e.pingedLanes,u=e.expirationTimes,h=e.pendingLanes;0<h;){var f=31-na(h),o=1<<f,w=u[f];w===-1?(!(o&n)||o&s)&&(u[f]=JO(o,t)):w<=t&&(e.expiredLanes|=o),h&=~o}}function Z_(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function iA(){var e=fm;return fm<<=1,!(fm&4194240)&&(fm=64),e}function Cx(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function jf(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-na(t),e[t]=n}function tF(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<n;){var u=31-na(n),h=1<<u;t[u]=0,s[u]=-1,e[u]=-1,n&=~h}}function Pw(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var s=31-na(n),u=1<<s;u&t|e[s]&t&&(e[s]|=t),n&=~u}}var hn=0;function sA(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var aA,Aw,oA,lA,uA,W_=!1,mm=[],sl=null,al=null,ol=null,df=new Map,ff=new Map,Qo=[],nF="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function D2(e,t){switch(e){case"focusin":case"focusout":sl=null;break;case"dragenter":case"dragleave":al=null;break;case"mouseover":case"mouseout":ol=null;break;case"pointerover":case"pointerout":df.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ff.delete(t.pointerId)}}function Cd(e,t,n,s,u,h){return e===null||e.nativeEvent!==h?(e={blockedOn:t,domEventName:n,eventSystemFlags:s,nativeEvent:h,targetContainers:[u]},t!==null&&(t=Uf(t),t!==null&&Aw(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,u!==null&&t.indexOf(u)===-1&&t.push(u),e)}function rF(e,t,n,s,u){switch(t){case"focusin":return sl=Cd(sl,e,t,n,s,u),!0;case"dragenter":return al=Cd(al,e,t,n,s,u),!0;case"mouseover":return ol=Cd(ol,e,t,n,s,u),!0;case"pointerover":var h=u.pointerId;return df.set(h,Cd(df.get(h)||null,e,t,n,s,u)),!0;case"gotpointercapture":return h=u.pointerId,ff.set(h,Cd(ff.get(h)||null,e,t,n,s,u)),!0}return!1}function cA(e){var t=ou(e.target);if(t!==null){var n=Pu(t);if(n!==null){if(t=n.tag,t===13){if(t=YP(n),t!==null){e.blockedOn=t,uA(e.priority,function(){oA(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Fm(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=H_(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var s=new n.constructor(n.type,n);$_=s,n.target.dispatchEvent(s),$_=null}else return t=Uf(n),t!==null&&Aw(t),e.blockedOn=n,!1;t.shift()}return!0}function L2(e,t,n){Fm(e)&&n.delete(t)}function iF(){W_=!1,sl!==null&&Fm(sl)&&(sl=null),al!==null&&Fm(al)&&(al=null),ol!==null&&Fm(ol)&&(ol=null),df.forEach(L2),ff.forEach(L2)}function Pd(e,t){e.blockedOn===t&&(e.blockedOn=null,W_||(W_=!0,is.unstable_scheduleCallback(is.unstable_NormalPriority,iF)))}function pf(e){function t(u){return Pd(u,e)}if(0<mm.length){Pd(mm[0],e);for(var n=1;n<mm.length;n++){var s=mm[n];s.blockedOn===e&&(s.blockedOn=null)}}for(sl!==null&&Pd(sl,e),al!==null&&Pd(al,e),ol!==null&&Pd(ol,e),df.forEach(t),ff.forEach(t),n=0;n<Qo.length;n++)s=Qo[n],s.blockedOn===e&&(s.blockedOn=null);for(;0<Qo.length&&(n=Qo[0],n.blockedOn===null);)cA(n),n.blockedOn===null&&Qo.shift()}var Bc=vo.ReactCurrentBatchConfig,pg=!0;function sF(e,t,n,s){var u=hn,h=Bc.transition;Bc.transition=null;try{hn=1,kw(e,t,n,s)}finally{hn=u,Bc.transition=h}}function aF(e,t,n,s){var u=hn,h=Bc.transition;Bc.transition=null;try{hn=4,kw(e,t,n,s)}finally{hn=u,Bc.transition=h}}function kw(e,t,n,s){if(pg){var u=H_(e,t,n,s);if(u===null)Ox(e,t,s,mg,n),D2(e,s);else if(rF(u,e,t,n,s))s.stopPropagation();else if(D2(e,s),t&4&&-1<nF.indexOf(e)){for(;u!==null;){var h=Uf(u);if(h!==null&&aA(h),h=H_(e,t,n,s),h===null&&Ox(e,t,s,mg,n),h===u)break;u=h}u!==null&&s.stopPropagation()}else Ox(e,t,s,null,n)}}var mg=null;function H_(e,t,n,s){if(mg=null,e=Tw(s),e=ou(e),e!==null)if(t=Pu(e),t===null)e=null;else if(n=t.tag,n===13){if(e=YP(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return mg=e,null}function hA(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(WO()){case Cw:return 1;case nA:return 4;case dg:case HO:return 16;case rA:return 536870912;default:return 16}default:return 16}}var el=null,Iw=null,Nm=null;function dA(){if(Nm)return Nm;var e,t=Iw,n=t.length,s,u="value"in el?el.value:el.textContent,h=u.length;for(e=0;e<n&&t[e]===u[e];e++);var f=n-e;for(s=1;s<=f&&t[n-s]===u[h-s];s++);return Nm=u.slice(e,1<s?1-s:void 0)}function Bm(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function gm(){return!0}function z2(){return!1}function ls(e){function t(n,s,u,h,f){this._reactName=n,this._targetInst=u,this.type=s,this.nativeEvent=h,this.target=f,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(n=e[o],this[o]=n?n(h):h[o]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?gm:z2,this.isPropagationStopped=z2,this}return Hn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=gm)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=gm)},persist:function(){},isPersistent:gm}),t}var lh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Mw=ls(lh),$f=Hn({},lh,{view:0,detail:0}),oF=ls($f),Px,Ax,Ad,ly=Hn({},$f,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Rw,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ad&&(Ad&&e.type==="mousemove"?(Px=e.screenX-Ad.screenX,Ax=e.screenY-Ad.screenY):Ax=Px=0,Ad=e),Px)},movementY:function(e){return"movementY"in e?e.movementY:Ax}}),O2=ls(ly),lF=Hn({},ly,{dataTransfer:0}),uF=ls(lF),cF=Hn({},$f,{relatedTarget:0}),kx=ls(cF),hF=Hn({},lh,{animationName:0,elapsedTime:0,pseudoElement:0}),dF=ls(hF),fF=Hn({},lh,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),pF=ls(fF),mF=Hn({},lh,{data:0}),F2=ls(mF),gF={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yF={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vF={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xF(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=vF[e])?!!t[e]:!1}function Rw(){return xF}var _F=Hn({},$f,{key:function(e){if(e.key){var t=gF[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Bm(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?yF[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Rw,charCode:function(e){return e.type==="keypress"?Bm(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Bm(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),wF=ls(_F),bF=Hn({},ly,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),N2=ls(bF),SF=Hn({},$f,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Rw}),EF=ls(SF),TF=Hn({},lh,{propertyName:0,elapsedTime:0,pseudoElement:0}),CF=ls(TF),PF=Hn({},ly,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),AF=ls(PF),kF=[9,13,27,32],Dw=fo&&"CompositionEvent"in window,Kd=null;fo&&"documentMode"in document&&(Kd=document.documentMode);var IF=fo&&"TextEvent"in window&&!Kd,fA=fo&&(!Dw||Kd&&8<Kd&&11>=Kd),B2=String.fromCharCode(32),V2=!1;function pA(e,t){switch(e){case"keyup":return kF.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function mA(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var _c=!1;function MF(e,t){switch(e){case"compositionend":return mA(t);case"keypress":return t.which!==32?null:(V2=!0,B2);case"textInput":return e=t.data,e===B2&&V2?null:e;default:return null}}function RF(e,t){if(_c)return e==="compositionend"||!Dw&&pA(e,t)?(e=dA(),Nm=Iw=el=null,_c=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return fA&&t.locale!=="ko"?null:t.data;default:return null}}var DF={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function j2(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!DF[e.type]:t==="textarea"}function gA(e,t,n,s){WP(s),t=gg(t,"onChange"),0<t.length&&(n=new Mw("onChange","change",null,n,s),e.push({event:n,listeners:t}))}var Xd=null,mf=null;function LF(e){PA(e,0)}function uy(e){var t=Sc(e);if(VP(t))return e}function zF(e,t){if(e==="change")return t}var yA=!1;if(fo){var Ix;if(fo){var Mx="oninput"in document;if(!Mx){var $2=document.createElement("div");$2.setAttribute("oninput","return;"),Mx=typeof $2.oninput=="function"}Ix=Mx}else Ix=!1;yA=Ix&&(!document.documentMode||9<document.documentMode)}function U2(){Xd&&(Xd.detachEvent("onpropertychange",vA),mf=Xd=null)}function vA(e){if(e.propertyName==="value"&&uy(mf)){var t=[];gA(t,mf,e,Tw(e)),QP(LF,t)}}function OF(e,t,n){e==="focusin"?(U2(),Xd=t,mf=n,Xd.attachEvent("onpropertychange",vA)):e==="focusout"&&U2()}function FF(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return uy(mf)}function NF(e,t){if(e==="click")return uy(t)}function BF(e,t){if(e==="input"||e==="change")return uy(t)}function VF(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ia=typeof Object.is=="function"?Object.is:VF;function gf(e,t){if(ia(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var u=n[s];if(!I_.call(t,u)||!ia(e[u],t[u]))return!1}return!0}function q2(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function G2(e,t){var n=q2(e);e=0;for(var s;n;){if(n.nodeType===3){if(s=e+n.textContent.length,e<=t&&s>=t)return{node:n,offset:t-e};e=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=q2(n)}}function xA(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?xA(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function _A(){for(var e=window,t=ug();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=ug(e.document)}return t}function Lw(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function jF(e){var t=_A(),n=e.focusedElem,s=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&xA(n.ownerDocument.documentElement,n)){if(s!==null&&Lw(n)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var u=n.textContent.length,h=Math.min(s.start,u);s=s.end===void 0?h:Math.min(s.end,u),!e.extend&&h>s&&(u=s,s=h,h=u),u=G2(n,h);var f=G2(n,s);u&&f&&(e.rangeCount!==1||e.anchorNode!==u.node||e.anchorOffset!==u.offset||e.focusNode!==f.node||e.focusOffset!==f.offset)&&(t=t.createRange(),t.setStart(u.node,u.offset),e.removeAllRanges(),h>s?(e.addRange(t),e.extend(f.node,f.offset)):(t.setEnd(f.node,f.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var $F=fo&&"documentMode"in document&&11>=document.documentMode,wc=null,K_=null,Qd=null,X_=!1;function Z2(e,t,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;X_||wc==null||wc!==ug(s)||(s=wc,"selectionStart"in s&&Lw(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Qd&&gf(Qd,s)||(Qd=s,s=gg(K_,"onSelect"),0<s.length&&(t=new Mw("onSelect","select",null,t,n),e.push({event:t,listeners:s}),t.target=wc)))}function ym(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var bc={animationend:ym("Animation","AnimationEnd"),animationiteration:ym("Animation","AnimationIteration"),animationstart:ym("Animation","AnimationStart"),transitionend:ym("Transition","TransitionEnd")},Rx={},wA={};fo&&(wA=document.createElement("div").style,"AnimationEvent"in window||(delete bc.animationend.animation,delete bc.animationiteration.animation,delete bc.animationstart.animation),"TransitionEvent"in window||delete bc.transitionend.transition);function cy(e){if(Rx[e])return Rx[e];if(!bc[e])return e;var t=bc[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in wA)return Rx[e]=t[n];return e}var bA=cy("animationend"),SA=cy("animationiteration"),EA=cy("animationstart"),TA=cy("transitionend"),CA=new Map,W2="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function El(e,t){CA.set(e,t),Cu(t,[e])}for(var Dx=0;Dx<W2.length;Dx++){var Lx=W2[Dx],UF=Lx.toLowerCase(),qF=Lx[0].toUpperCase()+Lx.slice(1);El(UF,"on"+qF)}El(bA,"onAnimationEnd");El(SA,"onAnimationIteration");El(EA,"onAnimationStart");El("dblclick","onDoubleClick");El("focusin","onFocus");El("focusout","onBlur");El(TA,"onTransitionEnd");Gc("onMouseEnter",["mouseout","mouseover"]);Gc("onMouseLeave",["mouseout","mouseover"]);Gc("onPointerEnter",["pointerout","pointerover"]);Gc("onPointerLeave",["pointerout","pointerover"]);Cu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Cu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Cu("onBeforeInput",["compositionend","keypress","textInput","paste"]);Cu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Cu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Cu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),GF=new Set("cancel close invalid load scroll toggle".split(" ").concat(jd));function H2(e,t,n){var s=e.type||"unknown-event";e.currentTarget=n,UO(s,t,void 0,e),e.currentTarget=null}function PA(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var s=e[n],u=s.event;s=s.listeners;e:{var h=void 0;if(t)for(var f=s.length-1;0<=f;f--){var o=s[f],w=o.instance,b=o.currentTarget;if(o=o.listener,w!==h&&u.isPropagationStopped())break e;H2(u,o,b),h=w}else for(f=0;f<s.length;f++){if(o=s[f],w=o.instance,b=o.currentTarget,o=o.listener,w!==h&&u.isPropagationStopped())break e;H2(u,o,b),h=w}}}if(hg)throw e=G_,hg=!1,G_=null,e}function Dn(e,t){var n=t[t0];n===void 0&&(n=t[t0]=new Set);var s=e+"__bubble";n.has(s)||(AA(t,e,2,!1),n.add(s))}function zx(e,t,n){var s=0;t&&(s|=4),AA(n,e,s,t)}var vm="_reactListening"+Math.random().toString(36).slice(2);function yf(e){if(!e[vm]){e[vm]=!0,zP.forEach(function(n){n!=="selectionchange"&&(GF.has(n)||zx(n,!1,e),zx(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[vm]||(t[vm]=!0,zx("selectionchange",!1,t))}}function AA(e,t,n,s){switch(hA(t)){case 1:var u=sF;break;case 4:u=aF;break;default:u=kw}n=u.bind(null,t,n,e),u=void 0,!q_||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(u=!0),s?u!==void 0?e.addEventListener(t,n,{capture:!0,passive:u}):e.addEventListener(t,n,!0):u!==void 0?e.addEventListener(t,n,{passive:u}):e.addEventListener(t,n,!1)}function Ox(e,t,n,s,u){var h=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var f=s.tag;if(f===3||f===4){var o=s.stateNode.containerInfo;if(o===u||o.nodeType===8&&o.parentNode===u)break;if(f===4)for(f=s.return;f!==null;){var w=f.tag;if((w===3||w===4)&&(w=f.stateNode.containerInfo,w===u||w.nodeType===8&&w.parentNode===u))return;f=f.return}for(;o!==null;){if(f=ou(o),f===null)return;if(w=f.tag,w===5||w===6){s=h=f;continue e}o=o.parentNode}}s=s.return}QP(function(){var b=h,C=Tw(n),A=[];e:{var M=CA.get(e);if(M!==void 0){var N=Mw,V=e;switch(e){case"keypress":if(Bm(n)===0)break e;case"keydown":case"keyup":N=wF;break;case"focusin":V="focus",N=kx;break;case"focusout":V="blur",N=kx;break;case"beforeblur":case"afterblur":N=kx;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":N=O2;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":N=uF;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":N=EF;break;case bA:case SA:case EA:N=dF;break;case TA:N=CF;break;case"scroll":N=oF;break;case"wheel":N=AF;break;case"copy":case"cut":case"paste":N=pF;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":N=N2}var $=(t&4)!==0,G=!$&&e==="scroll",F=$?M!==null?M+"Capture":null:M;$=[];for(var B=b,H;B!==null;){H=B;var J=H.stateNode;if(H.tag===5&&J!==null&&(H=J,F!==null&&(J=hf(B,F),J!=null&&$.push(vf(B,J,H)))),G)break;B=B.return}0<$.length&&(M=new N(M,V,null,n,C),A.push({event:M,listeners:$}))}}if(!(t&7)){e:{if(M=e==="mouseover"||e==="pointerover",N=e==="mouseout"||e==="pointerout",M&&n!==$_&&(V=n.relatedTarget||n.fromElement)&&(ou(V)||V[po]))break e;if((N||M)&&(M=C.window===C?C:(M=C.ownerDocument)?M.defaultView||M.parentWindow:window,N?(V=n.relatedTarget||n.toElement,N=b,V=V?ou(V):null,V!==null&&(G=Pu(V),V!==G||V.tag!==5&&V.tag!==6)&&(V=null)):(N=null,V=b),N!==V)){if($=O2,J="onMouseLeave",F="onMouseEnter",B="mouse",(e==="pointerout"||e==="pointerover")&&($=N2,J="onPointerLeave",F="onPointerEnter",B="pointer"),G=N==null?M:Sc(N),H=V==null?M:Sc(V),M=new $(J,B+"leave",N,n,C),M.target=G,M.relatedTarget=H,J=null,ou(C)===b&&($=new $(F,B+"enter",V,n,C),$.target=H,$.relatedTarget=G,J=$),G=J,N&&V)t:{for($=N,F=V,B=0,H=$;H;H=pc(H))B++;for(H=0,J=F;J;J=pc(J))H++;for(;0<B-H;)$=pc($),B--;for(;0<H-B;)F=pc(F),H--;for(;B--;){if($===F||F!==null&&$===F.alternate)break t;$=pc($),F=pc(F)}$=null}else $=null;N!==null&&K2(A,M,N,$,!1),V!==null&&G!==null&&K2(A,G,V,$,!0)}}e:{if(M=b?Sc(b):window,N=M.nodeName&&M.nodeName.toLowerCase(),N==="select"||N==="input"&&M.type==="file")var fe=zF;else if(j2(M))if(yA)fe=BF;else{fe=FF;var Ee=OF}else(N=M.nodeName)&&N.toLowerCase()==="input"&&(M.type==="checkbox"||M.type==="radio")&&(fe=NF);if(fe&&(fe=fe(e,b))){gA(A,fe,n,C);break e}Ee&&Ee(e,M,b),e==="focusout"&&(Ee=M._wrapperState)&&Ee.controlled&&M.type==="number"&&F_(M,"number",M.value)}switch(Ee=b?Sc(b):window,e){case"focusin":(j2(Ee)||Ee.contentEditable==="true")&&(wc=Ee,K_=b,Qd=null);break;case"focusout":Qd=K_=wc=null;break;case"mousedown":X_=!0;break;case"contextmenu":case"mouseup":case"dragend":X_=!1,Z2(A,n,C);break;case"selectionchange":if($F)break;case"keydown":case"keyup":Z2(A,n,C)}var Pe;if(Dw)e:{switch(e){case"compositionstart":var ve="onCompositionStart";break e;case"compositionend":ve="onCompositionEnd";break e;case"compositionupdate":ve="onCompositionUpdate";break e}ve=void 0}else _c?pA(e,n)&&(ve="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(ve="onCompositionStart");ve&&(fA&&n.locale!=="ko"&&(_c||ve!=="onCompositionStart"?ve==="onCompositionEnd"&&_c&&(Pe=dA()):(el=C,Iw="value"in el?el.value:el.textContent,_c=!0)),Ee=gg(b,ve),0<Ee.length&&(ve=new F2(ve,e,null,n,C),A.push({event:ve,listeners:Ee}),Pe?ve.data=Pe:(Pe=mA(n),Pe!==null&&(ve.data=Pe)))),(Pe=IF?MF(e,n):RF(e,n))&&(b=gg(b,"onBeforeInput"),0<b.length&&(C=new F2("onBeforeInput","beforeinput",null,n,C),A.push({event:C,listeners:b}),C.data=Pe))}PA(A,t)})}function vf(e,t,n){return{instance:e,listener:t,currentTarget:n}}function gg(e,t){for(var n=t+"Capture",s=[];e!==null;){var u=e,h=u.stateNode;u.tag===5&&h!==null&&(u=h,h=hf(e,n),h!=null&&s.unshift(vf(e,h,u)),h=hf(e,t),h!=null&&s.push(vf(e,h,u))),e=e.return}return s}function pc(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function K2(e,t,n,s,u){for(var h=t._reactName,f=[];n!==null&&n!==s;){var o=n,w=o.alternate,b=o.stateNode;if(w!==null&&w===s)break;o.tag===5&&b!==null&&(o=b,u?(w=hf(n,h),w!=null&&f.unshift(vf(n,w,o))):u||(w=hf(n,h),w!=null&&f.push(vf(n,w,o)))),n=n.return}f.length!==0&&e.push({event:t,listeners:f})}var ZF=/\r\n?/g,WF=/\u0000|\uFFFD/g;function X2(e){return(typeof e=="string"?e:""+e).replace(ZF,`
`).replace(WF,"")}function xm(e,t,n){if(t=X2(t),X2(e)!==t&&n)throw Error(Qe(425))}function yg(){}var Q_=null,Y_=null;function J_(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var e0=typeof setTimeout=="function"?setTimeout:void 0,HF=typeof clearTimeout=="function"?clearTimeout:void 0,Q2=typeof Promise=="function"?Promise:void 0,KF=typeof queueMicrotask=="function"?queueMicrotask:typeof Q2<"u"?function(e){return Q2.resolve(null).then(e).catch(XF)}:e0;function XF(e){setTimeout(function(){throw e})}function Fx(e,t){var n=t,s=0;do{var u=n.nextSibling;if(e.removeChild(n),u&&u.nodeType===8)if(n=u.data,n==="/$"){if(s===0){e.removeChild(u),pf(t);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=u}while(n);pf(t)}function ll(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Y2(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var uh=Math.random().toString(36).slice(2),wa="__reactFiber$"+uh,xf="__reactProps$"+uh,po="__reactContainer$"+uh,t0="__reactEvents$"+uh,QF="__reactListeners$"+uh,YF="__reactHandles$"+uh;function ou(e){var t=e[wa];if(t)return t;for(var n=e.parentNode;n;){if(t=n[po]||n[wa]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Y2(e);e!==null;){if(n=e[wa])return n;e=Y2(e)}return t}e=n,n=e.parentNode}return null}function Uf(e){return e=e[wa]||e[po],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Sc(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Qe(33))}function hy(e){return e[xf]||null}var n0=[],Ec=-1;function Tl(e){return{current:e}}function zn(e){0>Ec||(e.current=n0[Ec],n0[Ec]=null,Ec--)}function Pn(e,t){Ec++,n0[Ec]=e.current,e.current=t}var yl={},ci=Tl(yl),$i=Tl(!1),xu=yl;function Zc(e,t){var n=e.type.contextTypes;if(!n)return yl;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var u={},h;for(h in n)u[h]=t[h];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=u),u}function Ui(e){return e=e.childContextTypes,e!=null}function vg(){zn($i),zn(ci)}function J2(e,t,n){if(ci.current!==yl)throw Error(Qe(168));Pn(ci,t),Pn($i,n)}function kA(e,t,n){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var u in s)if(!(u in t))throw Error(Qe(108,OO(e)||"Unknown",u));return Hn({},n,s)}function xg(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||yl,xu=ci.current,Pn(ci,e),Pn($i,$i.current),!0}function eE(e,t,n){var s=e.stateNode;if(!s)throw Error(Qe(169));n?(e=kA(e,t,xu),s.__reactInternalMemoizedMergedChildContext=e,zn($i),zn(ci),Pn(ci,e)):zn($i),Pn($i,n)}var Ja=null,dy=!1,Nx=!1;function IA(e){Ja===null?Ja=[e]:Ja.push(e)}function JF(e){dy=!0,IA(e)}function Cl(){if(!Nx&&Ja!==null){Nx=!0;var e=0,t=hn;try{var n=Ja;for(hn=1;e<n.length;e++){var s=n[e];do s=s(!0);while(s!==null)}Ja=null,dy=!1}catch(u){throw Ja!==null&&(Ja=Ja.slice(e+1)),tA(Cw,Cl),u}finally{hn=t,Nx=!1}}return null}var Tc=[],Cc=0,_g=null,wg=0,Ts=[],Cs=0,_u=null,no=1,ro="";function Jl(e,t){Tc[Cc++]=wg,Tc[Cc++]=_g,_g=e,wg=t}function MA(e,t,n){Ts[Cs++]=no,Ts[Cs++]=ro,Ts[Cs++]=_u,_u=e;var s=no;e=ro;var u=32-na(s)-1;s&=~(1<<u),n+=1;var h=32-na(t)+u;if(30<h){var f=u-u%5;h=(s&(1<<f)-1).toString(32),s>>=f,u-=f,no=1<<32-na(t)+u|n<<u|s,ro=h+e}else no=1<<h|n<<u|s,ro=e}function zw(e){e.return!==null&&(Jl(e,1),MA(e,1,0))}function Ow(e){for(;e===_g;)_g=Tc[--Cc],Tc[Cc]=null,wg=Tc[--Cc],Tc[Cc]=null;for(;e===_u;)_u=Ts[--Cs],Ts[Cs]=null,ro=Ts[--Cs],Ts[Cs]=null,no=Ts[--Cs],Ts[Cs]=null}var ns=null,es=null,Vn=!1,Js=null;function RA(e,t){var n=As(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function tE(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ns=e,es=ll(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ns=e,es=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=_u!==null?{id:no,overflow:ro}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=As(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,ns=e,es=null,!0):!1;default:return!1}}function r0(e){return(e.mode&1)!==0&&(e.flags&128)===0}function i0(e){if(Vn){var t=es;if(t){var n=t;if(!tE(e,t)){if(r0(e))throw Error(Qe(418));t=ll(n.nextSibling);var s=ns;t&&tE(e,t)?RA(s,n):(e.flags=e.flags&-4097|2,Vn=!1,ns=e)}}else{if(r0(e))throw Error(Qe(418));e.flags=e.flags&-4097|2,Vn=!1,ns=e}}}function nE(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ns=e}function _m(e){if(e!==ns)return!1;if(!Vn)return nE(e),Vn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!J_(e.type,e.memoizedProps)),t&&(t=es)){if(r0(e))throw DA(),Error(Qe(418));for(;t;)RA(e,t),t=ll(t.nextSibling)}if(nE(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Qe(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){es=ll(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}es=null}}else es=ns?ll(e.stateNode.nextSibling):null;return!0}function DA(){for(var e=es;e;)e=ll(e.nextSibling)}function Wc(){es=ns=null,Vn=!1}function Fw(e){Js===null?Js=[e]:Js.push(e)}var eN=vo.ReactCurrentBatchConfig;function Ks(e,t){if(e&&e.defaultProps){t=Hn({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var bg=Tl(null),Sg=null,Pc=null,Nw=null;function Bw(){Nw=Pc=Sg=null}function Vw(e){var t=bg.current;zn(bg),e._currentValue=t}function s0(e,t,n){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===n)break;e=e.return}}function Vc(e,t){Sg=e,Nw=Pc=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ji=!0),e.firstContext=null)}function Ms(e){var t=e._currentValue;if(Nw!==e)if(e={context:e,memoizedValue:t,next:null},Pc===null){if(Sg===null)throw Error(Qe(308));Pc=e,Sg.dependencies={lanes:0,firstContext:e}}else Pc=Pc.next=e;return t}var lu=null;function jw(e){lu===null?lu=[e]:lu.push(e)}function LA(e,t,n,s){var u=t.interleaved;return u===null?(n.next=n,jw(t)):(n.next=u.next,u.next=n),t.interleaved=n,mo(e,s)}function mo(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Ko=!1;function $w(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zA(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function oo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ul(e,t,n){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,rn&2){var u=s.pending;return u===null?t.next=t:(t.next=u.next,u.next=t),s.pending=t,mo(e,n)}return u=s.interleaved,u===null?(t.next=t,jw(s)):(t.next=u.next,u.next=t),s.interleaved=t,mo(e,n)}function Vm(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,Pw(e,n)}}function rE(e,t){var n=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var u=null,h=null;if(n=n.firstBaseUpdate,n!==null){do{var f={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};h===null?u=h=f:h=h.next=f,n=n.next}while(n!==null);h===null?u=h=t:h=h.next=t}else u=h=t;n={baseState:s.baseState,firstBaseUpdate:u,lastBaseUpdate:h,shared:s.shared,effects:s.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Eg(e,t,n,s){var u=e.updateQueue;Ko=!1;var h=u.firstBaseUpdate,f=u.lastBaseUpdate,o=u.shared.pending;if(o!==null){u.shared.pending=null;var w=o,b=w.next;w.next=null,f===null?h=b:f.next=b,f=w;var C=e.alternate;C!==null&&(C=C.updateQueue,o=C.lastBaseUpdate,o!==f&&(o===null?C.firstBaseUpdate=b:o.next=b,C.lastBaseUpdate=w))}if(h!==null){var A=u.baseState;f=0,C=b=w=null,o=h;do{var M=o.lane,N=o.eventTime;if((s&M)===M){C!==null&&(C=C.next={eventTime:N,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var V=e,$=o;switch(M=t,N=n,$.tag){case 1:if(V=$.payload,typeof V=="function"){A=V.call(N,A,M);break e}A=V;break e;case 3:V.flags=V.flags&-65537|128;case 0:if(V=$.payload,M=typeof V=="function"?V.call(N,A,M):V,M==null)break e;A=Hn({},A,M);break e;case 2:Ko=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,M=u.effects,M===null?u.effects=[o]:M.push(o))}else N={eventTime:N,lane:M,tag:o.tag,payload:o.payload,callback:o.callback,next:null},C===null?(b=C=N,w=A):C=C.next=N,f|=M;if(o=o.next,o===null){if(o=u.shared.pending,o===null)break;M=o,o=M.next,M.next=null,u.lastBaseUpdate=M,u.shared.pending=null}}while(1);if(C===null&&(w=A),u.baseState=w,u.firstBaseUpdate=b,u.lastBaseUpdate=C,t=u.shared.interleaved,t!==null){u=t;do f|=u.lane,u=u.next;while(u!==t)}else h===null&&(u.shared.lanes=0);bu|=f,e.lanes=f,e.memoizedState=A}}function iE(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],u=s.callback;if(u!==null){if(s.callback=null,s=n,typeof u!="function")throw Error(Qe(191,u));u.call(s)}}}var OA=new LP.Component().refs;function a0(e,t,n,s){t=e.memoizedState,n=n(s,t),n=n==null?t:Hn({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var fy={isMounted:function(e){return(e=e._reactInternals)?Pu(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var s=Ci(),u=hl(e),h=oo(s,u);h.payload=t,n!=null&&(h.callback=n),t=ul(e,h,u),t!==null&&(ra(t,e,u,s),Vm(t,e,u))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var s=Ci(),u=hl(e),h=oo(s,u);h.tag=1,h.payload=t,n!=null&&(h.callback=n),t=ul(e,h,u),t!==null&&(ra(t,e,u,s),Vm(t,e,u))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ci(),s=hl(e),u=oo(n,s);u.tag=2,t!=null&&(u.callback=t),t=ul(e,u,s),t!==null&&(ra(t,e,s,n),Vm(t,e,s))}};function sE(e,t,n,s,u,h,f){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,h,f):t.prototype&&t.prototype.isPureReactComponent?!gf(n,s)||!gf(u,h):!0}function FA(e,t,n){var s=!1,u=yl,h=t.contextType;return typeof h=="object"&&h!==null?h=Ms(h):(u=Ui(t)?xu:ci.current,s=t.contextTypes,h=(s=s!=null)?Zc(e,u):yl),t=new t(n,h),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=fy,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=u,e.__reactInternalMemoizedMaskedChildContext=h),t}function aE(e,t,n,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,s),t.state!==e&&fy.enqueueReplaceState(t,t.state,null)}function o0(e,t,n,s){var u=e.stateNode;u.props=n,u.state=e.memoizedState,u.refs=OA,$w(e);var h=t.contextType;typeof h=="object"&&h!==null?u.context=Ms(h):(h=Ui(t)?xu:ci.current,u.context=Zc(e,h)),u.state=e.memoizedState,h=t.getDerivedStateFromProps,typeof h=="function"&&(a0(e,t,h,n),u.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof u.getSnapshotBeforeUpdate=="function"||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(t=u.state,typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount(),t!==u.state&&fy.enqueueReplaceState(u,u.state,null),Eg(e,n,u,s),u.state=e.memoizedState),typeof u.componentDidMount=="function"&&(e.flags|=4194308)}function kd(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Qe(309));var s=n.stateNode}if(!s)throw Error(Qe(147,e));var u=s,h=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===h?t.ref:(t=function(f){var o=u.refs;o===OA&&(o=u.refs={}),f===null?delete o[h]:o[h]=f},t._stringRef=h,t)}if(typeof e!="string")throw Error(Qe(284));if(!n._owner)throw Error(Qe(290,e))}return e}function wm(e,t){throw e=Object.prototype.toString.call(t),Error(Qe(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function oE(e){var t=e._init;return t(e._payload)}function NA(e){function t(F,B){if(e){var H=F.deletions;H===null?(F.deletions=[B],F.flags|=16):H.push(B)}}function n(F,B){if(!e)return null;for(;B!==null;)t(F,B),B=B.sibling;return null}function s(F,B){for(F=new Map;B!==null;)B.key!==null?F.set(B.key,B):F.set(B.index,B),B=B.sibling;return F}function u(F,B){return F=dl(F,B),F.index=0,F.sibling=null,F}function h(F,B,H){return F.index=H,e?(H=F.alternate,H!==null?(H=H.index,H<B?(F.flags|=2,B):H):(F.flags|=2,B)):(F.flags|=1048576,B)}function f(F){return e&&F.alternate===null&&(F.flags|=2),F}function o(F,B,H,J){return B===null||B.tag!==6?(B=Gx(H,F.mode,J),B.return=F,B):(B=u(B,H),B.return=F,B)}function w(F,B,H,J){var fe=H.type;return fe===xc?C(F,B,H.props.children,J,H.key):B!==null&&(B.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===Ho&&oE(fe)===B.type)?(J=u(B,H.props),J.ref=kd(F,B,H),J.return=F,J):(J=Zm(H.type,H.key,H.props,null,F.mode,J),J.ref=kd(F,B,H),J.return=F,J)}function b(F,B,H,J){return B===null||B.tag!==4||B.stateNode.containerInfo!==H.containerInfo||B.stateNode.implementation!==H.implementation?(B=Zx(H,F.mode,J),B.return=F,B):(B=u(B,H.children||[]),B.return=F,B)}function C(F,B,H,J,fe){return B===null||B.tag!==7?(B=yu(H,F.mode,J,fe),B.return=F,B):(B=u(B,H),B.return=F,B)}function A(F,B,H){if(typeof B=="string"&&B!==""||typeof B=="number")return B=Gx(""+B,F.mode,H),B.return=F,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case cm:return H=Zm(B.type,B.key,B.props,null,F.mode,H),H.ref=kd(F,null,B),H.return=F,H;case vc:return B=Zx(B,F.mode,H),B.return=F,B;case Ho:var J=B._init;return A(F,J(B._payload),H)}if(Bd(B)||Ed(B))return B=yu(B,F.mode,H,null),B.return=F,B;wm(F,B)}return null}function M(F,B,H,J){var fe=B!==null?B.key:null;if(typeof H=="string"&&H!==""||typeof H=="number")return fe!==null?null:o(F,B,""+H,J);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case cm:return H.key===fe?w(F,B,H,J):null;case vc:return H.key===fe?b(F,B,H,J):null;case Ho:return fe=H._init,M(F,B,fe(H._payload),J)}if(Bd(H)||Ed(H))return fe!==null?null:C(F,B,H,J,null);wm(F,H)}return null}function N(F,B,H,J,fe){if(typeof J=="string"&&J!==""||typeof J=="number")return F=F.get(H)||null,o(B,F,""+J,fe);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case cm:return F=F.get(J.key===null?H:J.key)||null,w(B,F,J,fe);case vc:return F=F.get(J.key===null?H:J.key)||null,b(B,F,J,fe);case Ho:var Ee=J._init;return N(F,B,H,Ee(J._payload),fe)}if(Bd(J)||Ed(J))return F=F.get(H)||null,C(B,F,J,fe,null);wm(B,J)}return null}function V(F,B,H,J){for(var fe=null,Ee=null,Pe=B,ve=B=0,Ve=null;Pe!==null&&ve<H.length;ve++){Pe.index>ve?(Ve=Pe,Pe=null):Ve=Pe.sibling;var Me=M(F,Pe,H[ve],J);if(Me===null){Pe===null&&(Pe=Ve);break}e&&Pe&&Me.alternate===null&&t(F,Pe),B=h(Me,B,ve),Ee===null?fe=Me:Ee.sibling=Me,Ee=Me,Pe=Ve}if(ve===H.length)return n(F,Pe),Vn&&Jl(F,ve),fe;if(Pe===null){for(;ve<H.length;ve++)Pe=A(F,H[ve],J),Pe!==null&&(B=h(Pe,B,ve),Ee===null?fe=Pe:Ee.sibling=Pe,Ee=Pe);return Vn&&Jl(F,ve),fe}for(Pe=s(F,Pe);ve<H.length;ve++)Ve=N(Pe,F,ve,H[ve],J),Ve!==null&&(e&&Ve.alternate!==null&&Pe.delete(Ve.key===null?ve:Ve.key),B=h(Ve,B,ve),Ee===null?fe=Ve:Ee.sibling=Ve,Ee=Ve);return e&&Pe.forEach(function(pt){return t(F,pt)}),Vn&&Jl(F,ve),fe}function $(F,B,H,J){var fe=Ed(H);if(typeof fe!="function")throw Error(Qe(150));if(H=fe.call(H),H==null)throw Error(Qe(151));for(var Ee=fe=null,Pe=B,ve=B=0,Ve=null,Me=H.next();Pe!==null&&!Me.done;ve++,Me=H.next()){Pe.index>ve?(Ve=Pe,Pe=null):Ve=Pe.sibling;var pt=M(F,Pe,Me.value,J);if(pt===null){Pe===null&&(Pe=Ve);break}e&&Pe&&pt.alternate===null&&t(F,Pe),B=h(pt,B,ve),Ee===null?fe=pt:Ee.sibling=pt,Ee=pt,Pe=Ve}if(Me.done)return n(F,Pe),Vn&&Jl(F,ve),fe;if(Pe===null){for(;!Me.done;ve++,Me=H.next())Me=A(F,Me.value,J),Me!==null&&(B=h(Me,B,ve),Ee===null?fe=Me:Ee.sibling=Me,Ee=Me);return Vn&&Jl(F,ve),fe}for(Pe=s(F,Pe);!Me.done;ve++,Me=H.next())Me=N(Pe,F,ve,Me.value,J),Me!==null&&(e&&Me.alternate!==null&&Pe.delete(Me.key===null?ve:Me.key),B=h(Me,B,ve),Ee===null?fe=Me:Ee.sibling=Me,Ee=Me);return e&&Pe.forEach(function(qe){return t(F,qe)}),Vn&&Jl(F,ve),fe}function G(F,B,H,J){if(typeof H=="object"&&H!==null&&H.type===xc&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case cm:e:{for(var fe=H.key,Ee=B;Ee!==null;){if(Ee.key===fe){if(fe=H.type,fe===xc){if(Ee.tag===7){n(F,Ee.sibling),B=u(Ee,H.props.children),B.return=F,F=B;break e}}else if(Ee.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===Ho&&oE(fe)===Ee.type){n(F,Ee.sibling),B=u(Ee,H.props),B.ref=kd(F,Ee,H),B.return=F,F=B;break e}n(F,Ee);break}else t(F,Ee);Ee=Ee.sibling}H.type===xc?(B=yu(H.props.children,F.mode,J,H.key),B.return=F,F=B):(J=Zm(H.type,H.key,H.props,null,F.mode,J),J.ref=kd(F,B,H),J.return=F,F=J)}return f(F);case vc:e:{for(Ee=H.key;B!==null;){if(B.key===Ee)if(B.tag===4&&B.stateNode.containerInfo===H.containerInfo&&B.stateNode.implementation===H.implementation){n(F,B.sibling),B=u(B,H.children||[]),B.return=F,F=B;break e}else{n(F,B);break}else t(F,B);B=B.sibling}B=Zx(H,F.mode,J),B.return=F,F=B}return f(F);case Ho:return Ee=H._init,G(F,B,Ee(H._payload),J)}if(Bd(H))return V(F,B,H,J);if(Ed(H))return $(F,B,H,J);wm(F,H)}return typeof H=="string"&&H!==""||typeof H=="number"?(H=""+H,B!==null&&B.tag===6?(n(F,B.sibling),B=u(B,H),B.return=F,F=B):(n(F,B),B=Gx(H,F.mode,J),B.return=F,F=B),f(F)):n(F,B)}return G}var Hc=NA(!0),BA=NA(!1),qf={},Ta=Tl(qf),_f=Tl(qf),wf=Tl(qf);function uu(e){if(e===qf)throw Error(Qe(174));return e}function Uw(e,t){switch(Pn(wf,t),Pn(_f,e),Pn(Ta,qf),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:B_(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=B_(t,e)}zn(Ta),Pn(Ta,t)}function Kc(){zn(Ta),zn(_f),zn(wf)}function VA(e){uu(wf.current);var t=uu(Ta.current),n=B_(t,e.type);t!==n&&(Pn(_f,e),Pn(Ta,n))}function qw(e){_f.current===e&&(zn(Ta),zn(_f))}var qn=Tl(0);function Tg(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Bx=[];function Gw(){for(var e=0;e<Bx.length;e++)Bx[e]._workInProgressVersionPrimary=null;Bx.length=0}var jm=vo.ReactCurrentDispatcher,Vx=vo.ReactCurrentBatchConfig,wu=0,Zn=null,_r=null,kr=null,Cg=!1,Yd=!1,bf=0,tN=0;function ri(){throw Error(Qe(321))}function Zw(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ia(e[n],t[n]))return!1;return!0}function Ww(e,t,n,s,u,h){if(wu=h,Zn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,jm.current=e===null||e.memoizedState===null?sN:aN,e=n(s,u),Yd){h=0;do{if(Yd=!1,bf=0,25<=h)throw Error(Qe(301));h+=1,kr=_r=null,t.updateQueue=null,jm.current=oN,e=n(s,u)}while(Yd)}if(jm.current=Pg,t=_r!==null&&_r.next!==null,wu=0,kr=_r=Zn=null,Cg=!1,t)throw Error(Qe(300));return e}function Hw(){var e=bf!==0;return bf=0,e}function _a(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kr===null?Zn.memoizedState=kr=e:kr=kr.next=e,kr}function Rs(){if(_r===null){var e=Zn.alternate;e=e!==null?e.memoizedState:null}else e=_r.next;var t=kr===null?Zn.memoizedState:kr.next;if(t!==null)kr=t,_r=e;else{if(e===null)throw Error(Qe(310));_r=e,e={memoizedState:_r.memoizedState,baseState:_r.baseState,baseQueue:_r.baseQueue,queue:_r.queue,next:null},kr===null?Zn.memoizedState=kr=e:kr=kr.next=e}return kr}function Sf(e,t){return typeof t=="function"?t(e):t}function jx(e){var t=Rs(),n=t.queue;if(n===null)throw Error(Qe(311));n.lastRenderedReducer=e;var s=_r,u=s.baseQueue,h=n.pending;if(h!==null){if(u!==null){var f=u.next;u.next=h.next,h.next=f}s.baseQueue=u=h,n.pending=null}if(u!==null){h=u.next,s=s.baseState;var o=f=null,w=null,b=h;do{var C=b.lane;if((wu&C)===C)w!==null&&(w=w.next={lane:0,action:b.action,hasEagerState:b.hasEagerState,eagerState:b.eagerState,next:null}),s=b.hasEagerState?b.eagerState:e(s,b.action);else{var A={lane:C,action:b.action,hasEagerState:b.hasEagerState,eagerState:b.eagerState,next:null};w===null?(o=w=A,f=s):w=w.next=A,Zn.lanes|=C,bu|=C}b=b.next}while(b!==null&&b!==h);w===null?f=s:w.next=o,ia(s,t.memoizedState)||(ji=!0),t.memoizedState=s,t.baseState=f,t.baseQueue=w,n.lastRenderedState=s}if(e=n.interleaved,e!==null){u=e;do h=u.lane,Zn.lanes|=h,bu|=h,u=u.next;while(u!==e)}else u===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function $x(e){var t=Rs(),n=t.queue;if(n===null)throw Error(Qe(311));n.lastRenderedReducer=e;var s=n.dispatch,u=n.pending,h=t.memoizedState;if(u!==null){n.pending=null;var f=u=u.next;do h=e(h,f.action),f=f.next;while(f!==u);ia(h,t.memoizedState)||(ji=!0),t.memoizedState=h,t.baseQueue===null&&(t.baseState=h),n.lastRenderedState=h}return[h,s]}function jA(){}function $A(e,t){var n=Zn,s=Rs(),u=t(),h=!ia(s.memoizedState,u);if(h&&(s.memoizedState=u,ji=!0),s=s.queue,Kw(GA.bind(null,n,s,e),[e]),s.getSnapshot!==t||h||kr!==null&&kr.memoizedState.tag&1){if(n.flags|=2048,Ef(9,qA.bind(null,n,s,u,t),void 0,null),Ir===null)throw Error(Qe(349));wu&30||UA(n,t,u)}return u}function UA(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Zn.updateQueue,t===null?(t={lastEffect:null,stores:null},Zn.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function qA(e,t,n,s){t.value=n,t.getSnapshot=s,ZA(t)&&WA(e)}function GA(e,t,n){return n(function(){ZA(t)&&WA(e)})}function ZA(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ia(e,n)}catch{return!0}}function WA(e){var t=mo(e,1);t!==null&&ra(t,e,1,-1)}function lE(e){var t=_a();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Sf,lastRenderedState:e},t.queue=e,e=e.dispatch=iN.bind(null,Zn,e),[t.memoizedState,e]}function Ef(e,t,n,s){return e={tag:e,create:t,destroy:n,deps:s,next:null},t=Zn.updateQueue,t===null?(t={lastEffect:null,stores:null},Zn.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(s=n.next,n.next=e,e.next=s,t.lastEffect=e)),e}function HA(){return Rs().memoizedState}function $m(e,t,n,s){var u=_a();Zn.flags|=e,u.memoizedState=Ef(1|t,n,void 0,s===void 0?null:s)}function py(e,t,n,s){var u=Rs();s=s===void 0?null:s;var h=void 0;if(_r!==null){var f=_r.memoizedState;if(h=f.destroy,s!==null&&Zw(s,f.deps)){u.memoizedState=Ef(t,n,h,s);return}}Zn.flags|=e,u.memoizedState=Ef(1|t,n,h,s)}function uE(e,t){return $m(8390656,8,e,t)}function Kw(e,t){return py(2048,8,e,t)}function KA(e,t){return py(4,2,e,t)}function XA(e,t){return py(4,4,e,t)}function QA(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function YA(e,t,n){return n=n!=null?n.concat([e]):null,py(4,4,QA.bind(null,t,e),n)}function Xw(){}function JA(e,t){var n=Rs();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&Zw(t,s[1])?s[0]:(n.memoizedState=[e,t],e)}function ek(e,t){var n=Rs();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&Zw(t,s[1])?s[0]:(e=e(),n.memoizedState=[e,t],e)}function tk(e,t,n){return wu&21?(ia(n,t)||(n=iA(),Zn.lanes|=n,bu|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ji=!0),e.memoizedState=n)}function nN(e,t){var n=hn;hn=n!==0&&4>n?n:4,e(!0);var s=Vx.transition;Vx.transition={};try{e(!1),t()}finally{hn=n,Vx.transition=s}}function nk(){return Rs().memoizedState}function rN(e,t,n){var s=hl(e);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},rk(e))ik(t,n);else if(n=LA(e,t,n,s),n!==null){var u=Ci();ra(n,e,s,u),sk(n,t,s)}}function iN(e,t,n){var s=hl(e),u={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(rk(e))ik(t,u);else{var h=e.alternate;if(e.lanes===0&&(h===null||h.lanes===0)&&(h=t.lastRenderedReducer,h!==null))try{var f=t.lastRenderedState,o=h(f,n);if(u.hasEagerState=!0,u.eagerState=o,ia(o,f)){var w=t.interleaved;w===null?(u.next=u,jw(t)):(u.next=w.next,w.next=u),t.interleaved=u;return}}catch{}finally{}n=LA(e,t,u,s),n!==null&&(u=Ci(),ra(n,e,s,u),sk(n,t,s))}}function rk(e){var t=e.alternate;return e===Zn||t!==null&&t===Zn}function ik(e,t){Yd=Cg=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function sk(e,t,n){if(n&4194240){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,Pw(e,n)}}var Pg={readContext:Ms,useCallback:ri,useContext:ri,useEffect:ri,useImperativeHandle:ri,useInsertionEffect:ri,useLayoutEffect:ri,useMemo:ri,useReducer:ri,useRef:ri,useState:ri,useDebugValue:ri,useDeferredValue:ri,useTransition:ri,useMutableSource:ri,useSyncExternalStore:ri,useId:ri,unstable_isNewReconciler:!1},sN={readContext:Ms,useCallback:function(e,t){return _a().memoizedState=[e,t===void 0?null:t],e},useContext:Ms,useEffect:uE,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,$m(4194308,4,QA.bind(null,t,e),n)},useLayoutEffect:function(e,t){return $m(4194308,4,e,t)},useInsertionEffect:function(e,t){return $m(4,2,e,t)},useMemo:function(e,t){var n=_a();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var s=_a();return t=n!==void 0?n(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=rN.bind(null,Zn,e),[s.memoizedState,e]},useRef:function(e){var t=_a();return e={current:e},t.memoizedState=e},useState:lE,useDebugValue:Xw,useDeferredValue:function(e){return _a().memoizedState=e},useTransition:function(){var e=lE(!1),t=e[0];return e=nN.bind(null,e[1]),_a().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var s=Zn,u=_a();if(Vn){if(n===void 0)throw Error(Qe(407));n=n()}else{if(n=t(),Ir===null)throw Error(Qe(349));wu&30||UA(s,t,n)}u.memoizedState=n;var h={value:n,getSnapshot:t};return u.queue=h,uE(GA.bind(null,s,h,e),[e]),s.flags|=2048,Ef(9,qA.bind(null,s,h,n,t),void 0,null),n},useId:function(){var e=_a(),t=Ir.identifierPrefix;if(Vn){var n=ro,s=no;n=(s&~(1<<32-na(s)-1)).toString(32)+n,t=":"+t+"R"+n,n=bf++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=tN++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},aN={readContext:Ms,useCallback:JA,useContext:Ms,useEffect:Kw,useImperativeHandle:YA,useInsertionEffect:KA,useLayoutEffect:XA,useMemo:ek,useReducer:jx,useRef:HA,useState:function(){return jx(Sf)},useDebugValue:Xw,useDeferredValue:function(e){var t=Rs();return tk(t,_r.memoizedState,e)},useTransition:function(){var e=jx(Sf)[0],t=Rs().memoizedState;return[e,t]},useMutableSource:jA,useSyncExternalStore:$A,useId:nk,unstable_isNewReconciler:!1},oN={readContext:Ms,useCallback:JA,useContext:Ms,useEffect:Kw,useImperativeHandle:YA,useInsertionEffect:KA,useLayoutEffect:XA,useMemo:ek,useReducer:$x,useRef:HA,useState:function(){return $x(Sf)},useDebugValue:Xw,useDeferredValue:function(e){var t=Rs();return _r===null?t.memoizedState=e:tk(t,_r.memoizedState,e)},useTransition:function(){var e=$x(Sf)[0],t=Rs().memoizedState;return[e,t]},useMutableSource:jA,useSyncExternalStore:$A,useId:nk,unstable_isNewReconciler:!1};function Xc(e,t){try{var n="",s=t;do n+=zO(s),s=s.return;while(s);var u=n}catch(h){u=`
Error generating stack: `+h.message+`
`+h.stack}return{value:e,source:t,stack:u,digest:null}}function Ux(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function l0(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var lN=typeof WeakMap=="function"?WeakMap:Map;function ak(e,t,n){n=oo(-1,n),n.tag=3,n.payload={element:null};var s=t.value;return n.callback=function(){kg||(kg=!0,v0=s),l0(e,t)},n}function ok(e,t,n){n=oo(-1,n),n.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var u=t.value;n.payload=function(){return s(u)},n.callback=function(){l0(e,t)}}var h=e.stateNode;return h!==null&&typeof h.componentDidCatch=="function"&&(n.callback=function(){l0(e,t),typeof s!="function"&&(cl===null?cl=new Set([this]):cl.add(this));var f=t.stack;this.componentDidCatch(t.value,{componentStack:f!==null?f:""})}),n}function cE(e,t,n){var s=e.pingCache;if(s===null){s=e.pingCache=new lN;var u=new Set;s.set(t,u)}else u=s.get(t),u===void 0&&(u=new Set,s.set(t,u));u.has(n)||(u.add(n),e=bN.bind(null,e,t,n),t.then(e,e))}function hE(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function dE(e,t,n,s,u){return e.mode&1?(e.flags|=65536,e.lanes=u,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=oo(-1,1),t.tag=2,ul(n,t,1))),n.lanes|=1),e)}var uN=vo.ReactCurrentOwner,ji=!1;function Si(e,t,n,s){t.child=e===null?BA(t,null,n,s):Hc(t,e.child,n,s)}function fE(e,t,n,s,u){n=n.render;var h=t.ref;return Vc(t,u),s=Ww(e,t,n,s,h,u),n=Hw(),e!==null&&!ji?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~u,go(e,t,u)):(Vn&&n&&zw(t),t.flags|=1,Si(e,t,s,u),t.child)}function pE(e,t,n,s,u){if(e===null){var h=n.type;return typeof h=="function"&&!i1(h)&&h.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=h,lk(e,t,h,s,u)):(e=Zm(n.type,null,s,t,t.mode,u),e.ref=t.ref,e.return=t,t.child=e)}if(h=e.child,!(e.lanes&u)){var f=h.memoizedProps;if(n=n.compare,n=n!==null?n:gf,n(f,s)&&e.ref===t.ref)return go(e,t,u)}return t.flags|=1,e=dl(h,s),e.ref=t.ref,e.return=t,t.child=e}function lk(e,t,n,s,u){if(e!==null){var h=e.memoizedProps;if(gf(h,s)&&e.ref===t.ref)if(ji=!1,t.pendingProps=s=h,(e.lanes&u)!==0)e.flags&131072&&(ji=!0);else return t.lanes=e.lanes,go(e,t,u)}return u0(e,t,n,s,u)}function uk(e,t,n){var s=t.pendingProps,u=s.children,h=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pn(kc,Yi),Yi|=n;else{if(!(n&1073741824))return e=h!==null?h.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Pn(kc,Yi),Yi|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=h!==null?h.baseLanes:n,Pn(kc,Yi),Yi|=s}else h!==null?(s=h.baseLanes|n,t.memoizedState=null):s=n,Pn(kc,Yi),Yi|=s;return Si(e,t,u,n),t.child}function ck(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function u0(e,t,n,s,u){var h=Ui(n)?xu:ci.current;return h=Zc(t,h),Vc(t,u),n=Ww(e,t,n,s,h,u),s=Hw(),e!==null&&!ji?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~u,go(e,t,u)):(Vn&&s&&zw(t),t.flags|=1,Si(e,t,n,u),t.child)}function mE(e,t,n,s,u){if(Ui(n)){var h=!0;xg(t)}else h=!1;if(Vc(t,u),t.stateNode===null)Um(e,t),FA(t,n,s),o0(t,n,s,u),s=!0;else if(e===null){var f=t.stateNode,o=t.memoizedProps;f.props=o;var w=f.context,b=n.contextType;typeof b=="object"&&b!==null?b=Ms(b):(b=Ui(n)?xu:ci.current,b=Zc(t,b));var C=n.getDerivedStateFromProps,A=typeof C=="function"||typeof f.getSnapshotBeforeUpdate=="function";A||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(o!==s||w!==b)&&aE(t,f,s,b),Ko=!1;var M=t.memoizedState;f.state=M,Eg(t,s,f,u),w=t.memoizedState,o!==s||M!==w||$i.current||Ko?(typeof C=="function"&&(a0(t,n,C,s),w=t.memoizedState),(o=Ko||sE(t,n,o,s,M,w,b))?(A||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(t.flags|=4194308)):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=w),f.props=s,f.state=w,f.context=b,s=o):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{f=t.stateNode,zA(e,t),o=t.memoizedProps,b=t.type===t.elementType?o:Ks(t.type,o),f.props=b,A=t.pendingProps,M=f.context,w=n.contextType,typeof w=="object"&&w!==null?w=Ms(w):(w=Ui(n)?xu:ci.current,w=Zc(t,w));var N=n.getDerivedStateFromProps;(C=typeof N=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(o!==A||M!==w)&&aE(t,f,s,w),Ko=!1,M=t.memoizedState,f.state=M,Eg(t,s,f,u);var V=t.memoizedState;o!==A||M!==V||$i.current||Ko?(typeof N=="function"&&(a0(t,n,N,s),V=t.memoizedState),(b=Ko||sE(t,n,b,s,M,V,w)||!1)?(C||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(s,V,w),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(s,V,w)),typeof f.componentDidUpdate=="function"&&(t.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof f.componentDidUpdate!="function"||o===e.memoizedProps&&M===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&M===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=V),f.props=s,f.state=V,f.context=w,s=b):(typeof f.componentDidUpdate!="function"||o===e.memoizedProps&&M===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&M===e.memoizedState||(t.flags|=1024),s=!1)}return c0(e,t,n,s,h,u)}function c0(e,t,n,s,u,h){ck(e,t);var f=(t.flags&128)!==0;if(!s&&!f)return u&&eE(t,n,!1),go(e,t,h);s=t.stateNode,uN.current=t;var o=f&&typeof n.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&f?(t.child=Hc(t,e.child,null,h),t.child=Hc(t,null,o,h)):Si(e,t,o,h),t.memoizedState=s.state,u&&eE(t,n,!0),t.child}function hk(e){var t=e.stateNode;t.pendingContext?J2(e,t.pendingContext,t.pendingContext!==t.context):t.context&&J2(e,t.context,!1),Uw(e,t.containerInfo)}function gE(e,t,n,s,u){return Wc(),Fw(u),t.flags|=256,Si(e,t,n,s),t.child}var h0={dehydrated:null,treeContext:null,retryLane:0};function d0(e){return{baseLanes:e,cachePool:null,transitions:null}}function dk(e,t,n){var s=t.pendingProps,u=qn.current,h=!1,f=(t.flags&128)!==0,o;if((o=f)||(o=e!==null&&e.memoizedState===null?!1:(u&2)!==0),o?(h=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(u|=1),Pn(qn,u&1),e===null)return i0(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(f=s.children,e=s.fallback,h?(s=t.mode,h=t.child,f={mode:"hidden",children:f},!(s&1)&&h!==null?(h.childLanes=0,h.pendingProps=f):h=yy(f,s,0,null),e=yu(e,s,n,null),h.return=t,e.return=t,h.sibling=e,t.child=h,t.child.memoizedState=d0(n),t.memoizedState=h0,e):Qw(t,f));if(u=e.memoizedState,u!==null&&(o=u.dehydrated,o!==null))return cN(e,t,f,s,o,u,n);if(h){h=s.fallback,f=t.mode,u=e.child,o=u.sibling;var w={mode:"hidden",children:s.children};return!(f&1)&&t.child!==u?(s=t.child,s.childLanes=0,s.pendingProps=w,t.deletions=null):(s=dl(u,w),s.subtreeFlags=u.subtreeFlags&14680064),o!==null?h=dl(o,h):(h=yu(h,f,n,null),h.flags|=2),h.return=t,s.return=t,s.sibling=h,t.child=s,s=h,h=t.child,f=e.child.memoizedState,f=f===null?d0(n):{baseLanes:f.baseLanes|n,cachePool:null,transitions:f.transitions},h.memoizedState=f,h.childLanes=e.childLanes&~n,t.memoizedState=h0,s}return h=e.child,e=h.sibling,s=dl(h,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=n),s.return=t,s.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function Qw(e,t){return t=yy({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function bm(e,t,n,s){return s!==null&&Fw(s),Hc(t,e.child,null,n),e=Qw(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function cN(e,t,n,s,u,h,f){if(n)return t.flags&256?(t.flags&=-257,s=Ux(Error(Qe(422))),bm(e,t,f,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(h=s.fallback,u=t.mode,s=yy({mode:"visible",children:s.children},u,0,null),h=yu(h,u,f,null),h.flags|=2,s.return=t,h.return=t,s.sibling=h,t.child=s,t.mode&1&&Hc(t,e.child,null,f),t.child.memoizedState=d0(f),t.memoizedState=h0,h);if(!(t.mode&1))return bm(e,t,f,null);if(u.data==="$!"){if(s=u.nextSibling&&u.nextSibling.dataset,s)var o=s.dgst;return s=o,h=Error(Qe(419)),s=Ux(h,s,void 0),bm(e,t,f,s)}if(o=(f&e.childLanes)!==0,ji||o){if(s=Ir,s!==null){switch(f&-f){case 4:u=2;break;case 16:u=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:u=32;break;case 536870912:u=268435456;break;default:u=0}u=u&(s.suspendedLanes|f)?0:u,u!==0&&u!==h.retryLane&&(h.retryLane=u,mo(e,u),ra(s,e,u,-1))}return r1(),s=Ux(Error(Qe(421))),bm(e,t,f,s)}return u.data==="$?"?(t.flags|=128,t.child=e.child,t=SN.bind(null,e),u._reactRetry=t,null):(e=h.treeContext,es=ll(u.nextSibling),ns=t,Vn=!0,Js=null,e!==null&&(Ts[Cs++]=no,Ts[Cs++]=ro,Ts[Cs++]=_u,no=e.id,ro=e.overflow,_u=t),t=Qw(t,s.children),t.flags|=4096,t)}function yE(e,t,n){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),s0(e.return,t,n)}function qx(e,t,n,s,u){var h=e.memoizedState;h===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:u}:(h.isBackwards=t,h.rendering=null,h.renderingStartTime=0,h.last=s,h.tail=n,h.tailMode=u)}function fk(e,t,n){var s=t.pendingProps,u=s.revealOrder,h=s.tail;if(Si(e,t,s.children,n),s=qn.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&yE(e,n,t);else if(e.tag===19)yE(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(Pn(qn,s),!(t.mode&1))t.memoizedState=null;else switch(u){case"forwards":for(n=t.child,u=null;n!==null;)e=n.alternate,e!==null&&Tg(e)===null&&(u=n),n=n.sibling;n=u,n===null?(u=t.child,t.child=null):(u=n.sibling,n.sibling=null),qx(t,!1,u,n,h);break;case"backwards":for(n=null,u=t.child,t.child=null;u!==null;){if(e=u.alternate,e!==null&&Tg(e)===null){t.child=u;break}e=u.sibling,u.sibling=n,n=u,u=e}qx(t,!0,n,null,h);break;case"together":qx(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Um(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function go(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),bu|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Qe(153));if(t.child!==null){for(e=t.child,n=dl(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=dl(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function hN(e,t,n){switch(t.tag){case 3:hk(t),Wc();break;case 5:VA(t);break;case 1:Ui(t.type)&&xg(t);break;case 4:Uw(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,u=t.memoizedProps.value;Pn(bg,s._currentValue),s._currentValue=u;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(Pn(qn,qn.current&1),t.flags|=128,null):n&t.child.childLanes?dk(e,t,n):(Pn(qn,qn.current&1),e=go(e,t,n),e!==null?e.sibling:null);Pn(qn,qn.current&1);break;case 19:if(s=(n&t.childLanes)!==0,e.flags&128){if(s)return fk(e,t,n);t.flags|=128}if(u=t.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),Pn(qn,qn.current),s)break;return null;case 22:case 23:return t.lanes=0,uk(e,t,n)}return go(e,t,n)}var pk,f0,mk,gk;pk=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};f0=function(){};mk=function(e,t,n,s){var u=e.memoizedProps;if(u!==s){e=t.stateNode,uu(Ta.current);var h=null;switch(n){case"input":u=z_(e,u),s=z_(e,s),h=[];break;case"select":u=Hn({},u,{value:void 0}),s=Hn({},s,{value:void 0}),h=[];break;case"textarea":u=N_(e,u),s=N_(e,s),h=[];break;default:typeof u.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=yg)}V_(n,s);var f;n=null;for(b in u)if(!s.hasOwnProperty(b)&&u.hasOwnProperty(b)&&u[b]!=null)if(b==="style"){var o=u[b];for(f in o)o.hasOwnProperty(f)&&(n||(n={}),n[f]="")}else b!=="dangerouslySetInnerHTML"&&b!=="children"&&b!=="suppressContentEditableWarning"&&b!=="suppressHydrationWarning"&&b!=="autoFocus"&&(uf.hasOwnProperty(b)?h||(h=[]):(h=h||[]).push(b,null));for(b in s){var w=s[b];if(o=u!=null?u[b]:void 0,s.hasOwnProperty(b)&&w!==o&&(w!=null||o!=null))if(b==="style")if(o){for(f in o)!o.hasOwnProperty(f)||w&&w.hasOwnProperty(f)||(n||(n={}),n[f]="");for(f in w)w.hasOwnProperty(f)&&o[f]!==w[f]&&(n||(n={}),n[f]=w[f])}else n||(h||(h=[]),h.push(b,n)),n=w;else b==="dangerouslySetInnerHTML"?(w=w?w.__html:void 0,o=o?o.__html:void 0,w!=null&&o!==w&&(h=h||[]).push(b,w)):b==="children"?typeof w!="string"&&typeof w!="number"||(h=h||[]).push(b,""+w):b!=="suppressContentEditableWarning"&&b!=="suppressHydrationWarning"&&(uf.hasOwnProperty(b)?(w!=null&&b==="onScroll"&&Dn("scroll",e),h||o===w||(h=[])):(h=h||[]).push(b,w))}n&&(h=h||[]).push("style",n);var b=h;(t.updateQueue=b)&&(t.flags|=4)}};gk=function(e,t,n,s){n!==s&&(t.flags|=4)};function Id(e,t){if(!Vn)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function ii(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,s=0;if(t)for(var u=e.child;u!==null;)n|=u.lanes|u.childLanes,s|=u.subtreeFlags&14680064,s|=u.flags&14680064,u.return=e,u=u.sibling;else for(u=e.child;u!==null;)n|=u.lanes|u.childLanes,s|=u.subtreeFlags,s|=u.flags,u.return=e,u=u.sibling;return e.subtreeFlags|=s,e.childLanes=n,t}function dN(e,t,n){var s=t.pendingProps;switch(Ow(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ii(t),null;case 1:return Ui(t.type)&&vg(),ii(t),null;case 3:return s=t.stateNode,Kc(),zn($i),zn(ci),Gw(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(_m(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Js!==null&&(w0(Js),Js=null))),f0(e,t),ii(t),null;case 5:qw(t);var u=uu(wf.current);if(n=t.type,e!==null&&t.stateNode!=null)mk(e,t,n,s,u),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(Qe(166));return ii(t),null}if(e=uu(Ta.current),_m(t)){s=t.stateNode,n=t.type;var h=t.memoizedProps;switch(s[wa]=t,s[xf]=h,e=(t.mode&1)!==0,n){case"dialog":Dn("cancel",s),Dn("close",s);break;case"iframe":case"object":case"embed":Dn("load",s);break;case"video":case"audio":for(u=0;u<jd.length;u++)Dn(jd[u],s);break;case"source":Dn("error",s);break;case"img":case"image":case"link":Dn("error",s),Dn("load",s);break;case"details":Dn("toggle",s);break;case"input":C2(s,h),Dn("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!h.multiple},Dn("invalid",s);break;case"textarea":A2(s,h),Dn("invalid",s)}V_(n,h),u=null;for(var f in h)if(h.hasOwnProperty(f)){var o=h[f];f==="children"?typeof o=="string"?s.textContent!==o&&(h.suppressHydrationWarning!==!0&&xm(s.textContent,o,e),u=["children",o]):typeof o=="number"&&s.textContent!==""+o&&(h.suppressHydrationWarning!==!0&&xm(s.textContent,o,e),u=["children",""+o]):uf.hasOwnProperty(f)&&o!=null&&f==="onScroll"&&Dn("scroll",s)}switch(n){case"input":hm(s),P2(s,h,!0);break;case"textarea":hm(s),k2(s);break;case"select":case"option":break;default:typeof h.onClick=="function"&&(s.onclick=yg)}s=u,t.updateQueue=s,s!==null&&(t.flags|=4)}else{f=u.nodeType===9?u:u.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=UP(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=f.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=f.createElement(n,{is:s.is}):(e=f.createElement(n),n==="select"&&(f=e,s.multiple?f.multiple=!0:s.size&&(f.size=s.size))):e=f.createElementNS(e,n),e[wa]=t,e[xf]=s,pk(e,t,!1,!1),t.stateNode=e;e:{switch(f=j_(n,s),n){case"dialog":Dn("cancel",e),Dn("close",e),u=s;break;case"iframe":case"object":case"embed":Dn("load",e),u=s;break;case"video":case"audio":for(u=0;u<jd.length;u++)Dn(jd[u],e);u=s;break;case"source":Dn("error",e),u=s;break;case"img":case"image":case"link":Dn("error",e),Dn("load",e),u=s;break;case"details":Dn("toggle",e),u=s;break;case"input":C2(e,s),u=z_(e,s),Dn("invalid",e);break;case"option":u=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},u=Hn({},s,{value:void 0}),Dn("invalid",e);break;case"textarea":A2(e,s),u=N_(e,s),Dn("invalid",e);break;default:u=s}V_(n,u),o=u;for(h in o)if(o.hasOwnProperty(h)){var w=o[h];h==="style"?ZP(e,w):h==="dangerouslySetInnerHTML"?(w=w?w.__html:void 0,w!=null&&qP(e,w)):h==="children"?typeof w=="string"?(n!=="textarea"||w!=="")&&cf(e,w):typeof w=="number"&&cf(e,""+w):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(uf.hasOwnProperty(h)?w!=null&&h==="onScroll"&&Dn("scroll",e):w!=null&&ww(e,h,w,f))}switch(n){case"input":hm(e),P2(e,s,!1);break;case"textarea":hm(e),k2(e);break;case"option":s.value!=null&&e.setAttribute("value",""+gl(s.value));break;case"select":e.multiple=!!s.multiple,h=s.value,h!=null?Oc(e,!!s.multiple,h,!1):s.defaultValue!=null&&Oc(e,!!s.multiple,s.defaultValue,!0);break;default:typeof u.onClick=="function"&&(e.onclick=yg)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ii(t),null;case 6:if(e&&t.stateNode!=null)gk(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(Qe(166));if(n=uu(wf.current),uu(Ta.current),_m(t)){if(s=t.stateNode,n=t.memoizedProps,s[wa]=t,(h=s.nodeValue!==n)&&(e=ns,e!==null))switch(e.tag){case 3:xm(s.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&xm(s.nodeValue,n,(e.mode&1)!==0)}h&&(t.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[wa]=t,t.stateNode=s}return ii(t),null;case 13:if(zn(qn),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Vn&&es!==null&&t.mode&1&&!(t.flags&128))DA(),Wc(),t.flags|=98560,h=!1;else if(h=_m(t),s!==null&&s.dehydrated!==null){if(e===null){if(!h)throw Error(Qe(318));if(h=t.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(Qe(317));h[wa]=t}else Wc(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ii(t),h=!1}else Js!==null&&(w0(Js),Js=null),h=!0;if(!h)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||qn.current&1?wr===0&&(wr=3):r1())),t.updateQueue!==null&&(t.flags|=4),ii(t),null);case 4:return Kc(),f0(e,t),e===null&&yf(t.stateNode.containerInfo),ii(t),null;case 10:return Vw(t.type._context),ii(t),null;case 17:return Ui(t.type)&&vg(),ii(t),null;case 19:if(zn(qn),h=t.memoizedState,h===null)return ii(t),null;if(s=(t.flags&128)!==0,f=h.rendering,f===null)if(s)Id(h,!1);else{if(wr!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(f=Tg(e),f!==null){for(t.flags|=128,Id(h,!1),s=f.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=n,n=t.child;n!==null;)h=n,e=s,h.flags&=14680066,f=h.alternate,f===null?(h.childLanes=0,h.lanes=e,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=f.childLanes,h.lanes=f.lanes,h.child=f.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=f.memoizedProps,h.memoizedState=f.memoizedState,h.updateQueue=f.updateQueue,h.type=f.type,e=f.dependencies,h.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Pn(qn,qn.current&1|2),t.child}e=e.sibling}h.tail!==null&&cr()>Qc&&(t.flags|=128,s=!0,Id(h,!1),t.lanes=4194304)}else{if(!s)if(e=Tg(f),e!==null){if(t.flags|=128,s=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Id(h,!0),h.tail===null&&h.tailMode==="hidden"&&!f.alternate&&!Vn)return ii(t),null}else 2*cr()-h.renderingStartTime>Qc&&n!==1073741824&&(t.flags|=128,s=!0,Id(h,!1),t.lanes=4194304);h.isBackwards?(f.sibling=t.child,t.child=f):(n=h.last,n!==null?n.sibling=f:t.child=f,h.last=f)}return h.tail!==null?(t=h.tail,h.rendering=t,h.tail=t.sibling,h.renderingStartTime=cr(),t.sibling=null,n=qn.current,Pn(qn,s?n&1|2:n&1),t):(ii(t),null);case 22:case 23:return n1(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?Yi&1073741824&&(ii(t),t.subtreeFlags&6&&(t.flags|=8192)):ii(t),null;case 24:return null;case 25:return null}throw Error(Qe(156,t.tag))}function fN(e,t){switch(Ow(t),t.tag){case 1:return Ui(t.type)&&vg(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Kc(),zn($i),zn(ci),Gw(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return qw(t),null;case 13:if(zn(qn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Qe(340));Wc()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return zn(qn),null;case 4:return Kc(),null;case 10:return Vw(t.type._context),null;case 22:case 23:return n1(),null;case 24:return null;default:return null}}var Sm=!1,li=!1,pN=typeof WeakSet=="function"?WeakSet:Set,St=null;function Ac(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){Yn(e,t,s)}else n.current=null}function p0(e,t,n){try{n()}catch(s){Yn(e,t,s)}}var vE=!1;function mN(e,t){if(Q_=pg,e=_A(),Lw(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var u=s.anchorOffset,h=s.focusNode;s=s.focusOffset;try{n.nodeType,h.nodeType}catch{n=null;break e}var f=0,o=-1,w=-1,b=0,C=0,A=e,M=null;t:for(;;){for(var N;A!==n||u!==0&&A.nodeType!==3||(o=f+u),A!==h||s!==0&&A.nodeType!==3||(w=f+s),A.nodeType===3&&(f+=A.nodeValue.length),(N=A.firstChild)!==null;)M=A,A=N;for(;;){if(A===e)break t;if(M===n&&++b===u&&(o=f),M===h&&++C===s&&(w=f),(N=A.nextSibling)!==null)break;A=M,M=A.parentNode}A=N}n=o===-1||w===-1?null:{start:o,end:w}}else n=null}n=n||{start:0,end:0}}else n=null;for(Y_={focusedElem:e,selectionRange:n},pg=!1,St=t;St!==null;)if(t=St,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,St=e;else for(;St!==null;){t=St;try{var V=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(V!==null){var $=V.memoizedProps,G=V.memoizedState,F=t.stateNode,B=F.getSnapshotBeforeUpdate(t.elementType===t.type?$:Ks(t.type,$),G);F.__reactInternalSnapshotBeforeUpdate=B}break;case 3:var H=t.stateNode.containerInfo;H.nodeType===1?H.textContent="":H.nodeType===9&&H.documentElement&&H.removeChild(H.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Qe(163))}}catch(J){Yn(t,t.return,J)}if(e=t.sibling,e!==null){e.return=t.return,St=e;break}St=t.return}return V=vE,vE=!1,V}function Jd(e,t,n){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var u=s=s.next;do{if((u.tag&e)===e){var h=u.destroy;u.destroy=void 0,h!==void 0&&p0(t,n,h)}u=u.next}while(u!==s)}}function my(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var s=n.create;n.destroy=s()}n=n.next}while(n!==t)}}function m0(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function yk(e){var t=e.alternate;t!==null&&(e.alternate=null,yk(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[wa],delete t[xf],delete t[t0],delete t[QF],delete t[YF])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function vk(e){return e.tag===5||e.tag===3||e.tag===4}function xE(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||vk(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function g0(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=yg));else if(s!==4&&(e=e.child,e!==null))for(g0(e,t,n),e=e.sibling;e!==null;)g0(e,t,n),e=e.sibling}function y0(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(y0(e,t,n),e=e.sibling;e!==null;)y0(e,t,n),e=e.sibling}var Vr=null,Qs=!1;function Uo(e,t,n){for(n=n.child;n!==null;)xk(e,t,n),n=n.sibling}function xk(e,t,n){if(Ea&&typeof Ea.onCommitFiberUnmount=="function")try{Ea.onCommitFiberUnmount(oy,n)}catch{}switch(n.tag){case 5:li||Ac(n,t);case 6:var s=Vr,u=Qs;Vr=null,Uo(e,t,n),Vr=s,Qs=u,Vr!==null&&(Qs?(e=Vr,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Vr.removeChild(n.stateNode));break;case 18:Vr!==null&&(Qs?(e=Vr,n=n.stateNode,e.nodeType===8?Fx(e.parentNode,n):e.nodeType===1&&Fx(e,n),pf(e)):Fx(Vr,n.stateNode));break;case 4:s=Vr,u=Qs,Vr=n.stateNode.containerInfo,Qs=!0,Uo(e,t,n),Vr=s,Qs=u;break;case 0:case 11:case 14:case 15:if(!li&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){u=s=s.next;do{var h=u,f=h.destroy;h=h.tag,f!==void 0&&(h&2||h&4)&&p0(n,t,f),u=u.next}while(u!==s)}Uo(e,t,n);break;case 1:if(!li&&(Ac(n,t),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(o){Yn(n,t,o)}Uo(e,t,n);break;case 21:Uo(e,t,n);break;case 22:n.mode&1?(li=(s=li)||n.memoizedState!==null,Uo(e,t,n),li=s):Uo(e,t,n);break;default:Uo(e,t,n)}}function _E(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new pN),t.forEach(function(s){var u=EN.bind(null,e,s);n.has(s)||(n.add(s),s.then(u,u))})}}function Ws(e,t){var n=t.deletions;if(n!==null)for(var s=0;s<n.length;s++){var u=n[s];try{var h=e,f=t,o=f;e:for(;o!==null;){switch(o.tag){case 5:Vr=o.stateNode,Qs=!1;break e;case 3:Vr=o.stateNode.containerInfo,Qs=!0;break e;case 4:Vr=o.stateNode.containerInfo,Qs=!0;break e}o=o.return}if(Vr===null)throw Error(Qe(160));xk(h,f,u),Vr=null,Qs=!1;var w=u.alternate;w!==null&&(w.return=null),u.return=null}catch(b){Yn(u,t,b)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)_k(t,e),t=t.sibling}function _k(e,t){var n=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ws(t,e),xa(e),s&4){try{Jd(3,e,e.return),my(3,e)}catch($){Yn(e,e.return,$)}try{Jd(5,e,e.return)}catch($){Yn(e,e.return,$)}}break;case 1:Ws(t,e),xa(e),s&512&&n!==null&&Ac(n,n.return);break;case 5:if(Ws(t,e),xa(e),s&512&&n!==null&&Ac(n,n.return),e.flags&32){var u=e.stateNode;try{cf(u,"")}catch($){Yn(e,e.return,$)}}if(s&4&&(u=e.stateNode,u!=null)){var h=e.memoizedProps,f=n!==null?n.memoizedProps:h,o=e.type,w=e.updateQueue;if(e.updateQueue=null,w!==null)try{o==="input"&&h.type==="radio"&&h.name!=null&&jP(u,h),j_(o,f);var b=j_(o,h);for(f=0;f<w.length;f+=2){var C=w[f],A=w[f+1];C==="style"?ZP(u,A):C==="dangerouslySetInnerHTML"?qP(u,A):C==="children"?cf(u,A):ww(u,C,A,b)}switch(o){case"input":O_(u,h);break;case"textarea":$P(u,h);break;case"select":var M=u._wrapperState.wasMultiple;u._wrapperState.wasMultiple=!!h.multiple;var N=h.value;N!=null?Oc(u,!!h.multiple,N,!1):M!==!!h.multiple&&(h.defaultValue!=null?Oc(u,!!h.multiple,h.defaultValue,!0):Oc(u,!!h.multiple,h.multiple?[]:"",!1))}u[xf]=h}catch($){Yn(e,e.return,$)}}break;case 6:if(Ws(t,e),xa(e),s&4){if(e.stateNode===null)throw Error(Qe(162));u=e.stateNode,h=e.memoizedProps;try{u.nodeValue=h}catch($){Yn(e,e.return,$)}}break;case 3:if(Ws(t,e),xa(e),s&4&&n!==null&&n.memoizedState.isDehydrated)try{pf(t.containerInfo)}catch($){Yn(e,e.return,$)}break;case 4:Ws(t,e),xa(e);break;case 13:Ws(t,e),xa(e),u=e.child,u.flags&8192&&(h=u.memoizedState!==null,u.stateNode.isHidden=h,!h||u.alternate!==null&&u.alternate.memoizedState!==null||(e1=cr())),s&4&&_E(e);break;case 22:if(C=n!==null&&n.memoizedState!==null,e.mode&1?(li=(b=li)||C,Ws(t,e),li=b):Ws(t,e),xa(e),s&8192){if(b=e.memoizedState!==null,(e.stateNode.isHidden=b)&&!C&&e.mode&1)for(St=e,C=e.child;C!==null;){for(A=St=C;St!==null;){switch(M=St,N=M.child,M.tag){case 0:case 11:case 14:case 15:Jd(4,M,M.return);break;case 1:Ac(M,M.return);var V=M.stateNode;if(typeof V.componentWillUnmount=="function"){s=M,n=M.return;try{t=s,V.props=t.memoizedProps,V.state=t.memoizedState,V.componentWillUnmount()}catch($){Yn(s,n,$)}}break;case 5:Ac(M,M.return);break;case 22:if(M.memoizedState!==null){bE(A);continue}}N!==null?(N.return=M,St=N):bE(A)}C=C.sibling}e:for(C=null,A=e;;){if(A.tag===5){if(C===null){C=A;try{u=A.stateNode,b?(h=u.style,typeof h.setProperty=="function"?h.setProperty("display","none","important"):h.display="none"):(o=A.stateNode,w=A.memoizedProps.style,f=w!=null&&w.hasOwnProperty("display")?w.display:null,o.style.display=GP("display",f))}catch($){Yn(e,e.return,$)}}}else if(A.tag===6){if(C===null)try{A.stateNode.nodeValue=b?"":A.memoizedProps}catch($){Yn(e,e.return,$)}}else if((A.tag!==22&&A.tag!==23||A.memoizedState===null||A===e)&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===e)break e;for(;A.sibling===null;){if(A.return===null||A.return===e)break e;C===A&&(C=null),A=A.return}C===A&&(C=null),A.sibling.return=A.return,A=A.sibling}}break;case 19:Ws(t,e),xa(e),s&4&&_E(e);break;case 21:break;default:Ws(t,e),xa(e)}}function xa(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(vk(n)){var s=n;break e}n=n.return}throw Error(Qe(160))}switch(s.tag){case 5:var u=s.stateNode;s.flags&32&&(cf(u,""),s.flags&=-33);var h=xE(e);y0(e,h,u);break;case 3:case 4:var f=s.stateNode.containerInfo,o=xE(e);g0(e,o,f);break;default:throw Error(Qe(161))}}catch(w){Yn(e,e.return,w)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function gN(e,t,n){St=e,wk(e)}function wk(e,t,n){for(var s=(e.mode&1)!==0;St!==null;){var u=St,h=u.child;if(u.tag===22&&s){var f=u.memoizedState!==null||Sm;if(!f){var o=u.alternate,w=o!==null&&o.memoizedState!==null||li;o=Sm;var b=li;if(Sm=f,(li=w)&&!b)for(St=u;St!==null;)f=St,w=f.child,f.tag===22&&f.memoizedState!==null?SE(u):w!==null?(w.return=f,St=w):SE(u);for(;h!==null;)St=h,wk(h),h=h.sibling;St=u,Sm=o,li=b}wE(e)}else u.subtreeFlags&8772&&h!==null?(h.return=u,St=h):wE(e)}}function wE(e){for(;St!==null;){var t=St;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:li||my(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!li)if(n===null)s.componentDidMount();else{var u=t.elementType===t.type?n.memoizedProps:Ks(t.type,n.memoizedProps);s.componentDidUpdate(u,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var h=t.updateQueue;h!==null&&iE(t,h,s);break;case 3:var f=t.updateQueue;if(f!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}iE(t,f,n)}break;case 5:var o=t.stateNode;if(n===null&&t.flags&4){n=o;var w=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":w.autoFocus&&n.focus();break;case"img":w.src&&(n.src=w.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var b=t.alternate;if(b!==null){var C=b.memoizedState;if(C!==null){var A=C.dehydrated;A!==null&&pf(A)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Qe(163))}li||t.flags&512&&m0(t)}catch(M){Yn(t,t.return,M)}}if(t===e){St=null;break}if(n=t.sibling,n!==null){n.return=t.return,St=n;break}St=t.return}}function bE(e){for(;St!==null;){var t=St;if(t===e){St=null;break}var n=t.sibling;if(n!==null){n.return=t.return,St=n;break}St=t.return}}function SE(e){for(;St!==null;){var t=St;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{my(4,t)}catch(w){Yn(t,n,w)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var u=t.return;try{s.componentDidMount()}catch(w){Yn(t,u,w)}}var h=t.return;try{m0(t)}catch(w){Yn(t,h,w)}break;case 5:var f=t.return;try{m0(t)}catch(w){Yn(t,f,w)}}}catch(w){Yn(t,t.return,w)}if(t===e){St=null;break}var o=t.sibling;if(o!==null){o.return=t.return,St=o;break}St=t.return}}var yN=Math.ceil,Ag=vo.ReactCurrentDispatcher,Yw=vo.ReactCurrentOwner,ks=vo.ReactCurrentBatchConfig,rn=0,Ir=null,dr=null,$r=0,Yi=0,kc=Tl(0),wr=0,Tf=null,bu=0,gy=0,Jw=0,ef=null,Vi=null,e1=0,Qc=1/0,Qa=null,kg=!1,v0=null,cl=null,Em=!1,tl=null,Ig=0,tf=0,x0=null,qm=-1,Gm=0;function Ci(){return rn&6?cr():qm!==-1?qm:qm=cr()}function hl(e){return e.mode&1?rn&2&&$r!==0?$r&-$r:eN.transition!==null?(Gm===0&&(Gm=iA()),Gm):(e=hn,e!==0||(e=window.event,e=e===void 0?16:hA(e.type)),e):1}function ra(e,t,n,s){if(50<tf)throw tf=0,x0=null,Error(Qe(185));jf(e,n,s),(!(rn&2)||e!==Ir)&&(e===Ir&&(!(rn&2)&&(gy|=n),wr===4&&Yo(e,$r)),qi(e,s),n===1&&rn===0&&!(t.mode&1)&&(Qc=cr()+500,dy&&Cl()))}function qi(e,t){var n=e.callbackNode;eF(e,t);var s=fg(e,e===Ir?$r:0);if(s===0)n!==null&&R2(n),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(n!=null&&R2(n),t===1)e.tag===0?JF(EE.bind(null,e)):IA(EE.bind(null,e)),KF(function(){!(rn&6)&&Cl()}),n=null;else{switch(sA(s)){case 1:n=Cw;break;case 4:n=nA;break;case 16:n=dg;break;case 536870912:n=rA;break;default:n=dg}n=kk(n,bk.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function bk(e,t){if(qm=-1,Gm=0,rn&6)throw Error(Qe(327));var n=e.callbackNode;if(jc()&&e.callbackNode!==n)return null;var s=fg(e,e===Ir?$r:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=Mg(e,s);else{t=s;var u=rn;rn|=2;var h=Ek();(Ir!==e||$r!==t)&&(Qa=null,Qc=cr()+500,gu(e,t));do try{_N();break}catch(o){Sk(e,o)}while(1);Bw(),Ag.current=h,rn=u,dr!==null?t=0:(Ir=null,$r=0,t=wr)}if(t!==0){if(t===2&&(u=Z_(e),u!==0&&(s=u,t=_0(e,u))),t===1)throw n=Tf,gu(e,0),Yo(e,s),qi(e,cr()),n;if(t===6)Yo(e,s);else{if(u=e.current.alternate,!(s&30)&&!vN(u)&&(t=Mg(e,s),t===2&&(h=Z_(e),h!==0&&(s=h,t=_0(e,h))),t===1))throw n=Tf,gu(e,0),Yo(e,s),qi(e,cr()),n;switch(e.finishedWork=u,e.finishedLanes=s,t){case 0:case 1:throw Error(Qe(345));case 2:eu(e,Vi,Qa);break;case 3:if(Yo(e,s),(s&130023424)===s&&(t=e1+500-cr(),10<t)){if(fg(e,0)!==0)break;if(u=e.suspendedLanes,(u&s)!==s){Ci(),e.pingedLanes|=e.suspendedLanes&u;break}e.timeoutHandle=e0(eu.bind(null,e,Vi,Qa),t);break}eu(e,Vi,Qa);break;case 4:if(Yo(e,s),(s&4194240)===s)break;for(t=e.eventTimes,u=-1;0<s;){var f=31-na(s);h=1<<f,f=t[f],f>u&&(u=f),s&=~h}if(s=u,s=cr()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*yN(s/1960))-s,10<s){e.timeoutHandle=e0(eu.bind(null,e,Vi,Qa),s);break}eu(e,Vi,Qa);break;case 5:eu(e,Vi,Qa);break;default:throw Error(Qe(329))}}}return qi(e,cr()),e.callbackNode===n?bk.bind(null,e):null}function _0(e,t){var n=ef;return e.current.memoizedState.isDehydrated&&(gu(e,t).flags|=256),e=Mg(e,t),e!==2&&(t=Vi,Vi=n,t!==null&&w0(t)),e}function w0(e){Vi===null?Vi=e:Vi.push.apply(Vi,e)}function vN(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var u=n[s],h=u.getSnapshot;u=u.value;try{if(!ia(h(),u))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Yo(e,t){for(t&=~Jw,t&=~gy,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-na(t),s=1<<n;e[n]=-1,t&=~s}}function EE(e){if(rn&6)throw Error(Qe(327));jc();var t=fg(e,0);if(!(t&1))return qi(e,cr()),null;var n=Mg(e,t);if(e.tag!==0&&n===2){var s=Z_(e);s!==0&&(t=s,n=_0(e,s))}if(n===1)throw n=Tf,gu(e,0),Yo(e,t),qi(e,cr()),n;if(n===6)throw Error(Qe(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,eu(e,Vi,Qa),qi(e,cr()),null}function t1(e,t){var n=rn;rn|=1;try{return e(t)}finally{rn=n,rn===0&&(Qc=cr()+500,dy&&Cl())}}function Su(e){tl!==null&&tl.tag===0&&!(rn&6)&&jc();var t=rn;rn|=1;var n=ks.transition,s=hn;try{if(ks.transition=null,hn=1,e)return e()}finally{hn=s,ks.transition=n,rn=t,!(rn&6)&&Cl()}}function n1(){Yi=kc.current,zn(kc)}function gu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,HF(n)),dr!==null)for(n=dr.return;n!==null;){var s=n;switch(Ow(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&vg();break;case 3:Kc(),zn($i),zn(ci),Gw();break;case 5:qw(s);break;case 4:Kc();break;case 13:zn(qn);break;case 19:zn(qn);break;case 10:Vw(s.type._context);break;case 22:case 23:n1()}n=n.return}if(Ir=e,dr=e=dl(e.current,null),$r=Yi=t,wr=0,Tf=null,Jw=gy=bu=0,Vi=ef=null,lu!==null){for(t=0;t<lu.length;t++)if(n=lu[t],s=n.interleaved,s!==null){n.interleaved=null;var u=s.next,h=n.pending;if(h!==null){var f=h.next;h.next=u,s.next=f}n.pending=s}lu=null}return e}function Sk(e,t){do{var n=dr;try{if(Bw(),jm.current=Pg,Cg){for(var s=Zn.memoizedState;s!==null;){var u=s.queue;u!==null&&(u.pending=null),s=s.next}Cg=!1}if(wu=0,kr=_r=Zn=null,Yd=!1,bf=0,Yw.current=null,n===null||n.return===null){wr=1,Tf=t,dr=null;break}e:{var h=e,f=n.return,o=n,w=t;if(t=$r,o.flags|=32768,w!==null&&typeof w=="object"&&typeof w.then=="function"){var b=w,C=o,A=C.tag;if(!(C.mode&1)&&(A===0||A===11||A===15)){var M=C.alternate;M?(C.updateQueue=M.updateQueue,C.memoizedState=M.memoizedState,C.lanes=M.lanes):(C.updateQueue=null,C.memoizedState=null)}var N=hE(f);if(N!==null){N.flags&=-257,dE(N,f,o,h,t),N.mode&1&&cE(h,b,t),t=N,w=b;var V=t.updateQueue;if(V===null){var $=new Set;$.add(w),t.updateQueue=$}else V.add(w);break e}else{if(!(t&1)){cE(h,b,t),r1();break e}w=Error(Qe(426))}}else if(Vn&&o.mode&1){var G=hE(f);if(G!==null){!(G.flags&65536)&&(G.flags|=256),dE(G,f,o,h,t),Fw(Xc(w,o));break e}}h=w=Xc(w,o),wr!==4&&(wr=2),ef===null?ef=[h]:ef.push(h),h=f;do{switch(h.tag){case 3:h.flags|=65536,t&=-t,h.lanes|=t;var F=ak(h,w,t);rE(h,F);break e;case 1:o=w;var B=h.type,H=h.stateNode;if(!(h.flags&128)&&(typeof B.getDerivedStateFromError=="function"||H!==null&&typeof H.componentDidCatch=="function"&&(cl===null||!cl.has(H)))){h.flags|=65536,t&=-t,h.lanes|=t;var J=ok(h,o,t);rE(h,J);break e}}h=h.return}while(h!==null)}Ck(n)}catch(fe){t=fe,dr===n&&n!==null&&(dr=n=n.return);continue}break}while(1)}function Ek(){var e=Ag.current;return Ag.current=Pg,e===null?Pg:e}function r1(){(wr===0||wr===3||wr===2)&&(wr=4),Ir===null||!(bu&268435455)&&!(gy&268435455)||Yo(Ir,$r)}function Mg(e,t){var n=rn;rn|=2;var s=Ek();(Ir!==e||$r!==t)&&(Qa=null,gu(e,t));do try{xN();break}catch(u){Sk(e,u)}while(1);if(Bw(),rn=n,Ag.current=s,dr!==null)throw Error(Qe(261));return Ir=null,$r=0,wr}function xN(){for(;dr!==null;)Tk(dr)}function _N(){for(;dr!==null&&!GO();)Tk(dr)}function Tk(e){var t=Ak(e.alternate,e,Yi);e.memoizedProps=e.pendingProps,t===null?Ck(e):dr=t,Yw.current=null}function Ck(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=fN(n,t),n!==null){n.flags&=32767,dr=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{wr=6,dr=null;return}}else if(n=dN(n,t,Yi),n!==null){dr=n;return}if(t=t.sibling,t!==null){dr=t;return}dr=t=e}while(t!==null);wr===0&&(wr=5)}function eu(e,t,n){var s=hn,u=ks.transition;try{ks.transition=null,hn=1,wN(e,t,n,s)}finally{ks.transition=u,hn=s}return null}function wN(e,t,n,s){do jc();while(tl!==null);if(rn&6)throw Error(Qe(327));n=e.finishedWork;var u=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Qe(177));e.callbackNode=null,e.callbackPriority=0;var h=n.lanes|n.childLanes;if(tF(e,h),e===Ir&&(dr=Ir=null,$r=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Em||(Em=!0,kk(dg,function(){return jc(),null})),h=(n.flags&15990)!==0,n.subtreeFlags&15990||h){h=ks.transition,ks.transition=null;var f=hn;hn=1;var o=rn;rn|=4,Yw.current=null,mN(e,n),_k(n,e),jF(Y_),pg=!!Q_,Y_=Q_=null,e.current=n,gN(n),ZO(),rn=o,hn=f,ks.transition=h}else e.current=n;if(Em&&(Em=!1,tl=e,Ig=u),h=e.pendingLanes,h===0&&(cl=null),KO(n.stateNode),qi(e,cr()),t!==null)for(s=e.onRecoverableError,n=0;n<t.length;n++)u=t[n],s(u.value,{componentStack:u.stack,digest:u.digest});if(kg)throw kg=!1,e=v0,v0=null,e;return Ig&1&&e.tag!==0&&jc(),h=e.pendingLanes,h&1?e===x0?tf++:(tf=0,x0=e):tf=0,Cl(),null}function jc(){if(tl!==null){var e=sA(Ig),t=ks.transition,n=hn;try{if(ks.transition=null,hn=16>e?16:e,tl===null)var s=!1;else{if(e=tl,tl=null,Ig=0,rn&6)throw Error(Qe(331));var u=rn;for(rn|=4,St=e.current;St!==null;){var h=St,f=h.child;if(St.flags&16){var o=h.deletions;if(o!==null){for(var w=0;w<o.length;w++){var b=o[w];for(St=b;St!==null;){var C=St;switch(C.tag){case 0:case 11:case 15:Jd(8,C,h)}var A=C.child;if(A!==null)A.return=C,St=A;else for(;St!==null;){C=St;var M=C.sibling,N=C.return;if(yk(C),C===b){St=null;break}if(M!==null){M.return=N,St=M;break}St=N}}}var V=h.alternate;if(V!==null){var $=V.child;if($!==null){V.child=null;do{var G=$.sibling;$.sibling=null,$=G}while($!==null)}}St=h}}if(h.subtreeFlags&2064&&f!==null)f.return=h,St=f;else e:for(;St!==null;){if(h=St,h.flags&2048)switch(h.tag){case 0:case 11:case 15:Jd(9,h,h.return)}var F=h.sibling;if(F!==null){F.return=h.return,St=F;break e}St=h.return}}var B=e.current;for(St=B;St!==null;){f=St;var H=f.child;if(f.subtreeFlags&2064&&H!==null)H.return=f,St=H;else e:for(f=B;St!==null;){if(o=St,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:my(9,o)}}catch(fe){Yn(o,o.return,fe)}if(o===f){St=null;break e}var J=o.sibling;if(J!==null){J.return=o.return,St=J;break e}St=o.return}}if(rn=u,Cl(),Ea&&typeof Ea.onPostCommitFiberRoot=="function")try{Ea.onPostCommitFiberRoot(oy,e)}catch{}s=!0}return s}finally{hn=n,ks.transition=t}}return!1}function TE(e,t,n){t=Xc(n,t),t=ak(e,t,1),e=ul(e,t,1),t=Ci(),e!==null&&(jf(e,1,t),qi(e,t))}function Yn(e,t,n){if(e.tag===3)TE(e,e,n);else for(;t!==null;){if(t.tag===3){TE(t,e,n);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(cl===null||!cl.has(s))){e=Xc(n,e),e=ok(t,e,1),t=ul(t,e,1),e=Ci(),t!==null&&(jf(t,1,e),qi(t,e));break}}t=t.return}}function bN(e,t,n){var s=e.pingCache;s!==null&&s.delete(t),t=Ci(),e.pingedLanes|=e.suspendedLanes&n,Ir===e&&($r&n)===n&&(wr===4||wr===3&&($r&130023424)===$r&&500>cr()-e1?gu(e,0):Jw|=n),qi(e,t)}function Pk(e,t){t===0&&(e.mode&1?(t=pm,pm<<=1,!(pm&130023424)&&(pm=4194304)):t=1);var n=Ci();e=mo(e,t),e!==null&&(jf(e,t,n),qi(e,n))}function SN(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Pk(e,n)}function EN(e,t){var n=0;switch(e.tag){case 13:var s=e.stateNode,u=e.memoizedState;u!==null&&(n=u.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(Qe(314))}s!==null&&s.delete(t),Pk(e,n)}var Ak;Ak=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||$i.current)ji=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return ji=!1,hN(e,t,n);ji=!!(e.flags&131072)}else ji=!1,Vn&&t.flags&1048576&&MA(t,wg,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;Um(e,t),e=t.pendingProps;var u=Zc(t,ci.current);Vc(t,n),u=Ww(null,t,s,e,u,n);var h=Hw();return t.flags|=1,typeof u=="object"&&u!==null&&typeof u.render=="function"&&u.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ui(s)?(h=!0,xg(t)):h=!1,t.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,$w(t),u.updater=fy,t.stateNode=u,u._reactInternals=t,o0(t,s,e,n),t=c0(null,t,s,!0,h,n)):(t.tag=0,Vn&&h&&zw(t),Si(null,t,u,n),t=t.child),t;case 16:s=t.elementType;e:{switch(Um(e,t),e=t.pendingProps,u=s._init,s=u(s._payload),t.type=s,u=t.tag=CN(s),e=Ks(s,e),u){case 0:t=u0(null,t,s,e,n);break e;case 1:t=mE(null,t,s,e,n);break e;case 11:t=fE(null,t,s,e,n);break e;case 14:t=pE(null,t,s,Ks(s.type,e),n);break e}throw Error(Qe(306,s,""))}return t;case 0:return s=t.type,u=t.pendingProps,u=t.elementType===s?u:Ks(s,u),u0(e,t,s,u,n);case 1:return s=t.type,u=t.pendingProps,u=t.elementType===s?u:Ks(s,u),mE(e,t,s,u,n);case 3:e:{if(hk(t),e===null)throw Error(Qe(387));s=t.pendingProps,h=t.memoizedState,u=h.element,zA(e,t),Eg(t,s,null,n);var f=t.memoizedState;if(s=f.element,h.isDehydrated)if(h={element:s,isDehydrated:!1,cache:f.cache,pendingSuspenseBoundaries:f.pendingSuspenseBoundaries,transitions:f.transitions},t.updateQueue.baseState=h,t.memoizedState=h,t.flags&256){u=Xc(Error(Qe(423)),t),t=gE(e,t,s,n,u);break e}else if(s!==u){u=Xc(Error(Qe(424)),t),t=gE(e,t,s,n,u);break e}else for(es=ll(t.stateNode.containerInfo.firstChild),ns=t,Vn=!0,Js=null,n=BA(t,null,s,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Wc(),s===u){t=go(e,t,n);break e}Si(e,t,s,n)}t=t.child}return t;case 5:return VA(t),e===null&&i0(t),s=t.type,u=t.pendingProps,h=e!==null?e.memoizedProps:null,f=u.children,J_(s,u)?f=null:h!==null&&J_(s,h)&&(t.flags|=32),ck(e,t),Si(e,t,f,n),t.child;case 6:return e===null&&i0(t),null;case 13:return dk(e,t,n);case 4:return Uw(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=Hc(t,null,s,n):Si(e,t,s,n),t.child;case 11:return s=t.type,u=t.pendingProps,u=t.elementType===s?u:Ks(s,u),fE(e,t,s,u,n);case 7:return Si(e,t,t.pendingProps,n),t.child;case 8:return Si(e,t,t.pendingProps.children,n),t.child;case 12:return Si(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(s=t.type._context,u=t.pendingProps,h=t.memoizedProps,f=u.value,Pn(bg,s._currentValue),s._currentValue=f,h!==null)if(ia(h.value,f)){if(h.children===u.children&&!$i.current){t=go(e,t,n);break e}}else for(h=t.child,h!==null&&(h.return=t);h!==null;){var o=h.dependencies;if(o!==null){f=h.child;for(var w=o.firstContext;w!==null;){if(w.context===s){if(h.tag===1){w=oo(-1,n&-n),w.tag=2;var b=h.updateQueue;if(b!==null){b=b.shared;var C=b.pending;C===null?w.next=w:(w.next=C.next,C.next=w),b.pending=w}}h.lanes|=n,w=h.alternate,w!==null&&(w.lanes|=n),s0(h.return,n,t),o.lanes|=n;break}w=w.next}}else if(h.tag===10)f=h.type===t.type?null:h.child;else if(h.tag===18){if(f=h.return,f===null)throw Error(Qe(341));f.lanes|=n,o=f.alternate,o!==null&&(o.lanes|=n),s0(f,n,t),f=h.sibling}else f=h.child;if(f!==null)f.return=h;else for(f=h;f!==null;){if(f===t){f=null;break}if(h=f.sibling,h!==null){h.return=f.return,f=h;break}f=f.return}h=f}Si(e,t,u.children,n),t=t.child}return t;case 9:return u=t.type,s=t.pendingProps.children,Vc(t,n),u=Ms(u),s=s(u),t.flags|=1,Si(e,t,s,n),t.child;case 14:return s=t.type,u=Ks(s,t.pendingProps),u=Ks(s.type,u),pE(e,t,s,u,n);case 15:return lk(e,t,t.type,t.pendingProps,n);case 17:return s=t.type,u=t.pendingProps,u=t.elementType===s?u:Ks(s,u),Um(e,t),t.tag=1,Ui(s)?(e=!0,xg(t)):e=!1,Vc(t,n),FA(t,s,u),o0(t,s,u,n),c0(null,t,s,!0,e,n);case 19:return fk(e,t,n);case 22:return uk(e,t,n)}throw Error(Qe(156,t.tag))};function kk(e,t){return tA(e,t)}function TN(e,t,n,s){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function As(e,t,n,s){return new TN(e,t,n,s)}function i1(e){return e=e.prototype,!(!e||!e.isReactComponent)}function CN(e){if(typeof e=="function")return i1(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Sw)return 11;if(e===Ew)return 14}return 2}function dl(e,t){var n=e.alternate;return n===null?(n=As(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Zm(e,t,n,s,u,h){var f=2;if(s=e,typeof e=="function")i1(e)&&(f=1);else if(typeof e=="string")f=5;else e:switch(e){case xc:return yu(n.children,u,h,t);case bw:f=8,u|=8;break;case M_:return e=As(12,n,t,u|2),e.elementType=M_,e.lanes=h,e;case R_:return e=As(13,n,t,u),e.elementType=R_,e.lanes=h,e;case D_:return e=As(19,n,t,u),e.elementType=D_,e.lanes=h,e;case NP:return yy(n,u,h,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case OP:f=10;break e;case FP:f=9;break e;case Sw:f=11;break e;case Ew:f=14;break e;case Ho:f=16,s=null;break e}throw Error(Qe(130,e==null?e:typeof e,""))}return t=As(f,n,t,u),t.elementType=e,t.type=s,t.lanes=h,t}function yu(e,t,n,s){return e=As(7,e,s,t),e.lanes=n,e}function yy(e,t,n,s){return e=As(22,e,s,t),e.elementType=NP,e.lanes=n,e.stateNode={isHidden:!1},e}function Gx(e,t,n){return e=As(6,e,null,t),e.lanes=n,e}function Zx(e,t,n){return t=As(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function PN(e,t,n,s,u){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Cx(0),this.expirationTimes=Cx(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Cx(0),this.identifierPrefix=s,this.onRecoverableError=u,this.mutableSourceEagerHydrationData=null}function s1(e,t,n,s,u,h,f,o,w){return e=new PN(e,t,n,o,w),t===1?(t=1,h===!0&&(t|=8)):t=0,h=As(3,null,null,t),e.current=h,h.stateNode=e,h.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},$w(h),e}function AN(e,t,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:vc,key:s==null?null:""+s,children:e,containerInfo:t,implementation:n}}function Ik(e){if(!e)return yl;e=e._reactInternals;e:{if(Pu(e)!==e||e.tag!==1)throw Error(Qe(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ui(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Qe(171))}if(e.tag===1){var n=e.type;if(Ui(n))return kA(e,n,t)}return t}function Mk(e,t,n,s,u,h,f,o,w){return e=s1(n,s,!0,e,u,h,f,o,w),e.context=Ik(null),n=e.current,s=Ci(),u=hl(n),h=oo(s,u),h.callback=t??null,ul(n,h,u),e.current.lanes=u,jf(e,u,s),qi(e,s),e}function vy(e,t,n,s){var u=t.current,h=Ci(),f=hl(u);return n=Ik(n),t.context===null?t.context=n:t.pendingContext=n,t=oo(h,f),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=ul(u,t,f),e!==null&&(ra(e,u,f,h),Vm(e,u,f)),f}function Rg(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function CE(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function a1(e,t){CE(e,t),(e=e.alternate)&&CE(e,t)}function kN(){return null}var Rk=typeof reportError=="function"?reportError:function(e){console.error(e)};function o1(e){this._internalRoot=e}xy.prototype.render=o1.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Qe(409));vy(e,t,null,null)};xy.prototype.unmount=o1.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Su(function(){vy(null,e,null,null)}),t[po]=null}};function xy(e){this._internalRoot=e}xy.prototype.unstable_scheduleHydration=function(e){if(e){var t=lA();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Qo.length&&t!==0&&t<Qo[n].priority;n++);Qo.splice(n,0,e),n===0&&cA(e)}};function l1(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function _y(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function PE(){}function IN(e,t,n,s,u){if(u){if(typeof s=="function"){var h=s;s=function(){var b=Rg(f);h.call(b)}}var f=Mk(t,s,e,0,null,!1,!1,"",PE);return e._reactRootContainer=f,e[po]=f.current,yf(e.nodeType===8?e.parentNode:e),Su(),f}for(;u=e.lastChild;)e.removeChild(u);if(typeof s=="function"){var o=s;s=function(){var b=Rg(w);o.call(b)}}var w=s1(e,0,!1,null,null,!1,!1,"",PE);return e._reactRootContainer=w,e[po]=w.current,yf(e.nodeType===8?e.parentNode:e),Su(function(){vy(t,w,n,s)}),w}function wy(e,t,n,s,u){var h=n._reactRootContainer;if(h){var f=h;if(typeof u=="function"){var o=u;u=function(){var w=Rg(f);o.call(w)}}vy(t,f,e,u)}else f=IN(n,t,e,u,s);return Rg(f)}aA=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Vd(t.pendingLanes);n!==0&&(Pw(t,n|1),qi(t,cr()),!(rn&6)&&(Qc=cr()+500,Cl()))}break;case 13:Su(function(){var s=mo(e,1);if(s!==null){var u=Ci();ra(s,e,1,u)}}),a1(e,1)}};Aw=function(e){if(e.tag===13){var t=mo(e,134217728);if(t!==null){var n=Ci();ra(t,e,134217728,n)}a1(e,134217728)}};oA=function(e){if(e.tag===13){var t=hl(e),n=mo(e,t);if(n!==null){var s=Ci();ra(n,e,t,s)}a1(e,t)}};lA=function(){return hn};uA=function(e,t){var n=hn;try{return hn=e,t()}finally{hn=n}};U_=function(e,t,n){switch(t){case"input":if(O_(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var s=n[t];if(s!==e&&s.form===e.form){var u=hy(s);if(!u)throw Error(Qe(90));VP(s),O_(s,u)}}}break;case"textarea":$P(e,n);break;case"select":t=n.value,t!=null&&Oc(e,!!n.multiple,t,!1)}};KP=t1;XP=Su;var MN={usingClientEntryPoint:!1,Events:[Uf,Sc,hy,WP,HP,t1]},Md={findFiberByHostInstance:ou,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},RN={bundleType:Md.bundleType,version:Md.version,rendererPackageName:Md.rendererPackageName,rendererConfig:Md.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:vo.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=JP(e),e===null?null:e.stateNode},findFiberByHostInstance:Md.findFiberByHostInstance||kN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Tm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Tm.isDisabled&&Tm.supportsFiber)try{oy=Tm.inject(RN),Ea=Tm}catch{}}os.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=MN;os.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!l1(t))throw Error(Qe(200));return AN(e,t,null,n)};os.createRoot=function(e,t){if(!l1(e))throw Error(Qe(299));var n=!1,s="",u=Rk;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(u=t.onRecoverableError)),t=s1(e,1,!1,null,null,n,!1,s,u),e[po]=t.current,yf(e.nodeType===8?e.parentNode:e),new o1(t)};os.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Qe(188)):(e=Object.keys(e).join(","),Error(Qe(268,e)));return e=JP(t),e=e===null?null:e.stateNode,e};os.flushSync=function(e){return Su(e)};os.hydrate=function(e,t,n){if(!_y(t))throw Error(Qe(200));return wy(null,e,t,!0,n)};os.hydrateRoot=function(e,t,n){if(!l1(e))throw Error(Qe(405));var s=n!=null&&n.hydratedSources||null,u=!1,h="",f=Rk;if(n!=null&&(n.unstable_strictMode===!0&&(u=!0),n.identifierPrefix!==void 0&&(h=n.identifierPrefix),n.onRecoverableError!==void 0&&(f=n.onRecoverableError)),t=Mk(t,null,e,1,n??null,u,!1,h,f),e[po]=t.current,yf(e),s)for(e=0;e<s.length;e++)n=s[e],u=n._getVersion,u=u(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,u]:t.mutableSourceEagerHydrationData.push(n,u);return new xy(t)};os.render=function(e,t,n){if(!_y(t))throw Error(Qe(200));return wy(null,e,t,!1,n)};os.unmountComponentAtNode=function(e){if(!_y(e))throw Error(Qe(40));return e._reactRootContainer?(Su(function(){wy(null,null,e,!1,function(){e._reactRootContainer=null,e[po]=null})}),!0):!1};os.unstable_batchedUpdates=t1;os.unstable_renderSubtreeIntoContainer=function(e,t,n,s){if(!_y(n))throw Error(Qe(200));if(e==null||e._reactInternals===void 0)throw Error(Qe(38));return wy(e,t,n,!1,s)};os.version="18.2.0-next-9e3b772b8-20220608";function Dk(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Dk)}catch(e){console.error(e)}}Dk(),MP.exports=os;var u1=MP.exports;const Cm=xP(u1);var AE=u1;k_.createRoot=AE.createRoot,k_.hydrateRoot=AE.hydrateRoot;var Lk={exports:{}},zk={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yc=Q;function DN(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var LN=typeof Object.is=="function"?Object.is:DN,zN=Yc.useState,ON=Yc.useEffect,FN=Yc.useLayoutEffect,NN=Yc.useDebugValue;function BN(e,t){var n=t(),s=zN({inst:{value:n,getSnapshot:t}}),u=s[0].inst,h=s[1];return FN(function(){u.value=n,u.getSnapshot=t,Wx(u)&&h({inst:u})},[e,n,t]),ON(function(){return Wx(u)&&h({inst:u}),e(function(){Wx(u)&&h({inst:u})})},[e]),NN(n),n}function Wx(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!LN(e,n)}catch{return!0}}function VN(e,t){return t()}var jN=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?VN:BN;zk.useSyncExternalStore=Yc.useSyncExternalStore!==void 0?Yc.useSyncExternalStore:jN;Lk.exports=zk;var Ok=Lk.exports,Fk={exports:{}},Nk={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var by=Q,$N=Ok;function UN(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var qN=typeof Object.is=="function"?Object.is:UN,GN=$N.useSyncExternalStore,ZN=by.useRef,WN=by.useEffect,HN=by.useMemo,KN=by.useDebugValue;Nk.useSyncExternalStoreWithSelector=function(e,t,n,s,u){var h=ZN(null);if(h.current===null){var f={hasValue:!1,value:null};h.current=f}else f=h.current;h=HN(function(){function w(N){if(!b){if(b=!0,C=N,N=s(N),u!==void 0&&f.hasValue){var V=f.value;if(u(V,N))return A=V}return A=N}if(V=A,qN(C,N))return V;var $=s(N);return u!==void 0&&u(V,$)?V:(C=N,A=$)}var b=!1,C,A,M=n===void 0?null:n;return[function(){return w(t())},M===null?void 0:function(){return w(M())}]},[t,n,s,u]);var o=GN(e,h[0],h[1]);return WN(function(){f.hasValue=!0,f.value=o},[o]),KN(o),o};Fk.exports=Nk;var XN=Fk.exports;function QN(e){e()}let Bk=QN;const YN=e=>Bk=e,JN=()=>Bk,kE=Symbol.for("react-redux-context"),IE=typeof globalThis<"u"?globalThis:{};function e3(){var e;if(!Q.createContext)return{};const t=(e=IE[kE])!=null?e:IE[kE]=new Map;let n=t.get(Q.createContext);return n||(n=Q.createContext(null),t.set(Q.createContext,n)),n}const vl=e3();function c1(e=vl){return function(){return Q.useContext(e)}}const Vk=c1(),t3=()=>{throw new Error("uSES not initialized!")};let jk=t3;const n3=e=>{jk=e},r3=(e,t)=>e===t;function i3(e=vl){const t=e===vl?Vk:c1(e);return function(s,u={}){const{equalityFn:h=r3,stabilityCheck:f=void 0,noopCheck:o=void 0}=typeof u=="function"?{equalityFn:u}:u,{store:w,subscription:b,getServerState:C,stabilityCheck:A,noopCheck:M}=t();Q.useRef(!0);const N=Q.useCallback({[s.name]($){return s($)}}[s.name],[s,A,f]),V=jk(b.addNestedSub,w.getState,C||w.getState,N,h);return Q.useDebugValue(V),V}}const s3=i3();function Eu(){return Eu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Eu.apply(this,arguments)}function h1(e,t){if(e==null)return{};var n={},s=Object.keys(e),u,h;for(h=0;h<s.length;h++)u=s[h],!(t.indexOf(u)>=0)&&(n[u]=e[u]);return n}var $k={exports:{}},dn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mr=typeof Symbol=="function"&&Symbol.for,d1=Mr?Symbol.for("react.element"):60103,f1=Mr?Symbol.for("react.portal"):60106,Sy=Mr?Symbol.for("react.fragment"):60107,Ey=Mr?Symbol.for("react.strict_mode"):60108,Ty=Mr?Symbol.for("react.profiler"):60114,Cy=Mr?Symbol.for("react.provider"):60109,Py=Mr?Symbol.for("react.context"):60110,p1=Mr?Symbol.for("react.async_mode"):60111,Ay=Mr?Symbol.for("react.concurrent_mode"):60111,ky=Mr?Symbol.for("react.forward_ref"):60112,Iy=Mr?Symbol.for("react.suspense"):60113,a3=Mr?Symbol.for("react.suspense_list"):60120,My=Mr?Symbol.for("react.memo"):60115,Ry=Mr?Symbol.for("react.lazy"):60116,o3=Mr?Symbol.for("react.block"):60121,l3=Mr?Symbol.for("react.fundamental"):60117,u3=Mr?Symbol.for("react.responder"):60118,c3=Mr?Symbol.for("react.scope"):60119;function us(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case d1:switch(e=e.type,e){case p1:case Ay:case Sy:case Ty:case Ey:case Iy:return e;default:switch(e=e&&e.$$typeof,e){case Py:case ky:case Ry:case My:case Cy:return e;default:return t}}case f1:return t}}}function Uk(e){return us(e)===Ay}dn.AsyncMode=p1;dn.ConcurrentMode=Ay;dn.ContextConsumer=Py;dn.ContextProvider=Cy;dn.Element=d1;dn.ForwardRef=ky;dn.Fragment=Sy;dn.Lazy=Ry;dn.Memo=My;dn.Portal=f1;dn.Profiler=Ty;dn.StrictMode=Ey;dn.Suspense=Iy;dn.isAsyncMode=function(e){return Uk(e)||us(e)===p1};dn.isConcurrentMode=Uk;dn.isContextConsumer=function(e){return us(e)===Py};dn.isContextProvider=function(e){return us(e)===Cy};dn.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===d1};dn.isForwardRef=function(e){return us(e)===ky};dn.isFragment=function(e){return us(e)===Sy};dn.isLazy=function(e){return us(e)===Ry};dn.isMemo=function(e){return us(e)===My};dn.isPortal=function(e){return us(e)===f1};dn.isProfiler=function(e){return us(e)===Ty};dn.isStrictMode=function(e){return us(e)===Ey};dn.isSuspense=function(e){return us(e)===Iy};dn.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Sy||e===Ay||e===Ty||e===Ey||e===Iy||e===a3||typeof e=="object"&&e!==null&&(e.$$typeof===Ry||e.$$typeof===My||e.$$typeof===Cy||e.$$typeof===Py||e.$$typeof===ky||e.$$typeof===l3||e.$$typeof===u3||e.$$typeof===c3||e.$$typeof===o3)};dn.typeOf=us;$k.exports=dn;var h3=$k.exports,qk=h3,d3={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},f3={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Gk={};Gk[qk.ForwardRef]=d3;Gk[qk.Memo]=f3;var yn={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m1=Symbol.for("react.element"),g1=Symbol.for("react.portal"),Dy=Symbol.for("react.fragment"),Ly=Symbol.for("react.strict_mode"),zy=Symbol.for("react.profiler"),Oy=Symbol.for("react.provider"),Fy=Symbol.for("react.context"),p3=Symbol.for("react.server_context"),Ny=Symbol.for("react.forward_ref"),By=Symbol.for("react.suspense"),Vy=Symbol.for("react.suspense_list"),jy=Symbol.for("react.memo"),$y=Symbol.for("react.lazy"),m3=Symbol.for("react.offscreen"),Zk;Zk=Symbol.for("react.module.reference");function Ds(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case m1:switch(e=e.type,e){case Dy:case zy:case Ly:case By:case Vy:return e;default:switch(e=e&&e.$$typeof,e){case p3:case Fy:case Ny:case $y:case jy:case Oy:return e;default:return t}}case g1:return t}}}yn.ContextConsumer=Fy;yn.ContextProvider=Oy;yn.Element=m1;yn.ForwardRef=Ny;yn.Fragment=Dy;yn.Lazy=$y;yn.Memo=jy;yn.Portal=g1;yn.Profiler=zy;yn.StrictMode=Ly;yn.Suspense=By;yn.SuspenseList=Vy;yn.isAsyncMode=function(){return!1};yn.isConcurrentMode=function(){return!1};yn.isContextConsumer=function(e){return Ds(e)===Fy};yn.isContextProvider=function(e){return Ds(e)===Oy};yn.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===m1};yn.isForwardRef=function(e){return Ds(e)===Ny};yn.isFragment=function(e){return Ds(e)===Dy};yn.isLazy=function(e){return Ds(e)===$y};yn.isMemo=function(e){return Ds(e)===jy};yn.isPortal=function(e){return Ds(e)===g1};yn.isProfiler=function(e){return Ds(e)===zy};yn.isStrictMode=function(e){return Ds(e)===Ly};yn.isSuspense=function(e){return Ds(e)===By};yn.isSuspenseList=function(e){return Ds(e)===Vy};yn.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Dy||e===zy||e===Ly||e===By||e===Vy||e===m3||typeof e=="object"&&e!==null&&(e.$$typeof===$y||e.$$typeof===jy||e.$$typeof===Oy||e.$$typeof===Fy||e.$$typeof===Ny||e.$$typeof===Zk||e.getModuleId!==void 0)};yn.typeOf=Ds;function g3(){const e=JN();let t=null,n=null;return{clear(){t=null,n=null},notify(){e(()=>{let s=t;for(;s;)s.callback(),s=s.next})},get(){let s=[],u=t;for(;u;)s.push(u),u=u.next;return s},subscribe(s){let u=!0,h=n={callback:s,next:null,prev:n};return h.prev?h.prev.next=h:t=h,function(){!u||t===null||(u=!1,h.next?h.next.prev=h.prev:n=h.prev,h.prev?h.prev.next=h.next:t=h.next)}}}}const ME={notify(){},get:()=>[]};function y3(e,t){let n,s=ME,u=0,h=!1;function f($){C();const G=s.subscribe($);let F=!1;return()=>{F||(F=!0,G(),A())}}function o(){s.notify()}function w(){V.onStateChange&&V.onStateChange()}function b(){return h}function C(){u++,n||(n=t?t.addNestedSub(w):e.subscribe(w),s=g3())}function A(){u--,n&&u===0&&(n(),n=void 0,s.clear(),s=ME)}function M(){h||(h=!0,C())}function N(){h&&(h=!1,A())}const V={addNestedSub:f,notifyNestedSubs:o,handleChangeWrapper:w,isSubscribed:b,trySubscribe:M,tryUnsubscribe:N,getListeners:()=>s};return V}const v3=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",x3=v3?Q.useLayoutEffect:Q.useEffect;function _3({store:e,context:t,children:n,serverState:s,stabilityCheck:u="once",noopCheck:h="once"}){const f=Q.useMemo(()=>{const b=y3(e);return{store:e,subscription:b,getServerState:s?()=>s:void 0,stabilityCheck:u,noopCheck:h}},[e,s,u,h]),o=Q.useMemo(()=>e.getState(),[e]);x3(()=>{const{subscription:b}=f;return b.onStateChange=b.notifyNestedSubs,b.trySubscribe(),o!==e.getState()&&b.notifyNestedSubs(),()=>{b.tryUnsubscribe(),b.onStateChange=void 0}},[f,o]);const w=t||vl;return Q.createElement(w.Provider,{value:f},n)}function Wk(e=vl){const t=e===vl?Vk:c1(e);return function(){const{store:s}=t();return s}}const w3=Wk();function b3(e=vl){const t=e===vl?w3:Wk(e);return function(){return t().dispatch}}const Hk=b3();n3(XN.useSyncExternalStoreWithSelector);YN(u1.unstable_batchedUpdates);/**
 * @remix-run/router v1.15.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Cf(){return Cf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Cf.apply(this,arguments)}var nl;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(nl||(nl={}));const RE="popstate";function S3(e){e===void 0&&(e={});function t(s,u){let{pathname:h,search:f,hash:o}=s.location;return b0("",{pathname:h,search:f,hash:o},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function n(s,u){return typeof u=="string"?u:Dg(u)}return T3(t,n,null,e)}function Wn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Kk(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function E3(){return Math.random().toString(36).substr(2,8)}function DE(e,t){return{usr:e.state,key:e.key,idx:t}}function b0(e,t,n,s){return n===void 0&&(n=null),Cf({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?ch(t):t,{state:n,key:t&&t.key||s||E3()})}function Dg(e){let{pathname:t="/",search:n="",hash:s=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function ch(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let s=e.indexOf("?");s>=0&&(t.search=e.substr(s),e=e.substr(0,s)),e&&(t.pathname=e)}return t}function T3(e,t,n,s){s===void 0&&(s={});let{window:u=document.defaultView,v5Compat:h=!1}=s,f=u.history,o=nl.Pop,w=null,b=C();b==null&&(b=0,f.replaceState(Cf({},f.state,{idx:b}),""));function C(){return(f.state||{idx:null}).idx}function A(){o=nl.Pop;let G=C(),F=G==null?null:G-b;b=G,w&&w({action:o,location:$.location,delta:F})}function M(G,F){o=nl.Push;let B=b0($.location,G,F);n&&n(B,G),b=C()+1;let H=DE(B,b),J=$.createHref(B);try{f.pushState(H,"",J)}catch(fe){if(fe instanceof DOMException&&fe.name==="DataCloneError")throw fe;u.location.assign(J)}h&&w&&w({action:o,location:$.location,delta:1})}function N(G,F){o=nl.Replace;let B=b0($.location,G,F);n&&n(B,G),b=C();let H=DE(B,b),J=$.createHref(B);f.replaceState(H,"",J),h&&w&&w({action:o,location:$.location,delta:0})}function V(G){let F=u.location.origin!=="null"?u.location.origin:u.location.href,B=typeof G=="string"?G:Dg(G);return B=B.replace(/ $/,"%20"),Wn(F,"No window.location.(origin|href) available to create URL for href: "+B),new URL(B,F)}let $={get action(){return o},get location(){return e(u,f)},listen(G){if(w)throw new Error("A history only accepts one active listener");return u.addEventListener(RE,A),w=G,()=>{u.removeEventListener(RE,A),w=null}},createHref(G){return t(u,G)},createURL:V,encodeLocation(G){let F=V(G);return{pathname:F.pathname,search:F.search,hash:F.hash}},push:M,replace:N,go(G){return f.go(G)}};return $}var LE;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(LE||(LE={}));function C3(e,t,n){n===void 0&&(n="/");let s=typeof t=="string"?ch(t):t,u=Jc(s.pathname||"/",n);if(u==null)return null;let h=Xk(e);P3(h);let f=null;for(let o=0;f==null&&o<h.length;++o){let w=N3(u);f=O3(h[o],w)}return f}function Xk(e,t,n,s){t===void 0&&(t=[]),n===void 0&&(n=[]),s===void 0&&(s="");let u=(h,f,o)=>{let w={relativePath:o===void 0?h.path||"":o,caseSensitive:h.caseSensitive===!0,childrenIndex:f,route:h};w.relativePath.startsWith("/")&&(Wn(w.relativePath.startsWith(s),'Absolute route path "'+w.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),w.relativePath=w.relativePath.slice(s.length));let b=fl([s,w.relativePath]),C=n.concat(w);h.children&&h.children.length>0&&(Wn(h.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+b+'".')),Xk(h.children,t,C,b)),!(h.path==null&&!h.index)&&t.push({path:b,score:L3(b,h.index),routesMeta:C})};return e.forEach((h,f)=>{var o;if(h.path===""||!((o=h.path)!=null&&o.includes("?")))u(h,f);else for(let w of Qk(h.path))u(h,f,w)}),t}function Qk(e){let t=e.split("/");if(t.length===0)return[];let[n,...s]=t,u=n.endsWith("?"),h=n.replace(/\?$/,"");if(s.length===0)return u?[h,""]:[h];let f=Qk(s.join("/")),o=[];return o.push(...f.map(w=>w===""?h:[h,w].join("/"))),u&&o.push(...f),o.map(w=>e.startsWith("/")&&w===""?"/":w)}function P3(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:z3(t.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}const A3=/^:[\w-]+$/,k3=3,I3=2,M3=1,R3=10,D3=-2,zE=e=>e==="*";function L3(e,t){let n=e.split("/"),s=n.length;return n.some(zE)&&(s+=D3),t&&(s+=I3),n.filter(u=>!zE(u)).reduce((u,h)=>u+(A3.test(h)?k3:h===""?M3:R3),s)}function z3(e,t){return e.length===t.length&&e.slice(0,-1).every((s,u)=>s===t[u])?e[e.length-1]-t[t.length-1]:0}function O3(e,t){let{routesMeta:n}=e,s={},u="/",h=[];for(let f=0;f<n.length;++f){let o=n[f],w=f===n.length-1,b=u==="/"?t:t.slice(u.length)||"/",C=S0({path:o.relativePath,caseSensitive:o.caseSensitive,end:w},b);if(!C)return null;Object.assign(s,C.params);let A=o.route;h.push({params:s,pathname:fl([u,C.pathname]),pathnameBase:$3(fl([u,C.pathnameBase])),route:A}),C.pathnameBase!=="/"&&(u=fl([u,C.pathnameBase]))}return h}function S0(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,s]=F3(e.path,e.caseSensitive,e.end),u=t.match(n);if(!u)return null;let h=u[0],f=h.replace(/(.)\/+$/,"$1"),o=u.slice(1);return{params:s.reduce((b,C,A)=>{let{paramName:M,isOptional:N}=C;if(M==="*"){let $=o[A]||"";f=h.slice(0,h.length-$.length).replace(/(.)\/+$/,"$1")}const V=o[A];return N&&!V?b[M]=void 0:b[M]=(V||"").replace(/%2F/g,"/"),b},{}),pathname:h,pathnameBase:f,pattern:e}}function F3(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Kk(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let s=[],u="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,o,w)=>(s.push({paramName:o,isOptional:w!=null}),w?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(s.push({paramName:"*"}),u+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?u+="\\/*$":e!==""&&e!=="/"&&(u+="(?:(?=\\/|$))"),[new RegExp(u,t?void 0:"i"),s]}function N3(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Kk(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Jc(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,s=e.charAt(n);return s&&s!=="/"?null:e.slice(n)||"/"}function B3(e,t){t===void 0&&(t="/");let{pathname:n,search:s="",hash:u=""}=typeof e=="string"?ch(e):e;return{pathname:n?n.startsWith("/")?n:V3(n,t):t,search:U3(s),hash:q3(u)}}function V3(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(u=>{u===".."?n.length>1&&n.pop():u!=="."&&n.push(u)}),n.length>1?n.join("/"):"/"}function Hx(e,t,n,s){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function j3(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function y1(e,t){let n=j3(e);return t?n.map((s,u)=>u===e.length-1?s.pathname:s.pathnameBase):n.map(s=>s.pathnameBase)}function v1(e,t,n,s){s===void 0&&(s=!1);let u;typeof e=="string"?u=ch(e):(u=Cf({},e),Wn(!u.pathname||!u.pathname.includes("?"),Hx("?","pathname","search",u)),Wn(!u.pathname||!u.pathname.includes("#"),Hx("#","pathname","hash",u)),Wn(!u.search||!u.search.includes("#"),Hx("#","search","hash",u)));let h=e===""||u.pathname==="",f=h?"/":u.pathname,o;if(f==null)o=n;else{let A=t.length-1;if(!s&&f.startsWith("..")){let M=f.split("/");for(;M[0]==="..";)M.shift(),A-=1;u.pathname=M.join("/")}o=A>=0?t[A]:"/"}let w=B3(u,o),b=f&&f!=="/"&&f.endsWith("/"),C=(h||f===".")&&n.endsWith("/");return!w.pathname.endsWith("/")&&(b||C)&&(w.pathname+="/"),w}const fl=e=>e.join("/").replace(/\/\/+/g,"/"),$3=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),U3=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,q3=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function G3(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Yk=["post","put","patch","delete"];new Set(Yk);const Z3=["get",...Yk];new Set(Z3);/**
 * React Router v6.22.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Pf(){return Pf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Pf.apply(this,arguments)}const Uy=Q.createContext(null),Jk=Q.createContext(null),xo=Q.createContext(null),qy=Q.createContext(null),_o=Q.createContext({outlet:null,matches:[],isDataRoute:!1}),eI=Q.createContext(null);function W3(e,t){let{relative:n}=t===void 0?{}:t;hh()||Wn(!1);let{basename:s,navigator:u}=Q.useContext(xo),{hash:h,pathname:f,search:o}=Zy(e,{relative:n}),w=f;return s!=="/"&&(w=f==="/"?s:fl([s,f])),u.createHref({pathname:w,search:o,hash:h})}function hh(){return Q.useContext(qy)!=null}function dh(){return hh()||Wn(!1),Q.useContext(qy).location}function tI(e){Q.useContext(xo).static||Q.useLayoutEffect(e)}function Gy(){let{isDataRoute:e}=Q.useContext(_o);return e?l5():H3()}function H3(){hh()||Wn(!1);let e=Q.useContext(Uy),{basename:t,future:n,navigator:s}=Q.useContext(xo),{matches:u}=Q.useContext(_o),{pathname:h}=dh(),f=JSON.stringify(y1(u,n.v7_relativeSplatPath)),o=Q.useRef(!1);return tI(()=>{o.current=!0}),Q.useCallback(function(b,C){if(C===void 0&&(C={}),!o.current)return;if(typeof b=="number"){s.go(b);return}let A=v1(b,JSON.parse(f),h,C.relative==="path");e==null&&t!=="/"&&(A.pathname=A.pathname==="/"?t:fl([t,A.pathname])),(C.replace?s.replace:s.push)(A,C.state,C)},[t,s,f,h,e])}const K3=Q.createContext(null);function X3(e){let t=Q.useContext(_o).outlet;return t&&Q.createElement(K3.Provider,{value:e},t)}function Zy(e,t){let{relative:n}=t===void 0?{}:t,{future:s}=Q.useContext(xo),{matches:u}=Q.useContext(_o),{pathname:h}=dh(),f=JSON.stringify(y1(u,s.v7_relativeSplatPath));return Q.useMemo(()=>v1(e,JSON.parse(f),h,n==="path"),[e,f,h,n])}function Q3(e,t){return Y3(e,t)}function Y3(e,t,n,s){hh()||Wn(!1);let{navigator:u}=Q.useContext(xo),{matches:h}=Q.useContext(_o),f=h[h.length-1],o=f?f.params:{};f&&f.pathname;let w=f?f.pathnameBase:"/";f&&f.route;let b=dh(),C;if(t){var A;let G=typeof t=="string"?ch(t):t;w==="/"||(A=G.pathname)!=null&&A.startsWith(w)||Wn(!1),C=G}else C=b;let M=C.pathname||"/",N=M;if(w!=="/"){let G=w.replace(/^\//,"").split("/");N="/"+M.replace(/^\//,"").split("/").slice(G.length).join("/")}let V=C3(e,{pathname:N}),$=r5(V&&V.map(G=>Object.assign({},G,{params:Object.assign({},o,G.params),pathname:fl([w,u.encodeLocation?u.encodeLocation(G.pathname).pathname:G.pathname]),pathnameBase:G.pathnameBase==="/"?w:fl([w,u.encodeLocation?u.encodeLocation(G.pathnameBase).pathname:G.pathnameBase])})),h,n,s);return t&&$?Q.createElement(qy.Provider,{value:{location:Pf({pathname:"/",search:"",hash:"",state:null,key:"default"},C),navigationType:nl.Pop}},$):$}function J3(){let e=o5(),t=G3(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,u={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},h=null;return Q.createElement(Q.Fragment,null,Q.createElement("h2",null,"Unexpected Application Error!"),Q.createElement("h3",{style:{fontStyle:"italic"}},t),n?Q.createElement("pre",{style:u},n):null,h)}const e5=Q.createElement(J3,null);class t5 extends Q.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?Q.createElement(_o.Provider,{value:this.props.routeContext},Q.createElement(eI.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function n5(e){let{routeContext:t,match:n,children:s}=e,u=Q.useContext(Uy);return u&&u.static&&u.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(u.staticContext._deepestRenderedBoundaryId=n.route.id),Q.createElement(_o.Provider,{value:t},s)}function r5(e,t,n,s){var u;if(t===void 0&&(t=[]),n===void 0&&(n=null),s===void 0&&(s=null),e==null){var h;if((h=n)!=null&&h.errors)e=n.matches;else return null}let f=e,o=(u=n)==null?void 0:u.errors;if(o!=null){let C=f.findIndex(A=>A.route.id&&(o==null?void 0:o[A.route.id]));C>=0||Wn(!1),f=f.slice(0,Math.min(f.length,C+1))}let w=!1,b=-1;if(n&&s&&s.v7_partialHydration)for(let C=0;C<f.length;C++){let A=f[C];if((A.route.HydrateFallback||A.route.hydrateFallbackElement)&&(b=C),A.route.id){let{loaderData:M,errors:N}=n,V=A.route.loader&&M[A.route.id]===void 0&&(!N||N[A.route.id]===void 0);if(A.route.lazy||V){w=!0,b>=0?f=f.slice(0,b+1):f=[f[0]];break}}}return f.reduceRight((C,A,M)=>{let N,V=!1,$=null,G=null;n&&(N=o&&A.route.id?o[A.route.id]:void 0,$=A.route.errorElement||e5,w&&(b<0&&M===0?(u5("route-fallback",!1),V=!0,G=null):b===M&&(V=!0,G=A.route.hydrateFallbackElement||null)));let F=t.concat(f.slice(0,M+1)),B=()=>{let H;return N?H=$:V?H=G:A.route.Component?H=Q.createElement(A.route.Component,null):A.route.element?H=A.route.element:H=C,Q.createElement(n5,{match:A,routeContext:{outlet:C,matches:F,isDataRoute:n!=null},children:H})};return n&&(A.route.ErrorBoundary||A.route.errorElement||M===0)?Q.createElement(t5,{location:n.location,revalidation:n.revalidation,component:$,error:N,children:B(),routeContext:{outlet:null,matches:F,isDataRoute:!0}}):B()},null)}var nI=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(nI||{}),Lg=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Lg||{});function i5(e){let t=Q.useContext(Uy);return t||Wn(!1),t}function s5(e){let t=Q.useContext(Jk);return t||Wn(!1),t}function a5(e){let t=Q.useContext(_o);return t||Wn(!1),t}function rI(e){let t=a5(),n=t.matches[t.matches.length-1];return n.route.id||Wn(!1),n.route.id}function o5(){var e;let t=Q.useContext(eI),n=s5(Lg.UseRouteError),s=rI(Lg.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[s]}function l5(){let{router:e}=i5(nI.UseNavigateStable),t=rI(Lg.UseNavigateStable),n=Q.useRef(!1);return tI(()=>{n.current=!0}),Q.useCallback(function(u,h){h===void 0&&(h={}),n.current&&(typeof u=="number"?e.navigate(u):e.navigate(u,Pf({fromRouteId:t},h)))},[e,t])}const OE={};function u5(e,t,n){!t&&!OE[e]&&(OE[e]=!0)}function c5(e){let{to:t,replace:n,state:s,relative:u}=e;hh()||Wn(!1);let{future:h,static:f}=Q.useContext(xo),{matches:o}=Q.useContext(_o),{pathname:w}=dh(),b=Gy(),C=v1(t,y1(o,h.v7_relativeSplatPath),w,u==="path"),A=JSON.stringify(C);return Q.useEffect(()=>b(JSON.parse(A),{replace:n,state:s,relative:u}),[b,A,u,n,s]),null}function h5(e){return X3(e.context)}function Zo(e){Wn(!1)}function d5(e){let{basename:t="/",children:n=null,location:s,navigationType:u=nl.Pop,navigator:h,static:f=!1,future:o}=e;hh()&&Wn(!1);let w=t.replace(/^\/*/,"/"),b=Q.useMemo(()=>({basename:w,navigator:h,static:f,future:Pf({v7_relativeSplatPath:!1},o)}),[w,o,h,f]);typeof s=="string"&&(s=ch(s));let{pathname:C="/",search:A="",hash:M="",state:N=null,key:V="default"}=s,$=Q.useMemo(()=>{let G=Jc(C,w);return G==null?null:{location:{pathname:G,search:A,hash:M,state:N,key:V},navigationType:u}},[w,C,A,M,N,V,u]);return $==null?null:Q.createElement(xo.Provider,{value:b},Q.createElement(qy.Provider,{children:n,value:$}))}function f5(e){let{children:t,location:n}=e;return Q3(E0(t),n)}new Promise(()=>{});function E0(e,t){t===void 0&&(t=[]);let n=[];return Q.Children.forEach(e,(s,u)=>{if(!Q.isValidElement(s))return;let h=[...t,u];if(s.type===Q.Fragment){n.push.apply(n,E0(s.props.children,h));return}s.type!==Zo&&Wn(!1),!s.props.index||!s.props.children||Wn(!1);let f={id:s.props.id||h.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(f.children=E0(s.props.children,h)),n.push(f)}),n}/**
 * React Router DOM v6.22.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zg(){return zg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},zg.apply(this,arguments)}function iI(e,t){if(e==null)return{};var n={},s=Object.keys(e),u,h;for(h=0;h<s.length;h++)u=s[h],!(t.indexOf(u)>=0)&&(n[u]=e[u]);return n}function p5(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function m5(e,t){return e.button===0&&(!t||t==="_self")&&!p5(e)}const g5=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],y5=["aria-current","caseSensitive","className","end","style","to","unstable_viewTransition","children"],v5="6";try{window.__reactRouterVersion=v5}catch{}const x5=Q.createContext({isTransitioning:!1}),_5="startTransition",FE=kP[_5];function w5(e){let{basename:t,children:n,future:s,window:u}=e,h=Q.useRef();h.current==null&&(h.current=S3({window:u,v5Compat:!0}));let f=h.current,[o,w]=Q.useState({action:f.action,location:f.location}),{v7_startTransition:b}=s||{},C=Q.useCallback(A=>{b&&FE?FE(()=>w(A)):w(A)},[w,b]);return Q.useLayoutEffect(()=>f.listen(C),[f,C]),Q.createElement(d5,{basename:t,children:n,location:o.location,navigationType:o.action,navigator:f,future:s})}const b5=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",S5=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,E5=Q.forwardRef(function(t,n){let{onClick:s,relative:u,reloadDocument:h,replace:f,state:o,target:w,to:b,preventScrollReset:C,unstable_viewTransition:A}=t,M=iI(t,g5),{basename:N}=Q.useContext(xo),V,$=!1;if(typeof b=="string"&&S5.test(b)&&(V=b,b5))try{let H=new URL(window.location.href),J=b.startsWith("//")?new URL(H.protocol+b):new URL(b),fe=Jc(J.pathname,N);J.origin===H.origin&&fe!=null?b=fe+J.search+J.hash:$=!0}catch{}let G=W3(b,{relative:u}),F=C5(b,{replace:f,state:o,target:w,preventScrollReset:C,relative:u,unstable_viewTransition:A});function B(H){s&&s(H),H.defaultPrevented||F(H)}return Q.createElement("a",zg({},M,{href:V||G,onClick:$||h?s:B,ref:n,target:w}))}),x1=Q.forwardRef(function(t,n){let{"aria-current":s="page",caseSensitive:u=!1,className:h="",end:f=!1,style:o,to:w,unstable_viewTransition:b,children:C}=t,A=iI(t,y5),M=Zy(w,{relative:A.relative}),N=dh(),V=Q.useContext(Jk),{navigator:$,basename:G}=Q.useContext(xo),F=V!=null&&P5(M)&&b===!0,B=$.encodeLocation?$.encodeLocation(M).pathname:M.pathname,H=N.pathname,J=V&&V.navigation&&V.navigation.location?V.navigation.location.pathname:null;u||(H=H.toLowerCase(),J=J?J.toLowerCase():null,B=B.toLowerCase()),J&&G&&(J=Jc(J,G)||J);const fe=B!=="/"&&B.endsWith("/")?B.length-1:B.length;let Ee=H===B||!f&&H.startsWith(B)&&H.charAt(fe)==="/",Pe=J!=null&&(J===B||!f&&J.startsWith(B)&&J.charAt(B.length)==="/"),ve={isActive:Ee,isPending:Pe,isTransitioning:F},Ve=Ee?s:void 0,Me;typeof h=="function"?Me=h(ve):Me=[h,Ee?"active":null,Pe?"pending":null,F?"transitioning":null].filter(Boolean).join(" ");let pt=typeof o=="function"?o(ve):o;return Q.createElement(E5,zg({},A,{"aria-current":Ve,className:Me,ref:n,style:pt,to:w,unstable_viewTransition:b}),typeof C=="function"?C(ve):C)});var T0;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(T0||(T0={}));var NE;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(NE||(NE={}));function T5(e){let t=Q.useContext(Uy);return t||Wn(!1),t}function C5(e,t){let{target:n,replace:s,state:u,preventScrollReset:h,relative:f,unstable_viewTransition:o}=t===void 0?{}:t,w=Gy(),b=dh(),C=Zy(e,{relative:f});return Q.useCallback(A=>{if(m5(A,n)){A.preventDefault();let M=s!==void 0?s:Dg(b)===Dg(C);w(e,{replace:M,state:u,preventScrollReset:h,relative:f,unstable_viewTransition:o})}},[b,w,C,s,u,n,e,h,f,o])}function P5(e,t){t===void 0&&(t={});let n=Q.useContext(x5);n==null&&Wn(!1);let{basename:s}=T5(T0.useViewTransitionState),u=Zy(e,{relative:t.relative});if(!n.isTransitioning)return!1;let h=Jc(n.currentLocation.pathname,s)||n.currentLocation.pathname,f=Jc(n.nextLocation.pathname,s)||n.nextLocation.pathname;return S0(u.pathname,f)!=null||S0(u.pathname,h)!=null}class fh{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){const n={listener:t};return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}}const Af=typeof window>"u"||"Deno"in window;function Es(){}function A5(e,t){return typeof e=="function"?e(t):e}function C0(e){return typeof e=="number"&&e>=0&&e!==1/0}function sI(e,t){return Math.max(e+(t||0)-Date.now(),0)}function $d(e,t,n){return Gf(e)?typeof t=="function"?{...n,queryKey:e,queryFn:t}:{...t,queryKey:e}:e}function k5(e,t,n){return Gf(e)?typeof t=="function"?{...n,mutationKey:e,mutationFn:t}:{...t,mutationKey:e}:typeof e=="function"?{...t,mutationFn:e}:{...e}}function Xo(e,t,n){return Gf(e)?[{...t,queryKey:e},n]:[e||{},t]}function BE(e,t){const{type:n="all",exact:s,fetchStatus:u,predicate:h,queryKey:f,stale:o}=e;if(Gf(f)){if(s){if(t.queryHash!==_1(f,t.options))return!1}else if(!Og(t.queryKey,f))return!1}if(n!=="all"){const w=t.isActive();if(n==="active"&&!w||n==="inactive"&&w)return!1}return!(typeof o=="boolean"&&t.isStale()!==o||typeof u<"u"&&u!==t.state.fetchStatus||h&&!h(t))}function VE(e,t){const{exact:n,fetching:s,predicate:u,mutationKey:h}=e;if(Gf(h)){if(!t.options.mutationKey)return!1;if(n){if(cu(t.options.mutationKey)!==cu(h))return!1}else if(!Og(t.options.mutationKey,h))return!1}return!(typeof s=="boolean"&&t.state.status==="loading"!==s||u&&!u(t))}function _1(e,t){return((t==null?void 0:t.queryKeyHashFn)||cu)(e)}function cu(e){return JSON.stringify(e,(t,n)=>P0(n)?Object.keys(n).sort().reduce((s,u)=>(s[u]=n[u],s),{}):n)}function Og(e,t){return aI(e,t)}function aI(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(n=>!aI(e[n],t[n])):!1}function oI(e,t){if(e===t)return e;const n=jE(e)&&jE(t);if(n||P0(e)&&P0(t)){const s=n?e.length:Object.keys(e).length,u=n?t:Object.keys(t),h=u.length,f=n?[]:{};let o=0;for(let w=0;w<h;w++){const b=n?w:u[w];f[b]=oI(e[b],t[b]),f[b]===e[b]&&o++}return s===h&&o===s?e:f}return t}function Fg(e,t){if(e&&!t||t&&!e)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function jE(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function P0(e){if(!$E(e))return!1;const t=e.constructor;if(typeof t>"u")return!0;const n=t.prototype;return!(!$E(n)||!n.hasOwnProperty("isPrototypeOf"))}function $E(e){return Object.prototype.toString.call(e)==="[object Object]"}function Gf(e){return Array.isArray(e)}function lI(e){return new Promise(t=>{setTimeout(t,e)})}function UE(e){lI(0).then(e)}function I5(){if(typeof AbortController=="function")return new AbortController}function A0(e,t,n){return n.isDataEqual!=null&&n.isDataEqual(e,t)?e:typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?oI(e,t):t}class M5 extends fh{constructor(){super(),this.setup=t=>{if(!Af&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),window.addEventListener("focus",n,!1),()=>{window.removeEventListener("visibilitychange",n),window.removeEventListener("focus",n)}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var t;(t=this.cleanup)==null||t.call(this),this.cleanup=void 0}}setEventListener(t){var n;this.setup=t,(n=this.cleanup)==null||n.call(this),this.cleanup=t(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()})}setFocused(t){this.focused!==t&&(this.focused=t,this.onFocus())}onFocus(){this.listeners.forEach(({listener:t})=>{t()})}isFocused(){return typeof this.focused=="boolean"?this.focused:typeof document>"u"?!0:[void 0,"visible","prerender"].includes(document.visibilityState)}}const Ng=new M5,qE=["online","offline"];class R5 extends fh{constructor(){super(),this.setup=t=>{if(!Af&&window.addEventListener){const n=()=>t();return qE.forEach(s=>{window.addEventListener(s,n,!1)}),()=>{qE.forEach(s=>{window.removeEventListener(s,n)})}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var t;(t=this.cleanup)==null||t.call(this),this.cleanup=void 0}}setEventListener(t){var n;this.setup=t,(n=this.cleanup)==null||n.call(this),this.cleanup=t(s=>{typeof s=="boolean"?this.setOnline(s):this.onOnline()})}setOnline(t){this.online!==t&&(this.online=t,this.onOnline())}onOnline(){this.listeners.forEach(({listener:t})=>{t()})}isOnline(){return typeof this.online=="boolean"?this.online:typeof navigator>"u"||typeof navigator.onLine>"u"?!0:navigator.onLine}}const Bg=new R5;function D5(e){return Math.min(1e3*2**e,3e4)}function Wy(e){return(e??"online")==="online"?Bg.isOnline():!0}class uI{constructor(t){this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}}function Wm(e){return e instanceof uI}function cI(e){let t=!1,n=0,s=!1,u,h,f;const o=new Promise((G,F)=>{h=G,f=F}),w=G=>{s||(N(new uI(G)),e.abort==null||e.abort())},b=()=>{t=!0},C=()=>{t=!1},A=()=>!Ng.isFocused()||e.networkMode!=="always"&&!Bg.isOnline(),M=G=>{s||(s=!0,e.onSuccess==null||e.onSuccess(G),u==null||u(),h(G))},N=G=>{s||(s=!0,e.onError==null||e.onError(G),u==null||u(),f(G))},V=()=>new Promise(G=>{u=F=>{const B=s||!A();return B&&G(F),B},e.onPause==null||e.onPause()}).then(()=>{u=void 0,s||e.onContinue==null||e.onContinue()}),$=()=>{if(s)return;let G;try{G=e.fn()}catch(F){G=Promise.reject(F)}Promise.resolve(G).then(M).catch(F=>{var B,H;if(s)return;const J=(B=e.retry)!=null?B:3,fe=(H=e.retryDelay)!=null?H:D5,Ee=typeof fe=="function"?fe(n,F):fe,Pe=J===!0||typeof J=="number"&&n<J||typeof J=="function"&&J(n,F);if(t||!Pe){N(F);return}n++,e.onFail==null||e.onFail(n,F),lI(Ee).then(()=>{if(A())return V()}).then(()=>{t?N(F):$()})})};return Wy(e.networkMode)?$():V().then($),{promise:o,cancel:w,continue:()=>(u==null?void 0:u())?o:Promise.resolve(),cancelRetry:b,continueRetry:C}}const w1=console;function L5(){let e=[],t=0,n=C=>{C()},s=C=>{C()};const u=C=>{let A;t++;try{A=C()}finally{t--,t||o()}return A},h=C=>{t?e.push(C):UE(()=>{n(C)})},f=C=>(...A)=>{h(()=>{C(...A)})},o=()=>{const C=e;e=[],C.length&&UE(()=>{s(()=>{C.forEach(A=>{n(A)})})})};return{batch:u,batchCalls:f,schedule:h,setNotifyFunction:C=>{n=C},setBatchNotifyFunction:C=>{s=C}}}const Jn=L5();class hI{destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),C0(this.cacheTime)&&(this.gcTimeout=setTimeout(()=>{this.optionalRemove()},this.cacheTime))}updateCacheTime(t){this.cacheTime=Math.max(this.cacheTime||0,t??(Af?1/0:5*60*1e3))}clearGcTimeout(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)}}class z5 extends hI{constructor(t){super(),this.abortSignalConsumed=!1,this.defaultOptions=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.cache=t.cache,this.logger=t.logger||w1,this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.initialState=t.state||O5(this.options),this.state=this.initialState,this.scheduleGc()}get meta(){return this.options.meta}setOptions(t){this.options={...this.defaultOptions,...t},this.updateCacheTime(this.options.cacheTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.cache.remove(this)}setData(t,n){const s=A0(this.state.data,t,this.options);return this.dispatch({data:s,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),s}setState(t,n){this.dispatch({type:"setState",state:t,setStateOptions:n})}cancel(t){var n;const s=this.promise;return(n=this.retryer)==null||n.cancel(t),s?s.then(Es).catch(Es):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.initialState)}isActive(){return this.observers.some(t=>t.options.enabled!==!1)}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some(t=>t.getCurrentResult().isStale)}isStaleByTime(t=0){return this.state.isInvalidated||!this.state.dataUpdatedAt||!sI(this.state.dataUpdatedAt,t)}onFocus(){var t;const n=this.observers.find(s=>s.shouldFetchOnWindowFocus());n&&n.refetch({cancelRefetch:!1}),(t=this.retryer)==null||t.continue()}onOnline(){var t;const n=this.observers.find(s=>s.shouldFetchOnReconnect());n&&n.refetch({cancelRefetch:!1}),(t=this.retryer)==null||t.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(this.retryer&&(this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.scheduleGc()),this.cache.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.dispatch({type:"invalidate"})}fetch(t,n){var s,u;if(this.state.fetchStatus!=="idle"){if(this.state.dataUpdatedAt&&n!=null&&n.cancelRefetch)this.cancel({silent:!0});else if(this.promise){var h;return(h=this.retryer)==null||h.continueRetry(),this.promise}}if(t&&this.setOptions(t),!this.options.queryFn){const N=this.observers.find(V=>V.options.queryFn);N&&this.setOptions(N.options)}const f=I5(),o={queryKey:this.queryKey,pageParam:void 0,meta:this.meta},w=N=>{Object.defineProperty(N,"signal",{enumerable:!0,get:()=>{if(f)return this.abortSignalConsumed=!0,f.signal}})};w(o);const b=()=>this.options.queryFn?(this.abortSignalConsumed=!1,this.options.queryFn(o)):Promise.reject("Missing queryFn for queryKey '"+this.options.queryHash+"'"),C={fetchOptions:n,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:b};if(w(C),(s=this.options.behavior)==null||s.onFetch(C),this.revertState=this.state,this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=C.fetchOptions)==null?void 0:u.meta)){var A;this.dispatch({type:"fetch",meta:(A=C.fetchOptions)==null?void 0:A.meta})}const M=N=>{if(Wm(N)&&N.silent||this.dispatch({type:"error",error:N}),!Wm(N)){var V,$,G,F;(V=($=this.cache.config).onError)==null||V.call($,N,this),(G=(F=this.cache.config).onSettled)==null||G.call(F,this.state.data,N,this)}this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return this.retryer=cI({fn:C.fetchFn,abort:f==null?void 0:f.abort.bind(f),onSuccess:N=>{var V,$,G,F;if(typeof N>"u"){M(new Error(this.queryHash+" data is undefined"));return}this.setData(N),(V=($=this.cache.config).onSuccess)==null||V.call($,N,this),(G=(F=this.cache.config).onSettled)==null||G.call(F,N,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1},onError:M,onFail:(N,V)=>{this.dispatch({type:"failed",failureCount:N,error:V})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:C.options.retry,retryDelay:C.options.retryDelay,networkMode:C.options.networkMode}),this.promise=this.retryer.promise,this.promise}dispatch(t){const n=s=>{var u,h;switch(t.type){case"failed":return{...s,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:(u=t.meta)!=null?u:null,fetchStatus:Wy(this.options.networkMode)?"fetching":"paused",...!s.dataUpdatedAt&&{error:null,status:"loading"}};case"success":return{...s,data:t.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:(h=t.dataUpdatedAt)!=null?h:Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const f=t.error;return Wm(f)&&f.revert&&this.revertState?{...this.revertState,fetchStatus:"idle"}:{...s,error:f,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:f,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...t.state}}};this.state=n(this.state),Jn.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate(t)}),this.cache.notify({query:this,type:"updated",action:t})})}}function O5(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=typeof t<"u",s=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"loading",fetchStatus:"idle"}}class F5 extends fh{constructor(t){super(),this.config=t||{},this.queries=[],this.queriesMap={}}build(t,n,s){var u;const h=n.queryKey,f=(u=n.queryHash)!=null?u:_1(h,n);let o=this.get(f);return o||(o=new z5({cache:this,logger:t.getLogger(),queryKey:h,queryHash:f,options:t.defaultQueryOptions(n),state:s,defaultOptions:t.getQueryDefaults(h)}),this.add(o)),o}add(t){this.queriesMap[t.queryHash]||(this.queriesMap[t.queryHash]=t,this.queries.push(t),this.notify({type:"added",query:t}))}remove(t){const n=this.queriesMap[t.queryHash];n&&(t.destroy(),this.queries=this.queries.filter(s=>s!==t),n===t&&delete this.queriesMap[t.queryHash],this.notify({type:"removed",query:t}))}clear(){Jn.batch(()=>{this.queries.forEach(t=>{this.remove(t)})})}get(t){return this.queriesMap[t]}getAll(){return this.queries}find(t,n){const[s]=Xo(t,n);return typeof s.exact>"u"&&(s.exact=!0),this.queries.find(u=>BE(s,u))}findAll(t,n){const[s]=Xo(t,n);return Object.keys(s).length>0?this.queries.filter(u=>BE(s,u)):this.queries}notify(t){Jn.batch(()=>{this.listeners.forEach(({listener:n})=>{n(t)})})}onFocus(){Jn.batch(()=>{this.queries.forEach(t=>{t.onFocus()})})}onOnline(){Jn.batch(()=>{this.queries.forEach(t=>{t.onOnline()})})}}class N5 extends hI{constructor(t){super(),this.defaultOptions=t.defaultOptions,this.mutationId=t.mutationId,this.mutationCache=t.mutationCache,this.logger=t.logger||w1,this.observers=[],this.state=t.state||dI(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options={...this.defaultOptions,...t},this.updateCacheTime(this.options.cacheTime)}get meta(){return this.options.meta}setState(t){this.dispatch({type:"setState",state:t})}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.mutationCache.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.observers=this.observers.filter(n=>n!==t),this.scheduleGc(),this.mutationCache.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.observers.length||(this.state.status==="loading"?this.scheduleGc():this.mutationCache.remove(this))}continue(){var t,n;return(t=(n=this.retryer)==null?void 0:n.continue())!=null?t:this.execute()}async execute(){const t=()=>{var Pe;return this.retryer=cI({fn:()=>this.options.mutationFn?this.options.mutationFn(this.state.variables):Promise.reject("No mutationFn found"),onFail:(ve,Ve)=>{this.dispatch({type:"failed",failureCount:ve,error:Ve})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:(Pe=this.options.retry)!=null?Pe:0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode}),this.retryer.promise},n=this.state.status==="loading";try{var s,u,h,f,o,w,b,C;if(!n){var A,M,N,V;this.dispatch({type:"loading",variables:this.options.variables}),await((A=(M=this.mutationCache.config).onMutate)==null?void 0:A.call(M,this.state.variables,this));const ve=await((N=(V=this.options).onMutate)==null?void 0:N.call(V,this.state.variables));ve!==this.state.context&&this.dispatch({type:"loading",context:ve,variables:this.state.variables})}const Pe=await t();return await((s=(u=this.mutationCache.config).onSuccess)==null?void 0:s.call(u,Pe,this.state.variables,this.state.context,this)),await((h=(f=this.options).onSuccess)==null?void 0:h.call(f,Pe,this.state.variables,this.state.context)),await((o=(w=this.mutationCache.config).onSettled)==null?void 0:o.call(w,Pe,null,this.state.variables,this.state.context,this)),await((b=(C=this.options).onSettled)==null?void 0:b.call(C,Pe,null,this.state.variables,this.state.context)),this.dispatch({type:"success",data:Pe}),Pe}catch(Pe){try{var $,G,F,B,H,J,fe,Ee;throw await(($=(G=this.mutationCache.config).onError)==null?void 0:$.call(G,Pe,this.state.variables,this.state.context,this)),await((F=(B=this.options).onError)==null?void 0:F.call(B,Pe,this.state.variables,this.state.context)),await((H=(J=this.mutationCache.config).onSettled)==null?void 0:H.call(J,void 0,Pe,this.state.variables,this.state.context,this)),await((fe=(Ee=this.options).onSettled)==null?void 0:fe.call(Ee,void 0,Pe,this.state.variables,this.state.context)),Pe}finally{this.dispatch({type:"error",error:Pe})}}}dispatch(t){const n=s=>{switch(t.type){case"failed":return{...s,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"loading":return{...s,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:!Wy(this.options.networkMode),status:"loading",variables:t.variables};case"success":return{...s,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:t.error,failureCount:s.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"};case"setState":return{...s,...t.state}}};this.state=n(this.state),Jn.batch(()=>{this.observers.forEach(s=>{s.onMutationUpdate(t)}),this.mutationCache.notify({mutation:this,type:"updated",action:t})})}}function dI(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0}}class B5 extends fh{constructor(t){super(),this.config=t||{},this.mutations=[],this.mutationId=0}build(t,n,s){const u=new N5({mutationCache:this,logger:t.getLogger(),mutationId:++this.mutationId,options:t.defaultMutationOptions(n),state:s,defaultOptions:n.mutationKey?t.getMutationDefaults(n.mutationKey):void 0});return this.add(u),u}add(t){this.mutations.push(t),this.notify({type:"added",mutation:t})}remove(t){this.mutations=this.mutations.filter(n=>n!==t),this.notify({type:"removed",mutation:t})}clear(){Jn.batch(()=>{this.mutations.forEach(t=>{this.remove(t)})})}getAll(){return this.mutations}find(t){return typeof t.exact>"u"&&(t.exact=!0),this.mutations.find(n=>VE(t,n))}findAll(t){return this.mutations.filter(n=>VE(t,n))}notify(t){Jn.batch(()=>{this.listeners.forEach(({listener:n})=>{n(t)})})}resumePausedMutations(){var t;return this.resuming=((t=this.resuming)!=null?t:Promise.resolve()).then(()=>{const n=this.mutations.filter(s=>s.state.isPaused);return Jn.batch(()=>n.reduce((s,u)=>s.then(()=>u.continue().catch(Es)),Promise.resolve()))}).then(()=>{this.resuming=void 0}),this.resuming}}function V5(){return{onFetch:e=>{e.fetchFn=()=>{var t,n,s,u,h,f;const o=(t=e.fetchOptions)==null||(n=t.meta)==null?void 0:n.refetchPage,w=(s=e.fetchOptions)==null||(u=s.meta)==null?void 0:u.fetchMore,b=w==null?void 0:w.pageParam,C=(w==null?void 0:w.direction)==="forward",A=(w==null?void 0:w.direction)==="backward",M=((h=e.state.data)==null?void 0:h.pages)||[],N=((f=e.state.data)==null?void 0:f.pageParams)||[];let V=N,$=!1;const G=Ee=>{Object.defineProperty(Ee,"signal",{enumerable:!0,get:()=>{var Pe;if((Pe=e.signal)!=null&&Pe.aborted)$=!0;else{var ve;(ve=e.signal)==null||ve.addEventListener("abort",()=>{$=!0})}return e.signal}})},F=e.options.queryFn||(()=>Promise.reject("Missing queryFn for queryKey '"+e.options.queryHash+"'")),B=(Ee,Pe,ve,Ve)=>(V=Ve?[Pe,...V]:[...V,Pe],Ve?[ve,...Ee]:[...Ee,ve]),H=(Ee,Pe,ve,Ve)=>{if($)return Promise.reject("Cancelled");if(typeof ve>"u"&&!Pe&&Ee.length)return Promise.resolve(Ee);const Me={queryKey:e.queryKey,pageParam:ve,meta:e.options.meta};G(Me);const pt=F(Me);return Promise.resolve(pt).then(it=>B(Ee,ve,it,Ve))};let J;if(!M.length)J=H([]);else if(C){const Ee=typeof b<"u",Pe=Ee?b:GE(e.options,M);J=H(M,Ee,Pe)}else if(A){const Ee=typeof b<"u",Pe=Ee?b:j5(e.options,M);J=H(M,Ee,Pe,!0)}else{V=[];const Ee=typeof e.options.getNextPageParam>"u";J=(o&&M[0]?o(M[0],0,M):!0)?H([],Ee,N[0]):Promise.resolve(B([],N[0],M[0]));for(let ve=1;ve<M.length;ve++)J=J.then(Ve=>{if(o&&M[ve]?o(M[ve],ve,M):!0){const pt=Ee?N[ve]:GE(e.options,Ve);return H(Ve,Ee,pt)}return Promise.resolve(B(Ve,N[ve],M[ve]))})}return J.then(Ee=>({pages:Ee,pageParams:V}))}}}}function GE(e,t){return e.getNextPageParam==null?void 0:e.getNextPageParam(t[t.length-1],t)}function j5(e,t){return e.getPreviousPageParam==null?void 0:e.getPreviousPageParam(t[0],t)}class $5{constructor(t={}){this.queryCache=t.queryCache||new F5,this.mutationCache=t.mutationCache||new B5,this.logger=t.logger||w1,this.defaultOptions=t.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[],this.mountCount=0}mount(){this.mountCount++,this.mountCount===1&&(this.unsubscribeFocus=Ng.subscribe(()=>{Ng.isFocused()&&(this.resumePausedMutations(),this.queryCache.onFocus())}),this.unsubscribeOnline=Bg.subscribe(()=>{Bg.isOnline()&&(this.resumePausedMutations(),this.queryCache.onOnline())}))}unmount(){var t,n;this.mountCount--,this.mountCount===0&&((t=this.unsubscribeFocus)==null||t.call(this),this.unsubscribeFocus=void 0,(n=this.unsubscribeOnline)==null||n.call(this),this.unsubscribeOnline=void 0)}isFetching(t,n){const[s]=Xo(t,n);return s.fetchStatus="fetching",this.queryCache.findAll(s).length}isMutating(t){return this.mutationCache.findAll({...t,fetching:!0}).length}getQueryData(t,n){var s;return(s=this.queryCache.find(t,n))==null?void 0:s.state.data}ensureQueryData(t,n,s){const u=$d(t,n,s),h=this.getQueryData(u.queryKey);return h?Promise.resolve(h):this.fetchQuery(u)}getQueriesData(t){return this.getQueryCache().findAll(t).map(({queryKey:n,state:s})=>{const u=s.data;return[n,u]})}setQueryData(t,n,s){const u=this.queryCache.find(t),h=u==null?void 0:u.state.data,f=A5(n,h);if(typeof f>"u")return;const o=$d(t),w=this.defaultQueryOptions(o);return this.queryCache.build(this,w).setData(f,{...s,manual:!0})}setQueriesData(t,n,s){return Jn.batch(()=>this.getQueryCache().findAll(t).map(({queryKey:u})=>[u,this.setQueryData(u,n,s)]))}getQueryState(t,n){var s;return(s=this.queryCache.find(t,n))==null?void 0:s.state}removeQueries(t,n){const[s]=Xo(t,n),u=this.queryCache;Jn.batch(()=>{u.findAll(s).forEach(h=>{u.remove(h)})})}resetQueries(t,n,s){const[u,h]=Xo(t,n,s),f=this.queryCache,o={type:"active",...u};return Jn.batch(()=>(f.findAll(u).forEach(w=>{w.reset()}),this.refetchQueries(o,h)))}cancelQueries(t,n,s){const[u,h={}]=Xo(t,n,s);typeof h.revert>"u"&&(h.revert=!0);const f=Jn.batch(()=>this.queryCache.findAll(u).map(o=>o.cancel(h)));return Promise.all(f).then(Es).catch(Es)}invalidateQueries(t,n,s){const[u,h]=Xo(t,n,s);return Jn.batch(()=>{var f,o;if(this.queryCache.findAll(u).forEach(b=>{b.invalidate()}),u.refetchType==="none")return Promise.resolve();const w={...u,type:(f=(o=u.refetchType)!=null?o:u.type)!=null?f:"active"};return this.refetchQueries(w,h)})}refetchQueries(t,n,s){const[u,h]=Xo(t,n,s),f=Jn.batch(()=>this.queryCache.findAll(u).filter(w=>!w.isDisabled()).map(w=>{var b;return w.fetch(void 0,{...h,cancelRefetch:(b=h==null?void 0:h.cancelRefetch)!=null?b:!0,meta:{refetchPage:u.refetchPage}})}));let o=Promise.all(f).then(Es);return h!=null&&h.throwOnError||(o=o.catch(Es)),o}fetchQuery(t,n,s){const u=$d(t,n,s),h=this.defaultQueryOptions(u);typeof h.retry>"u"&&(h.retry=!1);const f=this.queryCache.build(this,h);return f.isStaleByTime(h.staleTime)?f.fetch(h):Promise.resolve(f.state.data)}prefetchQuery(t,n,s){return this.fetchQuery(t,n,s).then(Es).catch(Es)}fetchInfiniteQuery(t,n,s){const u=$d(t,n,s);return u.behavior=V5(),this.fetchQuery(u)}prefetchInfiniteQuery(t,n,s){return this.fetchInfiniteQuery(t,n,s).then(Es).catch(Es)}resumePausedMutations(){return this.mutationCache.resumePausedMutations()}getQueryCache(){return this.queryCache}getMutationCache(){return this.mutationCache}getLogger(){return this.logger}getDefaultOptions(){return this.defaultOptions}setDefaultOptions(t){this.defaultOptions=t}setQueryDefaults(t,n){const s=this.queryDefaults.find(u=>cu(t)===cu(u.queryKey));s?s.defaultOptions=n:this.queryDefaults.push({queryKey:t,defaultOptions:n})}getQueryDefaults(t){if(!t)return;const n=this.queryDefaults.find(s=>Og(t,s.queryKey));return n==null?void 0:n.defaultOptions}setMutationDefaults(t,n){const s=this.mutationDefaults.find(u=>cu(t)===cu(u.mutationKey));s?s.defaultOptions=n:this.mutationDefaults.push({mutationKey:t,defaultOptions:n})}getMutationDefaults(t){if(!t)return;const n=this.mutationDefaults.find(s=>Og(t,s.mutationKey));return n==null?void 0:n.defaultOptions}defaultQueryOptions(t){if(t!=null&&t._defaulted)return t;const n={...this.defaultOptions.queries,...this.getQueryDefaults(t==null?void 0:t.queryKey),...t,_defaulted:!0};return!n.queryHash&&n.queryKey&&(n.queryHash=_1(n.queryKey,n)),typeof n.refetchOnReconnect>"u"&&(n.refetchOnReconnect=n.networkMode!=="always"),typeof n.useErrorBoundary>"u"&&(n.useErrorBoundary=!!n.suspense),n}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...this.defaultOptions.mutations,...this.getMutationDefaults(t==null?void 0:t.mutationKey),...t,_defaulted:!0}}clear(){this.queryCache.clear(),this.mutationCache.clear()}}class U5 extends fh{constructor(t,n){super(),this.client=t,this.options=n,this.trackedProps=new Set,this.selectError=null,this.bindMethods(),this.setOptions(n)}bindMethods(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.currentQuery.addObserver(this),ZE(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return k0(this.currentQuery,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return k0(this.currentQuery,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.clearStaleTimeout(),this.clearRefetchInterval(),this.currentQuery.removeObserver(this)}setOptions(t,n){const s=this.options,u=this.currentQuery;if(this.options=this.client.defaultQueryOptions(t),Fg(s,this.options)||this.client.getQueryCache().notify({type:"observerOptionsUpdated",query:this.currentQuery,observer:this}),typeof this.options.enabled<"u"&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=s.queryKey),this.updateQuery();const h=this.hasListeners();h&&WE(this.currentQuery,u,this.options,s)&&this.executeFetch(),this.updateResult(n),h&&(this.currentQuery!==u||this.options.enabled!==s.enabled||this.options.staleTime!==s.staleTime)&&this.updateStaleTimeout();const f=this.computeRefetchInterval();h&&(this.currentQuery!==u||this.options.enabled!==s.enabled||f!==this.currentRefetchInterval)&&this.updateRefetchInterval(f)}getOptimisticResult(t){const n=this.client.getQueryCache().build(this.client,t),s=this.createResult(n,t);return G5(this,s,t)&&(this.currentResult=s,this.currentResultOptions=this.options,this.currentResultState=this.currentQuery.state),s}getCurrentResult(){return this.currentResult}trackResult(t){const n={};return Object.keys(t).forEach(s=>{Object.defineProperty(n,s,{configurable:!1,enumerable:!0,get:()=>(this.trackedProps.add(s),t[s])})}),n}getCurrentQuery(){return this.currentQuery}remove(){this.client.getQueryCache().remove(this.currentQuery)}refetch({refetchPage:t,...n}={}){return this.fetch({...n,meta:{refetchPage:t}})}fetchOptimistic(t){const n=this.client.defaultQueryOptions(t),s=this.client.getQueryCache().build(this.client,n);return s.isFetchingOptimistic=!0,s.fetch().then(()=>this.createResult(s,n))}fetch(t){var n;return this.executeFetch({...t,cancelRefetch:(n=t.cancelRefetch)!=null?n:!0}).then(()=>(this.updateResult(),this.currentResult))}executeFetch(t){this.updateQuery();let n=this.currentQuery.fetch(this.options,t);return t!=null&&t.throwOnError||(n=n.catch(Es)),n}updateStaleTimeout(){if(this.clearStaleTimeout(),Af||this.currentResult.isStale||!C0(this.options.staleTime))return;const n=sI(this.currentResult.dataUpdatedAt,this.options.staleTime)+1;this.staleTimeoutId=setTimeout(()=>{this.currentResult.isStale||this.updateResult()},n)}computeRefetchInterval(){var t;return typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.currentResult.data,this.currentQuery):(t=this.options.refetchInterval)!=null?t:!1}updateRefetchInterval(t){this.clearRefetchInterval(),this.currentRefetchInterval=t,!(Af||this.options.enabled===!1||!C0(this.currentRefetchInterval)||this.currentRefetchInterval===0)&&(this.refetchIntervalId=setInterval(()=>{(this.options.refetchIntervalInBackground||Ng.isFocused())&&this.executeFetch()},this.currentRefetchInterval))}updateTimers(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())}clearStaleTimeout(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)}clearRefetchInterval(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)}createResult(t,n){const s=this.currentQuery,u=this.options,h=this.currentResult,f=this.currentResultState,o=this.currentResultOptions,w=t!==s,b=w?t.state:this.currentQueryInitialState,C=w?this.currentResult:this.previousQueryResult,{state:A}=t;let{dataUpdatedAt:M,error:N,errorUpdatedAt:V,fetchStatus:$,status:G}=A,F=!1,B=!1,H;if(n._optimisticResults){const ve=this.hasListeners(),Ve=!ve&&ZE(t,n),Me=ve&&WE(t,s,n,u);(Ve||Me)&&($=Wy(t.options.networkMode)?"fetching":"paused",M||(G="loading")),n._optimisticResults==="isRestoring"&&($="idle")}if(n.keepPreviousData&&!A.dataUpdatedAt&&C!=null&&C.isSuccess&&G!=="error")H=C.data,M=C.dataUpdatedAt,G=C.status,F=!0;else if(n.select&&typeof A.data<"u")if(h&&A.data===(f==null?void 0:f.data)&&n.select===this.selectFn)H=this.selectResult;else try{this.selectFn=n.select,H=n.select(A.data),H=A0(h==null?void 0:h.data,H,n),this.selectResult=H,this.selectError=null}catch(ve){this.selectError=ve}else H=A.data;if(typeof n.placeholderData<"u"&&typeof H>"u"&&G==="loading"){let ve;if(h!=null&&h.isPlaceholderData&&n.placeholderData===(o==null?void 0:o.placeholderData))ve=h.data;else if(ve=typeof n.placeholderData=="function"?n.placeholderData():n.placeholderData,n.select&&typeof ve<"u")try{ve=n.select(ve),this.selectError=null}catch(Ve){this.selectError=Ve}typeof ve<"u"&&(G="success",H=A0(h==null?void 0:h.data,ve,n),B=!0)}this.selectError&&(N=this.selectError,H=this.selectResult,V=Date.now(),G="error");const J=$==="fetching",fe=G==="loading",Ee=G==="error";return{status:G,fetchStatus:$,isLoading:fe,isSuccess:G==="success",isError:Ee,isInitialLoading:fe&&J,data:H,dataUpdatedAt:M,error:N,errorUpdatedAt:V,failureCount:A.fetchFailureCount,failureReason:A.fetchFailureReason,errorUpdateCount:A.errorUpdateCount,isFetched:A.dataUpdateCount>0||A.errorUpdateCount>0,isFetchedAfterMount:A.dataUpdateCount>b.dataUpdateCount||A.errorUpdateCount>b.errorUpdateCount,isFetching:J,isRefetching:J&&!fe,isLoadingError:Ee&&A.dataUpdatedAt===0,isPaused:$==="paused",isPlaceholderData:B,isPreviousData:F,isRefetchError:Ee&&A.dataUpdatedAt!==0,isStale:b1(t,n),refetch:this.refetch,remove:this.remove}}updateResult(t){const n=this.currentResult,s=this.createResult(this.currentQuery,this.options);if(this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,Fg(s,n))return;this.currentResult=s;const u={cache:!0},h=()=>{if(!n)return!0;const{notifyOnChangeProps:f}=this.options,o=typeof f=="function"?f():f;if(o==="all"||!o&&!this.trackedProps.size)return!0;const w=new Set(o??this.trackedProps);return this.options.useErrorBoundary&&w.add("error"),Object.keys(this.currentResult).some(b=>{const C=b;return this.currentResult[C]!==n[C]&&w.has(C)})};(t==null?void 0:t.listeners)!==!1&&h()&&(u.listeners=!0),this.notify({...u,...t})}updateQuery(){const t=this.client.getQueryCache().build(this.client,this.options);if(t===this.currentQuery)return;const n=this.currentQuery;this.currentQuery=t,this.currentQueryInitialState=t.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(n==null||n.removeObserver(this),t.addObserver(this))}onQueryUpdate(t){const n={};t.type==="success"?n.onSuccess=!t.manual:t.type==="error"&&!Wm(t.error)&&(n.onError=!0),this.updateResult(n),this.hasListeners()&&this.updateTimers()}notify(t){Jn.batch(()=>{if(t.onSuccess){var n,s,u,h;(n=(s=this.options).onSuccess)==null||n.call(s,this.currentResult.data),(u=(h=this.options).onSettled)==null||u.call(h,this.currentResult.data,null)}else if(t.onError){var f,o,w,b;(f=(o=this.options).onError)==null||f.call(o,this.currentResult.error),(w=(b=this.options).onSettled)==null||w.call(b,void 0,this.currentResult.error)}t.listeners&&this.listeners.forEach(({listener:C})=>{C(this.currentResult)}),t.cache&&this.client.getQueryCache().notify({query:this.currentQuery,type:"observerResultsUpdated"})})}}function q5(e,t){return t.enabled!==!1&&!e.state.dataUpdatedAt&&!(e.state.status==="error"&&t.retryOnMount===!1)}function ZE(e,t){return q5(e,t)||e.state.dataUpdatedAt>0&&k0(e,t,t.refetchOnMount)}function k0(e,t,n){if(t.enabled!==!1){const s=typeof n=="function"?n(e):n;return s==="always"||s!==!1&&b1(e,t)}return!1}function WE(e,t,n,s){return n.enabled!==!1&&(e!==t||s.enabled===!1)&&(!n.suspense||e.state.status!=="error")&&b1(e,n)}function b1(e,t){return e.isStaleByTime(t.staleTime)}function G5(e,t,n){return n.keepPreviousData?!1:n.placeholderData!==void 0?t.isPlaceholderData:!Fg(e.getCurrentResult(),t)}let Z5=class extends fh{constructor(t,n){super(),this.client=t,this.setOptions(n),this.bindMethods(),this.updateResult()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var n;const s=this.options;this.options=this.client.defaultMutationOptions(t),Fg(s,this.options)||this.client.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.currentMutation,observer:this}),(n=this.currentMutation)==null||n.setOptions(this.options)}onUnsubscribe(){if(!this.hasListeners()){var t;(t=this.currentMutation)==null||t.removeObserver(this)}}onMutationUpdate(t){this.updateResult();const n={listeners:!0};t.type==="success"?n.onSuccess=!0:t.type==="error"&&(n.onError=!0),this.notify(n)}getCurrentResult(){return this.currentResult}reset(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})}mutate(t,n){return this.mutateOptions=n,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,{...this.options,variables:typeof t<"u"?t:this.options.variables}),this.currentMutation.addObserver(this),this.currentMutation.execute()}updateResult(){const t=this.currentMutation?this.currentMutation.state:dI(),n={...t,isLoading:t.status==="loading",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset};this.currentResult=n}notify(t){Jn.batch(()=>{if(this.mutateOptions&&this.hasListeners()){if(t.onSuccess){var n,s,u,h;(n=(s=this.mutateOptions).onSuccess)==null||n.call(s,this.currentResult.data,this.currentResult.variables,this.currentResult.context),(u=(h=this.mutateOptions).onSettled)==null||u.call(h,this.currentResult.data,null,this.currentResult.variables,this.currentResult.context)}else if(t.onError){var f,o,w,b;(f=(o=this.mutateOptions).onError)==null||f.call(o,this.currentResult.error,this.currentResult.variables,this.currentResult.context),(w=(b=this.mutateOptions).onSettled)==null||w.call(b,void 0,this.currentResult.error,this.currentResult.variables,this.currentResult.context)}}t.listeners&&this.listeners.forEach(({listener:C})=>{C(this.currentResult)})})}};const fI=Ok.useSyncExternalStore,HE=Q.createContext(void 0),pI=Q.createContext(!1);function mI(e,t){return e||(t&&typeof window<"u"?(window.ReactQueryClientContext||(window.ReactQueryClientContext=HE),window.ReactQueryClientContext):HE)}const gI=({context:e}={})=>{const t=Q.useContext(mI(e,Q.useContext(pI)));if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},W5=({client:e,children:t,context:n,contextSharing:s=!1})=>{Q.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]);const u=mI(n,s);return Q.createElement(pI.Provider,{value:!n&&s},Q.createElement(u.Provider,{value:e},t))},yI=Q.createContext(!1),H5=()=>Q.useContext(yI);yI.Provider;function K5(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}const X5=Q.createContext(K5()),Q5=()=>Q.useContext(X5);function vI(e,t){return typeof e=="function"?e(...t):!!e}const Y5=(e,t)=>{(e.suspense||e.useErrorBoundary)&&(t.isReset()||(e.retryOnMount=!1))},J5=e=>{Q.useEffect(()=>{e.clearReset()},[e])},e4=({result:e,errorResetBoundary:t,useErrorBoundary:n,query:s})=>e.isError&&!t.isReset()&&!e.isFetching&&vI(n,[e.error,s]),t4=e=>{e.suspense&&typeof e.staleTime!="number"&&(e.staleTime=1e3)},n4=(e,t)=>e.isLoading&&e.isFetching&&!t,r4=(e,t,n)=>(e==null?void 0:e.suspense)&&n4(t,n),i4=(e,t,n)=>t.fetchOptimistic(e).then(({data:s})=>{e.onSuccess==null||e.onSuccess(s),e.onSettled==null||e.onSettled(s,null)}).catch(s=>{n.clearReset(),e.onError==null||e.onError(s),e.onSettled==null||e.onSettled(void 0,s)});function s4(e,t){const n=gI({context:e.context}),s=H5(),u=Q5(),h=n.defaultQueryOptions(e);h._optimisticResults=s?"isRestoring":"optimistic",h.onError&&(h.onError=Jn.batchCalls(h.onError)),h.onSuccess&&(h.onSuccess=Jn.batchCalls(h.onSuccess)),h.onSettled&&(h.onSettled=Jn.batchCalls(h.onSettled)),t4(h),Y5(h,u),J5(u);const[f]=Q.useState(()=>new t(n,h)),o=f.getOptimisticResult(h);if(fI(Q.useCallback(w=>{const b=s?()=>{}:f.subscribe(Jn.batchCalls(w));return f.updateResult(),b},[f,s]),()=>f.getCurrentResult(),()=>f.getCurrentResult()),Q.useEffect(()=>{f.setOptions(h,{listeners:!1})},[h,f]),r4(h,o,s))throw i4(h,f,u);if(e4({result:o,errorResetBoundary:u,useErrorBoundary:h.useErrorBoundary,query:f.getCurrentQuery()}))throw o.error;return h.notifyOnChangeProps?o:f.trackResult(o)}function a4(e,t,n){const s=$d(e,t,n);return s4(s,U5)}function o4(e,t,n){const s=k5(e,t,n),u=gI({context:s.context}),[h]=Q.useState(()=>new Z5(u,s));Q.useEffect(()=>{h.setOptions(s)},[h,s]);const f=fI(Q.useCallback(w=>h.subscribe(Jn.batchCalls(w)),[h]),()=>h.getCurrentResult(),()=>h.getCurrentResult()),o=Q.useCallback((w,b)=>{h.mutate(w,b).catch(l4)},[h]);if(f.error&&vI(h.options.useErrorBoundary,[f.error]))throw f.error;return{...f,mutate:o,mutateAsync:f.mutate}}function l4(){}function Hm(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Hm=function(n){return typeof n}:Hm=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Hm(e)}function u4(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function KE(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function c4(e,t,n){return t&&KE(e.prototype,t),n&&KE(e,n),e}function h4(e,t){return t&&(Hm(t)==="object"||typeof t=="function")?t:Km(e)}function I0(e){return I0=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},I0(e)}function Km(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d4(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&M0(e,t)}function M0(e,t){return M0=Object.setPrototypeOf||function(s,u){return s.__proto__=u,s},M0(e,t)}function Xm(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var xI=function(e){d4(t,e);function t(){var n,s;u4(this,t);for(var u=arguments.length,h=new Array(u),f=0;f<u;f++)h[f]=arguments[f];return s=h4(this,(n=I0(t)).call.apply(n,[this].concat(h))),Xm(Km(s),"state",{bootstrapped:!1}),Xm(Km(s),"_unsubscribe",void 0),Xm(Km(s),"handlePersistorState",function(){var o=s.props.persistor,w=o.getState(),b=w.bootstrapped;b&&(s.props.onBeforeLift?Promise.resolve(s.props.onBeforeLift()).finally(function(){return s.setState({bootstrapped:!0})}):s.setState({bootstrapped:!0}),s._unsubscribe&&s._unsubscribe())}),s}return c4(t,[{key:"componentDidMount",value:function(){this._unsubscribe=this.props.persistor.subscribe(this.handlePersistorState),this.handlePersistorState()}},{key:"componentWillUnmount",value:function(){this._unsubscribe&&this._unsubscribe()}},{key:"render",value:function(){return typeof this.props.children=="function"?this.props.children(this.state.bootstrapped):this.state.bootstrapped?this.props.children:this.props.loading}}]),t}(Q.PureComponent);Xm(xI,"defaultProps",{children:null,loading:null});function ea(e){for(var t=arguments.length,n=Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(u){return"'"+u+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function xl(e){return!!e&&!!e[Bn]}function yo(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var s=Object.getPrototypeOf(n);if(s===null)return!0;var u=Object.hasOwnProperty.call(s,"constructor")&&s.constructor;return u===Object||typeof u=="function"&&Function.toString.call(u)===w4}(e)||Array.isArray(e)||!!e[nT]||!!(!((t=e.constructor)===null||t===void 0)&&t[nT])||S1(e)||E1(e))}function Tu(e,t,n){n===void 0&&(n=!1),ph(e)===0?(n?Object.keys:Uc)(e).forEach(function(s){n&&typeof s=="symbol"||t(s,e[s],e)}):e.forEach(function(s,u){return t(u,s,e)})}function ph(e){var t=e[Bn];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:S1(e)?2:E1(e)?3:0}function $c(e,t){return ph(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function f4(e,t){return ph(e)===2?e.get(t):e[t]}function _I(e,t,n){var s=ph(e);s===2?e.set(t,n):s===3?e.add(n):e[t]=n}function wI(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function S1(e){return x4&&e instanceof Map}function E1(e){return _4&&e instanceof Set}function tu(e){return e.o||e.t}function T1(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=SI(e);delete t[Bn];for(var n=Uc(t),s=0;s<n.length;s++){var u=n[s],h=t[u];h.writable===!1&&(h.writable=!0,h.configurable=!0),(h.get||h.set)&&(t[u]={configurable:!0,writable:!0,enumerable:h.enumerable,value:e[u]})}return Object.create(Object.getPrototypeOf(e),t)}function C1(e,t){return t===void 0&&(t=!1),P1(e)||xl(e)||!yo(e)||(ph(e)>1&&(e.set=e.add=e.clear=e.delete=p4),Object.freeze(e),t&&Tu(e,function(n,s){return C1(s,!0)},!0)),e}function p4(){ea(2)}function P1(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function Ca(e){var t=z0[e];return t||ea(18,e),t}function m4(e,t){z0[e]||(z0[e]=t)}function R0(){return kf}function Kx(e,t){t&&(Ca("Patches"),e.u=[],e.s=[],e.v=t)}function Vg(e){D0(e),e.p.forEach(g4),e.p=null}function D0(e){e===kf&&(kf=e.l)}function XE(e){return kf={p:[],l:kf,h:e,m:!0,_:0}}function g4(e){var t=e[Bn];t.i===0||t.i===1?t.j():t.g=!0}function Xx(e,t){t._=t.p.length;var n=t.p[0],s=e!==void 0&&e!==n;return t.h.O||Ca("ES5").S(t,e,s),s?(n[Bn].P&&(Vg(t),ea(4)),yo(e)&&(e=jg(t,e),t.l||$g(t,e)),t.u&&Ca("Patches").M(n[Bn].t,e,t.u,t.s)):e=jg(t,n,[]),Vg(t),t.u&&t.v(t.u,t.s),e!==bI?e:void 0}function jg(e,t,n){if(P1(t))return t;var s=t[Bn];if(!s)return Tu(t,function(o,w){return QE(e,s,t,o,w,n)},!0),t;if(s.A!==e)return t;if(!s.P)return $g(e,s.t,!0),s.t;if(!s.I){s.I=!0,s.A._--;var u=s.i===4||s.i===5?s.o=T1(s.k):s.o,h=u,f=!1;s.i===3&&(h=new Set(u),u.clear(),f=!0),Tu(h,function(o,w){return QE(e,s,u,o,w,n,f)}),$g(e,u,!1),n&&e.u&&Ca("Patches").N(s,n,e.u,e.s)}return s.o}function QE(e,t,n,s,u,h,f){if(xl(u)){var o=jg(e,u,h&&t&&t.i!==3&&!$c(t.R,s)?h.concat(s):void 0);if(_I(n,s,o),!xl(o))return;e.m=!1}else f&&n.add(u);if(yo(u)&&!P1(u)){if(!e.h.D&&e._<1)return;jg(e,u),t&&t.A.l||$g(e,u)}}function $g(e,t,n){n===void 0&&(n=!1),!e.l&&e.h.D&&e.m&&C1(t,n)}function Qx(e,t){var n=e[Bn];return(n?tu(n):e)[t]}function YE(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var s=Object.getOwnPropertyDescriptor(n,t);if(s)return s;n=Object.getPrototypeOf(n)}}function Jo(e){e.P||(e.P=!0,e.l&&Jo(e.l))}function Yx(e){e.o||(e.o=T1(e.t))}function L0(e,t,n){var s=S1(t)?Ca("MapSet").F(t,n):E1(t)?Ca("MapSet").T(t,n):e.O?function(u,h){var f=Array.isArray(u),o={i:f?1:0,A:h?h.A:R0(),P:!1,I:!1,R:{},l:h,t:u,k:null,o:null,j:null,C:!1},w=o,b=If;f&&(w=[o],b=Ud);var C=Proxy.revocable(w,b),A=C.revoke,M=C.proxy;return o.k=M,o.j=A,M}(t,n):Ca("ES5").J(t,n);return(n?n.A:R0()).p.push(s),s}function y4(e){return xl(e)||ea(22,e),function t(n){if(!yo(n))return n;var s,u=n[Bn],h=ph(n);if(u){if(!u.P&&(u.i<4||!Ca("ES5").K(u)))return u.t;u.I=!0,s=JE(n,h),u.I=!1}else s=JE(n,h);return Tu(s,function(f,o){u&&f4(u.t,f)===o||_I(s,f,t(o))}),h===3?new Set(s):s}(e)}function JE(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return T1(e)}function v4(){function e(h,f){var o=u[h];return o?o.enumerable=f:u[h]=o={configurable:!0,enumerable:f,get:function(){var w=this[Bn];return If.get(w,h)},set:function(w){var b=this[Bn];If.set(b,h,w)}},o}function t(h){for(var f=h.length-1;f>=0;f--){var o=h[f][Bn];if(!o.P)switch(o.i){case 5:s(o)&&Jo(o);break;case 4:n(o)&&Jo(o)}}}function n(h){for(var f=h.t,o=h.k,w=Uc(o),b=w.length-1;b>=0;b--){var C=w[b];if(C!==Bn){var A=f[C];if(A===void 0&&!$c(f,C))return!0;var M=o[C],N=M&&M[Bn];if(N?N.t!==A:!wI(M,A))return!0}}var V=!!f[Bn];return w.length!==Uc(f).length+(V?0:1)}function s(h){var f=h.k;if(f.length!==h.t.length)return!0;var o=Object.getOwnPropertyDescriptor(f,f.length-1);if(o&&!o.get)return!0;for(var w=0;w<f.length;w++)if(!f.hasOwnProperty(w))return!0;return!1}var u={};m4("ES5",{J:function(h,f){var o=Array.isArray(h),w=function(C,A){if(C){for(var M=Array(A.length),N=0;N<A.length;N++)Object.defineProperty(M,""+N,e(N,!0));return M}var V=SI(A);delete V[Bn];for(var $=Uc(V),G=0;G<$.length;G++){var F=$[G];V[F]=e(F,C||!!V[F].enumerable)}return Object.create(Object.getPrototypeOf(A),V)}(o,h),b={i:o?5:4,A:f?f.A:R0(),P:!1,I:!1,R:{},l:f,t:h,k:w,o:null,g:!1,C:!1};return Object.defineProperty(w,Bn,{value:b,writable:!0}),w},S:function(h,f,o){o?xl(f)&&f[Bn].A===h&&t(h.p):(h.u&&function w(b){if(b&&typeof b=="object"){var C=b[Bn];if(C){var A=C.t,M=C.k,N=C.R,V=C.i;if(V===4)Tu(M,function(H){H!==Bn&&(A[H]!==void 0||$c(A,H)?N[H]||w(M[H]):(N[H]=!0,Jo(C)))}),Tu(A,function(H){M[H]!==void 0||$c(M,H)||(N[H]=!1,Jo(C))});else if(V===5){if(s(C)&&(Jo(C),N.length=!0),M.length<A.length)for(var $=M.length;$<A.length;$++)N[$]=!1;else for(var G=A.length;G<M.length;G++)N[G]=!0;for(var F=Math.min(M.length,A.length),B=0;B<F;B++)M.hasOwnProperty(B)||(N[B]=!0),N[B]===void 0&&w(M[B])}}}}(h.p[0]),t(h.p))},K:function(h){return h.i===4?n(h):s(h)}})}var eT,kf,A1=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",x4=typeof Map<"u",_4=typeof Set<"u",tT=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",bI=A1?Symbol.for("immer-nothing"):((eT={})["immer-nothing"]=!0,eT),nT=A1?Symbol.for("immer-draftable"):"__$immer_draftable",Bn=A1?Symbol.for("immer-state"):"__$immer_state",w4=""+Object.prototype.constructor,Uc=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,SI=Object.getOwnPropertyDescriptors||function(e){var t={};return Uc(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},z0={},If={get:function(e,t){if(t===Bn)return e;var n=tu(e);if(!$c(n,t))return function(u,h,f){var o,w=YE(h,f);return w?"value"in w?w.value:(o=w.get)===null||o===void 0?void 0:o.call(u.k):void 0}(e,n,t);var s=n[t];return e.I||!yo(s)?s:s===Qx(e.t,t)?(Yx(e),e.o[t]=L0(e.A.h,s,e)):s},has:function(e,t){return t in tu(e)},ownKeys:function(e){return Reflect.ownKeys(tu(e))},set:function(e,t,n){var s=YE(tu(e),t);if(s!=null&&s.set)return s.set.call(e.k,n),!0;if(!e.P){var u=Qx(tu(e),t),h=u==null?void 0:u[Bn];if(h&&h.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(wI(n,u)&&(n!==void 0||$c(e.t,t)))return!0;Yx(e),Jo(e)}return e.o[t]===n&&(n!==void 0||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return Qx(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,Yx(e),Jo(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=tu(e),s=Reflect.getOwnPropertyDescriptor(n,t);return s&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:s.enumerable,value:n[t]}},defineProperty:function(){ea(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){ea(12)}},Ud={};Tu(If,function(e,t){Ud[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),Ud.deleteProperty=function(e,t){return Ud.set.call(this,e,t,void 0)},Ud.set=function(e,t,n){return If.set.call(this,e[0],t,n,e[0])};var b4=function(){function e(n){var s=this;this.O=tT,this.D=!0,this.produce=function(u,h,f){if(typeof u=="function"&&typeof h!="function"){var o=h;h=u;var w=s;return function($){var G=this;$===void 0&&($=o);for(var F=arguments.length,B=Array(F>1?F-1:0),H=1;H<F;H++)B[H-1]=arguments[H];return w.produce($,function(J){var fe;return(fe=h).call.apply(fe,[G,J].concat(B))})}}var b;if(typeof h!="function"&&ea(6),f!==void 0&&typeof f!="function"&&ea(7),yo(u)){var C=XE(s),A=L0(s,u,void 0),M=!0;try{b=h(A),M=!1}finally{M?Vg(C):D0(C)}return typeof Promise<"u"&&b instanceof Promise?b.then(function($){return Kx(C,f),Xx($,C)},function($){throw Vg(C),$}):(Kx(C,f),Xx(b,C))}if(!u||typeof u!="object"){if((b=h(u))===void 0&&(b=u),b===bI&&(b=void 0),s.D&&C1(b,!0),f){var N=[],V=[];Ca("Patches").M(u,b,N,V),f(N,V)}return b}ea(21,u)},this.produceWithPatches=function(u,h){if(typeof u=="function")return function(b){for(var C=arguments.length,A=Array(C>1?C-1:0),M=1;M<C;M++)A[M-1]=arguments[M];return s.produceWithPatches(b,function(N){return u.apply(void 0,[N].concat(A))})};var f,o,w=s.produce(u,h,function(b,C){f=b,o=C});return typeof Promise<"u"&&w instanceof Promise?w.then(function(b){return[b,f,o]}):[w,f,o]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){yo(n)||ea(8),xl(n)&&(n=y4(n));var s=XE(this),u=L0(this,n,void 0);return u[Bn].C=!0,D0(s),u},t.finishDraft=function(n,s){var u=n&&n[Bn],h=u.A;return Kx(h,s),Xx(void 0,h)},t.setAutoFreeze=function(n){this.D=n},t.setUseProxies=function(n){n&&!tT&&ea(20),this.O=n},t.applyPatches=function(n,s){var u;for(u=s.length-1;u>=0;u--){var h=s[u];if(h.path.length===0&&h.op==="replace"){n=h.value;break}}u>-1&&(s=s.slice(u+1));var f=Ca("Patches").$;return xl(n)?f(n,s):this.produce(n,function(o){return f(o,s)})},e}(),ss=new b4,EI=ss.produce;ss.produceWithPatches.bind(ss);ss.setAutoFreeze.bind(ss);ss.setUseProxies.bind(ss);ss.applyPatches.bind(ss);ss.createDraft.bind(ss);ss.finishDraft.bind(ss);function Mf(e){"@babel/helpers - typeof";return Mf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mf(e)}function S4(e,t){if(Mf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Mf(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function E4(e){var t=S4(e,"string");return Mf(t)=="symbol"?t:t+""}function T4(e,t,n){return t=E4(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,s)}return n}function iT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?rT(Object(n),!0).forEach(function(s){T4(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rT(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function si(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var sT=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),Jx=function(){return Math.random().toString(36).substring(7).split("").join(".")},Ug={INIT:"@@redux/INIT"+Jx(),REPLACE:"@@redux/REPLACE"+Jx(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Jx()}};function C4(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function k1(e,t,n){var s;if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(si(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(si(1));return n(k1)(e,t)}if(typeof e!="function")throw new Error(si(2));var u=e,h=t,f=[],o=f,w=!1;function b(){o===f&&(o=f.slice())}function C(){if(w)throw new Error(si(3));return h}function A($){if(typeof $!="function")throw new Error(si(4));if(w)throw new Error(si(5));var G=!0;return b(),o.push($),function(){if(G){if(w)throw new Error(si(6));G=!1,b();var B=o.indexOf($);o.splice(B,1),f=null}}}function M($){if(!C4($))throw new Error(si(7));if(typeof $.type>"u")throw new Error(si(8));if(w)throw new Error(si(9));try{w=!0,h=u(h,$)}finally{w=!1}for(var G=f=o,F=0;F<G.length;F++){var B=G[F];B()}return $}function N($){if(typeof $!="function")throw new Error(si(10));u=$,M({type:Ug.REPLACE})}function V(){var $,G=A;return $={subscribe:function(B){if(typeof B!="object"||B===null)throw new Error(si(11));function H(){B.next&&B.next(C())}H();var J=G(H);return{unsubscribe:J}}},$[sT]=function(){return this},$}return M({type:Ug.INIT}),s={dispatch:M,subscribe:A,getState:C,replaceReducer:N},s[sT]=V,s}function P4(e){Object.keys(e).forEach(function(t){var n=e[t],s=n(void 0,{type:Ug.INIT});if(typeof s>"u")throw new Error(si(12));if(typeof n(void 0,{type:Ug.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(si(13))})}function TI(e){for(var t=Object.keys(e),n={},s=0;s<t.length;s++){var u=t[s];typeof e[u]=="function"&&(n[u]=e[u])}var h=Object.keys(n),f;try{P4(n)}catch(o){f=o}return function(w,b){if(w===void 0&&(w={}),f)throw f;for(var C=!1,A={},M=0;M<h.length;M++){var N=h[M],V=n[N],$=w[N],G=V($,b);if(typeof G>"u")throw b&&b.type,new Error(si(14));A[N]=G,C=C||G!==$}return C=C||h.length!==Object.keys(w).length,C?A:w}}function qg(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===0?function(s){return s}:t.length===1?t[0]:t.reduce(function(s,u){return function(){return s(u.apply(void 0,arguments))}})}function A4(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(s){return function(){var u=s.apply(void 0,arguments),h=function(){throw new Error(si(15))},f={getState:u.getState,dispatch:function(){return h.apply(void 0,arguments)}},o=t.map(function(w){return w(f)});return h=qg.apply(void 0,o)(u.dispatch),iT(iT({},u),{},{dispatch:h})}}}function CI(e){var t=function(s){var u=s.dispatch,h=s.getState;return function(f){return function(o){return typeof o=="function"?o(u,h,e):f(o)}}};return t}var PI=CI();PI.withExtraArgument=CI;const aT=PI;var AI=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,u){s.__proto__=u}||function(s,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(s[h]=u[h])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function s(){this.constructor=t}t.prototype=n===null?Object.create(n):(s.prototype=n.prototype,new s)}}(),k4=globalThis&&globalThis.__generator||function(e,t){var n={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},s,u,h,f;return f={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function o(b){return function(C){return w([b,C])}}function w(b){if(s)throw new TypeError("Generator is already executing.");for(;n;)try{if(s=1,u&&(h=b[0]&2?u.return:b[0]?u.throw||((h=u.return)&&h.call(u),0):u.next)&&!(h=h.call(u,b[1])).done)return h;switch(u=0,h&&(b=[b[0]&2,h.value]),b[0]){case 0:case 1:h=b;break;case 4:return n.label++,{value:b[1],done:!1};case 5:n.label++,u=b[1],b=[0];continue;case 7:b=n.ops.pop(),n.trys.pop();continue;default:if(h=n.trys,!(h=h.length>0&&h[h.length-1])&&(b[0]===6||b[0]===2)){n=0;continue}if(b[0]===3&&(!h||b[1]>h[0]&&b[1]<h[3])){n.label=b[1];break}if(b[0]===6&&n.label<h[1]){n.label=h[1],h=b;break}if(h&&n.label<h[2]){n.label=h[2],n.ops.push(b);break}h[2]&&n.ops.pop(),n.trys.pop();continue}b=t.call(e,n)}catch(C){b=[6,C],u=0}finally{s=h=0}if(b[0]&5)throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}},eh=globalThis&&globalThis.__spreadArray||function(e,t){for(var n=0,s=t.length,u=e.length;n<s;n++,u++)e[u]=t[n];return e},I4=Object.defineProperty,M4=Object.defineProperties,R4=Object.getOwnPropertyDescriptors,oT=Object.getOwnPropertySymbols,D4=Object.prototype.hasOwnProperty,L4=Object.prototype.propertyIsEnumerable,lT=function(e,t,n){return t in e?I4(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},pl=function(e,t){for(var n in t||(t={}))D4.call(t,n)&&lT(e,n,t[n]);if(oT)for(var s=0,u=oT(t);s<u.length;s++){var n=u[s];L4.call(t,n)&&lT(e,n,t[n])}return e},e_=function(e,t){return M4(e,R4(t))},z4=function(e,t,n){return new Promise(function(s,u){var h=function(w){try{o(n.next(w))}catch(b){u(b)}},f=function(w){try{o(n.throw(w))}catch(b){u(b)}},o=function(w){return w.done?s(w.value):Promise.resolve(w.value).then(h,f)};o((n=n.apply(e,t)).next())})},O4=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?qg:qg.apply(null,arguments)};function F4(e){if(typeof e!="object"||e===null)return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var n=t;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return t===n}function ml(e,t){function n(){for(var s=[],u=0;u<arguments.length;u++)s[u]=arguments[u];if(t){var h=t.apply(void 0,s);if(!h)throw new Error("prepareAction did not return an object");return pl(pl({type:e,payload:h.payload},"meta"in h&&{meta:h.meta}),"error"in h&&{error:h.error})}return{type:e,payload:s[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(s){return s.type===e},n}var N4=function(e){AI(t,e);function t(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];var u=e.apply(this,n)||this;return Object.setPrototypeOf(u,t.prototype),u}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,eh([void 0],n[0].concat(this)))):new(t.bind.apply(t,eh([void 0],n.concat(this))))},t}(Array),B4=function(e){AI(t,e);function t(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];var u=e.apply(this,n)||this;return Object.setPrototypeOf(u,t.prototype),u}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,eh([void 0],n[0].concat(this)))):new(t.bind.apply(t,eh([void 0],n.concat(this))))},t}(Array);function O0(e){return yo(e)?EI(e,function(){}):e}function V4(e){return typeof e=="boolean"}function j4(){return function(t){return $4(t)}}function $4(e){e===void 0&&(e={});var t=e.thunk,n=t===void 0?!0:t;e.immutableCheck,e.serializableCheck,e.actionCreatorCheck;var s=new N4;return n&&(V4(n)?s.push(aT):s.push(aT.withExtraArgument(n.extraArgument))),s}var U4=!0;function q4(e){var t=j4(),n=e||{},s=n.reducer,u=s===void 0?void 0:s,h=n.middleware,f=h===void 0?t():h,o=n.devTools,w=o===void 0?!0:o,b=n.preloadedState,C=b===void 0?void 0:b,A=n.enhancers,M=A===void 0?void 0:A,N;if(typeof u=="function")N=u;else if(F4(u))N=TI(u);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var V=f;typeof V=="function"&&(V=V(t));var $=A4.apply(void 0,V),G=qg;w&&(G=O4(pl({trace:!U4},typeof w=="object"&&w)));var F=new B4($),B=F;Array.isArray(M)?B=eh([$],M):typeof M=="function"&&(B=M(F));var H=G.apply(void 0,B);return k1(N,C,H)}function kI(e){var t={},n=[],s,u={addCase:function(h,f){var o=typeof h=="string"?h:h.type;if(!o)throw new Error("`builder.addCase` cannot be called with an empty action type");if(o in t)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return t[o]=f,u},addMatcher:function(h,f){return n.push({matcher:h,reducer:f}),u},addDefaultCase:function(h){return s=h,u}};return e(u),[t,n,s]}function G4(e){return typeof e=="function"}function Z4(e,t,n,s){n===void 0&&(n=[]);var u=typeof t=="function"?kI(t):[t,n,s],h=u[0],f=u[1],o=u[2],w;if(G4(e))w=function(){return O0(e())};else{var b=O0(e);w=function(){return b}}function C(A,M){A===void 0&&(A=w());var N=eh([h[M.type]],f.filter(function(V){var $=V.matcher;return $(M)}).map(function(V){var $=V.reducer;return $}));return N.filter(function(V){return!!V}).length===0&&(N=[o]),N.reduce(function(V,$){if($)if(xl(V)){var G=V,F=$(G,M);return F===void 0?V:F}else{if(yo(V))return EI(V,function(B){return $(B,M)});var F=$(V,M);if(F===void 0){if(V===null)return V;throw Error("A case reducer on a non-draftable value must not return undefined")}return F}return V},A)}return C.getInitialState=w,C}function W4(e,t){return e+"/"+t}function II(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");typeof process<"u";var n=typeof e.initialState=="function"?e.initialState:O0(e.initialState),s=e.reducers||{},u=Object.keys(s),h={},f={},o={};u.forEach(function(C){var A=s[C],M=W4(t,C),N,V;"reducer"in A?(N=A.reducer,V=A.prepare):N=A,h[C]=N,f[M]=N,o[C]=V?ml(M,V):ml(M)});function w(){var C=typeof e.extraReducers=="function"?kI(e.extraReducers):[e.extraReducers],A=C[0],M=A===void 0?{}:A,N=C[1],V=N===void 0?[]:N,$=C[2],G=$===void 0?void 0:$,F=pl(pl({},M),f);return Z4(n,function(B){for(var H in F)B.addCase(H,F[H]);for(var J=0,fe=V;J<fe.length;J++){var Ee=fe[J];B.addMatcher(Ee.matcher,Ee.reducer)}G&&B.addDefaultCase(G)})}var b;return{name:t,reducer:function(C,A){return b||(b=w()),b(C,A)},actions:o,caseReducers:h,getInitialState:function(){return b||(b=w()),b.getInitialState()}}}var H4="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",K4=function(e){e===void 0&&(e=21);for(var t="",n=e;n--;)t+=H4[Math.random()*64|0];return t},X4=["name","message","stack","code"],t_=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),uT=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),Q4=function(e){if(typeof e=="object"&&e!==null){for(var t={},n=0,s=X4;n<s.length;n++){var u=s[n];typeof e[u]=="string"&&(t[u]=e[u])}return t}return{message:String(e)}};(function(){function e(t,n,s){var u=ml(t+"/fulfilled",function(b,C,A,M){return{payload:b,meta:e_(pl({},M||{}),{arg:A,requestId:C,requestStatus:"fulfilled"})}}),h=ml(t+"/pending",function(b,C,A){return{payload:void 0,meta:e_(pl({},A||{}),{arg:C,requestId:b,requestStatus:"pending"})}}),f=ml(t+"/rejected",function(b,C,A,M,N){return{payload:M,error:(s&&s.serializeError||Q4)(b||"Rejected"),meta:e_(pl({},N||{}),{arg:A,requestId:C,rejectedWithValue:!!M,requestStatus:"rejected",aborted:(b==null?void 0:b.name)==="AbortError",condition:(b==null?void 0:b.name)==="ConditionError"})}}),o=typeof AbortController<"u"?AbortController:function(){function b(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return b.prototype.abort=function(){},b}();function w(b){return function(C,A,M){var N=s!=null&&s.idGenerator?s.idGenerator(b):K4(),V=new o,$;function G(B){$=B,V.abort()}var F=function(){return z4(this,null,function(){var B,H,J,fe,Ee,Pe,ve;return k4(this,function(Ve){switch(Ve.label){case 0:return Ve.trys.push([0,4,,5]),fe=(B=s==null?void 0:s.condition)==null?void 0:B.call(s,b,{getState:A,extra:M}),J4(fe)?[4,fe]:[3,2];case 1:fe=Ve.sent(),Ve.label=2;case 2:if(fe===!1||V.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return Ee=new Promise(function(Me,pt){return V.signal.addEventListener("abort",function(){return pt({name:"AbortError",message:$||"Aborted"})})}),C(h(N,b,(H=s==null?void 0:s.getPendingMeta)==null?void 0:H.call(s,{requestId:N,arg:b},{getState:A,extra:M}))),[4,Promise.race([Ee,Promise.resolve(n(b,{dispatch:C,getState:A,extra:M,requestId:N,signal:V.signal,abort:G,rejectWithValue:function(Me,pt){return new t_(Me,pt)},fulfillWithValue:function(Me,pt){return new uT(Me,pt)}})).then(function(Me){if(Me instanceof t_)throw Me;return Me instanceof uT?u(Me.payload,N,b,Me.meta):u(Me,N,b)})])];case 3:return J=Ve.sent(),[3,5];case 4:return Pe=Ve.sent(),J=Pe instanceof t_?f(null,N,b,Pe.payload,Pe.meta):f(Pe,N,b),[3,5];case 5:return ve=s&&!s.dispatchConditionRejection&&f.match(J)&&J.meta.condition,ve||C(J),[2,J]}})})}();return Object.assign(F,{abort:G,requestId:N,arg:b,unwrap:function(){return F.then(Y4)}})}}return Object.assign(w,{pending:h,rejected:f,fulfilled:u,typePrefix:t})}return e.withTypes=function(){return e},e})();function Y4(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function J4(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var I1="listenerMiddleware";ml(I1+"/add");ml(I1+"/removeAll");ml(I1+"/remove");var cT;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);v4();var sa=function(t){return"@@redux-saga/"+t},eB=sa("CANCEL_PROMISE"),MI=sa("CHANNEL_END"),RI=sa("IO"),hT=sa("MATCH"),tB=sa("MULTICAST"),DI=sa("SAGA_ACTION"),nB=sa("SELF_CANCELLATION"),rB=sa("TASK"),qc=sa("TASK_CANCEL"),LI=sa("TERMINATE"),iB=sa("LOCATION"),sB=function(t){return t==null},aB=function(t){return t!=null},_l=function(t){return typeof t=="function"},oB=function(t){return typeof t=="string"},mh=Array.isArray,Hy=function(t){return t&&_l(t.then)},M1=function(t){return t&&_l(t.next)&&_l(t.throw)},lB=function(t){return _l(t)&&t.hasOwnProperty("toString")},uB=function(t){return!!t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype},cB=function(t){return function(){return t}},hB=cB(!0),Ti=function(){},dB=function(t){return t},R1=function(t,n){Eu(t,n),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(n).forEach(function(s){t[s]=n[s]})},fB=function(t,n){var s;return(s=[]).concat.apply(s,n.map(t))};function Ky(e,t){var n=e.indexOf(t);n>=0&&e.splice(n,1)}function pB(e){var t=!1;return function(){t||(t=!0,e())}}var mB=function(t){throw t},gB=function(t){return{value:t,done:!0}};function dT(e,t,n){t===void 0&&(t=mB),n===void 0&&(n="iterator");var s={meta:{name:n},next:e,throw:t,return:gB,isSagaIterator:!0};return typeof Symbol<"u"&&(s[Symbol.iterator]=function(){return s}),s}function yB(e,t){var n=t.sagaStack;console.error(e),console.error(n)}var zI=function(t){return Array.apply(null,new Array(t))},vB=function(t){return function(n){return t(Object.defineProperty(n,DI,{value:!0}))}},OI=function(t){return t===LI},FI=function(t){return t===qc},NI=function(t){return OI(t)||FI(t)};function BI(e,t){var n=Object.keys(e),s=n.length,u=0,h,f=mh(e)?zI(s):{},o={};function w(){u===s&&(h=!0,t(f))}return n.forEach(function(b){var C=function(M,N){h||(N||NI(M)?(t.cancel(),t(M,N)):(f[b]=M,u++,w()))};C.cancel=Ti,o[b]=C}),t.cancel=function(){h||(h=!0,n.forEach(function(b){return o[b].cancel()}))},o}function D1(e){return{name:e.name||"anonymous",location:VI(e)}}function VI(e){return e[iB]}function xB(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===0?function(s){return s}:t.length===1?t[0]:t.reduce(function(s,u){return function(){return s(u.apply(void 0,arguments))}})}var _B="Channel's Buffer overflow!",wB=1,bB=3,jI=4;function SB(e,t){e===void 0&&(e=10);var n=new Array(e),s=0,u=0,h=0,f=function(C){n[u]=C,u=(u+1)%e,s++},o=function(){if(s!=0){var C=n[h];return n[h]=null,s--,h=(h+1)%e,C}},w=function(){for(var C=[];s;)C.push(o());return C};return{isEmpty:function(){return s==0},put:function(C){if(s<e)f(C);else{var A;switch(t){case wB:throw new Error(_B);case bB:n[u]=C,u=(u+1)%e,h=u;break;case jI:A=2*e,n=w(),s=n.length,u=n.length,h=0,n.length=A,e=A,f(C);break}}},take:o,flush:w}}var EB=function(t){return SB(t,jI)},TB="TAKE",CB="PUT",$I="ALL",PB="RACE",AB="CALL",kB="CPS",IB="FORK",MB="JOIN",RB="CANCEL",DB="SELECT",LB="ACTION_CHANNEL",zB="CANCELLED",OB="FLUSH",FB="GET_CONTEXT",NB="SET_CONTEXT",BB=function(t,n){var s;return s={},s[RI]=!0,s.combinator=!1,s.type=t,s.payload=n,s};function VB(e){var t=BB($I,e);return t.combinator=!0,t}function jB(){var e={};return e.promise=new Promise(function(t,n){e.resolve=t,e.reject=n}),e}var UI=[],Xy=0;function $B(e){try{L1(),e()}finally{ZI()}}function qI(e){UI.push(e),Xy||(L1(),WI())}function GI(e){try{return L1(),e()}finally{WI()}}function L1(){Xy++}function ZI(){Xy--}function WI(){ZI();for(var e;!Xy&&(e=UI.shift())!==void 0;)$B(e)}var UB=function(t){return function(n){return t.some(function(s){return z1(s)(n)})}},qB=function(t){return function(n){return t(n)}},fT=function(t){return function(n){return n.type===String(t)}},GB=function(t){return function(n){return n.type===t}},HI=function(){return hB};function z1(e){var t=e==="*"?HI:oB(e)?fT:mh(e)?UB:lB(e)?fT:_l(e)?qB:uB(e)?GB:null;if(t===null)throw new Error("invalid pattern: "+e);return t(e)}var nf={type:MI},O1=function(t){return t&&t.type===MI};function ZB(e){e===void 0&&(e=EB());var t=!1,n=[];function s(o){if(!t){if(n.length===0)return e.put(o);var w=n.shift();w(o)}}function u(o){t&&e.isEmpty()?o(nf):e.isEmpty()?(n.push(o),o.cancel=function(){Ky(n,o)}):o(e.take())}function h(o){if(t&&e.isEmpty()){o(nf);return}o(e.flush())}function f(){if(!t){t=!0;var o=n;n=[];for(var w=0,b=o.length;w<b;w++){var C=o[w];C(nf)}}}return{take:u,put:s,flush:h,close:f}}function WB(){var e,t=!1,n=[],s=n,u=function(){s===n&&(s=n.slice())},h=function(){t=!0;var o=n=s;s=[],o.forEach(function(w){w(nf)})};return e={},e[tB]=!0,e.put=function(o){if(!t){if(O1(o)){h();return}for(var w=n=s,b=0,C=w.length;b<C;b++){var A=w[b];A[hT](o)&&(A.cancel(),A(o))}}},e.take=function(o,w){if(w===void 0&&(w=HI),t){o(nf);return}o[hT]=w,u(),s.push(o),o.cancel=pB(function(){u(),Ky(s,o)})},e.close=h,e}function KI(){var e=WB(),t=e.put;return e.put=function(n){if(n[DI]){t(n);return}qI(function(){t(n)})},e}var au=0,to=1,Qm=2,XI=3;function F1(e,t){var n=e[eB];_l(n)&&(t.cancel=n),e.then(t,function(s){t(s,!0)})}var Zf=0,QI=function(){return++Zf},Br;function HB(e,t){return e.isSagaIterator?{name:e.meta.name}:D1(t)}function KB(e){var t=e.context,n=e.fn,s=e.args;try{var u=n.apply(t,s);if(M1(u))return u;var h=!1,f=function(w){return h?{value:w,done:!0}:(h=!0,{value:u,done:!Hy(u)})};return dT(f)}catch(o){return dT(function(){throw o})}}function XB(e,t,n){var s=t.channel,u=t.action,h=t.resolve;qI(function(){var f;try{f=(s?s.put:e.dispatch)(u)}catch(o){n(o,!0);return}h&&Hy(f)?F1(f,n):n(f)})}function QB(e,t,n){var s=t.channel,u=s===void 0?e.channel:s,h=t.pattern,f=t.maybe,o=function(b){if(b instanceof Error){n(b,!0);return}if(O1(b)&&!f){n(LI);return}n(b)};try{u.take(o,aB(h)?z1(h):null)}catch(w){n(w,!0);return}n.cancel=o.cancel}function YB(e,t,n,s){var u=t.context,h=t.fn,f=t.args,o=s.task;try{var w=h.apply(u,f);if(Hy(w)){F1(w,n);return}if(M1(w)){Qy(e,w,o.context,Zf,D1(h),!1,n);return}n(w)}catch(b){n(b,!0)}}function JB(e,t,n){var s=t.context,u=t.fn,h=t.args;try{var f=function(w,b){sB(w)?n(b):n(w,!0)};u.apply(s,h.concat(f)),f.cancel&&(n.cancel=f.cancel)}catch(o){n(o,!0)}}function e6(e,t,n,s){var u=t.context,h=t.fn,f=t.args,o=t.detached,w=s.task,b=KB({context:u,fn:h,args:f}),C=HB(b,h);GI(function(){var A=Qy(e,b,w.context,Zf,C,o,void 0);o?n(A):A.isRunning()?(w.queue.addTask(A),n(A)):A.isAborted()?w.queue.abort(A.error()):n(A)})}function t6(e,t,n,s){var u=s.task,h=function(w,b){if(w.isRunning()){var C={task:u,cb:b};b.cancel=function(){w.isRunning()&&Ky(w.joiners,C)},w.joiners.push(C)}else w.isAborted()?b(w.error(),!0):b(w.result())};if(mh(t)){if(t.length===0){n([]);return}var f=BI(t,n);t.forEach(function(o,w){h(o,f[w])})}else h(t,n)}function n_(e){e.isRunning()&&e.cancel()}function n6(e,t,n,s){var u=s.task;t===nB?n_(u):mh(t)?t.forEach(n_):n_(t),n()}function r6(e,t,n,s){var u=s.digestEffect,h=Zf,f=Object.keys(t);if(f.length===0){n(mh(t)?[]:{});return}var o=BI(t,n);f.forEach(function(w){u(t[w],h,o[w],w)})}function i6(e,t,n,s){var u=s.digestEffect,h=Zf,f=Object.keys(t),o=mh(t)?zI(f.length):{},w={},b=!1;f.forEach(function(C){var A=function(N,V){b||(V||NI(N)?(n.cancel(),n(N,V)):(n.cancel(),b=!0,o[C]=N,n(o)))};A.cancel=Ti,w[C]=A}),n.cancel=function(){b||(b=!0,f.forEach(function(C){return w[C].cancel()}))},f.forEach(function(C){b||u(t[C],h,w[C],C)})}function s6(e,t,n){var s=t.selector,u=t.args;try{var h=s.apply(void 0,[e.getState()].concat(u));n(h)}catch(f){n(f,!0)}}function a6(e,t,n){var s=t.pattern,u=t.buffer,h=ZB(u),f=z1(s),o=function b(C){O1(C)||e.channel.take(b,f),h.put(C)},w=h.close;h.close=function(){o.cancel(),w()},e.channel.take(o,f),n(h)}function o6(e,t,n,s){var u=s.task;n(u.isCancelled())}function l6(e,t,n){t.flush(n)}function u6(e,t,n,s){var u=s.task;n(u.context[t])}function c6(e,t,n,s){var u=s.task;R1(u.context,t),n()}var h6=(Br={},Br[TB]=QB,Br[CB]=XB,Br[$I]=r6,Br[PB]=i6,Br[AB]=YB,Br[kB]=JB,Br[IB]=e6,Br[MB]=t6,Br[RB]=n6,Br[DB]=s6,Br[LB]=a6,Br[zB]=o6,Br[OB]=l6,Br[FB]=u6,Br[NB]=c6,Br);function d6(e,t,n){var s=[],u,h=!1;w(e);var f=function(){return s};function o(C){t(),b(),n(C,!0)}function w(C){s.push(C),C.cont=function(A,M){h||(Ky(s,C),C.cont=Ti,M?o(A):(C===e&&(u=A),s.length||(h=!0,n(u))))}}function b(){h||(h=!0,s.forEach(function(C){C.cont=Ti,C.cancel()}),s=[])}return{addTask:w,cancelAll:b,abort:o,getTasks:f}}function YI(e,t){return e+"?"+t}function f6(e){var t=VI(e);if(t){var n=t.code,s=t.fileName,u=t.lineNumber,h=n+"  "+YI(s,u);return h}return""}function pT(e){var t=e.name,n=e.location;return n?t+"  "+YI(n.fileName,n.lineNumber):t}function p6(e){var t=fB(function(n){return n.cancelledTasks},e);return t.length?["Tasks cancelled due to error:"].concat(t).join(`
`):""}var N1=null,rf=[],m6=function(t){t.crashedEffect=N1,rf.push(t)},JI=function(){N1=null,rf.length=0},g6=function(t){N1=t},y6=function(){var t=rf[0],n=rf.slice(1),s=t.crashedEffect?f6(t.crashedEffect):null,u="The above error occurred in task "+pT(t.meta)+(s?` 
 when executing effect `+s:"");return[u].concat(n.map(function(h){return"    created by "+pT(h.meta)}),[p6(rf)]).join(`
`)};function v6(e,t,n,s,u,h,f){var o;f===void 0&&(f=Ti);var w=au,b,C,A=null,M=[],N=Object.create(n),V=d6(t,function(){M.push.apply(M,V.getTasks().map(function(fe){return fe.meta.name}))},G);function $(){w===au&&(w=to,V.cancelAll(),G(qc,!1))}function G(J,fe){if(!fe)J===qc?w=to:w!==to&&(w=XI),b=J,A&&A.resolve(J);else{if(w=Qm,m6({meta:u,cancelledTasks:M}),H.isRoot){var Ee=y6();JI(),e.onError(J,{sagaStack:Ee})}C=J,A&&A.reject(J)}H.cont(J,fe),H.joiners.forEach(function(Pe){Pe.cb(J,fe)}),H.joiners=null}function F(J){R1(N,J)}function B(){return A||(A=jB(),w===Qm?A.reject(C):w!==au&&A.resolve(b)),A.promise}var H=(o={},o[rB]=!0,o.id=s,o.meta=u,o.isRoot=h,o.context=N,o.joiners=[],o.queue=V,o.cancel=$,o.cont=f,o.end=G,o.setContext=F,o.toPromise=B,o.isRunning=function(){return w===au},o.isCancelled=function(){return w===to||w===au&&t.status===to},o.isAborted=function(){return w===Qm},o.result=function(){return b},o.error=function(){return C},o);return H}function Qy(e,t,n,s,u,h,f){var o=e.finalizeRunEffect(N);M.cancel=Ti;var w={meta:u,cancel:A,status:au},b=v6(e,w,n,s,u,h,f),C={task:b,digestEffect:V};function A(){w.status===au&&(w.status=to,M(qc))}return f&&(f.cancel=b.cancel),M(),b;function M($,G){try{var F;G?(F=t.throw($),JI()):FI($)?(w.status=to,M.cancel(),F=_l(t.return)?t.return(qc):{done:!0,value:qc}):OI($)?F=_l(t.return)?t.return():{done:!0}:F=t.next($),F.done?(w.status!==to&&(w.status=XI),w.cont(F.value)):V(F.value,s,M)}catch(B){if(w.status===to)throw B;w.status=Qm,w.cont(B,!0)}}function N($,G,F){if(Hy($))F1($,F);else if(M1($))Qy(e,$,b.context,G,u,!1,F);else if($&&$[RI]){var B=h6[$.type];B(e,$.payload,F,C)}else F($)}function V($,G,F,B){B===void 0&&(B="");var H=QI();e.sagaMonitor&&e.sagaMonitor.effectTriggered({effectId:H,parentEffectId:G,label:B,effect:$});var J;function fe(Ee,Pe){J||(J=!0,F.cancel=Ti,e.sagaMonitor&&(Pe?e.sagaMonitor.effectRejected(H,Ee):e.sagaMonitor.effectResolved(H,Ee)),Pe&&g6($),F(Ee,Pe))}fe.cancel=Ti,F.cancel=function(){J||(J=!0,fe.cancel(),fe.cancel=Ti,e.sagaMonitor&&e.sagaMonitor.effectCancelled(H))},o($,H,fe)}}function x6(e,t){for(var n=e.channel,s=n===void 0?KI():n,u=e.dispatch,h=e.getState,f=e.context,o=f===void 0?{}:f,w=e.sagaMonitor,b=e.effectMiddlewares,C=e.onError,A=C===void 0?yB:C,M=arguments.length,N=new Array(M>2?M-2:0),V=2;V<M;V++)N[V-2]=arguments[V];var $=t.apply(void 0,N),G=QI();w&&(w.rootSagaStarted=w.rootSagaStarted||Ti,w.effectTriggered=w.effectTriggered||Ti,w.effectResolved=w.effectResolved||Ti,w.effectRejected=w.effectRejected||Ti,w.effectCancelled=w.effectCancelled||Ti,w.actionDispatched=w.actionDispatched||Ti,w.rootSagaStarted({effectId:G,saga:t,args:N}));var F;if(b){var B=xB.apply(void 0,b);F=function(fe){return function(Ee,Pe,ve){var Ve=function(pt){return fe(pt,Pe,ve)};return B(Ve)(Ee)}}}else F=dB;var H={channel:s,dispatch:vB(u),getState:h,sagaMonitor:w,onError:A,finalizeRunEffect:F};return GI(function(){var J=Qy(H,$,o,G,D1(t),!0,void 0);return w&&w.effectResolved(G,J),J})}function _6(e){var t=e===void 0?{}:e,n=t.context,s=n===void 0?{}:n,u=t.channel,h=u===void 0?KI():u,f=t.sagaMonitor,o=h1(t,["context","channel","sagaMonitor"]),w;function b(C){var A=C.getState,M=C.dispatch;return w=x6.bind(null,Eu({},o,{context:s,channel:h,dispatch:M,getState:A,sagaMonitor:f})),function(N){return function(V){f&&f.actionDispatched&&f.actionDispatched(V);var $=N(V);return h.put(V),$}}}return b.run=function(){return w.apply(void 0,arguments)},b.setContext=function(C){R1(s,C)},b}var B1="persist:",eM="persist/FLUSH",V1="persist/REHYDRATE",tM="persist/PAUSE",nM="persist/PERSIST",rM="persist/PURGE",iM="persist/REGISTER",w6=-1;function Ym(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ym=function(n){return typeof n}:Ym=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Ym(e)}function mT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,s)}return n}function b6(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?mT(n,!0).forEach(function(s){S6(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mT(n).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function S6(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E6(e,t,n,s){s.debug;var u=b6({},n);return e&&Ym(e)==="object"&&Object.keys(e).forEach(function(h){h!=="_persist"&&t[h]===n[h]&&(u[h]=e[h])}),u}function T6(e){var t=e.blacklist||null,n=e.whitelist||null,s=e.transforms||[],u=e.throttle||0,h="".concat(e.keyPrefix!==void 0?e.keyPrefix:B1).concat(e.key),f=e.storage,o;e.serialize===!1?o=function(fe){return fe}:typeof e.serialize=="function"?o=e.serialize:o=C6;var w=e.writeFailHandler||null,b={},C={},A=[],M=null,N=null,V=function(fe){Object.keys(fe).forEach(function(Ee){F(Ee)&&b[Ee]!==fe[Ee]&&A.indexOf(Ee)===-1&&A.push(Ee)}),Object.keys(b).forEach(function(Ee){fe[Ee]===void 0&&F(Ee)&&A.indexOf(Ee)===-1&&b[Ee]!==void 0&&A.push(Ee)}),M===null&&(M=setInterval($,u)),b=fe};function $(){if(A.length===0){M&&clearInterval(M),M=null;return}var J=A.shift(),fe=s.reduce(function(Ee,Pe){return Pe.in(Ee,J,b)},b[J]);if(fe!==void 0)try{C[J]=o(fe)}catch(Ee){console.error("redux-persist/createPersistoid: error serializing state",Ee)}else delete C[J];A.length===0&&G()}function G(){Object.keys(C).forEach(function(J){b[J]===void 0&&delete C[J]}),N=f.setItem(h,o(C)).catch(B)}function F(J){return!(n&&n.indexOf(J)===-1&&J!=="_persist"||t&&t.indexOf(J)!==-1)}function B(J){w&&w(J)}var H=function(){for(;A.length!==0;)$();return N||Promise.resolve()};return{update:V,flush:H}}function C6(e){return JSON.stringify(e)}function P6(e){var t=e.transforms||[],n="".concat(e.keyPrefix!==void 0?e.keyPrefix:B1).concat(e.key),s=e.storage;e.debug;var u;return e.deserialize===!1?u=function(f){return f}:typeof e.deserialize=="function"?u=e.deserialize:u=A6,s.getItem(n).then(function(h){if(h)try{var f={},o=u(h);return Object.keys(o).forEach(function(w){f[w]=t.reduceRight(function(b,C){return C.out(b,w,o)},u(o[w]))}),f}catch(w){throw w}else return})}function A6(e){return JSON.parse(e)}function k6(e){var t=e.storage,n="".concat(e.keyPrefix!==void 0?e.keyPrefix:B1).concat(e.key);return t.removeItem(n,I6)}function I6(e){}function gT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,s)}return n}function Ka(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?gT(n,!0).forEach(function(s){M6(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gT(n).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function M6(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R6(e,t){if(e==null)return{};var n=D6(e,t),s,u;if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(u=0;u<h.length;u++)s=h[u],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function D6(e,t){if(e==null)return{};var n={},s=Object.keys(e),u,h;for(h=0;h<s.length;h++)u=s[h],!(t.indexOf(u)>=0)&&(n[u]=e[u]);return n}var L6=5e3;function z6(e,t){var n=e.version!==void 0?e.version:w6;e.debug;var s=e.stateReconciler===void 0?E6:e.stateReconciler,u=e.getStoredState||P6,h=e.timeout!==void 0?e.timeout:L6,f=null,o=!1,w=!0,b=function(A){return A._persist.rehydrated&&f&&!w&&f.update(A),A};return function(C,A){var M=C||{},N=M._persist,V=R6(M,["_persist"]),$=V;if(A.type===nM){var G=!1,F=function(ve,Ve){G||(A.rehydrate(e.key,ve,Ve),G=!0)};if(h&&setTimeout(function(){!G&&F(void 0,new Error('redux-persist: persist timed out for persist key "'.concat(e.key,'"')))},h),w=!1,f||(f=T6(e)),N)return Ka({},t($,A),{_persist:N});if(typeof A.rehydrate!="function"||typeof A.register!="function")throw new Error("redux-persist: either rehydrate or register is not a function on the PERSIST action. This can happen if the action is being replayed. This is an unexplored use case, please open an issue and we will figure out a resolution.");return A.register(e.key),u(e).then(function(Pe){var ve=e.migrate||function(Ve,Me){return Promise.resolve(Ve)};ve(Pe,n).then(function(Ve){F(Ve)},function(Ve){F(void 0,Ve)})},function(Pe){F(void 0,Pe)}),Ka({},t($,A),{_persist:{version:n,rehydrated:!1}})}else{if(A.type===rM)return o=!0,A.result(k6(e)),Ka({},t($,A),{_persist:N});if(A.type===eM)return A.result(f&&f.flush()),Ka({},t($,A),{_persist:N});if(A.type===tM)w=!0;else if(A.type===V1){if(o)return Ka({},$,{_persist:Ka({},N,{rehydrated:!0})});if(A.key===e.key){var B=t($,A),H=A.payload,J=s!==!1&&H!==void 0?s(H,C,B,e):B,fe=Ka({},J,{_persist:Ka({},N,{rehydrated:!0})});return b(fe)}}}if(!N)return t(C,A);var Ee=t($,A);return Ee===$?C:b(Ka({},Ee,{_persist:N}))}}function yT(e){return N6(e)||F6(e)||O6()}function O6(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function F6(e){if(Symbol.iterator in Object(e)||Object.prototype.toString.call(e)==="[object Arguments]")return Array.from(e)}function N6(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function vT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,s)}return n}function F0(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?vT(n,!0).forEach(function(s){B6(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vT(n).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function B6(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var sM={registry:[],bootstrapped:!1},V6=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:sM,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case iM:return F0({},t,{registry:[].concat(yT(t.registry),[n.key])});case V1:var s=t.registry.indexOf(n.key),u=yT(t.registry);return u.splice(s,1),F0({},t,{registry:u,bootstrapped:u.length===0});default:return t}};function j6(e,t,n){var s=n||!1,u=k1(V6,sM,t&&t.enhancer?t.enhancer:void 0),h=function(b){u.dispatch({type:iM,key:b})},f=function(b,C,A){var M={type:V1,payload:C,err:A,key:b};e.dispatch(M),u.dispatch(M),s&&o.getState().bootstrapped&&(s(),s=!1)},o=F0({},u,{purge:function(){var b=[];return e.dispatch({type:rM,result:function(A){b.push(A)}}),Promise.all(b)},flush:function(){var b=[];return e.dispatch({type:eM,result:function(A){b.push(A)}}),Promise.all(b)},pause:function(){e.dispatch({type:tM})},persist:function(){e.dispatch({type:nM,register:h,rehydrate:f})}});return t&&t.manualPersist||o.persist(),o}var j1={},$1={};$1.__esModule=!0;$1.default=q6;function Jm(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Jm=function(n){return typeof n}:Jm=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Jm(e)}function r_(){}var $6={getItem:r_,setItem:r_,removeItem:r_};function U6(e){if((typeof self>"u"?"undefined":Jm(self))!=="object"||!(e in self))return!1;try{var t=self[e],n="redux-persist ".concat(e," test");t.setItem(n,"test"),t.getItem(n),t.removeItem(n)}catch{return!1}return!0}function q6(e){var t="".concat(e,"Storage");return U6(t)?self[t]:$6}j1.__esModule=!0;j1.default=W6;var G6=Z6($1);function Z6(e){return e&&e.__esModule?e:{default:e}}function W6(e){var t=(0,G6.default)(e);return{getItem:function(s){return new Promise(function(u,h){u(t.getItem(s))})},setItem:function(s,u){return new Promise(function(h,f){h(t.setItem(s,u))})},removeItem:function(s){return new Promise(function(u,h){u(t.removeItem(s))})}}}var aM=void 0,H6=K6(j1);function K6(e){return e&&e.__esModule?e:{default:e}}var X6=(0,H6.default)("local");aM=X6;function Q6(e,t,n){return z6({key:e,storage:aM,whitelist:t},n)}const Y6={showModal:!1,modalContent:null,showPromptDialog:!1,promptDialogContent:null,navbarToggled:!1,activeExamTab:"form-section",examView:"main",userEmail:null,selectedMockTest:null,attemptId:null,isAuthenticated:!1,username:null},J6=(e,t)=>({...e,...t.payload}),eV=(e,t)=>({...e,showModal:!!t.payload,modalContent:t.payload||e.modalContent}),tV=(e,t)=>({...e,navbarToggled:t.payload}),nV=(e,t)=>({...e,modalContent:t.payload||null}),rV=(e,t)=>({...e,showPromptDialog:!!t.payload||!e.showPromptDialog,promptDialogContent:t.payload||e.promptDialogContent}),iV=(e,t)=>({...e,promptDialogContent:t.payload||null}),sV=(e,t)=>({...e,isAuthenticated:t.payload.isAuthenticated,username:t.payload.username}),oM=II({name:"common",initialState:Y6,reducers:{setCommonState:J6,toggleModal:eV,setModalContent:nV,setToggleNavbar:tV,togglePromptDialog:rV,setPromptDialogContent:iV,setLoginState:sV}}),aV=Q6("common",[],oM.reducer),oV={actions:[]},lV=II({name:"loader",initialState:oV,reducers:{startAction(e,t){e.actions.push(t.payload)},stopAction(e,t){e.actions=e.actions.filter(n=>n!==t.payload)}}}),uV=lV.reducer,cV=TI({common:aV,loader:uV});function*hV(){yield VB([])}const lM=_6(),dV=[lM],uM=q4({reducer:cV,middleware:e=>e({thunk:!1,serializableCheck:!1}).concat(dV)});lM.run(hV);const fV=j6(uM);function cM(e){var t,n,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=cM(e[t]))&&(s&&(s+=" "),s+=n);else for(t in e)e[t]&&(s&&(s+=" "),s+=t);return s}function rl(){for(var e,t,n=0,s="";n<arguments.length;)(e=arguments[n++])&&(t=cM(e))&&(s&&(s+=" "),s+=t);return s}const eg=e=>typeof e=="number"&&!isNaN(e),Gg=e=>typeof e=="string",ts=e=>typeof e=="function",tg=e=>Gg(e)||ts(e)?e:null,i_=e=>Q.isValidElement(e)||Gg(e)||ts(e)||eg(e);function pV(e,t,n){n===void 0&&(n=300);const{scrollHeight:s,style:u}=e;requestAnimationFrame(()=>{u.minHeight="initial",u.height=s+"px",u.transition=`all ${n}ms`,requestAnimationFrame(()=>{u.height="0",u.padding="0",u.margin="0",setTimeout(t,n)})})}function Yy(e){let{enter:t,exit:n,appendPosition:s=!1,collapse:u=!0,collapseDuration:h=300}=e;return function(f){let{children:o,position:w,preventExitTransition:b,done:C,nodeRef:A,isIn:M}=f;const N=s?`${t}--${w}`:t,V=s?`${n}--${w}`:n,$=Q.useRef(0);return Q.useLayoutEffect(()=>{const G=A.current,F=N.split(" "),B=H=>{H.target===A.current&&(G.dispatchEvent(new Event("d")),G.removeEventListener("animationend",B),G.removeEventListener("animationcancel",B),$.current===0&&H.type!=="animationcancel"&&G.classList.remove(...F))};G.classList.add(...F),G.addEventListener("animationend",B),G.addEventListener("animationcancel",B)},[]),Q.useEffect(()=>{const G=A.current,F=()=>{G.removeEventListener("animationend",F),u?pV(G,C,h):C()};M||(b?F():($.current=1,G.className+=` ${V}`,G.addEventListener("animationend",F)))},[M]),_t.createElement(_t.Fragment,null,o)}}function xT(e,t){return e!=null?{content:e.content,containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,status:t}:{}}const hu={list:new Map,emitQueue:new Map,on(e,t){return this.list.has(e)||this.list.set(e,[]),this.list.get(e).push(t),this},off(e,t){if(t){const n=this.list.get(e).filter(s=>s!==t);return this.list.set(e,n),this}return this.list.delete(e),this},cancelEmit(e){const t=this.emitQueue.get(e);return t&&(t.forEach(clearTimeout),this.emitQueue.delete(e)),this},emit(e){this.list.has(e)&&this.list.get(e).forEach(t=>{const n=setTimeout(()=>{t(...[].slice.call(arguments,1))},0);this.emitQueue.has(e)||this.emitQueue.set(e,[]),this.emitQueue.get(e).push(n)})}},Pm=e=>{let{theme:t,type:n,...s}=e;return _t.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:t==="colored"?"currentColor":`var(--toastify-icon-color-${n})`,...s})},s_={info:function(e){return _t.createElement(Pm,{...e},_t.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(e){return _t.createElement(Pm,{...e},_t.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(e){return _t.createElement(Pm,{...e},_t.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(e){return _t.createElement(Pm,{...e},_t.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return _t.createElement("div",{className:"Toastify__spinner"})}};function mV(e){const[,t]=Q.useReducer(N=>N+1,0),[n,s]=Q.useState([]),u=Q.useRef(null),h=Q.useRef(new Map).current,f=N=>n.indexOf(N)!==-1,o=Q.useRef({toastKey:1,displayedToast:0,count:0,queue:[],props:e,containerId:null,isToastActive:f,getToast:N=>h.get(N)}).current;function w(N){let{containerId:V}=N;const{limit:$}=o.props;!$||V&&o.containerId!==V||(o.count-=o.queue.length,o.queue=[])}function b(N){s(V=>N==null?[]:V.filter($=>$!==N))}function C(){const{toastContent:N,toastProps:V,staleId:$}=o.queue.shift();M(N,V,$)}function A(N,V){let{delay:$,staleId:G,...F}=V;if(!i_(N)||function(qe){return!u.current||o.props.enableMultiContainer&&qe.containerId!==o.props.containerId||h.has(qe.toastId)&&qe.updateId==null}(F))return;const{toastId:B,updateId:H,data:J}=F,{props:fe}=o,Ee=()=>b(B),Pe=H==null;Pe&&o.count++;const ve={...fe,style:fe.toastStyle,key:o.toastKey++,...Object.fromEntries(Object.entries(F).filter(qe=>{let[it,ut]=qe;return ut!=null})),toastId:B,updateId:H,data:J,closeToast:Ee,isIn:!1,className:tg(F.className||fe.toastClassName),bodyClassName:tg(F.bodyClassName||fe.bodyClassName),progressClassName:tg(F.progressClassName||fe.progressClassName),autoClose:!F.isLoading&&(Ve=F.autoClose,Me=fe.autoClose,Ve===!1||eg(Ve)&&Ve>0?Ve:Me),deleteToast(){const qe=xT(h.get(B),"removed");h.delete(B),hu.emit(4,qe);const it=o.queue.length;if(o.count=B==null?o.count-o.displayedToast:o.count-1,o.count<0&&(o.count=0),it>0){const ut=B==null?o.props.limit:1;if(it===1||ut===1)o.displayedToast++,C();else{const bt=ut>it?it:ut;o.displayedToast=bt;for(let ct=0;ct<bt;ct++)C()}}else t()}};var Ve,Me;ve.iconOut=function(qe){let{theme:it,type:ut,isLoading:bt,icon:ct}=qe,je=null;const Re={theme:it,type:ut};return ct===!1||(ts(ct)?je=ct(Re):Q.isValidElement(ct)?je=Q.cloneElement(ct,Re):Gg(ct)||eg(ct)?je=ct:bt?je=s_.spinner():(Ke=>Ke in s_)(ut)&&(je=s_[ut](Re))),je}(ve),ts(F.onOpen)&&(ve.onOpen=F.onOpen),ts(F.onClose)&&(ve.onClose=F.onClose),ve.closeButton=fe.closeButton,F.closeButton===!1||i_(F.closeButton)?ve.closeButton=F.closeButton:F.closeButton===!0&&(ve.closeButton=!i_(fe.closeButton)||fe.closeButton);let pt=N;Q.isValidElement(N)&&!Gg(N.type)?pt=Q.cloneElement(N,{closeToast:Ee,toastProps:ve,data:J}):ts(N)&&(pt=N({closeToast:Ee,toastProps:ve,data:J})),fe.limit&&fe.limit>0&&o.count>fe.limit&&Pe?o.queue.push({toastContent:pt,toastProps:ve,staleId:G}):eg($)?setTimeout(()=>{M(pt,ve,G)},$):M(pt,ve,G)}function M(N,V,$){const{toastId:G}=V;$&&h.delete($);const F={content:N,props:V};h.set(G,F),s(B=>[...B,G].filter(H=>H!==$)),hu.emit(4,xT(F,F.props.updateId==null?"added":"updated"))}return Q.useEffect(()=>(o.containerId=e.containerId,hu.cancelEmit(3).on(0,A).on(1,N=>u.current&&b(N)).on(5,w).emit(2,o),()=>{h.clear(),hu.emit(3,o)}),[]),Q.useEffect(()=>{o.props=e,o.isToastActive=f,o.displayedToast=n.length}),{getToastToRender:function(N){const V=new Map,$=Array.from(h.values());return e.newestOnTop&&$.reverse(),$.forEach(G=>{const{position:F}=G.props;V.has(F)||V.set(F,[]),V.get(F).push(G)}),Array.from(V,G=>N(G[0],G[1]))},containerRef:u,isToastActive:f}}function _T(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientX:e.clientX}function wT(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientY:e.clientY}function gV(e){const[t,n]=Q.useState(!1),[s,u]=Q.useState(!1),h=Q.useRef(null),f=Q.useRef({start:0,x:0,y:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,boundingRect:null,didMove:!1}).current,o=Q.useRef(e),{autoClose:w,pauseOnHover:b,closeToast:C,onClick:A,closeOnClick:M}=e;function N(J){if(e.draggable){J.nativeEvent.type==="touchstart"&&J.nativeEvent.preventDefault(),f.didMove=!1,document.addEventListener("mousemove",F),document.addEventListener("mouseup",B),document.addEventListener("touchmove",F),document.addEventListener("touchend",B);const fe=h.current;f.canCloseOnClick=!0,f.canDrag=!0,f.boundingRect=fe.getBoundingClientRect(),fe.style.transition="",f.x=_T(J.nativeEvent),f.y=wT(J.nativeEvent),e.draggableDirection==="x"?(f.start=f.x,f.removalDistance=fe.offsetWidth*(e.draggablePercent/100)):(f.start=f.y,f.removalDistance=fe.offsetHeight*(e.draggablePercent===80?1.5*e.draggablePercent:e.draggablePercent/100))}}function V(J){if(f.boundingRect){const{top:fe,bottom:Ee,left:Pe,right:ve}=f.boundingRect;J.nativeEvent.type!=="touchend"&&e.pauseOnHover&&f.x>=Pe&&f.x<=ve&&f.y>=fe&&f.y<=Ee?G():$()}}function $(){n(!0)}function G(){n(!1)}function F(J){const fe=h.current;f.canDrag&&fe&&(f.didMove=!0,t&&G(),f.x=_T(J),f.y=wT(J),f.delta=e.draggableDirection==="x"?f.x-f.start:f.y-f.start,f.start!==f.x&&(f.canCloseOnClick=!1),fe.style.transform=`translate${e.draggableDirection}(${f.delta}px)`,fe.style.opacity=""+(1-Math.abs(f.delta/f.removalDistance)))}function B(){document.removeEventListener("mousemove",F),document.removeEventListener("mouseup",B),document.removeEventListener("touchmove",F),document.removeEventListener("touchend",B);const J=h.current;if(f.canDrag&&f.didMove&&J){if(f.canDrag=!1,Math.abs(f.delta)>f.removalDistance)return u(!0),void e.closeToast();J.style.transition="transform 0.2s, opacity 0.2s",J.style.transform=`translate${e.draggableDirection}(0)`,J.style.opacity="1"}}Q.useEffect(()=>{o.current=e}),Q.useEffect(()=>(h.current&&h.current.addEventListener("d",$,{once:!0}),ts(e.onOpen)&&e.onOpen(Q.isValidElement(e.children)&&e.children.props),()=>{const J=o.current;ts(J.onClose)&&J.onClose(Q.isValidElement(J.children)&&J.children.props)}),[]),Q.useEffect(()=>(e.pauseOnFocusLoss&&(document.hasFocus()||G(),window.addEventListener("focus",$),window.addEventListener("blur",G)),()=>{e.pauseOnFocusLoss&&(window.removeEventListener("focus",$),window.removeEventListener("blur",G))}),[e.pauseOnFocusLoss]);const H={onMouseDown:N,onTouchStart:N,onMouseUp:V,onTouchEnd:V};return w&&b&&(H.onMouseEnter=G,H.onMouseLeave=$),M&&(H.onClick=J=>{A&&A(J),f.canCloseOnClick&&C()}),{playToast:$,pauseToast:G,isRunning:t,preventExitTransition:s,toastRef:h,eventHandlers:H}}function hM(e){let{closeToast:t,theme:n,ariaLabel:s="close"}=e;return _t.createElement("button",{className:`Toastify__close-button Toastify__close-button--${n}`,type:"button",onClick:u=>{u.stopPropagation(),t(u)},"aria-label":s},_t.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},_t.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function yV(e){let{delay:t,isRunning:n,closeToast:s,type:u="default",hide:h,className:f,style:o,controlledProgress:w,progress:b,rtl:C,isIn:A,theme:M}=e;const N=h||w&&b===0,V={...o,animationDuration:`${t}ms`,animationPlayState:n?"running":"paused",opacity:N?0:1};w&&(V.transform=`scaleX(${b})`);const $=rl("Toastify__progress-bar",w?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${M}`,`Toastify__progress-bar--${u}`,{"Toastify__progress-bar--rtl":C}),G=ts(f)?f({rtl:C,type:u,defaultClassName:$}):rl($,f);return _t.createElement("div",{role:"progressbar","aria-hidden":N?"true":"false","aria-label":"notification timer",className:G,style:V,[w&&b>=1?"onTransitionEnd":"onAnimationEnd"]:w&&b<1?null:()=>{A&&s()}})}const vV=e=>{const{isRunning:t,preventExitTransition:n,toastRef:s,eventHandlers:u}=gV(e),{closeButton:h,children:f,autoClose:o,onClick:w,type:b,hideProgressBar:C,closeToast:A,transition:M,position:N,className:V,style:$,bodyClassName:G,bodyStyle:F,progressClassName:B,progressStyle:H,updateId:J,role:fe,progress:Ee,rtl:Pe,toastId:ve,deleteToast:Ve,isIn:Me,isLoading:pt,iconOut:qe,closeOnClick:it,theme:ut}=e,bt=rl("Toastify__toast",`Toastify__toast-theme--${ut}`,`Toastify__toast--${b}`,{"Toastify__toast--rtl":Pe},{"Toastify__toast--close-on-click":it}),ct=ts(V)?V({rtl:Pe,position:N,type:b,defaultClassName:bt}):rl(bt,V),je=!!Ee||!o,Re={closeToast:A,type:b,theme:ut};let Ke=null;return h===!1||(Ke=ts(h)?h(Re):Q.isValidElement(h)?Q.cloneElement(h,Re):hM(Re)),_t.createElement(M,{isIn:Me,done:Ve,position:N,preventExitTransition:n,nodeRef:s},_t.createElement("div",{id:ve,onClick:w,className:ct,...u,style:$,ref:s},_t.createElement("div",{...Me&&{role:fe},className:ts(G)?G({type:b}):rl("Toastify__toast-body",G),style:F},qe!=null&&_t.createElement("div",{className:rl("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!pt})},qe),_t.createElement("div",null,f)),Ke,_t.createElement(yV,{...J&&!je?{key:`pb-${J}`}:{},rtl:Pe,theme:ut,delay:o,isRunning:t,isIn:Me,closeToast:A,hide:C,type:b,style:H,className:B,controlledProgress:je,progress:Ee||0})))},Jy=function(e,t){return t===void 0&&(t=!1),{enter:`Toastify--animate Toastify__${e}-enter`,exit:`Toastify--animate Toastify__${e}-exit`,appendPosition:t}},xV=Yy(Jy("bounce",!0));Yy(Jy("slide",!0));Yy(Jy("zoom"));Yy(Jy("flip"));const N0=Q.forwardRef((e,t)=>{const{getToastToRender:n,containerRef:s,isToastActive:u}=mV(e),{className:h,style:f,rtl:o,containerId:w}=e;function b(C){const A=rl("Toastify__toast-container",`Toastify__toast-container--${C}`,{"Toastify__toast-container--rtl":o});return ts(h)?h({position:C,rtl:o,defaultClassName:A}):rl(A,tg(h))}return Q.useEffect(()=>{t&&(t.current=s.current)},[]),_t.createElement("div",{ref:s,className:"Toastify",id:w},n((C,A)=>{const M=A.length?{...f}:{...f,pointerEvents:"none"};return _t.createElement("div",{className:b(C),style:M,key:`container-${C}`},A.map((N,V)=>{let{content:$,props:G}=N;return _t.createElement(vV,{...G,isIn:u(G.toastId),style:{...G.style,"--nth":V+1,"--len":A.length},key:`toast-${G.key}`},$)}))}))});N0.displayName="ToastContainer",N0.defaultProps={position:"top-right",transition:xV,autoClose:5e3,closeButton:hM,pauseOnHover:!0,pauseOnFocusLoss:!0,closeOnClick:!0,draggable:!0,draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};let bT,a_=new Map,ST=[];hu.on(2,e=>{bT=e.containerId||e,a_.set(bT,e),ST.forEach(t=>{hu.emit(0,t.content,t.options)}),ST=[]}).on(3,e=>{a_.delete(e.containerId||e),a_.size===0&&hu.off(0).off(1).off(5)});const Pl=()=>Hk(),io=s3;function _V(){return K("h1",{children:"Something went wrong!"})}function ET(e){if(!e)return!0;try{const[,t]=e.split("."),n=JSON.parse(atob(t));return n.exp?n.exp*1e3<Date.now():!0}catch{return!0}}async function wV(e){const t=await fetch("https://sujanadh.pythonanywhere.com/api/user/token/refresh/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refresh:e})});if(!t.ok)throw new Error("Failed to refresh token");return t.json()}function dM(){const[e,t]=Q.useState(!1),[n,s]=Q.useState(!0);return Q.useEffect(()=>{const u=async()=>{const f=localStorage.getItem("token"),o=localStorage.getItem("refresh_token");if(f&&!ET(f))t(!0);else if(o&&!ET(o))try{const w=await wV(o);w.access?(localStorage.setItem("token",w.access),t(!0)):(t(!1),localStorage.removeItem("token"),localStorage.removeItem("refresh_token"))}catch{t(!1),localStorage.removeItem("token"),localStorage.removeItem("refresh_token")}else t(!1),localStorage.removeItem("token"),localStorage.removeItem("refresh_token");s(!1)};u();const h=()=>{s(!0),u()};return window.addEventListener("authChanged",h),()=>{window.removeEventListener("authChanged",h)}},[]),{isAuthenticated:e,loading:n}}function bV({isAuthenticated:e,redirectPath:t="/login",children:n}){return e?n||K(h5,{}):K(c5,{to:t,replace:!0})}function SV({routes:e,fallback:t=K(_V,{})}){const{isAuthenticated:n,loading:s}=dM();return s?t:K(Q.Suspense,{fallback:t,children:K(f5,{children:e==null?void 0:e.map(u=>{var h,f;return u.authenticated?K(Zo,{element:K(bV,{isAuthenticated:n}),children:u!=null&&u.children?K(Zo,{path:u.path,children:(h=u==null?void 0:u.children)==null?void 0:h.map(o=>K(Zo,{path:o.path,element:K(o.component,{})},o.name))},u.name):K(Zo,{path:u.path,element:K(u.component,{})},u.name)},u.name):u!=null&&u.children?K(Zo,{path:u.path,children:(f=u==null?void 0:u.children)==null?void 0:f.map(o=>K(Zo,{path:o.path,element:K(o.component,{})},o.name))},u.name):K(Zo,{path:u.path,element:K(u.component,{})},u.name)})})})}function fM(e){var t,n,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var u=e.length;for(t=0;t<u;t++)e[t]&&(n=fM(e[t]))&&(s&&(s+=" "),s+=n)}else for(n in e)e[n]&&(s&&(s+=" "),s+=n);return s}function EV(){for(var e,t,n=0,s="",u=arguments.length;n<u;n++)(e=arguments[n])&&(t=fM(e))&&(s&&(s+=" "),s+=t);return s}function TV(){for(var e=0,t,n,s="";e<arguments.length;)(t=arguments[e++])&&(n=pM(t))&&(s&&(s+=" "),s+=n);return s}function pM(e){if(typeof e=="string")return e;for(var t,n="",s=0;s<e.length;s++)e[s]&&(t=pM(e[s]))&&(n&&(n+=" "),n+=t);return n}var U1="-";function CV(e){var t=AV(e),n=e.conflictingClassGroups,s=e.conflictingClassGroupModifiers,u=s===void 0?{}:s;function h(o){var w=o.split(U1);return w[0]===""&&w.length!==1&&w.shift(),mM(w,t)||PV(o)}function f(o,w){var b=n[o]||[];return w&&u[o]?[].concat(b,u[o]):b}return{getClassGroupId:h,getConflictingClassGroupIds:f}}function mM(e,t){var f;if(e.length===0)return t.classGroupId;var n=e[0],s=t.nextPart.get(n),u=s?mM(e.slice(1),s):void 0;if(u)return u;if(t.validators.length!==0){var h=e.join(U1);return(f=t.validators.find(function(o){var w=o.validator;return w(h)}))==null?void 0:f.classGroupId}}var TT=/^\[(.+)\]$/;function PV(e){if(TT.test(e)){var t=TT.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}}function AV(e){var t=e.theme,n=e.prefix,s={nextPart:new Map,validators:[]},u=IV(Object.entries(e.classGroups),n);return u.forEach(function(h){var f=h[0],o=h[1];B0(o,s,f,t)}),s}function B0(e,t,n,s){e.forEach(function(u){if(typeof u=="string"){var h=u===""?t:CT(t,u);h.classGroupId=n;return}if(typeof u=="function"){if(kV(u)){B0(u(s),t,n,s);return}t.validators.push({validator:u,classGroupId:n});return}Object.entries(u).forEach(function(f){var o=f[0],w=f[1];B0(w,CT(t,o),n,s)})})}function CT(e,t){var n=e;return t.split(U1).forEach(function(s){n.nextPart.has(s)||n.nextPart.set(s,{nextPart:new Map,validators:[]}),n=n.nextPart.get(s)}),n}function kV(e){return e.isThemeGetter}function IV(e,t){return t?e.map(function(n){var s=n[0],u=n[1],h=u.map(function(f){return typeof f=="string"?t+f:typeof f=="object"?Object.fromEntries(Object.entries(f).map(function(o){var w=o[0],b=o[1];return[t+w,b]})):f});return[s,h]}):e}function MV(e){if(e<1)return{get:function(){},set:function(){}};var t=0,n=new Map,s=new Map;function u(h,f){n.set(h,f),t++,t>e&&(t=0,s=n,n=new Map)}return{get:function(f){var o=n.get(f);if(o!==void 0)return o;if((o=s.get(f))!==void 0)return u(f,o),o},set:function(f,o){n.has(f)?n.set(f,o):u(f,o)}}}var gM="!";function RV(e){var t=e.separator||":",n=t.length===1,s=t[0],u=t.length;return function(f){for(var o=[],w=0,b=0,C,A=0;A<f.length;A++){var M=f[A];if(w===0){if(M===s&&(n||f.slice(A,A+u)===t)){o.push(f.slice(b,A)),b=A+u;continue}if(M==="/"){C=A;continue}}M==="["?w++:M==="]"&&w--}var N=o.length===0?f:f.substring(b),V=N.startsWith(gM),$=V?N.substring(1):N,G=C&&C>b?C-b:void 0;return{modifiers:o,hasImportantModifier:V,baseClassName:$,maybePostfixModifierPosition:G}}}function DV(e){if(e.length<=1)return e;var t=[],n=[];return e.forEach(function(s){var u=s[0]==="[";u?(t.push.apply(t,n.sort().concat([s])),n=[]):n.push(s)}),t.push.apply(t,n.sort()),t}function LV(e){return{cache:MV(e.cacheSize),splitModifiers:RV(e),...CV(e)}}var zV=/\s+/;function OV(e,t){var n=t.splitModifiers,s=t.getClassGroupId,u=t.getConflictingClassGroupIds,h=new Set;return e.trim().split(zV).map(function(f){var o=n(f),w=o.modifiers,b=o.hasImportantModifier,C=o.baseClassName,A=o.maybePostfixModifierPosition,M=s(A?C.substring(0,A):C),N=!!A;if(!M){if(!A)return{isTailwindClass:!1,originalClassName:f};if(M=s(C),!M)return{isTailwindClass:!1,originalClassName:f};N=!1}var V=DV(w).join(":"),$=b?V+gM:V;return{isTailwindClass:!0,modifierId:$,classGroupId:M,originalClassName:f,hasPostfixModifier:N}}).reverse().filter(function(f){if(!f.isTailwindClass)return!0;var o=f.modifierId,w=f.classGroupId,b=f.hasPostfixModifier,C=o+w;return h.has(C)?!1:(h.add(C),u(w,b).forEach(function(A){return h.add(o+A)}),!0)}).reverse().map(function(f){return f.originalClassName}).join(" ")}function FV(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var s,u,h,f=o;function o(b){var C=t[0],A=t.slice(1),M=A.reduce(function(N,V){return V(N)},C());return s=LV(M),u=s.cache.get,h=s.cache.set,f=w,w(b)}function w(b){var C=u(b);if(C)return C;var A=OV(b,s);return h(b,A),A}return function(){return f(TV.apply(null,arguments))}}function Rn(e){var t=function(s){return s[e]||[]};return t.isThemeGetter=!0,t}var yM=/^\[(?:([a-z-]+):)?(.+)\]$/i,NV=/^\d+\/\d+$/,BV=new Set(["px","full","screen"]),VV=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,jV=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,$V=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function Hs(e){return du(e)||BV.has(e)||NV.test(e)||V0(e)}function V0(e){return Au(e,"length",HV)}function UV(e){return Au(e,"size",vM)}function qV(e){return Au(e,"position",vM)}function GV(e){return Au(e,"url",KV)}function Am(e){return Au(e,"number",du)}function du(e){return!Number.isNaN(Number(e))}function ZV(e){return e.endsWith("%")&&du(e.slice(0,-1))}function Rd(e){return PT(e)||Au(e,"number",PT)}function Xt(e){return yM.test(e)}function Dd(){return!0}function qo(e){return VV.test(e)}function WV(e){return Au(e,"",XV)}function Au(e,t,n){var s=yM.exec(e);return s?s[1]?s[1]===t:n(s[2]):!1}function HV(e){return jV.test(e)}function vM(){return!1}function KV(e){return e.startsWith("url(")}function PT(e){return Number.isInteger(Number(e))}function XV(e){return $V.test(e)}function QV(){var e=Rn("colors"),t=Rn("spacing"),n=Rn("blur"),s=Rn("brightness"),u=Rn("borderColor"),h=Rn("borderRadius"),f=Rn("borderSpacing"),o=Rn("borderWidth"),w=Rn("contrast"),b=Rn("grayscale"),C=Rn("hueRotate"),A=Rn("invert"),M=Rn("gap"),N=Rn("gradientColorStops"),V=Rn("gradientColorStopPositions"),$=Rn("inset"),G=Rn("margin"),F=Rn("opacity"),B=Rn("padding"),H=Rn("saturate"),J=Rn("scale"),fe=Rn("sepia"),Ee=Rn("skew"),Pe=Rn("space"),ve=Rn("translate"),Ve=function(){return["auto","contain","none"]},Me=function(){return["auto","hidden","clip","visible","scroll"]},pt=function(){return["auto",Xt,t]},qe=function(){return[Xt,t]},it=function(){return["",Hs]},ut=function(){return["auto",du,Xt]},bt=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},ct=function(){return["solid","dashed","dotted","double","none"]},je=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},Re=function(){return["start","end","center","between","around","evenly","stretch"]},Ke=function(){return["","0",Xt]},ft=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},Rt=function(){return[du,Am]},Bt=function(){return[du,Xt]};return{cacheSize:500,theme:{colors:[Dd],spacing:[Hs],blur:["none","",qo,Xt],brightness:Rt(),borderColor:[e],borderRadius:["none","","full",qo,Xt],borderSpacing:qe(),borderWidth:it(),contrast:Rt(),grayscale:Ke(),hueRotate:Bt(),invert:Ke(),gap:qe(),gradientColorStops:[e],gradientColorStopPositions:[ZV,V0],inset:pt(),margin:pt(),opacity:Rt(),padding:qe(),saturate:Rt(),scale:Rt(),sepia:Ke(),skew:Bt(),space:qe(),translate:qe()},classGroups:{aspect:[{aspect:["auto","square","video",Xt]}],container:["container"],columns:[{columns:[qo]}],"break-after":[{"break-after":ft()}],"break-before":[{"break-before":ft()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(bt(),[Xt])}],overflow:[{overflow:Me()}],"overflow-x":[{"overflow-x":Me()}],"overflow-y":[{"overflow-y":Me()}],overscroll:[{overscroll:Ve()}],"overscroll-x":[{"overscroll-x":Ve()}],"overscroll-y":[{"overscroll-y":Ve()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[$]}],"inset-x":[{"inset-x":[$]}],"inset-y":[{"inset-y":[$]}],start:[{start:[$]}],end:[{end:[$]}],top:[{top:[$]}],right:[{right:[$]}],bottom:[{bottom:[$]}],left:[{left:[$]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Rd]}],basis:[{basis:pt()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Xt]}],grow:[{grow:Ke()}],shrink:[{shrink:Ke()}],order:[{order:["first","last","none",Rd]}],"grid-cols":[{"grid-cols":[Dd]}],"col-start-end":[{col:["auto",{span:["full",Rd]},Xt]}],"col-start":[{"col-start":ut()}],"col-end":[{"col-end":ut()}],"grid-rows":[{"grid-rows":[Dd]}],"row-start-end":[{row:["auto",{span:[Rd]},Xt]}],"row-start":[{"row-start":ut()}],"row-end":[{"row-end":ut()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Xt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Xt]}],gap:[{gap:[M]}],"gap-x":[{"gap-x":[M]}],"gap-y":[{"gap-y":[M]}],"justify-content":[{justify:["normal"].concat(Re())}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat(Re(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(Re(),["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[B]}],px:[{px:[B]}],py:[{py:[B]}],ps:[{ps:[B]}],pe:[{pe:[B]}],pt:[{pt:[B]}],pr:[{pr:[B]}],pb:[{pb:[B]}],pl:[{pl:[B]}],m:[{m:[G]}],mx:[{mx:[G]}],my:[{my:[G]}],ms:[{ms:[G]}],me:[{me:[G]}],mt:[{mt:[G]}],mr:[{mr:[G]}],mb:[{mb:[G]}],ml:[{ml:[G]}],"space-x":[{"space-x":[Pe]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[Pe]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",Xt,t]}],"min-w":[{"min-w":["min","max","fit",Xt,Hs]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[qo]},qo,Xt]}],h:[{h:[Xt,t,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",Xt,Hs]}],"max-h":[{"max-h":[Xt,t,"min","max","fit"]}],"font-size":[{text:["base",qo,V0]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Am]}],"font-family":[{font:[Dd]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Xt]}],"line-clamp":[{"line-clamp":["none",du,Am]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Xt,Hs]}],"list-image":[{"list-image":["none",Xt]}],"list-style-type":[{list:["none","disc","decimal",Xt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[F]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[F]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(ct(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",Hs]}],"underline-offset":[{"underline-offset":["auto",Xt,Hs]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:qe()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Xt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Xt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[F]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(bt(),[qV])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",UV]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},GV]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[V]}],"gradient-via-pos":[{via:[V]}],"gradient-to-pos":[{to:[V]}],"gradient-from":[{from:[N]}],"gradient-via":[{via:[N]}],"gradient-to":[{to:[N]}],rounded:[{rounded:[h]}],"rounded-s":[{"rounded-s":[h]}],"rounded-e":[{"rounded-e":[h]}],"rounded-t":[{"rounded-t":[h]}],"rounded-r":[{"rounded-r":[h]}],"rounded-b":[{"rounded-b":[h]}],"rounded-l":[{"rounded-l":[h]}],"rounded-ss":[{"rounded-ss":[h]}],"rounded-se":[{"rounded-se":[h]}],"rounded-ee":[{"rounded-ee":[h]}],"rounded-es":[{"rounded-es":[h]}],"rounded-tl":[{"rounded-tl":[h]}],"rounded-tr":[{"rounded-tr":[h]}],"rounded-br":[{"rounded-br":[h]}],"rounded-bl":[{"rounded-bl":[h]}],"border-w":[{border:[o]}],"border-w-x":[{"border-x":[o]}],"border-w-y":[{"border-y":[o]}],"border-w-s":[{"border-s":[o]}],"border-w-e":[{"border-e":[o]}],"border-w-t":[{"border-t":[o]}],"border-w-r":[{"border-r":[o]}],"border-w-b":[{"border-b":[o]}],"border-w-l":[{"border-l":[o]}],"border-opacity":[{"border-opacity":[F]}],"border-style":[{border:[].concat(ct(),["hidden"])}],"divide-x":[{"divide-x":[o]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[o]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[F]}],"divide-style":[{divide:ct()}],"border-color":[{border:[u]}],"border-color-x":[{"border-x":[u]}],"border-color-y":[{"border-y":[u]}],"border-color-t":[{"border-t":[u]}],"border-color-r":[{"border-r":[u]}],"border-color-b":[{"border-b":[u]}],"border-color-l":[{"border-l":[u]}],"divide-color":[{divide:[u]}],"outline-style":[{outline:[""].concat(ct())}],"outline-offset":[{"outline-offset":[Xt,Hs]}],"outline-w":[{outline:[Hs]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:it()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[F]}],"ring-offset-w":[{"ring-offset":[Hs]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",qo,WV]}],"shadow-color":[{shadow:[Dd]}],opacity:[{opacity:[F]}],"mix-blend":[{"mix-blend":je()}],"bg-blend":[{"bg-blend":je()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[s]}],contrast:[{contrast:[w]}],"drop-shadow":[{"drop-shadow":["","none",qo,Xt]}],grayscale:[{grayscale:[b]}],"hue-rotate":[{"hue-rotate":[C]}],invert:[{invert:[A]}],saturate:[{saturate:[H]}],sepia:[{sepia:[fe]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[s]}],"backdrop-contrast":[{"backdrop-contrast":[w]}],"backdrop-grayscale":[{"backdrop-grayscale":[b]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[C]}],"backdrop-invert":[{"backdrop-invert":[A]}],"backdrop-opacity":[{"backdrop-opacity":[F]}],"backdrop-saturate":[{"backdrop-saturate":[H]}],"backdrop-sepia":[{"backdrop-sepia":[fe]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[f]}],"border-spacing-x":[{"border-spacing-x":[f]}],"border-spacing-y":[{"border-spacing-y":[f]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Xt]}],duration:[{duration:Bt()}],ease:[{ease:["linear","in","out","in-out",Xt]}],delay:[{delay:Bt()}],animate:[{animate:["none","spin","ping","pulse","bounce",Xt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[J]}],"scale-x":[{"scale-x":[J]}],"scale-y":[{"scale-y":[J]}],rotate:[{rotate:[Rd,Xt]}],"translate-x":[{"translate-x":[ve]}],"translate-y":[{"translate-y":[ve]}],"skew-x":[{"skew-x":[Ee]}],"skew-y":[{"skew-y":[Ee]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Xt]}],accent:[{accent:["auto",e]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Xt]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":qe()}],"scroll-mx":[{"scroll-mx":qe()}],"scroll-my":[{"scroll-my":qe()}],"scroll-ms":[{"scroll-ms":qe()}],"scroll-me":[{"scroll-me":qe()}],"scroll-mt":[{"scroll-mt":qe()}],"scroll-mr":[{"scroll-mr":qe()}],"scroll-mb":[{"scroll-mb":qe()}],"scroll-ml":[{"scroll-ml":qe()}],"scroll-p":[{"scroll-p":qe()}],"scroll-px":[{"scroll-px":qe()}],"scroll-py":[{"scroll-py":qe()}],"scroll-ps":[{"scroll-ps":qe()}],"scroll-pe":[{"scroll-pe":qe()}],"scroll-pt":[{"scroll-pt":qe()}],"scroll-pr":[{"scroll-pr":qe()}],"scroll-pb":[{"scroll-pb":qe()}],"scroll-pl":[{"scroll-pl":qe()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Xt]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Hs,Am]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}var YV=FV(QV);function Al(...e){return YV(EV(e))}function ev({className:e="",children:t,gap:n,md:s,row:u,...h}){let f="";return s&&(f+="md:naxatw-flex-row "),K("div",{className:Al(`naxatw-flex naxatw-flex-col ${f}
      ${e}`),...h,style:{gap:n?`${n*.25}rem`:""},children:t})}function Ji({className:e="",children:t,gap:n,...s}){return K("div",{className:Al(`naxatw-flex naxatw-flex-row
      ${e}`),...s,style:{gap:n?`${n*.25}rem`:""},children:t})}function fu({className:e="",children:t,gap:n,...s}){return K("div",{className:Al(`naxatw-flex naxatw-flex-col ${e}`),style:{gap:n?`${n*.25}rem`:""},...s,children:t})}const JV="/assets/landing-image-15b039a3.svg";function so({aspectRation:e,styleClass:t,src:n,alt:s,width:u,className:h}){return K("div",{className:`image-cover naxatw-aspect-${e} ${t}}  `,style:{aspectRatio:e},children:K("img",{src:n,alt:s,width:u,className:h})})}function ej(){return K("section",{className:"home naxatw-bg-primary naxatw-w-full naxatw-h-[35rem]",children:Ne(Ji,{className:"naxatw-container naxatw-h-full naxatw-items-center naxatw-justify-between",children:[Ne(fu,{gap:10,children:[Ne("div",{className:"naxatw-animate-fade-up",children:[K("h1",{className:"naxatw-text-white naxatw-text-[5rem]",children:"GeoSewa"}),K("p",{className:"naxatw-text-white naxatw-tracking-widest naxatw-text-[1.15rem] naxatw-mt-3 naxatw-ml-3",children:"Your Spatial Reference!"})]}),K("p",{className:"naxatw-text-white naxatw-text-[1.5rem] naxatw-ml-3 naxatw-animate-fade-up",children:"Unlock your potential with notes and mock exam mastery!!"})]}),K(so,{src:JV,width:400,className:"naxatw-animate-fade-up naxatw-hidden md:naxatw-flex"})]})})}const tj="/assets/about-image-87671f32.svg";function nj(e){if(typeof Proxy>"u")return e;const t=new Map,n=(...s)=>e(...s);return new Proxy(n,{get:(s,u)=>u==="create"?e:(t.has(u)||t.set(u,e(u)),t.get(u))})}function Rf(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const j0=e=>Array.isArray(e);function xM(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let s=0;s<n;s++)if(t[s]!==e[s])return!1;return!0}function Df(e){return typeof e=="string"||Array.isArray(e)}function AT(e){const t=[{},{}];return e==null||e.values.forEach((n,s)=>{t[0][s]=n.get(),t[1][s]=n.getVelocity()}),t}function q1(e,t,n,s){if(typeof t=="function"){const[u,h]=AT(s);t=t(n!==void 0?n:e.custom,u,h)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[u,h]=AT(s);t=t(n!==void 0?n:e.custom,u,h)}return t}function tv(e,t,n){const s=e.getProps();return q1(s,t,n!==void 0?n:s.custom,e)}const G1=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Z1=["initial",...G1],Wf=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],kl=new Set(Wf),Pa=e=>e*1e3,lo=e=>e/1e3,rj={type:"spring",stiffness:500,damping:25,restSpeed:10},ij=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),sj={type:"keyframes",duration:.8},aj={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},oj=(e,{keyframes:t})=>t.length>2?sj:kl.has(e)?e.startsWith("scale")?ij(t[1]):rj:aj;function W1(e,t){return e?e[t]||e.default||e:void 0}const lj={skipAnimations:!1,useManualTiming:!1},uj=e=>e!==null;function nv(e,{repeat:t,repeatType:n="loop"},s){const u=e.filter(uj),h=t&&n!=="loop"&&t%2===1?0:u.length-1;return!h||s===void 0?u[h]:s}const Ur=e=>e;function cj(e){let t=new Set,n=new Set,s=!1,u=!1;const h=new WeakSet;let f={delta:0,timestamp:0,isProcessing:!1};function o(b){h.has(b)&&(w.schedule(b),e()),b(f)}const w={schedule:(b,C=!1,A=!1)=>{const N=A&&s?t:n;return C&&h.add(b),N.has(b)||N.add(b),b},cancel:b=>{n.delete(b),h.delete(b)},process:b=>{if(f=b,s){u=!0;return}s=!0,[t,n]=[n,t],n.clear(),t.forEach(o),s=!1,u&&(u=!1,w.process(b))}};return w}const km=["read","resolveKeyframes","update","preRender","render","postRender"],hj=40;function _M(e,t){let n=!1,s=!0;const u={delta:0,timestamp:0,isProcessing:!1},h=()=>n=!0,f=km.reduce((F,B)=>(F[B]=cj(h),F),{}),{read:o,resolveKeyframes:w,update:b,preRender:C,render:A,postRender:M}=f,N=()=>{const F=performance.now();n=!1,u.delta=s?1e3/60:Math.max(Math.min(F-u.timestamp,hj),1),u.timestamp=F,u.isProcessing=!0,o.process(u),w.process(u),b.process(u),C.process(u),A.process(u),M.process(u),u.isProcessing=!1,n&&t&&(s=!1,e(N))},V=()=>{n=!0,s=!0,u.isProcessing||e(N)};return{schedule:km.reduce((F,B)=>{const H=f[B];return F[B]=(J,fe=!1,Ee=!1)=>(n||V(),H.schedule(J,fe,Ee)),F},{}),cancel:F=>{for(let B=0;B<km.length;B++)f[km[B]].cancel(F)},state:u,steps:f}}const{schedule:gn,cancel:wl,state:jr,steps:o_}=_M(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ur,!0),wM=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,dj=1e-7,fj=12;function pj(e,t,n,s,u){let h,f,o=0;do f=t+(n-t)/2,h=wM(f,s,u)-e,h>0?n=f:t=f;while(Math.abs(h)>dj&&++o<fj);return f}function Hf(e,t,n,s){if(e===t&&n===s)return Ur;const u=h=>pj(h,0,1,e,n);return h=>h===0||h===1?h:wM(u(h),t,s)}const bM=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,SM=e=>t=>1-e(1-t),EM=Hf(.33,1.53,.69,.99),H1=SM(EM),TM=bM(H1),CM=e=>(e*=2)<1?.5*H1(e):.5*(2-Math.pow(2,-10*(e-1))),K1=e=>1-Math.sin(Math.acos(e)),PM=SM(K1),AM=bM(K1),kM=e=>/^0[^.\s]+$/u.test(e);function mj(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||kM(e):!0}let gj=Ur,IM=Ur;const MM=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),RM=e=>t=>typeof t=="string"&&t.startsWith(e),DM=RM("--"),yj=RM("var(--"),X1=e=>yj(e)?vj.test(e.split("/*")[0].trim()):!1,vj=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,xj=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function _j(e){const t=xj.exec(e);if(!t)return[,];const[,n,s,u]=t;return[`--${n??s}`,u]}function LM(e,t,n=1){const[s,u]=_j(e);if(!s)return;const h=window.getComputedStyle(t).getPropertyValue(s);if(h){const f=h.trim();return MM(f)?parseFloat(f):f}return X1(u)?LM(u,t,n+1):u}const bl=(e,t,n)=>n>t?t:n<e?e:n,gh={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Lf={...gh,transform:e=>bl(0,1,e)},Im={...gh,default:1},Kf=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Wo=Kf("deg"),Aa=Kf("%"),zt=Kf("px"),wj=Kf("vh"),bj=Kf("vw"),kT={...Aa,parse:e=>Aa.parse(e)/100,transform:e=>Aa.transform(e*100)},Sj=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),IT=e=>e===gh||e===zt,MT=(e,t)=>parseFloat(e.split(", ")[t]),RT=(e,t)=>(n,{transform:s})=>{if(s==="none"||!s)return 0;const u=s.match(/^matrix3d\((.+)\)$/u);if(u)return MT(u[1],t);{const h=s.match(/^matrix\((.+)\)$/u);return h?MT(h[1],e):0}},Ej=new Set(["x","y","z"]),Tj=Wf.filter(e=>!Ej.has(e));function Cj(e){const t=[];return Tj.forEach(n=>{const s=e.getValue(n);s!==void 0&&(t.push([n,s.get()]),s.set(n.startsWith("scale")?1:0))}),t}const th={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:RT(4,13),y:RT(5,14)};th.translateX=th.x;th.translateY=th.y;const zM=e=>t=>t.test(e),Pj={test:e=>e==="auto",parse:e=>e},OM=[gh,zt,Aa,Wo,bj,wj,Pj],DT=e=>OM.find(zM(e)),vu=new Set;let $0=!1,U0=!1;function FM(){if(U0){const e=Array.from(vu).filter(s=>s.needsMeasurement),t=new Set(e.map(s=>s.element)),n=new Map;t.forEach(s=>{const u=Cj(s);u.length&&(n.set(s,u),s.render())}),e.forEach(s=>s.measureInitialState()),t.forEach(s=>{s.render();const u=n.get(s);u&&u.forEach(([h,f])=>{var o;(o=s.getValue(h))===null||o===void 0||o.set(f)})}),e.forEach(s=>s.measureEndState()),e.forEach(s=>{s.suspendedScrollY!==void 0&&window.scrollTo(0,s.suspendedScrollY)})}U0=!1,$0=!1,vu.forEach(e=>e.complete()),vu.clear()}function NM(){vu.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(U0=!0)})}function Aj(){NM(),FM()}class Q1{constructor(t,n,s,u,h,f=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=s,this.motionValue=u,this.element=h,this.isAsync=f}scheduleResolve(){this.isScheduled=!0,this.isAsync?(vu.add(this),$0||($0=!0,gn.read(NM),gn.resolveKeyframes(FM))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:s,motionValue:u}=this;for(let h=0;h<t.length;h++)if(t[h]===null)if(h===0){const f=u==null?void 0:u.get(),o=t[t.length-1];if(f!==void 0)t[0]=f;else if(s&&n){const w=s.readValue(n,o);w!=null&&(t[0]=w)}t[0]===void 0&&(t[0]=o),u&&f===void 0&&u.set(t[0])}else t[h]=t[h-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),vu.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,vu.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const sf=e=>Math.round(e*1e5)/1e5,Y1=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function kj(e){return e==null}const Ij=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,J1=(e,t)=>n=>!!(typeof n=="string"&&Ij.test(n)&&n.startsWith(e)||t&&!kj(n)&&Object.prototype.hasOwnProperty.call(n,t)),BM=(e,t,n)=>s=>{if(typeof s!="string")return s;const[u,h,f,o]=s.match(Y1);return{[e]:parseFloat(u),[t]:parseFloat(h),[n]:parseFloat(f),alpha:o!==void 0?parseFloat(o):1}},Mj=e=>bl(0,255,e),l_={...gh,transform:e=>Math.round(Mj(e))},pu={test:J1("rgb","red"),parse:BM("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:s=1})=>"rgba("+l_.transform(e)+", "+l_.transform(t)+", "+l_.transform(n)+", "+sf(Lf.transform(s))+")"};function Rj(e){let t="",n="",s="",u="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),s=e.substring(5,7),u=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),s=e.substring(3,4),u=e.substring(4,5),t+=t,n+=n,s+=s,u+=u),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(s,16),alpha:u?parseInt(u,16)/255:1}}const q0={test:J1("#"),parse:Rj,transform:pu.transform},Ic={test:J1("hsl","hue"),parse:BM("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:s=1})=>"hsla("+Math.round(e)+", "+Aa.transform(sf(t))+", "+Aa.transform(sf(n))+", "+sf(Lf.transform(s))+")"},ai={test:e=>pu.test(e)||q0.test(e)||Ic.test(e),parse:e=>pu.test(e)?pu.parse(e):Ic.test(e)?Ic.parse(e):q0.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?pu.transform(e):Ic.transform(e)},Dj=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Lj(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(Y1))===null||t===void 0?void 0:t.length)||0)+(((n=e.match(Dj))===null||n===void 0?void 0:n.length)||0)>0}const VM="number",jM="color",zj="var",Oj="var(",LT="${}",Fj=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function zf(e){const t=e.toString(),n=[],s={color:[],number:[],var:[]},u=[];let h=0;const o=t.replace(Fj,w=>(ai.test(w)?(s.color.push(h),u.push(jM),n.push(ai.parse(w))):w.startsWith(Oj)?(s.var.push(h),u.push(zj),n.push(w)):(s.number.push(h),u.push(VM),n.push(parseFloat(w))),++h,LT)).split(LT);return{values:n,split:o,indexes:s,types:u}}function $M(e){return zf(e).values}function UM(e){const{split:t,types:n}=zf(e),s=t.length;return u=>{let h="";for(let f=0;f<s;f++)if(h+=t[f],u[f]!==void 0){const o=n[f];o===VM?h+=sf(u[f]):o===jM?h+=ai.transform(u[f]):h+=u[f]}return h}}const Nj=e=>typeof e=="number"?0:e;function Bj(e){const t=$M(e);return UM(e)(t.map(Nj))}const Sl={test:Lj,parse:$M,createTransformer:UM,getAnimatableNone:Bj},Vj=new Set(["brightness","contrast","saturate","opacity"]);function jj(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[s]=n.match(Y1)||[];if(!s)return e;const u=n.replace(s,"");let h=Vj.has(t)?1:0;return s!==n&&(h*=100),t+"("+h+u+")"}const $j=/\b([a-z-]*)\(.*?\)/gu,G0={...Sl,getAnimatableNone:e=>{const t=e.match($j);return t?t.map(jj).join(" "):e}},Uj={borderWidth:zt,borderTopWidth:zt,borderRightWidth:zt,borderBottomWidth:zt,borderLeftWidth:zt,borderRadius:zt,radius:zt,borderTopLeftRadius:zt,borderTopRightRadius:zt,borderBottomRightRadius:zt,borderBottomLeftRadius:zt,width:zt,maxWidth:zt,height:zt,maxHeight:zt,top:zt,right:zt,bottom:zt,left:zt,padding:zt,paddingTop:zt,paddingRight:zt,paddingBottom:zt,paddingLeft:zt,margin:zt,marginTop:zt,marginRight:zt,marginBottom:zt,marginLeft:zt,backgroundPositionX:zt,backgroundPositionY:zt},qj={rotate:Wo,rotateX:Wo,rotateY:Wo,rotateZ:Wo,scale:Im,scaleX:Im,scaleY:Im,scaleZ:Im,skew:Wo,skewX:Wo,skewY:Wo,distance:zt,translateX:zt,translateY:zt,translateZ:zt,x:zt,y:zt,z:zt,perspective:zt,transformPerspective:zt,opacity:Lf,originX:kT,originY:kT,originZ:zt},zT={...gh,transform:Math.round},eb={...Uj,...qj,zIndex:zT,size:zt,fillOpacity:Lf,strokeOpacity:Lf,numOctaves:zT},Gj={...eb,color:ai,backgroundColor:ai,outlineColor:ai,fill:ai,stroke:ai,borderColor:ai,borderTopColor:ai,borderRightColor:ai,borderBottomColor:ai,borderLeftColor:ai,filter:G0,WebkitFilter:G0},tb=e=>Gj[e];function qM(e,t){let n=tb(e);return n!==G0&&(n=Sl),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const Zj=new Set(["auto","none","0"]);function Wj(e,t,n){let s=0,u;for(;s<e.length&&!u;){const h=e[s];typeof h=="string"&&!Zj.has(h)&&zf(h).values.length&&(u=e[s]),s++}if(u&&n)for(const h of t)e[h]=qM(n,u)}class GM extends Q1{constructor(t,n,s,u,h){super(t,n,s,u,h,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:s}=this;if(!n||!n.current)return;super.readKeyframes();for(let w=0;w<t.length;w++){let b=t[w];if(typeof b=="string"&&(b=b.trim(),X1(b))){const C=LM(b,n.current);C!==void 0&&(t[w]=C),w===t.length-1&&(this.finalKeyframe=b)}}if(this.resolveNoneKeyframes(),!Sj.has(s)||t.length!==2)return;const[u,h]=t,f=DT(u),o=DT(h);if(f!==o)if(IT(f)&&IT(o))for(let w=0;w<t.length;w++){const b=t[w];typeof b=="string"&&(t[w]=parseFloat(b))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,s=[];for(let u=0;u<t.length;u++)mj(t[u])&&s.push(u);s.length&&Wj(t,s,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:s}=this;if(!t||!t.current)return;s==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=th[s](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const u=n[n.length-1];u!==void 0&&t.getValue(s,u).jump(u,!1)}measureEndState(){var t;const{element:n,name:s,unresolvedKeyframes:u}=this;if(!n||!n.current)return;const h=n.getValue(s);h&&h.jump(this.measuredOrigin,!1);const f=u.length-1,o=u[f];u[f]=th[s](n.measureViewportBox(),window.getComputedStyle(n.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),!((t=this.removedTransforms)===null||t===void 0)&&t.length&&this.removedTransforms.forEach(([w,b])=>{n.getValue(w).set(b)}),this.resolveNoneKeyframes()}}function nb(e){return typeof e=="function"}let ng;function Hj(){ng=void 0}const ka={now:()=>(ng===void 0&&ka.set(jr.isProcessing||lj.useManualTiming?jr.timestamp:performance.now()),ng),set:e=>{ng=e,queueMicrotask(Hj)}},OT=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Sl.test(e)||e==="0")&&!e.startsWith("url("));function Kj(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function Xj(e,t,n,s){const u=e[0];if(u===null)return!1;if(t==="display"||t==="visibility")return!0;const h=e[e.length-1],f=OT(u,t),o=OT(h,t);return!f||!o?!1:Kj(e)||(n==="spring"||nb(n))&&s}const Qj=40;class ZM{constructor({autoplay:t=!0,delay:n=0,type:s="keyframes",repeat:u=0,repeatDelay:h=0,repeatType:f="loop",...o}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=ka.now(),this.options={autoplay:t,delay:n,type:s,repeat:u,repeatDelay:h,repeatType:f,...o},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>Qj?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&Aj(),this._resolved}onKeyframesResolved(t,n){this.resolvedAt=ka.now(),this.hasAttemptedResolve=!0;const{name:s,type:u,velocity:h,delay:f,onComplete:o,onUpdate:w,isGenerator:b}=this.options;if(!b&&!Xj(t,s,u,h))if(f)this.options.duration=0;else{w==null||w(nv(t,this.options,n)),o==null||o(),this.resolveFinishedPromise();return}const C=this.initPlayback(t,n);C!==!1&&(this._resolved={keyframes:t,finalKeyframe:n,...C},this.onPostResolved())}onPostResolved(){}then(t,n){return this.currentFinishedPromise.then(t,n)}updateFinishedPromise(){this.currentFinishedPromise=new Promise(t=>{this.resolveFinishedPromise=t})}}function WM(e,t){return t?e*(1e3/t):0}const Yj=5;function HM(e,t,n){const s=Math.max(t-Yj,0);return WM(n-e(s),t-s)}const u_=.001,Jj=.01,FT=10,e$=.05,t$=1;function n$({duration:e=800,bounce:t=.25,velocity:n=0,mass:s=1}){let u,h;gj(e<=Pa(FT));let f=1-t;f=bl(e$,t$,f),e=bl(Jj,FT,lo(e)),f<1?(u=b=>{const C=b*f,A=C*e,M=C-n,N=Z0(b,f),V=Math.exp(-A);return u_-M/N*V},h=b=>{const A=b*f*e,M=A*n+n,N=Math.pow(f,2)*Math.pow(b,2)*e,V=Math.exp(-A),$=Z0(Math.pow(b,2),f);return(-u(b)+u_>0?-1:1)*((M-N)*V)/$}):(u=b=>{const C=Math.exp(-b*e),A=(b-n)*e+1;return-u_+C*A},h=b=>{const C=Math.exp(-b*e),A=(n-b)*(e*e);return C*A});const o=5/e,w=i$(u,h,o);if(e=Pa(e),isNaN(w))return{stiffness:100,damping:10,duration:e};{const b=Math.pow(w,2)*s;return{stiffness:b,damping:f*2*Math.sqrt(s*b),duration:e}}}const r$=12;function i$(e,t,n){let s=n;for(let u=1;u<r$;u++)s=s-e(s)/t(s);return s}function Z0(e,t){return e*Math.sqrt(1-t*t)}const s$=["duration","bounce"],a$=["stiffness","damping","mass"];function NT(e,t){return t.some(n=>e[n]!==void 0)}function o$(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!NT(e,a$)&&NT(e,s$)){const n=n$(e);t={...t,...n,mass:1},t.isResolvedFromDuration=!0}return t}function KM({keyframes:e,restDelta:t,restSpeed:n,...s}){const u=e[0],h=e[e.length-1],f={done:!1,value:u},{stiffness:o,damping:w,mass:b,duration:C,velocity:A,isResolvedFromDuration:M}=o$({...s,velocity:-lo(s.velocity||0)}),N=A||0,V=w/(2*Math.sqrt(o*b)),$=h-u,G=lo(Math.sqrt(o/b)),F=Math.abs($)<5;n||(n=F?.01:2),t||(t=F?.005:.5);let B;if(V<1){const H=Z0(G,V);B=J=>{const fe=Math.exp(-V*G*J);return h-fe*((N+V*G*$)/H*Math.sin(H*J)+$*Math.cos(H*J))}}else if(V===1)B=H=>h-Math.exp(-G*H)*($+(N+G*$)*H);else{const H=G*Math.sqrt(V*V-1);B=J=>{const fe=Math.exp(-V*G*J),Ee=Math.min(H*J,300);return h-fe*((N+V*G*$)*Math.sinh(Ee)+H*$*Math.cosh(Ee))/H}}return{calculatedDuration:M&&C||null,next:H=>{const J=B(H);if(M)f.done=H>=C;else{let fe=0;V<1&&(fe=H===0?Pa(N):HM(B,H,J));const Ee=Math.abs(fe)<=n,Pe=Math.abs(h-J)<=t;f.done=Ee&&Pe}return f.value=f.done?h:J,f}}}function BT({keyframes:e,velocity:t=0,power:n=.8,timeConstant:s=325,bounceDamping:u=10,bounceStiffness:h=500,modifyTarget:f,min:o,max:w,restDelta:b=.5,restSpeed:C}){const A=e[0],M={done:!1,value:A},N=ve=>o!==void 0&&ve<o||w!==void 0&&ve>w,V=ve=>o===void 0?w:w===void 0||Math.abs(o-ve)<Math.abs(w-ve)?o:w;let $=n*t;const G=A+$,F=f===void 0?G:f(G);F!==G&&($=F-A);const B=ve=>-$*Math.exp(-ve/s),H=ve=>F+B(ve),J=ve=>{const Ve=B(ve),Me=H(ve);M.done=Math.abs(Ve)<=b,M.value=M.done?F:Me};let fe,Ee;const Pe=ve=>{N(M.value)&&(fe=ve,Ee=KM({keyframes:[M.value,V(M.value)],velocity:HM(H,ve,M.value),damping:u,stiffness:h,restDelta:b,restSpeed:C}))};return Pe(0),{calculatedDuration:null,next:ve=>{let Ve=!1;return!Ee&&fe===void 0&&(Ve=!0,J(ve),Pe(ve)),fe!==void 0&&ve>=fe?Ee.next(ve-fe):(!Ve&&J(ve),M)}}}const l$=Hf(.42,0,1,1),u$=Hf(0,0,.58,1),XM=Hf(.42,0,.58,1),c$=e=>Array.isArray(e)&&typeof e[0]!="number",rb=e=>Array.isArray(e)&&typeof e[0]=="number",h$={linear:Ur,easeIn:l$,easeInOut:XM,easeOut:u$,circIn:K1,circInOut:AM,circOut:PM,backIn:H1,backInOut:TM,backOut:EM,anticipate:CM},VT=e=>{if(rb(e)){IM(e.length===4);const[t,n,s,u]=e;return Hf(t,n,s,u)}else if(typeof e=="string")return h$[e];return e},d$=(e,t)=>n=>t(e(n)),uo=(...e)=>e.reduce(d$),nh=(e,t,n)=>{const s=t-e;return s===0?1:(n-e)/s},Gn=(e,t,n)=>e+(t-e)*n;function c_(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function f$({hue:e,saturation:t,lightness:n,alpha:s}){e/=360,t/=100,n/=100;let u=0,h=0,f=0;if(!t)u=h=f=n;else{const o=n<.5?n*(1+t):n+t-n*t,w=2*n-o;u=c_(w,o,e+1/3),h=c_(w,o,e),f=c_(w,o,e-1/3)}return{red:Math.round(u*255),green:Math.round(h*255),blue:Math.round(f*255),alpha:s}}function Zg(e,t){return n=>n>0?t:e}const h_=(e,t,n)=>{const s=e*e,u=n*(t*t-s)+s;return u<0?0:Math.sqrt(u)},p$=[q0,pu,Ic],m$=e=>p$.find(t=>t.test(e));function jT(e){const t=m$(e);if(!t)return!1;let n=t.parse(e);return t===Ic&&(n=f$(n)),n}const $T=(e,t)=>{const n=jT(e),s=jT(t);if(!n||!s)return Zg(e,t);const u={...n};return h=>(u.red=h_(n.red,s.red,h),u.green=h_(n.green,s.green,h),u.blue=h_(n.blue,s.blue,h),u.alpha=Gn(n.alpha,s.alpha,h),pu.transform(u))},W0=new Set(["none","hidden"]);function g$(e,t){return W0.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function y$(e,t){return n=>Gn(e,t,n)}function ib(e){return typeof e=="number"?y$:typeof e=="string"?X1(e)?Zg:ai.test(e)?$T:_$:Array.isArray(e)?QM:typeof e=="object"?ai.test(e)?$T:v$:Zg}function QM(e,t){const n=[...e],s=n.length,u=e.map((h,f)=>ib(h)(h,t[f]));return h=>{for(let f=0;f<s;f++)n[f]=u[f](h);return n}}function v$(e,t){const n={...e,...t},s={};for(const u in n)e[u]!==void 0&&t[u]!==void 0&&(s[u]=ib(e[u])(e[u],t[u]));return u=>{for(const h in s)n[h]=s[h](u);return n}}function x$(e,t){var n;const s=[],u={color:0,var:0,number:0};for(let h=0;h<t.values.length;h++){const f=t.types[h],o=e.indexes[f][u[f]],w=(n=e.values[o])!==null&&n!==void 0?n:0;s[h]=w,u[f]++}return s}const _$=(e,t)=>{const n=Sl.createTransformer(t),s=zf(e),u=zf(t);return s.indexes.var.length===u.indexes.var.length&&s.indexes.color.length===u.indexes.color.length&&s.indexes.number.length>=u.indexes.number.length?W0.has(e)&&!u.values.length||W0.has(t)&&!s.values.length?g$(e,t):uo(QM(x$(s,u),u.values),n):Zg(e,t)};function YM(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?Gn(e,t,n):ib(e)(e,t)}function w$(e,t,n){const s=[],u=n||YM,h=e.length-1;for(let f=0;f<h;f++){let o=u(e[f],e[f+1]);if(t){const w=Array.isArray(t)?t[f]||Ur:t;o=uo(w,o)}s.push(o)}return s}function b$(e,t,{clamp:n=!0,ease:s,mixer:u}={}){const h=e.length;if(IM(h===t.length),h===1)return()=>t[0];if(h===2&&e[0]===e[1])return()=>t[1];e[0]>e[h-1]&&(e=[...e].reverse(),t=[...t].reverse());const f=w$(t,s,u),o=f.length,w=b=>{let C=0;if(o>1)for(;C<e.length-2&&!(b<e[C+1]);C++);const A=nh(e[C],e[C+1],b);return f[C](A)};return n?b=>w(bl(e[0],e[h-1],b)):w}function S$(e,t){const n=e[e.length-1];for(let s=1;s<=t;s++){const u=nh(0,t,s);e.push(Gn(n,1,u))}}function E$(e){const t=[0];return S$(t,e.length-1),t}function T$(e,t){return e.map(n=>n*t)}function C$(e,t){return e.map(()=>t||XM).splice(0,e.length-1)}function Wg({duration:e=300,keyframes:t,times:n,ease:s="easeInOut"}){const u=c$(s)?s.map(VT):VT(s),h={done:!1,value:t[0]},f=T$(n&&n.length===t.length?n:E$(t),e),o=b$(f,t,{ease:Array.isArray(u)?u:C$(t,u)});return{calculatedDuration:e,next:w=>(h.value=o(w),h.done=w>=e,h)}}const UT=2e4;function P$(e){let t=0;const n=50;let s=e.next(t);for(;!s.done&&t<UT;)t+=n,s=e.next(t);return t>=UT?1/0:t}const A$=e=>{const t=({timestamp:n})=>e(n);return{start:()=>gn.update(t,!0),stop:()=>wl(t),now:()=>jr.isProcessing?jr.timestamp:ka.now()}},k$={decay:BT,inertia:BT,tween:Wg,keyframes:Wg,spring:KM},I$=e=>e/100;class sb extends ZM{constructor(t){super(t),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:w}=this.options;w&&w()};const{name:n,motionValue:s,element:u,keyframes:h}=this.options,f=(u==null?void 0:u.KeyframeResolver)||Q1,o=(w,b)=>this.onKeyframesResolved(w,b);this.resolver=new f(h,o,n,s,u),this.resolver.scheduleResolve()}initPlayback(t){const{type:n="keyframes",repeat:s=0,repeatDelay:u=0,repeatType:h,velocity:f=0}=this.options,o=nb(n)?n:k$[n]||Wg;let w,b;o!==Wg&&typeof t[0]!="number"&&(w=uo(I$,YM(t[0],t[1])),t=[0,100]);const C=o({...this.options,keyframes:t});h==="mirror"&&(b=o({...this.options,keyframes:[...t].reverse(),velocity:-f})),C.calculatedDuration===null&&(C.calculatedDuration=P$(C));const{calculatedDuration:A}=C,M=A+u,N=M*(s+1)-u;return{generator:C,mirroredGenerator:b,mapPercentToKeyframes:w,calculatedDuration:A,resolvedDuration:M,totalDuration:N}}onPostResolved(){const{autoplay:t=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!t?this.pause():this.state=this.pendingPlayState}tick(t,n=!1){const{resolved:s}=this;if(!s){const{keyframes:ve}=this.options;return{done:!0,value:ve[ve.length-1]}}const{finalKeyframe:u,generator:h,mirroredGenerator:f,mapPercentToKeyframes:o,keyframes:w,calculatedDuration:b,totalDuration:C,resolvedDuration:A}=s;if(this.startTime===null)return h.next(0);const{delay:M,repeat:N,repeatType:V,repeatDelay:$,onUpdate:G}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-C/this.speed,this.startTime)),n?this.currentTime=t:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(t-this.startTime)*this.speed;const F=this.currentTime-M*(this.speed>=0?1:-1),B=this.speed>=0?F<0:F>C;this.currentTime=Math.max(F,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=C);let H=this.currentTime,J=h;if(N){const ve=Math.min(this.currentTime,C)/A;let Ve=Math.floor(ve),Me=ve%1;!Me&&ve>=1&&(Me=1),Me===1&&Ve--,Ve=Math.min(Ve,N+1),!!(Ve%2)&&(V==="reverse"?(Me=1-Me,$&&(Me-=$/A)):V==="mirror"&&(J=f)),H=bl(0,1,Me)*A}const fe=B?{done:!1,value:w[0]}:J.next(H);o&&(fe.value=o(fe.value));let{done:Ee}=fe;!B&&b!==null&&(Ee=this.speed>=0?this.currentTime>=C:this.currentTime<=0);const Pe=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&Ee);return Pe&&u!==void 0&&(fe.value=nv(w,this.options,u)),G&&G(fe.value),Pe&&this.finish(),fe}get duration(){const{resolved:t}=this;return t?lo(t.calculatedDuration):0}get time(){return lo(this.currentTime)}set time(t){t=Pa(t),this.currentTime=t,this.holdTime!==null||this.speed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.speed)}get speed(){return this.playbackSpeed}set speed(t){const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=lo(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:t=A$,onPlay:n,startTime:s}=this.options;this.driver||(this.driver=t(h=>this.tick(h))),n&&n();const u=this.driver.now();this.holdTime!==null?this.startTime=u-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=u):this.startTime=s??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var t;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(t=this.currentTime)!==null&&t!==void 0?t:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:t}=this.options;t&&t()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}}const JM=new Set(["opacity","clipPath","filter","transform"]),M$=10,R$=(e,t)=>{let n="";const s=Math.max(Math.round(t/M$),2);for(let u=0;u<s;u++)n+=e(nh(0,s-1,u))+", ";return`linear(${n.substring(0,n.length-2)})`};function ab(e){let t;return()=>(t===void 0&&(t=e()),t)}const D$={linearEasing:void 0};function L$(e,t){const n=ab(e);return()=>{var s;return(s=D$[t])!==null&&s!==void 0?s:n()}}const Hg=L$(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing");function eR(e){return!!(typeof e=="function"&&Hg()||!e||typeof e=="string"&&(e in H0||Hg())||rb(e)||Array.isArray(e)&&e.every(eR))}const qd=([e,t,n,s])=>`cubic-bezier(${e}, ${t}, ${n}, ${s})`,H0={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:qd([0,.65,.55,1]),circOut:qd([.55,0,1,.45]),backIn:qd([.31,.01,.66,-.59]),backOut:qd([.33,1.53,.69,.99])};function tR(e,t){if(e)return typeof e=="function"&&Hg()?R$(e,t):rb(e)?qd(e):Array.isArray(e)?e.map(n=>tR(n,t)||H0.easeOut):H0[e]}function z$(e,t,n,{delay:s=0,duration:u=300,repeat:h=0,repeatType:f="loop",ease:o,times:w}={}){const b={[t]:n};w&&(b.offset=w);const C=tR(o,u);return Array.isArray(C)&&(b.easing=C),e.animate(b,{delay:s,duration:u,easing:Array.isArray(C)?"linear":C,fill:"both",iterations:h+1,direction:f==="reverse"?"alternate":"normal"})}function qT(e,t){e.timeline=t,e.onfinish=null}const O$=ab(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Kg=10,F$=2e4;function N$(e){return nb(e.type)||e.type==="spring"||!eR(e.ease)}function B$(e,t){const n=new sb({...t,keyframes:e,repeat:0,delay:0,isGenerator:!0});let s={done:!1,value:e[0]};const u=[];let h=0;for(;!s.done&&h<F$;)s=n.sample(h),u.push(s.value),h+=Kg;return{times:void 0,keyframes:u,duration:h-Kg,ease:"linear"}}const nR={anticipate:CM,backInOut:TM,circInOut:AM};function V$(e){return e in nR}class GT extends ZM{constructor(t){super(t);const{name:n,motionValue:s,element:u,keyframes:h}=this.options;this.resolver=new GM(h,(f,o)=>this.onKeyframesResolved(f,o),n,s,u),this.resolver.scheduleResolve()}initPlayback(t,n){var s;let{duration:u=300,times:h,ease:f,type:o,motionValue:w,name:b,startTime:C}=this.options;if(!(!((s=w.owner)===null||s===void 0)&&s.current))return!1;if(typeof f=="string"&&Hg()&&V$(f)&&(f=nR[f]),N$(this.options)){const{onComplete:M,onUpdate:N,motionValue:V,element:$,...G}=this.options,F=B$(t,G);t=F.keyframes,t.length===1&&(t[1]=t[0]),u=F.duration,h=F.times,f=F.ease,o="keyframes"}const A=z$(w.owner.current,b,t,{...this.options,duration:u,times:h,ease:f});return A.startTime=C??this.calcStartTime(),this.pendingTimeline?(qT(A,this.pendingTimeline),this.pendingTimeline=void 0):A.onfinish=()=>{const{onComplete:M}=this.options;w.set(nv(t,this.options,n)),M&&M(),this.cancel(),this.resolveFinishedPromise()},{animation:A,duration:u,times:h,type:o,ease:f,keyframes:t}}get duration(){const{resolved:t}=this;if(!t)return 0;const{duration:n}=t;return lo(n)}get time(){const{resolved:t}=this;if(!t)return 0;const{animation:n}=t;return lo(n.currentTime||0)}set time(t){const{resolved:n}=this;if(!n)return;const{animation:s}=n;s.currentTime=Pa(t)}get speed(){const{resolved:t}=this;if(!t)return 1;const{animation:n}=t;return n.playbackRate}set speed(t){const{resolved:n}=this;if(!n)return;const{animation:s}=n;s.playbackRate=t}get state(){const{resolved:t}=this;if(!t)return"idle";const{animation:n}=t;return n.playState}get startTime(){const{resolved:t}=this;if(!t)return null;const{animation:n}=t;return n.startTime}attachTimeline(t){if(!this._resolved)this.pendingTimeline=t;else{const{resolved:n}=this;if(!n)return Ur;const{animation:s}=n;qT(s,t)}return Ur}play(){if(this.isStopped)return;const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:t}=this;if(!t)return;const{animation:n,keyframes:s,duration:u,type:h,ease:f,times:o}=t;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:b,onUpdate:C,onComplete:A,element:M,...N}=this.options,V=new sb({...N,keyframes:s,duration:u,type:h,ease:f,times:o,isGenerator:!0}),$=Pa(this.time);b.setWithVelocity(V.sample($-Kg).value,V.sample($).value,Kg)}const{onStop:w}=this.options;w&&w(),this.cancel()}complete(){const{resolved:t}=this;t&&t.animation.finish()}cancel(){const{resolved:t}=this;t&&t.animation.cancel()}static supports(t){const{motionValue:n,name:s,repeatDelay:u,repeatType:h,damping:f,type:o}=t;return O$()&&s&&JM.has(s)&&n&&n.owner&&n.owner.current instanceof HTMLElement&&!n.owner.getProps().onUpdate&&!u&&h!=="mirror"&&f!==0&&o!=="inertia"}}const j$=ab(()=>window.ScrollTimeline!==void 0);class $${constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}then(t,n){return Promise.all(this.animations).then(t).catch(n)}getAll(t){return this.animations[0][t]}setAll(t,n){for(let s=0;s<this.animations.length;s++)this.animations[s][t]=n}attachTimeline(t,n){const s=this.animations.map(u=>j$()&&u.attachTimeline?u.attachTimeline(t):n(u));return()=>{s.forEach((u,h)=>{u&&u(),this.animations[h].stop()})}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get startTime(){return this.getAll("startTime")}get duration(){let t=0;for(let n=0;n<this.animations.length;n++)t=Math.max(t,this.animations[n].duration);return t}runAll(t){this.animations.forEach(n=>n[t]())}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}function U$({when:e,delay:t,delayChildren:n,staggerChildren:s,staggerDirection:u,repeat:h,repeatType:f,repeatDelay:o,from:w,elapsed:b,...C}){return!!Object.keys(C).length}const ob=(e,t,n,s={},u,h)=>f=>{const o=W1(s,e)||{},w=o.delay||s.delay||0;let{elapsed:b=0}=s;b=b-Pa(w);let C={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...o,delay:-b,onUpdate:M=>{t.set(M),o.onUpdate&&o.onUpdate(M)},onComplete:()=>{f(),o.onComplete&&o.onComplete()},name:e,motionValue:t,element:h?void 0:u};U$(o)||(C={...C,...oj(e,C)}),C.duration&&(C.duration=Pa(C.duration)),C.repeatDelay&&(C.repeatDelay=Pa(C.repeatDelay)),C.from!==void 0&&(C.keyframes[0]=C.from);let A=!1;if((C.type===!1||C.duration===0&&!C.repeatDelay)&&(C.duration=0,C.delay===0&&(A=!0)),A&&!h&&t.get()!==void 0){const M=nv(C.keyframes,o);if(M!==void 0)return gn.update(()=>{C.onUpdate(M),C.onComplete()}),new $$([])}return!h&&GT.supports(C)?new GT(C):new sb(C)},q$=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),G$=e=>j0(e)?e[e.length-1]||0:e;function lb(e,t){e.indexOf(t)===-1&&e.push(t)}function ub(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class cb{constructor(){this.subscriptions=[]}add(t){return lb(this.subscriptions,t),()=>ub(this.subscriptions,t)}notify(t,n,s){const u=this.subscriptions.length;if(u)if(u===1)this.subscriptions[0](t,n,s);else for(let h=0;h<u;h++){const f=this.subscriptions[h];f&&f(t,n,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ZT=30,Z$=e=>!isNaN(parseFloat(e));class W${constructor(t,n={}){this.version="11.11.8",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(s,u=!0)=>{const h=ka.now();this.updatedAt!==h&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(s),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),u&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=ka.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=Z$(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new cb);const s=this.events[t].add(n);return t==="change"?()=>{s(),gn.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,s){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-s}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=ka.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>ZT)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,ZT);return WM(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Of(e,t){return new W$(e,t)}function H$(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,Of(n))}function K$(e,t){const n=tv(e,t);let{transitionEnd:s={},transition:u={},...h}=n||{};h={...h,...s};for(const f in h){const o=G$(h[f]);H$(e,f,o)}}const rv=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),X$="framerAppearId",rR="data-"+rv(X$);function iR(e){return e.props[rR]}const ui=e=>!!(e&&e.getVelocity);function Q$(e){return!!(ui(e)&&e.add)}function sR(e){if(kl.has(e))return"transform";if(JM.has(e))return rv(e)}function K0(e,t){var n;if(!e.applyWillChange)return;const s=e.getValue("willChange");if(Q$(s))return s.add(t);!(!((n=e.props.style)===null||n===void 0)&&n.willChange)&&sR(t)&&e.setStaticValue("willChange","transform")}function Y$({protectedKeys:e,needsAnimating:t},n){const s=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,s}function aR(e,t,{delay:n=0,transitionOverride:s,type:u}={}){var h;let{transition:f=e.getDefaultTransition(),transitionEnd:o,...w}=t;s&&(f=s);const b=[],C=u&&e.animationState&&e.animationState.getState()[u];for(const A in w){const M=e.getValue(A,(h=e.latestValues[A])!==null&&h!==void 0?h:null),N=w[A];if(N===void 0||C&&Y$(C,A))continue;const V={delay:n,...W1(f||{},A)};let $=!1;if(window.MotionHandoffAnimation){const F=iR(e);if(F){const B=window.MotionHandoffAnimation(F,A,gn);B!==null&&(V.startTime=B,$=!0)}}K0(e,A),M.start(ob(A,M,N,e.shouldReduceMotion&&kl.has(A)?{type:!1}:V,e,$));const G=M.animation;G&&b.push(G)}return o&&Promise.all(b).then(()=>{gn.update(()=>{o&&K$(e,o)})}),b}function X0(e,t,n={}){var s;const u=tv(e,t,n.type==="exit"?(s=e.presenceContext)===null||s===void 0?void 0:s.custom:void 0);let{transition:h=e.getDefaultTransition()||{}}=u||{};n.transitionOverride&&(h=n.transitionOverride);const f=u?()=>Promise.all(aR(e,u,n)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(b=0)=>{const{delayChildren:C=0,staggerChildren:A,staggerDirection:M}=h;return J$(e,t,C+b,A,M,n)}:()=>Promise.resolve(),{when:w}=h;if(w){const[b,C]=w==="beforeChildren"?[f,o]:[o,f];return b().then(()=>C())}else return Promise.all([f(),o(n.delay)])}function J$(e,t,n=0,s=0,u=1,h){const f=[],o=(e.variantChildren.size-1)*s,w=u===1?(b=0)=>b*s:(b=0)=>o-b*s;return Array.from(e.variantChildren).sort(eU).forEach((b,C)=>{b.notify("AnimationStart",t),f.push(X0(b,t,{...h,delay:n+w(C)}).then(()=>b.notify("AnimationComplete",t)))}),Promise.all(f)}function eU(e,t){return e.sortNodePosition(t)}function tU(e,t,n={}){e.notify("AnimationStart",t);let s;if(Array.isArray(t)){const u=t.map(h=>X0(e,h,n));s=Promise.all(u)}else if(typeof t=="string")s=X0(e,t,n);else{const u=typeof t=="function"?tv(e,t,n.custom):t;s=Promise.all(aR(e,u,n))}return s.then(()=>{e.notify("AnimationComplete",t)})}const nU=Z1.length;function oR(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?oR(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<nU;n++){const s=Z1[n],u=e.props[s];(Df(u)||u===!1)&&(t[s]=u)}return t}const rU=[...G1].reverse(),iU=G1.length;function sU(e){return t=>Promise.all(t.map(({animation:n,options:s})=>tU(e,n,s)))}function aU(e){let t=sU(e),n=WT(),s=!0;const u=w=>(b,C)=>{var A;const M=tv(e,C,w==="exit"?(A=e.presenceContext)===null||A===void 0?void 0:A.custom:void 0);if(M){const{transition:N,transitionEnd:V,...$}=M;b={...b,...$,...V}}return b};function h(w){t=w(e)}function f(w){const{props:b}=e,C=oR(e.parent)||{},A=[],M=new Set;let N={},V=1/0;for(let G=0;G<iU;G++){const F=rU[G],B=n[F],H=b[F]!==void 0?b[F]:C[F],J=Df(H),fe=F===w?B.isActive:null;fe===!1&&(V=G);let Ee=H===C[F]&&H!==b[F]&&J;if(Ee&&s&&e.manuallyAnimateOnMount&&(Ee=!1),B.protectedKeys={...N},!B.isActive&&fe===null||!H&&!B.prevProp||Rf(H)||typeof H=="boolean")continue;const Pe=oU(B.prevProp,H);let ve=Pe||F===w&&B.isActive&&!Ee&&J||G>V&&J,Ve=!1;const Me=Array.isArray(H)?H:[H];let pt=Me.reduce(u(F),{});fe===!1&&(pt={});const{prevResolvedValues:qe={}}=B,it={...qe,...pt},ut=je=>{ve=!0,M.has(je)&&(Ve=!0,M.delete(je)),B.needsAnimating[je]=!0;const Re=e.getValue(je);Re&&(Re.liveStyle=!1)};for(const je in it){const Re=pt[je],Ke=qe[je];if(N.hasOwnProperty(je))continue;let ft=!1;j0(Re)&&j0(Ke)?ft=!xM(Re,Ke):ft=Re!==Ke,ft?Re!=null?ut(je):M.add(je):Re!==void 0&&M.has(je)?ut(je):B.protectedKeys[je]=!0}B.prevProp=H,B.prevResolvedValues=pt,B.isActive&&(N={...N,...pt}),s&&e.blockInitialAnimation&&(ve=!1),ve&&(!(Ee&&Pe)||Ve)&&A.push(...Me.map(je=>({animation:je,options:{type:F}})))}if(M.size){const G={};M.forEach(F=>{const B=e.getBaseTarget(F),H=e.getValue(F);H&&(H.liveStyle=!0),G[F]=B??null}),A.push({animation:G})}let $=!!A.length;return s&&(b.initial===!1||b.initial===b.animate)&&!e.manuallyAnimateOnMount&&($=!1),s=!1,$?t(A):Promise.resolve()}function o(w,b){var C;if(n[w].isActive===b)return Promise.resolve();(C=e.variantChildren)===null||C===void 0||C.forEach(M=>{var N;return(N=M.animationState)===null||N===void 0?void 0:N.setActive(w,b)}),n[w].isActive=b;const A=f(w);for(const M in n)n[M].protectedKeys={};return A}return{animateChanges:f,setActive:o,setAnimateFunction:h,getState:()=>n,reset:()=>{n=WT(),s=!0}}}function oU(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!xM(t,e):!1}function Yl(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function WT(){return{animate:Yl(!0),whileInView:Yl(),whileHover:Yl(),whileTap:Yl(),whileDrag:Yl(),whileFocus:Yl(),exit:Yl()}}class Il{constructor(t){this.isMounted=!1,this.node=t}update(){}}class lU extends Il{constructor(t){super(t),t.animationState||(t.animationState=aU(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Rf(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)===null||t===void 0||t.call(this)}}let uU=0;class cU extends Il{constructor(){super(...arguments),this.id=uU++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===s)return;const u=this.node.animationState.setActive("exit",!t);n&&!t&&u.then(()=>n(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const hU={animation:{Feature:lU},exit:{Feature:cU}},lR=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function iv(e,t="page"){return{point:{x:e[`${t}X`],y:e[`${t}Y`]}}}const dU=e=>t=>lR(t)&&e(t,iv(t));function ao(e,t,n,s={passive:!0}){return e.addEventListener(t,n,s),()=>e.removeEventListener(t,n)}function co(e,t,n,s){return ao(e,t,dU(n),s)}const HT=(e,t)=>Math.abs(e-t);function fU(e,t){const n=HT(e.x,t.x),s=HT(e.y,t.y);return Math.sqrt(n**2+s**2)}class uR{constructor(t,n,{transformPagePoint:s,contextWindow:u,dragSnapToOrigin:h=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const A=f_(this.lastMoveEventInfo,this.history),M=this.startEvent!==null,N=fU(A.offset,{x:0,y:0})>=3;if(!M&&!N)return;const{point:V}=A,{timestamp:$}=jr;this.history.push({...V,timestamp:$});const{onStart:G,onMove:F}=this.handlers;M||(G&&G(this.lastMoveEvent,A),this.startEvent=this.lastMoveEvent),F&&F(this.lastMoveEvent,A)},this.handlePointerMove=(A,M)=>{this.lastMoveEvent=A,this.lastMoveEventInfo=d_(M,this.transformPagePoint),gn.update(this.updatePoint,!0)},this.handlePointerUp=(A,M)=>{this.end();const{onEnd:N,onSessionEnd:V,resumeAnimation:$}=this.handlers;if(this.dragSnapToOrigin&&$&&$(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const G=f_(A.type==="pointercancel"?this.lastMoveEventInfo:d_(M,this.transformPagePoint),this.history);this.startEvent&&N&&N(A,G),V&&V(A,G)},!lR(t))return;this.dragSnapToOrigin=h,this.handlers=n,this.transformPagePoint=s,this.contextWindow=u||window;const f=iv(t),o=d_(f,this.transformPagePoint),{point:w}=o,{timestamp:b}=jr;this.history=[{...w,timestamp:b}];const{onSessionStart:C}=n;C&&C(t,f_(o,this.history)),this.removeListeners=uo(co(this.contextWindow,"pointermove",this.handlePointerMove),co(this.contextWindow,"pointerup",this.handlePointerUp),co(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),wl(this.updatePoint)}}function d_(e,t){return t?{point:t(e.point)}:e}function KT(e,t){return{x:e.x-t.x,y:e.y-t.y}}function f_({point:e},t){return{point:e,delta:KT(e,cR(t)),offset:KT(e,pU(t)),velocity:mU(t,.1)}}function pU(e){return e[0]}function cR(e){return e[e.length-1]}function mU(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,s=null;const u=cR(e);for(;n>=0&&(s=e[n],!(u.timestamp-s.timestamp>Pa(t)));)n--;if(!s)return{x:0,y:0};const h=lo(u.timestamp-s.timestamp);if(h===0)return{x:0,y:0};const f={x:(u.x-s.x)/h,y:(u.y-s.y)/h};return f.x===1/0&&(f.x=0),f.y===1/0&&(f.y=0),f}function hR(e){let t=null;return()=>{const n=()=>{t=null};return t===null?(t=e,n):!1}}const XT=hR("dragHorizontal"),QT=hR("dragVertical");function dR(e){let t=!1;if(e==="y")t=QT();else if(e==="x")t=XT();else{const n=XT(),s=QT();n&&s?t=()=>{n(),s()}:(n&&n(),s&&s())}return t}function fR(){const e=dR(!0);return e?(e(),!1):!0}function Mc(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}const pR=1e-4,gU=1-pR,yU=1+pR,mR=.01,vU=0-mR,xU=0+mR;function as(e){return e.max-e.min}function _U(e,t,n){return Math.abs(e-t)<=n}function YT(e,t,n,s=.5){e.origin=s,e.originPoint=Gn(t.min,t.max,e.origin),e.scale=as(n)/as(t),e.translate=Gn(n.min,n.max,e.origin)-e.originPoint,(e.scale>=gU&&e.scale<=yU||isNaN(e.scale))&&(e.scale=1),(e.translate>=vU&&e.translate<=xU||isNaN(e.translate))&&(e.translate=0)}function af(e,t,n,s){YT(e.x,t.x,n.x,s?s.originX:void 0),YT(e.y,t.y,n.y,s?s.originY:void 0)}function JT(e,t,n){e.min=n.min+t.min,e.max=e.min+as(t)}function wU(e,t,n){JT(e.x,t.x,n.x),JT(e.y,t.y,n.y)}function eC(e,t,n){e.min=t.min-n.min,e.max=e.min+as(t)}function of(e,t,n){eC(e.x,t.x,n.x),eC(e.y,t.y,n.y)}function bU(e,{min:t,max:n},s){return t!==void 0&&e<t?e=s?Gn(t,e,s.min):Math.max(e,t):n!==void 0&&e>n&&(e=s?Gn(n,e,s.max):Math.min(e,n)),e}function tC(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function SU(e,{top:t,left:n,bottom:s,right:u}){return{x:tC(e.x,n,u),y:tC(e.y,t,s)}}function nC(e,t){let n=t.min-e.min,s=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,s]=[s,n]),{min:n,max:s}}function EU(e,t){return{x:nC(e.x,t.x),y:nC(e.y,t.y)}}function TU(e,t){let n=.5;const s=as(e),u=as(t);return u>s?n=nh(t.min,t.max-s,e.min):s>u&&(n=nh(e.min,e.max-u,t.min)),bl(0,1,n)}function CU(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const Q0=.35;function PU(e=Q0){return e===!1?e=0:e===!0&&(e=Q0),{x:rC(e,"left","right"),y:rC(e,"top","bottom")}}function rC(e,t,n){return{min:iC(e,t),max:iC(e,n)}}function iC(e,t){return typeof e=="number"?e:e[t]||0}const sC=()=>({translate:0,scale:1,origin:0,originPoint:0}),Rc=()=>({x:sC(),y:sC()}),aC=()=>({min:0,max:0}),lr=()=>({x:aC(),y:aC()});function Ss(e){return[e("x"),e("y")]}function gR({top:e,left:t,right:n,bottom:s}){return{x:{min:t,max:n},y:{min:e,max:s}}}function AU({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function kU(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),s=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:s.y,right:s.x}}function p_(e){return e===void 0||e===1}function Y0({scale:e,scaleX:t,scaleY:n}){return!p_(e)||!p_(t)||!p_(n)}function nu(e){return Y0(e)||yR(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function yR(e){return oC(e.x)||oC(e.y)}function oC(e){return e&&e!=="0%"}function Xg(e,t,n){const s=e-n,u=t*s;return n+u}function lC(e,t,n,s,u){return u!==void 0&&(e=Xg(e,u,s)),Xg(e,n,s)+t}function J0(e,t=0,n=1,s,u){e.min=lC(e.min,t,n,s,u),e.max=lC(e.max,t,n,s,u)}function vR(e,{x:t,y:n}){J0(e.x,t.translate,t.scale,t.originPoint),J0(e.y,n.translate,n.scale,n.originPoint)}const uC=.999999999999,cC=1.0000000000001;function IU(e,t,n,s=!1){const u=n.length;if(!u)return;t.x=t.y=1;let h,f;for(let o=0;o<u;o++){h=n[o],f=h.projectionDelta;const{visualElement:w}=h.options;w&&w.props.style&&w.props.style.display==="contents"||(s&&h.options.layoutScroll&&h.scroll&&h!==h.root&&Lc(e,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),f&&(t.x*=f.x.scale,t.y*=f.y.scale,vR(e,f)),s&&nu(h.latestValues)&&Lc(e,h.latestValues))}t.x<cC&&t.x>uC&&(t.x=1),t.y<cC&&t.y>uC&&(t.y=1)}function Dc(e,t){e.min=e.min+t,e.max=e.max+t}function hC(e,t,n,s,u=.5){const h=Gn(e.min,e.max,u);J0(e,t,n,h,s)}function Lc(e,t){hC(e.x,t.x,t.scaleX,t.scale,t.originX),hC(e.y,t.y,t.scaleY,t.scale,t.originY)}function xR(e,t){return gR(kU(e.getBoundingClientRect(),t))}function MU(e,t,n){const s=xR(e,n),{scroll:u}=t;return u&&(Dc(s.x,u.offset.x),Dc(s.y,u.offset.y)),s}const _R=({current:e})=>e?e.ownerDocument.defaultView:null,RU=new WeakMap;class DU{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=lr(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const u=C=>{const{dragSnapToOrigin:A}=this.getProps();A?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(iv(C,"page").point)},h=(C,A)=>{const{drag:M,dragPropagation:N,onDragStart:V}=this.getProps();if(M&&!N&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=dR(M),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ss(G=>{let F=this.getAxisMotionValue(G).get()||0;if(Aa.test(F)){const{projection:B}=this.visualElement;if(B&&B.layout){const H=B.layout.layoutBox[G];H&&(F=as(H)*(parseFloat(F)/100))}}this.originPoint[G]=F}),V&&gn.postRender(()=>V(C,A)),K0(this.visualElement,"transform");const{animationState:$}=this.visualElement;$&&$.setActive("whileDrag",!0)},f=(C,A)=>{const{dragPropagation:M,dragDirectionLock:N,onDirectionLock:V,onDrag:$}=this.getProps();if(!M&&!this.openGlobalLock)return;const{offset:G}=A;if(N&&this.currentDirection===null){this.currentDirection=LU(G),this.currentDirection!==null&&V&&V(this.currentDirection);return}this.updateAxis("x",A.point,G),this.updateAxis("y",A.point,G),this.visualElement.render(),$&&$(C,A)},o=(C,A)=>this.stop(C,A),w=()=>Ss(C=>{var A;return this.getAnimationState(C)==="paused"&&((A=this.getAxisMotionValue(C).animation)===null||A===void 0?void 0:A.play())}),{dragSnapToOrigin:b}=this.getProps();this.panSession=new uR(t,{onSessionStart:u,onStart:h,onMove:f,onSessionEnd:o,resumeAnimation:w},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:b,contextWindow:_R(this.visualElement)})}stop(t,n){const s=this.isDragging;if(this.cancel(),!s)return;const{velocity:u}=n;this.startAnimation(u);const{onDragEnd:h}=this.getProps();h&&gn.postRender(()=>h(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,s){const{drag:u}=this.getProps();if(!s||!Mm(t,u,this.currentDirection))return;const h=this.getAxisMotionValue(t);let f=this.originPoint[t]+s[t];this.constraints&&this.constraints[t]&&(f=bU(f,this.constraints[t],this.elastic[t])),h.set(f)}resolveConstraints(){var t;const{dragConstraints:n,dragElastic:s}=this.getProps(),u=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,h=this.constraints;n&&Mc(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&u?this.constraints=SU(u.layoutBox,n):this.constraints=!1,this.elastic=PU(s),h!==this.constraints&&u&&this.constraints&&!this.hasMutatedConstraints&&Ss(f=>{this.constraints!==!1&&this.getAxisMotionValue(f)&&(this.constraints[f]=CU(u.layoutBox[f],this.constraints[f]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!Mc(t))return!1;const s=t.current,{projection:u}=this.visualElement;if(!u||!u.layout)return!1;const h=MU(s,u.root,this.visualElement.getTransformPagePoint());let f=EU(u.layout.layoutBox,h);if(n){const o=n(AU(f));this.hasMutatedConstraints=!!o,o&&(f=gR(o))}return f}startAnimation(t){const{drag:n,dragMomentum:s,dragElastic:u,dragTransition:h,dragSnapToOrigin:f,onDragTransitionEnd:o}=this.getProps(),w=this.constraints||{},b=Ss(C=>{if(!Mm(C,n,this.currentDirection))return;let A=w&&w[C]||{};f&&(A={min:0,max:0});const M=u?200:1e6,N=u?40:1e7,V={type:"inertia",velocity:s?t[C]:0,bounceStiffness:M,bounceDamping:N,timeConstant:750,restDelta:1,restSpeed:10,...h,...A};return this.startAxisValueAnimation(C,V)});return Promise.all(b).then(o)}startAxisValueAnimation(t,n){const s=this.getAxisMotionValue(t);return K0(this.visualElement,t),s.start(ob(t,s,0,n,this.visualElement,!1))}stopAnimation(){Ss(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Ss(t=>{var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,s=this.visualElement.getProps(),u=s[n];return u||this.visualElement.getValue(t,(s.initial?s.initial[t]:void 0)||0)}snapToCursor(t){Ss(n=>{const{drag:s}=this.getProps();if(!Mm(n,s,this.currentDirection))return;const{projection:u}=this.visualElement,h=this.getAxisMotionValue(n);if(u&&u.layout){const{min:f,max:o}=u.layout.layoutBox[n];h.set(t[n]-Gn(f,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:s}=this.visualElement;if(!Mc(n)||!s||!this.constraints)return;this.stopAnimation();const u={x:0,y:0};Ss(f=>{const o=this.getAxisMotionValue(f);if(o&&this.constraints!==!1){const w=o.get();u[f]=TU({min:w,max:w},this.constraints[f])}});const{transformTemplate:h}=this.visualElement.getProps();this.visualElement.current.style.transform=h?h({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),Ss(f=>{if(!Mm(f,t,null))return;const o=this.getAxisMotionValue(f),{min:w,max:b}=this.constraints[f];o.set(Gn(w,b,u[f]))})}addListeners(){if(!this.visualElement.current)return;RU.set(this.visualElement,this);const t=this.visualElement.current,n=co(t,"pointerdown",w=>{const{drag:b,dragListener:C=!0}=this.getProps();b&&C&&this.start(w)}),s=()=>{const{dragConstraints:w}=this.getProps();Mc(w)&&w.current&&(this.constraints=this.resolveRefConstraints())},{projection:u}=this.visualElement,h=u.addEventListener("measure",s);u&&!u.layout&&(u.root&&u.root.updateScroll(),u.updateLayout()),gn.read(s);const f=ao(window,"resize",()=>this.scalePositionWithinConstraints()),o=u.addEventListener("didUpdate",({delta:w,hasLayoutChanged:b})=>{this.isDragging&&b&&(Ss(C=>{const A=this.getAxisMotionValue(C);A&&(this.originPoint[C]+=w[C].translate,A.set(A.get()+w[C].translate))}),this.visualElement.render())});return()=>{f(),n(),h(),o&&o()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:s=!1,dragPropagation:u=!1,dragConstraints:h=!1,dragElastic:f=Q0,dragMomentum:o=!0}=t;return{...t,drag:n,dragDirectionLock:s,dragPropagation:u,dragConstraints:h,dragElastic:f,dragMomentum:o}}}function Mm(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function LU(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class zU extends Il{constructor(t){super(t),this.removeGroupControls=Ur,this.removeListeners=Ur,this.controls=new DU(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ur}unmount(){this.removeGroupControls(),this.removeListeners()}}const dC=e=>(t,n)=>{e&&gn.postRender(()=>e(t,n))};class OU extends Il{constructor(){super(...arguments),this.removePointerDownListener=Ur}onPointerDown(t){this.session=new uR(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:_R(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:s,onPanEnd:u}=this.node.getProps();return{onSessionStart:dC(t),onStart:dC(n),onMove:s,onEnd:(h,f)=>{delete this.session,u&&gn.postRender(()=>u(h,f))}}}mount(){this.removePointerDownListener=co(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const hb=Q.createContext(null);function FU(){const e=Q.useContext(hb);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:n,register:s}=e,u=Q.useId();Q.useEffect(()=>s(u),[]);const h=Q.useCallback(()=>n&&n(u),[u,n]);return!t&&n?[!1,h]:[!0]}const wR=Q.createContext({}),bR=Q.createContext({}),rg={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function fC(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Ld={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(zt.test(e))e=parseFloat(e);else return e;const n=fC(e,t.target.x),s=fC(e,t.target.y);return`${n}% ${s}%`}},NU={correct:(e,{treeScale:t,projectionDelta:n})=>{const s=e,u=Sl.parse(e);if(u.length>5)return s;const h=Sl.createTransformer(e),f=typeof u[0]!="number"?1:0,o=n.x.scale*t.x,w=n.y.scale*t.y;u[0+f]/=o,u[1+f]/=w;const b=Gn(o,w,.5);return typeof u[2+f]=="number"&&(u[2+f]/=b),typeof u[3+f]=="number"&&(u[3+f]/=b),h(u)}},Qg={};function BU(e){Object.assign(Qg,e)}const{schedule:db,cancel:CZ}=_M(queueMicrotask,!1);class VU extends Q.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:s,layoutId:u}=this.props,{projection:h}=t;BU(jU),h&&(n.group&&n.group.add(h),s&&s.register&&u&&s.register(h),h.root.didUpdate(),h.addEventListener("animationComplete",()=>{this.safeToRemove()}),h.setOptions({...h.options,onExitComplete:()=>this.safeToRemove()})),rg.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:s,drag:u,isPresent:h}=this.props,f=s.projection;return f&&(f.isPresent=h,u||t.layoutDependency!==n||n===void 0?f.willUpdate():this.safeToRemove(),t.isPresent!==h&&(h?f.promote():f.relegate()||gn.postRender(()=>{const o=f.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),db.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:s}=this.props,{projection:u}=t;u&&(u.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(u),s&&s.deregister&&s.deregister(u))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function SR(e){const[t,n]=FU(),s=Q.useContext(wR);return K(VU,{...e,layoutGroup:s,switchLayoutGroup:Q.useContext(bR),isPresent:t,safeToRemove:n})}const jU={borderRadius:{...Ld,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ld,borderTopRightRadius:Ld,borderBottomLeftRadius:Ld,borderBottomRightRadius:Ld,boxShadow:NU},ER=["TopLeft","TopRight","BottomLeft","BottomRight"],$U=ER.length,pC=e=>typeof e=="string"?parseFloat(e):e,mC=e=>typeof e=="number"||zt.test(e);function UU(e,t,n,s,u,h){u?(e.opacity=Gn(0,n.opacity!==void 0?n.opacity:1,qU(s)),e.opacityExit=Gn(t.opacity!==void 0?t.opacity:1,0,GU(s))):h&&(e.opacity=Gn(t.opacity!==void 0?t.opacity:1,n.opacity!==void 0?n.opacity:1,s));for(let f=0;f<$U;f++){const o=`border${ER[f]}Radius`;let w=gC(t,o),b=gC(n,o);if(w===void 0&&b===void 0)continue;w||(w=0),b||(b=0),w===0||b===0||mC(w)===mC(b)?(e[o]=Math.max(Gn(pC(w),pC(b),s),0),(Aa.test(b)||Aa.test(w))&&(e[o]+="%")):e[o]=b}(t.rotate||n.rotate)&&(e.rotate=Gn(t.rotate||0,n.rotate||0,s))}function gC(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const qU=TR(0,.5,PM),GU=TR(.5,.95,Ur);function TR(e,t,n){return s=>s<e?0:s>t?1:n(nh(e,t,s))}function yC(e,t){e.min=t.min,e.max=t.max}function ws(e,t){yC(e.x,t.x),yC(e.y,t.y)}function vC(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function xC(e,t,n,s,u){return e-=t,e=Xg(e,1/n,s),u!==void 0&&(e=Xg(e,1/u,s)),e}function ZU(e,t=0,n=1,s=.5,u,h=e,f=e){if(Aa.test(t)&&(t=parseFloat(t),t=Gn(f.min,f.max,t/100)-f.min),typeof t!="number")return;let o=Gn(h.min,h.max,s);e===h&&(o-=t),e.min=xC(e.min,t,n,o,u),e.max=xC(e.max,t,n,o,u)}function _C(e,t,[n,s,u],h,f){ZU(e,t[n],t[s],t[u],t.scale,h,f)}const WU=["x","scaleX","originX"],HU=["y","scaleY","originY"];function wC(e,t,n,s){_C(e.x,t,WU,n?n.x:void 0,s?s.x:void 0),_C(e.y,t,HU,n?n.y:void 0,s?s.y:void 0)}function bC(e){return e.translate===0&&e.scale===1}function CR(e){return bC(e.x)&&bC(e.y)}function SC(e,t){return e.min===t.min&&e.max===t.max}function KU(e,t){return SC(e.x,t.x)&&SC(e.y,t.y)}function EC(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function PR(e,t){return EC(e.x,t.x)&&EC(e.y,t.y)}function TC(e){return as(e.x)/as(e.y)}function CC(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class XU{constructor(){this.members=[]}add(t){lb(this.members,t),t.scheduleRender()}remove(t){if(ub(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(u=>t===u);if(n===0)return!1;let s;for(let u=n;u>=0;u--){const h=this.members[u];if(h.isPresent!==!1){s=h;break}}return s?(this.promote(s),!0):!1}promote(t,n){const s=this.lead;if(t!==s&&(this.prevLead=s,this.lead=t,t.show(),s)){s.instance&&s.scheduleRender(),t.scheduleRender(),t.resumeFrom=s,n&&(t.resumeFrom.preserveOpacity=!0),s.snapshot&&(t.snapshot=s.snapshot,t.snapshot.latestValues=s.animationValues||s.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:u}=t.options;u===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:s}=t;n.onExitComplete&&n.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function QU(e,t,n){let s="";const u=e.x.translate/t.x,h=e.y.translate/t.y,f=(n==null?void 0:n.z)||0;if((u||h||f)&&(s=`translate3d(${u}px, ${h}px, ${f}px) `),(t.x!==1||t.y!==1)&&(s+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:b,rotate:C,rotateX:A,rotateY:M,skewX:N,skewY:V}=n;b&&(s=`perspective(${b}px) ${s}`),C&&(s+=`rotate(${C}deg) `),A&&(s+=`rotateX(${A}deg) `),M&&(s+=`rotateY(${M}deg) `),N&&(s+=`skewX(${N}deg) `),V&&(s+=`skewY(${V}deg) `)}const o=e.x.scale*t.x,w=e.y.scale*t.y;return(o!==1||w!==1)&&(s+=`scale(${o}, ${w})`),s||"none"}const YU=(e,t)=>e.depth-t.depth;class JU{constructor(){this.children=[],this.isDirty=!1}add(t){lb(this.children,t),this.isDirty=!0}remove(t){ub(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(YU),this.isDirty=!1,this.children.forEach(t)}}function ig(e){const t=ui(e)?e.get():e;return q$(t)?t.toValue():t}function e8(e,t){const n=ka.now(),s=({timestamp:u})=>{const h=u-n;h>=t&&(wl(s),e(h-t))};return gn.read(s,!0),()=>wl(s)}function t8(e){return e instanceof SVGElement&&e.tagName!=="svg"}function n8(e,t,n){const s=ui(e)?e:Of(e);return s.start(ob("",s,t,n)),s.animation}const ru={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Gd=typeof window<"u"&&window.MotionDebug!==void 0,m_=["","X","Y","Z"],r8={visibility:"hidden"},PC=1e3;let i8=0;function g_(e,t,n,s){const{latestValues:u}=t;u[e]&&(n[e]=u[e],t.setStaticValue(e,0),s&&(s[e]=0))}function AR(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=iR(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:u,layoutId:h}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",gn,!(u||h))}const{parent:s}=e;s&&!s.hasCheckedOptimisedAppear&&AR(s)}function kR({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:s,resetTransform:u}){return class{constructor(f={},o=t==null?void 0:t()){this.id=i8++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Gd&&(ru.totalNodes=ru.resolvedTargetDeltas=ru.recalculatedProjection=0),this.nodes.forEach(o8),this.nodes.forEach(d8),this.nodes.forEach(f8),this.nodes.forEach(l8),Gd&&window.MotionDebug.record(ru)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=f,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let w=0;w<this.path.length;w++)this.path[w].shouldResetTransform=!0;this.root===this&&(this.nodes=new JU)}addEventListener(f,o){return this.eventHandlers.has(f)||this.eventHandlers.set(f,new cb),this.eventHandlers.get(f).add(o)}notifyListeners(f,...o){const w=this.eventHandlers.get(f);w&&w.notify(...o)}hasListeners(f){return this.eventHandlers.has(f)}mount(f,o=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=t8(f),this.instance=f;const{layoutId:w,layout:b,visualElement:C}=this.options;if(C&&!C.current&&C.mount(f),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),o&&(b||w)&&(this.isLayoutDirty=!0),e){let A;const M=()=>this.root.updateBlockedByResize=!1;e(f,()=>{this.root.updateBlockedByResize=!0,A&&A(),A=e8(M,250),rg.hasAnimatedSinceResize&&(rg.hasAnimatedSinceResize=!1,this.nodes.forEach(kC))})}w&&this.root.registerSharedNode(w,this),this.options.animate!==!1&&C&&(w||b)&&this.addEventListener("didUpdate",({delta:A,hasLayoutChanged:M,hasRelativeTargetChanged:N,layout:V})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const $=this.options.transition||C.getDefaultTransition()||v8,{onLayoutAnimationStart:G,onLayoutAnimationComplete:F}=C.getProps(),B=!this.targetLayout||!PR(this.targetLayout,V)||N,H=!M&&N;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||H||M&&(B||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(A,H);const J={...W1($,"layout"),onPlay:G,onComplete:F};(C.shouldReduceMotion||this.options.layoutRoot)&&(J.delay=0,J.type=!1),this.startAnimation(J)}else M||kC(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=V})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const f=this.getStack();f&&f.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,wl(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(p8),this.animationId++)}getTransformTemplate(){const{visualElement:f}=this.options;return f&&f.getProps().transformTemplate}willUpdate(f=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&AR(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let C=0;C<this.path.length;C++){const A=this.path[C];A.shouldResetTransform=!0,A.updateScroll("snapshot"),A.options.layoutRoot&&A.willUpdate(!1)}const{layoutId:o,layout:w}=this.options;if(o===void 0&&!w)return;const b=this.getTransformTemplate();this.prevTransformTemplateValue=b?b(this.latestValues,""):void 0,this.updateSnapshot(),f&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(AC);return}this.isUpdating||this.nodes.forEach(c8),this.isUpdating=!1,this.nodes.forEach(h8),this.nodes.forEach(s8),this.nodes.forEach(a8),this.clearAllSnapshots();const o=ka.now();jr.delta=bl(0,1e3/60,o-jr.timestamp),jr.timestamp=o,jr.isProcessing=!0,o_.update.process(jr),o_.preRender.process(jr),o_.render.process(jr),jr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,db.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(u8),this.sharedNodes.forEach(m8)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,gn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){gn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let w=0;w<this.path.length;w++)this.path[w].updateScroll();const f=this.layout;this.layout=this.measure(!1),this.layoutCorrected=lr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,f?f.layoutBox:void 0)}updateScroll(f="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===f&&(o=!1),o){const w=s(this.instance);this.scroll={animationId:this.root.animationId,phase:f,isRoot:w,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:w}}}resetTransform(){if(!u)return;const f=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!CR(this.projectionDelta),w=this.getTransformTemplate(),b=w?w(this.latestValues,""):void 0,C=b!==this.prevTransformTemplateValue;f&&(o||nu(this.latestValues)||C)&&(u(this.instance,b),this.shouldResetTransform=!1,this.scheduleRender())}measure(f=!0){const o=this.measurePageBox();let w=this.removeElementScroll(o);return f&&(w=this.removeTransform(w)),x8(w),{animationId:this.root.animationId,measuredBox:o,layoutBox:w,latestValues:{},source:this.id}}measurePageBox(){var f;const{visualElement:o}=this.options;if(!o)return lr();const w=o.measureViewportBox();if(!(((f=this.scroll)===null||f===void 0?void 0:f.wasRoot)||this.path.some(_8))){const{scroll:C}=this.root;C&&(Dc(w.x,C.offset.x),Dc(w.y,C.offset.y))}return w}removeElementScroll(f){var o;const w=lr();if(ws(w,f),!((o=this.scroll)===null||o===void 0)&&o.wasRoot)return w;for(let b=0;b<this.path.length;b++){const C=this.path[b],{scroll:A,options:M}=C;C!==this.root&&A&&M.layoutScroll&&(A.wasRoot&&ws(w,f),Dc(w.x,A.offset.x),Dc(w.y,A.offset.y))}return w}applyTransform(f,o=!1){const w=lr();ws(w,f);for(let b=0;b<this.path.length;b++){const C=this.path[b];!o&&C.options.layoutScroll&&C.scroll&&C!==C.root&&Lc(w,{x:-C.scroll.offset.x,y:-C.scroll.offset.y}),nu(C.latestValues)&&Lc(w,C.latestValues)}return nu(this.latestValues)&&Lc(w,this.latestValues),w}removeTransform(f){const o=lr();ws(o,f);for(let w=0;w<this.path.length;w++){const b=this.path[w];if(!b.instance||!nu(b.latestValues))continue;Y0(b.latestValues)&&b.updateSnapshot();const C=lr(),A=b.measurePageBox();ws(C,A),wC(o,b.latestValues,b.snapshot?b.snapshot.layoutBox:void 0,C)}return nu(this.latestValues)&&wC(o,this.latestValues),o}setTargetDelta(f){this.targetDelta=f,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(f){this.options={...this.options,...f,crossfade:f.crossfade!==void 0?f.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==jr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(f=!1){var o;const w=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=w.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=w.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=w.isSharedProjectionDirty);const b=!!this.resumingFrom||this!==w;if(!(f||b&&this.isSharedProjectionDirty||this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:A,layoutId:M}=this.options;if(!(!this.layout||!(A||M))){if(this.resolvedRelativeTargetAt=jr.timestamp,!this.targetDelta&&!this.relativeTarget){const N=this.getClosestProjectingParent();N&&N.layout&&this.animationProgress!==1?(this.relativeParent=N,this.forceRelativeParentToResolveTarget(),this.relativeTarget=lr(),this.relativeTargetOrigin=lr(),of(this.relativeTargetOrigin,this.layout.layoutBox,N.layout.layoutBox),ws(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=lr(),this.targetWithTransforms=lr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),wU(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ws(this.target,this.layout.layoutBox),vR(this.target,this.targetDelta)):ws(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const N=this.getClosestProjectingParent();N&&!!N.resumingFrom==!!this.resumingFrom&&!N.options.layoutScroll&&N.target&&this.animationProgress!==1?(this.relativeParent=N,this.forceRelativeParentToResolveTarget(),this.relativeTarget=lr(),this.relativeTargetOrigin=lr(),of(this.relativeTargetOrigin,this.target,N.target),ws(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Gd&&ru.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Y0(this.parent.latestValues)||yR(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var f;const o=this.getLead(),w=!!this.resumingFrom||this!==o;let b=!0;if((this.isProjectionDirty||!((f=this.parent)===null||f===void 0)&&f.isProjectionDirty)&&(b=!1),w&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(b=!1),this.resolvedRelativeTargetAt===jr.timestamp&&(b=!1),b)return;const{layout:C,layoutId:A}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(C||A))return;ws(this.layoutCorrected,this.layout.layoutBox);const M=this.treeScale.x,N=this.treeScale.y;IU(this.layoutCorrected,this.treeScale,this.path,w),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=lr());const{target:V}=o;if(!V){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(vC(this.prevProjectionDelta.x,this.projectionDelta.x),vC(this.prevProjectionDelta.y,this.projectionDelta.y)),af(this.projectionDelta,this.layoutCorrected,V,this.latestValues),(this.treeScale.x!==M||this.treeScale.y!==N||!CC(this.projectionDelta.x,this.prevProjectionDelta.x)||!CC(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",V)),Gd&&ru.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(f=!0){var o;if((o=this.options.visualElement)===null||o===void 0||o.scheduleRender(),f){const w=this.getStack();w&&w.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Rc(),this.projectionDelta=Rc(),this.projectionDeltaWithTransform=Rc()}setAnimationOrigin(f,o=!1){const w=this.snapshot,b=w?w.latestValues:{},C={...this.latestValues},A=Rc();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const M=lr(),N=w?w.source:void 0,V=this.layout?this.layout.source:void 0,$=N!==V,G=this.getStack(),F=!G||G.members.length<=1,B=!!($&&!F&&this.options.crossfade===!0&&!this.path.some(y8));this.animationProgress=0;let H;this.mixTargetDelta=J=>{const fe=J/1e3;IC(A.x,f.x,fe),IC(A.y,f.y,fe),this.setTargetDelta(A),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(of(M,this.layout.layoutBox,this.relativeParent.layout.layoutBox),g8(this.relativeTarget,this.relativeTargetOrigin,M,fe),H&&KU(this.relativeTarget,H)&&(this.isProjectionDirty=!1),H||(H=lr()),ws(H,this.relativeTarget)),$&&(this.animationValues=C,UU(C,b,this.latestValues,fe,B,F)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=fe},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(f){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(wl(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=gn.update(()=>{rg.hasAnimatedSinceResize=!0,this.currentAnimation=n8(0,PC,{...f,onUpdate:o=>{this.mixTargetDelta(o),f.onUpdate&&f.onUpdate(o)},onComplete:()=>{f.onComplete&&f.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const f=this.getStack();f&&f.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(PC),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const f=this.getLead();let{targetWithTransforms:o,target:w,layout:b,latestValues:C}=f;if(!(!o||!w||!b)){if(this!==f&&this.layout&&b&&IR(this.options.animationType,this.layout.layoutBox,b.layoutBox)){w=this.target||lr();const A=as(this.layout.layoutBox.x);w.x.min=f.target.x.min,w.x.max=w.x.min+A;const M=as(this.layout.layoutBox.y);w.y.min=f.target.y.min,w.y.max=w.y.min+M}ws(o,w),Lc(o,C),af(this.projectionDeltaWithTransform,this.layoutCorrected,o,C)}}registerSharedNode(f,o){this.sharedNodes.has(f)||this.sharedNodes.set(f,new XU),this.sharedNodes.get(f).add(o);const b=o.options.initialPromotionConfig;o.promote({transition:b?b.transition:void 0,preserveFollowOpacity:b&&b.shouldPreserveFollowOpacity?b.shouldPreserveFollowOpacity(o):void 0})}isLead(){const f=this.getStack();return f?f.lead===this:!0}getLead(){var f;const{layoutId:o}=this.options;return o?((f=this.getStack())===null||f===void 0?void 0:f.lead)||this:this}getPrevLead(){var f;const{layoutId:o}=this.options;return o?(f=this.getStack())===null||f===void 0?void 0:f.prevLead:void 0}getStack(){const{layoutId:f}=this.options;if(f)return this.root.sharedNodes.get(f)}promote({needsReset:f,transition:o,preserveFollowOpacity:w}={}){const b=this.getStack();b&&b.promote(this,w),f&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const f=this.getStack();return f?f.relegate(this):!1}resetSkewAndRotation(){const{visualElement:f}=this.options;if(!f)return;let o=!1;const{latestValues:w}=f;if((w.z||w.rotate||w.rotateX||w.rotateY||w.rotateZ||w.skewX||w.skewY)&&(o=!0),!o)return;const b={};w.z&&g_("z",f,b,this.animationValues);for(let C=0;C<m_.length;C++)g_(`rotate${m_[C]}`,f,b,this.animationValues),g_(`skew${m_[C]}`,f,b,this.animationValues);f.render();for(const C in b)f.setStaticValue(C,b[C]),this.animationValues&&(this.animationValues[C]=b[C]);f.scheduleRender()}getProjectionStyles(f){var o,w;if(!this.instance||this.isSVG)return;if(!this.isVisible)return r8;const b={visibility:""},C=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,b.opacity="",b.pointerEvents=ig(f==null?void 0:f.pointerEvents)||"",b.transform=C?C(this.latestValues,""):"none",b;const A=this.getLead();if(!this.projectionDelta||!this.layout||!A.target){const $={};return this.options.layoutId&&($.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,$.pointerEvents=ig(f==null?void 0:f.pointerEvents)||""),this.hasProjected&&!nu(this.latestValues)&&($.transform=C?C({},""):"none",this.hasProjected=!1),$}const M=A.animationValues||A.latestValues;this.applyTransformsToTarget(),b.transform=QU(this.projectionDeltaWithTransform,this.treeScale,M),C&&(b.transform=C(M,b.transform));const{x:N,y:V}=this.projectionDelta;b.transformOrigin=`${N.origin*100}% ${V.origin*100}% 0`,A.animationValues?b.opacity=A===this?(w=(o=M.opacity)!==null&&o!==void 0?o:this.latestValues.opacity)!==null&&w!==void 0?w:1:this.preserveOpacity?this.latestValues.opacity:M.opacityExit:b.opacity=A===this?M.opacity!==void 0?M.opacity:"":M.opacityExit!==void 0?M.opacityExit:0;for(const $ in Qg){if(M[$]===void 0)continue;const{correct:G,applyTo:F}=Qg[$],B=b.transform==="none"?M[$]:G(M[$],A);if(F){const H=F.length;for(let J=0;J<H;J++)b[F[J]]=B}else b[$]=B}return this.options.layoutId&&(b.pointerEvents=A===this?ig(f==null?void 0:f.pointerEvents)||"":"none"),b}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(f=>{var o;return(o=f.currentAnimation)===null||o===void 0?void 0:o.stop()}),this.root.nodes.forEach(AC),this.root.sharedNodes.clear()}}}function s8(e){e.updateLayout()}function a8(e){var t;const n=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:u}=e.layout,{animationType:h}=e.options,f=n.source!==e.layout.source;h==="size"?Ss(A=>{const M=f?n.measuredBox[A]:n.layoutBox[A],N=as(M);M.min=s[A].min,M.max=M.min+N}):IR(h,n.layoutBox,s)&&Ss(A=>{const M=f?n.measuredBox[A]:n.layoutBox[A],N=as(s[A]);M.max=M.min+N,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[A].max=e.relativeTarget[A].min+N)});const o=Rc();af(o,s,n.layoutBox);const w=Rc();f?af(w,e.applyTransform(u,!0),n.measuredBox):af(w,s,n.layoutBox);const b=!CR(o);let C=!1;if(!e.resumeFrom){const A=e.getClosestProjectingParent();if(A&&!A.resumeFrom){const{snapshot:M,layout:N}=A;if(M&&N){const V=lr();of(V,n.layoutBox,M.layoutBox);const $=lr();of($,s,N.layoutBox),PR(V,$)||(C=!0),A.options.layoutRoot&&(e.relativeTarget=$,e.relativeTargetOrigin=V,e.relativeParent=A)}}}e.notifyListeners("didUpdate",{layout:s,snapshot:n,delta:w,layoutDelta:o,hasLayoutChanged:b,hasRelativeTargetChanged:C})}else if(e.isLead()){const{onExitComplete:s}=e.options;s&&s()}e.options.transition=void 0}function o8(e){Gd&&ru.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function l8(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function u8(e){e.clearSnapshot()}function AC(e){e.clearMeasurements()}function c8(e){e.isLayoutDirty=!1}function h8(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function kC(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function d8(e){e.resolveTargetDelta()}function f8(e){e.calcProjection()}function p8(e){e.resetSkewAndRotation()}function m8(e){e.removeLeadSnapshot()}function IC(e,t,n){e.translate=Gn(t.translate,0,n),e.scale=Gn(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function MC(e,t,n,s){e.min=Gn(t.min,n.min,s),e.max=Gn(t.max,n.max,s)}function g8(e,t,n,s){MC(e.x,t.x,n.x,s),MC(e.y,t.y,n.y,s)}function y8(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const v8={duration:.45,ease:[.4,0,.1,1]},RC=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),DC=RC("applewebkit/")&&!RC("chrome/")?Math.round:Ur;function LC(e){e.min=DC(e.min),e.max=DC(e.max)}function x8(e){LC(e.x),LC(e.y)}function IR(e,t,n){return e==="position"||e==="preserve-aspect"&&!_U(TC(t),TC(n),.2)}function _8(e){var t;return e!==e.root&&((t=e.scroll)===null||t===void 0?void 0:t.wasRoot)}const w8=kR({attachResizeListener:(e,t)=>ao(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),y_={current:void 0},MR=kR({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!y_.current){const e=new w8({});e.mount(window),e.setOptions({layoutScroll:!0}),y_.current=e}return y_.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),b8={pan:{Feature:OU},drag:{Feature:zU,ProjectionNode:MR,MeasureLayout:SR}};function zC(e,t){const n=t?"pointerenter":"pointerleave",s=t?"onHoverStart":"onHoverEnd",u=(h,f)=>{if(h.pointerType==="touch"||fR())return;const o=e.getProps();e.animationState&&o.whileHover&&e.animationState.setActive("whileHover",t);const w=o[s];w&&gn.postRender(()=>w(h,f))};return co(e.current,n,u,{passive:!e.getProps()[s]})}class S8 extends Il{mount(){this.unmount=uo(zC(this.node,!0),zC(this.node,!1))}unmount(){}}class E8 extends Il{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=uo(ao(this.node.current,"focus",()=>this.onFocus()),ao(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const RR=(e,t)=>t?e===t?!0:RR(e,t.parentElement):!1;function v_(e,t){if(!t)return;const n=new PointerEvent("pointer"+e);t(n,iv(n))}class T8 extends Il{constructor(){super(...arguments),this.removeStartListeners=Ur,this.removeEndListeners=Ur,this.removeAccessibleListeners=Ur,this.startPointerPress=(t,n)=>{if(this.isPressing)return;this.removeEndListeners();const s=this.node.getProps(),h=co(window,"pointerup",(o,w)=>{if(!this.checkPressEnd())return;const{onTap:b,onTapCancel:C,globalTapTarget:A}=this.node.getProps(),M=!A&&!RR(this.node.current,o.target)?C:b;M&&gn.update(()=>M(o,w))},{passive:!(s.onTap||s.onPointerUp)}),f=co(window,"pointercancel",(o,w)=>this.cancelPress(o,w),{passive:!(s.onTapCancel||s.onPointerCancel)});this.removeEndListeners=uo(h,f),this.startPress(t,n)},this.startAccessiblePress=()=>{const t=h=>{if(h.key!=="Enter"||this.isPressing)return;const f=o=>{o.key!=="Enter"||!this.checkPressEnd()||v_("up",(w,b)=>{const{onTap:C}=this.node.getProps();C&&gn.postRender(()=>C(w,b))})};this.removeEndListeners(),this.removeEndListeners=ao(this.node.current,"keyup",f),v_("down",(o,w)=>{this.startPress(o,w)})},n=ao(this.node.current,"keydown",t),s=()=>{this.isPressing&&v_("cancel",(h,f)=>this.cancelPress(h,f))},u=ao(this.node.current,"blur",s);this.removeAccessibleListeners=uo(n,u)}}startPress(t,n){this.isPressing=!0;const{onTapStart:s,whileTap:u}=this.node.getProps();u&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),s&&gn.postRender(()=>s(t,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!fR()}cancelPress(t,n){if(!this.checkPressEnd())return;const{onTapCancel:s}=this.node.getProps();s&&gn.postRender(()=>s(t,n))}mount(){const t=this.node.getProps(),n=co(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),s=ao(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=uo(n,s)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const ew=new WeakMap,x_=new WeakMap,C8=e=>{const t=ew.get(e.target);t&&t(e)},P8=e=>{e.forEach(C8)};function A8({root:e,...t}){const n=e||document;x_.has(n)||x_.set(n,{});const s=x_.get(n),u=JSON.stringify(t);return s[u]||(s[u]=new IntersectionObserver(P8,{root:e,...t})),s[u]}function k8(e,t,n){const s=A8(t);return ew.set(e,n),s.observe(e),()=>{ew.delete(e),s.unobserve(e)}}const I8={some:0,all:1};class M8 extends Il{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:s,amount:u="some",once:h}=t,f={root:n?n.current:void 0,rootMargin:s,threshold:typeof u=="number"?u:I8[u]},o=w=>{const{isIntersecting:b}=w;if(this.isInView===b||(this.isInView=b,h&&!b&&this.hasEnteredView))return;b&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",b);const{onViewportEnter:C,onViewportLeave:A}=this.node.getProps(),M=b?C:A;M&&M(w)};return k8(this.node.current,f,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(R8(t,n))&&this.startObserver()}unmount(){}}function R8({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const D8={inView:{Feature:M8},tap:{Feature:T8},focus:{Feature:E8},hover:{Feature:S8}},L8={layout:{ProjectionNode:MR,MeasureLayout:SR}},DR=Q.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),sv=Q.createContext({}),fb=typeof window<"u",z8=fb?Q.useLayoutEffect:Q.useEffect,LR=Q.createContext({strict:!1});function O8(e,t,n,s,u){var h,f;const{visualElement:o}=Q.useContext(sv),w=Q.useContext(LR),b=Q.useContext(hb),C=Q.useContext(DR).reducedMotion,A=Q.useRef();s=s||w.renderer,!A.current&&s&&(A.current=s(e,{visualState:t,parent:o,props:n,presenceContext:b,blockInitialAnimation:b?b.initial===!1:!1,reducedMotionConfig:C}));const M=A.current,N=Q.useContext(bR);M&&!M.projection&&u&&(M.type==="html"||M.type==="svg")&&F8(A.current,n,u,N),Q.useInsertionEffect(()=>{M&&M.update(n,b)});const V=n[rR],$=Q.useRef(!!V&&!(!((h=window.MotionHandoffIsComplete)===null||h===void 0)&&h.call(window,V))&&((f=window.MotionHasOptimisedAnimation)===null||f===void 0?void 0:f.call(window,V)));return z8(()=>{M&&(window.MotionIsMounted=!0,M.updateFeatures(),db.render(M.render),$.current&&M.animationState&&M.animationState.animateChanges())}),Q.useEffect(()=>{M&&(!$.current&&M.animationState&&M.animationState.animateChanges(),$.current&&(queueMicrotask(()=>{var G;(G=window.MotionHandoffMarkAsComplete)===null||G===void 0||G.call(window,V)}),$.current=!1))}),M}function F8(e,t,n,s){const{layoutId:u,layout:h,drag:f,dragConstraints:o,layoutScroll:w,layoutRoot:b}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:zR(e.parent)),e.projection.setOptions({layoutId:u,layout:h,alwaysMeasureLayout:!!f||o&&Mc(o),visualElement:e,animationType:typeof h=="string"?h:"both",initialPromotionConfig:s,layoutScroll:w,layoutRoot:b})}function zR(e){if(e)return e.options.allowProjection!==!1?e.projection:zR(e.parent)}function N8(e,t,n){return Q.useCallback(s=>{s&&e.mount&&e.mount(s),t&&(s?t.mount(s):t.unmount()),n&&(typeof n=="function"?n(s):Mc(n)&&(n.current=s))},[t])}function av(e){return Rf(e.animate)||Z1.some(t=>Df(e[t]))}function OR(e){return!!(av(e)||e.variants)}function B8(e,t){if(av(e)){const{initial:n,animate:s}=e;return{initial:n===!1||Df(n)?n:void 0,animate:Df(s)?s:void 0}}return e.inherit!==!1?t:{}}function V8(e){const{initial:t,animate:n}=B8(e,Q.useContext(sv));return Q.useMemo(()=>({initial:t,animate:n}),[OC(t),OC(n)])}function OC(e){return Array.isArray(e)?e.join(" "):e}const FC={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},rh={};for(const e in FC)rh[e]={isEnabled:t=>FC[e].some(n=>!!t[n])};function j8(e){for(const t in e)rh[t]={...rh[t],...e[t]}}const $8=Symbol.for("motionComponentSymbol");function U8({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:s,Component:u}){e&&j8(e);function h(o,w){let b;const C={...Q.useContext(DR),...o,layoutId:q8(o)},{isStatic:A}=C,M=V8(o),N=s(o,A);if(!A&&fb){G8();const V=Z8(C);b=V.MeasureLayout,M.visualElement=O8(u,N,C,t,V.ProjectionNode)}return Ne(sv.Provider,{value:M,children:[b&&M.visualElement?K(b,{visualElement:M.visualElement,...C}):null,n(u,o,N8(N,M.visualElement,w),N,A,M.visualElement)]})}const f=Q.forwardRef(h);return f[$8]=u,f}function q8({layoutId:e}){const t=Q.useContext(wR).id;return t&&e!==void 0?t+"-"+e:e}function G8(e,t){Q.useContext(LR).strict}function Z8(e){const{drag:t,layout:n}=rh;if(!t&&!n)return{};const s={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}const W8=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function pb(e){return typeof e!="string"||e.includes("-")?!1:!!(W8.indexOf(e)>-1||/[A-Z]/u.test(e))}function FR(e,{style:t,vars:n},s,u){Object.assign(e.style,t,u&&u.getProjectionStyles(s));for(const h in n)e.style.setProperty(h,n[h])}const NR=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function BR(e,t,n,s){FR(e,t,void 0,s);for(const u in t.attrs)e.setAttribute(NR.has(u)?u:rv(u),t.attrs[u])}function VR(e,{layout:t,layoutId:n}){return kl.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!Qg[e]||e==="opacity")}function mb(e,t,n){var s;const{style:u}=e,h={};for(const f in u)(ui(u[f])||t.style&&ui(t.style[f])||VR(f,e)||((s=n==null?void 0:n.getValue(f))===null||s===void 0?void 0:s.liveStyle)!==void 0)&&(h[f]=u[f]);return n&&u&&typeof u.willChange=="string"&&(n.applyWillChange=!1),h}function jR(e,t,n){const s=mb(e,t,n);for(const u in e)if(ui(e[u])||ui(t[u])){const h=Wf.indexOf(u)!==-1?"attr"+u.charAt(0).toUpperCase()+u.substring(1):u;s[h]=e[u]}return s}function H8(e){const t=Q.useRef(null);return t.current===null&&(t.current=e()),t.current}function K8({applyWillChange:e=!1,scrapeMotionValuesFromProps:t,createRenderState:n,onMount:s},u,h,f,o){const w={latestValues:X8(u,h,f,o?!1:e,t),renderState:n()};return s&&(w.mount=b=>s(u,b,w)),w}const $R=e=>(t,n)=>{const s=Q.useContext(sv),u=Q.useContext(hb),h=()=>K8(e,t,s,u,n);return n?h():H8(h)};function NC(e,t,n){const s=Array.isArray(t)?t:[t];for(let u=0;u<s.length;u++){const h=q1(e,s[u]);if(h){const{transitionEnd:f,transition:o,...w}=h;n(w,f)}}}function X8(e,t,n,s,u){var h;const f={};let o=s&&((h=e.style)===null||h===void 0?void 0:h.willChange)===void 0;const w=u(e,{});for(const $ in w)f[$]=ig(w[$]);let{initial:b,animate:C}=e;const A=av(e),M=OR(e);t&&M&&!A&&e.inherit!==!1&&(b===void 0&&(b=t.initial),C===void 0&&(C=t.animate));let N=n?n.initial===!1:!1;N=N||b===!1;const V=N?C:b;return V&&typeof V!="boolean"&&!Rf(V)&&NC(e,V,($,G)=>{for(const F in $){let B=$[F];if(Array.isArray(B)){const H=N?B.length-1:0;B=B[H]}B!==null&&(f[F]=B)}for(const F in G)f[F]=G[F]}),o&&C&&b!==!1&&!Rf(C)&&NC(e,C,$=>{for(const G in $)if(sR(G)){f.willChange="transform";return}}),f}const gb=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),UR=()=>({...gb(),attrs:{}}),qR=(e,t)=>t&&typeof e=="number"?t.transform(e):e,Q8={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Y8=Wf.length;function J8(e,t,n){let s="",u=!0;for(let h=0;h<Y8;h++){const f=Wf[h],o=e[f];if(o===void 0)continue;let w=!0;if(typeof o=="number"?w=o===(f.startsWith("scale")?1:0):w=parseFloat(o)===0,!w||n){const b=qR(o,eb[f]);if(!w){u=!1;const C=Q8[f]||f;s+=`${C}(${b}) `}n&&(t[f]=b)}}return s=s.trim(),n?s=n(t,u?"":s):u&&(s="none"),s}function yb(e,t,n){const{style:s,vars:u,transformOrigin:h}=e;let f=!1,o=!1;for(const w in t){const b=t[w];if(kl.has(w)){f=!0;continue}else if(DM(w)){u[w]=b;continue}else{const C=qR(b,eb[w]);w.startsWith("origin")?(o=!0,h[w]=C):s[w]=C}}if(t.transform||(f||n?s.transform=J8(t,e.transform,n):s.transform&&(s.transform="none")),o){const{originX:w="50%",originY:b="50%",originZ:C=0}=h;s.transformOrigin=`${w} ${b} ${C}`}}function BC(e,t,n){return typeof e=="string"?e:zt.transform(t+n*e)}function e9(e,t,n){const s=BC(t,e.x,e.width),u=BC(n,e.y,e.height);return`${s} ${u}`}const t9={offset:"stroke-dashoffset",array:"stroke-dasharray"},n9={offset:"strokeDashoffset",array:"strokeDasharray"};function r9(e,t,n=1,s=0,u=!0){e.pathLength=1;const h=u?t9:n9;e[h.offset]=zt.transform(-s);const f=zt.transform(t),o=zt.transform(n);e[h.array]=`${f} ${o}`}function vb(e,{attrX:t,attrY:n,attrScale:s,originX:u,originY:h,pathLength:f,pathSpacing:o=1,pathOffset:w=0,...b},C,A){if(yb(e,b,A),C){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:M,style:N,dimensions:V}=e;M.transform&&(V&&(N.transform=M.transform),delete M.transform),V&&(u!==void 0||h!==void 0||N.transform)&&(N.transformOrigin=e9(V,u!==void 0?u:.5,h!==void 0?h:.5)),t!==void 0&&(M.x=t),n!==void 0&&(M.y=n),s!==void 0&&(M.scale=s),f!==void 0&&r9(M,f,o,w,!1)}const xb=e=>typeof e=="string"&&e.toLowerCase()==="svg",i9={useVisualState:$R({scrapeMotionValuesFromProps:jR,createRenderState:UR,onMount:(e,t,{renderState:n,latestValues:s})=>{gn.read(()=>{try{n.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),gn.render(()=>{vb(n,s,xb(t.tagName),e.transformTemplate),BR(t,n)})}})},s9={useVisualState:$R({applyWillChange:!0,scrapeMotionValuesFromProps:mb,createRenderState:gb})};function GR(e,t,n){for(const s in t)!ui(t[s])&&!VR(s,n)&&(e[s]=t[s])}function a9({transformTemplate:e},t){return Q.useMemo(()=>{const n=gb();return yb(n,t,e),Object.assign({},n.vars,n.style)},[t])}function o9(e,t){const n=e.style||{},s={};return GR(s,n,e),Object.assign(s,a9(e,t)),s}function l9(e,t){const n={},s=o9(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=s,n}const u9=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Yg(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||u9.has(e)}let ZR=e=>!Yg(e);function c9(e){e&&(ZR=t=>t.startsWith("on")?!Yg(t):e(t))}try{c9(require("@emotion/is-prop-valid").default)}catch{}function h9(e,t,n){const s={};for(const u in e)u==="values"&&typeof e.values=="object"||(ZR(u)||n===!0&&Yg(u)||!t&&!Yg(u)||e.draggable&&u.startsWith("onDrag"))&&(s[u]=e[u]);return s}function d9(e,t,n,s){const u=Q.useMemo(()=>{const h=UR();return vb(h,t,xb(s),e.transformTemplate),{...h.attrs,style:{...h.style}}},[t]);if(e.style){const h={};GR(h,e.style,e),u.style={...h,...u.style}}return u}function f9(e=!1){return(n,s,u,{latestValues:h},f)=>{const w=(pb(n)?d9:l9)(s,h,f,n),b=h9(s,typeof n=="string",e),C=n!==Q.Fragment?{...b,...w,ref:u}:{},{children:A}=s,M=Q.useMemo(()=>ui(A)?A.get():A,[A]);return Q.createElement(n,{...C,children:M})}}function p9(e,t){return function(s,{forwardMotionProps:u}={forwardMotionProps:!1}){const f={...pb(s)?i9:s9,preloadedFeatures:e,useRender:f9(u),createVisualElement:t,Component:s};return U8(f)}}const tw={current:null},WR={current:!1};function m9(){if(WR.current=!0,!!fb)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>tw.current=e.matches;e.addListener(t),t()}else tw.current=!1}function g9(e,t,n){for(const s in t){const u=t[s],h=n[s];if(ui(u))e.addValue(s,u);else if(ui(h))e.addValue(s,Of(u,{owner:e}));else if(h!==u)if(e.hasValue(s)){const f=e.getValue(s);f.liveStyle===!0?f.jump(u):f.hasAnimated||f.set(u)}else{const f=e.getStaticValue(s);e.addValue(s,Of(f!==void 0?f:u,{owner:e}))}}for(const s in n)t[s]===void 0&&e.removeValue(s);return t}const VC=new WeakMap,y9=[...OM,ai,Sl],v9=e=>y9.find(zM(e)),jC=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class x9{scrapeMotionValuesFromProps(t,n,s){return{}}constructor({parent:t,props:n,presenceContext:s,reducedMotionConfig:u,blockInitialAnimation:h,visualState:f},o={}){this.applyWillChange=!1,this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Q1,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const M=ka.now();this.renderScheduledAt<M&&(this.renderScheduledAt=M,gn.render(this.render,!1,!0))};const{latestValues:w,renderState:b}=f;this.latestValues=w,this.baseTarget={...w},this.initialValues=n.initial?{...w}:{},this.renderState=b,this.parent=t,this.props=n,this.presenceContext=s,this.depth=t?t.depth+1:0,this.reducedMotionConfig=u,this.options=o,this.blockInitialAnimation=!!h,this.isControllingVariants=av(n),this.isVariantNode=OR(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:C,...A}=this.scrapeMotionValuesFromProps(n,{},this);for(const M in A){const N=A[M];w[M]!==void 0&&ui(N)&&N.set(w[M],!1)}}mount(t){this.current=t,VC.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,s)=>this.bindToMotionValue(s,n)),WR.current||m9(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:tw.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){VC.delete(this.current),this.projection&&this.projection.unmount(),wl(this.notifyUpdate),wl(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const s=kl.has(t),u=n.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&gn.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0)}),h=n.on("renderRequest",this.scheduleRender);let f;window.MotionCheckAppearSync&&(f=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{u(),h(),f&&f(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in rh){const n=rh[t];if(!n)continue;const{isEnabled:s,Feature:u}=n;if(!this.features[t]&&u&&s(this.props)&&(this.features[t]=new u(this)),this.features[t]){const h=this.features[t];h.isMounted?h.update():(h.mount(),h.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):lr()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let s=0;s<jC.length;s++){const u=jC[s];this.propEventSubscriptions[u]&&(this.propEventSubscriptions[u](),delete this.propEventSubscriptions[u]);const h="on"+u,f=t[h];f&&(this.propEventSubscriptions[u]=this.on(u,f))}this.prevMotionValues=g9(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const s=this.values.get(t);n!==s&&(s&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let s=this.values.get(t);return s===void 0&&n!==void 0&&(s=Of(n===null?void 0:n,{owner:this}),this.addValue(t,s)),s}readValue(t,n){var s;let u=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(s=this.getBaseTargetFromProps(this.props,t))!==null&&s!==void 0?s:this.readValueFromInstance(this.current,t,this.options);return u!=null&&(typeof u=="string"&&(MM(u)||kM(u))?u=parseFloat(u):!v9(u)&&Sl.test(n)&&(u=qM(t,n)),this.setBaseTarget(t,ui(u)?u.get():u)),ui(u)?u.get():u}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var n;const{initial:s}=this.props;let u;if(typeof s=="string"||typeof s=="object"){const f=q1(this.props,s,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);f&&(u=f[t])}if(s&&u!==void 0)return u;const h=this.getBaseTargetFromProps(this.props,t);return h!==void 0&&!ui(h)?h:this.initialValues[t]!==void 0&&u===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new cb),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class HR extends x9{constructor(){super(...arguments),this.KeyframeResolver=GM}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:s}){delete n[t],delete s[t]}}function _9(e){return window.getComputedStyle(e)}class w9 extends HR{constructor(){super(...arguments),this.type="html",this.applyWillChange=!0,this.renderInstance=FR}readValueFromInstance(t,n){if(kl.has(n)){const s=tb(n);return s&&s.default||0}else{const s=_9(t),u=(DM(n)?s.getPropertyValue(n):s[n])||0;return typeof u=="string"?u.trim():u}}measureInstanceViewportBox(t,{transformPagePoint:n}){return xR(t,n)}build(t,n,s){yb(t,n,s.transformTemplate)}scrapeMotionValuesFromProps(t,n,s){return mb(t,n,s)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;ui(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}class b9 extends HR{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=lr}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(kl.has(n)){const s=tb(n);return s&&s.default||0}return n=NR.has(n)?n:rv(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,s){return jR(t,n,s)}build(t,n,s){vb(t,n,this.isSVGTag,s.transformTemplate)}renderInstance(t,n,s,u){BR(t,n,s,u)}mount(t){this.isSVGTag=xb(t.tagName),super.mount(t)}}const S9=(e,t)=>pb(e)?new b9(t):new w9(t,{allowProjection:e!==Q.Fragment}),E9=p9({...hU,...D8,...b8,...L8},S9),ih=nj(E9);function T9(){return K("section",{className:"about naxatw-bg-white naxatw-h-fit lg:naxatw-h-[25rem]",children:Ne("div",{className:"naxatw-flex naxatw-flex-col lg:naxatw-flex-row naxatw-container naxatw-py-10 lg:naxatw-py-20 naxatw-text-gray-800 naxatw-items-center",children:[K(ih.div,{initial:{translateX:-200,opacity:0},whileInView:{translateX:0,opacity:1},transition:{duration:.7},viewport:{once:!0},className:"naxatw-w-1/2",children:K(so,{src:tj,width:350})}),Ne(ih.div,{initial:{translateX:200,opacity:0},whileInView:{translateX:0,opacity:1},transition:{duration:.7},viewport:{once:!0},className:"naxatw-flex naxatw-flex-col naxatw-gap-8 naxatw-w-full lg:naxatw-w-1/2",children:[K("p",{className:"naxatw-text-[3rem]",children:"About Us"}),K("p",{children:"At Geosewa, we provide essential resources for geomatics engineers, including mock tests and past exam questions for the NEC Geomatics Engineering License. Our services also encompass professional mapping and IT solutions. Join us to access top-tier study materials, expert guidance, and advanced mapping services, all designed to help you excel in your geomatics engineering career."})]})]})})}const C9="/assets/Nec-License-3ef0125d.svg",P9="/assets/Nec-mocktest-22d66ece.svg",A9="/assets/Psc-prepration-ab8e35ca.svg",k9="/assets/It-services-5f34a5f7.svg",I9="/assets/arun-bhumi-91b25f28.jpg",M9="/assets/bishal-gyawali-a96bd964.jpg",R9="/assets/karan-chaudhary-be801aac.jpg",D9="/assets/samrat-acharya-073d53b9.jpg",L9=[{id:1,image:C9,title:"NEC License Material",description:"Comprehensive materials for Nepal Engineering Councils GeomaticsEngineering License exam, aligned with the latest syllabus"},{id:2,image:P9,title:"NEC License Mocktest",description:"Extensive mock tests with previous NEC questions help gauge preparation and build confidence for the exam."},{id:3,image:A9,title:"PSC Preparation",description:"We offer curated materials for PSC exams in Nepal, focusing on 4th, 5th, and 7th levels to give you an edge."},{id:4,image:k9,title:"GeoSpatial And IT services",description:"At GeoSewa, we provide geomatics and IT services, including mapping, surveys, drone services, and digital solutions."}],z9=[{id:1,question:"What is GeoSewa?",answer:"Geosewa is an educational and it service company decidated for sharing top-tier study materials, expert guidance, and advanced mapping services."},{id:2,question:"How can we get license exam materials?",answer:"You can simply email us on geosewa7@gmail.com requesting for the materials."},{id:3,question:"When does the mock test generally happen?",answer:"Generally, before one or two weeks before NEC license examination."},{id:4,question:"Is this page only for geomatics engineering mock test?",answer:"Yes, you can try us for free for 30 days.If you want, we'll provide you with a free, personalized 30-minute onboading call to get you up and running as soon as possible. "},{id:5,question:"How does billing work?",answer:"Yes, you can try us for free for a few days.If you want, we'll provide you with a free, personalized 30-minute onboading call to get you up and running as soon as possible. "},{id:6,question:"How can we contact you?",answer:"You can contact or whatsapp us at 9763252325 or DM us at geosewa page."}],O9=[{id:3,student:"Karan Chaudhary",organization:"IOE, WRC",image:R9,quote:"Very helpful and worth it. I recommend everyone to participate in the moct test conducted by Geo Sewa. It helps a lot."},{id:1,student:"Arun Kumar Bhomi",organization:"KU",image:I9,quote:"I took five Geosewa mock exams, which closely mirrored the NEC format and provided excellent practice. Many questions in the actual license exam were similar, significantly boosting my confidence and success. I highly recommend Geosewa's tests for anyone preparing for the exam."},{id:2,student:"Bishal Gyawali",organization:"IOE, WRC",image:M9,quote:"Thanks for encouraging and better confidence as the mock test is really worth it. Huge love for all Geosewa team and memebers"},{id:4,student:"Samrat Acharya",organization:"KU",image:D9,quote:"Thank you for everything. Mock Test was really a worth it. It gives you the time calculation for the questions, past question (which gets repeat in Real Examination).So, Thank you for everything."}];function F9({image:e,title:t,description:n}){return Ne(fu,{gap:2,className:"naxatw-p-4 naxatw-transform naxatw-transition-transform naxatw-duration-300 hover:naxatw-scale-105 naxatw-bg-white naxatw-rounded-xl naxatw-border naxatw-shadow-lg",children:[K(so,{src:e,width:60}),K("h4",{className:"naxatw-text-gray-800",children:t}),K("p",{children:n})]})}const KR={hidden:{opacity:0,scale:1},visible:{opacity:1,scale:1,transition:{delayChildren:.3,staggerChildren:.2}}},XR={hidden:{y:20,opacity:0},visible:{y:0,opacity:1}};function N9(){return K("section",{className:"services naxatw-w-full naxatw-bg-[#F5FAFF]",children:Ne("div",{className:"naxatw-container naxatw-py-10 md:naxatw-py-20",children:[Ne(Ji,{gap:2,children:[K("p",{className:"naxatw-text-[3rem] naxatw-text-gray-800 naxatw-text-center naxatw-mb-8",children:"Our"}),K("p",{className:"naxatw-text-[3rem] naxatw-text-[#59AAFB] naxatw-text-center naxatw-mb-8",children:"Services"})]}),K(ih.div,{variants:KR,initial:"hidden",whileInView:"visible",viewport:{once:!0},className:"naxatw-grid naxatw-grid-cols-1 md:naxatw-grid-cols-2 naxatw-gap-14",children:L9.map(e=>K(ih.div,{variants:XR,children:K(F9,{image:e.image,title:e.title,description:e.description},e.id)},e.id))})]})})}const B9=e=>{const{image:t,student:n,quote:s,organization:u}=e;return Ne("div",{className:"testimonial-card naxatw-cursor-default naxatw-shadow-lg naxatw-rounded-xl naxatw-border naxatw-border-solid naxatw-border-[#E7EAEE] naxatw-bg-white naxatw-p-8 naxatw-text-center",children:[K("div",{className:"image-container naxatw-mx-auto naxatw-mb-10 naxatw-h-16 naxatw-w-16",children:K("img",{src:t,alt:n,width:100,height:100,className:"naxatw-rounded-[50%] naxatw-object-cover naxatw-object-center"})}),Ne("div",{className:"text-container",children:[K("div",{className:"description naxatw-mb-10",children:K("p",{className:"naxatw-text-base naxatw-leading-7 naxatw-tracking-[-0.01125rem] naxatw-text-[#07090D]",children:s})}),Ne("div",{className:"cutomer-details",children:[K("p",{className:"naxatw-text-base naxatw-font-medium naxatw-leading-6 naxatw-tracking-[-0.03rem] naxatw-text-[#07090D]",children:n}),K("span",{className:"naxatw-text-[0.875rem] naxatw-leading-6 naxatw-tracking-[-0.00875rem] naxatw-text-[#818A9C]",children:u})]})]})]})};function V9(){return K("section",{className:"what-students-say naxatw-bg-[#FBF8F3]",children:Ne("div",{className:"naxatw-py-10 md:naxatw-py-20 naxatw-container",children:[Ne("p",{className:"naxatw-text-[3rem] naxatw-text-gray-800 naxatw-text-center",children:["Our Students",K("span",{className:"naxatw-text-[3rem] naxatw-ml-2 naxatw-text-[#59AAFB]",children:"Say !"})]}),K(ih.div,{variants:KR,initial:"hidden",whileInView:"visible",viewport:{once:!0},className:"naxatw-grid naxatw-grid-cols-1 naxatw-gap-10 naxatw-mt-8 md:naxatw-grid-cols-2 xl:naxatw-grid-cols-3",children:O9.slice(1,4).map(e=>K(ih.div,{variants:XR,children:K(B9,{...e},e.id)},e.id))})]})})}function QR(e,t=[]){let n=[];function s(h,f){const o=Q.createContext(f),w=n.length;n=[...n,f];const b=A=>{var F;const{scope:M,children:N,...V}=A,$=((F=M==null?void 0:M[e])==null?void 0:F[w])||o,G=Q.useMemo(()=>V,Object.values(V));return K($.Provider,{value:G,children:N})};b.displayName=h+"Provider";function C(A,M){var $;const N=(($=M==null?void 0:M[e])==null?void 0:$[w])||o,V=Q.useContext(N);if(V)return V;if(f!==void 0)return f;throw new Error(`\`${A}\` must be used within \`${h}\``)}return[b,C]}const u=()=>{const h=n.map(f=>Q.createContext(f));return function(o){const w=(o==null?void 0:o[e])||h;return Q.useMemo(()=>({[`__scope${e}`]:{...o,[e]:w}}),[o,w])}};return u.scopeName=e,[s,j9(u,...t)]}function j9(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const s=e.map(u=>({useScope:u(),scopeName:u.scopeName}));return function(h){const f=s.reduce((o,{useScope:w,scopeName:b})=>{const A=w(h)[`__scope${b}`];return{...o,...A}},{});return Q.useMemo(()=>({[`__scope${t.scopeName}`]:f}),[f])}};return n.scopeName=t.scopeName,n}function $9(e,t=[]){let n=[];function s(h,f){const o=Q.createContext(f),w=n.length;n=[...n,f];function b(A){const{scope:M,children:N,...V}=A,$=(M==null?void 0:M[e][w])||o,G=Q.useMemo(()=>V,Object.values(V));return K($.Provider,{value:G,children:N})}function C(A,M){const N=(M==null?void 0:M[e][w])||o,V=Q.useContext(N);if(V)return V;if(f!==void 0)return f;throw new Error(`\`${A}\` must be used within \`${h}\``)}return b.displayName=h+"Provider",[b,C]}const u=()=>{const h=n.map(f=>Q.createContext(f));return function(o){const w=(o==null?void 0:o[e])||h;return Q.useMemo(()=>({[`__scope${e}`]:{...o,[e]:w}}),[o,w])}};return u.scopeName=e,[s,U9(u,...t)]}function U9(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const s=e.map(u=>({useScope:u(),scopeName:u.scopeName}));return function(h){const f=s.reduce((o,{useScope:w,scopeName:b})=>{const A=w(h)[`__scope${b}`];return{...o,...A}},{});return Q.useMemo(()=>({[`__scope${t.scopeName}`]:f}),[f])}};return n.scopeName=t.scopeName,n}function q9(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function _b(...e){return t=>e.forEach(n=>q9(n,t))}function Ff(...e){return Q.useCallback(_b(...e),e)}var nw=Q.forwardRef((e,t)=>{const{children:n,...s}=e,u=Q.Children.toArray(n),h=u.find(Z9);if(h){const f=h.props.children,o=u.map(w=>w===h?Q.Children.count(f)>1?Q.Children.only(null):Q.isValidElement(f)?f.props.children:null:w);return K(rw,{...s,ref:t,children:Q.isValidElement(f)?Q.cloneElement(f,void 0,o):null})}return K(rw,{...s,ref:t,children:n})});nw.displayName="Slot";var rw=Q.forwardRef((e,t)=>{const{children:n,...s}=e;if(Q.isValidElement(n)){const u=H9(n);return Q.cloneElement(n,{...W9(s,n.props),ref:t?_b(t,u):u})}return Q.Children.count(n)>1?Q.Children.only(null):null});rw.displayName="SlotClone";var G9=({children:e})=>K(rs,{children:e});function Z9(e){return Q.isValidElement(e)&&e.type===G9}function W9(e,t){const n={...t};for(const s in t){const u=e[s],h=t[s];/^on[A-Z]/.test(s)?u&&h?n[s]=(...o)=>{h(...o),u(...o)}:u&&(n[s]=u):s==="style"?n[s]={...u,...h}:s==="className"&&(n[s]=[u,h].filter(Boolean).join(" "))}return{...e,...n}}function H9(e){var s,u;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(u=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:u.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function K9(e){const t=e+"CollectionProvider",[n,s]=$9(t),[u,h]=n(t,{collectionRef:{current:null},itemMap:new Map}),f=N=>{const{scope:V,children:$}=N,G=_t.useRef(null),F=_t.useRef(new Map).current;return K(u,{scope:V,itemMap:F,collectionRef:G,children:$})};f.displayName=t;const o=e+"CollectionSlot",w=_t.forwardRef((N,V)=>{const{scope:$,children:G}=N,F=h(o,$),B=Ff(V,F.collectionRef);return K(nw,{ref:B,children:G})});w.displayName=o;const b=e+"CollectionItemSlot",C="data-radix-collection-item",A=_t.forwardRef((N,V)=>{const{scope:$,children:G,...F}=N,B=_t.useRef(null),H=Ff(V,B),J=h(b,$);return _t.useEffect(()=>(J.itemMap.set(B,{ref:B,...F}),()=>void J.itemMap.delete(B))),K(nw,{[C]:"",ref:H,children:G})});A.displayName=b;function M(N){const V=h(e+"CollectionConsumer",N);return _t.useCallback(()=>{const G=V.collectionRef.current;if(!G)return[];const F=Array.from(G.querySelectorAll(`[${C}]`));return Array.from(V.itemMap.values()).sort((J,fe)=>F.indexOf(J.ref.current)-F.indexOf(fe.ref.current))},[V.collectionRef,V.itemMap])}return[{Provider:f,Slot:w,ItemSlot:A},M,s]}function YR(e,t,{checkForDefaultPrevented:n=!0}={}){return function(u){if(e==null||e(u),n===!1||!u.defaultPrevented)return t==null?void 0:t(u)}}function JR(e){const t=Q.useRef(e);return Q.useEffect(()=>{t.current=e}),Q.useMemo(()=>(...n)=>{var s;return(s=t.current)==null?void 0:s.call(t,...n)},[])}function wb({prop:e,defaultProp:t,onChange:n=()=>{}}){const[s,u]=X9({defaultProp:t,onChange:n}),h=e!==void 0,f=h?e:s,o=JR(n),w=Q.useCallback(b=>{if(h){const A=typeof b=="function"?b(e):b;A!==e&&o(A)}else u(b)},[h,e,u,o]);return[f,w]}function X9({defaultProp:e,onChange:t}){const n=Q.useState(e),[s]=n,u=Q.useRef(s),h=JR(t);return Q.useEffect(()=>{u.current!==s&&(h(s),u.current=s)},[s,u,h]),n}var eD=Q.forwardRef((e,t)=>{const{children:n,...s}=e,u=Q.Children.toArray(n),h=u.find(Y9);if(h){const f=h.props.children,o=u.map(w=>w===h?Q.Children.count(f)>1?Q.Children.only(null):Q.isValidElement(f)?f.props.children:null:w);return K(iw,{...s,ref:t,children:Q.isValidElement(f)?Q.cloneElement(f,void 0,o):null})}return K(iw,{...s,ref:t,children:n})});eD.displayName="Slot";var iw=Q.forwardRef((e,t)=>{const{children:n,...s}=e;if(Q.isValidElement(n)){const u=eq(n);return Q.cloneElement(n,{...J9(s,n.props),ref:t?_b(t,u):u})}return Q.Children.count(n)>1?Q.Children.only(null):null});iw.displayName="SlotClone";var Q9=({children:e})=>K(rs,{children:e});function Y9(e){return Q.isValidElement(e)&&e.type===Q9}function J9(e,t){const n={...t};for(const s in t){const u=e[s],h=t[s];/^on[A-Z]/.test(s)?u&&h?n[s]=(...o)=>{h(...o),u(...o)}:u&&(n[s]=u):s==="style"?n[s]={...u,...h}:s==="className"&&(n[s]=[u,h].filter(Boolean).join(" "))}return{...e,...n}}function eq(e){var s,u;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(u=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:u.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var tq=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Xf=tq.reduce((e,t)=>{const n=Q.forwardRef((s,u)=>{const{asChild:h,...f}=s,o=h?eD:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),K(o,{...f,ref:u})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{}),Jg=globalThis!=null&&globalThis.document?Q.useLayoutEffect:()=>{};function nq(e,t){return Q.useReducer((n,s)=>t[n][s]??n,e)}var tD=e=>{const{present:t,children:n}=e,s=rq(t),u=typeof n=="function"?n({present:s.isPresent}):Q.Children.only(n),h=Ff(s.ref,iq(u));return typeof n=="function"||s.isPresent?Q.cloneElement(u,{ref:h}):null};tD.displayName="Presence";function rq(e){const[t,n]=Q.useState(),s=Q.useRef({}),u=Q.useRef(e),h=Q.useRef("none"),f=e?"mounted":"unmounted",[o,w]=nq(f,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return Q.useEffect(()=>{const b=Rm(s.current);h.current=o==="mounted"?b:"none"},[o]),Jg(()=>{const b=s.current,C=u.current;if(C!==e){const M=h.current,N=Rm(b);e?w("MOUNT"):N==="none"||(b==null?void 0:b.display)==="none"?w("UNMOUNT"):w(C&&M!==N?"ANIMATION_OUT":"UNMOUNT"),u.current=e}},[e,w]),Jg(()=>{if(t){let b;const C=t.ownerDocument.defaultView??window,A=N=>{const $=Rm(s.current).includes(N.animationName);if(N.target===t&&$&&(w("ANIMATION_END"),!u.current)){const G=t.style.animationFillMode;t.style.animationFillMode="forwards",b=C.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=G)})}},M=N=>{N.target===t&&(h.current=Rm(s.current))};return t.addEventListener("animationstart",M),t.addEventListener("animationcancel",A),t.addEventListener("animationend",A),()=>{C.clearTimeout(b),t.removeEventListener("animationstart",M),t.removeEventListener("animationcancel",A),t.removeEventListener("animationend",A)}}else w("ANIMATION_END")},[t,w]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:Q.useCallback(b=>{b&&(s.current=getComputedStyle(b)),n(b)},[])}}function Rm(e){return(e==null?void 0:e.animationName)||"none"}function iq(e){var s,u;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(u=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:u.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var sq=kP["useId".toString()]||(()=>{}),aq=0;function nD(e){const[t,n]=Q.useState(sq());return Jg(()=>{e||n(s=>s??String(aq++))},[e]),e||(t?`radix-${t}`:"")}var bb="Collapsible",[oq,rD]=QR(bb),[lq,Sb]=oq(bb),iD=Q.forwardRef((e,t)=>{const{__scopeCollapsible:n,open:s,defaultOpen:u,disabled:h,onOpenChange:f,...o}=e,[w=!1,b]=wb({prop:s,defaultProp:u,onChange:f});return K(lq,{scope:n,disabled:h,contentId:nD(),open:w,onOpenToggle:Q.useCallback(()=>b(C=>!C),[b]),children:K(Xf.div,{"data-state":Tb(w),"data-disabled":h?"":void 0,...o,ref:t})})});iD.displayName=bb;var sD="CollapsibleTrigger",aD=Q.forwardRef((e,t)=>{const{__scopeCollapsible:n,...s}=e,u=Sb(sD,n);return K(Xf.button,{type:"button","aria-controls":u.contentId,"aria-expanded":u.open||!1,"data-state":Tb(u.open),"data-disabled":u.disabled?"":void 0,disabled:u.disabled,...s,ref:t,onClick:YR(e.onClick,u.onOpenToggle)})});aD.displayName=sD;var Eb="CollapsibleContent",oD=Q.forwardRef((e,t)=>{const{forceMount:n,...s}=e,u=Sb(Eb,e.__scopeCollapsible);return K(tD,{present:n||u.open,children:({present:h})=>K(uq,{...s,ref:t,present:h})})});oD.displayName=Eb;var uq=Q.forwardRef((e,t)=>{const{__scopeCollapsible:n,present:s,children:u,...h}=e,f=Sb(Eb,n),[o,w]=Q.useState(s),b=Q.useRef(null),C=Ff(t,b),A=Q.useRef(0),M=A.current,N=Q.useRef(0),V=N.current,$=f.open||o,G=Q.useRef($),F=Q.useRef();return Q.useEffect(()=>{const B=requestAnimationFrame(()=>G.current=!1);return()=>cancelAnimationFrame(B)},[]),Jg(()=>{const B=b.current;if(B){F.current=F.current||{transitionDuration:B.style.transitionDuration,animationName:B.style.animationName},B.style.transitionDuration="0s",B.style.animationName="none";const H=B.getBoundingClientRect();A.current=H.height,N.current=H.width,G.current||(B.style.transitionDuration=F.current.transitionDuration,B.style.animationName=F.current.animationName),w(s)}},[f.open,s]),K(Xf.div,{"data-state":Tb(f.open),"data-disabled":f.disabled?"":void 0,id:f.contentId,hidden:!$,...h,ref:C,style:{"--radix-collapsible-content-height":M?`${M}px`:void 0,"--radix-collapsible-content-width":V?`${V}px`:void 0,...e.style},children:$&&u})});function Tb(e){return e?"open":"closed"}var cq=iD,hq=aD,dq=oD,fq=Q.createContext(void 0);function pq(e){const t=Q.useContext(fq);return e||t||"ltr"}var wo="Accordion",mq=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[Cb,gq,yq]=K9(wo),[ov,AZ]=QR(wo,[yq,rD]),Pb=rD(),lD=_t.forwardRef((e,t)=>{const{type:n,...s}=e,u=s,h=s;return K(Cb.Provider,{scope:e.__scopeAccordion,children:n==="multiple"?K(wq,{...h,ref:t}):K(_q,{...u,ref:t})})});lD.displayName=wo;var[uD,vq]=ov(wo),[cD,xq]=ov(wo,{collapsible:!1}),_q=_t.forwardRef((e,t)=>{const{value:n,defaultValue:s,onValueChange:u=()=>{},collapsible:h=!1,...f}=e,[o,w]=wb({prop:n,defaultProp:s,onChange:u});return K(uD,{scope:e.__scopeAccordion,value:o?[o]:[],onItemOpen:w,onItemClose:_t.useCallback(()=>h&&w(""),[h,w]),children:K(cD,{scope:e.__scopeAccordion,collapsible:h,children:K(hD,{...f,ref:t})})})}),wq=_t.forwardRef((e,t)=>{const{value:n,defaultValue:s,onValueChange:u=()=>{},...h}=e,[f=[],o]=wb({prop:n,defaultProp:s,onChange:u}),w=_t.useCallback(C=>o((A=[])=>[...A,C]),[o]),b=_t.useCallback(C=>o((A=[])=>A.filter(M=>M!==C)),[o]);return K(uD,{scope:e.__scopeAccordion,value:f,onItemOpen:w,onItemClose:b,children:K(cD,{scope:e.__scopeAccordion,collapsible:!0,children:K(hD,{...h,ref:t})})})}),[bq,lv]=ov(wo),hD=_t.forwardRef((e,t)=>{const{__scopeAccordion:n,disabled:s,dir:u,orientation:h="vertical",...f}=e,o=_t.useRef(null),w=Ff(o,t),b=gq(n),A=pq(u)==="ltr",M=YR(e.onKeyDown,N=>{var ve;if(!mq.includes(N.key))return;const V=N.target,$=b().filter(Ve=>{var Me;return!((Me=Ve.ref.current)!=null&&Me.disabled)}),G=$.findIndex(Ve=>Ve.ref.current===V),F=$.length;if(G===-1)return;N.preventDefault();let B=G;const H=0,J=F-1,fe=()=>{B=G+1,B>J&&(B=H)},Ee=()=>{B=G-1,B<H&&(B=J)};switch(N.key){case"Home":B=H;break;case"End":B=J;break;case"ArrowRight":h==="horizontal"&&(A?fe():Ee());break;case"ArrowDown":h==="vertical"&&fe();break;case"ArrowLeft":h==="horizontal"&&(A?Ee():fe());break;case"ArrowUp":h==="vertical"&&Ee();break}const Pe=B%F;(ve=$[Pe].ref.current)==null||ve.focus()});return K(bq,{scope:n,disabled:s,direction:u,orientation:h,children:K(Cb.Slot,{scope:n,children:K(Xf.div,{...f,"data-orientation":h,ref:w,onKeyDown:s?void 0:M})})})}),ey="AccordionItem",[Sq,Ab]=ov(ey),dD=_t.forwardRef((e,t)=>{const{__scopeAccordion:n,value:s,...u}=e,h=lv(ey,n),f=vq(ey,n),o=Pb(n),w=nD(),b=s&&f.value.includes(s)||!1,C=h.disabled||e.disabled;return K(Sq,{scope:n,open:b,disabled:C,triggerId:w,children:K(cq,{"data-orientation":h.orientation,"data-state":vD(b),...o,...u,ref:t,disabled:C,open:b,onOpenChange:A=>{A?f.onItemOpen(s):f.onItemClose(s)}})})});dD.displayName=ey;var fD="AccordionHeader",pD=_t.forwardRef((e,t)=>{const{__scopeAccordion:n,...s}=e,u=lv(wo,n),h=Ab(fD,n);return K(Xf.h3,{"data-orientation":u.orientation,"data-state":vD(h.open),"data-disabled":h.disabled?"":void 0,...s,ref:t})});pD.displayName=fD;var sw="AccordionTrigger",mD=_t.forwardRef((e,t)=>{const{__scopeAccordion:n,...s}=e,u=lv(wo,n),h=Ab(sw,n),f=xq(sw,n),o=Pb(n);return K(Cb.ItemSlot,{scope:n,children:K(hq,{"aria-disabled":h.open&&!f.collapsible||void 0,"data-orientation":u.orientation,id:h.triggerId,...o,...s,ref:t})})});mD.displayName=sw;var gD="AccordionContent",yD=_t.forwardRef((e,t)=>{const{__scopeAccordion:n,...s}=e,u=lv(wo,n),h=Ab(gD,n),f=Pb(n);return K(dq,{role:"region","aria-labelledby":h.triggerId,"data-orientation":u.orientation,...f,...s,ref:t,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...e.style}})});yD.displayName=gD;function vD(e){return e?"open":"closed"}var Eq=lD,Tq=dD,Cq=pD,xD=mD,_D=yD;const Pq=Eq,wD=_t.forwardRef(({className:e,...t},n)=>K(Tq,{ref:n,className:Al("",e),...t}));wD.displayName="AccordionItem";const bD=_t.forwardRef(({className:e,children:t,...n},s)=>K(Cq,{children:K(xD,{ref:s,className:Al("",e),...n,children:t})}));bD.displayName=xD.displayName;const SD=_t.forwardRef(({className:e,children:t,...n},s)=>K(_D,{ref:s,className:Al("naxatw-overflow-hidden data-[state=closed]:naxatw-animate-accordion-up data-[state=open]:naxatw-animate-accordion-down",e),...n,children:t}));SD.displayName=_D.displayName;function Gr({name:e,className:t,iconSymbolType:n="material-symbols-outlined",onClick:s}){return K("i",{role:"button",tabIndex:0,onKeyUp:()=>{},onClick:s,className:`naxatw-text-icon-sm lg:naxatw-text-2xl ${t} ${n}`,children:e})}const Aq=({faqsDataList:e})=>{const[t,n]=Q.useState(null);return K("div",{className:"accordion-wrapper",children:K(Pq,{type:"single",collapsible:!0,className:"naxatw-transition-all naxatw-duration-300 naxatw-ease-out",children:e.map(s=>Ne(wD,{value:`item-${s.id}`,className:"naxatw-border-b naxatw-border-b-[#A9A9A9]",onClick:()=>{if(t===s.id){n(null);return}n(s.id)},children:[Ne(bD,{className:"naxatw-flex naxatw-w-full  naxatw-items-center naxatw-justify-between naxatw-gap-4 naxatw-py-6 naxatw-text-left",children:[K("p",{className:"naxatw-text-xl naxatw-font-medium naxatw-leading-6 naxatw-tracking-[-0.01125rem] naxatw-text-[#2B2B2B] ",children:s.question}),t===s.id?K(Gr,{name:"remove_circle_outline",className:"naxatw-text-main"}):K(Gr,{name:"add_circle_outline",className:"hover:naxatw-text-main"})]}),t===s.id&&K(SD,{className:"data-[state=closed]:naxatw-animate-accordion-up",children:K("p",{className:"naxatw-overflow-hidden naxatw-pb-6 naxatw-text-lg naxatw-font-normal naxatw-tracking-[-0.01125rem] naxatw-text-[#4E4E4E]",children:s.answer})})]},s.id))})})};function kq(){return K("section",{className:"faq-section naxatw-bg-[#F5FAFF]",children:Ne("div",{className:"naxatw-container naxatw-py-10 md:naxatw-py-20",children:[K("p",{className:"naxatw-text-[3rem] naxatw-text-gray-800",children:"FAQs"}),K("div",{className:"faqs-container",children:K(Aq,{faqsDataList:z9})})]})})}const Iq="/assets/twitter-icon-26997669.svg",Mq="/assets/facebook-icon-2cec1970.svg",Rq="/assets/linkedin-icon-575d4072.svg",Dq="/assets/instagram-icon-1a2c4b29.svg";function Lq(){return K("section",{className:"footer naxatw-bg-primary",children:Ne("div",{className:"naxatw-container naxatw-py-10 md:naxatw-py-20 naxatw-flex naxatw-justify-between naxatw-flex-col md:naxatw-flex-row naxatw-items-center naxatw-gap-14 naxatw-animate-fade-up",children:[Ne(fu,{gap:2.5,children:[Ne(Ji,{className:"naxatw-text-white naxatw-items-center",gap:2,children:[K(Gr,{name:"public"}),K("div",{className:"naxatw-cursor-pointer",role:"presentation",children:K("h3",{className:"naxatw-text-white naxatw-font-medium",children:"GeoSewa"})})]}),Ne(fu,{gap:1,className:"naxatw-ml-3",children:[K("p",{className:"naxatw-text-white naxatw-text-body-lg",children:"geosewa7@gmail.com"}),K("p",{className:"naxatw-text-white naxatw-text-body-lg",children:"+977-9763252325"})]})]}),Ne(fu,{gap:2.5,children:[K("h4",{className:"naxatw-text-white naxatw-font-medium",children:"Follow Us On"}),Ne(Ji,{gap:2,children:[K(so,{src:Iq,width:20}),K(so,{src:Mq,width:20}),K(so,{src:Rq,width:20}),K(so,{src:Dq,width:20})]})]}),Ne(fu,{children:[K("h4",{className:"naxatw-text-white naxatw-font-medium naxatw-mb-2",children:"Payment Partners"}),K(Ji,{children:K("p",{className:"naxatw-text-white naxatw-text-xl",children:"Khalti"})})]})]})})}function zq(){return Ne("main",{className:"scrollbar",children:[K(ej,{}),K(T9,{}),K(N9,{}),K(V9,{}),K(kq,{}),K(Lq,{})]})}function Oq(){return K("main",{className:"notes naxatw-h-screen-nav naxatw-w-full",children:K(ev,{className:"naxatw-h-full naxatw-justify-center naxatw-animate-fade-up naxatw-font-medium naxatw-items-center",children:K("h3",{children:"The notes section is in progress. Stay tuned...."})})})}function Fq(){return K(Oq,{})}const Nq=({tabOptions:e,className:t,activeClassName:n,onTabChange:s,activeTab:u,clickable:h=!1,orientation:f="column"})=>{const[o,w]=Q.useState(u);Q.useEffect(()=>{w(u)},[u]);const b=C=>{h&&(w(C),s(C))};return K("div",{className:`${f==="column"?"":"naxatw-flex"}`,children:e.map(C=>K("div",{className:`${t} naxatw-cursor-pointer naxatw-text-gray-600a ${o===C.value?`${n} !naxatw-border-b-primary naxatw-border-b-2 naxatw-text-primary`:"hover:naxatw-text-primary"}`,onClick:()=>b(C.value),children:K("p",{className:"naxatw-px-3 naxatw-py-2 naxatw-text-body-btn",children:C.label})},C.id))})},Bq=[{id:1,label:"Exam Section",value:"exam-section"},{id:2,label:"Form Section",value:"form-section"}],{setCommonState:Nf,toggleModal:sh,setModalContent:ED,togglePromptDialog:Vq,setToggleNavbar:$C,setPromptDialogContent:jq,setLoginState:UC}=oM.actions;function TD(e,t){return function(){return e.apply(t,arguments)}}const{toString:$q}=Object.prototype,{getPrototypeOf:kb}=Object,uv=(e=>t=>{const n=$q.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Ia=e=>(e=e.toLowerCase(),t=>uv(t)===e),cv=e=>t=>typeof t===e,{isArray:yh}=Array,Bf=cv("undefined");function Uq(e){return e!==null&&!Bf(e)&&e.constructor!==null&&!Bf(e.constructor)&&Is(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const CD=Ia("ArrayBuffer");function qq(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&CD(e.buffer),t}const Gq=cv("string"),Is=cv("function"),PD=cv("number"),hv=e=>e!==null&&typeof e=="object",Zq=e=>e===!0||e===!1,sg=e=>{if(uv(e)!=="object")return!1;const t=kb(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Wq=Ia("Date"),Hq=Ia("File"),Kq=Ia("Blob"),Xq=Ia("FileList"),Qq=e=>hv(e)&&Is(e.pipe),Yq=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Is(e.append)&&((t=uv(e))==="formdata"||t==="object"&&Is(e.toString)&&e.toString()==="[object FormData]"))},Jq=Ia("URLSearchParams"),e7=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Qf(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let s,u;if(typeof e!="object"&&(e=[e]),yh(e))for(s=0,u=e.length;s<u;s++)t.call(null,e[s],s,e);else{const h=n?Object.getOwnPropertyNames(e):Object.keys(e),f=h.length;let o;for(s=0;s<f;s++)o=h[s],t.call(null,e[o],o,e)}}function AD(e,t){t=t.toLowerCase();const n=Object.keys(e);let s=n.length,u;for(;s-- >0;)if(u=n[s],t===u.toLowerCase())return u;return null}const kD=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),ID=e=>!Bf(e)&&e!==kD;function aw(){const{caseless:e}=ID(this)&&this||{},t={},n=(s,u)=>{const h=e&&AD(t,u)||u;sg(t[h])&&sg(s)?t[h]=aw(t[h],s):sg(s)?t[h]=aw({},s):yh(s)?t[h]=s.slice():t[h]=s};for(let s=0,u=arguments.length;s<u;s++)arguments[s]&&Qf(arguments[s],n);return t}const t7=(e,t,n,{allOwnKeys:s}={})=>(Qf(t,(u,h)=>{n&&Is(u)?e[h]=TD(u,n):e[h]=u},{allOwnKeys:s}),e),n7=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),r7=(e,t,n,s)=>{e.prototype=Object.create(t.prototype,s),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},i7=(e,t,n,s)=>{let u,h,f;const o={};if(t=t||{},e==null)return t;do{for(u=Object.getOwnPropertyNames(e),h=u.length;h-- >0;)f=u[h],(!s||s(f,e,t))&&!o[f]&&(t[f]=e[f],o[f]=!0);e=n!==!1&&kb(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},s7=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const s=e.indexOf(t,n);return s!==-1&&s===n},a7=e=>{if(!e)return null;if(yh(e))return e;let t=e.length;if(!PD(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},o7=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&kb(Uint8Array)),l7=(e,t)=>{const s=(e&&e[Symbol.iterator]).call(e);let u;for(;(u=s.next())&&!u.done;){const h=u.value;t.call(e,h[0],h[1])}},u7=(e,t)=>{let n;const s=[];for(;(n=e.exec(t))!==null;)s.push(n);return s},c7=Ia("HTMLFormElement"),h7=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,s,u){return s.toUpperCase()+u}),qC=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),d7=Ia("RegExp"),MD=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),s={};Qf(n,(u,h)=>{let f;(f=t(u,h,e))!==!1&&(s[h]=f||u)}),Object.defineProperties(e,s)},f7=e=>{MD(e,(t,n)=>{if(Is(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const s=e[n];if(Is(s)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},p7=(e,t)=>{const n={},s=u=>{u.forEach(h=>{n[h]=!0})};return yh(e)?s(e):s(String(e).split(t)),n},m7=()=>{},g7=(e,t)=>(e=+e,Number.isFinite(e)?e:t),__="abcdefghijklmnopqrstuvwxyz",GC="0123456789",RD={DIGIT:GC,ALPHA:__,ALPHA_DIGIT:__+__.toUpperCase()+GC},y7=(e=16,t=RD.ALPHA_DIGIT)=>{let n="";const{length:s}=t;for(;e--;)n+=t[Math.random()*s|0];return n};function v7(e){return!!(e&&Is(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const x7=e=>{const t=new Array(10),n=(s,u)=>{if(hv(s)){if(t.indexOf(s)>=0)return;if(!("toJSON"in s)){t[u]=s;const h=yh(s)?[]:{};return Qf(s,(f,o)=>{const w=n(f,u+1);!Bf(w)&&(h[o]=w)}),t[u]=void 0,h}}return s};return n(e,0)},_7=Ia("AsyncFunction"),w7=e=>e&&(hv(e)||Is(e))&&Is(e.then)&&Is(e.catch),Ue={isArray:yh,isArrayBuffer:CD,isBuffer:Uq,isFormData:Yq,isArrayBufferView:qq,isString:Gq,isNumber:PD,isBoolean:Zq,isObject:hv,isPlainObject:sg,isUndefined:Bf,isDate:Wq,isFile:Hq,isBlob:Kq,isRegExp:d7,isFunction:Is,isStream:Qq,isURLSearchParams:Jq,isTypedArray:o7,isFileList:Xq,forEach:Qf,merge:aw,extend:t7,trim:e7,stripBOM:n7,inherits:r7,toFlatObject:i7,kindOf:uv,kindOfTest:Ia,endsWith:s7,toArray:a7,forEachEntry:l7,matchAll:u7,isHTMLForm:c7,hasOwnProperty:qC,hasOwnProp:qC,reduceDescriptors:MD,freezeMethods:f7,toObjectSet:p7,toCamelCase:h7,noop:m7,toFiniteNumber:g7,findKey:AD,global:kD,isContextDefined:ID,ALPHABET:RD,generateString:y7,isSpecCompliantForm:v7,toJSONObject:x7,isAsyncFn:_7,isThenable:w7};function nn(e,t,n,s,u){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),s&&(this.request=s),u&&(this.response=u)}Ue.inherits(nn,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Ue.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const DD=nn.prototype,LD={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{LD[e]={value:e}});Object.defineProperties(nn,LD);Object.defineProperty(DD,"isAxiosError",{value:!0});nn.from=(e,t,n,s,u,h)=>{const f=Object.create(DD);return Ue.toFlatObject(e,f,function(w){return w!==Error.prototype},o=>o!=="isAxiosError"),nn.call(f,e.message,t,n,s,u),f.cause=e,f.name=e.name,h&&Object.assign(f,h),f};const b7=null;function ow(e){return Ue.isPlainObject(e)||Ue.isArray(e)}function zD(e){return Ue.endsWith(e,"[]")?e.slice(0,-2):e}function ZC(e,t,n){return e?e.concat(t).map(function(u,h){return u=zD(u),!n&&h?"["+u+"]":u}).join(n?".":""):t}function S7(e){return Ue.isArray(e)&&!e.some(ow)}const E7=Ue.toFlatObject(Ue,{},null,function(t){return/^is[A-Z]/.test(t)});function dv(e,t,n){if(!Ue.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=Ue.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function($,G){return!Ue.isUndefined(G[$])});const s=n.metaTokens,u=n.visitor||C,h=n.dots,f=n.indexes,w=(n.Blob||typeof Blob<"u"&&Blob)&&Ue.isSpecCompliantForm(t);if(!Ue.isFunction(u))throw new TypeError("visitor must be a function");function b(V){if(V===null)return"";if(Ue.isDate(V))return V.toISOString();if(!w&&Ue.isBlob(V))throw new nn("Blob is not supported. Use a Buffer instead.");return Ue.isArrayBuffer(V)||Ue.isTypedArray(V)?w&&typeof Blob=="function"?new Blob([V]):Buffer.from(V):V}function C(V,$,G){let F=V;if(V&&!G&&typeof V=="object"){if(Ue.endsWith($,"{}"))$=s?$:$.slice(0,-2),V=JSON.stringify(V);else if(Ue.isArray(V)&&S7(V)||(Ue.isFileList(V)||Ue.endsWith($,"[]"))&&(F=Ue.toArray(V)))return $=zD($),F.forEach(function(H,J){!(Ue.isUndefined(H)||H===null)&&t.append(f===!0?ZC([$],J,h):f===null?$:$+"[]",b(H))}),!1}return ow(V)?!0:(t.append(ZC(G,$,h),b(V)),!1)}const A=[],M=Object.assign(E7,{defaultVisitor:C,convertValue:b,isVisitable:ow});function N(V,$){if(!Ue.isUndefined(V)){if(A.indexOf(V)!==-1)throw Error("Circular reference detected in "+$.join("."));A.push(V),Ue.forEach(V,function(F,B){(!(Ue.isUndefined(F)||F===null)&&u.call(t,F,Ue.isString(B)?B.trim():B,$,M))===!0&&N(F,$?$.concat(B):[B])}),A.pop()}}if(!Ue.isObject(e))throw new TypeError("data must be an object");return N(e),t}function WC(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(s){return t[s]})}function Ib(e,t){this._pairs=[],e&&dv(e,this,t)}const OD=Ib.prototype;OD.append=function(t,n){this._pairs.push([t,n])};OD.toString=function(t){const n=t?function(s){return t.call(this,s,WC)}:WC;return this._pairs.map(function(u){return n(u[0])+"="+n(u[1])},"").join("&")};function T7(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function FD(e,t,n){if(!t)return e;const s=n&&n.encode||T7,u=n&&n.serialize;let h;if(u?h=u(t,n):h=Ue.isURLSearchParams(t)?t.toString():new Ib(t,n).toString(s),h){const f=e.indexOf("#");f!==-1&&(e=e.slice(0,f)),e+=(e.indexOf("?")===-1?"?":"&")+h}return e}class C7{constructor(){this.handlers=[]}use(t,n,s){return this.handlers.push({fulfilled:t,rejected:n,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Ue.forEach(this.handlers,function(s){s!==null&&t(s)})}}const HC=C7,ND={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},P7=typeof URLSearchParams<"u"?URLSearchParams:Ib,A7=typeof FormData<"u"?FormData:null,k7=typeof Blob<"u"?Blob:null,I7={isBrowser:!0,classes:{URLSearchParams:P7,FormData:A7,Blob:k7},protocols:["http","https","file","blob","url","data"]},BD=typeof window<"u"&&typeof document<"u",M7=(e=>BD&&["ReactNative","NativeScript","NS"].indexOf(e)<0)(typeof navigator<"u"&&navigator.product),R7=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),D7=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:BD,hasStandardBrowserEnv:M7,hasStandardBrowserWebWorkerEnv:R7},Symbol.toStringTag,{value:"Module"})),ba={...D7,...I7};function L7(e,t){return dv(e,new ba.classes.URLSearchParams,Object.assign({visitor:function(n,s,u,h){return ba.isNode&&Ue.isBuffer(n)?(this.append(s,n.toString("base64")),!1):h.defaultVisitor.apply(this,arguments)}},t))}function z7(e){return Ue.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function O7(e){const t={},n=Object.keys(e);let s;const u=n.length;let h;for(s=0;s<u;s++)h=n[s],t[h]=e[h];return t}function VD(e){function t(n,s,u,h){let f=n[h++];if(f==="__proto__")return!0;const o=Number.isFinite(+f),w=h>=n.length;return f=!f&&Ue.isArray(u)?u.length:f,w?(Ue.hasOwnProp(u,f)?u[f]=[u[f],s]:u[f]=s,!o):((!u[f]||!Ue.isObject(u[f]))&&(u[f]=[]),t(n,s,u[f],h)&&Ue.isArray(u[f])&&(u[f]=O7(u[f])),!o)}if(Ue.isFormData(e)&&Ue.isFunction(e.entries)){const n={};return Ue.forEachEntry(e,(s,u)=>{t(z7(s),u,n,0)}),n}return null}function F7(e,t,n){if(Ue.isString(e))try{return(t||JSON.parse)(e),Ue.trim(e)}catch(s){if(s.name!=="SyntaxError")throw s}return(n||JSON.stringify)(e)}const Mb={transitional:ND,adapter:["xhr","http"],transformRequest:[function(t,n){const s=n.getContentType()||"",u=s.indexOf("application/json")>-1,h=Ue.isObject(t);if(h&&Ue.isHTMLForm(t)&&(t=new FormData(t)),Ue.isFormData(t))return u?JSON.stringify(VD(t)):t;if(Ue.isArrayBuffer(t)||Ue.isBuffer(t)||Ue.isStream(t)||Ue.isFile(t)||Ue.isBlob(t))return t;if(Ue.isArrayBufferView(t))return t.buffer;if(Ue.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let o;if(h){if(s.indexOf("application/x-www-form-urlencoded")>-1)return L7(t,this.formSerializer).toString();if((o=Ue.isFileList(t))||s.indexOf("multipart/form-data")>-1){const w=this.env&&this.env.FormData;return dv(o?{"files[]":t}:t,w&&new w,this.formSerializer)}}return h||u?(n.setContentType("application/json",!1),F7(t)):t}],transformResponse:[function(t){const n=this.transitional||Mb.transitional,s=n&&n.forcedJSONParsing,u=this.responseType==="json";if(t&&Ue.isString(t)&&(s&&!this.responseType||u)){const f=!(n&&n.silentJSONParsing)&&u;try{return JSON.parse(t)}catch(o){if(f)throw o.name==="SyntaxError"?nn.from(o,nn.ERR_BAD_RESPONSE,this,null,this.response):o}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ba.classes.FormData,Blob:ba.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Ue.forEach(["delete","get","head","post","put","patch"],e=>{Mb.headers[e]={}});const Rb=Mb,N7=Ue.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),B7=e=>{const t={};let n,s,u;return e&&e.split(`
`).forEach(function(f){u=f.indexOf(":"),n=f.substring(0,u).trim().toLowerCase(),s=f.substring(u+1).trim(),!(!n||t[n]&&N7[n])&&(n==="set-cookie"?t[n]?t[n].push(s):t[n]=[s]:t[n]=t[n]?t[n]+", "+s:s)}),t},KC=Symbol("internals");function zd(e){return e&&String(e).trim().toLowerCase()}function ag(e){return e===!1||e==null?e:Ue.isArray(e)?e.map(ag):String(e)}function V7(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=n.exec(e);)t[s[1]]=s[2];return t}const j7=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function w_(e,t,n,s,u){if(Ue.isFunction(s))return s.call(this,t,n);if(u&&(t=n),!!Ue.isString(t)){if(Ue.isString(s))return t.indexOf(s)!==-1;if(Ue.isRegExp(s))return s.test(t)}}function $7(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,s)=>n.toUpperCase()+s)}function U7(e,t){const n=Ue.toCamelCase(" "+t);["get","set","has"].forEach(s=>{Object.defineProperty(e,s+n,{value:function(u,h,f){return this[s].call(this,t,u,h,f)},configurable:!0})})}class fv{constructor(t){t&&this.set(t)}set(t,n,s){const u=this;function h(o,w,b){const C=zd(w);if(!C)throw new Error("header name must be a non-empty string");const A=Ue.findKey(u,C);(!A||u[A]===void 0||b===!0||b===void 0&&u[A]!==!1)&&(u[A||w]=ag(o))}const f=(o,w)=>Ue.forEach(o,(b,C)=>h(b,C,w));return Ue.isPlainObject(t)||t instanceof this.constructor?f(t,n):Ue.isString(t)&&(t=t.trim())&&!j7(t)?f(B7(t),n):t!=null&&h(n,t,s),this}get(t,n){if(t=zd(t),t){const s=Ue.findKey(this,t);if(s){const u=this[s];if(!n)return u;if(n===!0)return V7(u);if(Ue.isFunction(n))return n.call(this,u,s);if(Ue.isRegExp(n))return n.exec(u);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=zd(t),t){const s=Ue.findKey(this,t);return!!(s&&this[s]!==void 0&&(!n||w_(this,this[s],s,n)))}return!1}delete(t,n){const s=this;let u=!1;function h(f){if(f=zd(f),f){const o=Ue.findKey(s,f);o&&(!n||w_(s,s[o],o,n))&&(delete s[o],u=!0)}}return Ue.isArray(t)?t.forEach(h):h(t),u}clear(t){const n=Object.keys(this);let s=n.length,u=!1;for(;s--;){const h=n[s];(!t||w_(this,this[h],h,t,!0))&&(delete this[h],u=!0)}return u}normalize(t){const n=this,s={};return Ue.forEach(this,(u,h)=>{const f=Ue.findKey(s,h);if(f){n[f]=ag(u),delete n[h];return}const o=t?$7(h):String(h).trim();o!==h&&delete n[h],n[o]=ag(u),s[o]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return Ue.forEach(this,(s,u)=>{s!=null&&s!==!1&&(n[u]=t&&Ue.isArray(s)?s.join(", "):s)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const s=new this(t);return n.forEach(u=>s.set(u)),s}static accessor(t){const s=(this[KC]=this[KC]={accessors:{}}).accessors,u=this.prototype;function h(f){const o=zd(f);s[o]||(U7(u,f),s[o]=!0)}return Ue.isArray(t)?t.forEach(h):h(t),this}}fv.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Ue.reduceDescriptors(fv.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(s){this[n]=s}}});Ue.freezeMethods(fv);const ho=fv;function b_(e,t){const n=this||Rb,s=t||n,u=ho.from(s.headers);let h=s.data;return Ue.forEach(e,function(o){h=o.call(n,h,u.normalize(),t?t.status:void 0)}),u.normalize(),h}function jD(e){return!!(e&&e.__CANCEL__)}function Yf(e,t,n){nn.call(this,e??"canceled",nn.ERR_CANCELED,t,n),this.name="CanceledError"}Ue.inherits(Yf,nn,{__CANCEL__:!0});function q7(e,t,n){const s=n.config.validateStatus;!n.status||!s||s(n.status)?e(n):t(new nn("Request failed with status code "+n.status,[nn.ERR_BAD_REQUEST,nn.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const G7=ba.hasStandardBrowserEnv?{write(e,t,n,s,u,h){const f=[e+"="+encodeURIComponent(t)];Ue.isNumber(n)&&f.push("expires="+new Date(n).toGMTString()),Ue.isString(s)&&f.push("path="+s),Ue.isString(u)&&f.push("domain="+u),h===!0&&f.push("secure"),document.cookie=f.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Z7(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function W7(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function $D(e,t){return e&&!Z7(t)?W7(e,t):t}const H7=ba.hasStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let s;function u(h){let f=h;return t&&(n.setAttribute("href",f),f=n.href),n.setAttribute("href",f),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return s=u(window.location.href),function(f){const o=Ue.isString(f)?u(f):f;return o.protocol===s.protocol&&o.host===s.host}}():function(){return function(){return!0}}();function K7(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function X7(e,t){e=e||10;const n=new Array(e),s=new Array(e);let u=0,h=0,f;return t=t!==void 0?t:1e3,function(w){const b=Date.now(),C=s[h];f||(f=b),n[u]=w,s[u]=b;let A=h,M=0;for(;A!==u;)M+=n[A++],A=A%e;if(u=(u+1)%e,u===h&&(h=(h+1)%e),b-f<t)return;const N=C&&b-C;return N?Math.round(M*1e3/N):void 0}}function XC(e,t){let n=0;const s=X7(50,250);return u=>{const h=u.loaded,f=u.lengthComputable?u.total:void 0,o=h-n,w=s(o),b=h<=f;n=h;const C={loaded:h,total:f,progress:f?h/f:void 0,bytes:o,rate:w||void 0,estimated:w&&f&&b?(f-h)/w:void 0,event:u};C[t?"download":"upload"]=!0,e(C)}}const Q7=typeof XMLHttpRequest<"u",Y7=Q7&&function(e){return new Promise(function(n,s){let u=e.data;const h=ho.from(e.headers).normalize();let{responseType:f,withXSRFToken:o}=e,w;function b(){e.cancelToken&&e.cancelToken.unsubscribe(w),e.signal&&e.signal.removeEventListener("abort",w)}let C;if(Ue.isFormData(u)){if(ba.hasStandardBrowserEnv||ba.hasStandardBrowserWebWorkerEnv)h.setContentType(!1);else if((C=h.getContentType())!==!1){const[$,...G]=C?C.split(";").map(F=>F.trim()).filter(Boolean):[];h.setContentType([$||"multipart/form-data",...G].join("; "))}}let A=new XMLHttpRequest;if(e.auth){const $=e.auth.username||"",G=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";h.set("Authorization","Basic "+btoa($+":"+G))}const M=$D(e.baseURL,e.url);A.open(e.method.toUpperCase(),FD(M,e.params,e.paramsSerializer),!0),A.timeout=e.timeout;function N(){if(!A)return;const $=ho.from("getAllResponseHeaders"in A&&A.getAllResponseHeaders()),F={data:!f||f==="text"||f==="json"?A.responseText:A.response,status:A.status,statusText:A.statusText,headers:$,config:e,request:A};q7(function(H){n(H),b()},function(H){s(H),b()},F),A=null}if("onloadend"in A?A.onloadend=N:A.onreadystatechange=function(){!A||A.readyState!==4||A.status===0&&!(A.responseURL&&A.responseURL.indexOf("file:")===0)||setTimeout(N)},A.onabort=function(){A&&(s(new nn("Request aborted",nn.ECONNABORTED,e,A)),A=null)},A.onerror=function(){s(new nn("Network Error",nn.ERR_NETWORK,e,A)),A=null},A.ontimeout=function(){let G=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const F=e.transitional||ND;e.timeoutErrorMessage&&(G=e.timeoutErrorMessage),s(new nn(G,F.clarifyTimeoutError?nn.ETIMEDOUT:nn.ECONNABORTED,e,A)),A=null},ba.hasStandardBrowserEnv&&(o&&Ue.isFunction(o)&&(o=o(e)),o||o!==!1&&H7(M))){const $=e.xsrfHeaderName&&e.xsrfCookieName&&G7.read(e.xsrfCookieName);$&&h.set(e.xsrfHeaderName,$)}u===void 0&&h.setContentType(null),"setRequestHeader"in A&&Ue.forEach(h.toJSON(),function(G,F){A.setRequestHeader(F,G)}),Ue.isUndefined(e.withCredentials)||(A.withCredentials=!!e.withCredentials),f&&f!=="json"&&(A.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&A.addEventListener("progress",XC(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&A.upload&&A.upload.addEventListener("progress",XC(e.onUploadProgress)),(e.cancelToken||e.signal)&&(w=$=>{A&&(s(!$||$.type?new Yf(null,e,A):$),A.abort(),A=null)},e.cancelToken&&e.cancelToken.subscribe(w),e.signal&&(e.signal.aborted?w():e.signal.addEventListener("abort",w)));const V=K7(M);if(V&&ba.protocols.indexOf(V)===-1){s(new nn("Unsupported protocol "+V+":",nn.ERR_BAD_REQUEST,e));return}A.send(u||null)})},lw={http:b7,xhr:Y7};Ue.forEach(lw,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const QC=e=>`- ${e}`,J7=e=>Ue.isFunction(e)||e===null||e===!1,UD={getAdapter:e=>{e=Ue.isArray(e)?e:[e];const{length:t}=e;let n,s;const u={};for(let h=0;h<t;h++){n=e[h];let f;if(s=n,!J7(n)&&(s=lw[(f=String(n)).toLowerCase()],s===void 0))throw new nn(`Unknown adapter '${f}'`);if(s)break;u[f||"#"+h]=s}if(!s){const h=Object.entries(u).map(([o,w])=>`adapter ${o} `+(w===!1?"is not supported by the environment":"is not available in the build"));let f=t?h.length>1?`since :
`+h.map(QC).join(`
`):" "+QC(h[0]):"as no adapter specified";throw new nn("There is no suitable adapter to dispatch the request "+f,"ERR_NOT_SUPPORT")}return s},adapters:lw};function S_(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Yf(null,e)}function YC(e){return S_(e),e.headers=ho.from(e.headers),e.data=b_.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),UD.getAdapter(e.adapter||Rb.adapter)(e).then(function(s){return S_(e),s.data=b_.call(e,e.transformResponse,s),s.headers=ho.from(s.headers),s},function(s){return jD(s)||(S_(e),s&&s.response&&(s.response.data=b_.call(e,e.transformResponse,s.response),s.response.headers=ho.from(s.response.headers))),Promise.reject(s)})}const JC=e=>e instanceof ho?{...e}:e;function ah(e,t){t=t||{};const n={};function s(b,C,A){return Ue.isPlainObject(b)&&Ue.isPlainObject(C)?Ue.merge.call({caseless:A},b,C):Ue.isPlainObject(C)?Ue.merge({},C):Ue.isArray(C)?C.slice():C}function u(b,C,A){if(Ue.isUndefined(C)){if(!Ue.isUndefined(b))return s(void 0,b,A)}else return s(b,C,A)}function h(b,C){if(!Ue.isUndefined(C))return s(void 0,C)}function f(b,C){if(Ue.isUndefined(C)){if(!Ue.isUndefined(b))return s(void 0,b)}else return s(void 0,C)}function o(b,C,A){if(A in t)return s(b,C);if(A in e)return s(void 0,b)}const w={url:h,method:h,data:h,baseURL:f,transformRequest:f,transformResponse:f,paramsSerializer:f,timeout:f,timeoutMessage:f,withCredentials:f,withXSRFToken:f,adapter:f,responseType:f,xsrfCookieName:f,xsrfHeaderName:f,onUploadProgress:f,onDownloadProgress:f,decompress:f,maxContentLength:f,maxBodyLength:f,beforeRedirect:f,transport:f,httpAgent:f,httpsAgent:f,cancelToken:f,socketPath:f,responseEncoding:f,validateStatus:o,headers:(b,C)=>u(JC(b),JC(C),!0)};return Ue.forEach(Object.keys(Object.assign({},e,t)),function(C){const A=w[C]||u,M=A(e[C],t[C],C);Ue.isUndefined(M)&&A!==o||(n[C]=M)}),n}const qD="1.6.8",Db={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Db[e]=function(s){return typeof s===e||"a"+(t<1?"n ":" ")+e}});const eP={};Db.transitional=function(t,n,s){function u(h,f){return"[Axios v"+qD+"] Transitional option '"+h+"'"+f+(s?". "+s:"")}return(h,f,o)=>{if(t===!1)throw new nn(u(f," has been removed"+(n?" in "+n:"")),nn.ERR_DEPRECATED);return n&&!eP[f]&&(eP[f]=!0,console.warn(u(f," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(h,f,o):!0}};function eG(e,t,n){if(typeof e!="object")throw new nn("options must be an object",nn.ERR_BAD_OPTION_VALUE);const s=Object.keys(e);let u=s.length;for(;u-- >0;){const h=s[u],f=t[h];if(f){const o=e[h],w=o===void 0||f(o,h,e);if(w!==!0)throw new nn("option "+h+" must be "+w,nn.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new nn("Unknown option "+h,nn.ERR_BAD_OPTION)}}const uw={assertOptions:eG,validators:Db},Go=uw.validators;class ty{constructor(t){this.defaults=t,this.interceptors={request:new HC,response:new HC}}async request(t,n){try{return await this._request(t,n)}catch(s){if(s instanceof Error){let u;Error.captureStackTrace?Error.captureStackTrace(u={}):u=new Error;const h=u.stack?u.stack.replace(/^.+\n/,""):"";s.stack?h&&!String(s.stack).endsWith(h.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+h):s.stack=h}throw s}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=ah(this.defaults,n);const{transitional:s,paramsSerializer:u,headers:h}=n;s!==void 0&&uw.assertOptions(s,{silentJSONParsing:Go.transitional(Go.boolean),forcedJSONParsing:Go.transitional(Go.boolean),clarifyTimeoutError:Go.transitional(Go.boolean)},!1),u!=null&&(Ue.isFunction(u)?n.paramsSerializer={serialize:u}:uw.assertOptions(u,{encode:Go.function,serialize:Go.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let f=h&&Ue.merge(h.common,h[n.method]);h&&Ue.forEach(["delete","get","head","post","put","patch","common"],V=>{delete h[V]}),n.headers=ho.concat(f,h);const o=[];let w=!0;this.interceptors.request.forEach(function($){typeof $.runWhen=="function"&&$.runWhen(n)===!1||(w=w&&$.synchronous,o.unshift($.fulfilled,$.rejected))});const b=[];this.interceptors.response.forEach(function($){b.push($.fulfilled,$.rejected)});let C,A=0,M;if(!w){const V=[YC.bind(this),void 0];for(V.unshift.apply(V,o),V.push.apply(V,b),M=V.length,C=Promise.resolve(n);A<M;)C=C.then(V[A++],V[A++]);return C}M=o.length;let N=n;for(A=0;A<M;){const V=o[A++],$=o[A++];try{N=V(N)}catch(G){$.call(this,G);break}}try{C=YC.call(this,N)}catch(V){return Promise.reject(V)}for(A=0,M=b.length;A<M;)C=C.then(b[A++],b[A++]);return C}getUri(t){t=ah(this.defaults,t);const n=$D(t.baseURL,t.url);return FD(n,t.params,t.paramsSerializer)}}Ue.forEach(["delete","get","head","options"],function(t){ty.prototype[t]=function(n,s){return this.request(ah(s||{},{method:t,url:n,data:(s||{}).data}))}});Ue.forEach(["post","put","patch"],function(t){function n(s){return function(h,f,o){return this.request(ah(o||{},{method:t,headers:s?{"Content-Type":"multipart/form-data"}:{},url:h,data:f}))}}ty.prototype[t]=n(),ty.prototype[t+"Form"]=n(!0)});const og=ty;class Lb{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(h){n=h});const s=this;this.promise.then(u=>{if(!s._listeners)return;let h=s._listeners.length;for(;h-- >0;)s._listeners[h](u);s._listeners=null}),this.promise.then=u=>{let h;const f=new Promise(o=>{s.subscribe(o),h=o}).then(u);return f.cancel=function(){s.unsubscribe(h)},f},t(function(h,f,o){s.reason||(s.reason=new Yf(h,f,o),n(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}static source(){let t;return{token:new Lb(function(u){t=u}),cancel:t}}}const tG=Lb;function nG(e){return function(n){return e.apply(null,n)}}function rG(e){return Ue.isObject(e)&&e.isAxiosError===!0}const cw={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(cw).forEach(([e,t])=>{cw[t]=e});const iG=cw;function GD(e){const t=new og(e),n=TD(og.prototype.request,t);return Ue.extend(n,og.prototype,t,{allOwnKeys:!0}),Ue.extend(n,t,null,{allOwnKeys:!0}),n.create=function(u){return GD(ah(e,u))},n}const fr=GD(Rb);fr.Axios=og;fr.CanceledError=Yf;fr.CancelToken=tG;fr.isCancel=jD;fr.VERSION=qD;fr.toFormData=dv;fr.AxiosError=nn;fr.Cancel=fr.CanceledError;fr.all=function(t){return Promise.all(t)};fr.spread=nG;fr.isAxiosError=rG;fr.mergeConfig=ah;fr.AxiosHeaders=ho;fr.formToJSON=e=>VD(Ue.isHTMLForm(e)?new FormData(e):e);fr.getAdapter=UD.getAdapter;fr.HttpStatusCode=iG;fr.default=fr;const Jf=fr,ZD="https://sujanadh.pythonanywhere.com/api",Ma=Jf.create({baseURL:ZD,timeout:5*60*1e3,headers:{accept:"application/json","Content-Type":"application/json"}});Jf.create({baseURL:ZD,timeout:5*60*1e3,headers:{accept:"application/json","Content-Type":"multipart/form-data"}});Ma.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t?(e.headers=e.headers||{},e.headers.Authorization=`Bearer ${t}`):e.headers&&e.headers.Authorization&&delete e.headers.Authorization,e},e=>Promise.reject(e));const sG=e=>Ma.get("mcq/questions/",{params:e}),aG=()=>Ma.get("exams/sets/"),oG=e=>Ma.post(`exams/sets/${e}/start/`),lG=e=>Ma.get(`exams/attempt/${e}/`),uG=(e,t)=>Ma.post(`exams/attempt/${e}/save-answer/`,t),cG=e=>Ma.post(`exams/attempt/${e}/submit/`),hG=e=>Ma.get(`exams/exam-results/${e}/`);function dG(){const e=Pl(),[t,n]=Q.useState([]),[s,u]=Q.useState(!0),[h,f]=Q.useState(null),[o,w]=Q.useState(!1);Q.useEffect(()=>{(async()=>{u(!0),f(null);try{const A=await aG();n(A.data)}catch(A){f("Error loading mock tests"),console.error("Error fetching mock tests:",A)}finally{u(!1)}})()},[]);const b=async C=>{var A,M;w(!0),f(null);try{const N=await oG(C),V=N.data.attempt_id||N.data.id||N.data.attempt;if(!V)throw new Error("No attempt id returned from server");e(Nf({examView:"mcq-test",selectedMockTest:C,attemptId:V.toString()}))}catch(N){console.error("Error starting attempt:",N),f(((M=(A=N.response)==null?void 0:A.data)==null?void 0:M.message)||"Failed to start attempt. Please try again.")}finally{w(!1)}};return s?K("div",{className:"naxatw-p-8",children:"Loading mock tests..."}):o?K("div",{className:"naxatw-p-8",children:"Starting attempt..."}):h?Ne("div",{className:"naxatw-p-8",children:[K("div",{className:"naxatw-text-red-500 naxatw-mb-4",children:h}),K("button",{onClick:()=>window.location.reload(),className:"naxatw-bg-primary naxatw-text-white naxatw-py-2 naxatw-px-4 naxatw-rounded-md",children:"Retry"})]}):K("section",{className:"naxatw-h-full naxatw-w-full naxatw-p-4",children:Ne("div",{className:"naxatw-max-w-4xl naxatw-mx-auto naxatw-my-8",children:[Ne("div",{className:"naxatw-flex naxatw-justify-between naxatw-items-center naxatw-mb-6",children:[K("h2",{className:"naxatw-text-2xl naxatw-font-semibold",children:"Available Mock Tests"}),K("button",{onClick:()=>e(Nf({examView:"main"})),className:"naxatw-text-primary naxatw-underline",children:"Back to Exam Section"})]}),K("div",{className:"naxatw-grid naxatw-grid-cols-1 naxatw-md:grid-cols-2 naxatw-lg:grid-cols-3 naxatw-gap-6",children:t.map(C=>Ne("div",{className:"naxatw-bg-white naxatw-rounded-lg naxatw-shadow-md naxatw-p-6 naxatw-cursor-pointer hover:naxatw-shadow-lg naxatw-transition-shadow",onClick:()=>b(C.id),children:[K("h3",{className:"naxatw-text-lg naxatw-font-semibold naxatw-mb-2",children:C.title}),K("p",{className:"naxatw-text-gray-600 naxatw-mb-4 naxatw-line-clamp-3",children:C.description}),Ne("div",{className:"naxatw-flex naxatw-justify-between naxatw-items-center naxatw-mb-4",children:[K("span",{className:`naxatw-px-2 naxatw-py-1 naxatw-rounded-full naxatw-text-xs naxatw-font-medium ${C.difficulty==="beginner"?"naxatw-bg-green-100 naxatw-text-green-800":C.difficulty==="intermediate"?"naxatw-bg-yellow-100 naxatw-text-yellow-800":C.difficulty==="advanced"?"naxatw-bg-orange-100 naxatw-text-orange-800":"naxatw-bg-red-100 naxatw-text-red-800"}`,children:C.difficulty}),Ne("span",{className:"naxatw-text-lg naxatw-font-bold naxatw-text-primary",children:["$",C.price]})]}),Ne("div",{className:"naxatw-flex naxatw-justify-between naxatw-text-sm naxatw-text-gray-500",children:[Ne("span",{children:[C.total_questions||0," questions"]}),Ne("span",{children:[C.duration_minutes||0," minutes"]})]})]},C.id))}),t.length===0&&!s&&K("div",{className:"naxatw-text-center naxatw-text-gray-500 naxatw-mt-8",children:"No mock tests available at the moment."})]})})}function fG(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function pG(...e){return t=>e.forEach(n=>fG(n,t))}const WD=Q.forwardRef((e,t)=>{const{children:n,...s}=e,u=Q.Children.toArray(n),h=u.find(gG);if(h){const f=h.props.children,o=u.map(w=>w===h?Q.Children.count(f)>1?Q.Children.only(null):Q.isValidElement(f)?f.props.children:null:w);return Q.createElement(hw,Eu({},s,{ref:t}),Q.isValidElement(f)?Q.cloneElement(f,void 0,o):null)}return Q.createElement(hw,Eu({},s,{ref:t}),n)});WD.displayName="Slot";const hw=Q.forwardRef((e,t)=>{const{children:n,...s}=e;return Q.isValidElement(n)?Q.cloneElement(n,{...yG(s,n.props),ref:t?pG(t,n.ref):n.ref}):Q.Children.count(n)>1?Q.Children.only(null):null});hw.displayName="SlotClone";const mG=({children:e})=>Q.createElement(Q.Fragment,null,e);function gG(e){return Q.isValidElement(e)&&e.type===mG}function yG(e,t){const n={...t};for(const s in t){const u=e[s],h=t[s];/^on[A-Z]/.test(s)?u&&h?n[s]=(...o)=>{h(...o),u(...o)}:u&&(n[s]=u):s==="style"?n[s]={...u,...h}:s==="className"&&(n[s]=[u,h].filter(Boolean).join(" "))}return{...e,...n}}function HD(e){var t,n,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=HD(e[t]))&&(s&&(s+=" "),s+=n);else for(t in e)e[t]&&(s&&(s+=" "),s+=t);return s}function vG(){for(var e,t,n=0,s="";n<arguments.length;)(e=arguments[n++])&&(t=HD(e))&&(s&&(s+=" "),s+=t);return s}const tP=e=>typeof e=="boolean"?"".concat(e):e===0?"0":e,nP=vG,xG=(e,t)=>n=>{var s;if((t==null?void 0:t.variants)==null)return nP(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:u,defaultVariants:h}=t,f=Object.keys(u).map(b=>{const C=n==null?void 0:n[b],A=h==null?void 0:h[b];if(C===null)return null;const M=tP(C)||tP(A);return u[b][M]}),o=n&&Object.entries(n).reduce((b,C)=>{let[A,M]=C;return M===void 0||(b[A]=M),b},{}),w=t==null||(s=t.compoundVariants)===null||s===void 0?void 0:s.reduce((b,C)=>{let{class:A,className:M,...N}=C;return Object.entries(N).every(V=>{let[$,G]=V;return Array.isArray(G)?G.includes({...h,...o}[$]):{...h,...o}[$]===G})?[...b,A,M]:b},[]);return nP(e,f,w,n==null?void 0:n.class,n==null?void 0:n.className)};function _G({className:e}){return K("div",{role:"status",className:"naxatw-flex naxatw-items-center",children:Ne("svg",{"aria-hidden":"true",className:`naxatw-h-[24px] naxatw-w-[24px] naxatw-animate-spin ${e}`,viewBox:"0 0 100 101",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[K("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"currentColor"}),K("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentFill"})]},e)})}const wG=xG(`naxatw-inline-flex naxatw-items-center naxatw-justify-center naxatw-rounded-md naxatw-text-sm 
  naxatw-font-bold naxatw-transition-colors focus-visible:naxatw-outline-none focus-visible:naxatw-ring-2 
  focus-visible:ring-ring focus-visible:naxatw-ring-offset-2 disabled:naxatw-opacity-50 disabled:naxatw-pointer-events-none`,{variants:{variant:{default:"naxatw-bg-primary naxatw-text-white hover:naxatw-shadow-top hover:naxatw-shadow-primary",destructive:"naxatw-bg-red-500 naxatw-text-white hover:naxatw-shadow-top hover:naxatw-shadow-red-500",outline:`naxatw-border naxatw-text-primary naxatw-border- hover:naxatw-bg-primary hover:naxatw-text-white naxatw-border-input 
        hover:naxatw-shadow-top naxatw-bg-white`,secondary:"naxatw-bg-white naxatw-text-primary naxatw-border naxatw-border-primary hover:naxatw-shadow-top",ghost:"naxatw-text-primary naxatw-font-bold disabled:naxatw-text-grey-600 hover:naxatw-text-red-500",link:`naxatw-text-primary naxatw-font-bold naxatw-underline-offset-4 naxatw-underline hover:naxatw-no-underline
         naxatw-text-primarycolor hover:naxatw-shadow hover:naxatw-shadow-primary`},size:{default:"naxatw-h-9 naxatw-py-2 naxatw-px-3",sm:"naxatw-h-7 naxatw-px-2 naxatw-rounded-lg",lg:"naxatw-h-11 naxatw-px-8 naxatw-rounded-md"}},defaultVariants:{variant:"default",size:"default"}}),KD=Q.forwardRef(({className:e,variant:t,size:n,asChild:s=!1,...u},h)=>K(s?WD:"button",{className:Al(wG({variant:t,size:n,className:e})),ref:h,...u}));KD.displayName="Button";function Ps({leftIcon:e,rightIcon:t,children:n,iconClassname:s,withLoader:u,isLoading:h,className:f,...o}){return Ne(KD,{...o,className:`naxatw-flex naxatw-items-center naxatw-gap-1 ${f}`,children:[e&&K(Gr,{className:`${s} !naxatw-text-icon-sm`,name:e}),n,t&&K(Gr,{className:`${s} !naxatw-text-icon-sm`,name:t}),u&&h&&K(_G,{className:"naxatw-fill-primary-500"})]})}function bG(){const e=io(je=>je.common.selectedMockTest),t=io(je=>je.common.attemptId),n=Pl(),s=Q.useRef(null),[u,h]=Q.useState([]),[f,o]=Q.useState(!0),[w,b]=Q.useState(!1),[C,A]=Q.useState(null),[M,N]=Q.useState({}),[V,$]=Q.useState(!1),[G,F]=Q.useState(null),[B,H]=Q.useState(1),J=10,fe=Math.ceil(u.length/J),Ee=(B-1)*J,Pe=Math.min(Ee+J,u.length),ve=u.slice(Ee,Pe),Ve=je=>`mockTestAnswers_${je}`,Me=()=>{if(!G)return{correct:0,incorrect:0,unanswered:0};const je=G.detailed_results.filter(ft=>ft.is_correct).length,Re=G.detailed_results.filter(ft=>!ft.is_correct).length,Ke=G.detailed_results.filter(ft=>!ft.selected_choices||ft.selected_choices.length===0).length;return{correct:je,incorrect:Re,unanswered:Ke}};Q.useEffect(()=>{if(!t)return;(async()=>{var Re,Ke;o(!0),A(null);try{const Rt=(await lG(t)).data;if(console.log("Exam attempt data:",Rt),Rt.questions&&Array.isArray(Rt.questions))h(Rt.questions);else throw new Error("No questions found in exam attempt");const Bt=localStorage.getItem(Ve(t));if(Bt)try{const It=JSON.parse(Bt);N(It)}catch{console.warn("Failed to parse saved answers from localStorage")}Rt.saved_answers&&typeof Rt.saved_answers=="object"&&N(It=>({...It,...Rt.saved_answers}))}catch(ft){console.error("Error fetching exam attempt:",ft),A(((Ke=(Re=ft.response)==null?void 0:Re.data)==null?void 0:Ke.message)||"Error loading questions. Please try again.")}finally{o(!1)}})()},[t]),Q.useEffect(()=>{t&&Object.keys(M).length>0&&localStorage.setItem(Ve(t),JSON.stringify(M))},[M,t]);const pt=(je,Re)=>{N(Ke=>({...Ke,[je]:Re}))},qe=async()=>{var je,Re;if(!t){A("No attempt ID found");return}b(!0),A(null);try{const Ke=localStorage.getItem(Ve(t));let ft={};if(Ke)try{ft=JSON.parse(Ke)}catch{ft=M}else ft=M;for(const[Rt,Bt]of Object.entries(ft))try{await uG(t,{question_id:parseInt(Rt),selected_choices:[Bt]})}catch(It){console.warn(`Failed to save answer for question ${Rt}:`,It)}console.log("All answers saved successfully"),await cG(t),console.log("Exam submitted successfully");try{const Rt=await hG(t);F(Rt.data)}catch(Rt){console.warn("Could not fetch results:",Rt)}localStorage.removeItem(Ve(t)),$(!0)}catch(Ke){console.error("Error submitting exam:",Ke),A(((Re=(je=Ke.response)==null?void 0:je.data)==null?void 0:Re.message)||"Error submitting exam. Please try again.")}finally{b(!1)}},it=()=>{t&&localStorage.removeItem(Ve(t)),n(Nf({examView:"mock-tests",selectedMockTest:null,attemptId:null}))},ut=()=>{B<fe&&H(je=>je+1)},bt=()=>{B>1&&H(je=>je-1)};if(Q.useEffect(()=>{s.current&&(s.current.scrollTop=0,s.current.scrollIntoView({behavior:"smooth",block:"start"}))},[B]),f)return K("div",{className:"naxatw-flex naxatw-items-center naxatw-justify-center naxatw-h-64",children:Ne("div",{className:"naxatw-text-center",children:[K("div",{className:"naxatw-text-lg naxatw-mb-2",children:"Loading questions..."}),K("div",{className:"naxatw-text-gray-500",children:"Please wait while we prepare your exam"})]})});if(C)return K("div",{className:"naxatw-p-8",children:Ne("div",{className:"naxatw-text-center",children:[K("div",{className:"naxatw-text-red-500 naxatw-mb-4",children:C}),K(Ps,{onClick:it,className:"naxatw-bg-primary naxatw-text-white naxatw-py-2 naxatw-px-4 naxatw-rounded-md",children:"Back to Mock Tests"})]})});if(!Array.isArray(u)||u.length===0)return K("div",{className:"naxatw-p-8",children:Ne("div",{className:"naxatw-text-center",children:[K("div",{className:"naxatw-text-gray-500 naxatw-mb-4",children:"No questions available for this exam."}),K(Ps,{onClick:it,className:"naxatw-bg-primary naxatw-text-white naxatw-py-2 naxatw-px-4 naxatw-rounded-md",children:"Back to Mock Tests"})]})});const ct=Me();return K("section",{className:"naxatw-h-full naxatw-w-full naxatw-p-4",children:Ne("div",{className:"naxatw-max-w-4xl naxatw-mx-auto naxatw-my-8",children:[Ne("div",{className:"naxatw-flex naxatw-justify-between naxatw-items-center naxatw-mb-6",children:[Ne("h2",{className:"naxatw-text-2xl naxatw-font-semibold",children:["Mock Test ",e]}),K("button",{onClick:it,className:"naxatw-text-primary naxatw-underline",children:"Back to Mock Tests"})]}),V?Ne("div",{className:"naxatw-bg-white naxatw-rounded-lg naxatw-shadow-md naxatw-p-6",children:[G?Ne(rs,{children:[Ne("div",{className:"naxatw-text-center naxatw-mb-8",children:[K("h3",{className:"naxatw-text-2xl naxatw-font-bold naxatw-mb-4",children:"Exam Results"}),Ne("div",{className:"naxatw-grid naxatw-grid-cols-2 naxatw-md:grid-cols-4 naxatw-gap-4 naxatw-mb-6",children:[Ne("div",{className:"naxatw-bg-blue-50 naxatw-p-4 naxatw-rounded-lg",children:[K("div",{className:"naxatw-text-2xl naxatw-font-bold naxatw-text-blue-600",children:G.score}),K("div",{className:"naxatw-text-sm naxatw-text-gray-600",children:"Score"})]}),Ne("div",{className:"naxatw-bg-green-50 naxatw-p-4 naxatw-rounded-lg",children:[K("div",{className:"naxatw-text-2xl naxatw-font-bold naxatw-text-green-600",children:ct.correct}),K("div",{className:"naxatw-text-sm naxatw-text-gray-600",children:"Correct"})]}),Ne("div",{className:"naxatw-bg-red-50 naxatw-p-4 naxatw-rounded-lg",children:[K("div",{className:"naxatw-text-2xl naxatw-font-bold naxatw-text-red-600",children:ct.incorrect}),K("div",{className:"naxatw-text-sm naxatw-text-gray-600",children:"Incorrect"})]}),Ne("div",{className:"naxatw-bg-gray-50 naxatw-p-4 naxatw-rounded-lg",children:[Ne("div",{className:"naxatw-text-2xl naxatw-font-bold naxatw-text-gray-600",children:[G.score_percentage,"%"]}),K("div",{className:"naxatw-text-sm naxatw-text-gray-600",children:"Percentage"})]})]}),Ne("div",{className:"naxatw-grid naxatw-grid-cols-1 naxatw-md:grid-cols-3 naxatw-gap-4 naxatw-mb-6",children:[Ne("div",{className:"naxatw-bg-purple-50 naxatw-p-3 naxatw-rounded-lg",children:[K("div",{className:"naxatw-text-lg naxatw-font-semibold naxatw-text-purple-700",children:G.total_points}),K("div",{className:"naxatw-text-sm naxatw-text-gray-600",children:"Total Points"})]}),Ne("div",{className:"naxatw-bg-indigo-50 naxatw-p-3 naxatw-rounded-lg",children:[K("div",{className:"naxatw-text-lg naxatw-font-semibold naxatw-text-indigo-700",children:G.time_taken}),K("div",{className:"naxatw-text-sm naxatw-text-gray-600",children:"Time Taken"})]})]})]}),Ne("div",{className:"naxatw-space-y-6 naxatw-mb-6",children:[K("h4",{className:"naxatw-text-xl naxatw-font-semibold naxatw-border-b naxatw-pb-2",children:"Detailed Results"}),G.detailed_results&&G.detailed_results.length>0?G.detailed_results.map((je,Re)=>K("div",{className:"naxatw-border naxatw-rounded-lg naxatw-p-6",children:Ne("div",{className:"naxatw-flex naxatw-gap-3 naxatw-mb-4",children:[K("span",{className:`naxatw-inline-flex naxatw-items-center naxatw-justify-center naxatw-w-8 naxatw-h-8 naxatw-rounded-full naxatw-text-white naxatw-font-bold ${je.is_correct?"naxatw-bg-green-500":"naxatw-bg-red-500"}`,children:Re+1}),Ne("div",{className:"naxatw-flex-1",children:[K("h5",{className:"naxatw-font-medium naxatw-text-lg naxatw-mb-2",children:je.question_text}),Ne("div",{className:"naxatw-mb-3",children:[K("span",{className:"naxatw-font-medium naxatw-text-gray-700",children:"Your Answer: "}),je.selected_choices&&je.selected_choices.length>0?K("span",{className:`naxatw-font-semibold ${je.is_correct?"naxatw-text-green-600":"naxatw-text-red-600"}`,children:je.selected_choices.map(Ke=>Ke.choice_text).join(", ")}):K("span",{className:"naxatw-text-gray-500 italic",children:"No answer provided"})]}),!je.is_correct&&Ne("div",{className:"naxatw-mb-3",children:[K("span",{className:"naxatw-font-medium naxatw-text-gray-700",children:"Correct Answer: "}),K("span",{className:"naxatw-font-semibold naxatw-text-green-600",children:je.correct_choices.map(Ke=>Ke.choice_text).join(", ")})]}),je.explanation&&Ne("div",{className:"naxatw-bg-gray-50 naxatw-p-3 naxatw-rounded-md naxatw-mt-3",children:[K("span",{className:"naxatw-font-medium naxatw-text-gray-700",children:"Explanation: "}),K("span",{className:"naxatw-text-gray-600",children:je.explanation})]})]})]})},je.question_id)):K("div",{className:"naxatw-text-center naxatw-text-gray-500 naxatw-py-8",children:"Detailed results will be available shortly."})]})]}):Ne("div",{className:"naxatw-text-center",children:[K("h3",{className:"naxatw-text-xl naxatw-font-semibold naxatw-mb-4",children:"Exam Submitted Successfully!"}),K("p",{className:"naxatw-text-gray-600 naxatw-mb-6",children:"Your exam has been submitted and is being processed. You can check your results later from the exam history."}),Ne("div",{className:"naxatw-bg-green-50 naxatw-border naxatw-border-green-200 naxatw-rounded-lg naxatw-p-4 naxatw-mb-6",children:[K("p",{className:"naxatw-text-green-800 naxatw-font-medium",children:"✓ All your answers have been saved"}),K("p",{className:"naxatw-text-green-700 naxatw-text-sm",children:"✓ Exam has been submitted successfully"})]})]}),K("div",{className:"naxatw-text-center",children:K(Ps,{onClick:it,className:"naxatw-bg-primary naxatw-text-white naxatw-py-2 naxatw-px-8 naxatw-rounded-md hover:naxatw-bg-primary/90",children:"Back to Mock Tests"})})]}):Ne(rs,{children:[Ne("div",{ref:s,className:"naxatw-bg-white naxatw-rounded-lg naxatw-shadow-md naxatw-p-6 naxatw-mb-6",children:[Ne("div",{className:"naxatw-flex naxatw-justify-between naxatw-items-center naxatw-mb-4",children:[K("h3",{className:"naxatw-text-lg naxatw-font-bold",children:"Questions"}),Ne("span",{className:"naxatw-text-sm naxatw-text-gray-500",children:["Page ",B," of ",fe," • ",u.length," total questions"]})]}),ve.map((je,Re)=>Ne("div",{className:"naxatw-mb-8 naxatw-border-b naxatw-pb-4 naxatw-last:border-0",children:[Ne("div",{className:"naxatw-mb-3",children:[Ne("h4",{className:"naxatw-font-medium naxatw-text-lg",children:[Ee+Re+1,". ",je.question_text]}),je.image&&K("img",{src:je.image,alt:"Question",className:"naxatw-mt-2 naxatw-max-w-full naxatw-h-auto naxatw-rounded"})]}),K("div",{className:"naxatw-pl-4",children:Array.isArray(je.choices)&&je.choices.length>0?je.choices.map(Ke=>Ne("div",{className:"naxatw-flex naxatw-items-center naxatw-gap-3 naxatw-my-3",children:[K("input",{type:"radio",id:`q${je.id}-${Ke.id}`,name:`question-${je.id}`,checked:M[je.id]===Ke.id,onChange:()=>pt(je.id,Ke.id),className:"naxatw-cursor-pointer naxatw-w-4 naxatw-h-4"}),K("label",{htmlFor:`q${je.id}-${Ke.id}`,className:"naxatw-cursor-pointer naxatw-flex-1 naxatw-text-gray-700",children:Ke.choice_text})]},Ke.id)):K("div",{className:"naxatw-text-gray-400 naxatw-italic",children:"No options available."})})]},je.id))]}),Ne("div",{className:"naxatw-flex naxatw-justify-between naxatw-items-center naxatw-mb-6 naxatw-pb-4",children:[B>1&&K(Ps,{onClick:bt,className:"naxatw-bg-gray-500 naxatw-text-white naxatw-py-2 naxatw-px-4 naxatw-rounded-md hover:naxatw-bg-gray-600",children:"Previous"}),B===fe?K("div",{className:"naxatw-flex naxatw-justify-center naxatw-w-full",children:K(Ps,{onClick:qe,disabled:w,className:"naxatw-bg-primary naxatw-text-white naxatw-py-3 naxatw-px-8 naxatw-rounded-md hover:naxatw-bg-primary/90 disabled:naxatw-opacity-50",children:w?"Submitting...":"Submit Exam"})}):K("div",{className:`${B===1?"naxatw-ml-auto":""}`,children:K(Ps,{onClick:ut,className:"naxatw-bg-primary naxatw-text-white naxatw-py-2 naxatw-px-4 naxatw-rounded-md hover:naxatw-bg-primary/90",children:"Next"})})]})]})]})})}function rP(){const e=Pl(),t=io(s=>s.common.examView),n=()=>{e(Nf({examView:"mock-tests"}))};return t==="mock-tests"?K(dG,{}):t==="mcq-test"?K(bG,{}):K("section",{className:"naxatw-h-full naxatw-w-full naxatw-p-4",children:Ne("div",{className:"naxatw-w-[20rem] naxatw-cursor-pointer naxatw-border-primary naxatw-flex naxatw-h-[4rem] naxatw-gap-1 naxatw-justify-center naxatw-items-center naxatw-p-4 naxatw-border naxatw-rounded-md",onClick:n,children:[K(Gr,{name:"edit_note",className:"naxatw-text-[10em] naxatw-text-primary"}),K("h5",{children:"Geomatics License Mock Test"})]})})}function SG(){return K("section",{className:"naxatw-h-full naxatw-w-full naxatw-p-4",children:Ne("div",{className:"naxatw-w-[20rem] naxatw-cursor-pointer naxatw-border-primary naxatw-flex naxatw-h-[4rem] naxatw-gap-2 naxatw-justify-center naxatw-items-center naxatw-p-4 naxatw-border naxatw-rounded-md",onClick:()=>window.open("https://docs.google.com/forms/d/e/1FAIpQLSdXQT4kRARLykvhLpgBpcbl-th53jy3FhIxNuOiXyMrzzQJ0g/viewform?usp=send_form","_blank"),children:[K(Gr,{name:"summarize",className:"naxatw-text-[10em] naxatw-text-primary"}),K("h5",{children:"Geomatics License Exam Form"})]})})}const EG=e=>{switch(e){case"exam-section":return K(rP,{});case"form-section":return K(SG,{});default:return K(rP,{})}};function TG(){const e=Pl(),t=io(n=>n.common.activeExamTab);return a4({queryKey:["key"],queryFn:()=>sG({set:1})}),K("main",{className:"notes naxatw-h-screen-nav naxatw-w-full naxatw-bg-white",children:Ne("div",{className:"naxatw-container naxatw-py-4 naxatw-h-full",children:[K(Nq,{orientation:"row",clickable:!0,onTabChange:n=>{e(Nf({activeExamTab:n}))},tabOptions:Bq,activeTab:t}),EG(t)]})})}function Ys({children:e,htmlFor:t,required:n}){return Ne("label",{className:"naxatw-text-sm naxatw-text-grey-800",htmlFor:t==null?void 0:t.toString(),children:[e,n&&K("span",{className:"naxatw-text-red-500",children:"*"})]})}const oi=Q.forwardRef(({className:e,placeholder:t,type:n,...s},u)=>K("input",{type:n,placeholder:t||"Search",className:Al("naxatw-flex naxatw-rounded-[4px] naxatw-border naxatw-border-[#555555] naxatw-bg-transparent naxatw-p-2 naxatw-text-body-md file:naxatw-font-medium hover:naxatw-border-red focus:naxatw-border-red focus:naxatw-bg-transparent focus:naxatw-outline-none disabled:naxatw-cursor-not-allowed",e),ref:u,...s}));oi.displayName="Input";function Ya({children:e,className:t}){return K(fu,{className:t,children:e})}function CG(){return Ne("div",{className:"contact-form animation-area",children:[K("div",{className:"title naxatw-mb-12 md:naxatw-mb-16",children:Ne("p",{className:"naxatw-text-[2.75rem] naxatw-leading-[3.75rem] naxatw-tracking-[-0.04125rem] naxatw-text-[#07090D]",children:["Get in Touch with Us"," "]})}),Ne("form",{action:"",children:[Ne("div",{className:"naxatw-grid naxatw-grid-cols-2 naxatw-gap-x-7 naxatw-gap-y-4",children:[Ne("div",{className:"form-control naxatw-flex naxatw-w-full naxatw-flex-col naxatw-gap-2",children:[K("p",{className:"naxatw-text-[0.875rem] naxatw-leading-4 naxatw-text-[#343434]",children:"Name"}),K(oi,{type:"text",name:"name",className:"naxatw-w-full !naxatw-rounded-lg naxatw-border !naxatw-border-b naxatw-border-solid !naxatw-border-[#969696] !naxatw-text-[0.875rem] naxatw-leading-5 !naxatw-text-[#343434] hover:!naxatw-border-[#969696] focus:!naxatw-border-[#343434]",placeholder:"Name"})]}),Ne("div",{className:"form-control naxatw-flex naxatw-w-full naxatw-flex-col naxatw-gap-2",children:[K("p",{className:"naxatw-text-[0.875rem] naxatw-leading-4 naxatw-text-[#343434]",children:"Email"}),K(oi,{type:"text",className:" naxatw-w-full !naxatw-rounded-lg naxatw-border !naxatw-border-b naxatw-border-solid !naxatw-border-[#969696]  !naxatw-text-[0.875rem] naxatw-leading-5 !naxatw-text-[#343434] hover:!naxatw-border-[#969696] focus:!naxatw-border-[#343434]",placeholder:"Email"})]}),Ne("div",{className:"form-control naxatw-flex naxatw-w-full naxatw-flex-col naxatw-gap-2",children:[K("p",{className:"naxatw-text-[0.875rem] naxatw-leading-4 naxatw-text-[#343434]",children:"Phone"}),K(oi,{type:"text",className:"naxatw-w-full !naxatw-rounded-lg naxatw-border !naxatw-border-b naxatw-border-solid !naxatw-border-[#969696] !naxatw-text-[0.875rem] naxatw-leading-5 !naxatw-text-[#343434] hover:!naxatw-border-[#969696] focus:!naxatw-border-[#343434]",placeholder:"Phone"})]}),Ne("div",{className:"form-control naxatw-flex naxatw-w-full naxatw-flex-col naxatw-gap-2",children:[K("p",{className:"naxatw-text-[0.875rem] naxatw-leading-4 naxatw-text-[#343434]",children:"College/Organization"}),K(oi,{type:"text",className:"naxatw-w-full !naxatw-rounded-lg naxatw-border !naxatw-border-b naxatw-border-solid !naxatw-border-[#969696] !naxatw-text-[0.875rem] naxatw-leading-5 !naxatw-text-[#343434] hover:!naxatw-border-[#969696] focus:!naxatw-border-[#343434]",placeholder:"College/Organization"})]})]}),K("div",{className:"naxatw-my-6",children:K("textarea",{placeholder:"Describe to us how you would use GeoSewa",className:"naxatw-h-[7.75rem] naxatw-w-full  naxatw-resize-none naxatw-rounded-lg !naxatw-border !naxatw-border-solid !naxatw-border-[#969696] naxatw-p-3  naxatw-text-[#343434] focus:!naxatw-border-[#343434] focus:!naxatw-outline-none"})}),Ne("button",{className:"btn hover:naxatw-bg-primary naxatw-relative naxatw-z-10 naxatw-flex naxatw-h-14 naxatw-items-center naxatw-justify-start naxatw-gap-4 naxatw-overflow-hidden naxatw-rounded-[2.4375rem] naxatw-bg-[#39CDF2] naxatw-px-5 naxatw-py-3 naxatw-no-underline naxatw-shadow-[0px_1px_2px_0px_rgba(16,24,40,0.05)] naxatw-w-[12.5rem]",type:"button",children:[K("span",{className:"naxatw-text-base naxatw-font-semibold naxatw-leading-6 naxatw-tracking-[-0.011rem] naxatw-text-white",children:"Send message"}),K(Gr,{name:"east",className:"naxatw-text-white"})]})]})]})}const{Children:iP,cloneElement:sP,forwardRef:PG}=_t,AG=PG(({children:e,map:t,isMapLoaded:n,...s},u)=>{const h=iP.count(e),f={map:t,isMapLoaded:n};return K("div",{id:"maplibre-gl-map",...s,children:h<1?K(rs,{}):h>1?iP.map(e,o=>o?sP(o,{...f}):K(rs,{})):sP(e,{...f})})});var XD={exports:{}};(function(e,t){(function(n,s){e.exports=s()})(lO,function(){var n,s,u;function h(o,w){if(!n)n=w;else if(!s)s=w;else{var b="var sharedChunk = {}; ("+n+")(sharedChunk); ("+s+")(sharedChunk);",C={};n(C),u=w(C),typeof window<"u"&&(u.workerUrl=window.URL.createObjectURL(new Blob([b],{type:"text/javascript"})))}}h(["exports"],function(o){function w(a,r,l,d){return new(l||(l=Promise))(function(m,v){function _(I){try{P(d.next(I))}catch(D){v(D)}}function S(I){try{P(d.throw(I))}catch(D){v(D)}}function P(I){var D;I.done?m(I.value):(D=I.value,D instanceof l?D:new l(function(O){O(D)})).then(_,S)}P((d=d.apply(a,r||[])).next())})}function b(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}typeof SuppressedError=="function"&&SuppressedError;var C=A;function A(a,r){this.x=a,this.y=r}A.prototype={clone:function(){return new A(this.x,this.y)},add:function(a){return this.clone()._add(a)},sub:function(a){return this.clone()._sub(a)},multByPoint:function(a){return this.clone()._multByPoint(a)},divByPoint:function(a){return this.clone()._divByPoint(a)},mult:function(a){return this.clone()._mult(a)},div:function(a){return this.clone()._div(a)},rotate:function(a){return this.clone()._rotate(a)},rotateAround:function(a,r){return this.clone()._rotateAround(a,r)},matMult:function(a){return this.clone()._matMult(a)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(a){return this.x===a.x&&this.y===a.y},dist:function(a){return Math.sqrt(this.distSqr(a))},distSqr:function(a){var r=a.x-this.x,l=a.y-this.y;return r*r+l*l},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(a){return Math.atan2(this.y-a.y,this.x-a.x)},angleWith:function(a){return this.angleWithSep(a.x,a.y)},angleWithSep:function(a,r){return Math.atan2(this.x*r-this.y*a,this.x*a+this.y*r)},_matMult:function(a){var r=a[2]*this.x+a[3]*this.y;return this.x=a[0]*this.x+a[1]*this.y,this.y=r,this},_add:function(a){return this.x+=a.x,this.y+=a.y,this},_sub:function(a){return this.x-=a.x,this.y-=a.y,this},_mult:function(a){return this.x*=a,this.y*=a,this},_div:function(a){return this.x/=a,this.y/=a,this},_multByPoint:function(a){return this.x*=a.x,this.y*=a.y,this},_divByPoint:function(a){return this.x/=a.x,this.y/=a.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var a=this.y;return this.y=this.x,this.x=-a,this},_rotate:function(a){var r=Math.cos(a),l=Math.sin(a),d=l*this.x+r*this.y;return this.x=r*this.x-l*this.y,this.y=d,this},_rotateAround:function(a,r){var l=Math.cos(a),d=Math.sin(a),m=r.y+d*(this.x-r.x)+l*(this.y-r.y);return this.x=r.x+l*(this.x-r.x)-d*(this.y-r.y),this.y=m,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},A.convert=function(a){return a instanceof A?a:Array.isArray(a)?new A(a[0],a[1]):a};var M=b(C),N=V;function V(a,r,l,d){this.cx=3*a,this.bx=3*(l-a)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*r,this.by=3*(d-r)-this.cy,this.ay=1-this.cy-this.by,this.p1x=a,this.p1y=r,this.p2x=l,this.p2y=d}V.prototype={sampleCurveX:function(a){return((this.ax*a+this.bx)*a+this.cx)*a},sampleCurveY:function(a){return((this.ay*a+this.by)*a+this.cy)*a},sampleCurveDerivativeX:function(a){return(3*this.ax*a+2*this.bx)*a+this.cx},solveCurveX:function(a,r){if(r===void 0&&(r=1e-6),a<0)return 0;if(a>1)return 1;for(var l=a,d=0;d<8;d++){var m=this.sampleCurveX(l)-a;if(Math.abs(m)<r)return l;var v=this.sampleCurveDerivativeX(l);if(Math.abs(v)<1e-6)break;l-=m/v}var _=0,S=1;for(l=a,d=0;d<20&&(m=this.sampleCurveX(l),!(Math.abs(m-a)<r));d++)a>m?_=l:S=l,l=.5*(S-_)+_;return l},solve:function(a,r){return this.sampleCurveY(this.solveCurveX(a,r))}};var $=b(N);let G,F;function B(){return G==null&&(G=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),G}function H(){if(F==null&&(F=!1,B())){const r=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(r){for(let d=0;d<5*5;d++){const m=4*d;r.fillStyle=`rgb(${m},${m+1},${m+2})`,r.fillRect(d%5,Math.floor(d/5),1,1)}const l=r.getImageData(0,0,5,5).data;for(let d=0;d<5*5*4;d++)if(d%4!=3&&l[d]!==d){F=!0;break}}}return F||!1}function J(a,r,l,d){const m=new $(a,r,l,d);return function(v){return m.solve(v)}}const fe=J(.25,.1,.25,1);function Ee(a,r,l){return Math.min(l,Math.max(r,a))}function Pe(a,r,l){const d=l-r,m=((a-r)%d+d)%d+r;return m===r?l:m}function ve(a,...r){for(const l of r)for(const d in l)a[d]=l[d];return a}let Ve=1;function Me(a,r,l){const d={};for(const m in a)d[m]=r.call(l||this,a[m],m,a);return d}function pt(a,r,l){const d={};for(const m in a)r.call(l||this,a[m],m,a)&&(d[m]=a[m]);return d}function qe(a){return Array.isArray(a)?a.map(qe):typeof a=="object"&&a?Me(a,qe):a}const it={};function ut(a){it[a]||(typeof console<"u"&&console.warn(a),it[a]=!0)}function bt(a,r,l){return(l.y-a.y)*(r.x-a.x)>(r.y-a.y)*(l.x-a.x)}function ct(a){let r=0;for(let l,d,m=0,v=a.length,_=v-1;m<v;_=m++)l=a[m],d=a[_],r+=(d.x-l.x)*(l.y+d.y);return r}function je(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}let Re=null;function Ke(a){return typeof ImageBitmap<"u"&&a instanceof ImageBitmap}const ft="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Rt(a,r,l,d,m){return w(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const v=new VideoFrame(a,{timestamp:0});try{const _=v==null?void 0:v.format;if(!_||!_.startsWith("BGR")&&!_.startsWith("RGB"))throw new Error(`Unrecognized format ${_}`);const S=_.startsWith("BGR"),P=new Uint8ClampedArray(d*m*4);if(yield v.copyTo(P,function(I,D,O,U,W){const X=4*Math.max(-D,0),te=(Math.max(0,O)-O)*U*4+X,oe=4*U,he=Math.max(0,D),we=Math.max(0,O);return{rect:{x:he,y:we,width:Math.min(I.width,D+U)-he,height:Math.min(I.height,O+W)-we},layout:[{offset:te,stride:oe}]}}(a,r,l,d,m)),S)for(let I=0;I<P.length;I+=4){const D=P[I];P[I]=P[I+2],P[I+2]=D}return P}finally{v.close()}})}let Bt,It,vn,hi;const hr={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(a){const r=requestAnimationFrame(a);return{cancel:()=>cancelAnimationFrame(r)}},getImageData(a,r=0){return this.getImageCanvasContext(a).getImageData(-r,-r,a.width+2*r,a.height+2*r)},getImageCanvasContext(a){const r=window.document.createElement("canvas"),l=r.getContext("2d",{willReadFrequently:!0});if(!l)throw new Error("failed to create canvas 2d context");return r.width=a.width,r.height=a.height,l.drawImage(a,0,0,a.width,a.height),l},resolveURL:a=>(vn||(vn=document.createElement("a")),vn.href=a,vn.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(hi==null&&(hi=matchMedia("(prefers-reduced-motion: reduce)")),hi.matches)}},Zr={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};class ki extends Error{constructor(r,l,d,m){super(`AJAXError: ${l} (${r}): ${d}`),this.status=r,this.statusText=l,this.url=d,this.body=m}}const Wr=je()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href,Hr=a=>Zr.REGISTERED_PROTOCOLS[a.substring(0,a.indexOf("://"))];function aa(a,r){const l=new AbortController,d=new Request(a.url,{method:a.method||"GET",body:a.body,credentials:a.credentials,headers:a.headers,cache:a.cache,referrer:Wr(),signal:l.signal});let m=!1,v=!1;return a.type==="json"&&d.headers.set("Accept","application/json"),v||fetch(d).then(_=>_.ok?(S=>{(a.type==="arrayBuffer"||a.type==="image"?S.arrayBuffer():a.type==="json"?S.json():S.text()).then(P=>{v||(m=!0,r(null,P,S.headers.get("Cache-Control"),S.headers.get("Expires")))}).catch(P=>{v||r(new Error(P.message))})})(_):_.blob().then(S=>r(new ki(_.status,_.statusText,a.url,S)))).catch(_=>{_.code!==20&&r(new Error(_.message))}),{cancel:()=>{v=!0,m||l.abort()}}}const cs=function(a,r){if(/:\/\//.test(a.url)&&!/^https?:|^file:/.test(a.url)){if(je()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",a,r);if(!je())return(Hr(a.url)||aa)(a,r)}if(!(/^file:/.test(l=a.url)||/^file:/.test(Wr())&&!/^\w+:/.test(l))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return aa(a,r);if(je()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",a,r,void 0,!0)}var l;return function(d,m){const v=new XMLHttpRequest;v.open(d.method||"GET",d.url,!0),d.type!=="arrayBuffer"&&d.type!=="image"||(v.responseType="arraybuffer");for(const _ in d.headers)v.setRequestHeader(_,d.headers[_]);return d.type==="json"&&(v.responseType="text",v.setRequestHeader("Accept","application/json")),v.withCredentials=d.credentials==="include",v.onerror=()=>{m(new Error(v.statusText))},v.onload=()=>{if((v.status>=200&&v.status<300||v.status===0)&&v.response!==null){let _=v.response;if(d.type==="json")try{_=JSON.parse(v.response)}catch(S){return m(S)}m(null,_,v.getResponseHeader("Cache-Control"),v.getResponseHeader("Expires"))}else{const _=new Blob([v.response],{type:v.getResponseHeader("Content-Type")});m(new ki(v.status,v.statusText,d.url,_))}},v.send(d.body),{cancel:()=>v.abort()}}(a,r)},oa=function(a,r){return cs(ve(a,{type:"arrayBuffer"}),r)};function Ii(a){if(!a||a.indexOf("://")<=0||a.indexOf("data:image/")===0||a.indexOf("blob:")===0)return!0;const r=new URL(a),l=window.location;return r.protocol===l.protocol&&r.host===l.host}function Ra(a,r,l){l[a]&&l[a].indexOf(r)!==-1||(l[a]=l[a]||[],l[a].push(r))}function la(a,r,l){if(l&&l[a]){const d=l[a].indexOf(r);d!==-1&&l[a].splice(d,1)}}class Ls{constructor(r,l={}){ve(this,l),this.type=r}}class ge extends Ls{constructor(r,l={}){super("error",ve({error:r},l))}}class Ie{on(r,l){return this._listeners=this._listeners||{},Ra(r,l,this._listeners),this}off(r,l){return la(r,l,this._listeners),la(r,l,this._oneTimeListeners),this}once(r,l){return l?(this._oneTimeListeners=this._oneTimeListeners||{},Ra(r,l,this._oneTimeListeners),this):new Promise(d=>this.once(r,d))}fire(r,l){typeof r=="string"&&(r=new Ls(r,l||{}));const d=r.type;if(this.listens(d)){r.target=this;const m=this._listeners&&this._listeners[d]?this._listeners[d].slice():[];for(const S of m)S.call(this,r);const v=this._oneTimeListeners&&this._oneTimeListeners[d]?this._oneTimeListeners[d].slice():[];for(const S of v)la(d,S,this._oneTimeListeners),S.call(this,r);const _=this._eventedParent;_&&(ve(r,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),_.fire(r))}else r instanceof ge&&console.error(r.error);return this}listens(r){return this._listeners&&this._listeners[r]&&this._listeners[r].length>0||this._oneTimeListeners&&this._oneTimeListeners[r]&&this._oneTimeListeners[r].length>0||this._eventedParent&&this._eventedParent.listens(r)}setEventedParent(r,l){return this._eventedParent=r,this._eventedParentData=l,this}}var ue={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const st=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function tt(a,r){const l={};for(const d in a)d!=="ref"&&(l[d]=a[d]);return st.forEach(d=>{d in r&&(l[d]=r[d])}),l}function $e(a,r){if(Array.isArray(a)){if(!Array.isArray(r)||a.length!==r.length)return!1;for(let l=0;l<a.length;l++)if(!$e(a[l],r[l]))return!1;return!0}if(typeof a=="object"&&a!==null&&r!==null){if(typeof r!="object"||Object.keys(a).length!==Object.keys(r).length)return!1;for(const l in a)if(!$e(a[l],r[l]))return!1;return!0}return a===r}const Je={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function $t(a,r,l){l.push({command:Je.addSource,args:[a,r[a]]})}function xn(a,r,l){r.push({command:Je.removeSource,args:[a]}),l[a]=!0}function An(a,r,l,d){xn(a,l,d),$t(a,r,l)}function Gi(a,r,l){let d;for(d in a[l])if(Object.prototype.hasOwnProperty.call(a[l],d)&&d!=="data"&&!$e(a[l][d],r[l][d]))return!1;for(d in r[l])if(Object.prototype.hasOwnProperty.call(r[l],d)&&d!=="data"&&!$e(a[l][d],r[l][d]))return!1;return!0}function ua(a,r,l,d,m,v){let _;for(_ in r=r||{},a=a||{})Object.prototype.hasOwnProperty.call(a,_)&&($e(a[_],r[_])||l.push({command:v,args:[d,_,r[_],m]}));for(_ in r)Object.prototype.hasOwnProperty.call(r,_)&&!Object.prototype.hasOwnProperty.call(a,_)&&($e(a[_],r[_])||l.push({command:v,args:[d,_,r[_],m]}))}function Mi(a){return a.id}function Zi(a,r){return a[r.id]=r,a}class He{constructor(r,l,d,m){this.message=(r?`${r}: `:"")+d,m&&(this.identifier=m),l!=null&&l.__line__&&(this.line=l.__line__)}}function di(a,...r){for(const l of r)for(const d in l)a[d]=l[d];return a}class _n extends Error{constructor(r,l){super(l),this.message=l,this.key=r}}class hs{constructor(r,l=[]){this.parent=r,this.bindings={};for(const[d,m]of l)this.bindings[d]=m}concat(r){return new hs(this,r)}get(r){if(this.bindings[r])return this.bindings[r];if(this.parent)return this.parent.get(r);throw new Error(`${r} not found in scope.`)}has(r){return!!this.bindings[r]||!!this.parent&&this.parent.has(r)}}const zs={kind:"null"},et={kind:"number"},Nt={kind:"string"},Dt={kind:"boolean"},Rr={kind:"color"},ds={kind:"object"},Ot={kind:"value"},Os={kind:"collator"},ie={kind:"formatted"},j={kind:"padding"},q={kind:"resolvedImage"},Y={kind:"variableAnchorOffsetCollection"};function ae(a,r){return{kind:"array",itemType:a,N:r}}function le(a){if(a.kind==="array"){const r=le(a.itemType);return typeof a.N=="number"?`array<${r}, ${a.N}>`:a.itemType.kind==="value"?"array":`array<${r}>`}return a.kind}const be=[zs,et,Nt,Dt,Rr,ie,ds,ae(Ot),j,q,Y];function me(a,r){if(r.kind==="error")return null;if(a.kind==="array"){if(r.kind==="array"&&(r.N===0&&r.itemType.kind==="value"||!me(a.itemType,r.itemType))&&(typeof a.N!="number"||a.N===r.N))return null}else{if(a.kind===r.kind)return null;if(a.kind==="value"){for(const l of be)if(!me(l,r))return null}}return`Expected ${le(a)} but found ${le(r)} instead.`}function de(a,r){return r.some(l=>l.kind===a.kind)}function _e(a,r){return r.some(l=>l==="null"?a===null:l==="array"?Array.isArray(a):l==="object"?a&&!Array.isArray(a)&&typeof a=="object":l===typeof a)}function De(a,r){return a.kind==="array"&&r.kind==="array"?a.itemType.kind===r.itemType.kind&&typeof a.N=="number":a.kind===r.kind}const Le=.96422,Fe=.82521,Et=4/29,Mt=6/29,mt=3*Mt*Mt,Ct=Mt*Mt*Mt,Lt=Math.PI/180,tn=180/Math.PI;function on(a){return(a%=360)<0&&(a+=360),a}function Kt([a,r,l,d]){let m,v;const _=Sr((.2225045*(a=Ht(a))+.7168786*(r=Ht(r))+.0606169*(l=Ht(l)))/1);a===r&&r===l?m=v=_:(m=Sr((.4360747*a+.3850649*r+.1430804*l)/Le),v=Sr((.0139322*a+.0971045*r+.7141733*l)/Fe));const S=116*_-16;return[S<0?0:S,500*(m-_),200*(_-v),d]}function Ht(a){return a<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4)}function Sr(a){return a>Ct?Math.pow(a,1/3):a/mt+Et}function un([a,r,l,d]){let m=(a+16)/116,v=isNaN(r)?m:m+r/500,_=isNaN(l)?m:m-l/200;return m=1*pr(m),v=Le*pr(v),_=Fe*pr(_),[Kn(3.1338561*v-1.6168667*m-.4906146*_),Kn(-.9787684*v+1.9161415*m+.033454*_),Kn(.0719453*v-.2289914*m+1.4052427*_),d]}function Kn(a){return(a=a<=.00304?12.92*a:1.055*Math.pow(a,1/2.4)-.055)<0?0:a>1?1:a}function pr(a){return a>Mt?a*a*a:mt*(a-Et)}function Ri(a){return parseInt(a.padEnd(2,a),16)/255}function np(a,r){return So(r?a/100:a,0,1)}function So(a,r,l){return Math.min(Math.max(r,a),l)}function Eo(a){return!a.some(Number.isNaN)}const pv={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class sn{constructor(r,l,d,m=1,v=!0){this.r=r,this.g=l,this.b=d,this.a=m,v||(this.r*=m,this.g*=m,this.b*=m,m||this.overwriteGetter("rgb",[r,l,d,m]))}static parse(r){if(r instanceof sn)return r;if(typeof r!="string")return;const l=function(d){if((d=d.toLowerCase().trim())==="transparent")return[0,0,0,0];const m=pv[d];if(m){const[_,S,P]=m;return[_/255,S/255,P/255,1]}if(d.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(d)){const _=d.length<6?1:2;let S=1;return[Ri(d.slice(S,S+=_)),Ri(d.slice(S,S+=_)),Ri(d.slice(S,S+=_)),Ri(d.slice(S,S+_)||"ff")]}if(d.startsWith("rgb")){const _=d.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(_){const[S,P,I,D,O,U,W,X,te,oe,he,we]=_,pe=[D||" ",W||" ",oe].join("");if(pe==="  "||pe==="  /"||pe===",,"||pe===",,,"){const Se=[I,U,te].join(""),Ce=Se==="%%%"?100:Se===""?255:0;if(Ce){const Oe=[So(+P/Ce,0,1),So(+O/Ce,0,1),So(+X/Ce,0,1),he?np(+he,we):1];if(Eo(Oe))return Oe}}return}}const v=d.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(v){const[_,S,P,I,D,O,U,W,X]=v,te=[P||" ",D||" ",U].join("");if(te==="  "||te==="  /"||te===",,"||te===",,,"){const oe=[+S,So(+I,0,100),So(+O,0,100),W?np(+W,X):1];if(Eo(oe))return function([he,we,pe,Se]){function Ce(Oe){const lt=(Oe+he/30)%12,yt=we*Math.min(pe,1-pe);return pe-yt*Math.max(-1,Math.min(lt-3,9-lt,1))}return he=on(he),we/=100,pe/=100,[Ce(0),Ce(8),Ce(4),Se]}(oe)}}}(r);return l?new sn(...l,!1):void 0}get rgb(){const{r,g:l,b:d,a:m}=this,v=m||1/0;return this.overwriteGetter("rgb",[r/v,l/v,d/v,m])}get hcl(){return this.overwriteGetter("hcl",function(r){const[l,d,m,v]=Kt(r),_=Math.sqrt(d*d+m*m);return[Math.round(1e4*_)?on(Math.atan2(m,d)*tn):NaN,_,l,v]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Kt(this.rgb))}overwriteGetter(r,l){return Object.defineProperty(this,r,{value:l}),l}toString(){const[r,l,d,m]=this.rgb;return`rgba(${[r,l,d].map(v=>Math.round(255*v)).join(",")},${m})`}}sn.black=new sn(0,0,0,1),sn.white=new sn(1,1,1,1),sn.transparent=new sn(0,0,0,0),sn.red=new sn(1,0,0,1);class vh{constructor(r,l,d){this.sensitivity=r?l?"variant":"case":l?"accent":"base",this.locale=d,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(r,l){return this.collator.compare(r,l)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class ku{constructor(r,l,d,m,v){this.text=r,this.image=l,this.scale=d,this.fontStack=m,this.textColor=v}}class Er{constructor(r){this.sections=r}static fromString(r){return new Er([new ku(r,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(r=>r.text.length!==0||r.image&&r.image.name.length!==0)}static factory(r){return r instanceof Er?r:Er.fromString(r)}toString(){return this.sections.length===0?"":this.sections.map(r=>r.text).join("")}}class fi{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof fi)return r;if(typeof r=="number")return new fi([r,r,r,r]);if(Array.isArray(r)&&!(r.length<1||r.length>4)){for(const l of r)if(typeof l!="number")return;switch(r.length){case 1:r=[r[0],r[0],r[0],r[0]];break;case 2:r=[r[0],r[1],r[0],r[1]];break;case 3:r=[r[0],r[1],r[2],r[1]]}return new fi(r)}}toString(){return JSON.stringify(this.values)}}const mv=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Di{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof Di)return r;if(Array.isArray(r)&&!(r.length<1)&&r.length%2==0){for(let l=0;l<r.length;l+=2){const d=r[l],m=r[l+1];if(typeof d!="string"||!mv.has(d)||!Array.isArray(m)||m.length!==2||typeof m[0]!="number"||typeof m[1]!="number")return}return new Di(r)}}toString(){return JSON.stringify(this.values)}}class mr{constructor(r){this.name=r.name,this.available=r.available}toString(){return this.name}static fromString(r){return r?new mr({name:r,available:!1}):null}}function Iu(a,r,l,d){return typeof a=="number"&&a>=0&&a<=255&&typeof r=="number"&&r>=0&&r<=255&&typeof l=="number"&&l>=0&&l<=255?d===void 0||typeof d=="number"&&d>=0&&d<=1?null:`Invalid rgba value [${[a,r,l,d].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof d=="number"?[a,r,l,d]:[a,r,l]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function To(a){if(a===null||typeof a=="string"||typeof a=="boolean"||typeof a=="number"||a instanceof sn||a instanceof vh||a instanceof Er||a instanceof fi||a instanceof Di||a instanceof mr)return!0;if(Array.isArray(a)){for(const r of a)if(!To(r))return!1;return!0}if(typeof a=="object"){for(const r in a)if(!To(a[r]))return!1;return!0}return!1}function Sn(a){if(a===null)return zs;if(typeof a=="string")return Nt;if(typeof a=="boolean")return Dt;if(typeof a=="number")return et;if(a instanceof sn)return Rr;if(a instanceof vh)return Os;if(a instanceof Er)return ie;if(a instanceof fi)return j;if(a instanceof Di)return Y;if(a instanceof mr)return q;if(Array.isArray(a)){const r=a.length;let l;for(const d of a){const m=Sn(d);if(l){if(l===m)continue;l=Ot;break}l=m}return ae(l||Ot,r)}return ds}function Yt(a){const r=typeof a;return a===null?"":r==="string"||r==="number"||r==="boolean"?String(a):a instanceof sn||a instanceof Er||a instanceof fi||a instanceof Di||a instanceof mr?a.toString():JSON.stringify(a)}class Da{constructor(r,l){this.type=r,this.value=l}static parse(r,l){if(r.length!==2)return l.error(`'literal' expression requires exactly one argument, but found ${r.length-1} instead.`);if(!To(r[1]))return l.error("invalid value");const d=r[1];let m=Sn(d);const v=l.expectedType;return m.kind!=="array"||m.N!==0||!v||v.kind!=="array"||typeof v.N=="number"&&v.N!==0||(m=v),new Da(m,d)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class kn{constructor(r){this.name="ExpressionEvaluationError",this.message=r}toJSON(){return this.message}}const Mu={string:Nt,number:et,boolean:Dt,object:ds};class Li{constructor(r,l){this.type=r,this.args=l}static parse(r,l){if(r.length<2)return l.error("Expected at least one argument.");let d,m=1;const v=r[0];if(v==="array"){let S,P;if(r.length>2){const I=r[1];if(typeof I!="string"||!(I in Mu)||I==="object")return l.error('The item type argument of "array" must be one of string, number, boolean',1);S=Mu[I],m++}else S=Ot;if(r.length>3){if(r[2]!==null&&(typeof r[2]!="number"||r[2]<0||r[2]!==Math.floor(r[2])))return l.error('The length argument to "array" must be a positive integer literal',2);P=r[2],m++}d=ae(S,P)}else{if(!Mu[v])throw new Error(`Types doesn't contain name = ${v}`);d=Mu[v]}const _=[];for(;m<r.length;m++){const S=l.parse(r[m],m,Ot);if(!S)return null;_.push(S)}return new Li(d,_)}evaluate(r){for(let l=0;l<this.args.length;l++){const d=this.args[l].evaluate(r);if(!me(this.type,Sn(d)))return d;if(l===this.args.length-1)throw new kn(`Expected value to be of type ${le(this.type)}, but found ${le(Sn(d))} instead.`)}throw new Error}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}const xh={"to-boolean":Dt,"to-color":Rr,"to-number":et,"to-string":Nt};class ca{constructor(r,l){this.type=r,this.args=l}static parse(r,l){if(r.length<2)return l.error("Expected at least one argument.");const d=r[0];if(!xh[d])throw new Error(`Can't parse ${d} as it is not part of the known types`);if((d==="to-boolean"||d==="to-string")&&r.length!==2)return l.error("Expected one argument.");const m=xh[d],v=[];for(let _=1;_<r.length;_++){const S=l.parse(r[_],_,Ot);if(!S)return null;v.push(S)}return new ca(m,v)}evaluate(r){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(r);case"color":{let l,d;for(const m of this.args){if(l=m.evaluate(r),d=null,l instanceof sn)return l;if(typeof l=="string"){const v=r.parseColor(l);if(v)return v}else if(Array.isArray(l)&&(d=l.length<3||l.length>4?`Invalid rbga value ${JSON.stringify(l)}: expected an array containing either three or four numeric values.`:Iu(l[0],l[1],l[2],l[3]),!d))return new sn(l[0]/255,l[1]/255,l[2]/255,l[3])}throw new kn(d||`Could not parse color from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"padding":{let l;for(const d of this.args){l=d.evaluate(r);const m=fi.parse(l);if(m)return m}throw new kn(`Could not parse padding from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"variableAnchorOffsetCollection":{let l;for(const d of this.args){l=d.evaluate(r);const m=Di.parse(l);if(m)return m}throw new kn(`Could not parse variableAnchorOffsetCollection from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"number":{let l=null;for(const d of this.args){if(l=d.evaluate(r),l===null)return 0;const m=Number(l);if(!isNaN(m))return m}throw new kn(`Could not convert ${JSON.stringify(l)} to number.`)}case"formatted":return Er.fromString(Yt(this.args[0].evaluate(r)));case"resolvedImage":return mr.fromString(Yt(this.args[0].evaluate(r)));default:return Yt(this.args[0].evaluate(r))}}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}const rp=["Unknown","Point","LineString","Polygon"];class _h{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?rp[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(r){let l=this._parseColorCache[r];return l||(l=this._parseColorCache[r]=sn.parse(r)),l}}class Ru{constructor(r,l,d=[],m,v=new hs,_=[]){this.registry=r,this.path=d,this.key=d.map(S=>`[${S}]`).join(""),this.scope=v,this.errors=_,this.expectedType=m,this._isConstant=l}parse(r,l,d,m,v={}){return l?this.concat(l,d,m)._parse(r,v):this._parse(r,v)}_parse(r,l){function d(m,v,_){return _==="assert"?new Li(v,[m]):_==="coerce"?new ca(v,[m]):m}if(r!==null&&typeof r!="string"&&typeof r!="boolean"&&typeof r!="number"||(r=["literal",r]),Array.isArray(r)){if(r.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const m=r[0];if(typeof m!="string")return this.error(`Expression name must be a string, but found ${typeof m} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const v=this.registry[m];if(v){let _=v.parse(r,this);if(!_)return null;if(this.expectedType){const S=this.expectedType,P=_.type;if(S.kind!=="string"&&S.kind!=="number"&&S.kind!=="boolean"&&S.kind!=="object"&&S.kind!=="array"||P.kind!=="value")if(S.kind!=="color"&&S.kind!=="formatted"&&S.kind!=="resolvedImage"||P.kind!=="value"&&P.kind!=="string")if(S.kind!=="padding"||P.kind!=="value"&&P.kind!=="number"&&P.kind!=="array")if(S.kind!=="variableAnchorOffsetCollection"||P.kind!=="value"&&P.kind!=="array"){if(this.checkSubtype(S,P))return null}else _=d(_,S,l.typeAnnotation||"coerce");else _=d(_,S,l.typeAnnotation||"coerce");else _=d(_,S,l.typeAnnotation||"coerce");else _=d(_,S,l.typeAnnotation||"assert")}if(!(_ instanceof Da)&&_.type.kind!=="resolvedImage"&&this._isConstant(_)){const S=new _h;try{_=new Da(_.type,_.evaluate(S))}catch(P){return this.error(P.message),null}}return _}return this.error(`Unknown expression "${m}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(r===void 0?"'undefined' value invalid. Use null instead.":typeof r=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof r} instead.`)}concat(r,l,d){const m=typeof r=="number"?this.path.concat(r):this.path,v=d?this.scope.concat(d):this.scope;return new Ru(this.registry,this._isConstant,m,l||null,v,this.errors)}error(r,...l){const d=`${this.key}${l.map(m=>`[${m}]`).join("")}`;this.errors.push(new _n(d,r))}checkSubtype(r,l){const d=me(r,l);return d&&this.error(d),d}}class Du{constructor(r,l,d){this.type=Os,this.locale=d,this.caseSensitive=r,this.diacriticSensitive=l}static parse(r,l){if(r.length!==2)return l.error("Expected one argument.");const d=r[1];if(typeof d!="object"||Array.isArray(d))return l.error("Collator options argument must be an object.");const m=l.parse(d["case-sensitive"]!==void 0&&d["case-sensitive"],1,Dt);if(!m)return null;const v=l.parse(d["diacritic-sensitive"]!==void 0&&d["diacritic-sensitive"],1,Dt);if(!v)return null;let _=null;return d.locale&&(_=l.parse(d.locale,1,Nt),!_)?null:new Du(m,v,_)}evaluate(r){return new vh(this.caseSensitive.evaluate(r),this.diacriticSensitive.evaluate(r),this.locale?this.locale.evaluate(r):null)}eachChild(r){r(this.caseSensitive),r(this.diacriticSensitive),this.locale&&r(this.locale)}outputDefined(){return!1}}const ha=8192;function wh(a,r){a[0]=Math.min(a[0],r[0]),a[1]=Math.min(a[1],r[1]),a[2]=Math.max(a[2],r[0]),a[3]=Math.max(a[3],r[1])}function Ml(a,r){return!(a[0]<=r[0]||a[2]>=r[2]||a[1]<=r[1]||a[3]>=r[3])}function ip(a,r){const l=(180+a[0])/360,d=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a[1]*Math.PI/360)))/360,m=Math.pow(2,r.z);return[Math.round(l*m*ha),Math.round(d*m*ha)]}function gv(a,r,l){const d=a[0]-r[0],m=a[1]-r[1],v=a[0]-l[0],_=a[1]-l[1];return d*_-v*m==0&&d*v<=0&&m*_<=0}function bh(a,r){let l=!1;for(let _=0,S=r.length;_<S;_++){const P=r[_];for(let I=0,D=P.length;I<D-1;I++){if(gv(a,P[I],P[I+1]))return!1;(m=P[I])[1]>(d=a)[1]!=(v=P[I+1])[1]>d[1]&&d[0]<(v[0]-m[0])*(d[1]-m[1])/(v[1]-m[1])+m[0]&&(l=!l)}}var d,m,v;return l}function Sh(a,r){for(let l=0;l<r.length;l++)if(bh(a,r[l]))return!0;return!1}function sp(a,r,l,d){const m=d[0]-l[0],v=d[1]-l[1],_=(a[0]-l[0])*v-m*(a[1]-l[1]),S=(r[0]-l[0])*v-m*(r[1]-l[1]);return _>0&&S<0||_<0&&S>0}function yv(a,r,l){for(const I of l)for(let D=0;D<I.length-1;++D)if((S=[(_=I[D+1])[0]-(v=I[D])[0],_[1]-v[1]])[0]*(P=[(m=r)[0]-(d=a)[0],m[1]-d[1]])[1]-S[1]*P[0]!=0&&sp(d,m,v,_)&&sp(v,_,d,m))return!0;var d,m,v,_,S,P;return!1}function ap(a,r){for(let l=0;l<a.length;++l)if(!bh(a[l],r))return!1;for(let l=0;l<a.length-1;++l)if(yv(a[l],a[l+1],r))return!1;return!0}function op(a,r){for(let l=0;l<r.length;l++)if(ap(a,r[l]))return!0;return!1}function Lu(a,r,l){const d=[];for(let m=0;m<a.length;m++){const v=[];for(let _=0;_<a[m].length;_++){const S=ip(a[m][_],l);wh(r,S),v.push(S)}d.push(v)}return d}function lp(a,r,l){const d=[];for(let m=0;m<a.length;m++){const v=Lu(a[m],r,l);d.push(v)}return d}function up(a,r,l,d){if(a[0]<l[0]||a[0]>l[2]){const m=.5*d;let v=a[0]-l[0]>m?-d:l[0]-a[0]>m?d:0;v===0&&(v=a[0]-l[2]>m?-d:l[2]-a[0]>m?d:0),a[0]+=v}wh(r,a)}function Eh(a,r,l,d){const m=Math.pow(2,d.z)*ha,v=[d.x*ha,d.y*ha],_=[];for(const S of a)for(const P of S){const I=[P.x+v[0],P.y+v[1]];up(I,r,l,m),_.push(I)}return _}function Th(a,r,l,d){const m=Math.pow(2,d.z)*ha,v=[d.x*ha,d.y*ha],_=[];for(const P of a){const I=[];for(const D of P){const O=[D.x+v[0],D.y+v[1]];wh(r,O),I.push(O)}_.push(I)}if(r[2]-r[0]<=m/2){(S=r)[0]=S[1]=1/0,S[2]=S[3]=-1/0;for(const P of _)for(const I of P)up(I,r,l,m)}var S;return _}class La{constructor(r,l){this.type=Dt,this.geojson=r,this.geometries=l}static parse(r,l){if(r.length!==2)return l.error(`'within' expression requires exactly one argument, but found ${r.length-1} instead.`);if(To(r[1])){const d=r[1];if(d.type==="FeatureCollection")for(let m=0;m<d.features.length;++m){const v=d.features[m].geometry.type;if(v==="Polygon"||v==="MultiPolygon")return new La(d,d.features[m].geometry)}else if(d.type==="Feature"){const m=d.geometry.type;if(m==="Polygon"||m==="MultiPolygon")return new La(d,d.geometry)}else if(d.type==="Polygon"||d.type==="MultiPolygon")return new La(d,d)}return l.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(r){if(r.geometry()!=null&&r.canonicalID()!=null){if(r.geometryType()==="Point")return function(l,d){const m=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],_=l.canonicalID();if(d.type==="Polygon"){const S=Lu(d.coordinates,v,_),P=Eh(l.geometry(),m,v,_);if(!Ml(m,v))return!1;for(const I of P)if(!bh(I,S))return!1}if(d.type==="MultiPolygon"){const S=lp(d.coordinates,v,_),P=Eh(l.geometry(),m,v,_);if(!Ml(m,v))return!1;for(const I of P)if(!Sh(I,S))return!1}return!0}(r,this.geometries);if(r.geometryType()==="LineString")return function(l,d){const m=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],_=l.canonicalID();if(d.type==="Polygon"){const S=Lu(d.coordinates,v,_),P=Th(l.geometry(),m,v,_);if(!Ml(m,v))return!1;for(const I of P)if(!ap(I,S))return!1}if(d.type==="MultiPolygon"){const S=lp(d.coordinates,v,_),P=Th(l.geometry(),m,v,_);if(!Ml(m,v))return!1;for(const I of P)if(!op(I,S))return!1}return!0}(r,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class zu{constructor(r,l){this.type=l.type,this.name=r,this.boundExpression=l}static parse(r,l){if(r.length!==2||typeof r[1]!="string")return l.error("'var' expression requires exactly one string literal argument.");const d=r[1];return l.scope.has(d)?new zu(d,l.scope.get(d)):l.error(`Unknown variable "${d}". Make sure "${d}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(r){return this.boundExpression.evaluate(r)}eachChild(){}outputDefined(){return!1}}class zi{constructor(r,l,d,m){this.name=r,this.type=l,this._evaluate=d,this.args=m}evaluate(r){return this._evaluate(r,this.args)}eachChild(r){this.args.forEach(r)}outputDefined(){return!1}static parse(r,l){const d=r[0],m=zi.definitions[d];if(!m)return l.error(`Unknown expression "${d}". If you wanted a literal array, use ["literal", [...]].`,0);const v=Array.isArray(m)?m[0]:m.type,_=Array.isArray(m)?[[m[1],m[2]]]:m.overloads,S=_.filter(([I])=>!Array.isArray(I)||I.length===r.length-1);let P=null;for(const[I,D]of S){P=new Ru(l.registry,Ou,l.path,null,l.scope);const O=[];let U=!1;for(let W=1;W<r.length;W++){const X=r[W],te=Array.isArray(I)?I[W-1]:I.type,oe=P.parse(X,1+O.length,te);if(!oe){U=!0;break}O.push(oe)}if(!U)if(Array.isArray(I)&&I.length!==O.length)P.error(`Expected ${I.length} arguments, but found ${O.length} instead.`);else{for(let W=0;W<O.length;W++){const X=Array.isArray(I)?I[W]:I.type,te=O[W];P.concat(W+1).checkSubtype(X,te.type)}if(P.errors.length===0)return new zi(d,v,D,O)}}if(S.length===1)l.errors.push(...P.errors);else{const I=(S.length?S:_).map(([O])=>{return U=O,Array.isArray(U)?`(${U.map(le).join(", ")})`:`(${le(U.type)}...)`;var U}).join(" | "),D=[];for(let O=1;O<r.length;O++){const U=l.parse(r[O],1+D.length);if(!U)return null;D.push(le(U.type))}l.error(`Expected arguments of type ${I}, but found (${D.join(", ")}) instead.`)}return null}static register(r,l){zi.definitions=l;for(const d in l)r[d]=zi}}function Ou(a){if(a instanceof zu)return Ou(a.boundExpression);if(a instanceof zi&&a.name==="error"||a instanceof Du||a instanceof La)return!1;const r=a instanceof ca||a instanceof Li;let l=!0;return a.eachChild(d=>{l=r?l&&Ou(d):l&&d instanceof Da}),!!l&&Fu(a)&&Nu(a,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Fu(a){if(a instanceof zi&&(a.name==="get"&&a.args.length===1||a.name==="feature-state"||a.name==="has"&&a.args.length===1||a.name==="properties"||a.name==="geometry-type"||a.name==="id"||/^filter-/.test(a.name))||a instanceof La)return!1;let r=!0;return a.eachChild(l=>{r&&!Fu(l)&&(r=!1)}),r}function Rl(a){if(a instanceof zi&&a.name==="feature-state")return!1;let r=!0;return a.eachChild(l=>{r&&!Rl(l)&&(r=!1)}),r}function Nu(a,r){if(a instanceof zi&&r.indexOf(a.name)>=0)return!1;let l=!0;return a.eachChild(d=>{l&&!Nu(d,r)&&(l=!1)}),l}function Co(a,r){const l=a.length-1;let d,m,v=0,_=l,S=0;for(;v<=_;)if(S=Math.floor((v+_)/2),d=a[S],m=a[S+1],d<=r){if(S===l||r<m)return S;v=S+1}else{if(!(d>r))throw new kn("Input is not a number.");_=S-1}return 0}class da{constructor(r,l,d){this.type=r,this.input=l,this.labels=[],this.outputs=[];for(const[m,v]of d)this.labels.push(m),this.outputs.push(v)}static parse(r,l){if(r.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return l.error("Expected an even number of arguments.");const d=l.parse(r[1],1,et);if(!d)return null;const m=[];let v=null;l.expectedType&&l.expectedType.kind!=="value"&&(v=l.expectedType);for(let _=1;_<r.length;_+=2){const S=_===1?-1/0:r[_],P=r[_+1],I=_,D=_+1;if(typeof S!="number")return l.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',I);if(m.length&&m[m.length-1][0]>=S)return l.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',I);const O=l.parse(P,D,v);if(!O)return null;v=v||O.type,m.push([S,O])}return new da(v,d,m)}evaluate(r){const l=this.labels,d=this.outputs;if(l.length===1)return d[0].evaluate(r);const m=this.input.evaluate(r);if(m<=l[0])return d[0].evaluate(r);const v=l.length;return m>=l[v-1]?d[v-1].evaluate(r):d[Co(l,m)].evaluate(r)}eachChild(r){r(this.input);for(const l of this.outputs)r(l)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}}function Zt(a,r,l){return a+l*(r-a)}function Bu(a,r,l){return a.map((d,m)=>Zt(d,r[m],l))}const pi={number:Zt,color:function(a,r,l,d="rgb"){switch(d){case"rgb":{const[m,v,_,S]=Bu(a.rgb,r.rgb,l);return new sn(m,v,_,S,!1)}case"hcl":{const[m,v,_,S]=a.hcl,[P,I,D,O]=r.hcl;let U,W;if(isNaN(m)||isNaN(P))isNaN(m)?isNaN(P)?U=NaN:(U=P,_!==1&&_!==0||(W=I)):(U=m,D!==1&&D!==0||(W=v));else{let we=P-m;P>m&&we>180?we-=360:P<m&&m-P>180&&(we+=360),U=m+l*we}const[X,te,oe,he]=function([we,pe,Se,Ce]){return we=isNaN(we)?0:we*Lt,un([Se,Math.cos(we)*pe,Math.sin(we)*pe,Ce])}([U,W??Zt(v,I,l),Zt(_,D,l),Zt(S,O,l)]);return new sn(X,te,oe,he,!1)}case"lab":{const[m,v,_,S]=un(Bu(a.lab,r.lab,l));return new sn(m,v,_,S,!1)}}},array:Bu,padding:function(a,r,l){return new fi(Bu(a.values,r.values,l))},variableAnchorOffsetCollection:function(a,r,l){const d=a.values,m=r.values;if(d.length!==m.length)throw new kn(`Cannot interpolate values of different length. from: ${a.toString()}, to: ${r.toString()}`);const v=[];for(let _=0;_<d.length;_+=2){if(d[_]!==m[_])throw new kn(`Cannot interpolate values containing mismatched anchors. from[${_}]: ${d[_]}, to[${_}]: ${m[_]}`);v.push(d[_]);const[S,P]=d[_+1],[I,D]=m[_+1];v.push([Zt(S,I,l),Zt(P,D,l)])}return new Di(v)}};class mi{constructor(r,l,d,m,v){this.type=r,this.operator=l,this.interpolation=d,this.input=m,this.labels=[],this.outputs=[];for(const[_,S]of v)this.labels.push(_),this.outputs.push(S)}static interpolationFactor(r,l,d,m){let v=0;if(r.name==="exponential")v=Ch(l,r.base,d,m);else if(r.name==="linear")v=Ch(l,1,d,m);else if(r.name==="cubic-bezier"){const _=r.controlPoints;v=new $(_[0],_[1],_[2],_[3]).solve(Ch(l,1,d,m))}return v}static parse(r,l){let[d,m,v,..._]=r;if(!Array.isArray(m)||m.length===0)return l.error("Expected an interpolation type expression.",1);if(m[0]==="linear")m={name:"linear"};else if(m[0]==="exponential"){const I=m[1];if(typeof I!="number")return l.error("Exponential interpolation requires a numeric base.",1,1);m={name:"exponential",base:I}}else{if(m[0]!=="cubic-bezier")return l.error(`Unknown interpolation type ${String(m[0])}`,1,0);{const I=m.slice(1);if(I.length!==4||I.some(D=>typeof D!="number"||D<0||D>1))return l.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);m={name:"cubic-bezier",controlPoints:I}}}if(r.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return l.error("Expected an even number of arguments.");if(v=l.parse(v,2,et),!v)return null;const S=[];let P=null;d==="interpolate-hcl"||d==="interpolate-lab"?P=Rr:l.expectedType&&l.expectedType.kind!=="value"&&(P=l.expectedType);for(let I=0;I<_.length;I+=2){const D=_[I],O=_[I+1],U=I+3,W=I+4;if(typeof D!="number")return l.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',U);if(S.length&&S[S.length-1][0]>=D)return l.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',U);const X=l.parse(O,W,P);if(!X)return null;P=P||X.type,S.push([D,X])}return De(P,et)||De(P,Rr)||De(P,j)||De(P,Y)||De(P,ae(et))?new mi(P,d,m,v,S):l.error(`Type ${le(P)} is not interpolatable.`)}evaluate(r){const l=this.labels,d=this.outputs;if(l.length===1)return d[0].evaluate(r);const m=this.input.evaluate(r);if(m<=l[0])return d[0].evaluate(r);const v=l.length;if(m>=l[v-1])return d[v-1].evaluate(r);const _=Co(l,m),S=mi.interpolationFactor(this.interpolation,m,l[_],l[_+1]),P=d[_].evaluate(r),I=d[_+1].evaluate(r);switch(this.operator){case"interpolate":return pi[this.type.kind](P,I,S);case"interpolate-hcl":return pi.color(P,I,S,"hcl");case"interpolate-lab":return pi.color(P,I,S,"lab")}}eachChild(r){r(this.input);for(const l of this.outputs)r(l)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}}function Ch(a,r,l,d){const m=d-l,v=a-l;return m===0?0:r===1?v/m:(Math.pow(r,v)-1)/(Math.pow(r,m)-1)}class Vu{constructor(r,l){this.type=r,this.args=l}static parse(r,l){if(r.length<2)return l.error("Expectected at least one argument.");let d=null;const m=l.expectedType;m&&m.kind!=="value"&&(d=m);const v=[];for(const S of r.slice(1)){const P=l.parse(S,1+v.length,d,void 0,{typeAnnotation:"omit"});if(!P)return null;d=d||P.type,v.push(P)}if(!d)throw new Error("No output type");const _=m&&v.some(S=>me(m,S.type));return new Vu(_?Ot:d,v)}evaluate(r){let l,d=null,m=0;for(const v of this.args)if(m++,d=v.evaluate(r),d&&d instanceof mr&&!d.available&&(l||(l=d.name),d=null,m===this.args.length&&(d=l)),d!==null)break;return d}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}class ju{constructor(r,l){this.type=l.type,this.bindings=[].concat(r),this.result=l}evaluate(r){return this.result.evaluate(r)}eachChild(r){for(const l of this.bindings)r(l[1]);r(this.result)}static parse(r,l){if(r.length<4)return l.error(`Expected at least 3 arguments, but found ${r.length-1} instead.`);const d=[];for(let v=1;v<r.length-1;v+=2){const _=r[v];if(typeof _!="string")return l.error(`Expected string, but found ${typeof _} instead.`,v);if(/[^a-zA-Z0-9_]/.test(_))return l.error("Variable names must contain only alphanumeric characters or '_'.",v);const S=l.parse(r[v+1],v+1);if(!S)return null;d.push([_,S])}const m=l.parse(r[r.length-1],r.length-1,l.expectedType,d);return m?new ju(d,m):null}outputDefined(){return this.result.outputDefined()}}class Ph{constructor(r,l,d){this.type=r,this.index=l,this.input=d}static parse(r,l){if(r.length!==3)return l.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const d=l.parse(r[1],1,et),m=l.parse(r[2],2,ae(l.expectedType||Ot));return d&&m?new Ph(m.type.itemType,d,m):null}evaluate(r){const l=this.index.evaluate(r),d=this.input.evaluate(r);if(l<0)throw new kn(`Array index out of bounds: ${l} < 0.`);if(l>=d.length)throw new kn(`Array index out of bounds: ${l} > ${d.length-1}.`);if(l!==Math.floor(l))throw new kn(`Array index must be an integer, but found ${l} instead.`);return d[l]}eachChild(r){r(this.index),r(this.input)}outputDefined(){return!1}}class Ah{constructor(r,l){this.type=Dt,this.needle=r,this.haystack=l}static parse(r,l){if(r.length!==3)return l.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const d=l.parse(r[1],1,Ot),m=l.parse(r[2],2,Ot);return d&&m?de(d.type,[Dt,Nt,et,zs,Ot])?new Ah(d,m):l.error(`Expected first argument to be of type boolean, string, number or null, but found ${le(d.type)} instead`):null}evaluate(r){const l=this.needle.evaluate(r),d=this.haystack.evaluate(r);if(!d)return!1;if(!_e(l,["boolean","string","number","null"]))throw new kn(`Expected first argument to be of type boolean, string, number or null, but found ${le(Sn(l))} instead.`);if(!_e(d,["string","array"]))throw new kn(`Expected second argument to be of type array or string, but found ${le(Sn(d))} instead.`);return d.indexOf(l)>=0}eachChild(r){r(this.needle),r(this.haystack)}outputDefined(){return!0}}class $u{constructor(r,l,d){this.type=et,this.needle=r,this.haystack=l,this.fromIndex=d}static parse(r,l){if(r.length<=2||r.length>=5)return l.error(`Expected 3 or 4 arguments, but found ${r.length-1} instead.`);const d=l.parse(r[1],1,Ot),m=l.parse(r[2],2,Ot);if(!d||!m)return null;if(!de(d.type,[Dt,Nt,et,zs,Ot]))return l.error(`Expected first argument to be of type boolean, string, number or null, but found ${le(d.type)} instead`);if(r.length===4){const v=l.parse(r[3],3,et);return v?new $u(d,m,v):null}return new $u(d,m)}evaluate(r){const l=this.needle.evaluate(r),d=this.haystack.evaluate(r);if(!_e(l,["boolean","string","number","null"]))throw new kn(`Expected first argument to be of type boolean, string, number or null, but found ${le(Sn(l))} instead.`);if(!_e(d,["string","array"]))throw new kn(`Expected second argument to be of type array or string, but found ${le(Sn(d))} instead.`);if(this.fromIndex){const m=this.fromIndex.evaluate(r);return d.indexOf(l,m)}return d.indexOf(l)}eachChild(r){r(this.needle),r(this.haystack),this.fromIndex&&r(this.fromIndex)}outputDefined(){return!1}}class kh{constructor(r,l,d,m,v,_){this.inputType=r,this.type=l,this.input=d,this.cases=m,this.outputs=v,this.otherwise=_}static parse(r,l){if(r.length<5)return l.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if(r.length%2!=1)return l.error("Expected an even number of arguments.");let d,m;l.expectedType&&l.expectedType.kind!=="value"&&(m=l.expectedType);const v={},_=[];for(let I=2;I<r.length-1;I+=2){let D=r[I];const O=r[I+1];Array.isArray(D)||(D=[D]);const U=l.concat(I);if(D.length===0)return U.error("Expected at least one branch label.");for(const X of D){if(typeof X!="number"&&typeof X!="string")return U.error("Branch labels must be numbers or strings.");if(typeof X=="number"&&Math.abs(X)>Number.MAX_SAFE_INTEGER)return U.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof X=="number"&&Math.floor(X)!==X)return U.error("Numeric branch labels must be integer values.");if(d){if(U.checkSubtype(d,Sn(X)))return null}else d=Sn(X);if(v[String(X)]!==void 0)return U.error("Branch labels must be unique.");v[String(X)]=_.length}const W=l.parse(O,I,m);if(!W)return null;m=m||W.type,_.push(W)}const S=l.parse(r[1],1,Ot);if(!S)return null;const P=l.parse(r[r.length-1],r.length-1,m);return P?S.type.kind!=="value"&&l.concat(1).checkSubtype(d,S.type)?null:new kh(d,m,S,v,_,P):null}evaluate(r){const l=this.input.evaluate(r);return(Sn(l)===this.inputType&&this.outputs[this.cases[l]]||this.otherwise).evaluate(r)}eachChild(r){r(this.input),this.outputs.forEach(r),r(this.otherwise)}outputDefined(){return this.outputs.every(r=>r.outputDefined())&&this.otherwise.outputDefined()}}class Ih{constructor(r,l,d){this.type=r,this.branches=l,this.otherwise=d}static parse(r,l){if(r.length<4)return l.error(`Expected at least 3 arguments, but found only ${r.length-1}.`);if(r.length%2!=0)return l.error("Expected an odd number of arguments.");let d;l.expectedType&&l.expectedType.kind!=="value"&&(d=l.expectedType);const m=[];for(let _=1;_<r.length-1;_+=2){const S=l.parse(r[_],_,Dt);if(!S)return null;const P=l.parse(r[_+1],_+1,d);if(!P)return null;m.push([S,P]),d=d||P.type}const v=l.parse(r[r.length-1],r.length-1,d);if(!v)return null;if(!d)throw new Error("Can't infer output type");return new Ih(d,m,v)}evaluate(r){for(const[l,d]of this.branches)if(l.evaluate(r))return d.evaluate(r);return this.otherwise.evaluate(r)}eachChild(r){for(const[l,d]of this.branches)r(l),r(d);r(this.otherwise)}outputDefined(){return this.branches.every(([r,l])=>l.outputDefined())&&this.otherwise.outputDefined()}}class Uu{constructor(r,l,d,m){this.type=r,this.input=l,this.beginIndex=d,this.endIndex=m}static parse(r,l){if(r.length<=2||r.length>=5)return l.error(`Expected 3 or 4 arguments, but found ${r.length-1} instead.`);const d=l.parse(r[1],1,Ot),m=l.parse(r[2],2,et);if(!d||!m)return null;if(!de(d.type,[ae(Ot),Nt,Ot]))return l.error(`Expected first argument to be of type array or string, but found ${le(d.type)} instead`);if(r.length===4){const v=l.parse(r[3],3,et);return v?new Uu(d.type,d,m,v):null}return new Uu(d.type,d,m)}evaluate(r){const l=this.input.evaluate(r),d=this.beginIndex.evaluate(r);if(!_e(l,["string","array"]))throw new kn(`Expected first argument to be of type array or string, but found ${le(Sn(l))} instead.`);if(this.endIndex){const m=this.endIndex.evaluate(r);return l.slice(d,m)}return l.slice(d)}eachChild(r){r(this.input),r(this.beginIndex),this.endIndex&&r(this.endIndex)}outputDefined(){return!1}}function cp(a,r){return a==="=="||a==="!="?r.kind==="boolean"||r.kind==="string"||r.kind==="number"||r.kind==="null"||r.kind==="value":r.kind==="string"||r.kind==="number"||r.kind==="value"}function hp(a,r,l,d){return d.compare(r,l)===0}function Po(a,r,l){const d=a!=="=="&&a!=="!=";return class QD{constructor(v,_,S){this.type=Dt,this.lhs=v,this.rhs=_,this.collator=S,this.hasUntypedArgument=v.type.kind==="value"||_.type.kind==="value"}static parse(v,_){if(v.length!==3&&v.length!==4)return _.error("Expected two or three arguments.");const S=v[0];let P=_.parse(v[1],1,Ot);if(!P)return null;if(!cp(S,P.type))return _.concat(1).error(`"${S}" comparisons are not supported for type '${le(P.type)}'.`);let I=_.parse(v[2],2,Ot);if(!I)return null;if(!cp(S,I.type))return _.concat(2).error(`"${S}" comparisons are not supported for type '${le(I.type)}'.`);if(P.type.kind!==I.type.kind&&P.type.kind!=="value"&&I.type.kind!=="value")return _.error(`Cannot compare types '${le(P.type)}' and '${le(I.type)}'.`);d&&(P.type.kind==="value"&&I.type.kind!=="value"?P=new Li(I.type,[P]):P.type.kind!=="value"&&I.type.kind==="value"&&(I=new Li(P.type,[I])));let D=null;if(v.length===4){if(P.type.kind!=="string"&&I.type.kind!=="string"&&P.type.kind!=="value"&&I.type.kind!=="value")return _.error("Cannot use collator to compare non-string types.");if(D=_.parse(v[3],3,Os),!D)return null}return new QD(P,I,D)}evaluate(v){const _=this.lhs.evaluate(v),S=this.rhs.evaluate(v);if(d&&this.hasUntypedArgument){const P=Sn(_),I=Sn(S);if(P.kind!==I.kind||P.kind!=="string"&&P.kind!=="number")throw new kn(`Expected arguments for "${a}" to be (string, string) or (number, number), but found (${P.kind}, ${I.kind}) instead.`)}if(this.collator&&!d&&this.hasUntypedArgument){const P=Sn(_),I=Sn(S);if(P.kind!=="string"||I.kind!=="string")return r(v,_,S)}return this.collator?l(v,_,S,this.collator.evaluate(v)):r(v,_,S)}eachChild(v){v(this.lhs),v(this.rhs),this.collator&&v(this.collator)}outputDefined(){return!0}}}const vv=Po("==",function(a,r,l){return r===l},hp),xv=Po("!=",function(a,r,l){return r!==l},function(a,r,l,d){return!hp(0,r,l,d)}),_v=Po("<",function(a,r,l){return r<l},function(a,r,l,d){return d.compare(r,l)<0}),wv=Po(">",function(a,r,l){return r>l},function(a,r,l,d){return d.compare(r,l)>0}),bv=Po("<=",function(a,r,l){return r<=l},function(a,r,l,d){return d.compare(r,l)<=0}),Sv=Po(">=",function(a,r,l){return r>=l},function(a,r,l,d){return d.compare(r,l)>=0});class Mh{constructor(r,l,d,m,v){this.type=Nt,this.number=r,this.locale=l,this.currency=d,this.minFractionDigits=m,this.maxFractionDigits=v}static parse(r,l){if(r.length!==3)return l.error("Expected two arguments.");const d=l.parse(r[1],1,et);if(!d)return null;const m=r[2];if(typeof m!="object"||Array.isArray(m))return l.error("NumberFormat options argument must be an object.");let v=null;if(m.locale&&(v=l.parse(m.locale,1,Nt),!v))return null;let _=null;if(m.currency&&(_=l.parse(m.currency,1,Nt),!_))return null;let S=null;if(m["min-fraction-digits"]&&(S=l.parse(m["min-fraction-digits"],1,et),!S))return null;let P=null;return m["max-fraction-digits"]&&(P=l.parse(m["max-fraction-digits"],1,et),!P)?null:new Mh(d,v,_,S,P)}evaluate(r){return new Intl.NumberFormat(this.locale?this.locale.evaluate(r):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(r):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(r):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(r):void 0}).format(this.number.evaluate(r))}eachChild(r){r(this.number),this.locale&&r(this.locale),this.currency&&r(this.currency),this.minFractionDigits&&r(this.minFractionDigits),this.maxFractionDigits&&r(this.maxFractionDigits)}outputDefined(){return!1}}class qu{constructor(r){this.type=ie,this.sections=r}static parse(r,l){if(r.length<2)return l.error("Expected at least one argument.");const d=r[1];if(!Array.isArray(d)&&typeof d=="object")return l.error("First argument must be an image or text section.");const m=[];let v=!1;for(let _=1;_<=r.length-1;++_){const S=r[_];if(v&&typeof S=="object"&&!Array.isArray(S)){v=!1;let P=null;if(S["font-scale"]&&(P=l.parse(S["font-scale"],1,et),!P))return null;let I=null;if(S["text-font"]&&(I=l.parse(S["text-font"],1,ae(Nt)),!I))return null;let D=null;if(S["text-color"]&&(D=l.parse(S["text-color"],1,Rr),!D))return null;const O=m[m.length-1];O.scale=P,O.font=I,O.textColor=D}else{const P=l.parse(r[_],1,Ot);if(!P)return null;const I=P.type.kind;if(I!=="string"&&I!=="value"&&I!=="null"&&I!=="resolvedImage")return l.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");v=!0,m.push({content:P,scale:null,font:null,textColor:null})}}return new qu(m)}evaluate(r){return new Er(this.sections.map(l=>{const d=l.content.evaluate(r);return Sn(d)===q?new ku("",d,null,null,null):new ku(Yt(d),null,l.scale?l.scale.evaluate(r):null,l.font?l.font.evaluate(r).join(","):null,l.textColor?l.textColor.evaluate(r):null)}))}eachChild(r){for(const l of this.sections)r(l.content),l.scale&&r(l.scale),l.font&&r(l.font),l.textColor&&r(l.textColor)}outputDefined(){return!1}}class Rh{constructor(r){this.type=q,this.input=r}static parse(r,l){if(r.length!==2)return l.error("Expected two arguments.");const d=l.parse(r[1],1,Nt);return d?new Rh(d):l.error("No image name provided.")}evaluate(r){const l=this.input.evaluate(r),d=mr.fromString(l);return d&&r.availableImages&&(d.available=r.availableImages.indexOf(l)>-1),d}eachChild(r){r(this.input)}outputDefined(){return!1}}class Dh{constructor(r){this.type=et,this.input=r}static parse(r,l){if(r.length!==2)return l.error(`Expected 1 argument, but found ${r.length-1} instead.`);const d=l.parse(r[1],1);return d?d.type.kind!=="array"&&d.type.kind!=="string"&&d.type.kind!=="value"?l.error(`Expected argument of type string or array, but found ${le(d.type)} instead.`):new Dh(d):null}evaluate(r){const l=this.input.evaluate(r);if(typeof l=="string"||Array.isArray(l))return l.length;throw new kn(`Expected value to be of type string or array, but found ${le(Sn(l))} instead.`)}eachChild(r){r(this.input)}outputDefined(){return!1}}const Ao={"==":vv,"!=":xv,">":wv,"<":_v,">=":Sv,"<=":bv,array:Li,at:Ph,boolean:Li,case:Ih,coalesce:Vu,collator:Du,format:qu,image:Rh,in:Ah,"index-of":$u,interpolate:mi,"interpolate-hcl":mi,"interpolate-lab":mi,length:Dh,let:ju,literal:Da,match:kh,number:Li,"number-format":Mh,object:Li,slice:Uu,step:da,string:Li,"to-boolean":ca,"to-color":ca,"to-number":ca,"to-string":ca,var:zu,within:La};function dp(a,[r,l,d,m]){r=r.evaluate(a),l=l.evaluate(a),d=d.evaluate(a);const v=m?m.evaluate(a):1,_=Iu(r,l,d,v);if(_)throw new kn(_);return new sn(r/255,l/255,d/255,v,!1)}function fp(a,r){return a in r}function Lh(a,r){const l=r[a];return l===void 0?null:l}function za(a){return{type:a}}function pp(a){return{result:"success",value:a}}function fa(a){return{result:"error",value:a}}function ko(a){return a["property-type"]==="data-driven"||a["property-type"]==="cross-faded-data-driven"}function mp(a){return!!a.expression&&a.expression.parameters.indexOf("zoom")>-1}function zh(a){return!!a.expression&&a.expression.interpolated}function Jt(a){return a instanceof Number?"number":a instanceof String?"string":a instanceof Boolean?"boolean":Array.isArray(a)?"array":a===null?"null":typeof a}function En(a){return typeof a=="object"&&a!==null&&!Array.isArray(a)}function Ev(a){return a}function Wt(a,r){const l=r.type==="color",d=a.stops&&typeof a.stops[0][0]=="object",m=d||!(d||a.property!==void 0),v=a.type||(zh(r)?"exponential":"interval");if(l||r.type==="padding"){const D=l?sn.parse:fi.parse;(a=di({},a)).stops&&(a.stops=a.stops.map(O=>[O[0],D(O[1])])),a.default=D(a.default?a.default:r.default)}if(a.colorSpace&&(_=a.colorSpace)!=="rgb"&&_!=="hcl"&&_!=="lab")throw new Error(`Unknown color space: "${a.colorSpace}"`);var _;let S,P,I;if(v==="exponential")S=Dl;else if(v==="interval")S=wn;else if(v==="categorical"){S=Tn,P=Object.create(null);for(const D of a.stops)P[D[0]]=D[1];I=typeof a.stops[0][0]}else{if(v!=="identity")throw new Error(`Unknown function type "${v}"`);S=gp}if(d){const D={},O=[];for(let X=0;X<a.stops.length;X++){const te=a.stops[X],oe=te[0].zoom;D[oe]===void 0&&(D[oe]={zoom:oe,type:a.type,property:a.property,default:a.default,stops:[]},O.push(oe)),D[oe].stops.push([te[0].value,te[1]])}const U=[];for(const X of O)U.push([D[X].zoom,Wt(D[X],r)]);const W={name:"linear"};return{kind:"composite",interpolationType:W,interpolationFactor:mi.interpolationFactor.bind(void 0,W),zoomStops:U.map(X=>X[0]),evaluate:({zoom:X},te)=>Dl({stops:U,base:a.base},r,X).evaluate(X,te)}}if(m){const D=v==="exponential"?{name:"exponential",base:a.base!==void 0?a.base:1}:null;return{kind:"camera",interpolationType:D,interpolationFactor:mi.interpolationFactor.bind(void 0,D),zoomStops:a.stops.map(O=>O[0]),evaluate:({zoom:O})=>S(a,r,O,P,I)}}return{kind:"source",evaluate(D,O){const U=O&&O.properties?O.properties[a.property]:void 0;return U===void 0?Oa(a.default,r.default):S(a,r,U,P,I)}}}function Oa(a,r,l){return a!==void 0?a:r!==void 0?r:l!==void 0?l:void 0}function Tn(a,r,l,d,m){return Oa(typeof l===m?d[l]:void 0,a.default,r.default)}function wn(a,r,l){if(Jt(l)!=="number")return Oa(a.default,r.default);const d=a.stops.length;if(d===1||l<=a.stops[0][0])return a.stops[0][1];if(l>=a.stops[d-1][0])return a.stops[d-1][1];const m=Co(a.stops.map(v=>v[0]),l);return a.stops[m][1]}function Dl(a,r,l){const d=a.base!==void 0?a.base:1;if(Jt(l)!=="number")return Oa(a.default,r.default);const m=a.stops.length;if(m===1||l<=a.stops[0][0])return a.stops[0][1];if(l>=a.stops[m-1][0])return a.stops[m-1][1];const v=Co(a.stops.map(D=>D[0]),l),_=function(D,O,U,W){const X=W-U,te=D-U;return X===0?0:O===1?te/X:(Math.pow(O,te)-1)/(Math.pow(O,X)-1)}(l,d,a.stops[v][0],a.stops[v+1][0]),S=a.stops[v][1],P=a.stops[v+1][1],I=pi[r.type]||Ev;return typeof S.evaluate=="function"?{evaluate(...D){const O=S.evaluate.apply(void 0,D),U=P.evaluate.apply(void 0,D);if(O!==void 0&&U!==void 0)return I(O,U,_,a.colorSpace)}}:I(S,P,_,a.colorSpace)}function gp(a,r,l){switch(r.type){case"color":l=sn.parse(l);break;case"formatted":l=Er.fromString(l.toString());break;case"resolvedImage":l=mr.fromString(l.toString());break;case"padding":l=fi.parse(l);break;default:Jt(l)===r.type||r.type==="enum"&&r.values[l]||(l=void 0)}return Oa(l,a.default,r.default)}zi.register(Ao,{error:[{kind:"error"},[Nt],(a,[r])=>{throw new kn(r.evaluate(a))}],typeof:[Nt,[Ot],(a,[r])=>le(Sn(r.evaluate(a)))],"to-rgba":[ae(et,4),[Rr],(a,[r])=>{const[l,d,m,v]=r.evaluate(a).rgb;return[255*l,255*d,255*m,v]}],rgb:[Rr,[et,et,et],dp],rgba:[Rr,[et,et,et,et],dp],has:{type:Dt,overloads:[[[Nt],(a,[r])=>fp(r.evaluate(a),a.properties())],[[Nt,ds],(a,[r,l])=>fp(r.evaluate(a),l.evaluate(a))]]},get:{type:Ot,overloads:[[[Nt],(a,[r])=>Lh(r.evaluate(a),a.properties())],[[Nt,ds],(a,[r,l])=>Lh(r.evaluate(a),l.evaluate(a))]]},"feature-state":[Ot,[Nt],(a,[r])=>Lh(r.evaluate(a),a.featureState||{})],properties:[ds,[],a=>a.properties()],"geometry-type":[Nt,[],a=>a.geometryType()],id:[Ot,[],a=>a.id()],zoom:[et,[],a=>a.globals.zoom],"heatmap-density":[et,[],a=>a.globals.heatmapDensity||0],"line-progress":[et,[],a=>a.globals.lineProgress||0],accumulated:[Ot,[],a=>a.globals.accumulated===void 0?null:a.globals.accumulated],"+":[et,za(et),(a,r)=>{let l=0;for(const d of r)l+=d.evaluate(a);return l}],"*":[et,za(et),(a,r)=>{let l=1;for(const d of r)l*=d.evaluate(a);return l}],"-":{type:et,overloads:[[[et,et],(a,[r,l])=>r.evaluate(a)-l.evaluate(a)],[[et],(a,[r])=>-r.evaluate(a)]]},"/":[et,[et,et],(a,[r,l])=>r.evaluate(a)/l.evaluate(a)],"%":[et,[et,et],(a,[r,l])=>r.evaluate(a)%l.evaluate(a)],ln2:[et,[],()=>Math.LN2],pi:[et,[],()=>Math.PI],e:[et,[],()=>Math.E],"^":[et,[et,et],(a,[r,l])=>Math.pow(r.evaluate(a),l.evaluate(a))],sqrt:[et,[et],(a,[r])=>Math.sqrt(r.evaluate(a))],log10:[et,[et],(a,[r])=>Math.log(r.evaluate(a))/Math.LN10],ln:[et,[et],(a,[r])=>Math.log(r.evaluate(a))],log2:[et,[et],(a,[r])=>Math.log(r.evaluate(a))/Math.LN2],sin:[et,[et],(a,[r])=>Math.sin(r.evaluate(a))],cos:[et,[et],(a,[r])=>Math.cos(r.evaluate(a))],tan:[et,[et],(a,[r])=>Math.tan(r.evaluate(a))],asin:[et,[et],(a,[r])=>Math.asin(r.evaluate(a))],acos:[et,[et],(a,[r])=>Math.acos(r.evaluate(a))],atan:[et,[et],(a,[r])=>Math.atan(r.evaluate(a))],min:[et,za(et),(a,r)=>Math.min(...r.map(l=>l.evaluate(a)))],max:[et,za(et),(a,r)=>Math.max(...r.map(l=>l.evaluate(a)))],abs:[et,[et],(a,[r])=>Math.abs(r.evaluate(a))],round:[et,[et],(a,[r])=>{const l=r.evaluate(a);return l<0?-Math.round(-l):Math.round(l)}],floor:[et,[et],(a,[r])=>Math.floor(r.evaluate(a))],ceil:[et,[et],(a,[r])=>Math.ceil(r.evaluate(a))],"filter-==":[Dt,[Nt,Ot],(a,[r,l])=>a.properties()[r.value]===l.value],"filter-id-==":[Dt,[Ot],(a,[r])=>a.id()===r.value],"filter-type-==":[Dt,[Nt],(a,[r])=>a.geometryType()===r.value],"filter-<":[Dt,[Nt,Ot],(a,[r,l])=>{const d=a.properties()[r.value],m=l.value;return typeof d==typeof m&&d<m}],"filter-id-<":[Dt,[Ot],(a,[r])=>{const l=a.id(),d=r.value;return typeof l==typeof d&&l<d}],"filter->":[Dt,[Nt,Ot],(a,[r,l])=>{const d=a.properties()[r.value],m=l.value;return typeof d==typeof m&&d>m}],"filter-id->":[Dt,[Ot],(a,[r])=>{const l=a.id(),d=r.value;return typeof l==typeof d&&l>d}],"filter-<=":[Dt,[Nt,Ot],(a,[r,l])=>{const d=a.properties()[r.value],m=l.value;return typeof d==typeof m&&d<=m}],"filter-id-<=":[Dt,[Ot],(a,[r])=>{const l=a.id(),d=r.value;return typeof l==typeof d&&l<=d}],"filter->=":[Dt,[Nt,Ot],(a,[r,l])=>{const d=a.properties()[r.value],m=l.value;return typeof d==typeof m&&d>=m}],"filter-id->=":[Dt,[Ot],(a,[r])=>{const l=a.id(),d=r.value;return typeof l==typeof d&&l>=d}],"filter-has":[Dt,[Ot],(a,[r])=>r.value in a.properties()],"filter-has-id":[Dt,[],a=>a.id()!==null&&a.id()!==void 0],"filter-type-in":[Dt,[ae(Nt)],(a,[r])=>r.value.indexOf(a.geometryType())>=0],"filter-id-in":[Dt,[ae(Ot)],(a,[r])=>r.value.indexOf(a.id())>=0],"filter-in-small":[Dt,[Nt,ae(Ot)],(a,[r,l])=>l.value.indexOf(a.properties()[r.value])>=0],"filter-in-large":[Dt,[Nt,ae(Ot)],(a,[r,l])=>function(d,m,v,_){for(;v<=_;){const S=v+_>>1;if(m[S]===d)return!0;m[S]>d?_=S-1:v=S+1}return!1}(a.properties()[r.value],l.value,0,l.value.length-1)],all:{type:Dt,overloads:[[[Dt,Dt],(a,[r,l])=>r.evaluate(a)&&l.evaluate(a)],[za(Dt),(a,r)=>{for(const l of r)if(!l.evaluate(a))return!1;return!0}]]},any:{type:Dt,overloads:[[[Dt,Dt],(a,[r,l])=>r.evaluate(a)||l.evaluate(a)],[za(Dt),(a,r)=>{for(const l of r)if(l.evaluate(a))return!0;return!1}]]},"!":[Dt,[Dt],(a,[r])=>!r.evaluate(a)],"is-supported-script":[Dt,[Nt],(a,[r])=>{const l=a.globals&&a.globals.isSupportedScript;return!l||l(r.evaluate(a))}],upcase:[Nt,[Nt],(a,[r])=>r.evaluate(a).toUpperCase()],downcase:[Nt,[Nt],(a,[r])=>r.evaluate(a).toLowerCase()],concat:[Nt,za(Ot),(a,r)=>r.map(l=>Yt(l.evaluate(a))).join("")],"resolved-locale":[Nt,[Os],(a,[r])=>r.evaluate(a).resolvedLocale()]});class Oh{constructor(r,l){var d;this.expression=r,this._warningHistory={},this._evaluator=new _h,this._defaultValue=l?(d=l).type==="color"&&En(d.default)?new sn(0,0,0,0):d.type==="color"?sn.parse(d.default)||null:d.type==="padding"?fi.parse(d.default)||null:d.type==="variableAnchorOffsetCollection"?Di.parse(d.default)||null:d.default===void 0?null:d.default:null,this._enumValues=l&&l.type==="enum"?l.values:null}evaluateWithoutErrorHandling(r,l,d,m,v,_){return this._evaluator.globals=r,this._evaluator.feature=l,this._evaluator.featureState=d,this._evaluator.canonical=m,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=_,this.expression.evaluate(this._evaluator)}evaluate(r,l,d,m,v,_){this._evaluator.globals=r,this._evaluator.feature=l||null,this._evaluator.featureState=d||null,this._evaluator.canonical=m,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=_||null;try{const S=this.expression.evaluate(this._evaluator);if(S==null||typeof S=="number"&&S!=S)return this._defaultValue;if(this._enumValues&&!(S in this._enumValues))throw new kn(`Expected value to be one of ${Object.keys(this._enumValues).map(P=>JSON.stringify(P)).join(", ")}, but found ${JSON.stringify(S)} instead.`);return S}catch(S){return this._warningHistory[S.message]||(this._warningHistory[S.message]=!0,typeof console<"u"&&console.warn(S.message)),this._defaultValue}}}function Gu(a){return Array.isArray(a)&&a.length>0&&typeof a[0]=="string"&&a[0]in Ao}function Zu(a,r){const l=new Ru(Ao,Ou,[],r?function(m){const v={color:Rr,string:Nt,number:et,enum:Nt,boolean:Dt,formatted:ie,padding:j,resolvedImage:q,variableAnchorOffsetCollection:Y};return m.type==="array"?ae(v[m.value]||Ot,m.length):v[m.type]}(r):void 0),d=l.parse(a,void 0,void 0,void 0,r&&r.type==="string"?{typeAnnotation:"coerce"}:void 0);return d?pp(new Oh(d,r)):fa(l.errors)}class Fh{constructor(r,l){this.kind=r,this._styleExpression=l,this.isStateDependent=r!=="constant"&&!Rl(l.expression)}evaluateWithoutErrorHandling(r,l,d,m,v,_){return this._styleExpression.evaluateWithoutErrorHandling(r,l,d,m,v,_)}evaluate(r,l,d,m,v,_){return this._styleExpression.evaluate(r,l,d,m,v,_)}}class Wu{constructor(r,l,d,m){this.kind=r,this.zoomStops=d,this._styleExpression=l,this.isStateDependent=r!=="camera"&&!Rl(l.expression),this.interpolationType=m}evaluateWithoutErrorHandling(r,l,d,m,v,_){return this._styleExpression.evaluateWithoutErrorHandling(r,l,d,m,v,_)}evaluate(r,l,d,m,v,_){return this._styleExpression.evaluate(r,l,d,m,v,_)}interpolationFactor(r,l,d){return this.interpolationType?mi.interpolationFactor(this.interpolationType,r,l,d):0}}function Nh(a,r){const l=Zu(a,r);if(l.result==="error")return l;const d=l.value.expression,m=Fu(d);if(!m&&!ko(r))return fa([new _n("","data expressions not supported")]);const v=Nu(d,["zoom"]);if(!v&&!mp(r))return fa([new _n("","zoom expressions not supported")]);const _=zl(d);return _||v?_ instanceof _n?fa([_]):_ instanceof mi&&!zh(r)?fa([new _n("",'"interpolate" expressions cannot be used with this property')]):pp(_?new Wu(m?"camera":"composite",l.value,_.labels,_ instanceof mi?_.interpolation:void 0):new Fh(m?"constant":"source",l.value)):fa([new _n("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Ll{constructor(r,l){this._parameters=r,this._specification=l,di(this,Wt(this._parameters,this._specification))}static deserialize(r){return new Ll(r._parameters,r._specification)}static serialize(r){return{_parameters:r._parameters,_specification:r._specification}}}function zl(a){let r=null;if(a instanceof ju)r=zl(a.result);else if(a instanceof Vu){for(const l of a.args)if(r=zl(l),r)break}else(a instanceof da||a instanceof mi)&&a.input instanceof zi&&a.input.name==="zoom"&&(r=a);return r instanceof _n||a.eachChild(l=>{const d=zl(l);d instanceof _n?r=d:!r&&d?r=new _n("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):r&&d&&r!==d&&(r=new _n("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),r}function Ol(a){if(a===!0||a===!1)return!0;if(!Array.isArray(a)||a.length===0)return!1;switch(a[0]){case"has":return a.length>=2&&a[1]!=="$id"&&a[1]!=="$type";case"in":return a.length>=3&&(typeof a[1]!="string"||Array.isArray(a[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return a.length!==3||Array.isArray(a[1])||Array.isArray(a[2]);case"any":case"all":for(const r of a.slice(1))if(!Ol(r)&&typeof r!="boolean")return!1;return!0;default:return!0}}const Tv={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Bh(a){if(a==null)return{filter:()=>!0,needGeometry:!1};Ol(a)||(a=Hu(a));const r=Zu(a,Tv);if(r.result==="error")throw new Error(r.value.map(l=>`${l.key}: ${l.message}`).join(", "));return{filter:(l,d,m)=>r.value.evaluate(l,d,{},m),needGeometry:yp(a)}}function Cv(a,r){return a<r?-1:a>r?1:0}function yp(a){if(!Array.isArray(a))return!1;if(a[0]==="within")return!0;for(let r=1;r<a.length;r++)if(yp(a[r]))return!0;return!1}function Hu(a){if(!a)return!0;const r=a[0];return a.length<=1?r!=="any":r==="=="?Vh(a[1],a[2],"=="):r==="!="?Fl(Vh(a[1],a[2],"==")):r==="<"||r===">"||r==="<="||r===">="?Vh(a[1],a[2],r):r==="any"?(l=a.slice(1),["any"].concat(l.map(Hu))):r==="all"?["all"].concat(a.slice(1).map(Hu)):r==="none"?["all"].concat(a.slice(1).map(Hu).map(Fl)):r==="in"?vp(a[1],a.slice(2)):r==="!in"?Fl(vp(a[1],a.slice(2))):r==="has"?xp(a[1]):r==="!has"?Fl(xp(a[1])):r!=="within"||a;var l}function Vh(a,r,l){switch(a){case"$type":return[`filter-type-${l}`,r];case"$id":return[`filter-id-${l}`,r];default:return[`filter-${l}`,a,r]}}function vp(a,r){if(r.length===0)return!1;switch(a){case"$type":return["filter-type-in",["literal",r]];case"$id":return["filter-id-in",["literal",r]];default:return r.length>200&&!r.some(l=>typeof l!=typeof r[0])?["filter-in-large",a,["literal",r.sort(Cv)]]:["filter-in-small",a,["literal",r]]}}function xp(a){switch(a){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",a]}}function Fl(a){return["!",a]}function Ku(a){const r=typeof a;if(r==="number"||r==="boolean"||r==="string"||a==null)return JSON.stringify(a);if(Array.isArray(a)){let m="[";for(const v of a)m+=`${Ku(v)},`;return`${m}]`}const l=Object.keys(a).sort();let d="{";for(let m=0;m<l.length;m++)d+=`${JSON.stringify(l[m])}:${Ku(a[l[m]])},`;return`${d}}`}function Xu(a){let r="";for(const l of st)r+=`/${Ku(a[l])}`;return r}function _p(a){const r=a.value;return r?[new He(a.key,r,"constants have been deprecated as of v8")]:[]}function In(a){return a instanceof Number||a instanceof String||a instanceof Boolean?a.valueOf():a}function Fa(a){if(Array.isArray(a))return a.map(Fa);if(a instanceof Object&&!(a instanceof Number||a instanceof String||a instanceof Boolean)){const r={};for(const l in a)r[l]=Fa(a[l]);return r}return In(a)}function Kr(a){const r=a.key,l=a.value,d=a.valueSpec||{},m=a.objectElementValidators||{},v=a.style,_=a.styleSpec,S=a.validateSpec;let P=[];const I=Jt(l);if(I!=="object")return[new He(r,l,`object expected, ${I} found`)];for(const D in l){const O=D.split(".")[0],U=d[O]||d["*"];let W;if(m[O])W=m[O];else if(d[O])W=S;else if(m["*"])W=m["*"];else{if(!d["*"]){P.push(new He(r,l[D],`unknown property "${D}"`));continue}W=S}P=P.concat(W({key:(r&&`${r}.`)+D,value:l[D],valueSpec:U,style:v,styleSpec:_,object:l,objectKey:D,validateSpec:S},l))}for(const D in d)m[D]||d[D].required&&d[D].default===void 0&&l[D]===void 0&&P.push(new He(r,l,`missing required property "${D}"`));return P}function Io(a){const r=a.value,l=a.valueSpec,d=a.style,m=a.styleSpec,v=a.key,_=a.arrayElementValidator||a.validateSpec;if(Jt(r)!=="array")return[new He(v,r,`array expected, ${Jt(r)} found`)];if(l.length&&r.length!==l.length)return[new He(v,r,`array length ${l.length} expected, length ${r.length} found`)];if(l["min-length"]&&r.length<l["min-length"])return[new He(v,r,`array length at least ${l["min-length"]} expected, length ${r.length} found`)];let S={type:l.value,values:l.values};m.$version<7&&(S.function=l.function),Jt(l.value)==="object"&&(S=l.value);let P=[];for(let I=0;I<r.length;I++)P=P.concat(_({array:r,arrayIndex:I,value:r[I],valueSpec:S,validateSpec:a.validateSpec,style:d,styleSpec:m,key:`${v}[${I}]`}));return P}function Nl(a){const r=a.key,l=a.value,d=a.valueSpec;let m=Jt(l);return m==="number"&&l!=l&&(m="NaN"),m!=="number"?[new He(r,l,`number expected, ${m} found`)]:"minimum"in d&&l<d.minimum?[new He(r,l,`${l} is less than the minimum value ${d.minimum}`)]:"maximum"in d&&l>d.maximum?[new He(r,l,`${l} is greater than the maximum value ${d.maximum}`)]:[]}function Qu(a){const r=a.valueSpec,l=In(a.value.type);let d,m,v,_={};const S=l!=="categorical"&&a.value.property===void 0,P=!S,I=Jt(a.value.stops)==="array"&&Jt(a.value.stops[0])==="array"&&Jt(a.value.stops[0][0])==="object",D=Kr({key:a.key,value:a.value,valueSpec:a.styleSpec.function,validateSpec:a.validateSpec,style:a.style,styleSpec:a.styleSpec,objectElementValidators:{stops:function(W){if(l==="identity")return[new He(W.key,W.value,'identity function may not have a "stops" property')];let X=[];const te=W.value;return X=X.concat(Io({key:W.key,value:te,valueSpec:W.valueSpec,validateSpec:W.validateSpec,style:W.style,styleSpec:W.styleSpec,arrayElementValidator:O})),Jt(te)==="array"&&te.length===0&&X.push(new He(W.key,te,"array must have at least one stop")),X},default:function(W){return W.validateSpec({key:W.key,value:W.value,valueSpec:r,validateSpec:W.validateSpec,style:W.style,styleSpec:W.styleSpec})}}});return l==="identity"&&S&&D.push(new He(a.key,a.value,'missing required property "property"')),l==="identity"||a.value.stops||D.push(new He(a.key,a.value,'missing required property "stops"')),l==="exponential"&&a.valueSpec.expression&&!zh(a.valueSpec)&&D.push(new He(a.key,a.value,"exponential functions not supported")),a.styleSpec.$version>=8&&(P&&!ko(a.valueSpec)?D.push(new He(a.key,a.value,"property functions not supported")):S&&!mp(a.valueSpec)&&D.push(new He(a.key,a.value,"zoom functions not supported"))),l!=="categorical"&&!I||a.value.property!==void 0||D.push(new He(a.key,a.value,'"property" property is required')),D;function O(W){let X=[];const te=W.value,oe=W.key;if(Jt(te)!=="array")return[new He(oe,te,`array expected, ${Jt(te)} found`)];if(te.length!==2)return[new He(oe,te,`array length 2 expected, length ${te.length} found`)];if(I){if(Jt(te[0])!=="object")return[new He(oe,te,`object expected, ${Jt(te[0])} found`)];if(te[0].zoom===void 0)return[new He(oe,te,"object stop key must have zoom")];if(te[0].value===void 0)return[new He(oe,te,"object stop key must have value")];if(v&&v>In(te[0].zoom))return[new He(oe,te[0].zoom,"stop zoom values must appear in ascending order")];In(te[0].zoom)!==v&&(v=In(te[0].zoom),m=void 0,_={}),X=X.concat(Kr({key:`${oe}[0]`,value:te[0],valueSpec:{zoom:{}},validateSpec:W.validateSpec,style:W.style,styleSpec:W.styleSpec,objectElementValidators:{zoom:Nl,value:U}}))}else X=X.concat(U({key:`${oe}[0]`,value:te[0],valueSpec:{},validateSpec:W.validateSpec,style:W.style,styleSpec:W.styleSpec},te));return Gu(Fa(te[1]))?X.concat([new He(`${oe}[1]`,te[1],"expressions are not allowed in function stops.")]):X.concat(W.validateSpec({key:`${oe}[1]`,value:te[1],valueSpec:r,validateSpec:W.validateSpec,style:W.style,styleSpec:W.styleSpec}))}function U(W,X){const te=Jt(W.value),oe=In(W.value),he=W.value!==null?W.value:X;if(d){if(te!==d)return[new He(W.key,he,`${te} stop domain type must match previous stop domain type ${d}`)]}else d=te;if(te!=="number"&&te!=="string"&&te!=="boolean")return[new He(W.key,he,"stop domain value must be a number, string, or boolean")];if(te!=="number"&&l!=="categorical"){let we=`number expected, ${te} found`;return ko(r)&&l===void 0&&(we+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new He(W.key,he,we)]}return l!=="categorical"||te!=="number"||isFinite(oe)&&Math.floor(oe)===oe?l!=="categorical"&&te==="number"&&m!==void 0&&oe<m?[new He(W.key,he,"stop domain values must appear in ascending order")]:(m=oe,l==="categorical"&&oe in _?[new He(W.key,he,"stop domain values must be unique")]:(_[oe]=!0,[])):[new He(W.key,he,`integer expected, found ${oe}`)]}}function Na(a){const r=(a.expressionContext==="property"?Nh:Zu)(Fa(a.value),a.valueSpec);if(r.result==="error")return r.value.map(d=>new He(`${a.key}${d.key}`,a.value,d.message));const l=r.value.expression||r.value._styleExpression.expression;if(a.expressionContext==="property"&&a.propertyKey==="text-font"&&!l.outputDefined())return[new He(a.key,a.value,`Invalid data expression for "${a.propertyKey}". Output values must be contained as literals within the expression.`)];if(a.expressionContext==="property"&&a.propertyType==="layout"&&!Rl(l))return[new He(a.key,a.value,'"feature-state" data expressions are not supported with layout properties.')];if(a.expressionContext==="filter"&&!Rl(l))return[new He(a.key,a.value,'"feature-state" data expressions are not supported with filters.')];if(a.expressionContext&&a.expressionContext.indexOf("cluster")===0){if(!Nu(l,["zoom","feature-state"]))return[new He(a.key,a.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(a.expressionContext==="cluster-initial"&&!Fu(l))return[new He(a.key,a.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Bl(a){const r=a.key,l=a.value,d=a.valueSpec,m=[];return Array.isArray(d.values)?d.values.indexOf(In(l))===-1&&m.push(new He(r,l,`expected one of [${d.values.join(", ")}], ${JSON.stringify(l)} found`)):Object.keys(d.values).indexOf(In(l))===-1&&m.push(new He(r,l,`expected one of [${Object.keys(d.values).join(", ")}], ${JSON.stringify(l)} found`)),m}function Mo(a){return Ol(Fa(a.value))?Na(di({},a,{expressionContext:"filter",valueSpec:{value:"boolean"}})):wp(a)}function wp(a){const r=a.value,l=a.key;if(Jt(r)!=="array")return[new He(l,r,`array expected, ${Jt(r)} found`)];const d=a.styleSpec;let m,v=[];if(r.length<1)return[new He(l,r,"filter array must have at least 1 element")];switch(v=v.concat(Bl({key:`${l}[0]`,value:r[0],valueSpec:d.filter_operator,style:a.style,styleSpec:a.styleSpec})),In(r[0])){case"<":case"<=":case">":case">=":r.length>=2&&In(r[1])==="$type"&&v.push(new He(l,r,`"$type" cannot be use with operator "${r[0]}"`));case"==":case"!=":r.length!==3&&v.push(new He(l,r,`filter array for operator "${r[0]}" must have 3 elements`));case"in":case"!in":r.length>=2&&(m=Jt(r[1]),m!=="string"&&v.push(new He(`${l}[1]`,r[1],`string expected, ${m} found`)));for(let _=2;_<r.length;_++)m=Jt(r[_]),In(r[1])==="$type"?v=v.concat(Bl({key:`${l}[${_}]`,value:r[_],valueSpec:d.geometry_type,style:a.style,styleSpec:a.styleSpec})):m!=="string"&&m!=="number"&&m!=="boolean"&&v.push(new He(`${l}[${_}]`,r[_],`string, number, or boolean expected, ${m} found`));break;case"any":case"all":case"none":for(let _=1;_<r.length;_++)v=v.concat(wp({key:`${l}[${_}]`,value:r[_],style:a.style,styleSpec:a.styleSpec}));break;case"has":case"!has":m=Jt(r[1]),r.length!==2?v.push(new He(l,r,`filter array for "${r[0]}" operator must have 2 elements`)):m!=="string"&&v.push(new He(`${l}[1]`,r[1],`string expected, ${m} found`));break;case"within":m=Jt(r[1]),r.length!==2?v.push(new He(l,r,`filter array for "${r[0]}" operator must have 2 elements`)):m!=="object"&&v.push(new He(`${l}[1]`,r[1],`object expected, ${m} found`))}return v}function bp(a,r){const l=a.key,d=a.validateSpec,m=a.style,v=a.styleSpec,_=a.value,S=a.objectKey,P=v[`${r}_${a.layerType}`];if(!P)return[];const I=S.match(/^(.*)-transition$/);if(r==="paint"&&I&&P[I[1]]&&P[I[1]].transition)return d({key:l,value:_,valueSpec:v.transition,style:m,styleSpec:v});const D=a.valueSpec||P[S];if(!D)return[new He(l,_,`unknown property "${S}"`)];let O;if(Jt(_)==="string"&&ko(D)&&!D.tokens&&(O=/^{([^}]+)}$/.exec(_)))return[new He(l,_,`"${S}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(O[1])} }\`.`)];const U=[];return a.layerType==="symbol"&&(S==="text-field"&&m&&!m.glyphs&&U.push(new He(l,_,'use of "text-field" requires a style "glyphs" property')),S==="text-font"&&En(Fa(_))&&In(_.type)==="identity"&&U.push(new He(l,_,'"text-font" does not support identity functions'))),U.concat(d({key:a.key,value:_,valueSpec:D,style:m,styleSpec:v,expressionContext:"property",propertyType:r,propertyKey:S}))}function Sp(a){return bp(a,"paint")}function Ep(a){return bp(a,"layout")}function Tp(a){let r=[];const l=a.value,d=a.key,m=a.style,v=a.styleSpec;l.type||l.ref||r.push(new He(d,l,'either "type" or "ref" is required'));let _=In(l.type);const S=In(l.ref);if(l.id){const P=In(l.id);for(let I=0;I<a.arrayIndex;I++){const D=m.layers[I];In(D.id)===P&&r.push(new He(d,l.id,`duplicate layer id "${l.id}", previously used at line ${D.id.__line__}`))}}if("ref"in l){let P;["type","source","source-layer","filter","layout"].forEach(I=>{I in l&&r.push(new He(d,l[I],`"${I}" is prohibited for ref layers`))}),m.layers.forEach(I=>{In(I.id)===S&&(P=I)}),P?P.ref?r.push(new He(d,l.ref,"ref cannot reference another ref layer")):_=In(P.type):r.push(new He(d,l.ref,`ref layer "${S}" not found`))}else if(_!=="background")if(l.source){const P=m.sources&&m.sources[l.source],I=P&&In(P.type);P?I==="vector"&&_==="raster"?r.push(new He(d,l.source,`layer "${l.id}" requires a raster source`)):I!=="raster-dem"&&_==="hillshade"?r.push(new He(d,l.source,`layer "${l.id}" requires a raster-dem source`)):I==="raster"&&_!=="raster"?r.push(new He(d,l.source,`layer "${l.id}" requires a vector source`)):I!=="vector"||l["source-layer"]?I==="raster-dem"&&_!=="hillshade"?r.push(new He(d,l.source,"raster-dem source can only be used with layer type 'hillshade'.")):_!=="line"||!l.paint||!l.paint["line-gradient"]||I==="geojson"&&P.lineMetrics||r.push(new He(d,l,`layer "${l.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):r.push(new He(d,l,`layer "${l.id}" must specify a "source-layer"`)):r.push(new He(d,l.source,`source "${l.source}" not found`))}else r.push(new He(d,l,'missing required property "source"'));return r=r.concat(Kr({key:d,value:l,valueSpec:v.layer,style:a.style,styleSpec:a.styleSpec,validateSpec:a.validateSpec,objectElementValidators:{"*":()=>[],type:()=>a.validateSpec({key:`${d}.type`,value:l.type,valueSpec:v.layer.type,style:a.style,styleSpec:a.styleSpec,validateSpec:a.validateSpec,object:l,objectKey:"type"}),filter:Mo,layout:P=>Kr({layer:l,key:P.key,value:P.value,style:P.style,styleSpec:P.styleSpec,validateSpec:P.validateSpec,objectElementValidators:{"*":I=>Ep(di({layerType:_},I))}}),paint:P=>Kr({layer:l,key:P.key,value:P.value,style:P.style,styleSpec:P.styleSpec,validateSpec:P.validateSpec,objectElementValidators:{"*":I=>Sp(di({layerType:_},I))}})}})),r}function fs(a){const r=a.value,l=a.key,d=Jt(r);return d!=="string"?[new He(l,r,`string expected, ${d} found`)]:[]}const Vl={promoteId:function({key:a,value:r}){if(Jt(r)==="string")return fs({key:a,value:r});{const l=[];for(const d in r)l.push(...fs({key:`${a}.${d}`,value:r[d]}));return l}}};function gi(a){const r=a.value,l=a.key,d=a.styleSpec,m=a.style,v=a.validateSpec;if(!r.type)return[new He(l,r,'"type" is required')];const _=In(r.type);let S;switch(_){case"vector":case"raster":return S=Kr({key:l,value:r,valueSpec:d[`source_${_.replace("-","_")}`],style:a.style,styleSpec:d,objectElementValidators:Vl,validateSpec:v}),S;case"raster-dem":return S=function(P){var I;const D=(I=P.sourceName)!==null&&I!==void 0?I:"",O=P.value,U=P.styleSpec,W=U.source_raster_dem,X=P.style;let te=[];const oe=Jt(O);if(O===void 0)return te;if(oe!=="object")return te.push(new He("source_raster_dem",O,`object expected, ${oe} found`)),te;const he=In(O.encoding)==="custom",we=["redFactor","greenFactor","blueFactor","baseShift"],pe=P.value.encoding?`"${P.value.encoding}"`:"Default";for(const Se in O)!he&&we.includes(Se)?te.push(new He(Se,O[Se],`In "${D}": "${Se}" is only valid when "encoding" is set to "custom". ${pe} encoding found`)):W[Se]?te=te.concat(P.validateSpec({key:Se,value:O[Se],valueSpec:W[Se],validateSpec:P.validateSpec,style:X,styleSpec:U})):te.push(new He(Se,O[Se],`unknown property "${Se}"`));return te}({sourceName:l,value:r,style:a.style,styleSpec:d,validateSpec:v}),S;case"geojson":if(S=Kr({key:l,value:r,valueSpec:d.source_geojson,style:m,styleSpec:d,validateSpec:v,objectElementValidators:Vl}),r.cluster)for(const P in r.clusterProperties){const[I,D]=r.clusterProperties[P],O=typeof I=="string"?[I,["accumulated"],["get",P]]:I;S.push(...Na({key:`${l}.${P}.map`,value:D,validateSpec:v,expressionContext:"cluster-map"})),S.push(...Na({key:`${l}.${P}.reduce`,value:O,validateSpec:v,expressionContext:"cluster-reduce"}))}return S;case"video":return Kr({key:l,value:r,valueSpec:d.source_video,style:m,validateSpec:v,styleSpec:d});case"image":return Kr({key:l,value:r,valueSpec:d.source_image,style:m,validateSpec:v,styleSpec:d});case"canvas":return[new He(l,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Bl({key:`${l}.type`,value:r.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:m,validateSpec:v,styleSpec:d})}}function jl(a){const r=a.value,l=a.styleSpec,d=l.light,m=a.style;let v=[];const _=Jt(r);if(r===void 0)return v;if(_!=="object")return v=v.concat([new He("light",r,`object expected, ${_} found`)]),v;for(const S in r){const P=S.match(/^(.*)-transition$/);v=v.concat(P&&d[P[1]]&&d[P[1]].transition?a.validateSpec({key:S,value:r[S],valueSpec:l.transition,validateSpec:a.validateSpec,style:m,styleSpec:l}):d[S]?a.validateSpec({key:S,value:r[S],valueSpec:d[S],validateSpec:a.validateSpec,style:m,styleSpec:l}):[new He(S,r[S],`unknown property "${S}"`)])}return v}function Cp(a){const r=a.value,l=a.styleSpec,d=l.terrain,m=a.style;let v=[];const _=Jt(r);if(r===void 0)return v;if(_!=="object")return v=v.concat([new He("terrain",r,`object expected, ${_} found`)]),v;for(const S in r)v=v.concat(d[S]?a.validateSpec({key:S,value:r[S],valueSpec:d[S],validateSpec:a.validateSpec,style:m,styleSpec:l}):[new He(S,r[S],`unknown property "${S}"`)]);return v}function Pp(a){let r=[];const l=a.value,d=a.key;if(Array.isArray(l)){const m=[],v=[];for(const _ in l)l[_].id&&m.includes(l[_].id)&&r.push(new He(d,l,`all the sprites' ids must be unique, but ${l[_].id} is duplicated`)),m.push(l[_].id),l[_].url&&v.includes(l[_].url)&&r.push(new He(d,l,`all the sprites' URLs must be unique, but ${l[_].url} is duplicated`)),v.push(l[_].url),r=r.concat(Kr({key:`${d}[${_}]`,value:l[_],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:a.validateSpec}));return r}return fs({key:d,value:l})}const Ap={"*":()=>[],array:Io,boolean:function(a){const r=a.value,l=a.key,d=Jt(r);return d!=="boolean"?[new He(l,r,`boolean expected, ${d} found`)]:[]},number:Nl,color:function(a){const r=a.key,l=a.value,d=Jt(l);return d!=="string"?[new He(r,l,`color expected, ${d} found`)]:sn.parse(String(l))?[]:[new He(r,l,`color expected, "${l}" found`)]},constants:_p,enum:Bl,filter:Mo,function:Qu,layer:Tp,object:Kr,source:gi,light:jl,terrain:Cp,string:fs,formatted:function(a){return fs(a).length===0?[]:Na(a)},resolvedImage:function(a){return fs(a).length===0?[]:Na(a)},padding:function(a){const r=a.key,l=a.value;if(Jt(l)==="array"){if(l.length<1||l.length>4)return[new He(r,l,`padding requires 1 to 4 values; ${l.length} values found`)];const d={type:"number"};let m=[];for(let v=0;v<l.length;v++)m=m.concat(a.validateSpec({key:`${r}[${v}]`,value:l[v],validateSpec:a.validateSpec,valueSpec:d}));return m}return Nl({key:r,value:l,valueSpec:{}})},variableAnchorOffsetCollection:function(a){const r=a.key,l=a.value,d=Jt(l),m=a.styleSpec;if(d!=="array"||l.length<1||l.length%2!=0)return[new He(r,l,"variableAnchorOffsetCollection requires a non-empty array of even length")];let v=[];for(let _=0;_<l.length;_+=2)v=v.concat(Bl({key:`${r}[${_}]`,value:l[_],valueSpec:m.layout_symbol["text-anchor"]})),v=v.concat(Io({key:`${r}[${_+1}]`,value:l[_+1],valueSpec:{length:2,value:"number"},validateSpec:a.validateSpec,style:a.style,styleSpec:m}));return v},sprite:Pp};function Fs(a){const r=a.value,l=a.valueSpec,d=a.styleSpec;return a.validateSpec=Fs,l.expression&&En(In(r))?Qu(a):l.expression&&Gu(Fa(r))?Na(a):l.type&&Ap[l.type]?Ap[l.type](a):Kr(di({},a,{valueSpec:l.type?d[l.type]:l}))}function kp(a){const r=a.value,l=a.key,d=fs(a);return d.length||(r.indexOf("{fontstack}")===-1&&d.push(new He(l,r,'"glyphs" url must include a "{fontstack}" token')),r.indexOf("{range}")===-1&&d.push(new He(l,r,'"glyphs" url must include a "{range}" token'))),d}function Oi(a,r=ue){let l=[];return l=l.concat(Fs({key:"",value:a,valueSpec:r.$root,styleSpec:r,style:a,validateSpec:Fs,objectElementValidators:{glyphs:kp,"*":()=>[]}})),a.constants&&(l=l.concat(_p({key:"constants",value:a.constants,style:a,styleSpec:r,validateSpec:Fs}))),Yu(l)}function Ns(a){return function(r){return a({...r,validateSpec:Fs})}}function Yu(a){return[].concat(a).sort((r,l)=>r.line-l.line)}function Bs(a){return function(...r){return Yu(a.apply(this,r))}}Oi.source=Bs(Ns(gi)),Oi.sprite=Bs(Ns(Pp)),Oi.glyphs=Bs(Ns(kp)),Oi.light=Bs(Ns(jl)),Oi.terrain=Bs(Ns(Cp)),Oi.layer=Bs(Ns(Tp)),Oi.filter=Bs(Ns(Mo)),Oi.paintProperty=Bs(Ns(Sp)),Oi.layoutProperty=Bs(Ns(Ep));const Vs=Oi,Pv=Vs.light,jh=Vs.paintProperty,Ip=Vs.layoutProperty;function Ju(a,r){let l=!1;if(r&&r.length)for(const d of r)a.fire(new ge(new Error(d.message))),l=!0;return l}class Ro{constructor(r,l,d){const m=this.cells=[];if(r instanceof ArrayBuffer){this.arrayBuffer=r;const _=new Int32Array(this.arrayBuffer);r=_[0],this.d=(l=_[1])+2*(d=_[2]);for(let P=0;P<this.d*this.d;P++){const I=_[3+P],D=_[3+P+1];m.push(I===D?null:_.subarray(I,D))}const S=_[3+m.length+1];this.keys=_.subarray(_[3+m.length],S),this.bboxes=_.subarray(S),this.insert=this._insertReadonly}else{this.d=l+2*d;for(let _=0;_<this.d*this.d;_++)m.push([]);this.keys=[],this.bboxes=[]}this.n=l,this.extent=r,this.padding=d,this.scale=l/r,this.uid=0;const v=d/l*r;this.min=-v,this.max=r+v}insert(r,l,d,m,v){this._forEachCell(l,d,m,v,this._insertCell,this.uid++,void 0,void 0),this.keys.push(r),this.bboxes.push(l),this.bboxes.push(d),this.bboxes.push(m),this.bboxes.push(v)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(r,l,d,m,v,_){this.cells[v].push(_)}query(r,l,d,m,v){const _=this.min,S=this.max;if(r<=_&&l<=_&&S<=d&&S<=m&&!v)return Array.prototype.slice.call(this.keys);{const P=[];return this._forEachCell(r,l,d,m,this._queryCell,P,{},v),P}}_queryCell(r,l,d,m,v,_,S,P){const I=this.cells[v];if(I!==null){const D=this.keys,O=this.bboxes;for(let U=0;U<I.length;U++){const W=I[U];if(S[W]===void 0){const X=4*W;(P?P(O[X+0],O[X+1],O[X+2],O[X+3]):r<=O[X+2]&&l<=O[X+3]&&d>=O[X+0]&&m>=O[X+1])?(S[W]=!0,_.push(D[W])):S[W]=!1}}}}_forEachCell(r,l,d,m,v,_,S,P){const I=this._convertToCellCoord(r),D=this._convertToCellCoord(l),O=this._convertToCellCoord(d),U=this._convertToCellCoord(m);for(let W=I;W<=O;W++)for(let X=D;X<=U;X++){const te=this.d*X+W;if((!P||P(this._convertFromCellCoord(W),this._convertFromCellCoord(X),this._convertFromCellCoord(W+1),this._convertFromCellCoord(X+1)))&&v.call(this,r,l,d,m,te,_,S,P))return}}_convertFromCellCoord(r){return(r-this.padding)/this.scale}_convertToCellCoord(r){return Math.max(0,Math.min(this.d-1,Math.floor(r*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const r=this.cells,l=3+this.cells.length+1+1;let d=0;for(let _=0;_<this.cells.length;_++)d+=this.cells[_].length;const m=new Int32Array(l+d+this.keys.length+this.bboxes.length);m[0]=this.extent,m[1]=this.n,m[2]=this.padding;let v=l;for(let _=0;_<r.length;_++){const S=r[_];m[3+_]=v,m.set(S,v),v+=S.length}return m[3+r.length]=v,m.set(this.keys,v),v+=this.keys.length,m[3+r.length+1]=v,m.set(this.bboxes,v),v+=this.bboxes.length,m.buffer}static serialize(r,l){const d=r.toArrayBuffer();return l&&l.push(d),{buffer:d}}static deserialize(r){return new Ro(r.buffer)}}const js={};function ht(a,r,l={}){if(js[a])throw new Error(`${a} is already registered.`);Object.defineProperty(r,"_classRegistryKey",{value:a,writeable:!1}),js[a]={klass:r,omit:l.omit||[],shallow:l.shallow||[]}}ht("Object",Object),ht("TransferableGridIndex",Ro),ht("Color",sn),ht("Error",Error),ht("AJAXError",ki),ht("ResolvedImage",mr),ht("StylePropertyFunction",Ll),ht("StyleExpression",Oh,{omit:["_evaluator"]}),ht("ZoomDependentExpression",Wu),ht("ZoomConstantExpression",Fh),ht("CompoundExpression",zi,{omit:["_evaluate"]});for(const a in Ao)Ao[a]._classRegistryKey||ht(`Expression_${a}`,Ao[a]);function ec(a){return a&&typeof ArrayBuffer<"u"&&(a instanceof ArrayBuffer||a.constructor&&a.constructor.name==="ArrayBuffer")}function pa(a,r){if(a==null||typeof a=="boolean"||typeof a=="number"||typeof a=="string"||a instanceof Boolean||a instanceof Number||a instanceof String||a instanceof Date||a instanceof RegExp||a instanceof Blob)return a;if(ec(a)||Ke(a))return r&&r.push(a),a;if(ArrayBuffer.isView(a)){const l=a;return r&&r.push(l.buffer),l}if(a instanceof ImageData)return r&&r.push(a.data.buffer),a;if(Array.isArray(a)){const l=[];for(const d of a)l.push(pa(d,r));return l}if(typeof a=="object"){const l=a.constructor,d=l._classRegistryKey;if(!d)throw new Error("can't serialize object of unregistered class");if(!js[d])throw new Error(`${d} is not registered.`);const m=l.serialize?l.serialize(a,r):{};if(l.serialize){if(r&&m===r[r.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const v in a){if(!a.hasOwnProperty(v)||js[d].omit.indexOf(v)>=0)continue;const _=a[v];m[v]=js[d].shallow.indexOf(v)>=0?_:pa(_,r)}a instanceof Error&&(m.message=a.message)}if(m.$name)throw new Error("$name property is reserved for worker serialization logic.");return d!=="Object"&&(m.$name=d),m}throw new Error("can't serialize object of type "+typeof a)}function Do(a){if(a==null||typeof a=="boolean"||typeof a=="number"||typeof a=="string"||a instanceof Boolean||a instanceof Number||a instanceof String||a instanceof Date||a instanceof RegExp||a instanceof Blob||ec(a)||Ke(a)||ArrayBuffer.isView(a)||a instanceof ImageData)return a;if(Array.isArray(a))return a.map(Do);if(typeof a=="object"){const r=a.$name||"Object";if(!js[r])throw new Error(`can't deserialize unregistered class ${r}`);const{klass:l}=js[r];if(!l)throw new Error(`can't deserialize unregistered class ${r}`);if(l.deserialize)return l.deserialize(a);const d=Object.create(l.prototype);for(const m of Object.keys(a)){if(m==="$name")continue;const v=a[m];d[m]=js[r].shallow.indexOf(m)>=0?v:Do(v)}return d}throw new Error("can't deserialize object of type "+typeof a)}class Mp{constructor(){this.first=!0}update(r,l){const d=Math.floor(r);return this.first?(this.first=!1,this.lastIntegerZoom=d,this.lastIntegerZoomTime=0,this.lastZoom=r,this.lastFloorZoom=d,!0):(this.lastFloorZoom>d?(this.lastIntegerZoom=d+1,this.lastIntegerZoomTime=l):this.lastFloorZoom<d&&(this.lastIntegerZoom=d,this.lastIntegerZoomTime=l),r!==this.lastZoom&&(this.lastZoom=r,this.lastFloorZoom=d,!0))}}const ot={"Latin-1 Supplement":a=>a>=128&&a<=255,Arabic:a=>a>=1536&&a<=1791,"Arabic Supplement":a=>a>=1872&&a<=1919,"Arabic Extended-A":a=>a>=2208&&a<=2303,"Hangul Jamo":a=>a>=4352&&a<=4607,"Unified Canadian Aboriginal Syllabics":a=>a>=5120&&a<=5759,Khmer:a=>a>=6016&&a<=6143,"Unified Canadian Aboriginal Syllabics Extended":a=>a>=6320&&a<=6399,"General Punctuation":a=>a>=8192&&a<=8303,"Letterlike Symbols":a=>a>=8448&&a<=8527,"Number Forms":a=>a>=8528&&a<=8591,"Miscellaneous Technical":a=>a>=8960&&a<=9215,"Control Pictures":a=>a>=9216&&a<=9279,"Optical Character Recognition":a=>a>=9280&&a<=9311,"Enclosed Alphanumerics":a=>a>=9312&&a<=9471,"Geometric Shapes":a=>a>=9632&&a<=9727,"Miscellaneous Symbols":a=>a>=9728&&a<=9983,"Miscellaneous Symbols and Arrows":a=>a>=11008&&a<=11263,"CJK Radicals Supplement":a=>a>=11904&&a<=12031,"Kangxi Radicals":a=>a>=12032&&a<=12255,"Ideographic Description Characters":a=>a>=12272&&a<=12287,"CJK Symbols and Punctuation":a=>a>=12288&&a<=12351,Hiragana:a=>a>=12352&&a<=12447,Katakana:a=>a>=12448&&a<=12543,Bopomofo:a=>a>=12544&&a<=12591,"Hangul Compatibility Jamo":a=>a>=12592&&a<=12687,Kanbun:a=>a>=12688&&a<=12703,"Bopomofo Extended":a=>a>=12704&&a<=12735,"CJK Strokes":a=>a>=12736&&a<=12783,"Katakana Phonetic Extensions":a=>a>=12784&&a<=12799,"Enclosed CJK Letters and Months":a=>a>=12800&&a<=13055,"CJK Compatibility":a=>a>=13056&&a<=13311,"CJK Unified Ideographs Extension A":a=>a>=13312&&a<=19903,"Yijing Hexagram Symbols":a=>a>=19904&&a<=19967,"CJK Unified Ideographs":a=>a>=19968&&a<=40959,"Yi Syllables":a=>a>=40960&&a<=42127,"Yi Radicals":a=>a>=42128&&a<=42191,"Hangul Jamo Extended-A":a=>a>=43360&&a<=43391,"Hangul Syllables":a=>a>=44032&&a<=55215,"Hangul Jamo Extended-B":a=>a>=55216&&a<=55295,"Private Use Area":a=>a>=57344&&a<=63743,"CJK Compatibility Ideographs":a=>a>=63744&&a<=64255,"Arabic Presentation Forms-A":a=>a>=64336&&a<=65023,"Vertical Forms":a=>a>=65040&&a<=65055,"CJK Compatibility Forms":a=>a>=65072&&a<=65103,"Small Form Variants":a=>a>=65104&&a<=65135,"Arabic Presentation Forms-B":a=>a>=65136&&a<=65279,"Halfwidth and Fullwidth Forms":a=>a>=65280&&a<=65519};function $h(a){for(const r of a)if(qh(r.charCodeAt(0)))return!0;return!1}function Uh(a){for(const r of a)if(!Av(r.charCodeAt(0)))return!1;return!0}function Av(a){return!(ot.Arabic(a)||ot["Arabic Supplement"](a)||ot["Arabic Extended-A"](a)||ot["Arabic Presentation Forms-A"](a)||ot["Arabic Presentation Forms-B"](a))}function qh(a){return!(a!==746&&a!==747&&(a<4352||!(ot["Bopomofo Extended"](a)||ot.Bopomofo(a)||ot["CJK Compatibility Forms"](a)&&!(a>=65097&&a<=65103)||ot["CJK Compatibility Ideographs"](a)||ot["CJK Compatibility"](a)||ot["CJK Radicals Supplement"](a)||ot["CJK Strokes"](a)||!(!ot["CJK Symbols and Punctuation"](a)||a>=12296&&a<=12305||a>=12308&&a<=12319||a===12336)||ot["CJK Unified Ideographs Extension A"](a)||ot["CJK Unified Ideographs"](a)||ot["Enclosed CJK Letters and Months"](a)||ot["Hangul Compatibility Jamo"](a)||ot["Hangul Jamo Extended-A"](a)||ot["Hangul Jamo Extended-B"](a)||ot["Hangul Jamo"](a)||ot["Hangul Syllables"](a)||ot.Hiragana(a)||ot["Ideographic Description Characters"](a)||ot.Kanbun(a)||ot["Kangxi Radicals"](a)||ot["Katakana Phonetic Extensions"](a)||ot.Katakana(a)&&a!==12540||!(!ot["Halfwidth and Fullwidth Forms"](a)||a===65288||a===65289||a===65293||a>=65306&&a<=65310||a===65339||a===65341||a===65343||a>=65371&&a<=65503||a===65507||a>=65512&&a<=65519)||!(!ot["Small Form Variants"](a)||a>=65112&&a<=65118||a>=65123&&a<=65126)||ot["Unified Canadian Aboriginal Syllabics"](a)||ot["Unified Canadian Aboriginal Syllabics Extended"](a)||ot["Vertical Forms"](a)||ot["Yijing Hexagram Symbols"](a)||ot["Yi Syllables"](a)||ot["Yi Radicals"](a))))}function Rp(a){return!(qh(a)||function(r){return!!(ot["Latin-1 Supplement"](r)&&(r===167||r===169||r===174||r===177||r===188||r===189||r===190||r===215||r===247)||ot["General Punctuation"](r)&&(r===8214||r===8224||r===8225||r===8240||r===8241||r===8251||r===8252||r===8258||r===8263||r===8264||r===8265||r===8273)||ot["Letterlike Symbols"](r)||ot["Number Forms"](r)||ot["Miscellaneous Technical"](r)&&(r>=8960&&r<=8967||r>=8972&&r<=8991||r>=8996&&r<=9e3||r===9003||r>=9085&&r<=9114||r>=9150&&r<=9165||r===9167||r>=9169&&r<=9179||r>=9186&&r<=9215)||ot["Control Pictures"](r)&&r!==9251||ot["Optical Character Recognition"](r)||ot["Enclosed Alphanumerics"](r)||ot["Geometric Shapes"](r)||ot["Miscellaneous Symbols"](r)&&!(r>=9754&&r<=9759)||ot["Miscellaneous Symbols and Arrows"](r)&&(r>=11026&&r<=11055||r>=11088&&r<=11097||r>=11192&&r<=11243)||ot["CJK Symbols and Punctuation"](r)||ot.Katakana(r)||ot["Private Use Area"](r)||ot["CJK Compatibility Forms"](r)||ot["Small Form Variants"](r)||ot["Halfwidth and Fullwidth Forms"](r)||r===8734||r===8756||r===8757||r>=9984&&r<=10087||r>=10102&&r<=10131||r===65532||r===65533)}(a))}function Dp(a){return a>=1424&&a<=2303||ot["Arabic Presentation Forms-A"](a)||ot["Arabic Presentation Forms-B"](a)}function Lp(a,r){return!(!r&&Dp(a)||a>=2304&&a<=3583||a>=3840&&a<=4255||ot.Khmer(a))}function kv(a){for(const r of a)if(Dp(r.charCodeAt(0)))return!0;return!1}const Gh="deferred",Zh="loading",Wh="loaded";let Hh=null,Xr="unavailable",ma=null;const $l=function(a){a&&typeof a=="string"&&a.indexOf("NetworkError")>-1&&(Xr="error"),Hh&&Hh(a)};function Kh(){Ul.fire(new Ls("pluginStateChange",{pluginStatus:Xr,pluginURL:ma}))}const Ul=new Ie,Xh=function(){return Xr},zp=function(){if(Xr!==Gh||!ma)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Xr=Zh,Kh(),ma&&oa({url:ma},a=>{a?$l(a):(Xr=Wh,Kh())})},yi={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Xr===Wh||yi.applyArabicShaping!=null,isLoading:()=>Xr===Zh,setState(a){if(!je())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");Xr=a.pluginStatus,ma=a.pluginURL},isParsed(){if(!je())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return yi.applyArabicShaping!=null&&yi.processBidirectionalText!=null&&yi.processStyledBidirectionalText!=null},getPluginURL(){if(!je())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return ma}};class fn{constructor(r,l){this.zoom=r,l?(this.now=l.now,this.fadeDuration=l.fadeDuration,this.zoomHistory=l.zoomHistory,this.transition=l.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Mp,this.transition={})}isSupportedScript(r){return function(l,d){for(const m of l)if(!Lp(m.charCodeAt(0),d))return!1;return!0}(r,yi.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const r=this.zoom,l=r-Math.floor(r),d=this.crossFadingFactor();return r>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:l+(1-l)*d}:{fromScale:.5,toScale:1,t:1-(1-d)*l}}}class tc{constructor(r,l){this.property=r,this.value=l,this.expression=function(d,m){if(En(d))return new Ll(d,m);if(Gu(d)){const v=Nh(d,m);if(v.result==="error")throw new Error(v.value.map(_=>`${_.key}: ${_.message}`).join(", "));return v.value}{let v=d;return m.type==="color"&&typeof d=="string"?v=sn.parse(d):m.type!=="padding"||typeof d!="number"&&!Array.isArray(d)?m.type==="variableAnchorOffsetCollection"&&Array.isArray(d)&&(v=Di.parse(d)):v=fi.parse(d),{kind:"constant",evaluate:()=>v}}}(l===void 0?r.specification.default:l,r.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(r,l,d){return this.property.possiblyEvaluate(this,r,l,d)}}class Qh{constructor(r){this.property=r,this.value=new tc(r,void 0)}transitioned(r,l){return new Fp(this.property,this.value,l,ve({},r.transition,this.transition),r.now)}untransitioned(){return new Fp(this.property,this.value,null,{},0)}}class Op{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitionablePropertyValues)}getValue(r){return qe(this._values[r].value.value)}setValue(r,l){Object.prototype.hasOwnProperty.call(this._values,r)||(this._values[r]=new Qh(this._values[r].property)),this._values[r].value=new tc(this._values[r].property,l===null?void 0:qe(l))}getTransition(r){return qe(this._values[r].transition)}setTransition(r,l){Object.prototype.hasOwnProperty.call(this._values,r)||(this._values[r]=new Qh(this._values[r].property)),this._values[r].transition=qe(l)||void 0}serialize(){const r={};for(const l of Object.keys(this._values)){const d=this.getValue(l);d!==void 0&&(r[l]=d);const m=this.getTransition(l);m!==void 0&&(r[`${l}-transition`]=m)}return r}transitioned(r,l){const d=new Np(this._properties);for(const m of Object.keys(this._values))d._values[m]=this._values[m].transitioned(r,l._values[m]);return d}untransitioned(){const r=new Np(this._properties);for(const l of Object.keys(this._values))r._values[l]=this._values[l].untransitioned();return r}}class Fp{constructor(r,l,d,m,v){this.property=r,this.value=l,this.begin=v+m.delay||0,this.end=this.begin+m.duration||0,r.specification.transition&&(m.delay||m.duration)&&(this.prior=d)}possiblyEvaluate(r,l,d){const m=r.now||0,v=this.value.possiblyEvaluate(r,l,d),_=this.prior;if(_){if(m>this.end)return this.prior=null,v;if(this.value.isDataDriven())return this.prior=null,v;if(m<this.begin)return _.possiblyEvaluate(r,l,d);{const S=(m-this.begin)/(this.end-this.begin);return this.property.interpolate(_.possiblyEvaluate(r,l,d),v,function(P){if(P<=0)return 0;if(P>=1)return 1;const I=P*P,D=I*P;return 4*(P<.5?D:3*(P-I)+D-.75)}(S))}}return v}}class Np{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitioningPropertyValues)}possiblyEvaluate(r,l,d){const m=new nc(this._properties);for(const v of Object.keys(this._values))m._values[v]=this._values[v].possiblyEvaluate(r,l,d);return m}hasTransition(){for(const r of Object.keys(this._values))if(this._values[r].prior)return!0;return!1}}class Iv{constructor(r){this._properties=r,this._values=Object.create(r.defaultPropertyValues)}hasValue(r){return this._values[r].value!==void 0}getValue(r){return qe(this._values[r].value)}setValue(r,l){this._values[r]=new tc(this._values[r].property,l===null?void 0:qe(l))}serialize(){const r={};for(const l of Object.keys(this._values)){const d=this.getValue(l);d!==void 0&&(r[l]=d)}return r}possiblyEvaluate(r,l,d){const m=new nc(this._properties);for(const v of Object.keys(this._values))m._values[v]=this._values[v].possiblyEvaluate(r,l,d);return m}}class Dr{constructor(r,l,d){this.property=r,this.value=l,this.parameters=d}isConstant(){return this.value.kind==="constant"}constantOr(r){return this.value.kind==="constant"?this.value.value:r}evaluate(r,l,d,m){return this.property.evaluate(this.value,this.parameters,r,l,d,m)}}class nc{constructor(r){this._properties=r,this._values=Object.create(r.defaultPossiblyEvaluatedValues)}get(r){return this._values[r]}}class wt{constructor(r){this.specification=r}possiblyEvaluate(r,l){if(r.isDataDriven())throw new Error("Value should not be data driven");return r.expression.evaluate(l)}interpolate(r,l,d){const m=pi[this.specification.type];return m?m(r,l,d):r}}class At{constructor(r,l){this.specification=r,this.overrides=l}possiblyEvaluate(r,l,d,m){return new Dr(this,r.expression.kind==="constant"||r.expression.kind==="camera"?{kind:"constant",value:r.expression.evaluate(l,null,{},d,m)}:r.expression,l)}interpolate(r,l,d){if(r.value.kind!=="constant"||l.value.kind!=="constant")return r;if(r.value.value===void 0||l.value.value===void 0)return new Dr(this,{kind:"constant",value:void 0},r.parameters);const m=pi[this.specification.type];if(m){const v=m(r.value.value,l.value.value,d);return new Dr(this,{kind:"constant",value:v},r.parameters)}return r}evaluate(r,l,d,m,v,_){return r.kind==="constant"?r.value:r.evaluate(l,d,m,v,_)}}class ql extends At{possiblyEvaluate(r,l,d,m){if(r.value===void 0)return new Dr(this,{kind:"constant",value:void 0},l);if(r.expression.kind==="constant"){const v=r.expression.evaluate(l,null,{},d,m),_=r.property.specification.type==="resolvedImage"&&typeof v!="string"?v.name:v,S=this._calculate(_,_,_,l);return new Dr(this,{kind:"constant",value:S},l)}if(r.expression.kind==="camera"){const v=this._calculate(r.expression.evaluate({zoom:l.zoom-1}),r.expression.evaluate({zoom:l.zoom}),r.expression.evaluate({zoom:l.zoom+1}),l);return new Dr(this,{kind:"constant",value:v},l)}return new Dr(this,r.expression,l)}evaluate(r,l,d,m,v,_){if(r.kind==="source"){const S=r.evaluate(l,d,m,v,_);return this._calculate(S,S,S,l)}return r.kind==="composite"?this._calculate(r.evaluate({zoom:Math.floor(l.zoom)-1},d,m),r.evaluate({zoom:Math.floor(l.zoom)},d,m),r.evaluate({zoom:Math.floor(l.zoom)+1},d,m),l):r.value}_calculate(r,l,d,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:r,to:l}:{from:d,to:l}}interpolate(r){return r}}class Yh{constructor(r){this.specification=r}possiblyEvaluate(r,l,d,m){if(r.value!==void 0){if(r.expression.kind==="constant"){const v=r.expression.evaluate(l,null,{},d,m);return this._calculate(v,v,v,l)}return this._calculate(r.expression.evaluate(new fn(Math.floor(l.zoom-1),l)),r.expression.evaluate(new fn(Math.floor(l.zoom),l)),r.expression.evaluate(new fn(Math.floor(l.zoom+1),l)),l)}}_calculate(r,l,d,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:r,to:l}:{from:d,to:l}}interpolate(r){return r}}class Jh{constructor(r){this.specification=r}possiblyEvaluate(r,l,d,m){return!!r.expression.evaluate(l,null,{},d,m)}interpolate(){return!1}}class jn{constructor(r){this.properties=r,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const l in r){const d=r[l];d.specification.overridable&&this.overridableProperties.push(l);const m=this.defaultPropertyValues[l]=new tc(d,void 0),v=this.defaultTransitionablePropertyValues[l]=new Qh(d);this.defaultTransitioningPropertyValues[l]=v.untransitioned(),this.defaultPossiblyEvaluatedValues[l]=m.possiblyEvaluate({})}}}ht("DataDrivenProperty",At),ht("DataConstantProperty",wt),ht("CrossFadedDataDrivenProperty",ql),ht("CrossFadedProperty",Yh),ht("ColorRampProperty",Jh);const ed="-transition";class Fi extends Ie{constructor(r,l){if(super(),this.id=r.id,this.type=r.type,this._featureFilter={filter:()=>!0,needGeometry:!1},r.type!=="custom"&&(this.metadata=r.metadata,this.minzoom=r.minzoom,this.maxzoom=r.maxzoom,r.type!=="background"&&(this.source=r.source,this.sourceLayer=r["source-layer"],this.filter=r.filter),l.layout&&(this._unevaluatedLayout=new Iv(l.layout)),l.paint)){this._transitionablePaint=new Op(l.paint);for(const d in r.paint)this.setPaintProperty(d,r.paint[d],{validate:!1});for(const d in r.layout)this.setLayoutProperty(d,r.layout[d],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new nc(l.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(r){return r==="visibility"?this.visibility:this._unevaluatedLayout.getValue(r)}setLayoutProperty(r,l,d={}){l!=null&&this._validate(Ip,`layers.${this.id}.layout.${r}`,r,l,d)||(r!=="visibility"?this._unevaluatedLayout.setValue(r,l):this.visibility=l)}getPaintProperty(r){return r.endsWith(ed)?this._transitionablePaint.getTransition(r.slice(0,-11)):this._transitionablePaint.getValue(r)}setPaintProperty(r,l,d={}){if(l!=null&&this._validate(jh,`layers.${this.id}.paint.${r}`,r,l,d))return!1;if(r.endsWith(ed))return this._transitionablePaint.setTransition(r.slice(0,-11),l||void 0),!1;{const m=this._transitionablePaint._values[r],v=m.property.specification["property-type"]==="cross-faded-data-driven",_=m.value.isDataDriven(),S=m.value;this._transitionablePaint.setValue(r,l),this._handleSpecialPaintPropertyUpdate(r);const P=this._transitionablePaint._values[r].value;return P.isDataDriven()||_||v||this._handleOverridablePaintPropertyUpdate(r,S,P)}}_handleSpecialPaintPropertyUpdate(r){}_handleOverridablePaintPropertyUpdate(r,l,d){return!1}isHidden(r){return!!(this.minzoom&&r<this.minzoom)||!!(this.maxzoom&&r>=this.maxzoom)||this.visibility==="none"}updateTransitions(r){this._transitioningPaint=this._transitionablePaint.transitioned(r,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(r,l){r.getCrossfadeParameters&&(this._crossfadeParameters=r.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(r,void 0,l)),this.paint=this._transitioningPaint.possiblyEvaluate(r,void 0,l)}serialize(){const r={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(r.layout=r.layout||{},r.layout.visibility=this.visibility),pt(r,(l,d)=>!(l===void 0||d==="layout"&&!Object.keys(l).length||d==="paint"&&!Object.keys(l).length))}_validate(r,l,d,m,v={}){return(!v||v.validate!==!1)&&Ju(this,r.call(Vs,{key:l,layerType:this.type,objectKey:d,value:m,styleSpec:ue,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const r in this.paint._values){const l=this.paint.get(r);if(l instanceof Dr&&ko(l.property.specification)&&(l.value.kind==="source"||l.value.kind==="composite")&&l.value.isStateDependent)return!0}return!1}}const Bp={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Ba{constructor(r,l){this._structArray=r,this._pos1=l*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Mn{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(r,l){return r._trim(),l&&(r.isTransferred=!0,l.push(r.arrayBuffer)),{length:r.length,arrayBuffer:r.arrayBuffer}}static deserialize(r){const l=Object.create(this.prototype);return l.arrayBuffer=r.arrayBuffer,l.length=r.length,l.capacity=r.arrayBuffer.byteLength/l.bytesPerElement,l._refreshViews(),l}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(r){this.reserve(r),this.length=r}reserve(r){if(r>this.capacity){this.capacity=Math.max(r,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const l=this.uint8;this._refreshViews(),l&&this.uint8.set(l)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Cn(a,r=1){let l=0,d=0;return{members:a.map(m=>{const v=Bp[m.type].BYTES_PER_ELEMENT,_=l=Lo(l,Math.max(r,v)),S=m.components||1;return d=Math.max(d,v),l+=v*S,{name:m.name,type:m.type,components:S,offset:_}}),size:Lo(l,Math.max(d,r)),alignment:r}}function Lo(a,r){return Math.ceil(a/r)*r}class Gl extends Mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,l){const d=this.length;return this.resize(d+1),this.emplace(d,r,l)}emplace(r,l,d){const m=2*r;return this.int16[m+0]=l,this.int16[m+1]=d,r}}Gl.prototype.bytesPerElement=4,ht("StructArrayLayout2i4",Gl);class Zl extends Mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,l,d){const m=this.length;return this.resize(m+1),this.emplace(m,r,l,d)}emplace(r,l,d,m){const v=3*r;return this.int16[v+0]=l,this.int16[v+1]=d,this.int16[v+2]=m,r}}Zl.prototype.bytesPerElement=6,ht("StructArrayLayout3i6",Zl);class Va extends Mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,l,d,m){const v=this.length;return this.resize(v+1),this.emplace(v,r,l,d,m)}emplace(r,l,d,m,v){const _=4*r;return this.int16[_+0]=l,this.int16[_+1]=d,this.int16[_+2]=m,this.int16[_+3]=v,r}}Va.prototype.bytesPerElement=8,ht("StructArrayLayout4i8",Va);class td extends Mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,l,d,m,v,_){const S=this.length;return this.resize(S+1),this.emplace(S,r,l,d,m,v,_)}emplace(r,l,d,m,v,_,S){const P=6*r;return this.int16[P+0]=l,this.int16[P+1]=d,this.int16[P+2]=m,this.int16[P+3]=v,this.int16[P+4]=_,this.int16[P+5]=S,r}}td.prototype.bytesPerElement=12,ht("StructArrayLayout2i4i12",td);class nd extends Mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,l,d,m,v,_){const S=this.length;return this.resize(S+1),this.emplace(S,r,l,d,m,v,_)}emplace(r,l,d,m,v,_,S){const P=4*r,I=8*r;return this.int16[P+0]=l,this.int16[P+1]=d,this.uint8[I+4]=m,this.uint8[I+5]=v,this.uint8[I+6]=_,this.uint8[I+7]=S,r}}nd.prototype.bytesPerElement=8,ht("StructArrayLayout2i4ub8",nd);class zo extends Mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,l){const d=this.length;return this.resize(d+1),this.emplace(d,r,l)}emplace(r,l,d){const m=2*r;return this.float32[m+0]=l,this.float32[m+1]=d,r}}zo.prototype.bytesPerElement=8,ht("StructArrayLayout2f8",zo);class rd extends Mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,l,d,m,v,_,S,P,I,D){const O=this.length;return this.resize(O+1),this.emplace(O,r,l,d,m,v,_,S,P,I,D)}emplace(r,l,d,m,v,_,S,P,I,D,O){const U=10*r;return this.uint16[U+0]=l,this.uint16[U+1]=d,this.uint16[U+2]=m,this.uint16[U+3]=v,this.uint16[U+4]=_,this.uint16[U+5]=S,this.uint16[U+6]=P,this.uint16[U+7]=I,this.uint16[U+8]=D,this.uint16[U+9]=O,r}}rd.prototype.bytesPerElement=20,ht("StructArrayLayout10ui20",rd);class id extends Mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,l,d,m,v,_,S,P,I,D,O,U){const W=this.length;return this.resize(W+1),this.emplace(W,r,l,d,m,v,_,S,P,I,D,O,U)}emplace(r,l,d,m,v,_,S,P,I,D,O,U,W){const X=12*r;return this.int16[X+0]=l,this.int16[X+1]=d,this.int16[X+2]=m,this.int16[X+3]=v,this.uint16[X+4]=_,this.uint16[X+5]=S,this.uint16[X+6]=P,this.uint16[X+7]=I,this.int16[X+8]=D,this.int16[X+9]=O,this.int16[X+10]=U,this.int16[X+11]=W,r}}id.prototype.bytesPerElement=24,ht("StructArrayLayout4i4ui4i24",id);class en extends Mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,l,d){const m=this.length;return this.resize(m+1),this.emplace(m,r,l,d)}emplace(r,l,d,m){const v=3*r;return this.float32[v+0]=l,this.float32[v+1]=d,this.float32[v+2]=m,r}}en.prototype.bytesPerElement=12,ht("StructArrayLayout3f12",en);class y extends Mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(r){const l=this.length;return this.resize(l+1),this.emplace(l,r)}emplace(r,l){return this.uint32[1*r+0]=l,r}}y.prototype.bytesPerElement=4,ht("StructArrayLayout1ul4",y);class i extends Mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,l,d,m,v,_,S,P,I){const D=this.length;return this.resize(D+1),this.emplace(D,r,l,d,m,v,_,S,P,I)}emplace(r,l,d,m,v,_,S,P,I,D){const O=10*r,U=5*r;return this.int16[O+0]=l,this.int16[O+1]=d,this.int16[O+2]=m,this.int16[O+3]=v,this.int16[O+4]=_,this.int16[O+5]=S,this.uint32[U+3]=P,this.uint16[O+8]=I,this.uint16[O+9]=D,r}}i.prototype.bytesPerElement=20,ht("StructArrayLayout6i1ul2ui20",i);class c extends Mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,l,d,m,v,_){const S=this.length;return this.resize(S+1),this.emplace(S,r,l,d,m,v,_)}emplace(r,l,d,m,v,_,S){const P=6*r;return this.int16[P+0]=l,this.int16[P+1]=d,this.int16[P+2]=m,this.int16[P+3]=v,this.int16[P+4]=_,this.int16[P+5]=S,r}}c.prototype.bytesPerElement=12,ht("StructArrayLayout2i2i2i12",c);class p extends Mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,l,d,m,v){const _=this.length;return this.resize(_+1),this.emplace(_,r,l,d,m,v)}emplace(r,l,d,m,v,_){const S=4*r,P=8*r;return this.float32[S+0]=l,this.float32[S+1]=d,this.float32[S+2]=m,this.int16[P+6]=v,this.int16[P+7]=_,r}}p.prototype.bytesPerElement=16,ht("StructArrayLayout2f1f2i16",p);class g extends Mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,l,d,m){const v=this.length;return this.resize(v+1),this.emplace(v,r,l,d,m)}emplace(r,l,d,m,v){const _=12*r,S=3*r;return this.uint8[_+0]=l,this.uint8[_+1]=d,this.float32[S+1]=m,this.float32[S+2]=v,r}}g.prototype.bytesPerElement=12,ht("StructArrayLayout2ub2f12",g);class x extends Mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,l,d){const m=this.length;return this.resize(m+1),this.emplace(m,r,l,d)}emplace(r,l,d,m){const v=3*r;return this.uint16[v+0]=l,this.uint16[v+1]=d,this.uint16[v+2]=m,r}}x.prototype.bytesPerElement=6,ht("StructArrayLayout3ui6",x);class E extends Mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,l,d,m,v,_,S,P,I,D,O,U,W,X,te,oe,he){const we=this.length;return this.resize(we+1),this.emplace(we,r,l,d,m,v,_,S,P,I,D,O,U,W,X,te,oe,he)}emplace(r,l,d,m,v,_,S,P,I,D,O,U,W,X,te,oe,he,we){const pe=24*r,Se=12*r,Ce=48*r;return this.int16[pe+0]=l,this.int16[pe+1]=d,this.uint16[pe+2]=m,this.uint16[pe+3]=v,this.uint32[Se+2]=_,this.uint32[Se+3]=S,this.uint32[Se+4]=P,this.uint16[pe+10]=I,this.uint16[pe+11]=D,this.uint16[pe+12]=O,this.float32[Se+7]=U,this.float32[Se+8]=W,this.uint8[Ce+36]=X,this.uint8[Ce+37]=te,this.uint8[Ce+38]=oe,this.uint32[Se+10]=he,this.int16[pe+22]=we,r}}E.prototype.bytesPerElement=48,ht("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",E);class T extends Mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,l,d,m,v,_,S,P,I,D,O,U,W,X,te,oe,he,we,pe,Se,Ce,Oe,lt,yt,at,rt,Xe,dt){const Ye=this.length;return this.resize(Ye+1),this.emplace(Ye,r,l,d,m,v,_,S,P,I,D,O,U,W,X,te,oe,he,we,pe,Se,Ce,Oe,lt,yt,at,rt,Xe,dt)}emplace(r,l,d,m,v,_,S,P,I,D,O,U,W,X,te,oe,he,we,pe,Se,Ce,Oe,lt,yt,at,rt,Xe,dt,Ye){const Ze=32*r,Tt=16*r;return this.int16[Ze+0]=l,this.int16[Ze+1]=d,this.int16[Ze+2]=m,this.int16[Ze+3]=v,this.int16[Ze+4]=_,this.int16[Ze+5]=S,this.int16[Ze+6]=P,this.int16[Ze+7]=I,this.uint16[Ze+8]=D,this.uint16[Ze+9]=O,this.uint16[Ze+10]=U,this.uint16[Ze+11]=W,this.uint16[Ze+12]=X,this.uint16[Ze+13]=te,this.uint16[Ze+14]=oe,this.uint16[Ze+15]=he,this.uint16[Ze+16]=we,this.uint16[Ze+17]=pe,this.uint16[Ze+18]=Se,this.uint16[Ze+19]=Ce,this.uint16[Ze+20]=Oe,this.uint16[Ze+21]=lt,this.uint16[Ze+22]=yt,this.uint32[Tt+12]=at,this.float32[Tt+13]=rt,this.float32[Tt+14]=Xe,this.uint16[Ze+30]=dt,this.uint16[Ze+31]=Ye,r}}T.prototype.bytesPerElement=64,ht("StructArrayLayout8i15ui1ul2f2ui64",T);class k extends Mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r){const l=this.length;return this.resize(l+1),this.emplace(l,r)}emplace(r,l){return this.float32[1*r+0]=l,r}}k.prototype.bytesPerElement=4,ht("StructArrayLayout1f4",k);class R extends Mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,l,d){const m=this.length;return this.resize(m+1),this.emplace(m,r,l,d)}emplace(r,l,d,m){const v=3*r;return this.uint16[6*r+0]=l,this.float32[v+1]=d,this.float32[v+2]=m,r}}R.prototype.bytesPerElement=12,ht("StructArrayLayout1ui2f12",R);class L extends Mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,l,d){const m=this.length;return this.resize(m+1),this.emplace(m,r,l,d)}emplace(r,l,d,m){const v=4*r;return this.uint32[2*r+0]=l,this.uint16[v+2]=d,this.uint16[v+3]=m,r}}L.prototype.bytesPerElement=8,ht("StructArrayLayout1ul2ui8",L);class z extends Mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,l){const d=this.length;return this.resize(d+1),this.emplace(d,r,l)}emplace(r,l,d){const m=2*r;return this.uint16[m+0]=l,this.uint16[m+1]=d,r}}z.prototype.bytesPerElement=4,ht("StructArrayLayout2ui4",z);class Z extends Mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r){const l=this.length;return this.resize(l+1),this.emplace(l,r)}emplace(r,l){return this.uint16[1*r+0]=l,r}}Z.prototype.bytesPerElement=2,ht("StructArrayLayout1ui2",Z);class re extends Mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,l,d,m){const v=this.length;return this.resize(v+1),this.emplace(v,r,l,d,m)}emplace(r,l,d,m,v){const _=4*r;return this.float32[_+0]=l,this.float32[_+1]=d,this.float32[_+2]=m,this.float32[_+3]=v,r}}re.prototype.bytesPerElement=16,ht("StructArrayLayout4f16",re);class ne extends Ba{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new M(this.anchorPointX,this.anchorPointY)}}ne.prototype.size=20;class se extends i{get(r){return new ne(this,r)}}ht("CollisionBoxArray",se);class ee extends Ba{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(r){this._structArray.uint8[this._pos1+37]=r}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(r){this._structArray.uint8[this._pos1+38]=r}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(r){this._structArray.uint32[this._pos4+10]=r}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}ee.prototype.size=48;class ye extends E{get(r){return new ee(this,r)}}ht("PlacedSymbolArray",ye);class Te extends Ba{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(r){this._structArray.uint32[this._pos4+12]=r}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}Te.prototype.size=64;class ce extends T{get(r){return new Te(this,r)}}ht("SymbolInstanceArray",ce);class xe extends k{getoffsetX(r){return this.float32[1*r+0]}}ht("GlyphOffsetArray",xe);class Ae extends Zl{getx(r){return this.int16[3*r+0]}gety(r){return this.int16[3*r+1]}gettileUnitDistanceFromAnchor(r){return this.int16[3*r+2]}}ht("SymbolLineVertexArray",Ae);class ke extends Ba{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}ke.prototype.size=12;class ze extends R{get(r){return new ke(this,r)}}ht("TextAnchorOffsetArray",ze);class Ge extends Ba{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Ge.prototype.size=8;class Be extends L{get(r){return new Ge(this,r)}}ht("FeatureIndexArray",Be);class We extends Gl{}class gt extends Gl{}class Ut extends Gl{}class nt extends td{}class kt extends nd{}class vt extends zo{}class an extends rd{}class jt extends id{}class Ft extends en{}class qt extends y{}class On extends c{}class cn extends g{}class gr extends x{}class er extends z{}const $n=Cn([{name:"a_pos",components:2,type:"Int16"}],4),{members:vi}=$n;class pn{constructor(r=[]){this.segments=r}prepareSegment(r,l,d,m){let v=this.segments[this.segments.length-1];return r>pn.MAX_VERTEX_ARRAY_LENGTH&&ut(`Max vertices per segment is ${pn.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${r}`),(!v||v.vertexLength+r>pn.MAX_VERTEX_ARRAY_LENGTH||v.sortKey!==m)&&(v={vertexOffset:l.length,primitiveOffset:d.length,vertexLength:0,primitiveLength:0},m!==void 0&&(v.sortKey=m),this.segments.push(v)),v}get(){return this.segments}destroy(){for(const r of this.segments)for(const l in r.vaos)r.vaos[l].destroy()}static simpleSegment(r,l,d,m){return new pn([{vertexOffset:r,primitiveOffset:l,vertexLength:d,primitiveLength:m,vaos:{},sortKey:0}])}}function ps(a,r){return 256*(a=Ee(Math.floor(a),0,255))+Ee(Math.floor(r),0,255)}pn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,ht("SegmentVector",pn);const ms=Cn([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var ga={exports:{}},ja={exports:{}};ja.exports=function(a,r){var l,d,m,v,_,S,P,I;for(d=a.length-(l=3&a.length),m=r,_=3432918353,S=461845907,I=0;I<d;)P=255&a.charCodeAt(I)|(255&a.charCodeAt(++I))<<8|(255&a.charCodeAt(++I))<<16|(255&a.charCodeAt(++I))<<24,++I,m=27492+(65535&(v=5*(65535&(m=(m^=P=(65535&(P=(P=(65535&P)*_+(((P>>>16)*_&65535)<<16)&4294967295)<<15|P>>>17))*S+(((P>>>16)*S&65535)<<16)&4294967295)<<13|m>>>19))+((5*(m>>>16)&65535)<<16)&4294967295))+((58964+(v>>>16)&65535)<<16);switch(P=0,l){case 3:P^=(255&a.charCodeAt(I+2))<<16;case 2:P^=(255&a.charCodeAt(I+1))<<8;case 1:m^=P=(65535&(P=(P=(65535&(P^=255&a.charCodeAt(I)))*_+(((P>>>16)*_&65535)<<16)&4294967295)<<15|P>>>17))*S+(((P>>>16)*S&65535)<<16)&4294967295}return m^=a.length,m=2246822507*(65535&(m^=m>>>16))+((2246822507*(m>>>16)&65535)<<16)&4294967295,m=3266489909*(65535&(m^=m>>>13))+((3266489909*(m>>>16)&65535)<<16)&4294967295,(m^=m>>>16)>>>0};var Oo=ja.exports,Tr={exports:{}};Tr.exports=function(a,r){for(var l,d=a.length,m=r^d,v=0;d>=4;)l=1540483477*(65535&(l=255&a.charCodeAt(v)|(255&a.charCodeAt(++v))<<8|(255&a.charCodeAt(++v))<<16|(255&a.charCodeAt(++v))<<24))+((1540483477*(l>>>16)&65535)<<16),m=1540483477*(65535&m)+((1540483477*(m>>>16)&65535)<<16)^(l=1540483477*(65535&(l^=l>>>24))+((1540483477*(l>>>16)&65535)<<16)),d-=4,++v;switch(d){case 3:m^=(255&a.charCodeAt(v+2))<<16;case 2:m^=(255&a.charCodeAt(v+1))<<8;case 1:m=1540483477*(65535&(m^=255&a.charCodeAt(v)))+((1540483477*(m>>>16)&65535)<<16)}return m=1540483477*(65535&(m^=m>>>13))+((1540483477*(m>>>16)&65535)<<16),(m^=m>>>15)>>>0};var yr=Oo,Lr=Tr.exports;ga.exports=yr,ga.exports.murmur3=yr,ga.exports.murmur2=Lr;var $a=b(ga.exports);class Fn{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(r,l,d,m){this.ids.push(tr(r)),this.positions.push(l,d,m)}getPositions(r){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const l=tr(r);let d=0,m=this.ids.length-1;for(;d<m;){const _=d+m>>1;this.ids[_]>=l?m=_:d=_+1}const v=[];for(;this.ids[d]===l;)v.push({index:this.positions[3*d],start:this.positions[3*d+1],end:this.positions[3*d+2]}),d++;return v}static serialize(r,l){const d=new Float64Array(r.ids),m=new Uint32Array(r.positions);return Qr(d,m,0,d.length-1),l&&l.push(d.buffer,m.buffer),{ids:d,positions:m}}static deserialize(r){const l=new Fn;return l.ids=r.ids,l.positions=r.positions,l.indexed=!0,l}}function tr(a){const r=+a;return!isNaN(r)&&r<=Number.MAX_SAFE_INTEGER?r:$a(String(a))}function Qr(a,r,l,d){for(;l<d;){const m=a[l+d>>1];let v=l-1,_=d+1;for(;;){do v++;while(a[v]<m);do _--;while(a[_]>m);if(v>=_)break;Nn(a,v,_),Nn(r,3*v,3*_),Nn(r,3*v+1,3*_+1),Nn(r,3*v+2,3*_+2)}_-l<d-_?(Qr(a,r,l,_),l=_+1):(Qr(a,r,_+1,d),d=_)}}function Nn(a,r,l){const d=a[r];a[r]=a[l],a[l]=d}ht("FeaturePositionMap",Fn);class Ua{constructor(r,l){this.gl=r.gl,this.location=l}}class rc extends Ua{constructor(r,l){super(r,l),this.current=0}set(r){this.current!==r&&(this.current=r,this.gl.uniform1f(this.location,r))}}class Vp extends Ua{constructor(r,l){super(r,l),this.current=[0,0,0,0]}set(r){r[0]===this.current[0]&&r[1]===this.current[1]&&r[2]===this.current[2]&&r[3]===this.current[3]||(this.current=r,this.gl.uniform4f(this.location,r[0],r[1],r[2],r[3]))}}class jp extends Ua{constructor(r,l){super(r,l),this.current=sn.transparent}set(r){r.r===this.current.r&&r.g===this.current.g&&r.b===this.current.b&&r.a===this.current.a||(this.current=r,this.gl.uniform4f(this.location,r.r,r.g,r.b,r.a))}}const Mv=new Float32Array(16);function sd(a){return[ps(255*a.r,255*a.g),ps(255*a.b,255*a.a)]}class gs{constructor(r,l,d){this.value=r,this.uniformNames=l.map(m=>`u_${m}`),this.type=d}setUniform(r,l,d){r.set(d.constantOr(this.value))}getBinding(r,l,d){return this.type==="color"?new jp(r,l):new rc(r,l)}}class qa{constructor(r,l){this.uniformNames=l.map(d=>`u_${d}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(r,l){this.pixelRatioFrom=l.pixelRatio,this.pixelRatioTo=r.pixelRatio,this.patternFrom=l.tlbr,this.patternTo=r.tlbr}setUniform(r,l,d,m){const v=m==="u_pattern_to"?this.patternTo:m==="u_pattern_from"?this.patternFrom:m==="u_pixel_ratio_to"?this.pixelRatioTo:m==="u_pixel_ratio_from"?this.pixelRatioFrom:null;v&&r.set(v)}getBinding(r,l,d){return d.substr(0,9)==="u_pattern"?new Vp(r,l):new rc(r,l)}}class ys{constructor(r,l,d,m){this.expression=r,this.type=d,this.maxValue=0,this.paintVertexAttributes=l.map(v=>({name:`a_${v}`,type:"Float32",components:d==="color"?2:1,offset:0})),this.paintVertexArray=new m}populatePaintArray(r,l,d,m,v){const _=this.paintVertexArray.length,S=this.expression.evaluate(new fn(0),l,{},m,[],v);this.paintVertexArray.resize(r),this._setPaintValue(_,r,S)}updatePaintArray(r,l,d,m){const v=this.expression.evaluate({zoom:0},d,m);this._setPaintValue(r,l,v)}_setPaintValue(r,l,d){if(this.type==="color"){const m=sd(d);for(let v=r;v<l;v++)this.paintVertexArray.emplace(v,m[0],m[1])}else{for(let m=r;m<l;m++)this.paintVertexArray.emplace(m,d);this.maxValue=Math.max(this.maxValue,Math.abs(d))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Ni{constructor(r,l,d,m,v,_){this.expression=r,this.uniformNames=l.map(S=>`u_${S}_t`),this.type=d,this.useIntegerZoom=m,this.zoom=v,this.maxValue=0,this.paintVertexAttributes=l.map(S=>({name:`a_${S}`,type:"Float32",components:d==="color"?4:2,offset:0})),this.paintVertexArray=new _}populatePaintArray(r,l,d,m,v){const _=this.expression.evaluate(new fn(this.zoom),l,{},m,[],v),S=this.expression.evaluate(new fn(this.zoom+1),l,{},m,[],v),P=this.paintVertexArray.length;this.paintVertexArray.resize(r),this._setPaintValue(P,r,_,S)}updatePaintArray(r,l,d,m){const v=this.expression.evaluate({zoom:this.zoom},d,m),_=this.expression.evaluate({zoom:this.zoom+1},d,m);this._setPaintValue(r,l,v,_)}_setPaintValue(r,l,d,m){if(this.type==="color"){const v=sd(d),_=sd(m);for(let S=r;S<l;S++)this.paintVertexArray.emplace(S,v[0],v[1],_[0],_[1])}else{for(let v=r;v<l;v++)this.paintVertexArray.emplace(v,d,m);this.maxValue=Math.max(this.maxValue,Math.abs(d),Math.abs(m))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(r,l){const d=this.useIntegerZoom?Math.floor(l.zoom):l.zoom,m=Ee(this.expression.interpolationFactor(d,this.zoom,this.zoom+1),0,1);r.set(m)}getBinding(r,l,d){return new rc(r,l)}}class vs{constructor(r,l,d,m,v,_){this.expression=r,this.type=l,this.useIntegerZoom=d,this.zoom=m,this.layerId=_,this.zoomInPaintVertexArray=new v,this.zoomOutPaintVertexArray=new v}populatePaintArray(r,l,d){const m=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(r),this.zoomOutPaintVertexArray.resize(r),this._setPaintValues(m,r,l.patterns&&l.patterns[this.layerId],d)}updatePaintArray(r,l,d,m,v){this._setPaintValues(r,l,d.patterns&&d.patterns[this.layerId],v)}_setPaintValues(r,l,d,m){if(!m||!d)return;const{min:v,mid:_,max:S}=d,P=m[v],I=m[_],D=m[S];if(P&&I&&D)for(let O=r;O<l;O++)this.zoomInPaintVertexArray.emplace(O,I.tl[0],I.tl[1],I.br[0],I.br[1],P.tl[0],P.tl[1],P.br[0],P.br[1],I.pixelRatio,P.pixelRatio),this.zoomOutPaintVertexArray.emplace(O,I.tl[0],I.tl[1],I.br[0],I.br[1],D.tl[0],D.tl[1],D.br[0],D.br[1],I.pixelRatio,D.pixelRatio)}upload(r){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=r.createVertexBuffer(this.zoomInPaintVertexArray,ms.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=r.createVertexBuffer(this.zoomOutPaintVertexArray,ms.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class ad{constructor(r,l,d){this.binders={},this._buffers=[];const m=[];for(const v in r.paint._values){if(!d(v))continue;const _=r.paint.get(v);if(!(_ instanceof Dr&&ko(_.property.specification)))continue;const S=fL(v,r.type),P=_.value,I=_.property.specification.type,D=_.property.useIntegerZoom,O=_.property.specification["property-type"],U=O==="cross-faded"||O==="cross-faded-data-driven";if(P.kind==="constant")this.binders[v]=U?new qa(P.value,S):new gs(P.value,S,I),m.push(`/u_${v}`);else if(P.kind==="source"||U){const W=Vb(v,I,"source");this.binders[v]=U?new vs(P,I,D,l,W,r.id):new ys(P,S,I,W),m.push(`/a_${v}`)}else{const W=Vb(v,I,"composite");this.binders[v]=new Ni(P,S,I,D,l,W),m.push(`/z_${v}`)}}this.cacheKey=m.sort().join("")}getMaxValue(r){const l=this.binders[r];return l instanceof ys||l instanceof Ni?l.maxValue:0}populatePaintArrays(r,l,d,m,v){for(const _ in this.binders){const S=this.binders[_];(S instanceof ys||S instanceof Ni||S instanceof vs)&&S.populatePaintArray(r,l,d,m,v)}}setConstantPatternPositions(r,l){for(const d in this.binders){const m=this.binders[d];m instanceof qa&&m.setConstantPatternPositions(r,l)}}updatePaintArrays(r,l,d,m,v){let _=!1;for(const S in r){const P=l.getPositions(S);for(const I of P){const D=d.feature(I.index);for(const O in this.binders){const U=this.binders[O];if((U instanceof ys||U instanceof Ni||U instanceof vs)&&U.expression.isStateDependent===!0){const W=m.paint.get(O);U.expression=W.value,U.updatePaintArray(I.start,I.end,D,r[S],v),_=!0}}}}return _}defines(){const r=[];for(const l in this.binders){const d=this.binders[l];(d instanceof gs||d instanceof qa)&&r.push(...d.uniformNames.map(m=>`#define HAS_UNIFORM_${m}`))}return r}getBinderAttributes(){const r=[];for(const l in this.binders){const d=this.binders[l];if(d instanceof ys||d instanceof Ni)for(let m=0;m<d.paintVertexAttributes.length;m++)r.push(d.paintVertexAttributes[m].name);else if(d instanceof vs)for(let m=0;m<ms.members.length;m++)r.push(ms.members[m].name)}return r}getBinderUniforms(){const r=[];for(const l in this.binders){const d=this.binders[l];if(d instanceof gs||d instanceof qa||d instanceof Ni)for(const m of d.uniformNames)r.push(m)}return r}getPaintVertexBuffers(){return this._buffers}getUniforms(r,l){const d=[];for(const m in this.binders){const v=this.binders[m];if(v instanceof gs||v instanceof qa||v instanceof Ni){for(const _ of v.uniformNames)if(l[_]){const S=v.getBinding(r,l[_],_);d.push({name:_,property:m,binding:S})}}}return d}setUniforms(r,l,d,m){for(const{name:v,property:_,binding:S}of l)this.binders[_].setUniform(S,m,d.get(_),v)}updatePaintBuffers(r){this._buffers=[];for(const l in this.binders){const d=this.binders[l];if(r&&d instanceof vs){const m=r.fromScale===2?d.zoomInPaintVertexBuffer:d.zoomOutPaintVertexBuffer;m&&this._buffers.push(m)}else(d instanceof ys||d instanceof Ni)&&d.paintVertexBuffer&&this._buffers.push(d.paintVertexBuffer)}}upload(r){for(const l in this.binders){const d=this.binders[l];(d instanceof ys||d instanceof Ni||d instanceof vs)&&d.upload(r)}this.updatePaintBuffers()}destroy(){for(const r in this.binders){const l=this.binders[r];(l instanceof ys||l instanceof Ni||l instanceof vs)&&l.destroy()}}}class $s{constructor(r,l,d=()=>!0){this.programConfigurations={};for(const m of r)this.programConfigurations[m.id]=new ad(m,l,d);this.needsUpload=!1,this._featureMap=new Fn,this._bufferOffset=0}populatePaintArrays(r,l,d,m,v,_){for(const S in this.programConfigurations)this.programConfigurations[S].populatePaintArrays(r,l,m,v,_);l.id!==void 0&&this._featureMap.add(l.id,d,this._bufferOffset,r),this._bufferOffset=r,this.needsUpload=!0}updatePaintArrays(r,l,d,m){for(const v of d)this.needsUpload=this.programConfigurations[v.id].updatePaintArrays(r,this._featureMap,l,v,m)||this.needsUpload}get(r){return this.programConfigurations[r]}upload(r){if(this.needsUpload){for(const l in this.programConfigurations)this.programConfigurations[l].upload(r);this.needsUpload=!1}}destroy(){for(const r in this.programConfigurations)this.programConfigurations[r].destroy()}}function fL(a,r){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[a]||[a.replace(`${r}-`,"").replace(/-/g,"_")]}function Vb(a,r,l){const d={color:{source:zo,composite:re},number:{source:k,composite:zo}},m=function(v){return{"line-pattern":{source:an,composite:an},"fill-pattern":{source:an,composite:an},"fill-extrusion-pattern":{source:an,composite:an}}[v]}(a);return m&&m[l]||d[r][l]}ht("ConstantBinder",gs),ht("CrossFadedConstantBinder",qa),ht("SourceExpressionBinder",ys),ht("CrossFadedCompositeBinder",vs),ht("CompositeExpressionBinder",Ni),ht("ProgramConfiguration",ad,{omit:["_buffers"]}),ht("ProgramConfigurationSet",$s);const Xn=8192,Rv=Math.pow(2,14)-1,jb=-Rv-1;function Wl(a){const r=Xn/a.extent,l=a.loadGeometry();for(let d=0;d<l.length;d++){const m=l[d];for(let v=0;v<m.length;v++){const _=m[v],S=Math.round(_.x*r),P=Math.round(_.y*r);_.x=Ee(S,jb,Rv),_.y=Ee(P,jb,Rv),(S<_.x||S>_.x+1||P<_.y||P>_.y+1)&&ut("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return l}function Hl(a,r){return{type:a.type,id:a.id,properties:a.properties,geometry:r?Wl(a):[]}}function $p(a,r,l,d,m){a.emplaceBack(2*r+(d+1)/2,2*l+(m+1)/2)}class Dv{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(l=>l.id),this.index=r.index,this.hasPattern=!1,this.layoutVertexArray=new gt,this.indexArray=new gr,this.segments=new pn,this.programConfigurations=new $s(r.layers,r.zoom),this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(r,l,d){const m=this.layers[0],v=[];let _=null,S=!1;m.type==="circle"&&(_=m.layout.get("circle-sort-key"),S=!_.isConstant());for(const{feature:P,id:I,index:D,sourceLayerIndex:O}of r){const U=this.layers[0]._featureFilter.needGeometry,W=Hl(P,U);if(!this.layers[0]._featureFilter.filter(new fn(this.zoom),W,d))continue;const X=S?_.evaluate(W,{},d):void 0,te={id:I,properties:P.properties,type:P.type,sourceLayerIndex:O,index:D,geometry:U?W.geometry:Wl(P),patterns:{},sortKey:X};v.push(te)}S&&v.sort((P,I)=>P.sortKey-I.sortKey);for(const P of v){const{geometry:I,index:D,sourceLayerIndex:O}=P,U=r[D].feature;this.addFeature(P,I,D,d),l.featureIndex.insert(U,I,D,O,this.index)}}update(r,l,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,l,this.stateDependentLayers,d)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,vi),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(r,l,d,m){for(const v of l)for(const _ of v){const S=_.x,P=_.y;if(S<0||S>=Xn||P<0||P>=Xn)continue;const I=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,r.sortKey),D=I.vertexLength;$p(this.layoutVertexArray,S,P,-1,-1),$p(this.layoutVertexArray,S,P,1,-1),$p(this.layoutVertexArray,S,P,1,1),$p(this.layoutVertexArray,S,P,-1,1),this.indexArray.emplaceBack(D,D+1,D+2),this.indexArray.emplaceBack(D,D+3,D+2),I.vertexLength+=4,I.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,d,{},m)}}function $b(a,r){for(let l=0;l<a.length;l++)if(ic(r,a[l]))return!0;for(let l=0;l<r.length;l++)if(ic(a,r[l]))return!0;return!!Lv(a,r)}function pL(a,r,l){return!!ic(a,r)||!!zv(r,a,l)}function Ub(a,r){if(a.length===1)return Gb(r,a[0]);for(let l=0;l<r.length;l++){const d=r[l];for(let m=0;m<d.length;m++)if(ic(a,d[m]))return!0}for(let l=0;l<a.length;l++)if(Gb(r,a[l]))return!0;for(let l=0;l<r.length;l++)if(Lv(a,r[l]))return!0;return!1}function mL(a,r,l){if(a.length>1){if(Lv(a,r))return!0;for(let d=0;d<r.length;d++)if(zv(r[d],a,l))return!0}for(let d=0;d<a.length;d++)if(zv(a[d],r,l))return!0;return!1}function Lv(a,r){if(a.length===0||r.length===0)return!1;for(let l=0;l<a.length-1;l++){const d=a[l],m=a[l+1];for(let v=0;v<r.length-1;v++)if(gL(d,m,r[v],r[v+1]))return!0}return!1}function gL(a,r,l,d){return bt(a,l,d)!==bt(r,l,d)&&bt(a,r,l)!==bt(a,r,d)}function zv(a,r,l){const d=l*l;if(r.length===1)return a.distSqr(r[0])<d;for(let m=1;m<r.length;m++)if(qb(a,r[m-1],r[m])<d)return!0;return!1}function qb(a,r,l){const d=r.distSqr(l);if(d===0)return a.distSqr(r);const m=((a.x-r.x)*(l.x-r.x)+(a.y-r.y)*(l.y-r.y))/d;return a.distSqr(m<0?r:m>1?l:l.sub(r)._mult(m)._add(r))}function Gb(a,r){let l,d,m,v=!1;for(let _=0;_<a.length;_++){l=a[_];for(let S=0,P=l.length-1;S<l.length;P=S++)d=l[S],m=l[P],d.y>r.y!=m.y>r.y&&r.x<(m.x-d.x)*(r.y-d.y)/(m.y-d.y)+d.x&&(v=!v)}return v}function ic(a,r){let l=!1;for(let d=0,m=a.length-1;d<a.length;m=d++){const v=a[d],_=a[m];v.y>r.y!=_.y>r.y&&r.x<(_.x-v.x)*(r.y-v.y)/(_.y-v.y)+v.x&&(l=!l)}return l}function yL(a,r,l){const d=l[0],m=l[2];if(a.x<d.x&&r.x<d.x||a.x>m.x&&r.x>m.x||a.y<d.y&&r.y<d.y||a.y>m.y&&r.y>m.y)return!1;const v=bt(a,r,l[0]);return v!==bt(a,r,l[1])||v!==bt(a,r,l[2])||v!==bt(a,r,l[3])}function od(a,r,l){const d=r.paint.get(a).value;return d.kind==="constant"?d.value:l.programConfigurations.get(r.id).getMaxValue(a)}function Up(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1])}function qp(a,r,l,d,m){if(!r[0]&&!r[1])return a;const v=M.convert(r)._mult(m);l==="viewport"&&v._rotate(-d);const _=[];for(let S=0;S<a.length;S++)_.push(a[S].sub(v));return _}let Zb,Wb;ht("CircleBucket",Dv,{omit:["layers"]});var vL={get paint(){return Wb=Wb||new jn({"circle-radius":new At(ue.paint_circle["circle-radius"]),"circle-color":new At(ue.paint_circle["circle-color"]),"circle-blur":new At(ue.paint_circle["circle-blur"]),"circle-opacity":new At(ue.paint_circle["circle-opacity"]),"circle-translate":new wt(ue.paint_circle["circle-translate"]),"circle-translate-anchor":new wt(ue.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new wt(ue.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new wt(ue.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new At(ue.paint_circle["circle-stroke-width"]),"circle-stroke-color":new At(ue.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new At(ue.paint_circle["circle-stroke-opacity"])})},get layout(){return Zb=Zb||new jn({"circle-sort-key":new At(ue.layout_circle["circle-sort-key"])})}},Yr=1e-6,sc=typeof Float32Array<"u"?Float32Array:Array;function Ov(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}function Hb(a,r,l){var d=r[0],m=r[1],v=r[2],_=r[3],S=r[4],P=r[5],I=r[6],D=r[7],O=r[8],U=r[9],W=r[10],X=r[11],te=r[12],oe=r[13],he=r[14],we=r[15],pe=l[0],Se=l[1],Ce=l[2],Oe=l[3];return a[0]=pe*d+Se*S+Ce*O+Oe*te,a[1]=pe*m+Se*P+Ce*U+Oe*oe,a[2]=pe*v+Se*I+Ce*W+Oe*he,a[3]=pe*_+Se*D+Ce*X+Oe*we,a[4]=(pe=l[4])*d+(Se=l[5])*S+(Ce=l[6])*O+(Oe=l[7])*te,a[5]=pe*m+Se*P+Ce*U+Oe*oe,a[6]=pe*v+Se*I+Ce*W+Oe*he,a[7]=pe*_+Se*D+Ce*X+Oe*we,a[8]=(pe=l[8])*d+(Se=l[9])*S+(Ce=l[10])*O+(Oe=l[11])*te,a[9]=pe*m+Se*P+Ce*U+Oe*oe,a[10]=pe*v+Se*I+Ce*W+Oe*he,a[11]=pe*_+Se*D+Ce*X+Oe*we,a[12]=(pe=l[12])*d+(Se=l[13])*S+(Ce=l[14])*O+(Oe=l[15])*te,a[13]=pe*m+Se*P+Ce*U+Oe*oe,a[14]=pe*v+Se*I+Ce*W+Oe*he,a[15]=pe*_+Se*D+Ce*X+Oe*we,a}Math.hypot||(Math.hypot=function(){for(var a=0,r=arguments.length;r--;)a+=arguments[r]*arguments[r];return Math.sqrt(a)});var ld,xL=Hb;function Gp(a,r,l){var d=r[0],m=r[1],v=r[2],_=r[3];return a[0]=l[0]*d+l[4]*m+l[8]*v+l[12]*_,a[1]=l[1]*d+l[5]*m+l[9]*v+l[13]*_,a[2]=l[2]*d+l[6]*m+l[10]*v+l[14]*_,a[3]=l[3]*d+l[7]*m+l[11]*v+l[15]*_,a}ld=new sc(4),sc!=Float32Array&&(ld[0]=0,ld[1]=0,ld[2]=0,ld[3]=0);class _L extends Fi{constructor(r){super(r,vL)}createBucket(r){return new Dv(r)}queryRadius(r){const l=r;return od("circle-radius",this,l)+od("circle-stroke-width",this,l)+Up(this.paint.get("circle-translate"))}queryIntersectsFeature(r,l,d,m,v,_,S,P){const I=qp(r,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),_.angle,S),D=this.paint.get("circle-radius").evaluate(l,d)+this.paint.get("circle-stroke-width").evaluate(l,d),O=this.paint.get("circle-pitch-alignment")==="map",U=O?I:function(X,te){return X.map(oe=>Kb(oe,te))}(I,P),W=O?D*S:D;for(const X of m)for(const te of X){const oe=O?te:Kb(te,P);let he=W;const we=Gp([],[te.x,te.y,0,1],P);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?he*=we[3]/_.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(he*=_.cameraToCenterDistance/we[3]),pL(U,oe,he))return!0}return!1}}function Kb(a,r){const l=Gp([],[a.x,a.y,0,1],r);return new M(l[0]/l[3],l[1]/l[3])}class Xb extends Dv{}let Qb;ht("HeatmapBucket",Xb,{omit:["layers"]});var wL={get paint(){return Qb=Qb||new jn({"heatmap-radius":new At(ue.paint_heatmap["heatmap-radius"]),"heatmap-weight":new At(ue.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new wt(ue.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Jh(ue.paint_heatmap["heatmap-color"]),"heatmap-opacity":new wt(ue.paint_heatmap["heatmap-opacity"])})}};function Fv(a,{width:r,height:l},d,m){if(m){if(m instanceof Uint8ClampedArray)m=new Uint8Array(m.buffer);else if(m.length!==r*l*d)throw new RangeError(`mismatched image size. expected: ${m.length} but got: ${r*l*d}`)}else m=new Uint8Array(r*l*d);return a.width=r,a.height=l,a.data=m,a}function Yb(a,{width:r,height:l},d){if(r===a.width&&l===a.height)return;const m=Fv({},{width:r,height:l},d);Nv(a,m,{x:0,y:0},{x:0,y:0},{width:Math.min(a.width,r),height:Math.min(a.height,l)},d),a.width=r,a.height=l,a.data=m.data}function Nv(a,r,l,d,m,v){if(m.width===0||m.height===0)return r;if(m.width>a.width||m.height>a.height||l.x>a.width-m.width||l.y>a.height-m.height)throw new RangeError("out of range source coordinates for image copy");if(m.width>r.width||m.height>r.height||d.x>r.width-m.width||d.y>r.height-m.height)throw new RangeError("out of range destination coordinates for image copy");const _=a.data,S=r.data;if(_===S)throw new Error("srcData equals dstData, so image is already copied");for(let P=0;P<m.height;P++){const I=((l.y+P)*a.width+l.x)*v,D=((d.y+P)*r.width+d.x)*v;for(let O=0;O<m.width*v;O++)S[D+O]=_[I+O]}return r}class ud{constructor(r,l){Fv(this,r,1,l)}resize(r){Yb(this,r,1)}clone(){return new ud({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,l,d,m,v){Nv(r,l,d,m,v,1)}}class Wi{constructor(r,l){Fv(this,r,4,l)}resize(r){Yb(this,r,4)}replace(r,l){l?this.data.set(r):this.data=r instanceof Uint8ClampedArray?new Uint8Array(r.buffer):r}clone(){return new Wi({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,l,d,m,v){Nv(r,l,d,m,v,4)}}function Jb(a){const r={},l=a.resolution||256,d=a.clips?a.clips.length:1,m=a.image||new Wi({width:l,height:d});if(Math.log(l)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${l}`);const v=(_,S,P)=>{r[a.evaluationKey]=P;const I=a.expression.evaluate(r);m.data[_+S+0]=Math.floor(255*I.r/I.a),m.data[_+S+1]=Math.floor(255*I.g/I.a),m.data[_+S+2]=Math.floor(255*I.b/I.a),m.data[_+S+3]=Math.floor(255*I.a)};if(a.clips)for(let _=0,S=0;_<d;++_,S+=4*l)for(let P=0,I=0;P<l;P++,I+=4){const D=P/(l-1),{start:O,end:U}=a.clips[_];v(S,I,O*(1-D)+U*D)}else for(let _=0,S=0;_<l;_++,S+=4)v(0,S,_/(l-1));return m}ht("AlphaImage",ud),ht("RGBAImage",Wi);class bL extends Fi{createBucket(r){return new Xb(r)}constructor(r){super(r,wL),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(r){r==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Jb({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let eS;var SL={get paint(){return eS=eS||new jn({"hillshade-illumination-direction":new wt(ue.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new wt(ue.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new wt(ue.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new wt(ue.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new wt(ue.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new wt(ue.paint_hillshade["hillshade-accent-color"])})}};class EL extends Fi{constructor(r){super(r,SL)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const TL=Cn([{name:"a_pos",components:2,type:"Int16"}],4),{members:CL}=TL;var Bv={exports:{}};function Zp(a,r,l){l=l||2;var d,m,v,_,S,P,I,D=r&&r.length,O=D?r[0]*l:a.length,U=tS(a,0,O,l,!0),W=[];if(!U||U.next===U.prev)return W;if(D&&(U=function(te,oe,he,we){var pe,Se,Ce,Oe=[];for(pe=0,Se=oe.length;pe<Se;pe++)(Ce=tS(te,oe[pe]*we,pe<Se-1?oe[pe+1]*we:te.length,we,!1))===Ce.next&&(Ce.steiner=!0),Oe.push(LL(Ce));for(Oe.sort(ML),pe=0;pe<Oe.length;pe++)he=RL(Oe[pe],he);return he}(a,r,U,l)),a.length>80*l){d=v=a[0],m=_=a[1];for(var X=l;X<O;X+=l)(S=a[X])<d&&(d=S),(P=a[X+1])<m&&(m=P),S>v&&(v=S),P>_&&(_=P);I=(I=Math.max(v-d,_-m))!==0?32767/I:0}return cd(U,W,l,d,m,I,0),W}function tS(a,r,l,d,m){var v,_;if(m===$v(a,r,l,d)>0)for(v=r;v<l;v+=d)_=iS(v,a[v],a[v+1],_);else for(v=l-d;v>=r;v-=d)_=iS(v,a[v],a[v+1],_);return _&&Wp(_,_.next)&&(dd(_),_=_.next),_}function Kl(a,r){if(!a)return a;r||(r=a);var l,d=a;do if(l=!1,d.steiner||!Wp(d,d.next)&&Un(d.prev,d,d.next)!==0)d=d.next;else{if(dd(d),(d=r=d.prev)===d.next)break;l=!0}while(l||d!==r);return r}function cd(a,r,l,d,m,v,_){if(a){!_&&v&&function(D,O,U,W){var X=D;do X.z===0&&(X.z=Vv(X.x,X.y,O,U,W)),X.prevZ=X.prev,X.nextZ=X.next,X=X.next;while(X!==D);X.prevZ.nextZ=null,X.prevZ=null,function(te){var oe,he,we,pe,Se,Ce,Oe,lt,yt=1;do{for(he=te,te=null,Se=null,Ce=0;he;){for(Ce++,we=he,Oe=0,oe=0;oe<yt&&(Oe++,we=we.nextZ);oe++);for(lt=yt;Oe>0||lt>0&&we;)Oe!==0&&(lt===0||!we||he.z<=we.z)?(pe=he,he=he.nextZ,Oe--):(pe=we,we=we.nextZ,lt--),Se?Se.nextZ=pe:te=pe,pe.prevZ=Se,Se=pe;he=we}Se.nextZ=null,yt*=2}while(Ce>1)}(X)}(a,d,m,v);for(var S,P,I=a;a.prev!==a.next;)if(S=a.prev,P=a.next,v?AL(a,d,m,v):PL(a))r.push(S.i/l|0),r.push(a.i/l|0),r.push(P.i/l|0),dd(a),a=P.next,I=P.next;else if((a=P)===I){_?_===1?cd(a=kL(Kl(a),r,l),r,l,d,m,v,2):_===2&&IL(a,r,l,d,m,v):cd(Kl(a),r,l,d,m,v,1);break}}}function PL(a){var r=a.prev,l=a,d=a.next;if(Un(r,l,d)>=0)return!1;for(var m=r.x,v=l.x,_=d.x,S=r.y,P=l.y,I=d.y,D=m<v?m<_?m:_:v<_?v:_,O=S<P?S<I?S:I:P<I?P:I,U=m>v?m>_?m:_:v>_?v:_,W=S>P?S>I?S:I:P>I?P:I,X=d.next;X!==r;){if(X.x>=D&&X.x<=U&&X.y>=O&&X.y<=W&&ac(m,S,v,P,_,I,X.x,X.y)&&Un(X.prev,X,X.next)>=0)return!1;X=X.next}return!0}function AL(a,r,l,d){var m=a.prev,v=a,_=a.next;if(Un(m,v,_)>=0)return!1;for(var S=m.x,P=v.x,I=_.x,D=m.y,O=v.y,U=_.y,W=S<P?S<I?S:I:P<I?P:I,X=D<O?D<U?D:U:O<U?O:U,te=S>P?S>I?S:I:P>I?P:I,oe=D>O?D>U?D:U:O>U?O:U,he=Vv(W,X,r,l,d),we=Vv(te,oe,r,l,d),pe=a.prevZ,Se=a.nextZ;pe&&pe.z>=he&&Se&&Se.z<=we;){if(pe.x>=W&&pe.x<=te&&pe.y>=X&&pe.y<=oe&&pe!==m&&pe!==_&&ac(S,D,P,O,I,U,pe.x,pe.y)&&Un(pe.prev,pe,pe.next)>=0||(pe=pe.prevZ,Se.x>=W&&Se.x<=te&&Se.y>=X&&Se.y<=oe&&Se!==m&&Se!==_&&ac(S,D,P,O,I,U,Se.x,Se.y)&&Un(Se.prev,Se,Se.next)>=0))return!1;Se=Se.nextZ}for(;pe&&pe.z>=he;){if(pe.x>=W&&pe.x<=te&&pe.y>=X&&pe.y<=oe&&pe!==m&&pe!==_&&ac(S,D,P,O,I,U,pe.x,pe.y)&&Un(pe.prev,pe,pe.next)>=0)return!1;pe=pe.prevZ}for(;Se&&Se.z<=we;){if(Se.x>=W&&Se.x<=te&&Se.y>=X&&Se.y<=oe&&Se!==m&&Se!==_&&ac(S,D,P,O,I,U,Se.x,Se.y)&&Un(Se.prev,Se,Se.next)>=0)return!1;Se=Se.nextZ}return!0}function kL(a,r,l){var d=a;do{var m=d.prev,v=d.next.next;!Wp(m,v)&&nS(m,d,d.next,v)&&hd(m,v)&&hd(v,m)&&(r.push(m.i/l|0),r.push(d.i/l|0),r.push(v.i/l|0),dd(d),dd(d.next),d=a=v),d=d.next}while(d!==a);return Kl(d)}function IL(a,r,l,d,m,v){var _=a;do{for(var S=_.next.next;S!==_.prev;){if(_.i!==S.i&&zL(_,S)){var P=rS(_,S);return _=Kl(_,_.next),P=Kl(P,P.next),cd(_,r,l,d,m,v,0),void cd(P,r,l,d,m,v,0)}S=S.next}_=_.next}while(_!==a)}function ML(a,r){return a.x-r.x}function RL(a,r){var l=function(m,v){var _,S=v,P=m.x,I=m.y,D=-1/0;do{if(I<=S.y&&I>=S.next.y&&S.next.y!==S.y){var O=S.x+(I-S.y)*(S.next.x-S.x)/(S.next.y-S.y);if(O<=P&&O>D&&(D=O,_=S.x<S.next.x?S:S.next,O===P))return _}S=S.next}while(S!==v);if(!_)return null;var U,W=_,X=_.x,te=_.y,oe=1/0;S=_;do P>=S.x&&S.x>=X&&P!==S.x&&ac(I<te?P:D,I,X,te,I<te?D:P,I,S.x,S.y)&&(U=Math.abs(I-S.y)/(P-S.x),hd(S,m)&&(U<oe||U===oe&&(S.x>_.x||S.x===_.x&&DL(_,S)))&&(_=S,oe=U)),S=S.next;while(S!==W);return _}(a,r);if(!l)return r;var d=rS(l,a);return Kl(d,d.next),Kl(l,l.next)}function DL(a,r){return Un(a.prev,a,r.prev)<0&&Un(r.next,a,a.next)<0}function Vv(a,r,l,d,m){return(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a=(a-l)*m|0)|a<<8))|a<<4))|a<<2))|a<<1))|(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=(r-d)*m|0)|r<<8))|r<<4))|r<<2))|r<<1))<<1}function LL(a){var r=a,l=a;do(r.x<l.x||r.x===l.x&&r.y<l.y)&&(l=r),r=r.next;while(r!==a);return l}function ac(a,r,l,d,m,v,_,S){return(m-_)*(r-S)>=(a-_)*(v-S)&&(a-_)*(d-S)>=(l-_)*(r-S)&&(l-_)*(v-S)>=(m-_)*(d-S)}function zL(a,r){return a.next.i!==r.i&&a.prev.i!==r.i&&!function(l,d){var m=l;do{if(m.i!==l.i&&m.next.i!==l.i&&m.i!==d.i&&m.next.i!==d.i&&nS(m,m.next,l,d))return!0;m=m.next}while(m!==l);return!1}(a,r)&&(hd(a,r)&&hd(r,a)&&function(l,d){var m=l,v=!1,_=(l.x+d.x)/2,S=(l.y+d.y)/2;do m.y>S!=m.next.y>S&&m.next.y!==m.y&&_<(m.next.x-m.x)*(S-m.y)/(m.next.y-m.y)+m.x&&(v=!v),m=m.next;while(m!==l);return v}(a,r)&&(Un(a.prev,a,r.prev)||Un(a,r.prev,r))||Wp(a,r)&&Un(a.prev,a,a.next)>0&&Un(r.prev,r,r.next)>0)}function Un(a,r,l){return(r.y-a.y)*(l.x-r.x)-(r.x-a.x)*(l.y-r.y)}function Wp(a,r){return a.x===r.x&&a.y===r.y}function nS(a,r,l,d){var m=Kp(Un(a,r,l)),v=Kp(Un(a,r,d)),_=Kp(Un(l,d,a)),S=Kp(Un(l,d,r));return m!==v&&_!==S||!(m!==0||!Hp(a,l,r))||!(v!==0||!Hp(a,d,r))||!(_!==0||!Hp(l,a,d))||!(S!==0||!Hp(l,r,d))}function Hp(a,r,l){return r.x<=Math.max(a.x,l.x)&&r.x>=Math.min(a.x,l.x)&&r.y<=Math.max(a.y,l.y)&&r.y>=Math.min(a.y,l.y)}function Kp(a){return a>0?1:a<0?-1:0}function hd(a,r){return Un(a.prev,a,a.next)<0?Un(a,r,a.next)>=0&&Un(a,a.prev,r)>=0:Un(a,r,a.prev)<0||Un(a,a.next,r)<0}function rS(a,r){var l=new jv(a.i,a.x,a.y),d=new jv(r.i,r.x,r.y),m=a.next,v=r.prev;return a.next=r,r.prev=a,l.next=m,m.prev=l,d.next=l,l.prev=d,v.next=d,d.prev=v,d}function iS(a,r,l,d){var m=new jv(a,r,l);return d?(m.next=d.next,m.prev=d,d.next.prev=m,d.next=m):(m.prev=m,m.next=m),m}function dd(a){a.next.prev=a.prev,a.prev.next=a.next,a.prevZ&&(a.prevZ.nextZ=a.nextZ),a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function jv(a,r,l){this.i=a,this.x=r,this.y=l,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function $v(a,r,l,d){for(var m=0,v=r,_=l-d;v<l;v+=d)m+=(a[_]-a[v])*(a[v+1]+a[_+1]),_=v;return m}Bv.exports=Zp,Bv.exports.default=Zp,Zp.deviation=function(a,r,l,d){var m=r&&r.length,v=Math.abs($v(a,0,m?r[0]*l:a.length,l));if(m)for(var _=0,S=r.length;_<S;_++)v-=Math.abs($v(a,r[_]*l,_<S-1?r[_+1]*l:a.length,l));var P=0;for(_=0;_<d.length;_+=3){var I=d[_]*l,D=d[_+1]*l,O=d[_+2]*l;P+=Math.abs((a[I]-a[O])*(a[D+1]-a[I+1])-(a[I]-a[D])*(a[O+1]-a[I+1]))}return v===0&&P===0?0:Math.abs((P-v)/v)},Zp.flatten=function(a){for(var r=a[0][0].length,l={vertices:[],holes:[],dimensions:r},d=0,m=0;m<a.length;m++){for(var v=0;v<a[m].length;v++)for(var _=0;_<r;_++)l.vertices.push(a[m][v][_]);m>0&&l.holes.push(d+=a[m-1].length)}return l};var sS=b(Bv.exports);function OL(a,r,l,d,m){aS(a,r,l||0,d||a.length-1,m||FL)}function aS(a,r,l,d,m){for(;d>l;){if(d-l>600){var v=d-l+1,_=r-l+1,S=Math.log(v),P=.5*Math.exp(2*S/3),I=.5*Math.sqrt(S*P*(v-P)/v)*(_-v/2<0?-1:1);aS(a,r,Math.max(l,Math.floor(r-_*P/v+I)),Math.min(d,Math.floor(r+(v-_)*P/v+I)),m)}var D=a[r],O=l,U=d;for(fd(a,l,r),m(a[d],D)>0&&fd(a,l,d);O<U;){for(fd(a,O,U),O++,U--;m(a[O],D)<0;)O++;for(;m(a[U],D)>0;)U--}m(a[l],D)===0?fd(a,l,U):fd(a,++U,d),U<=r&&(l=U+1),r<=U&&(d=U-1)}}function fd(a,r,l){var d=a[r];a[r]=a[l],a[l]=d}function FL(a,r){return a<r?-1:a>r?1:0}function Uv(a,r){const l=a.length;if(l<=1)return[a];const d=[];let m,v;for(let _=0;_<l;_++){const S=ct(a[_]);S!==0&&(a[_].area=Math.abs(S),v===void 0&&(v=S<0),v===S<0?(m&&d.push(m),m=[a[_]]):m.push(a[_]))}if(m&&d.push(m),r>1)for(let _=0;_<d.length;_++)d[_].length<=r||(OL(d[_],r,1,d[_].length-1,NL),d[_]=d[_].slice(0,r));return d}function NL(a,r){return r.area-a.area}function qv(a,r,l){const d=l.patternDependencies;let m=!1;for(const v of r){const _=v.paint.get(`${a}-pattern`);_.isConstant()||(m=!0);const S=_.constantOr(null);S&&(m=!0,d[S.to]=!0,d[S.from]=!0)}return m}function Gv(a,r,l,d,m){const v=m.patternDependencies;for(const _ of r){const S=_.paint.get(`${a}-pattern`).value;if(S.kind!=="constant"){let P=S.evaluate({zoom:d-1},l,{},m.availableImages),I=S.evaluate({zoom:d},l,{},m.availableImages),D=S.evaluate({zoom:d+1},l,{},m.availableImages);P=P&&P.name?P.name:P,I=I&&I.name?I.name:I,D=D&&D.name?D.name:D,v[P]=!0,v[I]=!0,v[D]=!0,l.patterns[_.id]={min:P,mid:I,max:D}}}return l}class Zv{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(l=>l.id),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Ut,this.indexArray=new gr,this.indexArray2=new er,this.programConfigurations=new $s(r.layers,r.zoom),this.segments=new pn,this.segments2=new pn,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(r,l,d){this.hasPattern=qv("fill",this.layers,l);const m=this.layers[0].layout.get("fill-sort-key"),v=!m.isConstant(),_=[];for(const{feature:S,id:P,index:I,sourceLayerIndex:D}of r){const O=this.layers[0]._featureFilter.needGeometry,U=Hl(S,O);if(!this.layers[0]._featureFilter.filter(new fn(this.zoom),U,d))continue;const W=v?m.evaluate(U,{},d,l.availableImages):void 0,X={id:P,properties:S.properties,type:S.type,sourceLayerIndex:D,index:I,geometry:O?U.geometry:Wl(S),patterns:{},sortKey:W};_.push(X)}v&&_.sort((S,P)=>S.sortKey-P.sortKey);for(const S of _){const{geometry:P,index:I,sourceLayerIndex:D}=S;if(this.hasPattern){const O=Gv("fill",this.layers,S,this.zoom,l);this.patternFeatures.push(O)}else this.addFeature(S,P,I,d,{});l.featureIndex.insert(r[I].feature,P,I,D,this.index)}}update(r,l,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,l,this.stateDependentLayers,d)}addFeatures(r,l,d){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,l,d)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,CL),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.indexBuffer2=r.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(r,l,d,m,v){for(const _ of Uv(l,500)){let S=0;for(const W of _)S+=W.length;const P=this.segments.prepareSegment(S,this.layoutVertexArray,this.indexArray),I=P.vertexLength,D=[],O=[];for(const W of _){if(W.length===0)continue;W!==_[0]&&O.push(D.length/2);const X=this.segments2.prepareSegment(W.length,this.layoutVertexArray,this.indexArray2),te=X.vertexLength;this.layoutVertexArray.emplaceBack(W[0].x,W[0].y),this.indexArray2.emplaceBack(te+W.length-1,te),D.push(W[0].x),D.push(W[0].y);for(let oe=1;oe<W.length;oe++)this.layoutVertexArray.emplaceBack(W[oe].x,W[oe].y),this.indexArray2.emplaceBack(te+oe-1,te+oe),D.push(W[oe].x),D.push(W[oe].y);X.vertexLength+=W.length,X.primitiveLength+=W.length}const U=sS(D,O);for(let W=0;W<U.length;W+=3)this.indexArray.emplaceBack(I+U[W],I+U[W+1],I+U[W+2]);P.vertexLength+=S,P.primitiveLength+=U.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,d,v,m)}}let oS,lS;ht("FillBucket",Zv,{omit:["layers","patternFeatures"]});var BL={get paint(){return lS=lS||new jn({"fill-antialias":new wt(ue.paint_fill["fill-antialias"]),"fill-opacity":new At(ue.paint_fill["fill-opacity"]),"fill-color":new At(ue.paint_fill["fill-color"]),"fill-outline-color":new At(ue.paint_fill["fill-outline-color"]),"fill-translate":new wt(ue.paint_fill["fill-translate"]),"fill-translate-anchor":new wt(ue.paint_fill["fill-translate-anchor"]),"fill-pattern":new ql(ue.paint_fill["fill-pattern"])})},get layout(){return oS=oS||new jn({"fill-sort-key":new At(ue.layout_fill["fill-sort-key"])})}};class VL extends Fi{constructor(r){super(r,BL)}recalculate(r,l){super.recalculate(r,l);const d=this.paint._values["fill-outline-color"];d.value.kind==="constant"&&d.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(r){return new Zv(r)}queryRadius(){return Up(this.paint.get("fill-translate"))}queryIntersectsFeature(r,l,d,m,v,_,S){return Ub(qp(r,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),_.angle,S),m)}isTileClipped(){return!0}}const jL=Cn([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),$L=Cn([{name:"a_centroid",components:2,type:"Int16"}],4),{members:UL}=jL;var Fo={},qL=C,uS=oc;function oc(a,r,l,d,m){this.properties={},this.extent=l,this.type=0,this._pbf=a,this._geometry=-1,this._keys=d,this._values=m,a.readFields(GL,this,r)}function GL(a,r,l){a==1?r.id=l.readVarint():a==2?function(d,m){for(var v=d.readVarint()+d.pos;d.pos<v;){var _=m._keys[d.readVarint()],S=m._values[d.readVarint()];m.properties[_]=S}}(l,r):a==3?r.type=l.readVarint():a==4&&(r._geometry=l.pos)}function ZL(a){for(var r,l,d=0,m=0,v=a.length,_=v-1;m<v;_=m++)d+=((l=a[_]).x-(r=a[m]).x)*(r.y+l.y);return d}oc.types=["Unknown","Point","LineString","Polygon"],oc.prototype.loadGeometry=function(){var a=this._pbf;a.pos=this._geometry;for(var r,l=a.readVarint()+a.pos,d=1,m=0,v=0,_=0,S=[];a.pos<l;){if(m<=0){var P=a.readVarint();d=7&P,m=P>>3}if(m--,d===1||d===2)v+=a.readSVarint(),_+=a.readSVarint(),d===1&&(r&&S.push(r),r=[]),r.push(new qL(v,_));else{if(d!==7)throw new Error("unknown command "+d);r&&r.push(r[0].clone())}}return r&&S.push(r),S},oc.prototype.bbox=function(){var a=this._pbf;a.pos=this._geometry;for(var r=a.readVarint()+a.pos,l=1,d=0,m=0,v=0,_=1/0,S=-1/0,P=1/0,I=-1/0;a.pos<r;){if(d<=0){var D=a.readVarint();l=7&D,d=D>>3}if(d--,l===1||l===2)(m+=a.readSVarint())<_&&(_=m),m>S&&(S=m),(v+=a.readSVarint())<P&&(P=v),v>I&&(I=v);else if(l!==7)throw new Error("unknown command "+l)}return[_,P,S,I]},oc.prototype.toGeoJSON=function(a,r,l){var d,m,v=this.extent*Math.pow(2,l),_=this.extent*a,S=this.extent*r,P=this.loadGeometry(),I=oc.types[this.type];function D(W){for(var X=0;X<W.length;X++){var te=W[X];W[X]=[360*(te.x+_)/v-180,360/Math.PI*Math.atan(Math.exp((180-360*(te.y+S)/v)*Math.PI/180))-90]}}switch(this.type){case 1:var O=[];for(d=0;d<P.length;d++)O[d]=P[d][0];D(P=O);break;case 2:for(d=0;d<P.length;d++)D(P[d]);break;case 3:for(P=function(W){var X=W.length;if(X<=1)return[W];for(var te,oe,he=[],we=0;we<X;we++){var pe=ZL(W[we]);pe!==0&&(oe===void 0&&(oe=pe<0),oe===pe<0?(te&&he.push(te),te=[W[we]]):te.push(W[we]))}return te&&he.push(te),he}(P),d=0;d<P.length;d++)for(m=0;m<P[d].length;m++)D(P[d][m])}P.length===1?P=P[0]:I="Multi"+I;var U={type:"Feature",geometry:{type:I,coordinates:P},properties:this.properties};return"id"in this&&(U.id=this.id),U};var WL=uS,cS=hS;function hS(a,r){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=a,this._keys=[],this._values=[],this._features=[],a.readFields(HL,this,r),this.length=this._features.length}function HL(a,r,l){a===15?r.version=l.readVarint():a===1?r.name=l.readString():a===5?r.extent=l.readVarint():a===2?r._features.push(l.pos):a===3?r._keys.push(l.readString()):a===4&&r._values.push(function(d){for(var m=null,v=d.readVarint()+d.pos;d.pos<v;){var _=d.readVarint()>>3;m=_===1?d.readString():_===2?d.readFloat():_===3?d.readDouble():_===4?d.readVarint64():_===5?d.readVarint():_===6?d.readSVarint():_===7?d.readBoolean():null}return m}(l))}hS.prototype.feature=function(a){if(a<0||a>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[a];var r=this._pbf.readVarint()+this._pbf.pos;return new WL(this._pbf,r,this.extent,this._keys,this._values)};var KL=cS;function XL(a,r,l){if(a===3){var d=new KL(l,l.readVarint()+l.pos);d.length&&(r[d.name]=d)}}Fo.VectorTile=function(a,r){this.layers=a.readFields(XL,{},r)},Fo.VectorTileFeature=uS,Fo.VectorTileLayer=cS;const QL=Fo.VectorTileFeature.types,Wv=Math.pow(2,13);function pd(a,r,l,d,m,v,_,S){a.emplaceBack(r,l,2*Math.floor(d*Wv)+_,m*Wv*2,v*Wv*2,Math.round(S))}class Hv{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(l=>l.id),this.index=r.index,this.hasPattern=!1,this.layoutVertexArray=new nt,this.centroidVertexArray=new We,this.indexArray=new gr,this.programConfigurations=new $s(r.layers,r.zoom),this.segments=new pn,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(r,l,d){this.features=[],this.hasPattern=qv("fill-extrusion",this.layers,l);for(const{feature:m,id:v,index:_,sourceLayerIndex:S}of r){const P=this.layers[0]._featureFilter.needGeometry,I=Hl(m,P);if(!this.layers[0]._featureFilter.filter(new fn(this.zoom),I,d))continue;const D={id:v,sourceLayerIndex:S,index:_,geometry:P?I.geometry:Wl(m),properties:m.properties,type:m.type,patterns:{}};this.hasPattern?this.features.push(Gv("fill-extrusion",this.layers,D,this.zoom,l)):this.addFeature(D,D.geometry,_,d,{}),l.featureIndex.insert(m,D.geometry,_,S,this.index,!0)}}addFeatures(r,l,d){for(const m of this.features){const{geometry:v}=m;this.addFeature(m,v,m.index,l,d)}}update(r,l,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,l,this.stateDependentLayers,d)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,UL),this.centroidVertexBuffer=r.createVertexBuffer(this.centroidVertexArray,$L.members,!0),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(r,l,d,m,v){const _={x:0,y:0,vertexCount:0};for(const S of Uv(l,500)){let P=0;for(const X of S)P+=X.length;let I=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const X of S){if(X.length===0||JL(X))continue;let te=0;for(let oe=0;oe<X.length;oe++){const he=X[oe];if(oe>=1){const we=X[oe-1];if(!YL(he,we)){I.vertexLength+4>pn.MAX_VERTEX_ARRAY_LENGTH&&(I=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const pe=he.sub(we)._perp()._unit(),Se=we.dist(he);te+Se>32768&&(te=0),pd(this.layoutVertexArray,he.x,he.y,pe.x,pe.y,0,0,te),pd(this.layoutVertexArray,he.x,he.y,pe.x,pe.y,0,1,te),_.x+=2*he.x,_.y+=2*he.y,_.vertexCount+=2,te+=Se,pd(this.layoutVertexArray,we.x,we.y,pe.x,pe.y,0,0,te),pd(this.layoutVertexArray,we.x,we.y,pe.x,pe.y,0,1,te),_.x+=2*we.x,_.y+=2*we.y,_.vertexCount+=2;const Ce=I.vertexLength;this.indexArray.emplaceBack(Ce,Ce+2,Ce+1),this.indexArray.emplaceBack(Ce+1,Ce+2,Ce+3),I.vertexLength+=4,I.primitiveLength+=2}}}}if(I.vertexLength+P>pn.MAX_VERTEX_ARRAY_LENGTH&&(I=this.segments.prepareSegment(P,this.layoutVertexArray,this.indexArray)),QL[r.type]!=="Polygon")continue;const D=[],O=[],U=I.vertexLength;for(const X of S)if(X.length!==0){X!==S[0]&&O.push(D.length/2);for(let te=0;te<X.length;te++){const oe=X[te];pd(this.layoutVertexArray,oe.x,oe.y,0,0,1,1,0),_.x+=oe.x,_.y+=oe.y,_.vertexCount+=1,D.push(oe.x),D.push(oe.y)}}const W=sS(D,O);for(let X=0;X<W.length;X+=3)this.indexArray.emplaceBack(U+W[X],U+W[X+2],U+W[X+1]);I.primitiveLength+=W.length/3,I.vertexLength+=P}for(let S=0;S<_.vertexCount;S++)this.centroidVertexArray.emplaceBack(Math.floor(_.x/_.vertexCount),Math.floor(_.y/_.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,d,v,m)}}function YL(a,r){return a.x===r.x&&(a.x<0||a.x>Xn)||a.y===r.y&&(a.y<0||a.y>Xn)}function JL(a){return a.every(r=>r.x<0)||a.every(r=>r.x>Xn)||a.every(r=>r.y<0)||a.every(r=>r.y>Xn)}let dS;ht("FillExtrusionBucket",Hv,{omit:["layers","features"]});var ez={get paint(){return dS=dS||new jn({"fill-extrusion-opacity":new wt(ue["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new At(ue["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new wt(ue["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new wt(ue["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new ql(ue["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new At(ue["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new At(ue["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new wt(ue["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class tz extends Fi{constructor(r){super(r,ez)}createBucket(r){return new Hv(r)}queryRadius(){return Up(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(r,l,d,m,v,_,S,P){const I=qp(r,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),_.angle,S),D=this.paint.get("fill-extrusion-height").evaluate(l,d),O=this.paint.get("fill-extrusion-base").evaluate(l,d),U=function(X,te,oe,he){const we=[];for(const pe of X){const Se=[pe.x,pe.y,0,1];Gp(Se,Se,te),we.push(new M(Se[0]/Se[3],Se[1]/Se[3]))}return we}(I,P),W=function(X,te,oe,he){const we=[],pe=[],Se=he[8]*te,Ce=he[9]*te,Oe=he[10]*te,lt=he[11]*te,yt=he[8]*oe,at=he[9]*oe,rt=he[10]*oe,Xe=he[11]*oe;for(const dt of X){const Ye=[],Ze=[];for(const Tt of dt){const xt=Tt.x,Vt=Tt.y,mn=he[0]*xt+he[4]*Vt+he[12],bn=he[1]*xt+he[5]*Vt+he[13],rr=he[2]*xt+he[6]*Vt+he[14],Bi=he[3]*xt+he[7]*Vt+he[15],Jr=rr+Oe,Qn=Bi+lt,vr=mn+yt,Pr=bn+at,ei=rr+rt,ti=Bi+Xe,ir=new M((mn+Se)/Qn,(bn+Ce)/Qn);ir.z=Jr/Qn,Ye.push(ir);const sr=new M(vr/ti,Pr/ti);sr.z=ei/ti,Ze.push(sr)}we.push(Ye),pe.push(Ze)}return[we,pe]}(m,O,D,P);return function(X,te,oe){let he=1/0;Ub(oe,te)&&(he=fS(oe,te[0]));for(let we=0;we<te.length;we++){const pe=te[we],Se=X[we];for(let Ce=0;Ce<pe.length-1;Ce++){const Oe=pe[Ce],lt=[Oe,pe[Ce+1],Se[Ce+1],Se[Ce],Oe];$b(oe,lt)&&(he=Math.min(he,fS(oe,lt)))}}return he!==1/0&&he}(W[0],W[1],U)}}function md(a,r){return a.x*r.x+a.y*r.y}function fS(a,r){if(a.length===1){let l=0;const d=r[l++];let m;for(;!m||d.equals(m);)if(m=r[l++],!m)return 1/0;for(;l<r.length;l++){const v=r[l],_=a[0],S=m.sub(d),P=v.sub(d),I=_.sub(d),D=md(S,S),O=md(S,P),U=md(P,P),W=md(I,S),X=md(I,P),te=D*U-O*O,oe=(U*W-O*X)/te,he=(D*X-O*W)/te,we=d.z*(1-oe-he)+m.z*oe+v.z*he;if(isFinite(we))return we}return 1/0}{let l=1/0;for(const d of r)l=Math.min(l,d.z);return l}}const nz=Cn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:rz}=nz,iz=Cn([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:sz}=iz,az=Fo.VectorTileFeature.types,oz=Math.cos(Math.PI/180*37.5),pS=Math.pow(2,14)/.5;class Kv{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(l=>l.id),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(l=>{this.gradients[l.id]={}}),this.layoutVertexArray=new kt,this.layoutVertexArray2=new vt,this.indexArray=new gr,this.programConfigurations=new $s(r.layers,r.zoom),this.segments=new pn,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(r,l,d){this.hasPattern=qv("line",this.layers,l);const m=this.layers[0].layout.get("line-sort-key"),v=!m.isConstant(),_=[];for(const{feature:S,id:P,index:I,sourceLayerIndex:D}of r){const O=this.layers[0]._featureFilter.needGeometry,U=Hl(S,O);if(!this.layers[0]._featureFilter.filter(new fn(this.zoom),U,d))continue;const W=v?m.evaluate(U,{},d):void 0,X={id:P,properties:S.properties,type:S.type,sourceLayerIndex:D,index:I,geometry:O?U.geometry:Wl(S),patterns:{},sortKey:W};_.push(X)}v&&_.sort((S,P)=>S.sortKey-P.sortKey);for(const S of _){const{geometry:P,index:I,sourceLayerIndex:D}=S;if(this.hasPattern){const O=Gv("line",this.layers,S,this.zoom,l);this.patternFeatures.push(O)}else this.addFeature(S,P,I,d,{});l.featureIndex.insert(r[I].feature,P,I,D,this.index)}}update(r,l,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,l,this.stateDependentLayers,d)}addFeatures(r,l,d){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,l,d)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=r.createVertexBuffer(this.layoutVertexArray2,sz)),this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,rz),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(r){if(r.properties&&Object.prototype.hasOwnProperty.call(r.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(r.properties,"mapbox_clip_end"))return{start:+r.properties.mapbox_clip_start,end:+r.properties.mapbox_clip_end}}addFeature(r,l,d,m,v){const _=this.layers[0].layout,S=_.get("line-join").evaluate(r,{}),P=_.get("line-cap"),I=_.get("line-miter-limit"),D=_.get("line-round-limit");this.lineClips=this.lineFeatureClips(r);for(const O of l)this.addLine(O,r,S,P,I,D);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,d,v,m)}addLine(r,l,d,m,v,_){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let he=0;he<r.length-1;he++)this.totalDistance+=r[he].dist(r[he+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const S=az[l.type]==="Polygon";let P=r.length;for(;P>=2&&r[P-1].equals(r[P-2]);)P--;let I=0;for(;I<P-1&&r[I].equals(r[I+1]);)I++;if(P<(S?3:2))return;d==="bevel"&&(v=1.05);const D=this.overscaling<=16?15*Xn/(512*this.overscaling):0,O=this.segments.prepareSegment(10*P,this.layoutVertexArray,this.indexArray);let U,W,X,te,oe;this.e1=this.e2=-1,S&&(U=r[P-2],oe=r[I].sub(U)._unit()._perp());for(let he=I;he<P;he++){if(X=he===P-1?S?r[I+1]:void 0:r[he+1],X&&r[he].equals(X))continue;oe&&(te=oe),U&&(W=U),U=r[he],oe=X?X.sub(U)._unit()._perp():te,te=te||oe;let we=te.add(oe);we.x===0&&we.y===0||we._unit();const pe=te.x*oe.x+te.y*oe.y,Se=we.x*oe.x+we.y*oe.y,Ce=Se!==0?1/Se:1/0,Oe=2*Math.sqrt(2-2*Se),lt=Se<oz&&W&&X,yt=te.x*oe.y-te.y*oe.x>0;if(lt&&he>I){const Xe=U.dist(W);if(Xe>2*D){const dt=U.sub(U.sub(W)._mult(D/Xe)._round());this.updateDistance(W,dt),this.addCurrentVertex(dt,te,0,0,O),W=dt}}const at=W&&X;let rt=at?d:S?"butt":m;if(at&&rt==="round"&&(Ce<_?rt="miter":Ce<=2&&(rt="fakeround")),rt==="miter"&&Ce>v&&(rt="bevel"),rt==="bevel"&&(Ce>2&&(rt="flipbevel"),Ce<v&&(rt="miter")),W&&this.updateDistance(W,U),rt==="miter")we._mult(Ce),this.addCurrentVertex(U,we,0,0,O);else if(rt==="flipbevel"){if(Ce>100)we=oe.mult(-1);else{const Xe=Ce*te.add(oe).mag()/te.sub(oe).mag();we._perp()._mult(Xe*(yt?-1:1))}this.addCurrentVertex(U,we,0,0,O),this.addCurrentVertex(U,we.mult(-1),0,0,O)}else if(rt==="bevel"||rt==="fakeround"){const Xe=-Math.sqrt(Ce*Ce-1),dt=yt?Xe:0,Ye=yt?0:Xe;if(W&&this.addCurrentVertex(U,te,dt,Ye,O),rt==="fakeround"){const Ze=Math.round(180*Oe/Math.PI/20);for(let Tt=1;Tt<Ze;Tt++){let xt=Tt/Ze;if(xt!==.5){const mn=xt-.5;xt+=xt*mn*(xt-1)*((1.0904+pe*(pe*(3.55645-1.43519*pe)-3.2452))*mn*mn+(.848013+pe*(.215638*pe-1.06021)))}const Vt=oe.sub(te)._mult(xt)._add(te)._unit()._mult(yt?-1:1);this.addHalfVertex(U,Vt.x,Vt.y,!1,yt,0,O)}}X&&this.addCurrentVertex(U,oe,-dt,-Ye,O)}else if(rt==="butt")this.addCurrentVertex(U,we,0,0,O);else if(rt==="square"){const Xe=W?1:-1;this.addCurrentVertex(U,we,Xe,Xe,O)}else rt==="round"&&(W&&(this.addCurrentVertex(U,te,0,0,O),this.addCurrentVertex(U,te,1,1,O,!0)),X&&(this.addCurrentVertex(U,oe,-1,-1,O,!0),this.addCurrentVertex(U,oe,0,0,O)));if(lt&&he<P-1){const Xe=U.dist(X);if(Xe>2*D){const dt=U.add(X.sub(U)._mult(D/Xe)._round());this.updateDistance(U,dt),this.addCurrentVertex(dt,oe,0,0,O),U=dt}}}}addCurrentVertex(r,l,d,m,v,_=!1){const S=l.y*m-l.x,P=-l.y-l.x*m;this.addHalfVertex(r,l.x+l.y*d,l.y-l.x*d,_,!1,d,v),this.addHalfVertex(r,S,P,_,!0,-m,v),this.distance>pS/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(r,l,d,m,v,_))}addHalfVertex({x:r,y:l},d,m,v,_,S,P){const I=.5*(this.lineClips?this.scaledDistance*(pS-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((r<<1)+(v?1:0),(l<<1)+(_?1:0),Math.round(63*d)+128,Math.round(63*m)+128,1+(S===0?0:S<0?-1:1)|(63&I)<<2,I>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const D=P.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,D),P.primitiveLength++),_?this.e2=D:this.e1=D}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(r,l){this.distance+=r.dist(l),this.updateScaledDistance()}}let mS,gS;ht("LineBucket",Kv,{omit:["layers","patternFeatures"]});var yS={get paint(){return gS=gS||new jn({"line-opacity":new At(ue.paint_line["line-opacity"]),"line-color":new At(ue.paint_line["line-color"]),"line-translate":new wt(ue.paint_line["line-translate"]),"line-translate-anchor":new wt(ue.paint_line["line-translate-anchor"]),"line-width":new At(ue.paint_line["line-width"]),"line-gap-width":new At(ue.paint_line["line-gap-width"]),"line-offset":new At(ue.paint_line["line-offset"]),"line-blur":new At(ue.paint_line["line-blur"]),"line-dasharray":new Yh(ue.paint_line["line-dasharray"]),"line-pattern":new ql(ue.paint_line["line-pattern"]),"line-gradient":new Jh(ue.paint_line["line-gradient"])})},get layout(){return mS=mS||new jn({"line-cap":new wt(ue.layout_line["line-cap"]),"line-join":new At(ue.layout_line["line-join"]),"line-miter-limit":new wt(ue.layout_line["line-miter-limit"]),"line-round-limit":new wt(ue.layout_line["line-round-limit"]),"line-sort-key":new At(ue.layout_line["line-sort-key"])})}};class lz extends At{possiblyEvaluate(r,l){return l=new fn(Math.floor(l.zoom),{now:l.now,fadeDuration:l.fadeDuration,zoomHistory:l.zoomHistory,transition:l.transition}),super.possiblyEvaluate(r,l)}evaluate(r,l,d,m){return l=ve({},l,{zoom:Math.floor(l.zoom)}),super.evaluate(r,l,d,m)}}let Xp;class uz extends Fi{constructor(r){super(r,yS),this.gradientVersion=0,Xp||(Xp=new lz(yS.paint.properties["line-width"].specification),Xp.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(r){if(r==="line-gradient"){const l=this.gradientExpression();this.stepInterpolant=!!function(d){return d._styleExpression!==void 0}(l)&&l._styleExpression.expression instanceof da,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(r,l){super.recalculate(r,l),this.paint._values["line-floorwidth"]=Xp.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,r)}createBucket(r){return new Kv(r)}queryRadius(r){const l=r,d=vS(od("line-width",this,l),od("line-gap-width",this,l)),m=od("line-offset",this,l);return d/2+Math.abs(m)+Up(this.paint.get("line-translate"))}queryIntersectsFeature(r,l,d,m,v,_,S){const P=qp(r,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),_.angle,S),I=S/2*vS(this.paint.get("line-width").evaluate(l,d),this.paint.get("line-gap-width").evaluate(l,d)),D=this.paint.get("line-offset").evaluate(l,d);return D&&(m=function(O,U){const W=[];for(let X=0;X<O.length;X++){const te=O[X],oe=[];for(let he=0;he<te.length;he++){const we=te[he-1],pe=te[he],Se=te[he+1],Ce=he===0?new M(0,0):pe.sub(we)._unit()._perp(),Oe=he===te.length-1?new M(0,0):Se.sub(pe)._unit()._perp(),lt=Ce._add(Oe)._unit(),yt=lt.x*Oe.x+lt.y*Oe.y;yt!==0&&lt._mult(1/yt),oe.push(lt._mult(U)._add(pe))}W.push(oe)}return W}(m,D*S)),function(O,U,W){for(let X=0;X<U.length;X++){const te=U[X];if(O.length>=3){for(let oe=0;oe<te.length;oe++)if(ic(O,te[oe]))return!0}if(mL(O,te,W))return!0}return!1}(P,m,I)}isTileClipped(){return!0}}function vS(a,r){return r>0?r+2*a:a}const cz=Cn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),hz=Cn([{name:"a_projected_pos",components:3,type:"Float32"}],4);Cn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const dz=Cn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);Cn([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const xS=Cn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),fz=Cn([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function pz(a,r,l){return a.sections.forEach(d=>{d.text=function(m,v,_){const S=v.layout.get("text-transform").evaluate(_,{});return S==="uppercase"?m=m.toLocaleUpperCase():S==="lowercase"&&(m=m.toLocaleLowerCase()),yi.applyArabicShaping&&(m=yi.applyArabicShaping(m)),m}(d.text,r,l)}),a}Cn([{name:"triangle",components:3,type:"Uint16"}]),Cn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Cn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),Cn([{type:"Float32",name:"offsetX"}]),Cn([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),Cn([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const gd={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var nr=24,_S=ln,wS=function(a,r,l,d,m){var v,_,S=8*m-d-1,P=(1<<S)-1,I=P>>1,D=-7,O=l?m-1:0,U=l?-1:1,W=a[r+O];for(O+=U,v=W&(1<<-D)-1,W>>=-D,D+=S;D>0;v=256*v+a[r+O],O+=U,D-=8);for(_=v&(1<<-D)-1,v>>=-D,D+=d;D>0;_=256*_+a[r+O],O+=U,D-=8);if(v===0)v=1-I;else{if(v===P)return _?NaN:1/0*(W?-1:1);_+=Math.pow(2,d),v-=I}return(W?-1:1)*_*Math.pow(2,v-d)},bS=function(a,r,l,d,m,v){var _,S,P,I=8*v-m-1,D=(1<<I)-1,O=D>>1,U=m===23?Math.pow(2,-24)-Math.pow(2,-77):0,W=d?0:v-1,X=d?1:-1,te=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(S=isNaN(r)?1:0,_=D):(_=Math.floor(Math.log(r)/Math.LN2),r*(P=Math.pow(2,-_))<1&&(_--,P*=2),(r+=_+O>=1?U/P:U*Math.pow(2,1-O))*P>=2&&(_++,P/=2),_+O>=D?(S=0,_=D):_+O>=1?(S=(r*P-1)*Math.pow(2,m),_+=O):(S=r*Math.pow(2,O-1)*Math.pow(2,m),_=0));m>=8;a[l+W]=255&S,W+=X,S/=256,m-=8);for(_=_<<m|S,I+=m;I>0;a[l+W]=255&_,W+=X,_/=256,I-=8);a[l+W-X]|=128*te};function ln(a){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(a)?a:new Uint8Array(a||0),this.pos=0,this.type=0,this.length=this.buf.length}ln.Varint=0,ln.Fixed64=1,ln.Bytes=2,ln.Fixed32=5;var Xv=4294967296,SS=1/Xv,ES=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Ga(a){return a.type===ln.Bytes?a.readVarint()+a.pos:a.pos+1}function lc(a,r,l){return l?4294967296*r+(a>>>0):4294967296*(r>>>0)+(a>>>0)}function TS(a,r,l){var d=r<=16383?1:r<=2097151?2:r<=268435455?3:Math.floor(Math.log(r)/(7*Math.LN2));l.realloc(d);for(var m=l.pos-1;m>=a;m--)l.buf[m+d]=l.buf[m]}function mz(a,r){for(var l=0;l<a.length;l++)r.writeVarint(a[l])}function gz(a,r){for(var l=0;l<a.length;l++)r.writeSVarint(a[l])}function yz(a,r){for(var l=0;l<a.length;l++)r.writeFloat(a[l])}function vz(a,r){for(var l=0;l<a.length;l++)r.writeDouble(a[l])}function xz(a,r){for(var l=0;l<a.length;l++)r.writeBoolean(a[l])}function _z(a,r){for(var l=0;l<a.length;l++)r.writeFixed32(a[l])}function wz(a,r){for(var l=0;l<a.length;l++)r.writeSFixed32(a[l])}function bz(a,r){for(var l=0;l<a.length;l++)r.writeFixed64(a[l])}function Sz(a,r){for(var l=0;l<a.length;l++)r.writeSFixed64(a[l])}function Qp(a,r){return(a[r]|a[r+1]<<8|a[r+2]<<16)+16777216*a[r+3]}function uc(a,r,l){a[l]=r,a[l+1]=r>>>8,a[l+2]=r>>>16,a[l+3]=r>>>24}function CS(a,r){return(a[r]|a[r+1]<<8|a[r+2]<<16)+(a[r+3]<<24)}ln.prototype={destroy:function(){this.buf=null},readFields:function(a,r,l){for(l=l||this.length;this.pos<l;){var d=this.readVarint(),m=d>>3,v=this.pos;this.type=7&d,a(m,r,this),this.pos===v&&this.skip(d)}return r},readMessage:function(a,r){return this.readFields(a,r,this.readVarint()+this.pos)},readFixed32:function(){var a=Qp(this.buf,this.pos);return this.pos+=4,a},readSFixed32:function(){var a=CS(this.buf,this.pos);return this.pos+=4,a},readFixed64:function(){var a=Qp(this.buf,this.pos)+Qp(this.buf,this.pos+4)*Xv;return this.pos+=8,a},readSFixed64:function(){var a=Qp(this.buf,this.pos)+CS(this.buf,this.pos+4)*Xv;return this.pos+=8,a},readFloat:function(){var a=wS(this.buf,this.pos,!0,23,4);return this.pos+=4,a},readDouble:function(){var a=wS(this.buf,this.pos,!0,52,8);return this.pos+=8,a},readVarint:function(a){var r,l,d=this.buf;return r=127&(l=d[this.pos++]),l<128?r:(r|=(127&(l=d[this.pos++]))<<7,l<128?r:(r|=(127&(l=d[this.pos++]))<<14,l<128?r:(r|=(127&(l=d[this.pos++]))<<21,l<128?r:function(m,v,_){var S,P,I=_.buf;if(S=(112&(P=I[_.pos++]))>>4,P<128||(S|=(127&(P=I[_.pos++]))<<3,P<128)||(S|=(127&(P=I[_.pos++]))<<10,P<128)||(S|=(127&(P=I[_.pos++]))<<17,P<128)||(S|=(127&(P=I[_.pos++]))<<24,P<128)||(S|=(1&(P=I[_.pos++]))<<31,P<128))return lc(m,S,v);throw new Error("Expected varint not more than 10 bytes")}(r|=(15&(l=d[this.pos]))<<28,a,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var a=this.readVarint();return a%2==1?(a+1)/-2:a/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var a=this.readVarint()+this.pos,r=this.pos;return this.pos=a,a-r>=12&&ES?function(l,d,m){return ES.decode(l.subarray(d,m))}(this.buf,r,a):function(l,d,m){for(var v="",_=d;_<m;){var S,P,I,D=l[_],O=null,U=D>239?4:D>223?3:D>191?2:1;if(_+U>m)break;U===1?D<128&&(O=D):U===2?(192&(S=l[_+1]))==128&&(O=(31&D)<<6|63&S)<=127&&(O=null):U===3?(P=l[_+2],(192&(S=l[_+1]))==128&&(192&P)==128&&((O=(15&D)<<12|(63&S)<<6|63&P)<=2047||O>=55296&&O<=57343)&&(O=null)):U===4&&(P=l[_+2],I=l[_+3],(192&(S=l[_+1]))==128&&(192&P)==128&&(192&I)==128&&((O=(15&D)<<18|(63&S)<<12|(63&P)<<6|63&I)<=65535||O>=1114112)&&(O=null)),O===null?(O=65533,U=1):O>65535&&(O-=65536,v+=String.fromCharCode(O>>>10&1023|55296),O=56320|1023&O),v+=String.fromCharCode(O),_+=U}return v}(this.buf,r,a)},readBytes:function(){var a=this.readVarint()+this.pos,r=this.buf.subarray(this.pos,a);return this.pos=a,r},readPackedVarint:function(a,r){if(this.type!==ln.Bytes)return a.push(this.readVarint(r));var l=Ga(this);for(a=a||[];this.pos<l;)a.push(this.readVarint(r));return a},readPackedSVarint:function(a){if(this.type!==ln.Bytes)return a.push(this.readSVarint());var r=Ga(this);for(a=a||[];this.pos<r;)a.push(this.readSVarint());return a},readPackedBoolean:function(a){if(this.type!==ln.Bytes)return a.push(this.readBoolean());var r=Ga(this);for(a=a||[];this.pos<r;)a.push(this.readBoolean());return a},readPackedFloat:function(a){if(this.type!==ln.Bytes)return a.push(this.readFloat());var r=Ga(this);for(a=a||[];this.pos<r;)a.push(this.readFloat());return a},readPackedDouble:function(a){if(this.type!==ln.Bytes)return a.push(this.readDouble());var r=Ga(this);for(a=a||[];this.pos<r;)a.push(this.readDouble());return a},readPackedFixed32:function(a){if(this.type!==ln.Bytes)return a.push(this.readFixed32());var r=Ga(this);for(a=a||[];this.pos<r;)a.push(this.readFixed32());return a},readPackedSFixed32:function(a){if(this.type!==ln.Bytes)return a.push(this.readSFixed32());var r=Ga(this);for(a=a||[];this.pos<r;)a.push(this.readSFixed32());return a},readPackedFixed64:function(a){if(this.type!==ln.Bytes)return a.push(this.readFixed64());var r=Ga(this);for(a=a||[];this.pos<r;)a.push(this.readFixed64());return a},readPackedSFixed64:function(a){if(this.type!==ln.Bytes)return a.push(this.readSFixed64());var r=Ga(this);for(a=a||[];this.pos<r;)a.push(this.readSFixed64());return a},skip:function(a){var r=7&a;if(r===ln.Varint)for(;this.buf[this.pos++]>127;);else if(r===ln.Bytes)this.pos=this.readVarint()+this.pos;else if(r===ln.Fixed32)this.pos+=4;else{if(r!==ln.Fixed64)throw new Error("Unimplemented type: "+r);this.pos+=8}},writeTag:function(a,r){this.writeVarint(a<<3|r)},realloc:function(a){for(var r=this.length||16;r<this.pos+a;)r*=2;if(r!==this.length){var l=new Uint8Array(r);l.set(this.buf),this.buf=l,this.length=r}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(a){this.realloc(4),uc(this.buf,a,this.pos),this.pos+=4},writeSFixed32:function(a){this.realloc(4),uc(this.buf,a,this.pos),this.pos+=4},writeFixed64:function(a){this.realloc(8),uc(this.buf,-1&a,this.pos),uc(this.buf,Math.floor(a*SS),this.pos+4),this.pos+=8},writeSFixed64:function(a){this.realloc(8),uc(this.buf,-1&a,this.pos),uc(this.buf,Math.floor(a*SS),this.pos+4),this.pos+=8},writeVarint:function(a){(a=+a||0)>268435455||a<0?function(r,l){var d,m;if(r>=0?(d=r%4294967296|0,m=r/4294967296|0):(m=~(-r/4294967296),4294967295^(d=~(-r%4294967296))?d=d+1|0:(d=0,m=m+1|0)),r>=18446744073709552e3||r<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");l.realloc(10),function(v,_,S){S.buf[S.pos++]=127&v|128,v>>>=7,S.buf[S.pos++]=127&v|128,v>>>=7,S.buf[S.pos++]=127&v|128,v>>>=7,S.buf[S.pos++]=127&v|128,S.buf[S.pos]=127&(v>>>=7)}(d,0,l),function(v,_){var S=(7&v)<<4;_.buf[_.pos++]|=S|((v>>>=3)?128:0),v&&(_.buf[_.pos++]=127&v|((v>>>=7)?128:0),v&&(_.buf[_.pos++]=127&v|((v>>>=7)?128:0),v&&(_.buf[_.pos++]=127&v|((v>>>=7)?128:0),v&&(_.buf[_.pos++]=127&v|((v>>>=7)?128:0),v&&(_.buf[_.pos++]=127&v)))))}(m,l)}(a,this):(this.realloc(4),this.buf[this.pos++]=127&a|(a>127?128:0),a<=127||(this.buf[this.pos++]=127&(a>>>=7)|(a>127?128:0),a<=127||(this.buf[this.pos++]=127&(a>>>=7)|(a>127?128:0),a<=127||(this.buf[this.pos++]=a>>>7&127))))},writeSVarint:function(a){this.writeVarint(a<0?2*-a-1:2*a)},writeBoolean:function(a){this.writeVarint(!!a)},writeString:function(a){a=String(a),this.realloc(4*a.length),this.pos++;var r=this.pos;this.pos=function(d,m,v){for(var _,S,P=0;P<m.length;P++){if((_=m.charCodeAt(P))>55295&&_<57344){if(!S){_>56319||P+1===m.length?(d[v++]=239,d[v++]=191,d[v++]=189):S=_;continue}if(_<56320){d[v++]=239,d[v++]=191,d[v++]=189,S=_;continue}_=S-55296<<10|_-56320|65536,S=null}else S&&(d[v++]=239,d[v++]=191,d[v++]=189,S=null);_<128?d[v++]=_:(_<2048?d[v++]=_>>6|192:(_<65536?d[v++]=_>>12|224:(d[v++]=_>>18|240,d[v++]=_>>12&63|128),d[v++]=_>>6&63|128),d[v++]=63&_|128)}return v}(this.buf,a,this.pos);var l=this.pos-r;l>=128&&TS(r,l,this),this.pos=r-1,this.writeVarint(l),this.pos+=l},writeFloat:function(a){this.realloc(4),bS(this.buf,a,this.pos,!0,23,4),this.pos+=4},writeDouble:function(a){this.realloc(8),bS(this.buf,a,this.pos,!0,52,8),this.pos+=8},writeBytes:function(a){var r=a.length;this.writeVarint(r),this.realloc(r);for(var l=0;l<r;l++)this.buf[this.pos++]=a[l]},writeRawMessage:function(a,r){this.pos++;var l=this.pos;a(r,this);var d=this.pos-l;d>=128&&TS(l,d,this),this.pos=l-1,this.writeVarint(d),this.pos+=d},writeMessage:function(a,r,l){this.writeTag(a,ln.Bytes),this.writeRawMessage(r,l)},writePackedVarint:function(a,r){r.length&&this.writeMessage(a,mz,r)},writePackedSVarint:function(a,r){r.length&&this.writeMessage(a,gz,r)},writePackedBoolean:function(a,r){r.length&&this.writeMessage(a,xz,r)},writePackedFloat:function(a,r){r.length&&this.writeMessage(a,yz,r)},writePackedDouble:function(a,r){r.length&&this.writeMessage(a,vz,r)},writePackedFixed32:function(a,r){r.length&&this.writeMessage(a,_z,r)},writePackedSFixed32:function(a,r){r.length&&this.writeMessage(a,wz,r)},writePackedFixed64:function(a,r){r.length&&this.writeMessage(a,bz,r)},writePackedSFixed64:function(a,r){r.length&&this.writeMessage(a,Sz,r)},writeBytesField:function(a,r){this.writeTag(a,ln.Bytes),this.writeBytes(r)},writeFixed32Field:function(a,r){this.writeTag(a,ln.Fixed32),this.writeFixed32(r)},writeSFixed32Field:function(a,r){this.writeTag(a,ln.Fixed32),this.writeSFixed32(r)},writeFixed64Field:function(a,r){this.writeTag(a,ln.Fixed64),this.writeFixed64(r)},writeSFixed64Field:function(a,r){this.writeTag(a,ln.Fixed64),this.writeSFixed64(r)},writeVarintField:function(a,r){this.writeTag(a,ln.Varint),this.writeVarint(r)},writeSVarintField:function(a,r){this.writeTag(a,ln.Varint),this.writeSVarint(r)},writeStringField:function(a,r){this.writeTag(a,ln.Bytes),this.writeString(r)},writeFloatField:function(a,r){this.writeTag(a,ln.Fixed32),this.writeFloat(r)},writeDoubleField:function(a,r){this.writeTag(a,ln.Fixed64),this.writeDouble(r)},writeBooleanField:function(a,r){this.writeVarintField(a,!!r)}};var Qv=b(_S);const Yv=3;function Ez(a,r,l){a===1&&l.readMessage(Tz,r)}function Tz(a,r,l){if(a===3){const{id:d,bitmap:m,width:v,height:_,left:S,top:P,advance:I}=l.readMessage(Cz,{});r.push({id:d,bitmap:new ud({width:v+2*Yv,height:_+2*Yv},m),metrics:{width:v,height:_,left:S,top:P,advance:I}})}}function Cz(a,r,l){a===1?r.id=l.readVarint():a===2?r.bitmap=l.readBytes():a===3?r.width=l.readVarint():a===4?r.height=l.readVarint():a===5?r.left=l.readSVarint():a===6?r.top=l.readSVarint():a===7&&(r.advance=l.readVarint())}const PS=Yv;function AS(a){let r=0,l=0;for(const _ of a)r+=_.w*_.h,l=Math.max(l,_.w);a.sort((_,S)=>S.h-_.h);const d=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(r/.95)),l),h:1/0}];let m=0,v=0;for(const _ of a)for(let S=d.length-1;S>=0;S--){const P=d[S];if(!(_.w>P.w||_.h>P.h)){if(_.x=P.x,_.y=P.y,v=Math.max(v,_.y+_.h),m=Math.max(m,_.x+_.w),_.w===P.w&&_.h===P.h){const I=d.pop();S<d.length&&(d[S]=I)}else _.h===P.h?(P.x+=_.w,P.w-=_.w):_.w===P.w?(P.y+=_.h,P.h-=_.h):(d.push({x:P.x+_.w,y:P.y,w:P.w-_.w,h:_.h}),P.y+=_.h,P.h-=_.h);break}}return{w:m,h:v,fill:r/(m*v)||0}}const xi=1;class Jv{constructor(r,{pixelRatio:l,version:d,stretchX:m,stretchY:v,content:_}){this.paddedRect=r,this.pixelRatio=l,this.stretchX=m,this.stretchY=v,this.content=_,this.version=d}get tl(){return[this.paddedRect.x+xi,this.paddedRect.y+xi]}get br(){return[this.paddedRect.x+this.paddedRect.w-xi,this.paddedRect.y+this.paddedRect.h-xi]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*xi)/this.pixelRatio,(this.paddedRect.h-2*xi)/this.pixelRatio]}}class kS{constructor(r,l){const d={},m={};this.haveRenderCallbacks=[];const v=[];this.addImages(r,d,v),this.addImages(l,m,v);const{w:_,h:S}=AS(v),P=new Wi({width:_||1,height:S||1});for(const I in r){const D=r[I],O=d[I].paddedRect;Wi.copy(D.data,P,{x:0,y:0},{x:O.x+xi,y:O.y+xi},D.data)}for(const I in l){const D=l[I],O=m[I].paddedRect,U=O.x+xi,W=O.y+xi,X=D.data.width,te=D.data.height;Wi.copy(D.data,P,{x:0,y:0},{x:U,y:W},D.data),Wi.copy(D.data,P,{x:0,y:te-1},{x:U,y:W-1},{width:X,height:1}),Wi.copy(D.data,P,{x:0,y:0},{x:U,y:W+te},{width:X,height:1}),Wi.copy(D.data,P,{x:X-1,y:0},{x:U-1,y:W},{width:1,height:te}),Wi.copy(D.data,P,{x:0,y:0},{x:U+X,y:W},{width:1,height:te})}this.image=P,this.iconPositions=d,this.patternPositions=m}addImages(r,l,d){for(const m in r){const v=r[m],_={x:0,y:0,w:v.data.width+2*xi,h:v.data.height+2*xi};d.push(_),l[m]=new Jv(_,v),v.hasRenderCallback&&this.haveRenderCallbacks.push(m)}}patchUpdatedImages(r,l){r.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const d in r.updatedImages)this.patchUpdatedImage(this.iconPositions[d],r.getImage(d),l),this.patchUpdatedImage(this.patternPositions[d],r.getImage(d),l)}patchUpdatedImage(r,l,d){if(!r||!l||r.version===l.version)return;r.version=l.version;const[m,v]=r.tl;d.update(l.data,void 0,{x:m,y:v})}}var No;ht("ImagePosition",Jv),ht("ImageAtlas",kS),o.ai=void 0,(No=o.ai||(o.ai={}))[No.none=0]="none",No[No.horizontal=1]="horizontal",No[No.vertical=2]="vertical",No[No.horizontalOnly=3]="horizontalOnly";const yd=-17;class vd{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(r,l){const d=new vd;return d.scale=r||1,d.fontStack=l,d}static forImage(r){const l=new vd;return l.imageName=r,l}}class cc{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(r,l){const d=new cc;for(let m=0;m<r.sections.length;m++){const v=r.sections[m];v.image?d.addImageSection(v):d.addTextSection(v,l)}return d}length(){return this.text.length}getSection(r){return this.sections[this.sectionIndex[r]]}getSectionIndex(r){return this.sectionIndex[r]}getCharCode(r){return this.text.charCodeAt(r)}verticalizePunctuation(){this.text=function(r){let l="";for(let d=0;d<r.length;d++){const m=r.charCodeAt(d+1)||null,v=r.charCodeAt(d-1)||null;l+=m&&Rp(m)&&!gd[r[d+1]]||v&&Rp(v)&&!gd[r[d-1]]||!gd[r[d]]?r[d]:gd[r[d]]}return l}(this.text)}trim(){let r=0;for(let d=0;d<this.text.length&&Jp[this.text.charCodeAt(d)];d++)r++;let l=this.text.length;for(let d=this.text.length-1;d>=0&&d>=r&&Jp[this.text.charCodeAt(d)];d--)l--;this.text=this.text.substring(r,l),this.sectionIndex=this.sectionIndex.slice(r,l)}substring(r,l){const d=new cc;return d.text=this.text.substring(r,l),d.sectionIndex=this.sectionIndex.slice(r,l),d.sections=this.sections,d}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((r,l)=>Math.max(r,this.sections[l].scale),0)}addTextSection(r,l){this.text+=r.text,this.sections.push(vd.forText(r.scale,r.fontStack||l));const d=this.sections.length-1;for(let m=0;m<r.text.length;++m)this.sectionIndex.push(d)}addImageSection(r){const l=r.image?r.image.name:"";if(l.length===0)return void ut("Can't add FormattedSection with an empty image.");const d=this.getNextImageSectionCharCode();d?(this.text+=String.fromCharCode(d),this.sections.push(vd.forImage(l)),this.sectionIndex.push(this.sections.length-1)):ut("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Yp(a,r,l,d,m,v,_,S,P,I,D,O,U,W,X,te){const oe=cc.fromFeature(a,m);let he;O===o.ai.vertical&&oe.verticalizePunctuation();const{processBidirectionalText:we,processStyledBidirectionalText:pe}=yi;if(we&&oe.sections.length===1){he=[];const Oe=we(oe.toString(),ex(oe,I,v,r,d,W,X));for(const lt of Oe){const yt=new cc;yt.text=lt,yt.sections=oe.sections;for(let at=0;at<lt.length;at++)yt.sectionIndex.push(0);he.push(yt)}}else if(pe){he=[];const Oe=pe(oe.text,oe.sectionIndex,ex(oe,I,v,r,d,W,X));for(const lt of Oe){const yt=new cc;yt.text=lt[0],yt.sectionIndex=lt[1],yt.sections=oe.sections,he.push(yt)}}else he=function(Oe,lt){const yt=[],at=Oe.text;let rt=0;for(const Xe of lt)yt.push(Oe.substring(rt,Xe)),rt=Xe;return rt<at.length&&yt.push(Oe.substring(rt,at.length)),yt}(oe,ex(oe,I,v,r,d,W,X));const Se=[],Ce={positionedLines:Se,text:oe.toString(),top:D[1],bottom:D[1],left:D[0],right:D[0],writingMode:O,iconsInText:!1,verticalizable:!1};return function(Oe,lt,yt,at,rt,Xe,dt,Ye,Ze,Tt,xt,Vt){let mn=0,bn=yd,rr=0,Bi=0;const Jr=Ye==="right"?1:Ye==="left"?0:.5;let Qn=0;for(const ir of rt){ir.trim();const sr=ir.getMaxScale(),zr=(sr-1)*nr,ni={positionedGlyphs:[],lineOffset:0};Oe.positionedLines[Qn]=ni;const Or=ni.positionedGlyphs;let _i=0;if(!ir.length()){bn+=Xe,++Qn;continue}for(let ar=0;ar<ir.length();ar++){const Gt=ir.getSection(ar),Fr=ir.getSectionIndex(ar),Ar=ir.getCharCode(ar);let or=0,xs=null,Us=null,qs=null,Za=nr;const _s=!(Ze===o.ai.horizontal||!xt&&!qh(Ar)||xt&&(Jp[Ar]||(vr=Ar,ot.Arabic(vr)||ot["Arabic Supplement"](vr)||ot["Arabic Extended-A"](vr)||ot["Arabic Presentation Forms-A"](vr)||ot["Arabic Presentation Forms-B"](vr))));if(Gt.imageName){const Ki=at[Gt.imageName];if(!Ki)continue;qs=Gt.imageName,Oe.iconsInText=Oe.iconsInText||!0,Us=Ki.paddedRect;const bi=Ki.displaySize;Gt.scale=Gt.scale*nr/Vt,xs={width:bi[0],height:bi[1],left:xi,top:-PS,advance:_s?bi[1]:bi[0]},or=zr+(nr-bi[1]*Gt.scale),Za=xs.advance;const Wa=_s?bi[0]*Gt.scale-nr*sr:bi[1]*Gt.scale-nr*sr;Wa>0&&Wa>_i&&(_i=Wa)}else{const Ki=yt[Gt.fontStack],bi=Ki&&Ki[Ar];if(bi&&bi.rect)Us=bi.rect,xs=bi.metrics;else{const Wa=lt[Gt.fontStack],Sd=Wa&&Wa[Ar];if(!Sd)continue;xs=Sd.metrics}or=(sr-Gt.scale)*nr}_s?(Oe.verticalizable=!0,Or.push({glyph:Ar,imageName:qs,x:mn,y:bn+or,vertical:_s,scale:Gt.scale,fontStack:Gt.fontStack,sectionIndex:Fr,metrics:xs,rect:Us}),mn+=Za*Gt.scale+Tt):(Or.push({glyph:Ar,imageName:qs,x:mn,y:bn+or,vertical:_s,scale:Gt.scale,fontStack:Gt.fontStack,sectionIndex:Fr,metrics:xs,rect:Us}),mn+=xs.advance*Gt.scale+Tt)}Or.length!==0&&(rr=Math.max(mn-Tt,rr),kz(Or,0,Or.length-1,Jr,_i)),mn=0;const wi=Xe*sr+_i;ni.lineOffset=Math.max(_i,zr),bn+=wi,Bi=Math.max(wi,Bi),++Qn}var vr;const Pr=bn-yd,{horizontalAlign:ei,verticalAlign:ti}=tx(dt);(function(ir,sr,zr,ni,Or,_i,wi,ar,Gt){const Fr=(sr-zr)*Or;let Ar=0;Ar=_i!==wi?-ar*ni-yd:(-ni*Gt+.5)*wi;for(const or of ir)for(const xs of or.positionedGlyphs)xs.x+=Fr,xs.y+=Ar})(Oe.positionedLines,Jr,ei,ti,rr,Bi,Xe,Pr,rt.length),Oe.top+=-ti*Pr,Oe.bottom=Oe.top+Pr,Oe.left+=-ei*rr,Oe.right=Oe.left+rr}(Ce,r,l,d,he,_,S,P,O,I,U,te),!function(Oe){for(const lt of Oe)if(lt.positionedGlyphs.length!==0)return!1;return!0}(Se)&&Ce}const Jp={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Pz={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function IS(a,r,l,d,m,v){if(r.imageName){const _=d[r.imageName];return _?_.displaySize[0]*r.scale*nr/v+m:0}{const _=l[r.fontStack],S=_&&_[a];return S?S.metrics.advance*r.scale+m:0}}function MS(a,r,l,d){const m=Math.pow(a-r,2);return d?a<r?m/2:2*m:m+Math.abs(l)*l}function Az(a,r,l){let d=0;return a===10&&(d-=1e4),l&&(d+=150),a!==40&&a!==65288||(d+=50),r!==41&&r!==65289||(d+=50),d}function RS(a,r,l,d,m,v){let _=null,S=MS(r,l,m,v);for(const P of d){const I=MS(r-P.x,l,m,v)+P.badness;I<=S&&(_=P,S=I)}return{index:a,x:r,priorBreak:_,badness:S}}function DS(a){return a?DS(a.priorBreak).concat(a.index):[]}function ex(a,r,l,d,m,v,_){if(v!=="point")return[];if(!a)return[];const S=[],P=function(U,W,X,te,oe,he){let we=0;for(let pe=0;pe<U.length();pe++){const Se=U.getSection(pe);we+=IS(U.getCharCode(pe),Se,te,oe,W,he)}return we/Math.max(1,Math.ceil(we/X))}(a,r,l,d,m,_),I=a.text.indexOf("​")>=0;let D=0;for(let U=0;U<a.length();U++){const W=a.getSection(U),X=a.getCharCode(U);if(Jp[X]||(D+=IS(X,W,d,m,r,_)),U<a.length()-1){const te=!((O=X)<11904||!(ot["Bopomofo Extended"](O)||ot.Bopomofo(O)||ot["CJK Compatibility Forms"](O)||ot["CJK Compatibility Ideographs"](O)||ot["CJK Compatibility"](O)||ot["CJK Radicals Supplement"](O)||ot["CJK Strokes"](O)||ot["CJK Symbols and Punctuation"](O)||ot["CJK Unified Ideographs Extension A"](O)||ot["CJK Unified Ideographs"](O)||ot["Enclosed CJK Letters and Months"](O)||ot["Halfwidth and Fullwidth Forms"](O)||ot.Hiragana(O)||ot["Ideographic Description Characters"](O)||ot["Kangxi Radicals"](O)||ot["Katakana Phonetic Extensions"](O)||ot.Katakana(O)||ot["Vertical Forms"](O)||ot["Yi Radicals"](O)||ot["Yi Syllables"](O)));(Pz[X]||te||W.imageName)&&S.push(RS(U+1,D,P,S,Az(X,a.getCharCode(U+1),te&&I),!1))}}var O;return DS(RS(a.length(),D,P,S,0,!0))}function tx(a){let r=.5,l=.5;switch(a){case"right":case"top-right":case"bottom-right":r=1;break;case"left":case"top-left":case"bottom-left":r=0}switch(a){case"bottom":case"bottom-right":case"bottom-left":l=1;break;case"top":case"top-right":case"top-left":l=0}return{horizontalAlign:r,verticalAlign:l}}function kz(a,r,l,d,m){if(!d&&!m)return;const v=a[l],_=(a[l].x+v.metrics.advance*v.scale)*d;for(let S=r;S<=l;S++)a[S].x-=_,a[S].y+=m}function Iz(a,r,l){const{horizontalAlign:d,verticalAlign:m}=tx(l),v=r[0]-a.displaySize[0]*d,_=r[1]-a.displaySize[1]*m;return{image:a,top:_,bottom:_+a.displaySize[1],left:v,right:v+a.displaySize[0]}}function LS(a,r,l,d,m,v){const _=a.image;let S;if(_.content){const oe=_.content,he=_.pixelRatio||1;S=[oe[0]/he,oe[1]/he,_.displaySize[0]-oe[2]/he,_.displaySize[1]-oe[3]/he]}const P=r.left*v,I=r.right*v;let D,O,U,W;l==="width"||l==="both"?(W=m[0]+P-d[3],O=m[0]+I+d[1]):(W=m[0]+(P+I-_.displaySize[0])/2,O=W+_.displaySize[0]);const X=r.top*v,te=r.bottom*v;return l==="height"||l==="both"?(D=m[1]+X-d[0],U=m[1]+te+d[2]):(D=m[1]+(X+te-_.displaySize[1])/2,U=D+_.displaySize[1]),{image:_,top:D,right:O,bottom:U,left:W,collisionPadding:S}}const xd=255,ya=128,Bo=xd*ya;function zS(a,r){const{expression:l}=r;if(l.kind==="constant")return{kind:"constant",layoutSize:l.evaluate(new fn(a+1))};if(l.kind==="source")return{kind:"source"};{const{zoomStops:d,interpolationType:m}=l;let v=0;for(;v<d.length&&d[v]<=a;)v++;v=Math.max(0,v-1);let _=v;for(;_<d.length&&d[_]<a+1;)_++;_=Math.min(d.length-1,_);const S=d[v],P=d[_];return l.kind==="composite"?{kind:"composite",minZoom:S,maxZoom:P,interpolationType:m}:{kind:"camera",minZoom:S,maxZoom:P,minSize:l.evaluate(new fn(S)),maxSize:l.evaluate(new fn(P)),interpolationType:m}}}function nx(a,r,l){let d="never";const m=a.get(r);return m?d=m:a.get(l)&&(d="always"),d}const Mz=Fo.VectorTileFeature.types,Rz=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function em(a,r,l,d,m,v,_,S,P,I,D,O,U){const W=S?Math.min(Bo,Math.round(S[0])):0,X=S?Math.min(Bo,Math.round(S[1])):0;a.emplaceBack(r,l,Math.round(32*d),Math.round(32*m),v,_,(W<<1)+(P?1:0),X,16*I,16*D,256*O,256*U)}function rx(a,r,l){a.emplaceBack(r.x,r.y,l),a.emplaceBack(r.x,r.y,l),a.emplaceBack(r.x,r.y,l),a.emplaceBack(r.x,r.y,l)}function Dz(a){for(const r of a.sections)if(kv(r.text))return!0;return!1}class ix{constructor(r){this.layoutVertexArray=new jt,this.indexArray=new gr,this.programConfigurations=r,this.segments=new pn,this.dynamicLayoutVertexArray=new Ft,this.opacityVertexArray=new qt,this.hasVisibleVertices=!1,this.placedSymbolArray=new ye}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(r,l,d,m){this.isEmpty()||(d&&(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,cz.members),this.indexBuffer=r.createIndexBuffer(this.indexArray,l),this.dynamicLayoutVertexBuffer=r.createVertexBuffer(this.dynamicLayoutVertexArray,hz.members,!0),this.opacityVertexBuffer=r.createVertexBuffer(this.opacityVertexArray,Rz,!0),this.opacityVertexBuffer.itemSize=1),(d||m)&&this.programConfigurations.upload(r))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}ht("SymbolBuffers",ix);class sx{constructor(r,l,d){this.layoutVertexArray=new r,this.layoutAttributes=l,this.indexArray=new d,this.segments=new pn,this.collisionVertexArray=new cn}upload(r){this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=r.createVertexBuffer(this.collisionVertexArray,dz.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}ht("CollisionBuffers",sx);class hc{constructor(r){this.collisionBoxArray=r.collisionBoxArray,this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(_=>_.id),this.index=r.index,this.pixelRatio=r.pixelRatio,this.sourceLayerIndex=r.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Ov([]),this.placementViewportMatrix=Ov([]);const l=this.layers[0]._unevaluatedLayout._values;this.textSizeData=zS(this.zoom,l["text-size"]),this.iconSizeData=zS(this.zoom,l["icon-size"]);const d=this.layers[0].layout,m=d.get("symbol-sort-key"),v=d.get("symbol-z-order");this.canOverlap=nx(d,"text-overlap","text-allow-overlap")!=="never"||nx(d,"icon-overlap","icon-allow-overlap")!=="never"||d.get("text-ignore-placement")||d.get("icon-ignore-placement"),this.sortFeaturesByKey=v!=="viewport-y"&&!m.isConstant(),this.sortFeaturesByY=(v==="viewport-y"||v==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,d.get("symbol-placement")==="point"&&(this.writingModes=d.get("text-writing-mode").map(_=>o.ai[_])),this.stateDependentLayerIds=this.layers.filter(_=>_.isStateDependent()).map(_=>_.id),this.sourceID=r.sourceID}createArrays(){this.text=new ix(new $s(this.layers,this.zoom,r=>/^text/.test(r))),this.icon=new ix(new $s(this.layers,this.zoom,r=>/^icon/.test(r))),this.glyphOffsetArray=new xe,this.lineVertexArray=new Ae,this.symbolInstances=new ce,this.textAnchorOffsets=new ze}calculateGlyphDependencies(r,l,d,m,v){for(let _=0;_<r.length;_++)if(l[r.charCodeAt(_)]=!0,(d||m)&&v){const S=gd[r.charAt(_)];S&&(l[S.charCodeAt(0)]=!0)}}populate(r,l,d){const m=this.layers[0],v=m.layout,_=v.get("text-font"),S=v.get("text-field"),P=v.get("icon-image"),I=(S.value.kind!=="constant"||S.value.value instanceof Er&&!S.value.value.isEmpty()||S.value.value.toString().length>0)&&(_.value.kind!=="constant"||_.value.value.length>0),D=P.value.kind!=="constant"||!!P.value.value||Object.keys(P.parameters).length>0,O=v.get("symbol-sort-key");if(this.features=[],!I&&!D)return;const U=l.iconDependencies,W=l.glyphDependencies,X=l.availableImages,te=new fn(this.zoom);for(const{feature:oe,id:he,index:we,sourceLayerIndex:pe}of r){const Se=m._featureFilter.needGeometry,Ce=Hl(oe,Se);if(!m._featureFilter.filter(te,Ce,d))continue;let Oe,lt;if(Se||(Ce.geometry=Wl(oe)),I){const at=m.getValueAndResolveTokens("text-field",Ce,d,X),rt=Er.factory(at);Dz(rt)&&(this.hasRTLText=!0),(!this.hasRTLText||Xh()==="unavailable"||this.hasRTLText&&yi.isParsed())&&(Oe=pz(rt,m,Ce))}if(D){const at=m.getValueAndResolveTokens("icon-image",Ce,d,X);lt=at instanceof mr?at:mr.fromString(at)}if(!Oe&&!lt)continue;const yt=this.sortFeaturesByKey?O.evaluate(Ce,{},d):void 0;if(this.features.push({id:he,text:Oe,icon:lt,index:we,sourceLayerIndex:pe,geometry:Ce.geometry,properties:oe.properties,type:Mz[oe.type],sortKey:yt}),lt&&(U[lt.name]=!0),Oe){const at=_.evaluate(Ce,{},d).join(","),rt=v.get("text-rotation-alignment")!=="viewport"&&v.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(o.ai.vertical)>=0;for(const Xe of Oe.sections)if(Xe.image)U[Xe.image.name]=!0;else{const dt=$h(Oe.toString()),Ye=Xe.fontStack||at,Ze=W[Ye]=W[Ye]||{};this.calculateGlyphDependencies(Xe.text,Ze,rt,this.allowVerticalPlacement,dt)}}}v.get("symbol-placement")==="line"&&(this.features=function(oe){const he={},we={},pe=[];let Se=0;function Ce(at){pe.push(oe[at]),Se++}function Oe(at,rt,Xe){const dt=we[at];return delete we[at],we[rt]=dt,pe[dt].geometry[0].pop(),pe[dt].geometry[0]=pe[dt].geometry[0].concat(Xe[0]),dt}function lt(at,rt,Xe){const dt=he[rt];return delete he[rt],he[at]=dt,pe[dt].geometry[0].shift(),pe[dt].geometry[0]=Xe[0].concat(pe[dt].geometry[0]),dt}function yt(at,rt,Xe){const dt=Xe?rt[0][rt[0].length-1]:rt[0][0];return`${at}:${dt.x}:${dt.y}`}for(let at=0;at<oe.length;at++){const rt=oe[at],Xe=rt.geometry,dt=rt.text?rt.text.toString():null;if(!dt){Ce(at);continue}const Ye=yt(dt,Xe),Ze=yt(dt,Xe,!0);if(Ye in we&&Ze in he&&we[Ye]!==he[Ze]){const Tt=lt(Ye,Ze,Xe),xt=Oe(Ye,Ze,pe[Tt].geometry);delete he[Ye],delete we[Ze],we[yt(dt,pe[xt].geometry,!0)]=xt,pe[Tt].geometry=null}else Ye in we?Oe(Ye,Ze,Xe):Ze in he?lt(Ye,Ze,Xe):(Ce(at),he[Ye]=Se-1,we[Ze]=Se-1)}return pe.filter(at=>at.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((oe,he)=>oe.sortKey-he.sortKey)}update(r,l,d){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(r,l,this.layers,d),this.icon.programConfigurations.updatePaintArrays(r,l,this.layers,d))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(r){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(r),this.iconCollisionBox.upload(r)),this.text.upload(r,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(r,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(r,l){const d=this.lineVertexArray.length;if(r.segment!==void 0){let m=r.dist(l[r.segment+1]),v=r.dist(l[r.segment]);const _={};for(let S=r.segment+1;S<l.length;S++)_[S]={x:l[S].x,y:l[S].y,tileUnitDistanceFromAnchor:m},S<l.length-1&&(m+=l[S+1].dist(l[S]));for(let S=r.segment||0;S>=0;S--)_[S]={x:l[S].x,y:l[S].y,tileUnitDistanceFromAnchor:v},S>0&&(v+=l[S-1].dist(l[S]));for(let S=0;S<l.length;S++){const P=_[S];this.lineVertexArray.emplaceBack(P.x,P.y,P.tileUnitDistanceFromAnchor)}}return{lineStartIndex:d,lineLength:this.lineVertexArray.length-d}}addSymbols(r,l,d,m,v,_,S,P,I,D,O,U){const W=r.indexArray,X=r.layoutVertexArray,te=r.segments.prepareSegment(4*l.length,X,W,this.canOverlap?_.sortKey:void 0),oe=this.glyphOffsetArray.length,he=te.vertexLength,we=this.allowVerticalPlacement&&S===o.ai.vertical?Math.PI/2:0,pe=_.text&&_.text.sections;for(let Se=0;Se<l.length;Se++){const{tl:Ce,tr:Oe,bl:lt,br:yt,tex:at,pixelOffsetTL:rt,pixelOffsetBR:Xe,minFontScaleX:dt,minFontScaleY:Ye,glyphOffset:Ze,isSDF:Tt,sectionIndex:xt}=l[Se],Vt=te.vertexLength,mn=Ze[1];em(X,P.x,P.y,Ce.x,mn+Ce.y,at.x,at.y,d,Tt,rt.x,rt.y,dt,Ye),em(X,P.x,P.y,Oe.x,mn+Oe.y,at.x+at.w,at.y,d,Tt,Xe.x,rt.y,dt,Ye),em(X,P.x,P.y,lt.x,mn+lt.y,at.x,at.y+at.h,d,Tt,rt.x,Xe.y,dt,Ye),em(X,P.x,P.y,yt.x,mn+yt.y,at.x+at.w,at.y+at.h,d,Tt,Xe.x,Xe.y,dt,Ye),rx(r.dynamicLayoutVertexArray,P,we),W.emplaceBack(Vt,Vt+1,Vt+2),W.emplaceBack(Vt+1,Vt+2,Vt+3),te.vertexLength+=4,te.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Ze[0]),Se!==l.length-1&&xt===l[Se+1].sectionIndex||r.programConfigurations.populatePaintArrays(X.length,_,_.index,{},U,pe&&pe[xt])}r.placedSymbolArray.emplaceBack(P.x,P.y,oe,this.glyphOffsetArray.length-oe,he,I,D,P.segment,d?d[0]:0,d?d[1]:0,m[0],m[1],S,0,!1,0,O)}_addCollisionDebugVertex(r,l,d,m,v,_){return l.emplaceBack(0,0),r.emplaceBack(d.x,d.y,m,v,Math.round(_.x),Math.round(_.y))}addCollisionDebugVertices(r,l,d,m,v,_,S){const P=v.segments.prepareSegment(4,v.layoutVertexArray,v.indexArray),I=P.vertexLength,D=v.layoutVertexArray,O=v.collisionVertexArray,U=S.anchorX,W=S.anchorY;this._addCollisionDebugVertex(D,O,_,U,W,new M(r,l)),this._addCollisionDebugVertex(D,O,_,U,W,new M(d,l)),this._addCollisionDebugVertex(D,O,_,U,W,new M(d,m)),this._addCollisionDebugVertex(D,O,_,U,W,new M(r,m)),P.vertexLength+=4;const X=v.indexArray;X.emplaceBack(I,I+1),X.emplaceBack(I+1,I+2),X.emplaceBack(I+2,I+3),X.emplaceBack(I+3,I),P.primitiveLength+=4}addDebugCollisionBoxes(r,l,d,m){for(let v=r;v<l;v++){const _=this.collisionBoxArray.get(v);this.addCollisionDebugVertices(_.x1,_.y1,_.x2,_.y2,m?this.textCollisionBox:this.iconCollisionBox,_.anchorPoint,d)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new sx(On,xS.members,er),this.iconCollisionBox=new sx(On,xS.members,er);for(let r=0;r<this.symbolInstances.length;r++){const l=this.symbolInstances.get(r);this.addDebugCollisionBoxes(l.textBoxStartIndex,l.textBoxEndIndex,l,!0),this.addDebugCollisionBoxes(l.verticalTextBoxStartIndex,l.verticalTextBoxEndIndex,l,!0),this.addDebugCollisionBoxes(l.iconBoxStartIndex,l.iconBoxEndIndex,l,!1),this.addDebugCollisionBoxes(l.verticalIconBoxStartIndex,l.verticalIconBoxEndIndex,l,!1)}}_deserializeCollisionBoxesForSymbol(r,l,d,m,v,_,S,P,I){const D={};for(let O=l;O<d;O++){const U=r.get(O);D.textBox={x1:U.x1,y1:U.y1,x2:U.x2,y2:U.y2,anchorPointX:U.anchorPointX,anchorPointY:U.anchorPointY},D.textFeatureIndex=U.featureIndex;break}for(let O=m;O<v;O++){const U=r.get(O);D.verticalTextBox={x1:U.x1,y1:U.y1,x2:U.x2,y2:U.y2,anchorPointX:U.anchorPointX,anchorPointY:U.anchorPointY},D.verticalTextFeatureIndex=U.featureIndex;break}for(let O=_;O<S;O++){const U=r.get(O);D.iconBox={x1:U.x1,y1:U.y1,x2:U.x2,y2:U.y2,anchorPointX:U.anchorPointX,anchorPointY:U.anchorPointY},D.iconFeatureIndex=U.featureIndex;break}for(let O=P;O<I;O++){const U=r.get(O);D.verticalIconBox={x1:U.x1,y1:U.y1,x2:U.x2,y2:U.y2,anchorPointX:U.anchorPointX,anchorPointY:U.anchorPointY},D.verticalIconFeatureIndex=U.featureIndex;break}return D}deserializeCollisionBoxes(r){this.collisionArrays=[];for(let l=0;l<this.symbolInstances.length;l++){const d=this.symbolInstances.get(l);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(r,d.textBoxStartIndex,d.textBoxEndIndex,d.verticalTextBoxStartIndex,d.verticalTextBoxEndIndex,d.iconBoxStartIndex,d.iconBoxEndIndex,d.verticalIconBoxStartIndex,d.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(r,l){const d=r.placedSymbolArray.get(l),m=d.vertexStartIndex+4*d.numGlyphs;for(let v=d.vertexStartIndex;v<m;v+=4)r.indexArray.emplaceBack(v,v+1,v+2),r.indexArray.emplaceBack(v+1,v+2,v+3)}getSortedSymbolIndexes(r){if(this.sortedAngle===r&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const l=Math.sin(r),d=Math.cos(r),m=[],v=[],_=[];for(let S=0;S<this.symbolInstances.length;++S){_.push(S);const P=this.symbolInstances.get(S);m.push(0|Math.round(l*P.anchorX+d*P.anchorY)),v.push(P.featureIndex)}return _.sort((S,P)=>m[S]-m[P]||v[P]-v[S]),_}addToSortKeyRanges(r,l){const d=this.sortKeyRanges[this.sortKeyRanges.length-1];d&&d.sortKey===l?d.symbolInstanceEnd=r+1:this.sortKeyRanges.push({sortKey:l,symbolInstanceStart:r,symbolInstanceEnd:r+1})}sortFeatures(r){if(this.sortFeaturesByY&&this.sortedAngle!==r&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(r),this.sortedAngle=r,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const l of this.symbolInstanceIndexes){const d=this.symbolInstances.get(l);this.featureSortOrder.push(d.featureIndex),[d.rightJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.leftJustifiedTextSymbolIndex].forEach((m,v,_)=>{m>=0&&_.indexOf(m)===v&&this.addIndicesForPlacedSymbol(this.text,m)}),d.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,d.verticalPlacedTextSymbolIndex),d.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,d.placedIconSymbolIndex),d.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,d.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let OS,FS;ht("SymbolBucket",hc,{omit:["layers","collisionBoxArray","features","compareText"]}),hc.MAX_GLYPHS=65535,hc.addDynamicAttributes=rx;var ax={get paint(){return FS=FS||new jn({"icon-opacity":new At(ue.paint_symbol["icon-opacity"]),"icon-color":new At(ue.paint_symbol["icon-color"]),"icon-halo-color":new At(ue.paint_symbol["icon-halo-color"]),"icon-halo-width":new At(ue.paint_symbol["icon-halo-width"]),"icon-halo-blur":new At(ue.paint_symbol["icon-halo-blur"]),"icon-translate":new wt(ue.paint_symbol["icon-translate"]),"icon-translate-anchor":new wt(ue.paint_symbol["icon-translate-anchor"]),"text-opacity":new At(ue.paint_symbol["text-opacity"]),"text-color":new At(ue.paint_symbol["text-color"],{runtimeType:Rr,getOverride:a=>a.textColor,hasOverride:a=>!!a.textColor}),"text-halo-color":new At(ue.paint_symbol["text-halo-color"]),"text-halo-width":new At(ue.paint_symbol["text-halo-width"]),"text-halo-blur":new At(ue.paint_symbol["text-halo-blur"]),"text-translate":new wt(ue.paint_symbol["text-translate"]),"text-translate-anchor":new wt(ue.paint_symbol["text-translate-anchor"])})},get layout(){return OS=OS||new jn({"symbol-placement":new wt(ue.layout_symbol["symbol-placement"]),"symbol-spacing":new wt(ue.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new wt(ue.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new At(ue.layout_symbol["symbol-sort-key"]),"symbol-z-order":new wt(ue.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new wt(ue.layout_symbol["icon-allow-overlap"]),"icon-overlap":new wt(ue.layout_symbol["icon-overlap"]),"icon-ignore-placement":new wt(ue.layout_symbol["icon-ignore-placement"]),"icon-optional":new wt(ue.layout_symbol["icon-optional"]),"icon-rotation-alignment":new wt(ue.layout_symbol["icon-rotation-alignment"]),"icon-size":new At(ue.layout_symbol["icon-size"]),"icon-text-fit":new wt(ue.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new wt(ue.layout_symbol["icon-text-fit-padding"]),"icon-image":new At(ue.layout_symbol["icon-image"]),"icon-rotate":new At(ue.layout_symbol["icon-rotate"]),"icon-padding":new At(ue.layout_symbol["icon-padding"]),"icon-keep-upright":new wt(ue.layout_symbol["icon-keep-upright"]),"icon-offset":new At(ue.layout_symbol["icon-offset"]),"icon-anchor":new At(ue.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new wt(ue.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new wt(ue.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new wt(ue.layout_symbol["text-rotation-alignment"]),"text-field":new At(ue.layout_symbol["text-field"]),"text-font":new At(ue.layout_symbol["text-font"]),"text-size":new At(ue.layout_symbol["text-size"]),"text-max-width":new At(ue.layout_symbol["text-max-width"]),"text-line-height":new wt(ue.layout_symbol["text-line-height"]),"text-letter-spacing":new At(ue.layout_symbol["text-letter-spacing"]),"text-justify":new At(ue.layout_symbol["text-justify"]),"text-radial-offset":new At(ue.layout_symbol["text-radial-offset"]),"text-variable-anchor":new wt(ue.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new At(ue.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new At(ue.layout_symbol["text-anchor"]),"text-max-angle":new wt(ue.layout_symbol["text-max-angle"]),"text-writing-mode":new wt(ue.layout_symbol["text-writing-mode"]),"text-rotate":new At(ue.layout_symbol["text-rotate"]),"text-padding":new wt(ue.layout_symbol["text-padding"]),"text-keep-upright":new wt(ue.layout_symbol["text-keep-upright"]),"text-transform":new At(ue.layout_symbol["text-transform"]),"text-offset":new At(ue.layout_symbol["text-offset"]),"text-allow-overlap":new wt(ue.layout_symbol["text-allow-overlap"]),"text-overlap":new wt(ue.layout_symbol["text-overlap"]),"text-ignore-placement":new wt(ue.layout_symbol["text-ignore-placement"]),"text-optional":new wt(ue.layout_symbol["text-optional"])})}};class NS{constructor(r){if(r.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=r.property.overrides?r.property.overrides.runtimeType:zs,this.defaultValue=r}evaluate(r){if(r.formattedSection){const l=this.defaultValue.property.overrides;if(l&&l.hasOverride(r.formattedSection))return l.getOverride(r.formattedSection)}return r.feature&&r.featureState?this.defaultValue.evaluate(r.feature,r.featureState):this.defaultValue.property.specification.default}eachChild(r){this.defaultValue.isConstant()||r(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}ht("FormatSectionOverride",NS,{omit:["defaultValue"]});class tm extends Fi{constructor(r){super(r,ax)}recalculate(r,l){if(super.recalculate(r,l),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const d=this.layout.get("text-writing-mode");if(d){const m=[];for(const v of d)m.indexOf(v)<0&&m.push(v);this.layout._values["text-writing-mode"]=m}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(r,l,d,m){const v=this.layout.get(r).evaluate(l,{},d,m),_=this._unevaluatedLayout._values[r];return _.isDataDriven()||Gu(_.value)||!v?v:function(S,P){return P.replace(/{([^{}]+)}/g,(I,D)=>S&&D in S?String(S[D]):"")}(l.properties,v)}createBucket(r){return new hc(r)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const r of ax.paint.overridableProperties){if(!tm.hasPaintOverride(this.layout,r))continue;const l=this.paint.get(r),d=new NS(l),m=new Oh(d,l.property.specification);let v=null;v=l.value.kind==="constant"||l.value.kind==="source"?new Fh("source",m):new Wu("composite",m,l.value.zoomStops),this.paint._values[r]=new Dr(l.property,v,l.parameters)}}_handleOverridablePaintPropertyUpdate(r,l,d){return!(!this.layout||l.isDataDriven()||d.isDataDriven())&&tm.hasPaintOverride(this.layout,r)}static hasPaintOverride(r,l){const d=r.get("text-field"),m=ax.paint.properties[l];let v=!1;const _=S=>{for(const P of S)if(m.overrides&&m.overrides.hasOverride(P))return void(v=!0)};if(d.value.kind==="constant"&&d.value.value instanceof Er)_(d.value.value.sections);else if(d.value.kind==="source"){const S=I=>{v||(I instanceof Da&&Sn(I.value)===ie?_(I.value.sections):I instanceof qu?_(I.sections):I.eachChild(S))},P=d.value;P._styleExpression&&S(P._styleExpression.expression)}return v}}let BS;var Lz={get paint(){return BS=BS||new jn({"background-color":new wt(ue.paint_background["background-color"]),"background-pattern":new Yh(ue.paint_background["background-pattern"]),"background-opacity":new wt(ue.paint_background["background-opacity"])})}};class zz extends Fi{constructor(r){super(r,Lz)}}let VS;var Oz={get paint(){return VS=VS||new jn({"raster-opacity":new wt(ue.paint_raster["raster-opacity"]),"raster-hue-rotate":new wt(ue.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new wt(ue.paint_raster["raster-brightness-min"]),"raster-brightness-max":new wt(ue.paint_raster["raster-brightness-max"]),"raster-saturation":new wt(ue.paint_raster["raster-saturation"]),"raster-contrast":new wt(ue.paint_raster["raster-contrast"]),"raster-resampling":new wt(ue.paint_raster["raster-resampling"]),"raster-fade-duration":new wt(ue.paint_raster["raster-fade-duration"])})}};class Fz extends Fi{constructor(r){super(r,Oz)}}class Nz extends Fi{constructor(r){super(r,{}),this.onAdd=l=>{this.implementation.onAdd&&this.implementation.onAdd(l,l.painter.context.gl)},this.onRemove=l=>{this.implementation.onRemove&&this.implementation.onRemove(l,l.painter.context.gl)},this.implementation=r}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class Bz{constructor(r){this._callback=r,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const ox=63710088e-1;class Vo{constructor(r,l){if(isNaN(r)||isNaN(l))throw new Error(`Invalid LngLat object: (${r}, ${l})`);if(this.lng=+r,this.lat=+l,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Vo(Pe(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(r){const l=Math.PI/180,d=this.lat*l,m=r.lat*l,v=Math.sin(d)*Math.sin(m)+Math.cos(d)*Math.cos(m)*Math.cos((r.lng-this.lng)*l);return ox*Math.acos(Math.min(v,1))}static convert(r){if(r instanceof Vo)return r;if(Array.isArray(r)&&(r.length===2||r.length===3))return new Vo(Number(r[0]),Number(r[1]));if(!Array.isArray(r)&&typeof r=="object"&&r!==null)return new Vo(Number("lng"in r?r.lng:r.lon),Number(r.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const jS=2*Math.PI*ox;function $S(a){return jS*Math.cos(a*Math.PI/180)}function US(a){return(180+a)/360}function qS(a){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a*Math.PI/360)))/360}function GS(a,r){return a/$S(r)}function ZS(a){return 360*a-180}function lx(a){return 360/Math.PI*Math.atan(Math.exp((180-360*a)*Math.PI/180))-90}class nm{constructor(r,l,d=0){this.x=+r,this.y=+l,this.z=+d}static fromLngLat(r,l=0){const d=Vo.convert(r);return new nm(US(d.lng),qS(d.lat),GS(l,d.lat))}toLngLat(){return new Vo(ZS(this.x),lx(this.y))}toAltitude(){return this.z*$S(lx(this.y))}meterInMercatorCoordinateUnits(){return 1/jS*(r=lx(this.y),1/Math.cos(r*Math.PI/180));var r}}function WS(a,r,l){var d=2*Math.PI*6378137/256/Math.pow(2,l);return[a*d-2*Math.PI*6378137/2,r*d-2*Math.PI*6378137/2]}class ux{constructor(r,l,d){if(r<0||r>25||d<0||d>=Math.pow(2,r)||l<0||l>=Math.pow(2,r))throw new Error(`x=${l}, y=${d}, z=${r} outside of bounds. 0<=x<${Math.pow(2,r)}, 0<=y<${Math.pow(2,r)} 0<=z<=25 `);this.z=r,this.x=l,this.y=d,this.key=_d(0,r,r,l,d)}equals(r){return this.z===r.z&&this.x===r.x&&this.y===r.y}url(r,l,d){const m=(_=this.y,S=this.z,P=WS(256*(v=this.x),256*(_=Math.pow(2,S)-_-1),S),I=WS(256*(v+1),256*(_+1),S),P[0]+","+P[1]+","+I[0]+","+I[1]);var v,_,S,P,I;const D=function(O,U,W){let X,te="";for(let oe=O;oe>0;oe--)X=1<<oe-1,te+=(U&X?1:0)+(W&X?2:0);return te}(this.z,this.x,this.y);return r[(this.x+this.y)%r.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(d==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,l>1?"@2x":"").replace(/{quadkey}/g,D).replace(/{bbox-epsg-3857}/g,m)}isChildOf(r){const l=this.z-r.z;return l>0&&r.x===this.x>>l&&r.y===this.y>>l}getTilePoint(r){const l=Math.pow(2,this.z);return new M((r.x*l-this.x)*Xn,(r.y*l-this.y)*Xn)}toString(){return`${this.z}/${this.x}/${this.y}`}}class HS{constructor(r,l){this.wrap=r,this.canonical=l,this.key=_d(r,l.z,l.z,l.x,l.y)}}class Hi{constructor(r,l,d,m,v){if(r<d)throw new Error(`overscaledZ should be >= z; overscaledZ = ${r}; z = ${d}`);this.overscaledZ=r,this.wrap=l,this.canonical=new ux(d,+m,+v),this.key=_d(l,r,d,m,v)}clone(){return new Hi(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(r){return this.overscaledZ===r.overscaledZ&&this.wrap===r.wrap&&this.canonical.equals(r.canonical)}scaledTo(r){if(r>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${r}; overscaledZ = ${this.overscaledZ}`);const l=this.canonical.z-r;return r>this.canonical.z?new Hi(r,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Hi(r,this.wrap,r,this.canonical.x>>l,this.canonical.y>>l)}calculateScaledKey(r,l){if(r>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${r}; overscaledZ = ${this.overscaledZ}`);const d=this.canonical.z-r;return r>this.canonical.z?_d(this.wrap*+l,r,this.canonical.z,this.canonical.x,this.canonical.y):_d(this.wrap*+l,r,r,this.canonical.x>>d,this.canonical.y>>d)}isChildOf(r){if(r.wrap!==this.wrap)return!1;const l=this.canonical.z-r.canonical.z;return r.overscaledZ===0||r.overscaledZ<this.overscaledZ&&r.canonical.x===this.canonical.x>>l&&r.canonical.y===this.canonical.y>>l}children(r){if(this.overscaledZ>=r)return[new Hi(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const l=this.canonical.z+1,d=2*this.canonical.x,m=2*this.canonical.y;return[new Hi(l,this.wrap,l,d,m),new Hi(l,this.wrap,l,d+1,m),new Hi(l,this.wrap,l,d,m+1),new Hi(l,this.wrap,l,d+1,m+1)]}isLessThan(r){return this.wrap<r.wrap||!(this.wrap>r.wrap)&&(this.overscaledZ<r.overscaledZ||!(this.overscaledZ>r.overscaledZ)&&(this.canonical.x<r.canonical.x||!(this.canonical.x>r.canonical.x)&&this.canonical.y<r.canonical.y))}wrapped(){return new Hi(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(r){return new Hi(this.overscaledZ,r,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new HS(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(r){return this.canonical.getTilePoint(new nm(r.x-this.wrap,r.y))}}function _d(a,r,l,d,m){(a*=2)<0&&(a=-1*a-1);const v=1<<l;return(v*v*a+v*m+d).toString(36)+l.toString(36)+r.toString(36)}ht("CanonicalTileID",ux),ht("OverscaledTileID",Hi,{omit:["posMatrix"]});class KS{constructor(r,l,d,m=1,v=1,_=1,S=0){if(this.uid=r,l.height!==l.width)throw new RangeError("DEM tiles must be square");if(d&&!["mapbox","terrarium","custom"].includes(d))return void ut(`"${d}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=l.height;const P=this.dim=l.height-2;switch(this.data=new Uint32Array(l.data.buffer),d){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=m,this.greenFactor=v,this.blueFactor=_,this.baseShift=S;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let I=0;I<P;I++)this.data[this._idx(-1,I)]=this.data[this._idx(0,I)],this.data[this._idx(P,I)]=this.data[this._idx(P-1,I)],this.data[this._idx(I,-1)]=this.data[this._idx(I,0)],this.data[this._idx(I,P)]=this.data[this._idx(I,P-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(P,-1)]=this.data[this._idx(P-1,0)],this.data[this._idx(-1,P)]=this.data[this._idx(0,P-1)],this.data[this._idx(P,P)]=this.data[this._idx(P-1,P-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let I=0;I<P;I++)for(let D=0;D<P;D++){const O=this.get(I,D);O>this.max&&(this.max=O),O<this.min&&(this.min=O)}}get(r,l){const d=new Uint8Array(this.data.buffer),m=4*this._idx(r,l);return this.unpack(d[m],d[m+1],d[m+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(r,l){if(r<-1||r>=this.dim+1||l<-1||l>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(l+1)*this.stride+(r+1)}unpack(r,l,d){return r*this.redFactor+l*this.greenFactor+d*this.blueFactor-this.baseShift}getPixels(){return new Wi({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(r,l,d){if(this.dim!==r.dim)throw new Error("dem dimension mismatch");let m=l*this.dim,v=l*this.dim+this.dim,_=d*this.dim,S=d*this.dim+this.dim;switch(l){case-1:m=v-1;break;case 1:v=m+1}switch(d){case-1:_=S-1;break;case 1:S=_+1}const P=-l*this.dim,I=-d*this.dim;for(let D=_;D<S;D++)for(let O=m;O<v;O++)this.data[this._idx(O,D)]=r.data[this._idx(O+P,D+I)]}}ht("DEMData",KS);class XS{constructor(r){this._stringToNumber={},this._numberToString=[];for(let l=0;l<r.length;l++){const d=r[l];this._stringToNumber[d]=l,this._numberToString[l]=d}}encode(r){return this._stringToNumber[r]}decode(r){if(r>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${r} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[r]}}class QS{constructor(r,l,d,m,v){this.type="Feature",this._vectorTileFeature=r,r._z=l,r._x=d,r._y=m,this.properties=r.properties,this.id=v}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(r){this._geometry=r}toJSON(){const r={geometry:this.geometry};for(const l in this)l!=="_geometry"&&l!=="_vectorTileFeature"&&(r[l]=this[l]);return r}}class YS{constructor(r,l){this.tileID=r,this.x=r.canonical.x,this.y=r.canonical.y,this.z=r.canonical.z,this.grid=new Ro(Xn,16,0),this.grid3D=new Ro(Xn,16,0),this.featureIndexArray=new Be,this.promoteId=l}insert(r,l,d,m,v,_){const S=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(d,m,v);const P=_?this.grid3D:this.grid;for(let I=0;I<l.length;I++){const D=l[I],O=[1/0,1/0,-1/0,-1/0];for(let U=0;U<D.length;U++){const W=D[U];O[0]=Math.min(O[0],W.x),O[1]=Math.min(O[1],W.y),O[2]=Math.max(O[2],W.x),O[3]=Math.max(O[3],W.y)}O[0]<Xn&&O[1]<Xn&&O[2]>=0&&O[3]>=0&&P.insert(S,O[0],O[1],O[2],O[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Fo.VectorTile(new Qv(this.rawTileData)).layers,this.sourceLayerCoder=new XS(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(r,l,d,m){this.loadVTLayers();const v=r.params||{},_=Xn/r.tileSize/r.scale,S=Bh(v.filter),P=r.queryGeometry,I=r.queryPadding*_,D=e2(P),O=this.grid.query(D.minX-I,D.minY-I,D.maxX+I,D.maxY+I),U=e2(r.cameraQueryGeometry),W=this.grid3D.query(U.minX-I,U.minY-I,U.maxX+I,U.maxY+I,(oe,he,we,pe)=>function(Se,Ce,Oe,lt,yt){for(const rt of Se)if(Ce<=rt.x&&Oe<=rt.y&&lt>=rt.x&&yt>=rt.y)return!0;const at=[new M(Ce,Oe),new M(Ce,yt),new M(lt,yt),new M(lt,Oe)];if(Se.length>2){for(const rt of at)if(ic(Se,rt))return!0}for(let rt=0;rt<Se.length-1;rt++)if(yL(Se[rt],Se[rt+1],at))return!0;return!1}(r.cameraQueryGeometry,oe-I,he-I,we+I,pe+I));for(const oe of W)O.push(oe);O.sort(Vz);const X={};let te;for(let oe=0;oe<O.length;oe++){const he=O[oe];if(he===te)continue;te=he;const we=this.featureIndexArray.get(he);let pe=null;this.loadMatchingFeature(X,we.bucketIndex,we.sourceLayerIndex,we.featureIndex,S,v.layers,v.availableImages,l,d,m,(Se,Ce,Oe)=>(pe||(pe=Wl(Se)),Ce.queryIntersectsFeature(P,Se,Oe,pe,this.z,r.transform,_,r.pixelPosMatrix)))}return X}loadMatchingFeature(r,l,d,m,v,_,S,P,I,D,O){const U=this.bucketLayerIDs[l];if(_&&!function(oe,he){for(let we=0;we<oe.length;we++)if(he.indexOf(oe[we])>=0)return!0;return!1}(_,U))return;const W=this.sourceLayerCoder.decode(d),X=this.vtLayers[W].feature(m);if(v.needGeometry){const oe=Hl(X,!0);if(!v.filter(new fn(this.tileID.overscaledZ),oe,this.tileID.canonical))return}else if(!v.filter(new fn(this.tileID.overscaledZ),X))return;const te=this.getId(X,W);for(let oe=0;oe<U.length;oe++){const he=U[oe];if(_&&_.indexOf(he)<0)continue;const we=P[he];if(!we)continue;let pe={};te&&D&&(pe=D.getState(we.sourceLayer||"_geojsonTileLayer",te));const Se=ve({},I[he]);Se.paint=JS(Se.paint,we.paint,X,pe,S),Se.layout=JS(Se.layout,we.layout,X,pe,S);const Ce=!O||O(X,we,pe);if(!Ce)continue;const Oe=new QS(X,this.z,this.x,this.y,te);Oe.layer=Se;let lt=r[he];lt===void 0&&(lt=r[he]=[]),lt.push({featureIndex:m,feature:Oe,intersectionZ:Ce})}}lookupSymbolFeatures(r,l,d,m,v,_,S,P){const I={};this.loadVTLayers();const D=Bh(v);for(const O of r)this.loadMatchingFeature(I,d,m,O,D,_,S,P,l);return I}hasLayer(r){for(const l of this.bucketLayerIDs)for(const d of l)if(r===d)return!0;return!1}getId(r,l){let d=r.id;return this.promoteId&&(d=r.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[l]],typeof d=="boolean"&&(d=Number(d))),d}}function JS(a,r,l,d,m){return Me(a,(v,_)=>{const S=r instanceof nc?r.get(_):null;return S&&S.evaluate?S.evaluate(l,d,m):S})}function e2(a){let r=1/0,l=1/0,d=-1/0,m=-1/0;for(const v of a)r=Math.min(r,v.x),l=Math.min(l,v.y),d=Math.max(d,v.x),m=Math.max(m,v.y);return{minX:r,minY:l,maxX:d,maxY:m}}function Vz(a,r){return r-a}function t2(a,r,l,d,m){const v=[];for(let _=0;_<a.length;_++){const S=a[_];let P;for(let I=0;I<S.length-1;I++){let D=S[I],O=S[I+1];D.x<r&&O.x<r||(D.x<r?D=new M(r,D.y+(r-D.x)/(O.x-D.x)*(O.y-D.y))._round():O.x<r&&(O=new M(r,D.y+(r-D.x)/(O.x-D.x)*(O.y-D.y))._round()),D.y<l&&O.y<l||(D.y<l?D=new M(D.x+(l-D.y)/(O.y-D.y)*(O.x-D.x),l)._round():O.y<l&&(O=new M(D.x+(l-D.y)/(O.y-D.y)*(O.x-D.x),l)._round()),D.x>=d&&O.x>=d||(D.x>=d?D=new M(d,D.y+(d-D.x)/(O.x-D.x)*(O.y-D.y))._round():O.x>=d&&(O=new M(d,D.y+(d-D.x)/(O.x-D.x)*(O.y-D.y))._round()),D.y>=m&&O.y>=m||(D.y>=m?D=new M(D.x+(m-D.y)/(O.y-D.y)*(O.x-D.x),m)._round():O.y>=m&&(O=new M(D.x+(m-D.y)/(O.y-D.y)*(O.x-D.x),m)._round()),P&&D.equals(P[P.length-1])||(P=[D],v.push(P)),P.push(O)))))}}return v}ht("FeatureIndex",YS,{omit:["rawTileData","sourceLayerCoder"]});class jo extends M{constructor(r,l,d,m){super(r,l),this.angle=d,m!==void 0&&(this.segment=m)}clone(){return new jo(this.x,this.y,this.angle,this.segment)}}function n2(a,r,l,d,m){if(r.segment===void 0||l===0)return!0;let v=r,_=r.segment+1,S=0;for(;S>-l/2;){if(_--,_<0)return!1;S-=a[_].dist(v),v=a[_]}S+=a[_].dist(a[_+1]),_++;const P=[];let I=0;for(;S<l/2;){const D=a[_],O=a[_+1];if(!O)return!1;let U=a[_-1].angleTo(D)-D.angleTo(O);for(U=Math.abs((U+3*Math.PI)%(2*Math.PI)-Math.PI),P.push({distance:S,angleDelta:U}),I+=U;S-P[0].distance>d;)I-=P.shift().angleDelta;if(I>m)return!1;_++,S+=D.dist(O)}return!0}function r2(a){let r=0;for(let l=0;l<a.length-1;l++)r+=a[l].dist(a[l+1]);return r}function i2(a,r,l){return a?.6*r*l:0}function s2(a,r){return Math.max(a?a.right-a.left:0,r?r.right-r.left:0)}function jz(a,r,l,d,m,v){const _=i2(l,m,v),S=s2(l,d)*v;let P=0;const I=r2(a)/2;for(let D=0;D<a.length-1;D++){const O=a[D],U=a[D+1],W=O.dist(U);if(P+W>I){const X=(I-P)/W,te=pi.number(O.x,U.x,X),oe=pi.number(O.y,U.y,X),he=new jo(te,oe,U.angleTo(O),D);return he._round(),!_||n2(a,he,S,_,r)?he:void 0}P+=W}}function $z(a,r,l,d,m,v,_,S,P){const I=i2(d,v,_),D=s2(d,m),O=D*_,U=a[0].x===0||a[0].x===P||a[0].y===0||a[0].y===P;return r-O<r/4&&(r=O+r/4),a2(a,U?r/2*S%r:(D/2+2*v)*_*S%r,r,I,l,O,U,!1,P)}function a2(a,r,l,d,m,v,_,S,P){const I=v/2,D=r2(a);let O=0,U=r-l,W=[];for(let X=0;X<a.length-1;X++){const te=a[X],oe=a[X+1],he=te.dist(oe),we=oe.angleTo(te);for(;U+l<O+he;){U+=l;const pe=(U-O)/he,Se=pi.number(te.x,oe.x,pe),Ce=pi.number(te.y,oe.y,pe);if(Se>=0&&Se<P&&Ce>=0&&Ce<P&&U-I>=0&&U+I<=D){const Oe=new jo(Se,Ce,we,X);Oe._round(),d&&!n2(a,Oe,v,d,m)||W.push(Oe)}}O+=he}return S||W.length||_||(W=a2(a,O/2,l,d,m,v,_,!0,P)),W}ht("Anchor",jo);const dc=xi;function o2(a,r,l,d){const m=[],v=a.image,_=v.pixelRatio,S=v.paddedRect.w-2*dc,P=v.paddedRect.h-2*dc,I=a.right-a.left,D=a.bottom-a.top,O=v.stretchX||[[0,S]],U=v.stretchY||[[0,P]],W=(Xe,dt)=>Xe+dt[1]-dt[0],X=O.reduce(W,0),te=U.reduce(W,0),oe=S-X,he=P-te;let we=0,pe=X,Se=0,Ce=te,Oe=0,lt=oe,yt=0,at=he;if(v.content&&d){const Xe=v.content;we=rm(O,0,Xe[0]),Se=rm(U,0,Xe[1]),pe=rm(O,Xe[0],Xe[2]),Ce=rm(U,Xe[1],Xe[3]),Oe=Xe[0]-we,yt=Xe[1]-Se,lt=Xe[2]-Xe[0]-pe,at=Xe[3]-Xe[1]-Ce}const rt=(Xe,dt,Ye,Ze)=>{const Tt=im(Xe.stretch-we,pe,I,a.left),xt=sm(Xe.fixed-Oe,lt,Xe.stretch,X),Vt=im(dt.stretch-Se,Ce,D,a.top),mn=sm(dt.fixed-yt,at,dt.stretch,te),bn=im(Ye.stretch-we,pe,I,a.left),rr=sm(Ye.fixed-Oe,lt,Ye.stretch,X),Bi=im(Ze.stretch-Se,Ce,D,a.top),Jr=sm(Ze.fixed-yt,at,Ze.stretch,te),Qn=new M(Tt,Vt),vr=new M(bn,Vt),Pr=new M(bn,Bi),ei=new M(Tt,Bi),ti=new M(xt/_,mn/_),ir=new M(rr/_,Jr/_),sr=r*Math.PI/180;if(sr){const Or=Math.sin(sr),_i=Math.cos(sr),wi=[_i,-Or,Or,_i];Qn._matMult(wi),vr._matMult(wi),ei._matMult(wi),Pr._matMult(wi)}const zr=Xe.stretch+Xe.fixed,ni=dt.stretch+dt.fixed;return{tl:Qn,tr:vr,bl:ei,br:Pr,tex:{x:v.paddedRect.x+dc+zr,y:v.paddedRect.y+dc+ni,w:Ye.stretch+Ye.fixed-zr,h:Ze.stretch+Ze.fixed-ni},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:ti,pixelOffsetBR:ir,minFontScaleX:lt/_/I,minFontScaleY:at/_/D,isSDF:l}};if(d&&(v.stretchX||v.stretchY)){const Xe=l2(O,oe,X),dt=l2(U,he,te);for(let Ye=0;Ye<Xe.length-1;Ye++){const Ze=Xe[Ye],Tt=Xe[Ye+1];for(let xt=0;xt<dt.length-1;xt++)m.push(rt(Ze,dt[xt],Tt,dt[xt+1]))}}else m.push(rt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:S+1},{fixed:0,stretch:P+1}));return m}function rm(a,r,l){let d=0;for(const m of a)d+=Math.max(r,Math.min(l,m[1]))-Math.max(r,Math.min(l,m[0]));return d}function l2(a,r,l){const d=[{fixed:-dc,stretch:0}];for(const[m,v]of a){const _=d[d.length-1];d.push({fixed:m-_.stretch,stretch:_.stretch}),d.push({fixed:m-_.stretch,stretch:_.stretch+(v-m)})}return d.push({fixed:r+dc,stretch:l}),d}function im(a,r,l,d){return a/r*l+d}function sm(a,r,l,d){return a-r*l/d}class am{constructor(r,l,d,m,v,_,S,P,I,D){if(this.boxStartIndex=r.length,I){let O=_.top,U=_.bottom;const W=_.collisionPadding;W&&(O-=W[1],U+=W[3]);let X=U-O;X>0&&(X=Math.max(10,X),this.circleDiameter=X)}else{let O=_.top*S-P[0],U=_.bottom*S+P[2],W=_.left*S-P[3],X=_.right*S+P[1];const te=_.collisionPadding;if(te&&(W-=te[0]*S,O-=te[1]*S,X+=te[2]*S,U+=te[3]*S),D){const oe=new M(W,O),he=new M(X,O),we=new M(W,U),pe=new M(X,U),Se=D*Math.PI/180;oe._rotate(Se),he._rotate(Se),we._rotate(Se),pe._rotate(Se),W=Math.min(oe.x,he.x,we.x,pe.x),X=Math.max(oe.x,he.x,we.x,pe.x),O=Math.min(oe.y,he.y,we.y,pe.y),U=Math.max(oe.y,he.y,we.y,pe.y)}r.emplaceBack(l.x,l.y,W,O,X,U,d,m,v)}this.boxEndIndex=r.length}}class Uz{constructor(r=[],l=qz){if(this.data=r,this.length=this.data.length,this.compare=l,this.length>0)for(let d=(this.length>>1)-1;d>=0;d--)this._down(d)}push(r){this.data.push(r),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const r=this.data[0],l=this.data.pop();return this.length--,this.length>0&&(this.data[0]=l,this._down(0)),r}peek(){return this.data[0]}_up(r){const{data:l,compare:d}=this,m=l[r];for(;r>0;){const v=r-1>>1,_=l[v];if(d(m,_)>=0)break;l[r]=_,r=v}l[r]=m}_down(r){const{data:l,compare:d}=this,m=this.length>>1,v=l[r];for(;r<m;){let _=1+(r<<1),S=l[_];const P=_+1;if(P<this.length&&d(l[P],S)<0&&(_=P,S=l[P]),d(S,v)>=0)break;l[r]=S,r=_}l[r]=v}}function qz(a,r){return a<r?-1:a>r?1:0}function Gz(a,r=1,l=!1){let d=1/0,m=1/0,v=-1/0,_=-1/0;const S=a[0];for(let W=0;W<S.length;W++){const X=S[W];(!W||X.x<d)&&(d=X.x),(!W||X.y<m)&&(m=X.y),(!W||X.x>v)&&(v=X.x),(!W||X.y>_)&&(_=X.y)}const P=Math.min(v-d,_-m);let I=P/2;const D=new Uz([],Zz);if(P===0)return new M(d,m);for(let W=d;W<v;W+=P)for(let X=m;X<_;X+=P)D.push(new fc(W+I,X+I,I,a));let O=function(W){let X=0,te=0,oe=0;const he=W[0];for(let we=0,pe=he.length,Se=pe-1;we<pe;Se=we++){const Ce=he[we],Oe=he[Se],lt=Ce.x*Oe.y-Oe.x*Ce.y;te+=(Ce.x+Oe.x)*lt,oe+=(Ce.y+Oe.y)*lt,X+=3*lt}return new fc(te/X,oe/X,0,W)}(a),U=D.length;for(;D.length;){const W=D.pop();(W.d>O.d||!O.d)&&(O=W,l&&console.log("found best %d after %d probes",Math.round(1e4*W.d)/1e4,U)),W.max-O.d<=r||(I=W.h/2,D.push(new fc(W.p.x-I,W.p.y-I,I,a)),D.push(new fc(W.p.x+I,W.p.y-I,I,a)),D.push(new fc(W.p.x-I,W.p.y+I,I,a)),D.push(new fc(W.p.x+I,W.p.y+I,I,a)),U+=4)}return l&&(console.log(`num probes: ${U}`),console.log(`best distance: ${O.d}`)),O.p}function Zz(a,r){return r.max-a.max}function fc(a,r,l,d){this.p=new M(a,r),this.h=l,this.d=function(m,v){let _=!1,S=1/0;for(let P=0;P<v.length;P++){const I=v[P];for(let D=0,O=I.length,U=O-1;D<O;U=D++){const W=I[D],X=I[U];W.y>m.y!=X.y>m.y&&m.x<(X.x-W.x)*(m.y-W.y)/(X.y-W.y)+W.x&&(_=!_),S=Math.min(S,qb(m,W,X))}}return(_?1:-1)*Math.sqrt(S)}(this.p,d),this.max=this.d+this.h*Math.SQRT2}var Cr;o.aq=void 0,(Cr=o.aq||(o.aq={}))[Cr.center=1]="center",Cr[Cr.left=2]="left",Cr[Cr.right=3]="right",Cr[Cr.top=4]="top",Cr[Cr.bottom=5]="bottom",Cr[Cr["top-left"]=6]="top-left",Cr[Cr["top-right"]=7]="top-right",Cr[Cr["bottom-left"]=8]="bottom-left",Cr[Cr["bottom-right"]=9]="bottom-right";const $o=7,cx=Number.POSITIVE_INFINITY;function u2(a,r){return r[1]!==cx?function(l,d,m){let v=0,_=0;switch(d=Math.abs(d),m=Math.abs(m),l){case"top-right":case"top-left":case"top":_=m-$o;break;case"bottom-right":case"bottom-left":case"bottom":_=-m+$o}switch(l){case"top-right":case"bottom-right":case"right":v=-d;break;case"top-left":case"bottom-left":case"left":v=d}return[v,_]}(a,r[0],r[1]):function(l,d){let m=0,v=0;d<0&&(d=0);const _=d/Math.SQRT2;switch(l){case"top-right":case"top-left":v=_-$o;break;case"bottom-right":case"bottom-left":v=-_+$o;break;case"bottom":v=-d+$o;break;case"top":v=d-$o}switch(l){case"top-right":case"bottom-right":m=-_;break;case"top-left":case"bottom-left":m=_;break;case"left":m=d;break;case"right":m=-d}return[m,v]}(a,r[0])}function c2(a,r,l){var d;const m=a.layout,v=(d=m.get("text-variable-anchor-offset"))===null||d===void 0?void 0:d.evaluate(r,{},l);if(v){const S=v.values,P=[];for(let I=0;I<S.length;I+=2){const D=P[I]=S[I],O=S[I+1].map(U=>U*nr);D.startsWith("top")?O[1]-=$o:D.startsWith("bottom")&&(O[1]+=$o),P[I+1]=O}return new Di(P)}const _=m.get("text-variable-anchor");if(_){let S;S=a._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[m.get("text-radial-offset").evaluate(r,{},l)*nr,cx]:m.get("text-offset").evaluate(r,{},l).map(I=>I*nr);const P=[];for(const I of _)P.push(I,u2(I,S));return new Di(P)}return null}function hx(a){switch(a){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Wz(a,r,l,d,m,v,_,S,P,I,D){let O=v.textMaxSize.evaluate(r,{});O===void 0&&(O=_);const U=a.layers[0].layout,W=U.get("icon-offset").evaluate(r,{},D),X=d2(l.horizontal),te=_/24,oe=a.tilePixelRatio*te,he=a.tilePixelRatio*O/24,we=a.tilePixelRatio*S,pe=a.tilePixelRatio*U.get("symbol-spacing"),Se=U.get("text-padding")*a.tilePixelRatio,Ce=function(Ze,Tt,xt,Vt=1){const mn=Ze.get("icon-padding").evaluate(Tt,{},xt),bn=mn&&mn.values;return[bn[0]*Vt,bn[1]*Vt,bn[2]*Vt,bn[3]*Vt]}(U,r,D,a.tilePixelRatio),Oe=U.get("text-max-angle")/180*Math.PI,lt=U.get("text-rotation-alignment")!=="viewport"&&U.get("symbol-placement")!=="point",yt=U.get("icon-rotation-alignment")==="map"&&U.get("symbol-placement")!=="point",at=U.get("symbol-placement"),rt=pe/2,Xe=U.get("icon-text-fit");let dt;d&&Xe!=="none"&&(a.allowVerticalPlacement&&l.vertical&&(dt=LS(d,l.vertical,Xe,U.get("icon-text-fit-padding"),W,te)),X&&(d=LS(d,X,Xe,U.get("icon-text-fit-padding"),W,te)));const Ye=(Ze,Tt)=>{Tt.x<0||Tt.x>=Xn||Tt.y<0||Tt.y>=Xn||function(xt,Vt,mn,bn,rr,Bi,Jr,Qn,vr,Pr,ei,ti,ir,sr,zr,ni,Or,_i,wi,ar,Gt,Fr,Ar,or,xs){const Us=xt.addToLineVertexArray(Vt,mn);let qs,Za,_s,Ki,bi=0,Wa=0,Sd=0,g2=0,xx=-1,_x=-1;const Ha={};let y2=$a("");if(xt.allowVerticalPlacement&&bn.vertical){const Nr=Qn.layout.get("text-rotate").evaluate(Gt,{},or)+90;_s=new am(vr,Vt,Pr,ei,ti,bn.vertical,ir,sr,zr,Nr),Jr&&(Ki=new am(vr,Vt,Pr,ei,ti,Jr,Or,_i,zr,Nr))}if(rr){const Nr=Qn.layout.get("icon-rotate").evaluate(Gt,{}),Xi=Qn.layout.get("icon-text-fit")!=="none",Xl=o2(rr,Nr,Ar,Xi),Zs=Jr?o2(Jr,Nr,Ar,Xi):void 0;Za=new am(vr,Vt,Pr,ei,ti,rr,Or,_i,!1,Nr),bi=4*Xl.length;const Ql=xt.iconSizeData;let va=null;Ql.kind==="source"?(va=[ya*Qn.layout.get("icon-size").evaluate(Gt,{})],va[0]>Bo&&ut(`${xt.layerIds[0]}: Value for "icon-size" is >= ${xd}. Reduce your "icon-size".`)):Ql.kind==="composite"&&(va=[ya*Fr.compositeIconSizes[0].evaluate(Gt,{},or),ya*Fr.compositeIconSizes[1].evaluate(Gt,{},or)],(va[0]>Bo||va[1]>Bo)&&ut(`${xt.layerIds[0]}: Value for "icon-size" is >= ${xd}. Reduce your "icon-size".`)),xt.addSymbols(xt.icon,Xl,va,ar,wi,Gt,o.ai.none,Vt,Us.lineStartIndex,Us.lineLength,-1,or),xx=xt.icon.placedSymbolArray.length-1,Zs&&(Wa=4*Zs.length,xt.addSymbols(xt.icon,Zs,va,ar,wi,Gt,o.ai.vertical,Vt,Us.lineStartIndex,Us.lineLength,-1,or),_x=xt.icon.placedSymbolArray.length-1)}const v2=Object.keys(bn.horizontal);for(const Nr of v2){const Xi=bn.horizontal[Nr];if(!qs){y2=$a(Xi.text);const Zs=Qn.layout.get("text-rotate").evaluate(Gt,{},or);qs=new am(vr,Vt,Pr,ei,ti,Xi,ir,sr,zr,Zs)}const Xl=Xi.positionedLines.length===1;if(Sd+=h2(xt,Vt,Xi,Bi,Qn,zr,Gt,ni,Us,bn.vertical?o.ai.horizontal:o.ai.horizontalOnly,Xl?v2:[Nr],Ha,xx,Fr,or),Xl)break}bn.vertical&&(g2+=h2(xt,Vt,bn.vertical,Bi,Qn,zr,Gt,ni,Us,o.ai.vertical,["vertical"],Ha,_x,Fr,or));const Xz=qs?qs.boxStartIndex:xt.collisionBoxArray.length,Qz=qs?qs.boxEndIndex:xt.collisionBoxArray.length,Yz=_s?_s.boxStartIndex:xt.collisionBoxArray.length,Jz=_s?_s.boxEndIndex:xt.collisionBoxArray.length,eO=Za?Za.boxStartIndex:xt.collisionBoxArray.length,tO=Za?Za.boxEndIndex:xt.collisionBoxArray.length,nO=Ki?Ki.boxStartIndex:xt.collisionBoxArray.length,rO=Ki?Ki.boxEndIndex:xt.collisionBoxArray.length;let Gs=-1;const lm=(Nr,Xi)=>Nr&&Nr.circleDiameter?Math.max(Nr.circleDiameter,Xi):Xi;Gs=lm(qs,Gs),Gs=lm(_s,Gs),Gs=lm(Za,Gs),Gs=lm(Ki,Gs);const x2=Gs>-1?1:0;x2&&(Gs*=xs/nr),xt.glyphOffsetArray.length>=hc.MAX_GLYPHS&&ut("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Gt.sortKey!==void 0&&xt.addToSortKeyRanges(xt.symbolInstances.length,Gt.sortKey);const iO=c2(Qn,Gt,or),[sO,aO]=function(Nr,Xi){const Xl=Nr.length,Zs=Xi==null?void 0:Xi.values;if((Zs==null?void 0:Zs.length)>0)for(let Ql=0;Ql<Zs.length;Ql+=2){const va=Zs[Ql+1];Nr.emplaceBack(o.aq[Zs[Ql]],va[0],va[1])}return[Xl,Nr.length]}(xt.textAnchorOffsets,iO);xt.symbolInstances.emplaceBack(Vt.x,Vt.y,Ha.right>=0?Ha.right:-1,Ha.center>=0?Ha.center:-1,Ha.left>=0?Ha.left:-1,Ha.vertical||-1,xx,_x,y2,Xz,Qz,Yz,Jz,eO,tO,nO,rO,Pr,Sd,g2,bi,Wa,x2,0,ir,Gs,sO,aO)}(a,Tt,Ze,l,d,m,dt,a.layers[0],a.collisionBoxArray,r.index,r.sourceLayerIndex,a.index,oe,[Se,Se,Se,Se],lt,P,we,Ce,yt,W,r,v,I,D,_)};if(at==="line")for(const Ze of t2(r.geometry,0,0,Xn,Xn)){const Tt=$z(Ze,pe,Oe,l.vertical||X,d,24,he,a.overscaling,Xn);for(const xt of Tt)X&&Hz(a,X.text,rt,xt)||Ye(Ze,xt)}else if(at==="line-center"){for(const Ze of r.geometry)if(Ze.length>1){const Tt=jz(Ze,Oe,l.vertical||X,d,24,he);Tt&&Ye(Ze,Tt)}}else if(r.type==="Polygon")for(const Ze of Uv(r.geometry,0)){const Tt=Gz(Ze,16);Ye(Ze[0],new jo(Tt.x,Tt.y,0))}else if(r.type==="LineString")for(const Ze of r.geometry)Ye(Ze,new jo(Ze[0].x,Ze[0].y,0));else if(r.type==="Point")for(const Ze of r.geometry)for(const Tt of Ze)Ye([Tt],new jo(Tt.x,Tt.y,0))}function h2(a,r,l,d,m,v,_,S,P,I,D,O,U,W,X){const te=function(we,pe,Se,Ce,Oe,lt,yt,at){const rt=Ce.layout.get("text-rotate").evaluate(lt,{})*Math.PI/180,Xe=[];for(const dt of pe.positionedLines)for(const Ye of dt.positionedGlyphs){if(!Ye.rect)continue;const Ze=Ye.rect||{};let Tt=PS+1,xt=!0,Vt=1,mn=0;const bn=(Oe||at)&&Ye.vertical,rr=Ye.metrics.advance*Ye.scale/2;if(at&&pe.verticalizable&&(mn=dt.lineOffset/2-(Ye.imageName?-(nr-Ye.metrics.width*Ye.scale)/2:(Ye.scale-1)*nr)),Ye.imageName){const ar=yt[Ye.imageName];xt=ar.sdf,Vt=ar.pixelRatio,Tt=xi/Vt}const Bi=Oe?[Ye.x+rr,Ye.y]:[0,0];let Jr=Oe?[0,0]:[Ye.x+rr+Se[0],Ye.y+Se[1]-mn],Qn=[0,0];bn&&(Qn=Jr,Jr=[0,0]);const vr=Ye.metrics.isDoubleResolution?2:1,Pr=(Ye.metrics.left-Tt)*Ye.scale-rr+Jr[0],ei=(-Ye.metrics.top-Tt)*Ye.scale+Jr[1],ti=Pr+Ze.w/vr*Ye.scale/Vt,ir=ei+Ze.h/vr*Ye.scale/Vt,sr=new M(Pr,ei),zr=new M(ti,ei),ni=new M(Pr,ir),Or=new M(ti,ir);if(bn){const ar=new M(-rr,rr-yd),Gt=-Math.PI/2,Fr=nr/2-rr,Ar=new M(5-yd-Fr,-(Ye.imageName?Fr:0)),or=new M(...Qn);sr._rotateAround(Gt,ar)._add(Ar)._add(or),zr._rotateAround(Gt,ar)._add(Ar)._add(or),ni._rotateAround(Gt,ar)._add(Ar)._add(or),Or._rotateAround(Gt,ar)._add(Ar)._add(or)}if(rt){const ar=Math.sin(rt),Gt=Math.cos(rt),Fr=[Gt,-ar,ar,Gt];sr._matMult(Fr),zr._matMult(Fr),ni._matMult(Fr),Or._matMult(Fr)}const _i=new M(0,0),wi=new M(0,0);Xe.push({tl:sr,tr:zr,bl:ni,br:Or,tex:Ze,writingMode:pe.writingMode,glyphOffset:Bi,sectionIndex:Ye.sectionIndex,isSDF:xt,pixelOffsetTL:_i,pixelOffsetBR:wi,minFontScaleX:0,minFontScaleY:0})}return Xe}(0,l,S,m,v,_,d,a.allowVerticalPlacement),oe=a.textSizeData;let he=null;oe.kind==="source"?(he=[ya*m.layout.get("text-size").evaluate(_,{})],he[0]>Bo&&ut(`${a.layerIds[0]}: Value for "text-size" is >= ${xd}. Reduce your "text-size".`)):oe.kind==="composite"&&(he=[ya*W.compositeTextSizes[0].evaluate(_,{},X),ya*W.compositeTextSizes[1].evaluate(_,{},X)],(he[0]>Bo||he[1]>Bo)&&ut(`${a.layerIds[0]}: Value for "text-size" is >= ${xd}. Reduce your "text-size".`)),a.addSymbols(a.text,te,he,S,v,_,I,r,P.lineStartIndex,P.lineLength,U,X);for(const we of D)O[we]=a.text.placedSymbolArray.length-1;return 4*te.length}function d2(a){for(const r in a)return a[r];return null}function Hz(a,r,l,d){const m=a.compareText;if(r in m){const v=m[r];for(let _=v.length-1;_>=0;_--)if(d.dist(v[_])<l)return!0}else m[r]=[];return m[r].push(d),!1}const f2=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class dx{static from(r){if(!(r instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[l,d]=new Uint8Array(r,0,2);if(l!==219)throw new Error("Data does not appear to be in a KDBush format.");const m=d>>4;if(m!==1)throw new Error(`Got v${m} data when expected v1.`);const v=f2[15&d];if(!v)throw new Error("Unrecognized array type.");const[_]=new Uint16Array(r,2,1),[S]=new Uint32Array(r,4,1);return new dx(S,_,v,r)}constructor(r,l=64,d=Float64Array,m){if(isNaN(r)||r<0)throw new Error(`Unpexpected numItems value: ${r}.`);this.numItems=+r,this.nodeSize=Math.min(Math.max(+l,2),65535),this.ArrayType=d,this.IndexArrayType=r<65536?Uint16Array:Uint32Array;const v=f2.indexOf(this.ArrayType),_=2*r*this.ArrayType.BYTES_PER_ELEMENT,S=r*this.IndexArrayType.BYTES_PER_ELEMENT,P=(8-S%8)%8;if(v<0)throw new Error(`Unexpected typed array class: ${d}.`);m&&m instanceof ArrayBuffer?(this.data=m,this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+S+P,2*r),this._pos=2*r,this._finished=!0):(this.data=new ArrayBuffer(8+_+S+P),this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+S+P,2*r),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+v]),new Uint16Array(this.data,2,1)[0]=l,new Uint32Array(this.data,4,1)[0]=r)}add(r,l){const d=this._pos>>1;return this.ids[d]=d,this.coords[this._pos++]=r,this.coords[this._pos++]=l,d}finish(){const r=this._pos>>1;if(r!==this.numItems)throw new Error(`Added ${r} items when expected ${this.numItems}.`);return fx(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(r,l,d,m){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:v,coords:_,nodeSize:S}=this,P=[0,v.length-1,0],I=[];for(;P.length;){const D=P.pop()||0,O=P.pop()||0,U=P.pop()||0;if(O-U<=S){for(let oe=U;oe<=O;oe++){const he=_[2*oe],we=_[2*oe+1];he>=r&&he<=d&&we>=l&&we<=m&&I.push(v[oe])}continue}const W=U+O>>1,X=_[2*W],te=_[2*W+1];X>=r&&X<=d&&te>=l&&te<=m&&I.push(v[W]),(D===0?r<=X:l<=te)&&(P.push(U),P.push(W-1),P.push(1-D)),(D===0?d>=X:m>=te)&&(P.push(W+1),P.push(O),P.push(1-D))}return I}within(r,l,d){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:m,coords:v,nodeSize:_}=this,S=[0,m.length-1,0],P=[],I=d*d;for(;S.length;){const D=S.pop()||0,O=S.pop()||0,U=S.pop()||0;if(O-U<=_){for(let oe=U;oe<=O;oe++)m2(v[2*oe],v[2*oe+1],r,l)<=I&&P.push(m[oe]);continue}const W=U+O>>1,X=v[2*W],te=v[2*W+1];m2(X,te,r,l)<=I&&P.push(m[W]),(D===0?r-d<=X:l-d<=te)&&(S.push(U),S.push(W-1),S.push(1-D)),(D===0?r+d>=X:l+d>=te)&&(S.push(W+1),S.push(O),S.push(1-D))}return P}}function fx(a,r,l,d,m,v){if(m-d<=l)return;const _=d+m>>1;p2(a,r,_,d,m,v),fx(a,r,l,d,_-1,1-v),fx(a,r,l,_+1,m,1-v)}function p2(a,r,l,d,m,v){for(;m>d;){if(m-d>600){const I=m-d+1,D=l-d+1,O=Math.log(I),U=.5*Math.exp(2*O/3),W=.5*Math.sqrt(O*U*(I-U)/I)*(D-I/2<0?-1:1);p2(a,r,l,Math.max(d,Math.floor(l-D*U/I+W)),Math.min(m,Math.floor(l+(I-D)*U/I+W)),v)}const _=r[2*l+v];let S=d,P=m;for(wd(a,r,d,l),r[2*m+v]>_&&wd(a,r,d,m);S<P;){for(wd(a,r,S,P),S++,P--;r[2*S+v]<_;)S++;for(;r[2*P+v]>_;)P--}r[2*d+v]===_?wd(a,r,d,P):(P++,wd(a,r,P,m)),P<=l&&(d=P+1),l<=P&&(m=P-1)}}function wd(a,r,l,d){px(a,l,d),px(r,2*l,2*d),px(r,2*l+1,2*d+1)}function px(a,r,l){const d=a[r];a[r]=a[l],a[l]=d}function m2(a,r,l,d){const m=a-l,v=r-d;return m*m+v*v}var mx;o.bh=void 0,(mx=o.bh||(o.bh={})).create="create",mx.load="load",mx.fullLoad="fullLoad";let om=null,bd=[];const gx=1e3/60,yx="loadTime",vx="fullLoadTime",Kz={mark(a){performance.mark(a)},frame(a){const r=a;om!=null&&bd.push(r-om),om=r},clearMetrics(){om=null,bd=[],performance.clearMeasures(yx),performance.clearMeasures(vx);for(const a in o.bh)performance.clearMarks(o.bh[a])},getPerformanceMetrics(){performance.measure(yx,o.bh.create,o.bh.load),performance.measure(vx,o.bh.create,o.bh.fullLoad);const a=performance.getEntriesByName(yx)[0].duration,r=performance.getEntriesByName(vx)[0].duration,l=bd.length,d=1/(bd.reduce((v,_)=>v+_,0)/l/1e3),m=bd.filter(v=>v>gx).reduce((v,_)=>v+(_-gx)/gx,0);return{loadTime:a,fullLoadTime:r,fps:d,percentDroppedFrames:m/(l+m)*100,totalFrames:l}}};o.$=function(a,r,l){var d,m,v,_,S,P,I,D,O,U,W,X,te=l[0],oe=l[1],he=l[2];return r===a?(a[12]=r[0]*te+r[4]*oe+r[8]*he+r[12],a[13]=r[1]*te+r[5]*oe+r[9]*he+r[13],a[14]=r[2]*te+r[6]*oe+r[10]*he+r[14],a[15]=r[3]*te+r[7]*oe+r[11]*he+r[15]):(m=r[1],v=r[2],_=r[3],S=r[4],P=r[5],I=r[6],D=r[7],O=r[8],U=r[9],W=r[10],X=r[11],a[0]=d=r[0],a[1]=m,a[2]=v,a[3]=_,a[4]=S,a[5]=P,a[6]=I,a[7]=D,a[8]=O,a[9]=U,a[10]=W,a[11]=X,a[12]=d*te+S*oe+O*he+r[12],a[13]=m*te+P*oe+U*he+r[13],a[14]=v*te+I*oe+W*he+r[14],a[15]=_*te+D*oe+X*he+r[15]),a},o.A=sc,o.B=pi,o.C=class{constructor(a,r,l){this.receive=d=>{const m=d.data,v=m.id;if(v&&(!m.targetMapId||this.mapId===m.targetMapId))if(m.type==="<cancel>"){delete this.tasks[v];const _=this.cancelCallbacks[v];delete this.cancelCallbacks[v],_&&_()}else je()||m.mustQueue?(this.tasks[v]=m,this.taskQueue.push(v),this.invoker.trigger()):this.processTask(v,m)},this.process=()=>{if(!this.taskQueue.length)return;const d=this.taskQueue.shift(),m=this.tasks[d];delete this.tasks[d],this.taskQueue.length&&this.invoker.trigger(),m&&this.processTask(d,m)},this.target=a,this.parent=r,this.mapId=l,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},this.invoker=new Bz(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=je()?a:window}send(a,r,l,d,m=!1){const v=Math.round(1e18*Math.random()).toString(36).substring(0,10);l&&(this.callbacks[v]=l);const _=[],S={id:v,type:a,hasCallback:!!l,targetMapId:d,mustQueue:m,sourceMapId:this.mapId,data:pa(r,_)};return this.target.postMessage(S,{transfer:_}),{cancel:()=>{l&&delete this.callbacks[v],this.target.postMessage({id:v,type:"<cancel>",targetMapId:d,sourceMapId:this.mapId})}}}processTask(a,r){if(r.type==="<response>"){const l=this.callbacks[a];delete this.callbacks[a],l&&(r.error?l(Do(r.error)):l(null,Do(r.data)))}else{let l=!1;const d=[],m=r.hasCallback?(S,P)=>{l=!0,delete this.cancelCallbacks[a];const I={id:a,type:"<response>",sourceMapId:this.mapId,error:S?pa(S):null,data:pa(P,d)};this.target.postMessage(I,{transfer:d})}:S=>{l=!0};let v=null;const _=Do(r.data);if(this.parent[r.type])v=this.parent[r.type](r.sourceMapId,_,m);else if("getWorkerSource"in this.parent){const S=r.type.split(".");v=this.parent.getWorkerSource(r.sourceMapId,S[0],_.source)[S[1]](_,m)}else m(new Error(`Could not find function ${r.type}`));!l&&v&&v.cancel&&(this.cancelCallbacks[a]=v.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},o.D=wt,o.E=Ie,o.F=function(a,r){const l={};for(let d=0;d<r.length;d++){const m=r[d];m in a&&(l[m]=a[m])}return l},o.G=US,o.H=qS,o.I=Jv,o.J=B,o.K=H,o.L=Vo,o.M=Rt,o.N=Xn,o.O=Hi,o.P=M,o.Q=Cn,o.R=Wi,o.S=pn,o.T=Op,o.U=nm,o.V=class extends Va{},o.W=ux,o.X=function(a,r){const l=window.document.createElement("video");l.muted=!0,l.onloadstart=function(){r(null,l)};for(let d=0;d<a.length;d++){const m=window.document.createElement("source");Ii(a[d])||(l.crossOrigin="Anonymous"),m.src=a[d],l.appendChild(m)}return{cancel:()=>{}}},o.Y=He,o.Z=function(){var a=new sc(16);return sc!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=0,a[12]=0,a[13]=0,a[14]=0),a[0]=1,a[5]=1,a[10]=1,a[15]=1,a},o._=w,o.a=Ke,o.a$=class extends Z{},o.a0=function(a,r,l){var d=l[0],m=l[1],v=l[2];return a[0]=r[0]*d,a[1]=r[1]*d,a[2]=r[2]*d,a[3]=r[3]*d,a[4]=r[4]*m,a[5]=r[5]*m,a[6]=r[6]*m,a[7]=r[7]*m,a[8]=r[8]*v,a[9]=r[9]*v,a[10]=r[10]*v,a[11]=r[11]*v,a[12]=r[12],a[13]=r[13],a[14]=r[14],a[15]=r[15],a},o.a1=Hb,o.a2=function(){return Ve++},o.a3=se,o.a4=hc,o.a5=function(){yi.isLoading()||yi.isLoaded()||Xh()!=="deferred"||zp()},o.a6=Bh,o.a7=Hl,o.a8=fn,o.a9=QS,o.aA=$l,o.aB=function(a){a=a.slice();const r=Object.create(null);for(let l=0;l<a.length;l++)r[a[l].id]=a[l];for(let l=0;l<a.length;l++)"ref"in a[l]&&(a[l]=tt(a[l],r[a[l].ref]));return a},o.aC=function(a){if(a.type==="custom")return new Nz(a);switch(a.type){case"background":return new zz(a);case"circle":return new _L(a);case"fill":return new VL(a);case"fill-extrusion":return new tz(a);case"heatmap":return new bL(a);case"hillshade":return new EL(a);case"line":return new uz(a);case"raster":return new Fz(a);case"symbol":return new tm(a)}},o.aD=qe,o.aE=function(a,r){if(!a)return[{command:Je.setStyle,args:[r]}];let l=[];try{if(!$e(a.version,r.version))return[{command:Je.setStyle,args:[r]}];$e(a.center,r.center)||l.push({command:Je.setCenter,args:[r.center]}),$e(a.zoom,r.zoom)||l.push({command:Je.setZoom,args:[r.zoom]}),$e(a.bearing,r.bearing)||l.push({command:Je.setBearing,args:[r.bearing]}),$e(a.pitch,r.pitch)||l.push({command:Je.setPitch,args:[r.pitch]}),$e(a.sprite,r.sprite)||l.push({command:Je.setSprite,args:[r.sprite]}),$e(a.glyphs,r.glyphs)||l.push({command:Je.setGlyphs,args:[r.glyphs]}),$e(a.transition,r.transition)||l.push({command:Je.setTransition,args:[r.transition]}),$e(a.light,r.light)||l.push({command:Je.setLight,args:[r.light]});const d={},m=[];(function(_,S,P,I){let D;for(D in S=S||{},_=_||{})Object.prototype.hasOwnProperty.call(_,D)&&(Object.prototype.hasOwnProperty.call(S,D)||xn(D,P,I));for(D in S)Object.prototype.hasOwnProperty.call(S,D)&&(Object.prototype.hasOwnProperty.call(_,D)?$e(_[D],S[D])||(_[D].type==="geojson"&&S[D].type==="geojson"&&Gi(_,S,D)?P.push({command:Je.setGeoJSONSourceData,args:[D,S[D].data]}):An(D,S,P,I)):$t(D,S,P))})(a.sources,r.sources,m,d);const v=[];a.layers&&a.layers.forEach(_=>{d[_.source]?l.push({command:Je.removeLayer,args:[_.id]}):v.push(_)}),l=l.concat(m),function(_,S,P){S=S||[];const I=(_=_||[]).map(Mi),D=S.map(Mi),O=_.reduce(Zi,{}),U=S.reduce(Zi,{}),W=I.slice(),X=Object.create(null);let te,oe,he,we,pe,Se,Ce;for(te=0,oe=0;te<I.length;te++)he=I[te],Object.prototype.hasOwnProperty.call(U,he)?oe++:(P.push({command:Je.removeLayer,args:[he]}),W.splice(W.indexOf(he,oe),1));for(te=0,oe=0;te<D.length;te++)he=D[D.length-1-te],W[W.length-1-te]!==he&&(Object.prototype.hasOwnProperty.call(O,he)?(P.push({command:Je.removeLayer,args:[he]}),W.splice(W.lastIndexOf(he,W.length-oe),1)):oe++,Se=W[W.length-te],P.push({command:Je.addLayer,args:[U[he],Se]}),W.splice(W.length-te,0,he),X[he]=!0);for(te=0;te<D.length;te++)if(he=D[te],we=O[he],pe=U[he],!X[he]&&!$e(we,pe))if($e(we.source,pe.source)&&$e(we["source-layer"],pe["source-layer"])&&$e(we.type,pe.type)){for(Ce in ua(we.layout,pe.layout,P,he,null,Je.setLayoutProperty),ua(we.paint,pe.paint,P,he,null,Je.setPaintProperty),$e(we.filter,pe.filter)||P.push({command:Je.setFilter,args:[he,pe.filter]}),$e(we.minzoom,pe.minzoom)&&$e(we.maxzoom,pe.maxzoom)||P.push({command:Je.setLayerZoomRange,args:[he,pe.minzoom,pe.maxzoom]}),we)Object.prototype.hasOwnProperty.call(we,Ce)&&Ce!=="layout"&&Ce!=="paint"&&Ce!=="filter"&&Ce!=="metadata"&&Ce!=="minzoom"&&Ce!=="maxzoom"&&(Ce.indexOf("paint.")===0?ua(we[Ce],pe[Ce],P,he,Ce.slice(6),Je.setPaintProperty):$e(we[Ce],pe[Ce])||P.push({command:Je.setLayerProperty,args:[he,Ce,pe[Ce]]}));for(Ce in pe)Object.prototype.hasOwnProperty.call(pe,Ce)&&!Object.prototype.hasOwnProperty.call(we,Ce)&&Ce!=="layout"&&Ce!=="paint"&&Ce!=="filter"&&Ce!=="metadata"&&Ce!=="minzoom"&&Ce!=="maxzoom"&&(Ce.indexOf("paint.")===0?ua(we[Ce],pe[Ce],P,he,Ce.slice(6),Je.setPaintProperty):$e(we[Ce],pe[Ce])||P.push({command:Je.setLayerProperty,args:[he,Ce,pe[Ce]]}))}else P.push({command:Je.removeLayer,args:[he]}),Se=W[W.lastIndexOf(he)+1],P.push({command:Je.addLayer,args:[pe,Se]})}(v,r.layers,l)}catch(d){console.warn("Unable to compute style diff:",d),l=[{command:Je.setStyle,args:[r]}]}return l},o.aF=function(a){const r=[],l=a.id;return l===void 0&&r.push({message:`layers.${l}: missing required property "id"`}),a.render===void 0&&r.push({message:`layers.${l}: missing required method "render"`}),a.renderingMode&&a.renderingMode!=="2d"&&a.renderingMode!=="3d"&&r.push({message:`layers.${l}: property "renderingMode" must be either "2d" or "3d"`}),r},o.aG=function a(r,l){if(Array.isArray(r)){if(!Array.isArray(l)||r.length!==l.length)return!1;for(let d=0;d<r.length;d++)if(!a(r[d],l[d]))return!1;return!0}if(typeof r=="object"&&r!==null&&l!==null){if(typeof l!="object"||Object.keys(r).length!==Object.keys(l).length)return!1;for(const d in r)if(!a(r[d],l[d]))return!1;return!0}return r===l},o.aH=Me,o.aI=pt,o.aJ=Ul,o.aK=function(a){return a({pluginStatus:Xr,pluginURL:ma}),Ul.on("pluginStateChange",a),a},o.aL=class extends Ua{constructor(a,r){super(a,r),this.current=0}set(a){this.current!==a&&(this.current=a,this.gl.uniform1i(this.location,a))}},o.aM=rc,o.aN=class extends Ua{constructor(a,r){super(a,r),this.current=Mv}set(a){if(a[12]!==this.current[12]||a[0]!==this.current[0])return this.current=a,void this.gl.uniformMatrix4fv(this.location,!1,a);for(let r=1;r<16;r++)if(a[r]!==this.current[r]){this.current=a,this.gl.uniformMatrix4fv(this.location,!1,a);break}}},o.aO=Vp,o.aP=class extends Ua{constructor(a,r){super(a,r),this.current=[0,0,0]}set(a){a[0]===this.current[0]&&a[1]===this.current[1]&&a[2]===this.current[2]||(this.current=a,this.gl.uniform3f(this.location,a[0],a[1],a[2]))}},o.aQ=class extends Ua{constructor(a,r){super(a,r),this.current=[0,0]}set(a){a[0]===this.current[0]&&a[1]===this.current[1]||(this.current=a,this.gl.uniform2f(this.location,a[0],a[1]))}},o.aR=jp,o.aS=function(a,r,l,d,m,v,_){var S=1/(r-l),P=1/(d-m),I=1/(v-_);return a[0]=-2*S,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*P,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*I,a[11]=0,a[12]=(r+l)*S,a[13]=(m+d)*P,a[14]=(_+v)*I,a[15]=1,a},o.aT=sn,o.aU=xL,o.aV=class extends p{},o.aW=fz,o.aX=class extends x{},o.aY=function(a){return a<=1?1:Math.pow(2,Math.ceil(Math.log(a)/Math.LN2))},o.aZ=Jb,o.a_=We,o.aa=function(a){const r={};if(a.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(l,d,m,v)=>{const _=m||v;return r[d]=!_||_.toLowerCase(),""}),r["max-age"]){const l=parseInt(r["max-age"],10);isNaN(l)?delete r["max-age"]:r["max-age"]=l}return r},o.ab=function(a,r){const l=[];for(const d in a)d in r||l.push(d);return l},o.ac=function(a){if(Re==null){const r=a.navigator?a.navigator.userAgent:null;Re=!!a.safari||!(!r||!(/\b(iPad|iPhone|iPod)\b/.test(r)||r.match("Safari")&&!r.match("Chrome")))}return Re},o.ad=Ee,o.ae=function(a,r,l){var d=Math.sin(l),m=Math.cos(l),v=r[0],_=r[1],S=r[2],P=r[3],I=r[4],D=r[5],O=r[6],U=r[7];return r!==a&&(a[8]=r[8],a[9]=r[9],a[10]=r[10],a[11]=r[11],a[12]=r[12],a[13]=r[13],a[14]=r[14],a[15]=r[15]),a[0]=v*m+I*d,a[1]=_*m+D*d,a[2]=S*m+O*d,a[3]=P*m+U*d,a[4]=I*m-v*d,a[5]=D*m-_*d,a[6]=O*m-S*d,a[7]=U*m-P*d,a},o.af=function(a){var r=new sc(16);return r[0]=a[0],r[1]=a[1],r[2]=a[2],r[3]=a[3],r[4]=a[4],r[5]=a[5],r[6]=a[6],r[7]=a[7],r[8]=a[8],r[9]=a[9],r[10]=a[10],r[11]=a[11],r[12]=a[12],r[13]=a[13],r[14]=a[14],r[15]=a[15],r},o.ag=Gp,o.ah=function(a,r){let l=0,d=0;if(a.kind==="constant")d=a.layoutSize;else if(a.kind!=="source"){const{interpolationType:m,minZoom:v,maxZoom:_}=a,S=m?Ee(mi.interpolationFactor(m,r,v,_),0,1):0;a.kind==="camera"?d=pi.number(a.minSize,a.maxSize,S):l=S}return{uSizeT:l,uSize:d}},o.aj=function(a,{uSize:r,uSizeT:l},{lowerSize:d,upperSize:m}){return a.kind==="source"?d/ya:a.kind==="composite"?pi.number(d/ya,m/ya,l):r},o.ak=rx,o.al=function(a,r,l,d){const m=r.y-a.y,v=r.x-a.x,_=d.y-l.y,S=d.x-l.x,P=_*v-S*m;if(P===0)return null;const I=(S*(a.y-l.y)-_*(a.x-l.x))/P;return new M(a.x+I*v,a.y+I*m)},o.am=t2,o.an=$b,o.ao=Ov,o.ap=nr,o.ar=nx,o.as=function(a,r){var l=r[0],d=r[1],m=r[2],v=r[3],_=r[4],S=r[5],P=r[6],I=r[7],D=r[8],O=r[9],U=r[10],W=r[11],X=r[12],te=r[13],oe=r[14],he=r[15],we=l*S-d*_,pe=l*P-m*_,Se=l*I-v*_,Ce=d*P-m*S,Oe=d*I-v*S,lt=m*I-v*P,yt=D*te-O*X,at=D*oe-U*X,rt=D*he-W*X,Xe=O*oe-U*te,dt=O*he-W*te,Ye=U*he-W*oe,Ze=we*Ye-pe*dt+Se*Xe+Ce*rt-Oe*at+lt*yt;return Ze?(a[0]=(S*Ye-P*dt+I*Xe)*(Ze=1/Ze),a[1]=(m*dt-d*Ye-v*Xe)*Ze,a[2]=(te*lt-oe*Oe+he*Ce)*Ze,a[3]=(U*Oe-O*lt-W*Ce)*Ze,a[4]=(P*rt-_*Ye-I*at)*Ze,a[5]=(l*Ye-m*rt+v*at)*Ze,a[6]=(oe*Se-X*lt-he*pe)*Ze,a[7]=(D*lt-U*Se+W*pe)*Ze,a[8]=(_*dt-S*rt+I*yt)*Ze,a[9]=(d*rt-l*dt-v*yt)*Ze,a[10]=(X*Oe-te*Se+he*we)*Ze,a[11]=(O*Se-D*Oe-W*we)*Ze,a[12]=(S*at-_*Xe-P*yt)*Ze,a[13]=(l*Xe-d*at+m*yt)*Ze,a[14]=(te*pe-X*Ce-oe*we)*Ze,a[15]=(D*Ce-O*pe+U*we)*Ze,a):null},o.at=hx,o.au=tx,o.av=dx,o.aw=function(){const a={},r=ue.$version;for(const l in ue.$root){const d=ue.$root[l];if(d.required){let m=null;m=l==="version"?r:d.type==="array"?[]:{},m!=null&&(a[l]=m)}}return a},o.ax=Je,o.ay=Mp,o.az=Wr,o.b=function(a,r){const l=new Blob([new Uint8Array(a)],{type:"image/png"});createImageBitmap(l).then(d=>{r(null,d)}).catch(d=>{r(new Error(`Could not load image because of ${d.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})},o.b0=gr,o.b1=function(a,r){var l=a[0],d=a[1],m=a[2],v=a[3],_=a[4],S=a[5],P=a[6],I=a[7],D=a[8],O=a[9],U=a[10],W=a[11],X=a[12],te=a[13],oe=a[14],he=a[15],we=r[0],pe=r[1],Se=r[2],Ce=r[3],Oe=r[4],lt=r[5],yt=r[6],at=r[7],rt=r[8],Xe=r[9],dt=r[10],Ye=r[11],Ze=r[12],Tt=r[13],xt=r[14],Vt=r[15];return Math.abs(l-we)<=Yr*Math.max(1,Math.abs(l),Math.abs(we))&&Math.abs(d-pe)<=Yr*Math.max(1,Math.abs(d),Math.abs(pe))&&Math.abs(m-Se)<=Yr*Math.max(1,Math.abs(m),Math.abs(Se))&&Math.abs(v-Ce)<=Yr*Math.max(1,Math.abs(v),Math.abs(Ce))&&Math.abs(_-Oe)<=Yr*Math.max(1,Math.abs(_),Math.abs(Oe))&&Math.abs(S-lt)<=Yr*Math.max(1,Math.abs(S),Math.abs(lt))&&Math.abs(P-yt)<=Yr*Math.max(1,Math.abs(P),Math.abs(yt))&&Math.abs(I-at)<=Yr*Math.max(1,Math.abs(I),Math.abs(at))&&Math.abs(D-rt)<=Yr*Math.max(1,Math.abs(D),Math.abs(rt))&&Math.abs(O-Xe)<=Yr*Math.max(1,Math.abs(O),Math.abs(Xe))&&Math.abs(U-dt)<=Yr*Math.max(1,Math.abs(U),Math.abs(dt))&&Math.abs(W-Ye)<=Yr*Math.max(1,Math.abs(W),Math.abs(Ye))&&Math.abs(X-Ze)<=Yr*Math.max(1,Math.abs(X),Math.abs(Ze))&&Math.abs(te-Tt)<=Yr*Math.max(1,Math.abs(te),Math.abs(Tt))&&Math.abs(oe-xt)<=Yr*Math.max(1,Math.abs(oe),Math.abs(xt))&&Math.abs(he-Vt)<=Yr*Math.max(1,Math.abs(he),Math.abs(Vt))},o.b2=function(a,r){return a[0]=r[0],a[1]=r[1],a[2]=r[2],a[3]=r[3],a[4]=r[4],a[5]=r[5],a[6]=r[6],a[7]=r[7],a[8]=r[8],a[9]=r[9],a[10]=r[10],a[11]=r[11],a[12]=r[12],a[13]=r[13],a[14]=r[14],a[15]=r[15],a},o.b3=function(a,r,l){return a[0]=r[0]*l[0],a[1]=r[1]*l[1],a[2]=r[2]*l[2],a[3]=r[3]*l[3],a},o.b4=function(a,r){return a[0]*r[0]+a[1]*r[1]+a[2]*r[2]+a[3]*r[3]},o.b5=Pe,o.b6=HS,o.b7=GS,o.b8=function(a,r,l,d,m){var v,_=1/Math.tan(r/2);return a[0]=_/l,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=_,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=-1,a[12]=0,a[13]=0,a[15]=0,m!=null&&m!==1/0?(a[10]=(m+d)*(v=1/(d-m)),a[14]=2*m*d*v):(a[10]=-1,a[14]=-2*d),a},o.b9=function(a,r,l){var d=Math.sin(l),m=Math.cos(l),v=r[4],_=r[5],S=r[6],P=r[7],I=r[8],D=r[9],O=r[10],U=r[11];return r!==a&&(a[0]=r[0],a[1]=r[1],a[2]=r[2],a[3]=r[3],a[12]=r[12],a[13]=r[13],a[14]=r[14],a[15]=r[15]),a[4]=v*m+I*d,a[5]=_*m+D*d,a[6]=S*m+O*d,a[7]=P*m+U*d,a[8]=I*m-v*d,a[9]=D*m-_*d,a[10]=O*m-S*d,a[11]=U*m-P*d,a},o.bA=C,o.bB=_S,o.bC=Zu,o.bD=yi,o.ba=J,o.bb=fe,o.bc=function(a,r){return a[0]=r[0],a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=r[1],a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=r[2],a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},o.bd=class extends Zl{},o.be=ox,o.bf=ZS,o.bg=Kz,o.bi=ki,o.bj=function(a,r,l=!1){if(Xr===Gh||Xr===Zh||Xr===Wh)throw new Error("setRTLTextPlugin cannot be called multiple times.");ma=hr.resolveURL(a),Xr=Gh,Hh=r,Kh(),l||zp()},o.bk=Xh,o.bl=function(a,r){const l={};for(let m=0;m<a.length;m++){const v=r&&r[a[m].id]||Xu(a[m]);r&&(r[a[m].id]=v);let _=l[v];_||(_=l[v]=[]),_.push(a[m])}const d=[];for(const m in l)d.push(l[m]);return d},o.bm=ht,o.bn=XS,o.bo=YS,o.bp=kS,o.bq=function(a){a.bucket.createArrays(),a.bucket.tilePixelRatio=Xn/(512*a.bucket.overscaling),a.bucket.compareText={},a.bucket.iconsNeedLinear=!1;const r=a.bucket.layers[0],l=r.layout,d=r._unevaluatedLayout._values,m={layoutIconSize:d["icon-size"].possiblyEvaluate(new fn(a.bucket.zoom+1),a.canonical),layoutTextSize:d["text-size"].possiblyEvaluate(new fn(a.bucket.zoom+1),a.canonical),textMaxSize:d["text-size"].possiblyEvaluate(new fn(18))};if(a.bucket.textSizeData.kind==="composite"){const{minZoom:I,maxZoom:D}=a.bucket.textSizeData;m.compositeTextSizes=[d["text-size"].possiblyEvaluate(new fn(I),a.canonical),d["text-size"].possiblyEvaluate(new fn(D),a.canonical)]}if(a.bucket.iconSizeData.kind==="composite"){const{minZoom:I,maxZoom:D}=a.bucket.iconSizeData;m.compositeIconSizes=[d["icon-size"].possiblyEvaluate(new fn(I),a.canonical),d["icon-size"].possiblyEvaluate(new fn(D),a.canonical)]}const v=l.get("text-line-height")*nr,_=l.get("text-rotation-alignment")!=="viewport"&&l.get("symbol-placement")!=="point",S=l.get("text-keep-upright"),P=l.get("text-size");for(const I of a.bucket.features){const D=l.get("text-font").evaluate(I,{},a.canonical).join(","),O=P.evaluate(I,{},a.canonical),U=m.layoutTextSize.evaluate(I,{},a.canonical),W=m.layoutIconSize.evaluate(I,{},a.canonical),X={horizontal:{},vertical:void 0},te=I.text;let oe,he=[0,0];if(te){const Se=te.toString(),Ce=l.get("text-letter-spacing").evaluate(I,{},a.canonical)*nr,Oe=Uh(Se)?Ce:0,lt=l.get("text-anchor").evaluate(I,{},a.canonical),yt=c2(r,I,a.canonical);if(!yt){const Ye=l.get("text-radial-offset").evaluate(I,{},a.canonical);he=Ye?u2(lt,[Ye*nr,cx]):l.get("text-offset").evaluate(I,{},a.canonical).map(Ze=>Ze*nr)}let at=_?"center":l.get("text-justify").evaluate(I,{},a.canonical);const rt=l.get("symbol-placement"),Xe=rt==="point"?l.get("text-max-width").evaluate(I,{},a.canonical)*nr:0,dt=()=>{a.bucket.allowVerticalPlacement&&$h(Se)&&(X.vertical=Yp(te,a.glyphMap,a.glyphPositions,a.imagePositions,D,Xe,v,lt,"left",Oe,he,o.ai.vertical,!0,rt,U,O))};if(!_&&yt){const Ye=new Set;if(at==="auto")for(let Tt=0;Tt<yt.values.length;Tt+=2)Ye.add(hx(yt.values[Tt]));else Ye.add(at);let Ze=!1;for(const Tt of Ye)if(!X.horizontal[Tt])if(Ze)X.horizontal[Tt]=X.horizontal[0];else{const xt=Yp(te,a.glyphMap,a.glyphPositions,a.imagePositions,D,Xe,v,"center",Tt,Oe,he,o.ai.horizontal,!1,rt,U,O);xt&&(X.horizontal[Tt]=xt,Ze=xt.positionedLines.length===1)}dt()}else{at==="auto"&&(at=hx(lt));const Ye=Yp(te,a.glyphMap,a.glyphPositions,a.imagePositions,D,Xe,v,lt,at,Oe,he,o.ai.horizontal,!1,rt,U,O);Ye&&(X.horizontal[at]=Ye),dt(),$h(Se)&&_&&S&&(X.vertical=Yp(te,a.glyphMap,a.glyphPositions,a.imagePositions,D,Xe,v,lt,at,Oe,he,o.ai.vertical,!1,rt,U,O))}}let we=!1;if(I.icon&&I.icon.name){const Se=a.imageMap[I.icon.name];Se&&(oe=Iz(a.imagePositions[I.icon.name],l.get("icon-offset").evaluate(I,{},a.canonical),l.get("icon-anchor").evaluate(I,{},a.canonical)),we=!!Se.sdf,a.bucket.sdfIcons===void 0?a.bucket.sdfIcons=we:a.bucket.sdfIcons!==we&&ut("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Se.pixelRatio!==a.bucket.pixelRatio||l.get("icon-rotate").constantOr(1)!==0)&&(a.bucket.iconsNeedLinear=!0))}const pe=d2(X.horizontal)||X.vertical;a.bucket.iconsInText=!!pe&&pe.iconsInText,(pe||oe)&&Wz(a.bucket,I,X,oe,a.imageMap,m,U,W,he,we,a.canonical)}a.showCollisionBoxes&&a.bucket.generateCollisionDebugBuffers()},o.br=Kv,o.bs=Zv,o.bt=Hv,o.bu=class{constructor(a){this._marks={start:[a.url,"start"].join("#"),end:[a.url,"end"].join("#"),measure:a.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let a=performance.getEntriesByName(this._marks.measure);return a.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),a=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),a}},o.bv=Qv,o.bw=Fo,o.bx=function(a,r,l,d,m){return w(this,void 0,void 0,function*(){if(H())try{return yield Rt(a,r,l,d,m)}catch{}return function(v,_,S,P,I){const D=v.width,O=v.height;Bt&&It||(Bt=new OffscreenCanvas(D,O),It=Bt.getContext("2d",{willReadFrequently:!0})),Bt.width=D,Bt.height=O,It.drawImage(v,0,0,D,O);const U=It.getImageData(_,S,P,I);return It.clearRect(0,0,D,O),U.data}(a,r,l,d,m)})},o.by=KS,o.bz=b,o.c=Zr,o.d=function(a,r){const l=new Image;l.onload=()=>{r(null,l),URL.revokeObjectURL(l.src),l.onload=null,window.requestAnimationFrame(()=>{l.src=ft})},l.onerror=()=>r(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const d=new Blob([new Uint8Array(a)],{type:"image/png"});l.src=a.byteLength?URL.createObjectURL(d):ft},o.e=ve,o.f=function(a,r){return cs(ve(a,{type:"json"}),r)},o.g=Hr,o.h=hr,o.i=je,o.j=ge,o.k=Ls,o.l=oa,o.m=cs,o.n=function(a){return new Qv(a).readFields(Ez,[])},o.o=function(a,r,l){if(!a.length)return l(null,[]);let d=a.length;const m=new Array(a.length);let v=null;a.forEach((_,S)=>{r(_,(P,I)=>{P&&(v=P),m[S]=I,--d==0&&l(v,m)})})},o.p=AS,o.q=ud,o.r=jn,o.s=Ii,o.t=Pv,o.u=ot,o.v=ue,o.w=ut,o.x=Ju,o.y=Vs,o.z=function([a,r,l]){return r+=90,r*=Math.PI/180,l*=Math.PI/180,{x:a*Math.cos(r)*Math.sin(l),y:a*Math.sin(r)*Math.sin(l),z:a*Math.cos(l)}}}),h(["./shared"],function(o){class w{constructor(j){this.keyCache={},j&&this.replace(j)}replace(j){this._layerConfigs={},this._layers={},this.update(j,[])}update(j,q){for(const ae of j){this._layerConfigs[ae.id]=ae;const le=this._layers[ae.id]=o.aC(ae);le._featureFilter=o.a6(le.filter),this.keyCache[ae.id]&&delete this.keyCache[ae.id]}for(const ae of q)delete this.keyCache[ae],delete this._layerConfigs[ae],delete this._layers[ae];this.familiesBySource={};const Y=o.bl(Object.values(this._layerConfigs),this.keyCache);for(const ae of Y){const le=ae.map(Le=>this._layers[Le.id]),be=le[0];if(be.visibility==="none")continue;const me=be.source||"";let de=this.familiesBySource[me];de||(de=this.familiesBySource[me]={});const _e=be.sourceLayer||"_geojsonTileLayer";let De=de[_e];De||(De=de[_e]=[]),De.push(le)}}}class b{constructor(j){const q={},Y=[];for(const me in j){const de=j[me],_e=q[me]={};for(const De in de){const Le=de[+De];if(!Le||Le.bitmap.width===0||Le.bitmap.height===0)continue;const Fe={x:0,y:0,w:Le.bitmap.width+2,h:Le.bitmap.height+2};Y.push(Fe),_e[De]={rect:Fe,metrics:Le.metrics}}}const{w:ae,h:le}=o.p(Y),be=new o.q({width:ae||1,height:le||1});for(const me in j){const de=j[me];for(const _e in de){const De=de[+_e];if(!De||De.bitmap.width===0||De.bitmap.height===0)continue;const Le=q[me][_e].rect;o.q.copy(De.bitmap,be,{x:0,y:0},{x:Le.x+1,y:Le.y+1},De.bitmap)}}this.image=be,this.positions=q}}o.bm("GlyphAtlas",b);class C{constructor(j){this.tileID=new o.O(j.tileID.overscaledZ,j.tileID.wrap,j.tileID.canonical.z,j.tileID.canonical.x,j.tileID.canonical.y),this.uid=j.uid,this.zoom=j.zoom,this.pixelRatio=j.pixelRatio,this.tileSize=j.tileSize,this.source=j.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=j.showCollisionBoxes,this.collectResourceTiming=!!j.collectResourceTiming,this.returnDependencies=!!j.returnDependencies,this.promoteId=j.promoteId,this.inFlightDependencies=[],this.dependencySentinel=-1}parse(j,q,Y,ae,le){this.status="parsing",this.data=j,this.collisionBoxArray=new o.a3;const be=new o.bn(Object.keys(j.layers).sort()),me=new o.bo(this.tileID,this.promoteId);me.bucketLayerIDs=[];const de={},_e={featureIndex:me,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Y},De=q.familiesBySource[this.source];for(const Kt in De){const Ht=j.layers[Kt];if(!Ht)continue;Ht.version===1&&o.w(`Vector tile source "${this.source}" layer "${Kt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Sr=be.encode(Kt),un=[];for(let Kn=0;Kn<Ht.length;Kn++){const pr=Ht.feature(Kn),Ri=me.getId(pr,Kt);un.push({feature:pr,id:Ri,index:Kn,sourceLayerIndex:Sr})}for(const Kn of De[Kt]){const pr=Kn[0];pr.source!==this.source&&o.w(`layer.source = ${pr.source} does not equal this.source = ${this.source}`),pr.minzoom&&this.zoom<Math.floor(pr.minzoom)||pr.maxzoom&&this.zoom>=pr.maxzoom||pr.visibility!=="none"&&(A(Kn,this.zoom,Y),(de[pr.id]=pr.createBucket({index:me.bucketLayerIDs.length,layers:Kn,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Sr,sourceID:this.source})).populate(un,_e,this.tileID.canonical),me.bucketLayerIDs.push(Kn.map(Ri=>Ri.id)))}}let Le,Fe,Et,Mt;const mt=o.aH(_e.glyphDependencies,Kt=>Object.keys(Kt).map(Number));this.inFlightDependencies.forEach(Kt=>Kt==null?void 0:Kt.cancel()),this.inFlightDependencies=[];const Ct=++this.dependencySentinel;Object.keys(mt).length?this.inFlightDependencies.push(ae.send("getGlyphs",{uid:this.uid,stacks:mt,source:this.source,tileID:this.tileID,type:"glyphs"},(Kt,Ht)=>{Ct===this.dependencySentinel&&(Le||(Le=Kt,Fe=Ht,on.call(this)))})):Fe={};const Lt=Object.keys(_e.iconDependencies);Lt.length?this.inFlightDependencies.push(ae.send("getImages",{icons:Lt,source:this.source,tileID:this.tileID,type:"icons"},(Kt,Ht)=>{Ct===this.dependencySentinel&&(Le||(Le=Kt,Et=Ht,on.call(this)))})):Et={};const tn=Object.keys(_e.patternDependencies);function on(){if(Le)return le(Le);if(Fe&&Et&&Mt){const Kt=new b(Fe),Ht=new o.bp(Et,Mt);for(const Sr in de){const un=de[Sr];un instanceof o.a4?(A(un.layers,this.zoom,Y),o.bq({bucket:un,glyphMap:Fe,glyphPositions:Kt.positions,imageMap:Et,imagePositions:Ht.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):un.hasPattern&&(un instanceof o.br||un instanceof o.bs||un instanceof o.bt)&&(A(un.layers,this.zoom,Y),un.addFeatures(_e,this.tileID.canonical,Ht.patternPositions))}this.status="done",le(null,{buckets:Object.values(de).filter(Sr=>!Sr.isEmpty()),featureIndex:me,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Kt.image,imageAtlas:Ht,glyphMap:this.returnDependencies?Fe:null,iconMap:this.returnDependencies?Et:null,glyphPositions:this.returnDependencies?Kt.positions:null})}}tn.length?this.inFlightDependencies.push(ae.send("getImages",{icons:tn,source:this.source,tileID:this.tileID,type:"patterns"},(Kt,Ht)=>{Ct===this.dependencySentinel&&(Le||(Le=Kt,Mt=Ht,on.call(this)))})):Mt={},on.call(this)}}function A(ie,j,q){const Y=new o.a8(j);for(const ae of ie)ae.recalculate(Y,q)}function M(ie,j){const q=o.l(ie.request,(Y,ae,le,be)=>{if(Y)j(Y);else if(ae)try{const me=new o.bw.VectorTile(new o.bv(ae));j(null,{vectorTile:me,rawData:ae,cacheControl:le,expires:be})}catch(me){const de=new Uint8Array(ae);let _e=`Unable to parse the tile at ${ie.request.url}, `;_e+=de[0]===31&&de[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${me.messge}`,j(new Error(_e))}});return()=>{q.cancel(),j()}}class N{constructor(j,q,Y,ae){this.actor=j,this.layerIndex=q,this.availableImages=Y,this.loadVectorData=ae||M,this.fetching={},this.loading={},this.loaded={}}loadTile(j,q){const Y=j.uid;this.loading||(this.loading={});const ae=!!(j&&j.request&&j.request.collectResourceTiming)&&new o.bu(j.request),le=this.loading[Y]=new C(j);le.abort=this.loadVectorData(j,(be,me)=>{if(delete this.loading[Y],be||!me)return le.status="done",this.loaded[Y]=le,q(be);const de=me.rawData,_e={};me.expires&&(_e.expires=me.expires),me.cacheControl&&(_e.cacheControl=me.cacheControl);const De={};if(ae){const Le=ae.finish();Le&&(De.resourceTiming=JSON.parse(JSON.stringify(Le)))}le.vectorTile=me.vectorTile,le.parse(me.vectorTile,this.layerIndex,this.availableImages,this.actor,(Le,Fe)=>{if(delete this.fetching[Y],Le||!Fe)return q(Le);q(null,o.e({rawTileData:de.slice(0)},Fe,_e,De))}),this.loaded=this.loaded||{},this.loaded[Y]=le,this.fetching[Y]={rawTileData:de,cacheControl:_e,resourceTiming:De}})}reloadTile(j,q){const Y=this.loaded,ae=j.uid;if(Y&&Y[ae]){const le=Y[ae];le.showCollisionBoxes=j.showCollisionBoxes,le.status==="parsing"?le.parse(le.vectorTile,this.layerIndex,this.availableImages,this.actor,(be,me)=>{if(be||!me)return q(be,me);let de;if(this.fetching[ae]){const{rawTileData:_e,cacheControl:De,resourceTiming:Le}=this.fetching[ae];delete this.fetching[ae],de=o.e({rawTileData:_e.slice(0)},me,De,Le)}else de=me;q(null,de)}):le.status==="done"&&(le.vectorTile?le.parse(le.vectorTile,this.layerIndex,this.availableImages,this.actor,q):q())}}abortTile(j,q){const Y=this.loading,ae=j.uid;Y&&Y[ae]&&Y[ae].abort&&(Y[ae].abort(),delete Y[ae]),q()}removeTile(j,q){const Y=this.loaded,ae=j.uid;Y&&Y[ae]&&delete Y[ae],q()}}class V{constructor(){this.loaded={}}loadTile(j,q){return o._(this,void 0,void 0,function*(){const{uid:Y,encoding:ae,rawImageData:le,redFactor:be,greenFactor:me,blueFactor:de,baseShift:_e}=j,De=le.width+2,Le=le.height+2,Fe=o.a(le)?new o.R({width:De,height:Le},yield o.bx(le,-1,-1,De,Le)):le,Et=new o.by(Y,Fe,ae,be,me,de,_e);this.loaded=this.loaded||{},this.loaded[Y]=Et,q(null,Et)})}removeTile(j){const q=this.loaded,Y=j.uid;q&&q[Y]&&delete q[Y]}}function $(ie,j){if(ie.length!==0){G(ie[0],j);for(var q=1;q<ie.length;q++)G(ie[q],!j)}}function G(ie,j){for(var q=0,Y=0,ae=0,le=ie.length,be=le-1;ae<le;be=ae++){var me=(ie[ae][0]-ie[be][0])*(ie[be][1]+ie[ae][1]),de=q+me;Y+=Math.abs(q)>=Math.abs(me)?q-de+me:me-de+q,q=de}q+Y>=0!=!!j&&ie.reverse()}var F=o.bz(function ie(j,q){var Y,ae=j&&j.type;if(ae==="FeatureCollection")for(Y=0;Y<j.features.length;Y++)ie(j.features[Y],q);else if(ae==="GeometryCollection")for(Y=0;Y<j.geometries.length;Y++)ie(j.geometries[Y],q);else if(ae==="Feature")ie(j.geometry,q);else if(ae==="Polygon")$(j.coordinates,q);else if(ae==="MultiPolygon")for(Y=0;Y<j.coordinates.length;Y++)$(j.coordinates[Y],q);return j});const B=o.bw.VectorTileFeature.prototype.toGeoJSON;var H={exports:{}},J=o.bA,fe=o.bw.VectorTileFeature,Ee=Pe;function Pe(ie,j){this.options=j||{},this.features=ie,this.length=ie.length}function ve(ie,j){this.id=typeof ie.id=="number"?ie.id:void 0,this.type=ie.type,this.rawGeometry=ie.type===1?[ie.geometry]:ie.geometry,this.properties=ie.tags,this.extent=j||4096}Pe.prototype.feature=function(ie){return new ve(this.features[ie],this.options.extent)},ve.prototype.loadGeometry=function(){var ie=this.rawGeometry;this.geometry=[];for(var j=0;j<ie.length;j++){for(var q=ie[j],Y=[],ae=0;ae<q.length;ae++)Y.push(new J(q[ae][0],q[ae][1]));this.geometry.push(Y)}return this.geometry},ve.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var ie=this.geometry,j=1/0,q=-1/0,Y=1/0,ae=-1/0,le=0;le<ie.length;le++)for(var be=ie[le],me=0;me<be.length;me++){var de=be[me];j=Math.min(j,de.x),q=Math.max(q,de.x),Y=Math.min(Y,de.y),ae=Math.max(ae,de.y)}return[j,Y,q,ae]},ve.prototype.toGeoJSON=fe.prototype.toGeoJSON;var Ve=o.bB,Me=Ee;function pt(ie){var j=new Ve;return function(q,Y){for(var ae in q.layers)Y.writeMessage(3,qe,q.layers[ae])}(ie,j),j.finish()}function qe(ie,j){var q;j.writeVarintField(15,ie.version||1),j.writeStringField(1,ie.name||""),j.writeVarintField(5,ie.extent||4096);var Y={keys:[],values:[],keycache:{},valuecache:{}};for(q=0;q<ie.length;q++)Y.feature=ie.feature(q),j.writeMessage(2,it,Y);var ae=Y.keys;for(q=0;q<ae.length;q++)j.writeStringField(3,ae[q]);var le=Y.values;for(q=0;q<le.length;q++)j.writeMessage(4,Re,le[q])}function it(ie,j){var q=ie.feature;q.id!==void 0&&j.writeVarintField(1,q.id),j.writeMessage(2,ut,ie),j.writeVarintField(3,q.type),j.writeMessage(4,je,q)}function ut(ie,j){var q=ie.feature,Y=ie.keys,ae=ie.values,le=ie.keycache,be=ie.valuecache;for(var me in q.properties){var de=q.properties[me],_e=le[me];if(de!==null){_e===void 0&&(Y.push(me),le[me]=_e=Y.length-1),j.writeVarint(_e);var De=typeof de;De!=="string"&&De!=="boolean"&&De!=="number"&&(de=JSON.stringify(de));var Le=De+":"+de,Fe=be[Le];Fe===void 0&&(ae.push(de),be[Le]=Fe=ae.length-1),j.writeVarint(Fe)}}}function bt(ie,j){return(j<<3)+(7&ie)}function ct(ie){return ie<<1^ie>>31}function je(ie,j){for(var q=ie.loadGeometry(),Y=ie.type,ae=0,le=0,be=q.length,me=0;me<be;me++){var de=q[me],_e=1;Y===1&&(_e=de.length),j.writeVarint(bt(1,_e));for(var De=Y===3?de.length-1:de.length,Le=0;Le<De;Le++){Le===1&&Y!==1&&j.writeVarint(bt(2,De-1));var Fe=de[Le].x-ae,Et=de[Le].y-le;j.writeVarint(ct(Fe)),j.writeVarint(ct(Et)),ae+=Fe,le+=Et}Y===3&&j.writeVarint(bt(7,1))}}function Re(ie,j){var q=typeof ie;q==="string"?j.writeStringField(1,ie):q==="boolean"?j.writeBooleanField(7,ie):q==="number"&&(ie%1!=0?j.writeDoubleField(3,ie):ie<0?j.writeSVarintField(6,ie):j.writeVarintField(5,ie))}H.exports=pt,H.exports.fromVectorTileJs=pt,H.exports.fromGeojsonVt=function(ie,j){j=j||{};var q={};for(var Y in ie)q[Y]=new Me(ie[Y].features,j),q[Y].name=Y,q[Y].version=j.version,q[Y].extent=j.extent;return pt({layers:q})},H.exports.GeoJSONWrapper=Me;var Ke=o.bz(H.exports);const ft={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ie=>ie},Rt=Math.fround||(Bt=new Float32Array(1),ie=>(Bt[0]=+ie,Bt[0]));var Bt;const It=3,vn=5,hi=6;class hr{constructor(j){this.options=Object.assign(Object.create(ft),j),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(j){const{log:q,minZoom:Y,maxZoom:ae}=this.options;q&&console.time("total time");const le=`prepare ${j.length} points`;q&&console.time(le),this.points=j;const be=[];for(let de=0;de<j.length;de++){const _e=j[de];if(!_e.geometry)continue;const[De,Le]=_e.geometry.coordinates,Fe=Rt(Wr(De)),Et=Rt(Hr(Le));be.push(Fe,Et,1/0,de,-1,1),this.options.reduce&&be.push(0)}let me=this.trees[ae+1]=this._createTree(be);q&&console.timeEnd(le);for(let de=ae;de>=Y;de--){const _e=+Date.now();me=this.trees[de]=this._createTree(this._cluster(me,de)),q&&console.log("z%d: %d clusters in %dms",de,me.numItems,+Date.now()-_e)}return q&&console.timeEnd("total time"),this}getClusters(j,q){let Y=((j[0]+180)%360+360)%360-180;const ae=Math.max(-90,Math.min(90,j[1]));let le=j[2]===180?180:((j[2]+180)%360+360)%360-180;const be=Math.max(-90,Math.min(90,j[3]));if(j[2]-j[0]>=360)Y=-180,le=180;else if(Y>le){const Le=this.getClusters([Y,ae,180,be],q),Fe=this.getClusters([-180,ae,le,be],q);return Le.concat(Fe)}const me=this.trees[this._limitZoom(q)],de=me.range(Wr(Y),Hr(be),Wr(le),Hr(ae)),_e=me.data,De=[];for(const Le of de){const Fe=this.stride*Le;De.push(_e[Fe+vn]>1?Zr(_e,Fe,this.clusterProps):this.points[_e[Fe+It]])}return De}getChildren(j){const q=this._getOriginId(j),Y=this._getOriginZoom(j),ae="No cluster with the specified id.",le=this.trees[Y];if(!le)throw new Error(ae);const be=le.data;if(q*this.stride>=be.length)throw new Error(ae);const me=this.options.radius/(this.options.extent*Math.pow(2,Y-1)),de=le.within(be[q*this.stride],be[q*this.stride+1],me),_e=[];for(const De of de){const Le=De*this.stride;be[Le+4]===j&&_e.push(be[Le+vn]>1?Zr(be,Le,this.clusterProps):this.points[be[Le+It]])}if(_e.length===0)throw new Error(ae);return _e}getLeaves(j,q,Y){const ae=[];return this._appendLeaves(ae,j,q=q||10,Y=Y||0,0),ae}getTile(j,q,Y){const ae=this.trees[this._limitZoom(j)],le=Math.pow(2,j),{extent:be,radius:me}=this.options,de=me/be,_e=(Y-de)/le,De=(Y+1+de)/le,Le={features:[]};return this._addTileFeatures(ae.range((q-de)/le,_e,(q+1+de)/le,De),ae.data,q,Y,le,Le),q===0&&this._addTileFeatures(ae.range(1-de/le,_e,1,De),ae.data,le,Y,le,Le),q===le-1&&this._addTileFeatures(ae.range(0,_e,de/le,De),ae.data,-1,Y,le,Le),Le.features.length?Le:null}getClusterExpansionZoom(j){let q=this._getOriginZoom(j)-1;for(;q<=this.options.maxZoom;){const Y=this.getChildren(j);if(q++,Y.length!==1)break;j=Y[0].properties.cluster_id}return q}_appendLeaves(j,q,Y,ae,le){const be=this.getChildren(q);for(const me of be){const de=me.properties;if(de&&de.cluster?le+de.point_count<=ae?le+=de.point_count:le=this._appendLeaves(j,de.cluster_id,Y,ae,le):le<ae?le++:j.push(me),j.length===Y)break}return le}_createTree(j){const q=new o.av(j.length/this.stride|0,this.options.nodeSize,Float32Array);for(let Y=0;Y<j.length;Y+=this.stride)q.add(j[Y],j[Y+1]);return q.finish(),q.data=j,q}_addTileFeatures(j,q,Y,ae,le,be){for(const me of j){const de=me*this.stride,_e=q[de+vn]>1;let De,Le,Fe;if(_e)De=ki(q,de,this.clusterProps),Le=q[de],Fe=q[de+1];else{const mt=this.points[q[de+It]];De=mt.properties;const[Ct,Lt]=mt.geometry.coordinates;Le=Wr(Ct),Fe=Hr(Lt)}const Et={type:1,geometry:[[Math.round(this.options.extent*(Le*le-Y)),Math.round(this.options.extent*(Fe*le-ae))]],tags:De};let Mt;Mt=_e||this.options.generateId?q[de+It]:this.points[q[de+It]].id,Mt!==void 0&&(Et.id=Mt),be.features.push(Et)}}_limitZoom(j){return Math.max(this.options.minZoom,Math.min(Math.floor(+j),this.options.maxZoom+1))}_cluster(j,q){const{radius:Y,extent:ae,reduce:le,minPoints:be}=this.options,me=Y/(ae*Math.pow(2,q)),de=j.data,_e=[],De=this.stride;for(let Le=0;Le<de.length;Le+=De){if(de[Le+2]<=q)continue;de[Le+2]=q;const Fe=de[Le],Et=de[Le+1],Mt=j.within(de[Le],de[Le+1],me),mt=de[Le+vn];let Ct=mt;for(const Lt of Mt){const tn=Lt*De;de[tn+2]>q&&(Ct+=de[tn+vn])}if(Ct>mt&&Ct>=be){let Lt,tn=Fe*mt,on=Et*mt,Kt=-1;const Ht=((Le/De|0)<<5)+(q+1)+this.points.length;for(const Sr of Mt){const un=Sr*De;if(de[un+2]<=q)continue;de[un+2]=q;const Kn=de[un+vn];tn+=de[un]*Kn,on+=de[un+1]*Kn,de[un+4]=Ht,le&&(Lt||(Lt=this._map(de,Le,!0),Kt=this.clusterProps.length,this.clusterProps.push(Lt)),le(Lt,this._map(de,un)))}de[Le+4]=Ht,_e.push(tn/Ct,on/Ct,1/0,Ht,-1,Ct),le&&_e.push(Kt)}else{for(let Lt=0;Lt<De;Lt++)_e.push(de[Le+Lt]);if(Ct>1)for(const Lt of Mt){const tn=Lt*De;if(!(de[tn+2]<=q)){de[tn+2]=q;for(let on=0;on<De;on++)_e.push(de[tn+on])}}}}return _e}_getOriginId(j){return j-this.points.length>>5}_getOriginZoom(j){return(j-this.points.length)%32}_map(j,q,Y){if(j[q+vn]>1){const be=this.clusterProps[j[q+hi]];return Y?Object.assign({},be):be}const ae=this.points[j[q+It]].properties,le=this.options.map(ae);return Y&&le===ae?Object.assign({},le):le}}function Zr(ie,j,q){return{type:"Feature",id:ie[j+It],properties:ki(ie,j,q),geometry:{type:"Point",coordinates:[(Y=ie[j],360*(Y-.5)),aa(ie[j+1])]}};var Y}function ki(ie,j,q){const Y=ie[j+vn],ae=Y>=1e4?`${Math.round(Y/1e3)}k`:Y>=1e3?Math.round(Y/100)/10+"k":Y,le=ie[j+hi],be=le===-1?{}:Object.assign({},q[le]);return Object.assign(be,{cluster:!0,cluster_id:ie[j+It],point_count:Y,point_count_abbreviated:ae})}function Wr(ie){return ie/360+.5}function Hr(ie){const j=Math.sin(ie*Math.PI/180),q=.5-.25*Math.log((1+j)/(1-j))/Math.PI;return q<0?0:q>1?1:q}function aa(ie){const j=(180-360*ie)*Math.PI/180;return 360*Math.atan(Math.exp(j))/Math.PI-90}function cs(ie,j,q,Y){for(var ae,le=Y,be=q-j>>1,me=q-j,de=ie[j],_e=ie[j+1],De=ie[q],Le=ie[q+1],Fe=j+3;Fe<q;Fe+=3){var Et=oa(ie[Fe],ie[Fe+1],de,_e,De,Le);if(Et>le)ae=Fe,le=Et;else if(Et===le){var Mt=Math.abs(Fe-be);Mt<me&&(ae=Fe,me=Mt)}}le>Y&&(ae-j>3&&cs(ie,j,ae,Y),ie[ae+2]=le,q-ae>3&&cs(ie,ae,q,Y))}function oa(ie,j,q,Y,ae,le){var be=ae-q,me=le-Y;if(be!==0||me!==0){var de=((ie-q)*be+(j-Y)*me)/(be*be+me*me);de>1?(q=ae,Y=le):de>0&&(q+=be*de,Y+=me*de)}return(be=ie-q)*be+(me=j-Y)*me}function Ii(ie,j,q,Y){var ae={id:ie===void 0?null:ie,type:j,geometry:q,tags:Y,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(le){var be=le.geometry,me=le.type;if(me==="Point"||me==="MultiPoint"||me==="LineString")Ra(le,be);else if(me==="Polygon"||me==="MultiLineString")for(var de=0;de<be.length;de++)Ra(le,be[de]);else if(me==="MultiPolygon")for(de=0;de<be.length;de++)for(var _e=0;_e<be[de].length;_e++)Ra(le,be[de][_e])}(ae),ae}function Ra(ie,j){for(var q=0;q<j.length;q+=3)ie.minX=Math.min(ie.minX,j[q]),ie.minY=Math.min(ie.minY,j[q+1]),ie.maxX=Math.max(ie.maxX,j[q]),ie.maxY=Math.max(ie.maxY,j[q+1])}function la(ie,j,q,Y){if(j.geometry){var ae=j.geometry.coordinates,le=j.geometry.type,be=Math.pow(q.tolerance/((1<<q.maxZoom)*q.extent),2),me=[],de=j.id;if(q.promoteId?de=j.properties[q.promoteId]:q.generateId&&(de=Y||0),le==="Point")Ls(ae,me);else if(le==="MultiPoint")for(var _e=0;_e<ae.length;_e++)Ls(ae[_e],me);else if(le==="LineString")ge(ae,me,be,!1);else if(le==="MultiLineString"){if(q.lineMetrics){for(_e=0;_e<ae.length;_e++)ge(ae[_e],me=[],be,!1),ie.push(Ii(de,"LineString",me,j.properties));return}Ie(ae,me,be,!1)}else if(le==="Polygon")Ie(ae,me,be,!0);else{if(le!=="MultiPolygon"){if(le==="GeometryCollection"){for(_e=0;_e<j.geometry.geometries.length;_e++)la(ie,{id:de,geometry:j.geometry.geometries[_e],properties:j.properties},q,Y);return}throw new Error("Input data is not a valid GeoJSON object.")}for(_e=0;_e<ae.length;_e++){var De=[];Ie(ae[_e],De,be,!0),me.push(De)}}ie.push(Ii(de,le,me,j.properties))}}function Ls(ie,j){j.push(ue(ie[0])),j.push(st(ie[1])),j.push(0)}function ge(ie,j,q,Y){for(var ae,le,be=0,me=0;me<ie.length;me++){var de=ue(ie[me][0]),_e=st(ie[me][1]);j.push(de),j.push(_e),j.push(0),me>0&&(be+=Y?(ae*_e-de*le)/2:Math.sqrt(Math.pow(de-ae,2)+Math.pow(_e-le,2))),ae=de,le=_e}var De=j.length-3;j[2]=1,cs(j,0,De,q),j[De+2]=1,j.size=Math.abs(be),j.start=0,j.end=j.size}function Ie(ie,j,q,Y){for(var ae=0;ae<ie.length;ae++){var le=[];ge(ie[ae],le,q,Y),j.push(le)}}function ue(ie){return ie/360+.5}function st(ie){var j=Math.sin(ie*Math.PI/180),q=.5-.25*Math.log((1+j)/(1-j))/Math.PI;return q<0?0:q>1?1:q}function tt(ie,j,q,Y,ae,le,be,me){if(Y/=j,le>=(q/=j)&&be<Y)return ie;if(be<q||le>=Y)return null;for(var de=[],_e=0;_e<ie.length;_e++){var De=ie[_e],Le=De.geometry,Fe=De.type,Et=ae===0?De.minX:De.minY,Mt=ae===0?De.maxX:De.maxY;if(Et>=q&&Mt<Y)de.push(De);else if(!(Mt<q||Et>=Y)){var mt=[];if(Fe==="Point"||Fe==="MultiPoint")$e(Le,mt,q,Y,ae);else if(Fe==="LineString")Je(Le,mt,q,Y,ae,!1,me.lineMetrics);else if(Fe==="MultiLineString")xn(Le,mt,q,Y,ae,!1);else if(Fe==="Polygon")xn(Le,mt,q,Y,ae,!0);else if(Fe==="MultiPolygon")for(var Ct=0;Ct<Le.length;Ct++){var Lt=[];xn(Le[Ct],Lt,q,Y,ae,!0),Lt.length&&mt.push(Lt)}if(mt.length){if(me.lineMetrics&&Fe==="LineString"){for(Ct=0;Ct<mt.length;Ct++)de.push(Ii(De.id,Fe,mt[Ct],De.tags));continue}Fe!=="LineString"&&Fe!=="MultiLineString"||(mt.length===1?(Fe="LineString",mt=mt[0]):Fe="MultiLineString"),Fe!=="Point"&&Fe!=="MultiPoint"||(Fe=mt.length===3?"Point":"MultiPoint"),de.push(Ii(De.id,Fe,mt,De.tags))}}}return de.length?de:null}function $e(ie,j,q,Y,ae){for(var le=0;le<ie.length;le+=3){var be=ie[le+ae];be>=q&&be<=Y&&(j.push(ie[le]),j.push(ie[le+1]),j.push(ie[le+2]))}}function Je(ie,j,q,Y,ae,le,be){for(var me,de,_e=$t(ie),De=ae===0?Gi:ua,Le=ie.start,Fe=0;Fe<ie.length-3;Fe+=3){var Et=ie[Fe],Mt=ie[Fe+1],mt=ie[Fe+2],Ct=ie[Fe+3],Lt=ie[Fe+4],tn=ae===0?Et:Mt,on=ae===0?Ct:Lt,Kt=!1;be&&(me=Math.sqrt(Math.pow(Et-Ct,2)+Math.pow(Mt-Lt,2))),tn<q?on>q&&(de=De(_e,Et,Mt,Ct,Lt,q),be&&(_e.start=Le+me*de)):tn>Y?on<Y&&(de=De(_e,Et,Mt,Ct,Lt,Y),be&&(_e.start=Le+me*de)):An(_e,Et,Mt,mt),on<q&&tn>=q&&(de=De(_e,Et,Mt,Ct,Lt,q),Kt=!0),on>Y&&tn<=Y&&(de=De(_e,Et,Mt,Ct,Lt,Y),Kt=!0),!le&&Kt&&(be&&(_e.end=Le+me*de),j.push(_e),_e=$t(ie)),be&&(Le+=me)}var Ht=ie.length-3;Et=ie[Ht],Mt=ie[Ht+1],mt=ie[Ht+2],(tn=ae===0?Et:Mt)>=q&&tn<=Y&&An(_e,Et,Mt,mt),Ht=_e.length-3,le&&Ht>=3&&(_e[Ht]!==_e[0]||_e[Ht+1]!==_e[1])&&An(_e,_e[0],_e[1],_e[2]),_e.length&&j.push(_e)}function $t(ie){var j=[];return j.size=ie.size,j.start=ie.start,j.end=ie.end,j}function xn(ie,j,q,Y,ae,le){for(var be=0;be<ie.length;be++)Je(ie[be],j,q,Y,ae,le,!1)}function An(ie,j,q,Y){ie.push(j),ie.push(q),ie.push(Y)}function Gi(ie,j,q,Y,ae,le){var be=(le-j)/(Y-j);return ie.push(le),ie.push(q+(ae-q)*be),ie.push(1),be}function ua(ie,j,q,Y,ae,le){var be=(le-q)/(ae-q);return ie.push(j+(Y-j)*be),ie.push(le),ie.push(1),be}function Mi(ie,j){for(var q=[],Y=0;Y<ie.length;Y++){var ae,le=ie[Y],be=le.type;if(be==="Point"||be==="MultiPoint"||be==="LineString")ae=Zi(le.geometry,j);else if(be==="MultiLineString"||be==="Polygon"){ae=[];for(var me=0;me<le.geometry.length;me++)ae.push(Zi(le.geometry[me],j))}else if(be==="MultiPolygon")for(ae=[],me=0;me<le.geometry.length;me++){for(var de=[],_e=0;_e<le.geometry[me].length;_e++)de.push(Zi(le.geometry[me][_e],j));ae.push(de)}q.push(Ii(le.id,be,ae,le.tags))}return q}function Zi(ie,j){var q=[];q.size=ie.size,ie.start!==void 0&&(q.start=ie.start,q.end=ie.end);for(var Y=0;Y<ie.length;Y+=3)q.push(ie[Y]+j,ie[Y+1],ie[Y+2]);return q}function He(ie,j){if(ie.transformed)return ie;var q,Y,ae,le=1<<ie.z,be=ie.x,me=ie.y;for(q=0;q<ie.features.length;q++){var de=ie.features[q],_e=de.geometry,De=de.type;if(de.geometry=[],De===1)for(Y=0;Y<_e.length;Y+=2)de.geometry.push(di(_e[Y],_e[Y+1],j,le,be,me));else for(Y=0;Y<_e.length;Y++){var Le=[];for(ae=0;ae<_e[Y].length;ae+=2)Le.push(di(_e[Y][ae],_e[Y][ae+1],j,le,be,me));de.geometry.push(Le)}}return ie.transformed=!0,ie}function di(ie,j,q,Y,ae,le){return[Math.round(q*(ie*Y-ae)),Math.round(q*(j*Y-le))]}function _n(ie,j,q,Y,ae){for(var le=j===ae.maxZoom?0:ae.tolerance/((1<<j)*ae.extent),be={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:q,y:Y,z:j,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},me=0;me<ie.length;me++){be.numFeatures++,hs(be,ie[me],le,ae);var de=ie[me].minX,_e=ie[me].minY,De=ie[me].maxX,Le=ie[me].maxY;de<be.minX&&(be.minX=de),_e<be.minY&&(be.minY=_e),De>be.maxX&&(be.maxX=De),Le>be.maxY&&(be.maxY=Le)}return be}function hs(ie,j,q,Y){var ae=j.geometry,le=j.type,be=[];if(le==="Point"||le==="MultiPoint")for(var me=0;me<ae.length;me+=3)be.push(ae[me]),be.push(ae[me+1]),ie.numPoints++,ie.numSimplified++;else if(le==="LineString")zs(be,ae,ie,q,!1,!1);else if(le==="MultiLineString"||le==="Polygon")for(me=0;me<ae.length;me++)zs(be,ae[me],ie,q,le==="Polygon",me===0);else if(le==="MultiPolygon")for(var de=0;de<ae.length;de++){var _e=ae[de];for(me=0;me<_e.length;me++)zs(be,_e[me],ie,q,!0,me===0)}if(be.length){var De=j.tags||null;if(le==="LineString"&&Y.lineMetrics){for(var Le in De={},j.tags)De[Le]=j.tags[Le];De.mapbox_clip_start=ae.start/ae.size,De.mapbox_clip_end=ae.end/ae.size}var Fe={geometry:be,type:le==="Polygon"||le==="MultiPolygon"?3:le==="LineString"||le==="MultiLineString"?2:1,tags:De};j.id!==null&&(Fe.id=j.id),ie.features.push(Fe)}}function zs(ie,j,q,Y,ae,le){var be=Y*Y;if(Y>0&&j.size<(ae?be:Y))q.numPoints+=j.length/3;else{for(var me=[],de=0;de<j.length;de+=3)(Y===0||j[de+2]>be)&&(q.numSimplified++,me.push(j[de]),me.push(j[de+1])),q.numPoints++;ae&&function(_e,De){for(var Le=0,Fe=0,Et=_e.length,Mt=Et-2;Fe<Et;Mt=Fe,Fe+=2)Le+=(_e[Fe]-_e[Mt])*(_e[Fe+1]+_e[Mt+1]);if(Le>0===De)for(Fe=0,Et=_e.length;Fe<Et/2;Fe+=2){var mt=_e[Fe],Ct=_e[Fe+1];_e[Fe]=_e[Et-2-Fe],_e[Fe+1]=_e[Et-1-Fe],_e[Et-2-Fe]=mt,_e[Et-1-Fe]=Ct}}(me,le),ie.push(me)}}function et(ie,j){var q=(j=this.options=function(ae,le){for(var be in le)ae[be]=le[be];return ae}(Object.create(this.options),j)).debug;if(q&&console.time("preprocess data"),j.maxZoom<0||j.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(j.promoteId&&j.generateId)throw new Error("promoteId and generateId cannot be used together.");var Y=function(ae,le){var be=[];if(ae.type==="FeatureCollection")for(var me=0;me<ae.features.length;me++)la(be,ae.features[me],le,me);else la(be,ae.type==="Feature"?ae:{geometry:ae},le);return be}(ie,j);this.tiles={},this.tileCoords=[],q&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",j.indexMaxZoom,j.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Y=function(ae,le){var be=le.buffer/le.extent,me=ae,de=tt(ae,1,-1-be,be,0,-1,2,le),_e=tt(ae,1,1-be,2+be,0,-1,2,le);return(de||_e)&&(me=tt(ae,1,-be,1+be,0,-1,2,le)||[],de&&(me=Mi(de,1).concat(me)),_e&&(me=me.concat(Mi(_e,-1)))),me}(Y,j),Y.length&&this.splitTile(Y,0,0,0),q&&(Y.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Nt(ie,j,q){return 32*((1<<ie)*q+j)+ie}function Dt(ie,j){return j?ie.properties[j]:ie.id}function Rr(ie,j){if(ie==null)return!0;if(ie.type==="Feature")return Dt(ie,j)!=null;if(ie.type==="FeatureCollection"){const q=new Set;for(const Y of ie.features){const ae=Dt(Y,j);if(ae==null||q.has(ae))return!1;q.add(ae)}return!0}return!1}function ds(ie,j){const q=new Map;if(ie!=null)if(ie.type==="Feature")q.set(Dt(ie,j),ie);else for(const Y of ie.features)q.set(Dt(Y,j),Y);return q}et.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},et.prototype.splitTile=function(ie,j,q,Y,ae,le,be){for(var me=[ie,j,q,Y],de=this.options,_e=de.debug;me.length;){Y=me.pop(),q=me.pop(),j=me.pop(),ie=me.pop();var De=1<<j,Le=Nt(j,q,Y),Fe=this.tiles[Le];if(!Fe&&(_e>1&&console.time("creation"),Fe=this.tiles[Le]=_n(ie,j,q,Y,de),this.tileCoords.push({z:j,x:q,y:Y}),_e)){_e>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",j,q,Y,Fe.numFeatures,Fe.numPoints,Fe.numSimplified),console.timeEnd("creation"));var Et="z"+j;this.stats[Et]=(this.stats[Et]||0)+1,this.total++}if(Fe.source=ie,ae){if(j===de.maxZoom||j===ae)continue;var Mt=1<<ae-j;if(q!==Math.floor(le/Mt)||Y!==Math.floor(be/Mt))continue}else if(j===de.indexMaxZoom||Fe.numPoints<=de.indexMaxPoints)continue;if(Fe.source=null,ie.length!==0){_e>1&&console.time("clipping");var mt,Ct,Lt,tn,on,Kt,Ht=.5*de.buffer/de.extent,Sr=.5-Ht,un=.5+Ht,Kn=1+Ht;mt=Ct=Lt=tn=null,on=tt(ie,De,q-Ht,q+un,0,Fe.minX,Fe.maxX,de),Kt=tt(ie,De,q+Sr,q+Kn,0,Fe.minX,Fe.maxX,de),ie=null,on&&(mt=tt(on,De,Y-Ht,Y+un,1,Fe.minY,Fe.maxY,de),Ct=tt(on,De,Y+Sr,Y+Kn,1,Fe.minY,Fe.maxY,de),on=null),Kt&&(Lt=tt(Kt,De,Y-Ht,Y+un,1,Fe.minY,Fe.maxY,de),tn=tt(Kt,De,Y+Sr,Y+Kn,1,Fe.minY,Fe.maxY,de),Kt=null),_e>1&&console.timeEnd("clipping"),me.push(mt||[],j+1,2*q,2*Y),me.push(Ct||[],j+1,2*q,2*Y+1),me.push(Lt||[],j+1,2*q+1,2*Y),me.push(tn||[],j+1,2*q+1,2*Y+1)}}},et.prototype.getTile=function(ie,j,q){var Y=this.options,ae=Y.extent,le=Y.debug;if(ie<0||ie>24)return null;var be=1<<ie,me=Nt(ie,j=(j%be+be)%be,q);if(this.tiles[me])return He(this.tiles[me],ae);le>1&&console.log("drilling down to z%d-%d-%d",ie,j,q);for(var de,_e=ie,De=j,Le=q;!de&&_e>0;)_e--,De=Math.floor(De/2),Le=Math.floor(Le/2),de=this.tiles[Nt(_e,De,Le)];return de&&de.source?(le>1&&console.log("found parent tile z%d-%d-%d",_e,De,Le),le>1&&console.time("drilling down"),this.splitTile(de.source,_e,De,Le,ie,j,q),le>1&&console.timeEnd("drilling down"),this.tiles[me]?He(this.tiles[me],ae):null):null};class Ot extends N{constructor(j,q,Y,ae){super(j,q,Y),this._dataUpdateable=new Map,this.loadGeoJSON=(le,be)=>{const{promoteId:me}=le;if(le.request)return o.f(le.request,(de,_e,De,Le)=>{this._dataUpdateable=Rr(_e,me)?ds(_e,me):void 0,be(de,_e,De,Le)});if(typeof le.data=="string")try{const de=JSON.parse(le.data);this._dataUpdateable=Rr(de,me)?ds(de,me):void 0,be(null,de)}catch{be(new Error(`Input data given to '${le.source}' is not a valid GeoJSON object.`))}else le.dataDiff?this._dataUpdateable?(function(de,_e,De){var Le,Fe,Et,Mt;if(_e.removeAll&&de.clear(),_e.remove)for(const mt of _e.remove)de.delete(mt);if(_e.add)for(const mt of _e.add){const Ct=Dt(mt,De);Ct!=null&&de.set(Ct,mt)}if(_e.update)for(const mt of _e.update){let Ct=de.get(mt.id);if(Ct==null)continue;const Lt=!mt.removeAllProperties&&(((Le=mt.removeProperties)===null||Le===void 0?void 0:Le.length)>0||((Fe=mt.addOrUpdateProperties)===null||Fe===void 0?void 0:Fe.length)>0);if((mt.newGeometry||mt.removeAllProperties||Lt)&&(Ct=Object.assign({},Ct),de.set(mt.id,Ct),Lt&&(Ct.properties=Object.assign({},Ct.properties))),mt.newGeometry&&(Ct.geometry=mt.newGeometry),mt.removeAllProperties)Ct.properties={};else if(((Et=mt.removeProperties)===null||Et===void 0?void 0:Et.length)>0)for(const tn of mt.removeProperties)Object.prototype.hasOwnProperty.call(Ct.properties,tn)&&delete Ct.properties[tn];if(((Mt=mt.addOrUpdateProperties)===null||Mt===void 0?void 0:Mt.length)>0)for(const{key:tn,value:on}of mt.addOrUpdateProperties)Ct.properties[tn]=on}}(this._dataUpdateable,le.dataDiff,me),be(null,{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())})):be(new Error(`Cannot update existing geojson data in ${le.source}`)):be(new Error(`Input data given to '${le.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}},this.loadVectorData=this.loadGeoJSONTile,ae&&(this.loadGeoJSON=ae)}loadGeoJSONTile(j,q){const Y=j.tileID.canonical;if(!this._geoJSONIndex)return q(null,null);const ae=this._geoJSONIndex.getTile(Y.z,Y.x,Y.y);if(!ae)return q(null,null);const le=new class{constructor(me){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=o.N,this.length=me.length,this._features=me}feature(me){return new class{constructor(de){this._feature=de,this.extent=o.N,this.type=de.type,this.properties=de.tags,"id"in de&&!isNaN(de.id)&&(this.id=parseInt(de.id,10))}loadGeometry(){if(this._feature.type===1){const de=[];for(const _e of this._feature.geometry)de.push([new o.P(_e[0],_e[1])]);return de}{const de=[];for(const _e of this._feature.geometry){const De=[];for(const Le of _e)De.push(new o.P(Le[0],Le[1]));de.push(De)}return de}}toGeoJSON(de,_e,De){return B.call(this,de,_e,De)}}(this._features[me])}}(ae.features);let be=Ke(le);be.byteOffset===0&&be.byteLength===be.buffer.byteLength||(be=new Uint8Array(be)),q(null,{vectorTile:le,rawData:be.buffer})}loadData(j,q){var Y;(Y=this._pendingRequest)===null||Y===void 0||Y.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const ae=!!(j&&j.request&&j.request.collectResourceTiming)&&new o.bu(j.request);this._pendingCallback=q,this._pendingRequest=this.loadGeoJSON(j,(le,be)=>{if(delete this._pendingCallback,delete this._pendingRequest,le||!be)return q(le);if(typeof be!="object")return q(new Error(`Input data given to '${j.source}' is not a valid GeoJSON object.`));{F(be,!0);try{if(j.filter){const de=o.bC(j.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(de.result==="error")throw new Error(de.value.map(De=>`${De.key}: ${De.message}`).join(", "));be={type:"FeatureCollection",features:be.features.filter(De=>de.value.evaluate({zoom:0},De))}}this._geoJSONIndex=j.cluster?new hr(function({superclusterOptions:de,clusterProperties:_e}){if(!_e||!de)return de;const De={},Le={},Fe={accumulated:null,zoom:0},Et={properties:null},Mt=Object.keys(_e);for(const mt of Mt){const[Ct,Lt]=_e[mt],tn=o.bC(Lt),on=o.bC(typeof Ct=="string"?[Ct,["accumulated"],["get",mt]]:Ct);De[mt]=tn.value,Le[mt]=on.value}return de.map=mt=>{Et.properties=mt;const Ct={};for(const Lt of Mt)Ct[Lt]=De[Lt].evaluate(Fe,Et);return Ct},de.reduce=(mt,Ct)=>{Et.properties=Ct;for(const Lt of Mt)Fe.accumulated=mt[Lt],mt[Lt]=Le[Lt].evaluate(Fe,Et)},de}(j)).load(be.features):function(de,_e){return new et(de,_e)}(be,j.geojsonVtOptions)}catch(de){return q(de)}this.loaded={};const me={};if(ae){const de=ae.finish();de&&(me.resourceTiming={},me.resourceTiming[j.source]=JSON.parse(JSON.stringify(de)))}q(null,me)}})}reloadTile(j,q){const Y=this.loaded;return Y&&Y[j.uid]?super.reloadTile(j,q):this.loadTile(j,q)}removeSource(j,q){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),q()}getClusterExpansionZoom(j,q){try{q(null,this._geoJSONIndex.getClusterExpansionZoom(j.clusterId))}catch(Y){q(Y)}}getClusterChildren(j,q){try{q(null,this._geoJSONIndex.getChildren(j.clusterId))}catch(Y){q(Y)}}getClusterLeaves(j,q){try{q(null,this._geoJSONIndex.getLeaves(j.clusterId,j.limit,j.offset))}catch(Y){q(Y)}}}class Os{constructor(j){this.self=j,this.actor=new o.C(j,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:N,geojson:Ot},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(q,Y)=>{if(this.workerSourceTypes[q])throw new Error(`Worker source with name "${q}" already registered.`);this.workerSourceTypes[q]=Y},this.self.registerRTLTextPlugin=q=>{if(o.bD.isParsed())throw new Error("RTL text plugin already registered.");o.bD.applyArabicShaping=q.applyArabicShaping,o.bD.processBidirectionalText=q.processBidirectionalText,o.bD.processStyledBidirectionalText=q.processStyledBidirectionalText}}setReferrer(j,q){this.referrer=q}setImages(j,q,Y){this.availableImages[j]=q;for(const ae in this.workerSources[j]){const le=this.workerSources[j][ae];for(const be in le)le[be].availableImages=q}Y()}setLayers(j,q,Y){this.getLayerIndex(j).replace(q),Y()}updateLayers(j,q,Y){this.getLayerIndex(j).update(q.layers,q.removedIds),Y()}loadTile(j,q,Y){this.getWorkerSource(j,q.type,q.source).loadTile(q,Y)}loadDEMTile(j,q,Y){this.getDEMWorkerSource(j,q.source).loadTile(q,Y)}reloadTile(j,q,Y){this.getWorkerSource(j,q.type,q.source).reloadTile(q,Y)}abortTile(j,q,Y){this.getWorkerSource(j,q.type,q.source).abortTile(q,Y)}removeTile(j,q,Y){this.getWorkerSource(j,q.type,q.source).removeTile(q,Y)}removeDEMTile(j,q){this.getDEMWorkerSource(j,q.source).removeTile(q)}removeSource(j,q,Y){if(!this.workerSources[j]||!this.workerSources[j][q.type]||!this.workerSources[j][q.type][q.source])return;const ae=this.workerSources[j][q.type][q.source];delete this.workerSources[j][q.type][q.source],ae.removeSource!==void 0?ae.removeSource(q,Y):Y()}loadWorkerSource(j,q,Y){try{this.self.importScripts(q.url),Y()}catch(ae){Y(ae.toString())}}syncRTLPluginState(j,q,Y){try{o.bD.setState(q);const ae=o.bD.getPluginURL();if(o.bD.isLoaded()&&!o.bD.isParsed()&&ae!=null){this.self.importScripts(ae);const le=o.bD.isParsed();Y(le?void 0:new Error(`RTL Text Plugin failed to import scripts from ${ae}`),le)}}catch(ae){Y(ae.toString())}}getAvailableImages(j){let q=this.availableImages[j];return q||(q=[]),q}getLayerIndex(j){let q=this.layerIndexes[j];return q||(q=this.layerIndexes[j]=new w),q}getWorkerSource(j,q,Y){return this.workerSources[j]||(this.workerSources[j]={}),this.workerSources[j][q]||(this.workerSources[j][q]={}),this.workerSources[j][q][Y]||(this.workerSources[j][q][Y]=new this.workerSourceTypes[q]({send:(ae,le,be)=>{this.actor.send(ae,le,be,j)}},this.getLayerIndex(j),this.getAvailableImages(j))),this.workerSources[j][q][Y]}getDEMWorkerSource(j,q){return this.demWorkerSources[j]||(this.demWorkerSources[j]={}),this.demWorkerSources[j][q]||(this.demWorkerSources[j][q]=new V),this.demWorkerSources[j][q]}}return o.i()&&(self.worker=new Os(self)),Os}),h(["./shared"],function(o){var w="3.6.2";class b{static testProp(i){if(!b.docStyle)return i[0];for(let c=0;c<i.length;c++)if(i[c]in b.docStyle)return i[c];return i[0]}static create(i,c,p){const g=window.document.createElement(i);return c!==void 0&&(g.className=c),p&&p.appendChild(g),g}static createNS(i,c){return window.document.createElementNS(i,c)}static disableDrag(){b.docStyle&&b.selectProp&&(b.userSelect=b.docStyle[b.selectProp],b.docStyle[b.selectProp]="none")}static enableDrag(){b.docStyle&&b.selectProp&&(b.docStyle[b.selectProp]=b.userSelect)}static setTransform(i,c){i.style[b.transformProp]=c}static addEventListener(i,c,p,g={}){i.addEventListener(c,p,"passive"in g?g:g.capture)}static removeEventListener(i,c,p,g={}){i.removeEventListener(c,p,"passive"in g?g:g.capture)}static suppressClickInternal(i){i.preventDefault(),i.stopPropagation(),window.removeEventListener("click",b.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",b.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",b.suppressClickInternal,!0)},0)}static mousePos(i,c){const p=i.getBoundingClientRect();return new o.P(c.clientX-p.left-i.clientLeft,c.clientY-p.top-i.clientTop)}static touchPos(i,c){const p=i.getBoundingClientRect(),g=[];for(let x=0;x<c.length;x++)g.push(new o.P(c[x].clientX-p.left-i.clientLeft,c[x].clientY-p.top-i.clientTop));return g}static mouseButton(i){return i.button}static remove(i){i.parentNode&&i.parentNode.removeChild(i)}}b.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,b.selectProp=b.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),b.transformProp=b.testProp(["transform","WebkitTransform"]);const C={supported:!1,testSupport:function(y){!N&&M&&(V?$(y):A=y)}};let A,M,N=!1,V=!1;function $(y){const i=y.createTexture();y.bindTexture(y.TEXTURE_2D,i);try{if(y.texImage2D(y.TEXTURE_2D,0,y.RGBA,y.RGBA,y.UNSIGNED_BYTE,M),y.isContextLost())return;C.supported=!0}catch{}y.deleteTexture(i),N=!0}var G,F;typeof document<"u"&&(M=document.createElement("img"),M.onload=function(){A&&$(A),A=null,V=!0},M.onerror=function(){N=!0,A=null},M.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(y){let i,c,p,g;y.resetRequestQueue=()=>{i=[],c=0,p=0,g={}},y.addThrottleControl=R=>{const L=p++;return g[L]=R,L},y.removeThrottleControl=R=>{delete g[R],T()},y.getImage=(R,L,z=!0)=>{C.supported&&(R.headers||(R.headers={}),R.headers.accept="image/webp,*/*");const Z={requestParameters:R,supportImageRefresh:z,callback:L,cancelled:!1,completed:!1,cancel:()=>{Z.completed||Z.cancelled||(Z.cancelled=!0,Z.innerRequest&&(Z.innerRequest.cancel(),c--),T())}};return i.push(Z),T(),Z};const x=R=>{const{requestParameters:L,supportImageRefresh:z,callback:Z}=R;return o.e(L,{type:"image"}),(z!==!1||o.i()||o.g(L.url)||L.headers&&!Object.keys(L.headers).reduce((re,ne)=>re&&ne==="accept",!0)?o.m:k)(L,(re,ne,se,ee)=>{E(R,Z,re,ne,se,ee)})},E=(R,L,z,Z,re,ne)=>{z?L(z):Z instanceof HTMLImageElement||o.a(Z)?L(null,Z):Z&&((se,ee)=>{typeof createImageBitmap=="function"?o.b(se,ee):o.d(se,ee)})(Z,(se,ee)=>{se!=null?L(se):ee!=null&&L(null,ee,{cacheControl:re,expires:ne})}),R.cancelled||(R.completed=!0,c--,T())},T=()=>{const R=(()=>{const L=Object.keys(g);let z=!1;if(L.length>0){for(const Z of L)if(z=g[Z](),z)break}return z})()?o.c.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:o.c.MAX_PARALLEL_IMAGE_REQUESTS;for(let L=c;L<R&&i.length>0;L++){const z=i.shift();if(z.cancelled){L--;continue}const Z=x(z);c++,z.innerRequest=Z}},k=(R,L)=>{const z=new Image,Z=R.url;let re=!1;const ne=R.credentials;return ne&&ne==="include"?z.crossOrigin="use-credentials":(ne&&ne==="same-origin"||!o.s(Z))&&(z.crossOrigin="anonymous"),z.fetchPriority="high",z.onload=()=>{L(null,z),z.onerror=z.onload=null},z.onerror=()=>{re||L(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")),z.onerror=z.onload=null},z.src=Z,{cancel:()=>{re=!0,z.src=""}}}}(G||(G={})),G.resetRequestQueue(),function(y){y.Glyphs="Glyphs",y.Image="Image",y.Source="Source",y.SpriteImage="SpriteImage",y.SpriteJSON="SpriteJSON",y.Style="Style",y.Tile="Tile",y.Unknown="Unknown"}(F||(F={}));class B{constructor(i){this._transformRequestFn=i}transformRequest(i,c){return this._transformRequestFn&&this._transformRequestFn(i,c)||{url:i}}normalizeSpriteURL(i,c,p){const g=function(x){const E=x.match(H);if(!E)throw new Error(`Unable to parse URL "${x}"`);return{protocol:E[1],authority:E[2],path:E[3]||"/",params:E[4]?E[4].split("&"):[]}}(i);return g.path+=`${c}${p}`,function(x){const E=x.params.length?`?${x.params.join("&")}`:"";return`${x.protocol}://${x.authority}${x.path}${E}`}(g)}setTransformRequest(i){this._transformRequestFn=i}}const H=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function J(y){var i=new o.A(3);return i[0]=y[0],i[1]=y[1],i[2]=y[2],i}var fe,Ee=function(y,i,c){return y[0]=i[0]-c[0],y[1]=i[1]-c[1],y[2]=i[2]-c[2],y};fe=new o.A(3),o.A!=Float32Array&&(fe[0]=0,fe[1]=0,fe[2]=0);var Pe=function(y){var i=y[0],c=y[1];return i*i+c*c};function ve(y){const i=[];if(typeof y=="string")i.push({id:"default",url:y});else if(y&&y.length>0){const c=[];for(const{id:p,url:g}of y){const x=`${p}${g}`;c.indexOf(x)===-1&&(c.push(x),i.push({id:p,url:g}))}}return i}function Ve(y,i,c,p,g){if(p)return void y(p);if(g!==Object.values(i).length||g!==Object.values(c).length)return;const x={};for(const E in i){x[E]={};const T=o.h.getImageCanvasContext(c[E]),k=i[E];for(const R in k){const{width:L,height:z,x:Z,y:re,sdf:ne,pixelRatio:se,stretchX:ee,stretchY:ye,content:Te}=k[R];x[E][R]={data:null,pixelRatio:se,sdf:ne,stretchX:ee,stretchY:ye,content:Te,spriteData:{width:L,height:z,x:Z,y:re,context:T}}}}y(null,x)}(function(){var y=new o.A(2);o.A!=Float32Array&&(y[0]=0,y[1]=0)})();class Me{constructor(i,c,p,g){this.context=i,this.format=p,this.texture=i.gl.createTexture(),this.update(c,g)}update(i,c,p){const{width:g,height:x}=i,E=!(this.size&&this.size[0]===g&&this.size[1]===x||p),{context:T}=this,{gl:k}=T;if(this.useMipmap=!!(c&&c.useMipmap),k.bindTexture(k.TEXTURE_2D,this.texture),T.pixelStoreUnpackFlipY.set(!1),T.pixelStoreUnpack.set(1),T.pixelStoreUnpackPremultiplyAlpha.set(this.format===k.RGBA&&(!c||c.premultiply!==!1)),E)this.size=[g,x],i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||o.a(i)?k.texImage2D(k.TEXTURE_2D,0,this.format,this.format,k.UNSIGNED_BYTE,i):k.texImage2D(k.TEXTURE_2D,0,this.format,g,x,0,this.format,k.UNSIGNED_BYTE,i.data);else{const{x:R,y:L}=p||{x:0,y:0};i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||o.a(i)?k.texSubImage2D(k.TEXTURE_2D,0,R,L,k.RGBA,k.UNSIGNED_BYTE,i):k.texSubImage2D(k.TEXTURE_2D,0,R,L,g,x,k.RGBA,k.UNSIGNED_BYTE,i.data)}this.useMipmap&&this.isSizePowerOfTwo()&&k.generateMipmap(k.TEXTURE_2D)}bind(i,c,p){const{context:g}=this,{gl:x}=g;x.bindTexture(x.TEXTURE_2D,this.texture),p!==x.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(p=x.LINEAR),i!==this.filter&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MAG_FILTER,i),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MIN_FILTER,p||i),this.filter=i),c!==this.wrap&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_S,c),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_T,c),this.wrap=c)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:i}=this.context;i.deleteTexture(this.texture),this.texture=null}}function pt(y){const{userImage:i}=y;return!!(i&&i.render&&i.render())&&(y.data.replace(new Uint8Array(i.data.buffer)),!0)}class qe extends o.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new o.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(i){if(this.loaded!==i&&(this.loaded=i,i)){for(const{ids:c,callback:p}of this.requestors)this._notify(c,p);this.requestors=[]}}getImage(i){const c=this.images[i];if(c&&!c.data&&c.spriteData){const p=c.spriteData;c.data=new o.R({width:p.width,height:p.height},p.context.getImageData(p.x,p.y,p.width,p.height).data),c.spriteData=null}return c}addImage(i,c){if(this.images[i])throw new Error(`Image id ${i} already exist, use updateImage instead`);this._validate(i,c)&&(this.images[i]=c)}_validate(i,c){let p=!0;const g=c.data||c.spriteData;return this._validateStretch(c.stretchX,g&&g.width)||(this.fire(new o.j(new Error(`Image "${i}" has invalid "stretchX" value`))),p=!1),this._validateStretch(c.stretchY,g&&g.height)||(this.fire(new o.j(new Error(`Image "${i}" has invalid "stretchY" value`))),p=!1),this._validateContent(c.content,c)||(this.fire(new o.j(new Error(`Image "${i}" has invalid "content" value`))),p=!1),p}_validateStretch(i,c){if(!i)return!0;let p=0;for(const g of i){if(g[0]<p||g[1]<g[0]||c<g[1])return!1;p=g[1]}return!0}_validateContent(i,c){if(!i)return!0;if(i.length!==4)return!1;const p=c.spriteData,g=p&&p.width||c.data.width,x=p&&p.height||c.data.height;return!(i[0]<0||g<i[0]||i[1]<0||x<i[1]||i[2]<0||g<i[2]||i[3]<0||x<i[3]||i[2]<i[0]||i[3]<i[1])}updateImage(i,c,p=!0){const g=this.getImage(i);if(p&&(g.data.width!==c.data.width||g.data.height!==c.data.height))throw new Error(`size mismatch between old image (${g.data.width}x${g.data.height}) and new image (${c.data.width}x${c.data.height}).`);c.version=g.version+1,this.images[i]=c,this.updatedImages[i]=!0}removeImage(i){const c=this.images[i];delete this.images[i],delete this.patterns[i],c.userImage&&c.userImage.onRemove&&c.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(i,c){let p=!0;if(!this.isLoaded())for(const g of i)this.images[g]||(p=!1);this.isLoaded()||p?this._notify(i,c):this.requestors.push({ids:i,callback:c})}_notify(i,c){const p={};for(const g of i){let x=this.getImage(g);x||(this.fire(new o.k("styleimagemissing",{id:g})),x=this.getImage(g)),x?p[g]={data:x.data.clone(),pixelRatio:x.pixelRatio,sdf:x.sdf,version:x.version,stretchX:x.stretchX,stretchY:x.stretchY,content:x.content,hasRenderCallback:!!(x.userImage&&x.userImage.render)}:o.w(`Image "${g}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}c(null,p)}getPixelSize(){const{width:i,height:c}=this.atlasImage;return{width:i,height:c}}getPattern(i){const c=this.patterns[i],p=this.getImage(i);if(!p)return null;if(c&&c.position.version===p.version)return c.position;if(c)c.position.version=p.version;else{const g={w:p.data.width+2,h:p.data.height+2,x:0,y:0},x=new o.I(g,p);this.patterns[i]={bin:g,position:x}}return this._updatePatternAtlas(),this.patterns[i].position}bind(i){const c=i.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new Me(i,this.atlasImage,c.RGBA),this.atlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE)}_updatePatternAtlas(){const i=[];for(const x in this.patterns)i.push(this.patterns[x].bin);const{w:c,h:p}=o.p(i),g=this.atlasImage;g.resize({width:c||1,height:p||1});for(const x in this.patterns){const{bin:E}=this.patterns[x],T=E.x+1,k=E.y+1,R=this.getImage(x).data,L=R.width,z=R.height;o.R.copy(R,g,{x:0,y:0},{x:T,y:k},{width:L,height:z}),o.R.copy(R,g,{x:0,y:z-1},{x:T,y:k-1},{width:L,height:1}),o.R.copy(R,g,{x:0,y:0},{x:T,y:k+z},{width:L,height:1}),o.R.copy(R,g,{x:L-1,y:0},{x:T-1,y:k},{width:1,height:z}),o.R.copy(R,g,{x:0,y:0},{x:T+L,y:k},{width:1,height:z})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(i){for(const c of i){if(this.callbackDispatchedThisFrame[c])continue;this.callbackDispatchedThisFrame[c]=!0;const p=this.getImage(c);p||o.w(`Image with ID: "${c}" was not found`),pt(p)&&this.updateImage(c,p)}}}const it=1e20;function ut(y,i,c,p,g,x,E,T,k){for(let R=i;R<i+p;R++)bt(y,c*x+R,x,g,E,T,k);for(let R=c;R<c+g;R++)bt(y,R*x+i,1,p,E,T,k)}function bt(y,i,c,p,g,x,E){x[0]=0,E[0]=-it,E[1]=it,g[0]=y[i];for(let T=1,k=0,R=0;T<p;T++){g[T]=y[i+T*c];const L=T*T;do{const z=x[k];R=(g[T]-g[z]+L-z*z)/(T-z)/2}while(R<=E[k]&&--k>-1);k++,x[k]=T,E[k]=R,E[k+1]=it}for(let T=0,k=0;T<p;T++){for(;E[k+1]<T;)k++;const R=x[k],L=T-R;y[i+T*c]=g[R]+L*L}}class ct{constructor(i,c){this.requestManager=i,this.localIdeographFontFamily=c,this.entries={}}setURL(i){this.url=i}getGlyphs(i,c){const p=[];for(const g in i)for(const x of i[g])p.push({stack:g,id:x});o.o(p,({stack:g,id:x},E)=>{let T=this.entries[g];T||(T=this.entries[g]={glyphs:{},requests:{},ranges:{}});let k=T.glyphs[x];if(k!==void 0)return void E(null,{stack:g,id:x,glyph:k});if(k=this._tinySDF(T,g,x),k)return T.glyphs[x]=k,void E(null,{stack:g,id:x,glyph:k});const R=Math.floor(x/256);if(256*R>65535)return void E(new Error("glyphs > 65535 not supported"));if(T.ranges[R])return void E(null,{stack:g,id:x,glyph:k});if(!this.url)return void E(new Error("glyphsUrl is not set"));let L=T.requests[R];L||(L=T.requests[R]=[],ct.loadGlyphRange(g,R,this.url,this.requestManager,(z,Z)=>{if(Z){for(const re in Z)this._doesCharSupportLocalGlyph(+re)||(T.glyphs[+re]=Z[+re]);T.ranges[R]=!0}for(const re of L)re(z,Z);delete T.requests[R]})),L.push((z,Z)=>{z?E(z):Z&&E(null,{stack:g,id:x,glyph:Z[x]||null})})},(g,x)=>{if(g)c(g);else if(x){const E={};for(const{stack:T,id:k,glyph:R}of x)(E[T]||(E[T]={}))[k]=R&&{id:R.id,bitmap:R.bitmap.clone(),metrics:R.metrics};c(null,E)}})}_doesCharSupportLocalGlyph(i){return!!this.localIdeographFontFamily&&(o.u["CJK Unified Ideographs"](i)||o.u["Hangul Syllables"](i)||o.u.Hiragana(i)||o.u.Katakana(i))}_tinySDF(i,c,p){const g=this.localIdeographFontFamily;if(!g||!this._doesCharSupportLocalGlyph(p))return;let x=i.tinySDF;if(!x){let T="400";/bold/i.test(c)?T="900":/medium/i.test(c)?T="500":/light/i.test(c)&&(T="200"),x=i.tinySDF=new ct.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:g,fontWeight:T})}const E=x.draw(String.fromCharCode(p));return{id:p,bitmap:new o.q({width:E.width||60,height:E.height||60},E.data),metrics:{width:E.glyphWidth/2||24,height:E.glyphHeight/2||24,left:E.glyphLeft/2+.5||0,top:E.glyphTop/2-27.5||-8,advance:E.glyphAdvance/2||24,isDoubleResolution:!0}}}}ct.loadGlyphRange=function(y,i,c,p,g){const x=256*i,E=x+255,T=p.transformRequest(c.replace("{fontstack}",y).replace("{range}",`${x}-${E}`),F.Glyphs);o.l(T,(k,R)=>{if(k)g(k);else if(R){const L={};for(const z of o.n(R))L[z.id]=z;g(null,L)}})},ct.TinySDF=class{constructor({fontSize:y=24,buffer:i=3,radius:c=8,cutoff:p=.25,fontFamily:g="sans-serif",fontWeight:x="normal",fontStyle:E="normal"}={}){this.buffer=i,this.cutoff=p,this.radius=c;const T=this.size=y+4*i,k=this._createCanvas(T),R=this.ctx=k.getContext("2d",{willReadFrequently:!0});R.font=`${E} ${x} ${y}px ${g}`,R.textBaseline="alphabetic",R.textAlign="left",R.fillStyle="black",this.gridOuter=new Float64Array(T*T),this.gridInner=new Float64Array(T*T),this.f=new Float64Array(T),this.z=new Float64Array(T+1),this.v=new Uint16Array(T)}_createCanvas(y){const i=document.createElement("canvas");return i.width=i.height=y,i}draw(y){const{width:i,actualBoundingBoxAscent:c,actualBoundingBoxDescent:p,actualBoundingBoxLeft:g,actualBoundingBoxRight:x}=this.ctx.measureText(y),E=Math.ceil(c),T=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(x-g))),k=Math.min(this.size-this.buffer,E+Math.ceil(p)),R=T+2*this.buffer,L=k+2*this.buffer,z=Math.max(R*L,0),Z=new Uint8ClampedArray(z),re={data:Z,width:R,height:L,glyphWidth:T,glyphHeight:k,glyphTop:E,glyphLeft:0,glyphAdvance:i};if(T===0||k===0)return re;const{ctx:ne,buffer:se,gridInner:ee,gridOuter:ye}=this;ne.clearRect(se,se,T,k),ne.fillText(y,se,se+E);const Te=ne.getImageData(se,se,T,k);ye.fill(it,0,z),ee.fill(0,0,z);for(let ce=0;ce<k;ce++)for(let xe=0;xe<T;xe++){const Ae=Te.data[4*(ce*T+xe)+3]/255;if(Ae===0)continue;const ke=(ce+se)*R+xe+se;if(Ae===1)ye[ke]=0,ee[ke]=it;else{const ze=.5-Ae;ye[ke]=ze>0?ze*ze:0,ee[ke]=ze<0?ze*ze:0}}ut(ye,0,0,R,L,R,this.f,this.v,this.z),ut(ee,se,se,T,k,R,this.f,this.v,this.z);for(let ce=0;ce<z;ce++){const xe=Math.sqrt(ye[ce])-Math.sqrt(ee[ce]);Z[ce]=Math.round(255-255*(xe/this.radius+this.cutoff))}return re}};class je{constructor(){this.specification=o.v.light.position}possiblyEvaluate(i,c){return o.z(i.expression.evaluate(c))}interpolate(i,c,p){return{x:o.B.number(i.x,c.x,p),y:o.B.number(i.y,c.y,p),z:o.B.number(i.z,c.z,p)}}}let Re;class Ke extends o.E{constructor(i){super(),Re=Re||new o.r({anchor:new o.D(o.v.light.anchor),position:new je,color:new o.D(o.v.light.color),intensity:new o.D(o.v.light.intensity)}),this._transitionable=new o.T(Re),this.setLight(i),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(i,c={}){if(!this._validate(o.t,i,c))for(const p in i){const g=i[p];p.endsWith("-transition")?this._transitionable.setTransition(p.slice(0,-11),g):this._transitionable.setValue(p,g)}}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,c,p){return(!p||p.validate!==!1)&&o.x(this,i.call(o.y,o.e({value:c,style:{glyphs:!0,sprite:!0},styleSpec:o.v})))}}class ft{constructor(i,c){this.width=i,this.height=c,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(i,c){const p=i.join(",")+String(c);return this.dashEntry[p]||(this.dashEntry[p]=this.addDash(i,c)),this.dashEntry[p]}getDashRanges(i,c,p){const g=[];let x=i.length%2==1?-i[i.length-1]*p:0,E=i[0]*p,T=!0;g.push({left:x,right:E,isDash:T,zeroLength:i[0]===0});let k=i[0];for(let R=1;R<i.length;R++){T=!T;const L=i[R];x=k*p,k+=L,E=k*p,g.push({left:x,right:E,isDash:T,zeroLength:L===0})}return g}addRoundDash(i,c,p){const g=c/2;for(let x=-p;x<=p;x++){const E=this.width*(this.nextRow+p+x);let T=0,k=i[T];for(let R=0;R<this.width;R++){R/k.right>1&&(k=i[++T]);const L=Math.abs(R-k.left),z=Math.abs(R-k.right),Z=Math.min(L,z);let re;const ne=x/p*(g+1);if(k.isDash){const se=g-Math.abs(ne);re=Math.sqrt(Z*Z+se*se)}else re=g-Math.sqrt(Z*Z+ne*ne);this.data[E+R]=Math.max(0,Math.min(255,re+128))}}}addRegularDash(i){for(let T=i.length-1;T>=0;--T){const k=i[T],R=i[T+1];k.zeroLength?i.splice(T,1):R&&R.isDash===k.isDash&&(R.left=k.left,i.splice(T,1))}const c=i[0],p=i[i.length-1];c.isDash===p.isDash&&(c.left=p.left-this.width,p.right=c.right+this.width);const g=this.width*this.nextRow;let x=0,E=i[x];for(let T=0;T<this.width;T++){T/E.right>1&&(E=i[++x]);const k=Math.abs(T-E.left),R=Math.abs(T-E.right),L=Math.min(k,R);this.data[g+T]=Math.max(0,Math.min(255,(E.isDash?L:-L)+128))}}addDash(i,c){const p=c?7:0,g=2*p+1;if(this.nextRow+g>this.height)return o.w("LineAtlas out of space"),null;let x=0;for(let T=0;T<i.length;T++)x+=i[T];if(x!==0){const T=this.width/x,k=this.getDashRanges(i,this.width,T);c?this.addRoundDash(k,T,p):this.addRegularDash(k)}const E={y:(this.nextRow+p+.5)/this.height,height:2*p/this.height,width:x};return this.nextRow+=g,this.dirty=!0,E}bind(i){const c=i.gl;this.texture?(c.bindTexture(c.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,c.texSubImage2D(c.TEXTURE_2D,0,0,0,this.width,this.height,c.ALPHA,c.UNSIGNED_BYTE,this.data))):(this.texture=c.createTexture(),c.bindTexture(c.TEXTURE_2D,this.texture),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texImage2D(c.TEXTURE_2D,0,c.ALPHA,this.width,this.height,0,c.ALPHA,c.UNSIGNED_BYTE,this.data))}}class Rt{constructor(i,c,p){this.workerPool=i,this.actors=[],this.currentActor=0,this.id=p;const g=this.workerPool.acquire(p);for(let x=0;x<g.length;x++){const E=new o.C(g[x],c,p);E.name=`Worker ${x}`,this.actors.push(E)}if(!this.actors.length)throw new Error("No actors found")}broadcast(i,c,p){o.o(this.actors,(g,x)=>{g.send(i,c,x)},p=p||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(i=!0){this.actors.forEach(c=>{c.remove()}),this.actors=[],i&&this.workerPool.release(this.id)}}function Bt(y,i,c){const p=function(g,x){if(g)return c(g);if(x){const E=o.F(o.e(x,y),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);x.vector_layers&&(E.vectorLayers=x.vector_layers,E.vectorLayerIds=E.vectorLayers.map(T=>T.id)),c(null,E)}};return y.url?o.f(i.transformRequest(y.url,F.Source),p):o.h.frame(()=>p(null,y))}class It{constructor(i,c){i&&(c?this.setSouthWest(i).setNorthEast(c):Array.isArray(i)&&(i.length===4?this.setSouthWest([i[0],i[1]]).setNorthEast([i[2],i[3]]):this.setSouthWest(i[0]).setNorthEast(i[1])))}setNorthEast(i){return this._ne=i instanceof o.L?new o.L(i.lng,i.lat):o.L.convert(i),this}setSouthWest(i){return this._sw=i instanceof o.L?new o.L(i.lng,i.lat):o.L.convert(i),this}extend(i){const c=this._sw,p=this._ne;let g,x;if(i instanceof o.L)g=i,x=i;else{if(!(i instanceof It))return Array.isArray(i)?i.length===4||i.every(Array.isArray)?this.extend(It.convert(i)):this.extend(o.L.convert(i)):i&&("lng"in i||"lon"in i)&&"lat"in i?this.extend(o.L.convert(i)):this;if(g=i._sw,x=i._ne,!g||!x)return this}return c||p?(c.lng=Math.min(g.lng,c.lng),c.lat=Math.min(g.lat,c.lat),p.lng=Math.max(x.lng,p.lng),p.lat=Math.max(x.lat,p.lat)):(this._sw=new o.L(g.lng,g.lat),this._ne=new o.L(x.lng,x.lat)),this}getCenter(){return new o.L((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new o.L(this.getWest(),this.getNorth())}getSouthEast(){return new o.L(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(i){const{lng:c,lat:p}=o.L.convert(i);let g=this._sw.lng<=c&&c<=this._ne.lng;return this._sw.lng>this._ne.lng&&(g=this._sw.lng>=c&&c>=this._ne.lng),this._sw.lat<=p&&p<=this._ne.lat&&g}static convert(i){return i instanceof It?i:i&&new It(i)}static fromLngLat(i,c=0){const p=360*c/40075017,g=p/Math.cos(Math.PI/180*i.lat);return new It(new o.L(i.lng-g,i.lat-p),new o.L(i.lng+g,i.lat+p))}}class vn{constructor(i,c,p){this.bounds=It.convert(this.validateBounds(i)),this.minzoom=c||0,this.maxzoom=p||24}validateBounds(i){return Array.isArray(i)&&i.length===4?[Math.max(-180,i[0]),Math.max(-90,i[1]),Math.min(180,i[2]),Math.min(90,i[3])]:[-180,-90,180,90]}contains(i){const c=Math.pow(2,i.z),p=Math.floor(o.G(this.bounds.getWest())*c),g=Math.floor(o.H(this.bounds.getNorth())*c),x=Math.ceil(o.G(this.bounds.getEast())*c),E=Math.ceil(o.H(this.bounds.getSouth())*c);return i.x>=p&&i.x<x&&i.y>=g&&i.y<E}}class hi extends o.E{constructor(i,c,p,g){if(super(),this.load=()=>{this._loaded=!1,this.fire(new o.k("dataloading",{dataType:"source"})),this._tileJSONRequest=Bt(this._options,this.map._requestManager,(x,E)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),x?this.fire(new o.j(x)):E&&(o.e(this,E),E.bounds&&(this.tileBounds=new vn(E.bounds,this.minzoom,this.maxzoom)),this.fire(new o.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.k("data",{dataType:"source",sourceDataType:"content"})))})},this.serialize=()=>o.e({},this._options),this.id=i,this.dispatcher=p,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,o.e(this,o.F(c,["url","scheme","tileSize","promoteId"])),this._options=o.e({type:"vector"},c),this._collectResourceTiming=c.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(g)}loaded(){return this._loaded}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}onAdd(i){this.map=i,this.load()}setSourceProperty(i){this._tileJSONRequest&&this._tileJSONRequest.cancel(),i(),this.load()}setTiles(i){return this.setSourceProperty(()=>{this._options.tiles=i}),this}setUrl(i){return this.setSourceProperty(()=>{this.url=i,this._options.url=i}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}loadTile(i,c){const p=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),g={request:this.map._requestManager.transformRequest(p,F.Tile),uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,tileSize:this.tileSize*i.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function x(E,T){return delete i.request,i.aborted?c(null):E&&E.status!==404?c(E):(T&&T.resourceTiming&&(i.resourceTiming=T.resourceTiming),this.map._refreshExpiredTiles&&T&&i.setExpiryData(T),i.loadVectorData(T,this.map.painter),c(null),void(i.reloadCallback&&(this.loadTile(i,i.reloadCallback),i.reloadCallback=null)))}g.request.collectResourceTiming=this._collectResourceTiming,i.actor&&i.state!=="expired"?i.state==="loading"?i.reloadCallback=c:i.request=i.actor.send("reloadTile",g,x.bind(this)):(i.actor=this.dispatcher.getActor(),i.request=i.actor.send("loadTile",g,x.bind(this)))}abortTile(i){i.request&&(i.request.cancel(),delete i.request),i.actor&&i.actor.send("abortTile",{uid:i.uid,type:this.type,source:this.id},void 0)}unloadTile(i){i.unloadVectorData(),i.actor&&i.actor.send("removeTile",{uid:i.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class hr extends o.E{constructor(i,c,p,g){super(),this.id=i,this.dispatcher=p,this.setEventedParent(g),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=o.e({type:"raster"},c),o.e(this,o.F(c,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new o.k("dataloading",{dataType:"source"})),this._tileJSONRequest=Bt(this._options,this.map._requestManager,(i,c)=>{this._tileJSONRequest=null,this._loaded=!0,i?this.fire(new o.j(i)):c&&(o.e(this,c),c.bounds&&(this.tileBounds=new vn(c.bounds,this.minzoom,this.maxzoom)),this.fire(new o.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.k("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(i){this.map=i,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}setSourceProperty(i){this._tileJSONRequest&&this._tileJSONRequest.cancel(),i(),this.load()}setTiles(i){return this.setSourceProperty(()=>{this._options.tiles=i}),this}serialize(){return o.e({},this._options)}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}loadTile(i,c){const p=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);i.request=G.getImage(this.map._requestManager.transformRequest(p,F.Tile),(g,x,E)=>{if(delete i.request,i.aborted)i.state="unloaded",c(null);else if(g)i.state="errored",c(g);else if(x){this.map._refreshExpiredTiles&&E&&i.setExpiryData(E);const T=this.map.painter.context,k=T.gl;i.texture=this.map.painter.getTileTexture(x.width),i.texture?i.texture.update(x,{useMipmap:!0}):(i.texture=new Me(T,x,k.RGBA,{useMipmap:!0}),i.texture.bind(k.LINEAR,k.CLAMP_TO_EDGE,k.LINEAR_MIPMAP_NEAREST),T.extTextureFilterAnisotropic&&k.texParameterf(k.TEXTURE_2D,T.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,T.extTextureFilterAnisotropicMax)),i.state="loaded",c(null)}},this.map._refreshExpiredTiles)}abortTile(i,c){i.request&&(i.request.cancel(),delete i.request),c()}unloadTile(i,c){i.texture&&this.map.painter.saveTileTexture(i.texture),c()}hasTransition(){return!1}}class Zr extends hr{constructor(i,c,p,g){super(i,c,p,g),this.type="raster-dem",this.maxzoom=22,this._options=o.e({type:"raster-dem"},c),this.encoding=c.encoding||"mapbox",this.redFactor=c.redFactor,this.greenFactor=c.greenFactor,this.blueFactor=c.blueFactor,this.baseShift=c.baseShift}loadTile(i,c){const p=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),g=this.map._requestManager.transformRequest(p,F.Tile);function x(E,T){E&&(i.state="errored",c(E)),T&&(i.dem=T,i.needsHillshadePrepare=!0,i.needsTerrainPrepare=!0,i.state="loaded",c(null))}i.neighboringTiles=this._getNeighboringTiles(i.tileID),i.request=G.getImage(g,(E,T,k)=>o._(this,void 0,void 0,function*(){if(delete i.request,i.aborted)i.state="unloaded",c(null);else if(E)i.state="errored",c(E);else if(T){this.map._refreshExpiredTiles&&i.setExpiryData(k);const R=o.a(T)&&o.J()?T:yield function(z){return o._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&o.K()){const Z=z.width+2,re=z.height+2;try{return new o.R({width:Z,height:re},yield o.M(z,-1,-1,Z,re))}catch{}}return o.h.getImageData(z,1)})}(T),L={uid:i.uid,coord:i.tileID,source:this.id,rawImageData:R,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};i.actor&&i.state!=="expired"||(i.actor=this.dispatcher.getActor(),i.actor.send("loadDEMTile",L,x))}}),this.map._refreshExpiredTiles)}_getNeighboringTiles(i){const c=i.canonical,p=Math.pow(2,c.z),g=(c.x-1+p)%p,x=c.x===0?i.wrap-1:i.wrap,E=(c.x+1+p)%p,T=c.x+1===p?i.wrap+1:i.wrap,k={};return k[new o.O(i.overscaledZ,x,c.z,g,c.y).key]={backfilled:!1},k[new o.O(i.overscaledZ,T,c.z,E,c.y).key]={backfilled:!1},c.y>0&&(k[new o.O(i.overscaledZ,x,c.z,g,c.y-1).key]={backfilled:!1},k[new o.O(i.overscaledZ,i.wrap,c.z,c.x,c.y-1).key]={backfilled:!1},k[new o.O(i.overscaledZ,T,c.z,E,c.y-1).key]={backfilled:!1}),c.y+1<p&&(k[new o.O(i.overscaledZ,x,c.z,g,c.y+1).key]={backfilled:!1},k[new o.O(i.overscaledZ,i.wrap,c.z,c.x,c.y+1).key]={backfilled:!1},k[new o.O(i.overscaledZ,T,c.z,E,c.y+1).key]={backfilled:!1}),k}unloadTile(i){i.demTexture&&this.map.painter.saveTileTexture(i.demTexture),i.fbo&&(i.fbo.destroy(),delete i.fbo),i.dem&&delete i.dem,delete i.neighboringTiles,i.state="unloaded",i.actor&&i.actor.send("removeDEMTile",{uid:i.uid,source:this.id})}}class ki extends o.E{constructor(i,c,p,g){super(),this.load=()=>{this._updateWorkerData()},this.serialize=()=>o.e({},this._options,{type:this.type,data:this._data}),this.id=i,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=p.getActor(),this.setEventedParent(g),this._data=c.data,this._options=o.e({},c),this._collectResourceTiming=c.collectResourceTiming,c.maxzoom!==void 0&&(this.maxzoom=c.maxzoom),c.type&&(this.type=c.type),c.attribution&&(this.attribution=c.attribution),this.promoteId=c.promoteId;const x=o.N/this.tileSize;this.workerOptions=o.e({source:this.id,cluster:c.cluster||!1,geojsonVtOptions:{buffer:(c.buffer!==void 0?c.buffer:128)*x,tolerance:(c.tolerance!==void 0?c.tolerance:.375)*x,extent:o.N,maxZoom:this.maxzoom,lineMetrics:c.lineMetrics||!1,generateId:c.generateId||!1},superclusterOptions:{maxZoom:c.clusterMaxZoom!==void 0?c.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,c.clusterMinPoints||2),extent:o.N,radius:(c.clusterRadius||50)*x,log:!1,generateId:c.generateId||!1},clusterProperties:c.clusterProperties,filter:c.filter},c.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}onAdd(i){this.map=i,this.load()}setData(i){return this._data=i,this._updateWorkerData(),this}updateData(i){return this._updateWorkerData(i),this}setClusterOptions(i){return this.workerOptions.cluster=i.cluster,i&&(i.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=i.clusterRadius),i.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=i.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(i,c){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:i,source:this.id},c),this}getClusterChildren(i,c){return this.actor.send("geojson.getClusterChildren",{clusterId:i,source:this.id},c),this}getClusterLeaves(i,c,p,g){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:i,limit:c,offset:p},g),this}_updateWorkerData(i){const c=o.e({},this.workerOptions);i?c.dataDiff=i:typeof this._data=="string"?(c.request=this.map._requestManager.transformRequest(o.h.resolveURL(this._data),F.Source),c.request.collectResourceTiming=this._collectResourceTiming):c.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new o.k("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,c,(p,g)=>{if(this._pendingLoads--,this._removed||g&&g.abandoned)return void this.fire(new o.k("dataabort",{dataType:"source"}));let x=null;if(g&&g.resourceTiming&&g.resourceTiming[this.id]&&(x=g.resourceTiming[this.id].slice(0)),p)return void this.fire(new o.j(p));const E={dataType:"source"};this._collectResourceTiming&&x&&x.length>0&&o.e(E,{resourceTiming:x}),this.fire(new o.k("data",Object.assign(Object.assign({},E),{sourceDataType:"metadata"}))),this.fire(new o.k("data",Object.assign(Object.assign({},E),{sourceDataType:"content"})))})}loaded(){return this._pendingLoads===0}loadTile(i,c){const p=i.actor?"reloadTile":"loadTile";i.actor=this.actor;const g={type:this.type,uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};i.request=this.actor.send(p,g,(x,E)=>(delete i.request,i.unloadVectorData(),i.aborted?c(null):x?c(x):(i.loadVectorData(E,this.map.painter,p==="reloadTile"),c(null))))}abortTile(i){i.request&&(i.request.cancel(),delete i.request),i.aborted=!0}unloadTile(i){i.unloadVectorData(),this.actor.send("removeTile",{uid:i.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}hasTransition(){return!1}}var Wr=o.Q([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Hr extends o.E{constructor(i,c,p,g){super(),this.load=(x,E)=>{this._loaded=!1,this.fire(new o.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=G.getImage(this.map._requestManager.transformRequest(this.url,F.Image),(T,k)=>{this._request=null,this._loaded=!0,T?this.fire(new o.j(T)):k&&(this.image=k,x&&(this.coordinates=x),E&&E(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||!this.image)return;const x=this.map.painter.context,E=x.gl;this.boundsBuffer||(this.boundsBuffer=x.createVertexBuffer(this._boundsArray,Wr.members)),this.boundsSegments||(this.boundsSegments=o.S.simpleSegment(0,0,4,2)),this.texture||(this.texture=new Me(x,this.image,E.RGBA),this.texture.bind(E.LINEAR,E.CLAMP_TO_EDGE));let T=!1;for(const k in this.tiles){const R=this.tiles[k];R.state!=="loaded"&&(R.state="loaded",R.texture=this.texture,T=!0)}T&&this.fire(new o.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"image",url:this.options.url,coordinates:this.coordinates}),this.id=i,this.dispatcher=p,this.coordinates=c.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(g),this.options=c}loaded(){return this._loaded}updateImage(i){return i.url?(this._request&&(this._request.cancel(),this._request=null),this.options.url=i.url,this.load(i.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new o.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(i){this.map=i,this.load()}onRemove(){this._request&&(this._request.cancel(),this._request=null)}setCoordinates(i){this.coordinates=i;const c=i.map(o.U.fromLngLat);this.tileID=function(g){let x=1/0,E=1/0,T=-1/0,k=-1/0;for(const Z of g)x=Math.min(x,Z.x),E=Math.min(E,Z.y),T=Math.max(T,Z.x),k=Math.max(k,Z.y);const R=Math.max(T-x,k-E),L=Math.max(0,Math.floor(-Math.log(R)/Math.LN2)),z=Math.pow(2,L);return new o.W(L,Math.floor((x+T)/2*z),Math.floor((E+k)/2*z))}(c),this.minzoom=this.maxzoom=this.tileID.z;const p=c.map(g=>this.tileID.getTilePoint(g)._round());return this._boundsArray=new o.V,this._boundsArray.emplaceBack(p[0].x,p[0].y,0,0),this._boundsArray.emplaceBack(p[1].x,p[1].y,o.N,0),this._boundsArray.emplaceBack(p[3].x,p[3].y,0,o.N),this._boundsArray.emplaceBack(p[2].x,p[2].y,o.N,o.N),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new o.k("data",{dataType:"source",sourceDataType:"content"})),this}loadTile(i,c){this.tileID&&this.tileID.equals(i.tileID.canonical)?(this.tiles[String(i.tileID.wrap)]=i,i.buckets={},c(null)):(i.state="errored",c(null))}hasTransition(){return!1}}class aa extends Hr{constructor(i,c,p,g){super(i,c,p,g),this.load=()=>{this._loaded=!1;const x=this.options;this.urls=[];for(const E of x.urls)this.urls.push(this.map._requestManager.transformRequest(E,F.Source).url);o.X(this.urls,(E,T)=>{this._loaded=!0,E?this.fire(new o.j(E)):T&&(this.video=T,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const x=this.map.painter.context,E=x.gl;this.boundsBuffer||(this.boundsBuffer=x.createVertexBuffer(this._boundsArray,Wr.members)),this.boundsSegments||(this.boundsSegments=o.S.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(E.LINEAR,E.CLAMP_TO_EDGE),E.texSubImage2D(E.TEXTURE_2D,0,0,0,E.RGBA,E.UNSIGNED_BYTE,this.video)):(this.texture=new Me(x,this.video,E.RGBA),this.texture.bind(E.LINEAR,E.CLAMP_TO_EDGE));let T=!1;for(const k in this.tiles){const R=this.tiles[k];R.state!=="loaded"&&(R.state="loaded",R.texture=this.texture,T=!0)}T&&this.fire(new o.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"video",urls:this.urls,coordinates:this.coordinates}),this.roundZoom=!0,this.type="video",this.options=c}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(i){if(this.video){const c=this.video.seekable;i<c.start(0)||i>c.end(0)?this.fire(new o.j(new o.Y(`sources.${this.id}`,null,`Playback for this video can be set only between the ${c.start(0)} and ${c.end(0)}-second mark.`))):this.video.currentTime=i}}getVideo(){return this.video}onAdd(i){this.map||(this.map=i,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}hasTransition(){return this.video&&!this.video.paused}}class cs extends Hr{constructor(i,c,p,g){super(i,c,p,g),this.load=()=>{this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new o.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},this.prepare=()=>{let x=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,x=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,x=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const E=this.map.painter.context,T=E.gl;this.boundsBuffer||(this.boundsBuffer=E.createVertexBuffer(this._boundsArray,Wr.members)),this.boundsSegments||(this.boundsSegments=o.S.simpleSegment(0,0,4,2)),this.texture?(x||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new Me(E,this.canvas,T.RGBA,{premultiply:!0});let k=!1;for(const R in this.tiles){const L=this.tiles[R];L.state!=="loaded"&&(L.state="loaded",L.texture=this.texture,k=!0)}k&&this.fire(new o.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"canvas",coordinates:this.coordinates}),c.coordinates?Array.isArray(c.coordinates)&&c.coordinates.length===4&&!c.coordinates.some(x=>!Array.isArray(x)||x.length!==2||x.some(E=>typeof E!="number"))||this.fire(new o.j(new o.Y(`sources.${i}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new o.j(new o.Y(`sources.${i}`,null,'missing required property "coordinates"'))),c.animate&&typeof c.animate!="boolean"&&this.fire(new o.j(new o.Y(`sources.${i}`,null,'optional "animate" property must be a boolean value'))),c.canvas?typeof c.canvas=="string"||c.canvas instanceof HTMLCanvasElement||this.fire(new o.j(new o.Y(`sources.${i}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new o.j(new o.Y(`sources.${i}`,null,'missing required property "canvas"'))),this.options=c,this.animate=c.animate===void 0||c.animate}getCanvas(){return this.canvas}onAdd(i){this.map=i,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const i of[this.canvas.width,this.canvas.height])if(isNaN(i)||i<=0)return!0;return!1}}const oa={},Ii=y=>{switch(y){case"geojson":return ki;case"image":return Hr;case"raster":return hr;case"raster-dem":return Zr;case"vector":return hi;case"video":return aa;case"canvas":return cs}return oa[y]};function Ra(y,i){const c=o.Z();return o.$(c,c,[1,1,0]),o.a0(c,c,[.5*y.width,.5*y.height,1]),o.a1(c,c,y.calculatePosMatrix(i.toUnwrapped()))}function la(y,i,c,p,g,x){const E=function(z,Z,re){if(z)for(const ne of z){const se=Z[ne];if(se&&se.source===re&&se.type==="fill-extrusion")return!0}else for(const ne in Z){const se=Z[ne];if(se.source===re&&se.type==="fill-extrusion")return!0}return!1}(g&&g.layers,i,y.id),T=x.maxPitchScaleFactor(),k=y.tilesIn(p,T,E);k.sort(Ls);const R=[];for(const z of k)R.push({wrappedTileID:z.tileID.wrapped().key,queryResults:z.tile.queryRenderedFeatures(i,c,y._state,z.queryGeometry,z.cameraQueryGeometry,z.scale,g,x,T,Ra(y.transform,z.tileID))});const L=function(z){const Z={},re={};for(const ne of z){const se=ne.queryResults,ee=ne.wrappedTileID,ye=re[ee]=re[ee]||{};for(const Te in se){const ce=se[Te],xe=ye[Te]=ye[Te]||{},Ae=Z[Te]=Z[Te]||[];for(const ke of ce)xe[ke.featureIndex]||(xe[ke.featureIndex]=!0,Ae.push(ke))}}return Z}(R);for(const z in L)L[z].forEach(Z=>{const re=Z.feature,ne=y.getFeatureState(re.layer["source-layer"],re.id);re.source=re.layer.source,re.layer["source-layer"]&&(re.sourceLayer=re.layer["source-layer"]),re.state=ne});return L}function Ls(y,i){const c=y.tileID,p=i.tileID;return c.overscaledZ-p.overscaledZ||c.canonical.y-p.canonical.y||c.wrap-p.wrap||c.canonical.x-p.canonical.x}class ge{constructor(i,c){this.timeAdded=0,this.fadeEndTime=0,this.tileID=i,this.uid=o.a2(),this.uses=0,this.tileSize=c,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(i){const c=i+this.timeAdded;c<this.fadeEndTime||(this.fadeEndTime=c)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(i){this.demTexture&&i.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(i,c,p){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",i){i.featureIndex&&(this.latestFeatureIndex=i.featureIndex,i.rawTileData?(this.latestRawTileData=i.rawTileData,this.latestFeatureIndex.rawTileData=i.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=i.collisionBoxArray,this.buckets=function(g,x){const E={};if(!x)return E;for(const T of g){const k=T.layerIds.map(R=>x.getLayer(R)).filter(Boolean);if(k.length!==0){T.layers=k,T.stateDependentLayerIds&&(T.stateDependentLayers=T.stateDependentLayerIds.map(R=>k.filter(L=>L.id===R)[0]));for(const R of k)E[R.id]=T}}return E}(i.buckets,c.style),this.hasSymbolBuckets=!1;for(const g in this.buckets){const x=this.buckets[g];if(x instanceof o.a4){if(this.hasSymbolBuckets=!0,!p)break;x.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const g in this.buckets){const x=this.buckets[g];if(x instanceof o.a4&&x.hasRTLText){this.hasRTLText=!0,o.a5();break}}this.queryPadding=0;for(const g in this.buckets){const x=this.buckets[g];this.queryPadding=Math.max(this.queryPadding,c.style.getLayer(g).queryRadius(x))}i.imageAtlas&&(this.imageAtlas=i.imageAtlas),i.glyphAtlasImage&&(this.glyphAtlasImage=i.glyphAtlasImage)}else this.collisionBoxArray=new o.a3}unloadVectorData(){for(const i in this.buckets)this.buckets[i].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(i){return this.buckets[i.id]}upload(i){for(const p in this.buckets){const g=this.buckets[p];g.uploadPending()&&g.upload(i)}const c=i.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Me(i,this.imageAtlas.image,c.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Me(i,this.glyphAtlasImage,c.ALPHA),this.glyphAtlasImage=null)}prepare(i){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(i,this.imageAtlasTexture)}queryRenderedFeatures(i,c,p,g,x,E,T,k,R,L){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:g,cameraQueryGeometry:x,scale:E,tileSize:this.tileSize,pixelPosMatrix:L,transform:k,params:T,queryPadding:this.queryPadding*R},i,c,p):{}}querySourceFeatures(i,c){const p=this.latestFeatureIndex;if(!p||!p.rawTileData)return;const g=p.loadVTLayers(),x=c&&c.sourceLayer?c.sourceLayer:"",E=g._geojsonTileLayer||g[x];if(!E)return;const T=o.a6(c&&c.filter),{z:k,x:R,y:L}=this.tileID.canonical,z={z:k,x:R,y:L};for(let Z=0;Z<E.length;Z++){const re=E.feature(Z);if(T.needGeometry){const ee=o.a7(re,!0);if(!T.filter(new o.a8(this.tileID.overscaledZ),ee,this.tileID.canonical))continue}else if(!T.filter(new o.a8(this.tileID.overscaledZ),re))continue;const ne=p.getId(re,x),se=new o.a9(re,k,R,L,ne);se.tile=z,i.push(se)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(i){const c=this.expirationTime;if(i.cacheControl){const p=o.aa(i.cacheControl);p["max-age"]&&(this.expirationTime=Date.now()+1e3*p["max-age"])}else i.expires&&(this.expirationTime=new Date(i.expires).getTime());if(this.expirationTime){const p=Date.now();let g=!1;if(this.expirationTime>p)g=!1;else if(c)if(this.expirationTime<c)g=!0;else{const x=this.expirationTime-c;x?this.expirationTime=p+Math.max(x,3e4):g=!0}else g=!0;g?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(i,c){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(i).length===0)return;const p=this.latestFeatureIndex.loadVTLayers();for(const g in this.buckets){if(!c.style.hasLayer(g))continue;const x=this.buckets[g],E=x.layers[0].sourceLayer||"_geojsonTileLayer",T=p[E],k=i[E];if(!T||!k||Object.keys(k).length===0)continue;x.update(k,T,this.imageAtlas&&this.imageAtlas.patternPositions||{});const R=c&&c.style&&c.style.getLayer(g);R&&(this.queryPadding=Math.max(this.queryPadding,R.queryRadius(x)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<o.h.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(i){this.symbolFadeHoldUntil=o.h.now()+i}setDependencies(i,c){const p={};for(const g of c)p[g]=!0;this.dependencies[i]=p}hasDependency(i,c){for(const p of i){const g=this.dependencies[p];if(g){for(const x of c)if(g[x])return!0}}return!1}}class Ie{constructor(i,c){this.max=i,this.onRemove=c,this.reset()}reset(){for(const i in this.data)for(const c of this.data[i])c.timeout&&clearTimeout(c.timeout),this.onRemove(c.value);return this.data={},this.order=[],this}add(i,c,p){const g=i.wrapped().key;this.data[g]===void 0&&(this.data[g]=[]);const x={value:c,timeout:void 0};if(p!==void 0&&(x.timeout=setTimeout(()=>{this.remove(i,x)},p)),this.data[g].push(x),this.order.push(g),this.order.length>this.max){const E=this._getAndRemoveByKey(this.order[0]);E&&this.onRemove(E)}return this}has(i){return i.wrapped().key in this.data}getAndRemove(i){return this.has(i)?this._getAndRemoveByKey(i.wrapped().key):null}_getAndRemoveByKey(i){const c=this.data[i].shift();return c.timeout&&clearTimeout(c.timeout),this.data[i].length===0&&delete this.data[i],this.order.splice(this.order.indexOf(i),1),c.value}getByKey(i){const c=this.data[i];return c?c[0].value:null}get(i){return this.has(i)?this.data[i.wrapped().key][0].value:null}remove(i,c){if(!this.has(i))return this;const p=i.wrapped().key,g=c===void 0?0:this.data[p].indexOf(c),x=this.data[p][g];return this.data[p].splice(g,1),x.timeout&&clearTimeout(x.timeout),this.data[p].length===0&&delete this.data[p],this.onRemove(x.value),this.order.splice(this.order.indexOf(p),1),this}setMaxSize(i){for(this.max=i;this.order.length>this.max;){const c=this._getAndRemoveByKey(this.order[0]);c&&this.onRemove(c)}return this}filter(i){const c=[];for(const p in this.data)for(const g of this.data[p])i(g.value)||c.push(g);for(const p of c)this.remove(p.value.tileID,p)}}class ue{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(i,c,p){const g=String(c);if(this.stateChanges[i]=this.stateChanges[i]||{},this.stateChanges[i][g]=this.stateChanges[i][g]||{},o.e(this.stateChanges[i][g],p),this.deletedStates[i]===null){this.deletedStates[i]={};for(const x in this.state[i])x!==g&&(this.deletedStates[i][x]=null)}else if(this.deletedStates[i]&&this.deletedStates[i][g]===null){this.deletedStates[i][g]={};for(const x in this.state[i][g])p[x]||(this.deletedStates[i][g][x]=null)}else for(const x in p)this.deletedStates[i]&&this.deletedStates[i][g]&&this.deletedStates[i][g][x]===null&&delete this.deletedStates[i][g][x]}removeFeatureState(i,c,p){if(this.deletedStates[i]===null)return;const g=String(c);if(this.deletedStates[i]=this.deletedStates[i]||{},p&&c!==void 0)this.deletedStates[i][g]!==null&&(this.deletedStates[i][g]=this.deletedStates[i][g]||{},this.deletedStates[i][g][p]=null);else if(c!==void 0)if(this.stateChanges[i]&&this.stateChanges[i][g])for(p in this.deletedStates[i][g]={},this.stateChanges[i][g])this.deletedStates[i][g][p]=null;else this.deletedStates[i][g]=null;else this.deletedStates[i]=null}getState(i,c){const p=String(c),g=o.e({},(this.state[i]||{})[p],(this.stateChanges[i]||{})[p]);if(this.deletedStates[i]===null)return{};if(this.deletedStates[i]){const x=this.deletedStates[i][c];if(x===null)return{};for(const E in x)delete g[E]}return g}initializeTileState(i,c){i.setFeatureState(this.state,c)}coalesceChanges(i,c){const p={};for(const g in this.stateChanges){this.state[g]=this.state[g]||{};const x={};for(const E in this.stateChanges[g])this.state[g][E]||(this.state[g][E]={}),o.e(this.state[g][E],this.stateChanges[g][E]),x[E]=this.state[g][E];p[g]=x}for(const g in this.deletedStates){this.state[g]=this.state[g]||{};const x={};if(this.deletedStates[g]===null)for(const E in this.state[g])x[E]={},this.state[g][E]={};else for(const E in this.deletedStates[g]){if(this.deletedStates[g][E]===null)this.state[g][E]={};else for(const T of Object.keys(this.deletedStates[g][E]))delete this.state[g][E][T];x[E]=this.state[g][E]}p[g]=p[g]||{},o.e(p[g],x)}if(this.stateChanges={},this.deletedStates={},Object.keys(p).length!==0)for(const g in i)i[g].setFeatureState(p,c)}}class st extends o.E{constructor(i,c,p){super(),this.id=i,this.dispatcher=p,this.on("data",g=>{g.dataType==="source"&&g.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&g.dataType==="source"&&g.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((g,x,E,T)=>{const k=new(Ii(x.type))(g,x,E,T);if(k.id!==g)throw new Error(`Expected Source id to be ${g} instead of ${k.id}`);return k})(i,c,p,this),this._tiles={},this._cache=new Ie(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new ue,this._didEmitContent=!1,this._updated=!1}onAdd(i){this.map=i,this._maxTileCacheSize=i?i._maxTileCacheSize:null,this._maxTileCacheZoomLevels=i?i._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(i)}onRemove(i){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(i)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const i in this._tiles){const c=this._tiles[i];if(c.state!=="loaded"&&c.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const i=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,i&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(i,c){return this._source.loadTile(i,c)}_unloadTile(i){if(this._source.unloadTile)return this._source.unloadTile(i,()=>{})}_abortTile(i){this._source.abortTile&&this._source.abortTile(i,()=>{}),this._source.fire(new o.k("dataabort",{tile:i,coord:i.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(i){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const c in this._tiles){const p=this._tiles[c];p.upload(i),p.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(i=>i.tileID).sort(tt).map(i=>i.key)}getRenderableIds(i){const c=[];for(const p in this._tiles)this._isIdRenderable(p,i)&&c.push(this._tiles[p]);return i?c.sort((p,g)=>{const x=p.tileID,E=g.tileID,T=new o.P(x.canonical.x,x.canonical.y)._rotate(this.transform.angle),k=new o.P(E.canonical.x,E.canonical.y)._rotate(this.transform.angle);return x.overscaledZ-E.overscaledZ||k.y-T.y||k.x-T.x}).map(p=>p.tileID.key):c.map(p=>p.tileID).sort(tt).map(p=>p.key)}hasRenderableParent(i){const c=this.findLoadedParent(i,0);return!!c&&this._isIdRenderable(c.tileID.key)}_isIdRenderable(i,c){return this._tiles[i]&&this._tiles[i].hasData()&&!this._coveredTiles[i]&&(c||!this._tiles[i].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const i in this._tiles)this._tiles[i].state!=="errored"&&this._reloadTile(i,"reloading")}}_reloadTile(i,c){const p=this._tiles[i];p&&(p.state!=="loading"&&(p.state=c),this._loadTile(p,this._tileLoaded.bind(this,p,i,c)))}_tileLoaded(i,c,p,g){if(g)return i.state="errored",void(g.status!==404?this._source.fire(new o.j(g,{tile:i})):this.update(this.transform,this.terrain));i.timeAdded=o.h.now(),p==="expired"&&(i.refreshedUponExpiration=!0),this._setTileReloadTimer(c,i),this.getSource().type==="raster-dem"&&i.dem&&this._backfillDEM(i),this._state.initializeTileState(i,this.map?this.map.painter:null),i.aborted||this._source.fire(new o.k("data",{dataType:"source",tile:i,coord:i.tileID}))}_backfillDEM(i){const c=this.getRenderableIds();for(let g=0;g<c.length;g++){const x=c[g];if(i.neighboringTiles&&i.neighboringTiles[x]){const E=this.getTileByID(x);p(i,E),p(E,i)}}function p(g,x){g.needsHillshadePrepare=!0,g.needsTerrainPrepare=!0;let E=x.tileID.canonical.x-g.tileID.canonical.x;const T=x.tileID.canonical.y-g.tileID.canonical.y,k=Math.pow(2,g.tileID.canonical.z),R=x.tileID.key;E===0&&T===0||Math.abs(T)>1||(Math.abs(E)>1&&(Math.abs(E+k)===1?E+=k:Math.abs(E-k)===1&&(E-=k)),x.dem&&g.dem&&(g.dem.backfillBorder(x.dem,E,T),g.neighboringTiles&&g.neighboringTiles[R]&&(g.neighboringTiles[R].backfilled=!0)))}}getTile(i){return this.getTileByID(i.key)}getTileByID(i){return this._tiles[i]}_retainLoadedChildren(i,c,p,g){for(const x in this._tiles){let E=this._tiles[x];if(g[x]||!E.hasData()||E.tileID.overscaledZ<=c||E.tileID.overscaledZ>p)continue;let T=E.tileID;for(;E&&E.tileID.overscaledZ>c+1;){const R=E.tileID.scaledTo(E.tileID.overscaledZ-1);E=this._tiles[R.key],E&&E.hasData()&&(T=R)}let k=T;for(;k.overscaledZ>c;)if(k=k.scaledTo(k.overscaledZ-1),i[k.key]){g[T.key]=T;break}}}findLoadedParent(i,c){if(i.key in this._loadedParentTiles){const p=this._loadedParentTiles[i.key];return p&&p.tileID.overscaledZ>=c?p:null}for(let p=i.overscaledZ-1;p>=c;p--){const g=i.scaledTo(p),x=this._getLoadedTile(g);if(x)return x}}_getLoadedTile(i){const c=this._tiles[i.key];return c&&c.hasData()?c:this._cache.getByKey(i.wrapped().key)}updateCacheSize(i){const c=Math.ceil(i.width/this._source.tileSize)+1,p=Math.ceil(i.height/this._source.tileSize)+1,g=Math.floor(c*p*(this._maxTileCacheZoomLevels===null?o.c.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),x=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,g):g;this._cache.setMaxSize(x)}handleWrapJump(i){const c=Math.round((i-(this._prevLng===void 0?i:this._prevLng))/360);if(this._prevLng=i,c){const p={};for(const g in this._tiles){const x=this._tiles[g];x.tileID=x.tileID.unwrapTo(x.tileID.wrap+c),p[x.tileID.key]=x}this._tiles=p;for(const g in this._timers)clearTimeout(this._timers[g]),delete this._timers[g];for(const g in this._tiles)this._setTileReloadTimer(g,this._tiles[g])}}update(i,c){if(this.transform=i,this.terrain=c,!this._sourceLoaded||this._paused)return;let p;this.updateCacheSize(i),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?p=i.getVisibleUnwrappedCoordinates(this._source.tileID).map(L=>new o.O(L.canonical.z,L.wrap,L.canonical.z,L.canonical.x,L.canonical.y)):(p=i.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:c}),this._source.hasTile&&(p=p.filter(L=>this._source.hasTile(L)))):p=[];const g=i.coveringZoomLevel(this._source),x=Math.max(g-st.maxOverzooming,this._source.minzoom),E=Math.max(g+st.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const L={};for(const z of p)if(z.canonical.z>this._source.minzoom){const Z=z.scaledTo(z.canonical.z-1);L[Z.key]=Z;const re=z.scaledTo(Math.max(this._source.minzoom,Math.min(z.canonical.z,5)));L[re.key]=re}p=p.concat(Object.values(L))}const T=p.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,T&&this.fire(new o.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const k=this._updateRetainedTiles(p,g);if($e(this._source.type)){const L={},z={},Z=Object.keys(k),re=o.h.now();for(const ne of Z){const se=k[ne],ee=this._tiles[ne];if(!ee||ee.fadeEndTime!==0&&ee.fadeEndTime<=re)continue;const ye=this.findLoadedParent(se,x);ye&&(this._addTile(ye.tileID),L[ye.tileID.key]=ye.tileID),z[ne]=se}this._retainLoadedChildren(z,g,E,k);for(const ne in L)k[ne]||(this._coveredTiles[ne]=!0,k[ne]=L[ne]);if(c){const ne={},se={};for(const ee of p)this._tiles[ee.key].hasData()?ne[ee.key]=ee:se[ee.key]=ee;for(const ee in se){const ye=se[ee].children(this._source.maxzoom);this._tiles[ye[0].key]&&this._tiles[ye[1].key]&&this._tiles[ye[2].key]&&this._tiles[ye[3].key]&&(ne[ye[0].key]=k[ye[0].key]=ye[0],ne[ye[1].key]=k[ye[1].key]=ye[1],ne[ye[2].key]=k[ye[2].key]=ye[2],ne[ye[3].key]=k[ye[3].key]=ye[3],delete se[ee])}for(const ee in se){const ye=this.findLoadedParent(se[ee],this._source.minzoom);if(ye){ne[ye.tileID.key]=k[ye.tileID.key]=ye.tileID;for(const Te in ne)ne[Te].isChildOf(ye.tileID)&&delete ne[Te]}}for(const ee in this._tiles)ne[ee]||(this._coveredTiles[ee]=!0)}}for(const L in k)this._tiles[L].clearFadeHold();const R=o.ab(this._tiles,k);for(const L of R){const z=this._tiles[L];z.hasSymbolBuckets&&!z.holdingForFade()?z.setHoldDuration(this.map._fadeDuration):z.hasSymbolBuckets&&!z.symbolFadeFinished()||this._removeTile(L)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const i in this._tiles)this._tiles[i].holdingForFade()&&this._removeTile(i)}_updateRetainedTiles(i,c){const p={},g={},x=Math.max(c-st.maxOverzooming,this._source.minzoom),E=Math.max(c+st.maxUnderzooming,this._source.minzoom),T={};for(const k of i){const R=this._addTile(k);p[k.key]=k,R.hasData()||c<this._source.maxzoom&&(T[k.key]=k)}this._retainLoadedChildren(T,c,E,p);for(const k of i){let R=this._tiles[k.key];if(R.hasData())continue;if(c+1>this._source.maxzoom){const z=k.children(this._source.maxzoom)[0],Z=this.getTile(z);if(Z&&Z.hasData()){p[z.key]=z;continue}}else{const z=k.children(this._source.maxzoom);if(p[z[0].key]&&p[z[1].key]&&p[z[2].key]&&p[z[3].key])continue}let L=R.wasRequested();for(let z=k.overscaledZ-1;z>=x;--z){const Z=k.scaledTo(z);if(g[Z.key])break;if(g[Z.key]=!0,R=this.getTile(Z),!R&&L&&(R=this._addTile(Z)),R){const re=R.hasData();if((L||re)&&(p[Z.key]=Z),L=R.wasRequested(),re)break}}}return p}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const i in this._tiles){const c=[];let p,g=this._tiles[i].tileID;for(;g.overscaledZ>0;){if(g.key in this._loadedParentTiles){p=this._loadedParentTiles[g.key];break}c.push(g.key);const x=g.scaledTo(g.overscaledZ-1);if(p=this._getLoadedTile(x),p)break;g=x}for(const x of c)this._loadedParentTiles[x]=p}}_addTile(i){let c=this._tiles[i.key];if(c)return c;c=this._cache.getAndRemove(i),c&&(this._setTileReloadTimer(i.key,c),c.tileID=i,this._state.initializeTileState(c,this.map?this.map.painter:null),this._cacheTimers[i.key]&&(clearTimeout(this._cacheTimers[i.key]),delete this._cacheTimers[i.key],this._setTileReloadTimer(i.key,c)));const p=c;return c||(c=new ge(i,this._source.tileSize*i.overscaleFactor()),this._loadTile(c,this._tileLoaded.bind(this,c,i.key,c.state))),c.uses++,this._tiles[i.key]=c,p||this._source.fire(new o.k("dataloading",{tile:c,coord:c.tileID,dataType:"source"})),c}_setTileReloadTimer(i,c){i in this._timers&&(clearTimeout(this._timers[i]),delete this._timers[i]);const p=c.getExpiryTimeout();p&&(this._timers[i]=setTimeout(()=>{this._reloadTile(i,"expired"),delete this._timers[i]},p))}_removeTile(i){const c=this._tiles[i];c&&(c.uses--,delete this._tiles[i],this._timers[i]&&(clearTimeout(this._timers[i]),delete this._timers[i]),c.uses>0||(c.hasData()&&c.state!=="reloading"?this._cache.add(c.tileID,c,c.getExpiryTimeout()):(c.aborted=!0,this._abortTile(c),this._unloadTile(c))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const i in this._tiles)this._removeTile(i);this._cache.reset()}tilesIn(i,c,p){const g=[],x=this.transform;if(!x)return g;const E=p?x.getCameraQueryGeometry(i):i,T=i.map(ne=>x.pointCoordinate(ne,this.terrain)),k=E.map(ne=>x.pointCoordinate(ne,this.terrain)),R=this.getIds();let L=1/0,z=1/0,Z=-1/0,re=-1/0;for(const ne of k)L=Math.min(L,ne.x),z=Math.min(z,ne.y),Z=Math.max(Z,ne.x),re=Math.max(re,ne.y);for(let ne=0;ne<R.length;ne++){const se=this._tiles[R[ne]];if(se.holdingForFade())continue;const ee=se.tileID,ye=Math.pow(2,x.zoom-se.tileID.overscaledZ),Te=c*se.queryPadding*o.N/se.tileSize/ye,ce=[ee.getTilePoint(new o.U(L,z)),ee.getTilePoint(new o.U(Z,re))];if(ce[0].x-Te<o.N&&ce[0].y-Te<o.N&&ce[1].x+Te>=0&&ce[1].y+Te>=0){const xe=T.map(ke=>ee.getTilePoint(ke)),Ae=k.map(ke=>ee.getTilePoint(ke));g.push({tile:se,tileID:ee,queryGeometry:xe,cameraQueryGeometry:Ae,scale:ye})}}return g}getVisibleCoordinates(i){const c=this.getRenderableIds(i).map(p=>this._tiles[p].tileID);for(const p of c)p.posMatrix=this.transform.calculatePosMatrix(p.toUnwrapped());return c}hasTransition(){if(this._source.hasTransition())return!0;if($e(this._source.type)){const i=o.h.now();for(const c in this._tiles)if(this._tiles[c].fadeEndTime>=i)return!0}return!1}setFeatureState(i,c,p){this._state.updateState(i=i||"_geojsonTileLayer",c,p)}removeFeatureState(i,c,p){this._state.removeFeatureState(i=i||"_geojsonTileLayer",c,p)}getFeatureState(i,c){return this._state.getState(i=i||"_geojsonTileLayer",c)}setDependencies(i,c,p){const g=this._tiles[i];g&&g.setDependencies(c,p)}reloadTilesForDependencies(i,c){for(const p in this._tiles)this._tiles[p].hasDependency(i,c)&&this._reloadTile(p,"reloading");this._cache.filter(p=>!p.hasDependency(i,c))}}function tt(y,i){const c=Math.abs(2*y.wrap)-+(y.wrap<0),p=Math.abs(2*i.wrap)-+(i.wrap<0);return y.overscaledZ-i.overscaledZ||p-c||i.canonical.y-y.canonical.y||i.canonical.x-y.canonical.x}function $e(y){return y==="raster"||y==="image"||y==="video"}st.maxOverzooming=10,st.maxUnderzooming=3;const Je="mapboxgl_preloaded_worker_pool";class $t{constructor(){this.active={}}acquire(i){if(!this.workers)for(this.workers=[];this.workers.length<$t.workerCount;)this.workers.push(new Worker(o.c.WORKER_URL));return this.active[i]=!0,this.workers.slice()}release(i){delete this.active[i],this.numActive()===0&&(this.workers.forEach(c=>{c.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Je]}numActive(){return Object.keys(this.active).length}}const xn=Math.floor(o.h.hardwareConcurrency/2);let An;function Gi(){return An||(An=new $t),An}$t.workerCount=o.ac(globalThis)?Math.max(Math.min(xn,3),1):1;class ua{constructor(i,c){this.reset(i,c)}reset(i,c){this.points=i||[],this._distances=[0];for(let p=1;p<this.points.length;p++)this._distances[p]=this._distances[p-1]+this.points[p].dist(this.points[p-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(c||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(i){if(this.points.length===1)return this.points[0];i=o.ad(i,0,1);let c=1,p=this._distances[c];const g=i*this.paddedLength+this.padding;for(;p<g&&c<this._distances.length;)p=this._distances[++c];const x=c-1,E=this._distances[x],T=p-E,k=T>0?(g-E)/T:0;return this.points[x].mult(1-k).add(this.points[c].mult(k))}}function Mi(y,i){let c=!0;return y==="always"||y!=="never"&&i!=="never"||(c=!1),c}class Zi{constructor(i,c,p){const g=this.boxCells=[],x=this.circleCells=[];this.xCellCount=Math.ceil(i/p),this.yCellCount=Math.ceil(c/p);for(let E=0;E<this.xCellCount*this.yCellCount;E++)g.push([]),x.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=i,this.height=c,this.xScale=this.xCellCount/i,this.yScale=this.yCellCount/c,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(i,c,p,g,x){this._forEachCell(c,p,g,x,this._insertBoxCell,this.boxUid++),this.boxKeys.push(i),this.bboxes.push(c),this.bboxes.push(p),this.bboxes.push(g),this.bboxes.push(x)}insertCircle(i,c,p,g){this._forEachCell(c-g,p-g,c+g,p+g,this._insertCircleCell,this.circleUid++),this.circleKeys.push(i),this.circles.push(c),this.circles.push(p),this.circles.push(g)}_insertBoxCell(i,c,p,g,x,E){this.boxCells[x].push(E)}_insertCircleCell(i,c,p,g,x,E){this.circleCells[x].push(E)}_query(i,c,p,g,x,E,T){if(p<0||i>this.width||g<0||c>this.height)return[];const k=[];if(i<=0&&c<=0&&this.width<=p&&this.height<=g){if(x)return[{key:null,x1:i,y1:c,x2:p,y2:g}];for(let R=0;R<this.boxKeys.length;R++)k.push({key:this.boxKeys[R],x1:this.bboxes[4*R],y1:this.bboxes[4*R+1],x2:this.bboxes[4*R+2],y2:this.bboxes[4*R+3]});for(let R=0;R<this.circleKeys.length;R++){const L=this.circles[3*R],z=this.circles[3*R+1],Z=this.circles[3*R+2];k.push({key:this.circleKeys[R],x1:L-Z,y1:z-Z,x2:L+Z,y2:z+Z})}}else this._forEachCell(i,c,p,g,this._queryCell,k,{hitTest:x,overlapMode:E,seenUids:{box:{},circle:{}}},T);return k}query(i,c,p,g){return this._query(i,c,p,g,!1,null)}hitTest(i,c,p,g,x,E){return this._query(i,c,p,g,!0,x,E).length>0}hitTestCircle(i,c,p,g,x){const E=i-p,T=i+p,k=c-p,R=c+p;if(T<0||E>this.width||R<0||k>this.height)return!1;const L=[];return this._forEachCell(E,k,T,R,this._queryCellCircle,L,{hitTest:!0,overlapMode:g,circle:{x:i,y:c,radius:p},seenUids:{box:{},circle:{}}},x),L.length>0}_queryCell(i,c,p,g,x,E,T,k){const{seenUids:R,hitTest:L,overlapMode:z}=T,Z=this.boxCells[x];if(Z!==null){const ne=this.bboxes;for(const se of Z)if(!R.box[se]){R.box[se]=!0;const ee=4*se,ye=this.boxKeys[se];if(i<=ne[ee+2]&&c<=ne[ee+3]&&p>=ne[ee+0]&&g>=ne[ee+1]&&(!k||k(ye))&&(!L||!Mi(z,ye.overlapMode))&&(E.push({key:ye,x1:ne[ee],y1:ne[ee+1],x2:ne[ee+2],y2:ne[ee+3]}),L))return!0}}const re=this.circleCells[x];if(re!==null){const ne=this.circles;for(const se of re)if(!R.circle[se]){R.circle[se]=!0;const ee=3*se,ye=this.circleKeys[se];if(this._circleAndRectCollide(ne[ee],ne[ee+1],ne[ee+2],i,c,p,g)&&(!k||k(ye))&&(!L||!Mi(z,ye.overlapMode))){const Te=ne[ee],ce=ne[ee+1],xe=ne[ee+2];if(E.push({key:ye,x1:Te-xe,y1:ce-xe,x2:Te+xe,y2:ce+xe}),L)return!0}}}return!1}_queryCellCircle(i,c,p,g,x,E,T,k){const{circle:R,seenUids:L,overlapMode:z}=T,Z=this.boxCells[x];if(Z!==null){const ne=this.bboxes;for(const se of Z)if(!L.box[se]){L.box[se]=!0;const ee=4*se,ye=this.boxKeys[se];if(this._circleAndRectCollide(R.x,R.y,R.radius,ne[ee+0],ne[ee+1],ne[ee+2],ne[ee+3])&&(!k||k(ye))&&!Mi(z,ye.overlapMode))return E.push(!0),!0}}const re=this.circleCells[x];if(re!==null){const ne=this.circles;for(const se of re)if(!L.circle[se]){L.circle[se]=!0;const ee=3*se,ye=this.circleKeys[se];if(this._circlesCollide(ne[ee],ne[ee+1],ne[ee+2],R.x,R.y,R.radius)&&(!k||k(ye))&&!Mi(z,ye.overlapMode))return E.push(!0),!0}}}_forEachCell(i,c,p,g,x,E,T,k){const R=this._convertToXCellCoord(i),L=this._convertToYCellCoord(c),z=this._convertToXCellCoord(p),Z=this._convertToYCellCoord(g);for(let re=R;re<=z;re++)for(let ne=L;ne<=Z;ne++)if(x.call(this,i,c,p,g,this.xCellCount*ne+re,E,T,k))return}_convertToXCellCoord(i){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(i*this.xScale)))}_convertToYCellCoord(i){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(i*this.yScale)))}_circlesCollide(i,c,p,g,x,E){const T=g-i,k=x-c,R=p+E;return R*R>T*T+k*k}_circleAndRectCollide(i,c,p,g,x,E,T){const k=(E-g)/2,R=Math.abs(i-(g+k));if(R>k+p)return!1;const L=(T-x)/2,z=Math.abs(c-(x+L));if(z>L+p)return!1;if(R<=k||z<=L)return!0;const Z=R-k,re=z-L;return Z*Z+re*re<=p*p}}function He(y,i,c,p,g){const x=o.Z();return i?(o.a0(x,x,[1/g,1/g,1]),c||o.ae(x,x,p.angle)):o.a1(x,p.labelPlaneMatrix,y),x}function di(y,i,c,p,g){if(i){const x=o.af(y);return o.a0(x,x,[g,g,1]),c||o.ae(x,x,-p.angle),x}return p.glCoordMatrix}function _n(y,i,c){let p;c?(p=[y.x,y.y,c(y.x,y.y),1],o.ag(p,p,i)):(p=[y.x,y.y,0,1],ae(p,p,i));const g=p[3];return{point:new o.P(p[0]/g,p[1]/g),signedDistanceFromCamera:g}}function hs(y,i){return .5+y/i*.5}function zs(y,i){const c=y[0]/y[3],p=y[1]/y[3];return c>=-i[0]&&c<=i[0]&&p>=-i[1]&&p<=i[1]}function et(y,i,c,p,g,x,E,T,k,R){const L=p?y.textSizeData:y.iconSizeData,z=o.ah(L,c.transform.zoom),Z=[256/c.width*2+1,256/c.height*2+1],re=p?y.text.dynamicLayoutVertexArray:y.icon.dynamicLayoutVertexArray;re.clear();const ne=y.lineVertexArray,se=p?y.text.placedSymbolArray:y.icon.placedSymbolArray,ee=c.transform.width/c.transform.height;let ye=!1;for(let Te=0;Te<se.length;Te++){const ce=se.get(Te);if(ce.hidden||ce.writingMode===o.ai.vertical&&!ye){Y(ce.numGlyphs,re);continue}let xe;if(ye=!1,R?(xe=[ce.anchorX,ce.anchorY,R(ce.anchorX,ce.anchorY),1],o.ag(xe,xe,i)):(xe=[ce.anchorX,ce.anchorY,0,1],ae(xe,xe,i)),!zs(xe,Z)){Y(ce.numGlyphs,re);continue}const Ae=hs(c.transform.cameraToCenterDistance,xe[3]),ke=o.aj(L,z,ce),ze=E?ke/Ae:ke*Ae,Ge=new o.P(ce.anchorX,ce.anchorY),Be=_n(Ge,g,R).point,We={projections:{},offsets:{}},gt=Rr(ce,ze,!1,T,i,g,x,y.glyphOffsetArray,ne,re,Be,Ge,We,ee,k,R);ye=gt.useVertical,(gt.notEnoughRoom||ye||gt.needsFlipping&&Rr(ce,ze,!0,T,i,g,x,y.glyphOffsetArray,ne,re,Be,Ge,We,ee,k,R).notEnoughRoom)&&Y(ce.numGlyphs,re)}p?y.text.dynamicLayoutVertexBuffer.updateData(re):y.icon.dynamicLayoutVertexBuffer.updateData(re)}function Nt(y,i,c,p,g,x,E,T,k,R,L,z,Z){const re=T.glyphStartIndex+T.numGlyphs,ne=T.lineStartIndex,se=T.lineStartIndex+T.lineLength,ee=i.getoffsetX(T.glyphStartIndex),ye=i.getoffsetX(re-1),Te=j(y*ee,c,p,g,x,E,T.segment,ne,se,k,R,L,z,Z);if(!Te)return null;const ce=j(y*ye,c,p,g,x,E,T.segment,ne,se,k,R,L,z,Z);return ce?{first:Te,last:ce}:null}function Dt(y,i,c,p){return y===o.ai.horizontal&&Math.abs(c.y-i.y)>Math.abs(c.x-i.x)*p?{useVertical:!0}:(y===o.ai.vertical?i.y<c.y:i.x>c.x)?{needsFlipping:!0}:null}function Rr(y,i,c,p,g,x,E,T,k,R,L,z,Z,re,ne,se){const ee=i/24,ye=y.lineOffsetX*ee,Te=y.lineOffsetY*ee;let ce;if(y.numGlyphs>1){const xe=y.glyphStartIndex+y.numGlyphs,Ae=y.lineStartIndex,ke=y.lineStartIndex+y.lineLength,ze=Nt(ee,T,ye,Te,c,L,z,y,k,x,Z,ne,se);if(!ze)return{notEnoughRoom:!0};const Ge=_n(ze.first.point,E,se).point,Be=_n(ze.last.point,E,se).point;if(p&&!c){const We=Dt(y.writingMode,Ge,Be,re);if(We)return We}ce=[ze.first];for(let We=y.glyphStartIndex+1;We<xe-1;We++)ce.push(j(ee*T.getoffsetX(We),ye,Te,c,L,z,y.segment,Ae,ke,k,x,Z,ne,se));ce.push(ze.last)}else{if(p&&!c){const Ae=_n(z,g,se).point,ke=y.lineStartIndex+y.segment+1,ze=new o.P(k.getx(ke),k.gety(ke)),Ge=_n(ze,g,se),Be=Ge.signedDistanceFromCamera>0?Ge.point:ds(z,ze,Ae,1,g,se),We=Dt(y.writingMode,Ae,Be,re);if(We)return We}const xe=j(ee*T.getoffsetX(y.glyphStartIndex),ye,Te,c,L,z,y.segment,y.lineStartIndex,y.lineStartIndex+y.lineLength,k,x,Z,ne,se);if(!xe)return{notEnoughRoom:!0};ce=[xe]}for(const xe of ce)o.ak(R,xe.point,xe.angle);return{}}function ds(y,i,c,p,g,x){const E=_n(y.add(y.sub(i)._unit()),g,x).point,T=c.sub(E);return c.add(T._mult(p/T.mag()))}function Ot(y,i){const{projectionCache:c,lineVertexArray:p,labelPlaneMatrix:g,tileAnchorPoint:x,distanceFromAnchor:E,getElevation:T,previousVertex:k,direction:R,absOffsetX:L}=i;if(c.projections[y])return c.projections[y];const z=new o.P(p.getx(y),p.gety(y)),Z=_n(z,g,T);if(Z.signedDistanceFromCamera>0)return c.projections[y]=Z.point,Z.point;const re=y-R;return ds(E===0?x:new o.P(p.getx(re),p.gety(re)),z,k,L-E+1,g,T)}function Os(y,i,c){return y._unit()._perp()._mult(i*c)}function ie(y,i,c,p,g,x,E,T){const{projectionCache:k,direction:R}=T;if(k.offsets[y])return k.offsets[y];const L=c.add(i);if(y+R<p||y+R>=g)return k.offsets[y]=L,L;const z=Ot(y+R,T),Z=Os(z.sub(c),E,R),re=c.add(Z),ne=z.add(Z);return k.offsets[y]=o.al(x,L,re,ne)||L,k.offsets[y]}function j(y,i,c,p,g,x,E,T,k,R,L,z,Z,re){const ne=p?y-i:y+i;let se=ne>0?1:-1,ee=0;p&&(se*=-1,ee=Math.PI),se<0&&(ee+=Math.PI);let ye,Te,ce=se>0?T+E:T+E+1,xe=g,Ae=g,ke=0,ze=0;const Ge=Math.abs(ne),Be=[];let We;for(;ke+ze<=Ge;){if(ce+=se,ce<T||ce>=k)return null;ke+=ze,Ae=xe,Te=ye;const nt={projectionCache:z,lineVertexArray:R,labelPlaneMatrix:L,tileAnchorPoint:x,distanceFromAnchor:ke,getElevation:re,previousVertex:Ae,direction:se,absOffsetX:Ge};if(xe=Ot(ce,nt),c===0)Be.push(Ae),We=xe.sub(Ae);else{let kt;const vt=xe.sub(Ae);kt=vt.mag()===0?Os(Ot(ce+se,nt).sub(xe),c,se):Os(vt,c,se),Te||(Te=Ae.add(kt)),ye=ie(ce,kt,xe,T,k,Te,c,nt),Be.push(Te),We=ye.sub(Te)}ze=We.mag()}const gt=We._mult((Ge-ke)/ze)._add(Te||Ae),Ut=ee+Math.atan2(xe.y-Ae.y,xe.x-Ae.x);return Be.push(gt),{point:gt,angle:Z?Ut:0,path:Be}}const q=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Y(y,i){for(let c=0;c<y;c++){const p=i.length;i.resize(p+4),i.float32.set(q,3*p)}}function ae(y,i,c){const p=i[0],g=i[1];return y[0]=c[0]*p+c[4]*g+c[12],y[1]=c[1]*p+c[5]*g+c[13],y[3]=c[3]*p+c[7]*g+c[15],y}const le=100;class be{constructor(i,c=new Zi(i.width+200,i.height+200,25),p=new Zi(i.width+200,i.height+200,25)){this.transform=i,this.grid=c,this.ignoredGrid=p,this.pitchfactor=Math.cos(i._pitch)*i.cameraToCenterDistance,this.screenRightBoundary=i.width+le,this.screenBottomBoundary=i.height+le,this.gridRightBoundary=i.width+200,this.gridBottomBoundary=i.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(i,c,p,g,x,E){const T=this.projectAndGetPerspectiveRatio(g,i.anchorPointX,i.anchorPointY,E),k=p*T.perspectiveRatio,R=i.x1*k+T.point.x,L=i.y1*k+T.point.y,z=i.x2*k+T.point.x,Z=i.y2*k+T.point.y;return!this.isInsideGrid(R,L,z,Z)||c!=="always"&&this.grid.hitTest(R,L,z,Z,c,x)||T.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[R,L,z,Z],offscreen:this.isOffscreen(R,L,z,Z)}}placeCollisionCircles(i,c,p,g,x,E,T,k,R,L,z,Z,re,ne){const se=[],ee=new o.P(c.anchorX,c.anchorY),ye=_n(ee,E,ne),Te=hs(this.transform.cameraToCenterDistance,ye.signedDistanceFromCamera),ce=(L?x/Te:x*Te)/o.ap,xe=_n(ee,T,ne).point,Ae=Nt(ce,g,c.lineOffsetX*ce,c.lineOffsetY*ce,!1,xe,ee,c,p,T,{projections:{},offsets:{}},!1,ne);let ke=!1,ze=!1,Ge=!0;if(Ae){const Be=.5*Z*Te+re,We=new o.P(-100,-100),gt=new o.P(this.screenRightBoundary,this.screenBottomBoundary),Ut=new ua,nt=Ae.first,kt=Ae.last;let vt=[];for(let Ft=nt.path.length-1;Ft>=1;Ft--)vt.push(nt.path[Ft]);for(let Ft=1;Ft<kt.path.length;Ft++)vt.push(kt.path[Ft]);const an=2.5*Be;if(k){const Ft=vt.map(qt=>_n(qt,k,ne));vt=Ft.some(qt=>qt.signedDistanceFromCamera<=0)?[]:Ft.map(qt=>qt.point)}let jt=[];if(vt.length>0){const Ft=vt[0].clone(),qt=vt[0].clone();for(let On=1;On<vt.length;On++)Ft.x=Math.min(Ft.x,vt[On].x),Ft.y=Math.min(Ft.y,vt[On].y),qt.x=Math.max(qt.x,vt[On].x),qt.y=Math.max(qt.y,vt[On].y);jt=Ft.x>=We.x&&qt.x<=gt.x&&Ft.y>=We.y&&qt.y<=gt.y?[vt]:qt.x<We.x||Ft.x>gt.x||qt.y<We.y||Ft.y>gt.y?[]:o.am([vt],We.x,We.y,gt.x,gt.y)}for(const Ft of jt){Ut.reset(Ft,.25*Be);let qt=0;qt=Ut.length<=.5*Be?1:Math.ceil(Ut.paddedLength/an)+1;for(let On=0;On<qt;On++){const cn=On/Math.max(qt-1,1),gr=Ut.lerp(cn),er=gr.x+le,$n=gr.y+le;se.push(er,$n,Be,0);const vi=er-Be,pn=$n-Be,ps=er+Be,ms=$n+Be;if(Ge=Ge&&this.isOffscreen(vi,pn,ps,ms),ze=ze||this.isInsideGrid(vi,pn,ps,ms),i!=="always"&&this.grid.hitTestCircle(er,$n,Be,i,z)&&(ke=!0,!R))return{circles:[],offscreen:!1,collisionDetected:ke}}}}return{circles:!R&&ke||!ze||Te<this.perspectiveRatioCutoff?[]:se,offscreen:Ge,collisionDetected:ke}}queryRenderedSymbols(i){if(i.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const c=[];let p=1/0,g=1/0,x=-1/0,E=-1/0;for(const L of i){const z=new o.P(L.x+le,L.y+le);p=Math.min(p,z.x),g=Math.min(g,z.y),x=Math.max(x,z.x),E=Math.max(E,z.y),c.push(z)}const T=this.grid.query(p,g,x,E).concat(this.ignoredGrid.query(p,g,x,E)),k={},R={};for(const L of T){const z=L.key;if(k[z.bucketInstanceId]===void 0&&(k[z.bucketInstanceId]={}),k[z.bucketInstanceId][z.featureIndex])continue;const Z=[new o.P(L.x1,L.y1),new o.P(L.x2,L.y1),new o.P(L.x2,L.y2),new o.P(L.x1,L.y2)];o.an(c,Z)&&(k[z.bucketInstanceId][z.featureIndex]=!0,R[z.bucketInstanceId]===void 0&&(R[z.bucketInstanceId]=[]),R[z.bucketInstanceId].push(z.featureIndex))}return R}insertCollisionBox(i,c,p,g,x,E){(p?this.ignoredGrid:this.grid).insert({bucketInstanceId:g,featureIndex:x,collisionGroupID:E,overlapMode:c},i[0],i[1],i[2],i[3])}insertCollisionCircles(i,c,p,g,x,E){const T=p?this.ignoredGrid:this.grid,k={bucketInstanceId:g,featureIndex:x,collisionGroupID:E,overlapMode:c};for(let R=0;R<i.length;R+=4)T.insertCircle(k,i[R],i[R+1],i[R+2])}projectAndGetPerspectiveRatio(i,c,p,g){let x;return g?(x=[c,p,g(c,p),1],o.ag(x,x,i)):(x=[c,p,0,1],ae(x,x,i)),{point:new o.P((x[0]/x[3]+1)/2*this.transform.width+le,(-x[1]/x[3]+1)/2*this.transform.height+le),perspectiveRatio:.5+this.transform.cameraToCenterDistance/x[3]*.5}}isOffscreen(i,c,p,g){return p<le||i>=this.screenRightBoundary||g<le||c>this.screenBottomBoundary}isInsideGrid(i,c,p,g){return p>=0&&i<this.gridRightBoundary&&g>=0&&c<this.gridBottomBoundary}getViewportMatrix(){const i=o.ao([]);return o.$(i,i,[-100,-100,0]),i}}function me(y,i,c){return i*(o.N/(y.tileSize*Math.pow(2,c-y.tileID.overscaledZ)))}class de{constructor(i,c,p,g){this.opacity=i?Math.max(0,Math.min(1,i.opacity+(i.placed?c:-c))):g&&p?1:0,this.placed=p}isHidden(){return this.opacity===0&&!this.placed}}class _e{constructor(i,c,p,g,x){this.text=new de(i?i.text:null,c,p,x),this.icon=new de(i?i.icon:null,c,g,x)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class De{constructor(i,c,p){this.text=i,this.icon=c,this.skipFade=p}}class Le{constructor(){this.invProjMatrix=o.Z(),this.viewportMatrix=o.Z(),this.circles=[]}}class Fe{constructor(i,c,p,g,x){this.bucketInstanceId=i,this.featureIndex=c,this.sourceLayerIndex=p,this.bucketIndex=g,this.tileID=x}}class Et{constructor(i){this.crossSourceCollisions=i,this.maxGroupID=0,this.collisionGroups={}}get(i){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[i]){const c=++this.maxGroupID;this.collisionGroups[i]={ID:c,predicate:p=>p.collisionGroupID===c}}return this.collisionGroups[i]}}function Mt(y,i,c,p,g){const{horizontalAlign:x,verticalAlign:E}=o.au(y);return new o.P(-(x-.5)*i+p[0]*g,-(E-.5)*c+p[1]*g)}function mt(y,i,c,p,g,x){const{x1:E,x2:T,y1:k,y2:R,anchorPointX:L,anchorPointY:z}=y,Z=new o.P(i,c);return p&&Z._rotate(g?x:-x),{x1:E+Z.x,y1:k+Z.y,x2:T+Z.x,y2:R+Z.y,anchorPointX:L,anchorPointY:z}}class Ct{constructor(i,c,p,g,x){this.transform=i.clone(),this.terrain=c,this.collisionIndex=new be(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=p,this.retainedQueryData={},this.collisionGroups=new Et(g),this.collisionCircleArrays={},this.prevPlacement=x,x&&(x.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(i,c,p,g){const x=p.getBucket(c),E=p.latestFeatureIndex;if(!x||!E||c.id!==x.layerIds[0])return;const T=p.collisionBoxArray,k=x.layers[0].layout,R=Math.pow(2,this.transform.zoom-p.tileID.overscaledZ),L=p.tileSize/o.N,z=this.transform.calculatePosMatrix(p.tileID.toUnwrapped()),Z=k.get("text-pitch-alignment")==="map",re=k.get("text-rotation-alignment")==="map",ne=me(p,1,this.transform.zoom),se=He(z,Z,re,this.transform,ne);let ee=null;if(Z){const Te=di(z,Z,re,this.transform,ne);ee=o.a1([],this.transform.labelPlaneMatrix,Te)}this.retainedQueryData[x.bucketInstanceId]=new Fe(x.bucketInstanceId,E,x.sourceLayerIndex,x.index,p.tileID);const ye={bucket:x,layout:k,posMatrix:z,textLabelPlaneMatrix:se,labelToScreenMatrix:ee,scale:R,textPixelRatio:L,holdingForFade:p.holdingForFade(),collisionBoxArray:T,partiallyEvaluatedTextSize:o.ah(x.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(x.sourceID)};if(g)for(const Te of x.sortKeyRanges){const{sortKey:ce,symbolInstanceStart:xe,symbolInstanceEnd:Ae}=Te;i.push({sortKey:ce,symbolInstanceStart:xe,symbolInstanceEnd:Ae,parameters:ye})}else i.push({symbolInstanceStart:0,symbolInstanceEnd:x.symbolInstances.length,parameters:ye})}attemptAnchorPlacement(i,c,p,g,x,E,T,k,R,L,z,Z,re,ne,se,ee){const ye=o.aq[i.textAnchor],Te=[i.textOffset0,i.textOffset1],ce=Mt(ye,p,g,Te,x),xe=this.collisionIndex.placeCollisionBox(mt(c,ce.x,ce.y,E,T,this.transform.angle),z,k,R,L.predicate,ee);if((!se||this.collisionIndex.placeCollisionBox(mt(se,ce.x,ce.y,E,T,this.transform.angle),z,k,R,L.predicate,ee).box.length!==0)&&xe.box.length>0){let Ae;if(this.prevPlacement&&this.prevPlacement.variableOffsets[Z.crossTileID]&&this.prevPlacement.placements[Z.crossTileID]&&this.prevPlacement.placements[Z.crossTileID].text&&(Ae=this.prevPlacement.variableOffsets[Z.crossTileID].anchor),Z.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[Z.crossTileID]={textOffset:Te,width:p,height:g,anchor:ye,textBoxScale:x,prevAnchor:Ae},this.markUsedJustification(re,ye,Z,ne),re.allowVerticalPlacement&&(this.markUsedOrientation(re,ne,Z),this.placedOrientations[Z.crossTileID]=ne),{shift:ce,placedGlyphBoxes:xe}}}placeLayerBucketPart(i,c,p){const{bucket:g,layout:x,posMatrix:E,textLabelPlaneMatrix:T,labelToScreenMatrix:k,textPixelRatio:R,holdingForFade:L,collisionBoxArray:z,partiallyEvaluatedTextSize:Z,collisionGroup:re}=i.parameters,ne=x.get("text-optional"),se=x.get("icon-optional"),ee=o.ar(x,"text-overlap","text-allow-overlap"),ye=ee==="always",Te=o.ar(x,"icon-overlap","icon-allow-overlap"),ce=Te==="always",xe=x.get("text-rotation-alignment")==="map",Ae=x.get("text-pitch-alignment")==="map",ke=x.get("icon-text-fit")!=="none",ze=x.get("symbol-z-order")==="viewport-y",Ge=ye&&(ce||!g.hasIconData()||se),Be=ce&&(ye||!g.hasTextData()||ne);!g.collisionArrays&&z&&g.deserializeCollisionBoxes(z);const We=this.retainedQueryData[g.bucketInstanceId].tileID,gt=this.terrain?(nt,kt)=>this.terrain.getElevation(We,nt,kt):null,Ut=(nt,kt)=>{var vt,an;if(c[nt.crossTileID])return;if(L)return void(this.placements[nt.crossTileID]=new De(!1,!1,!1));let jt=!1,Ft=!1,qt=!0,On=null,cn={box:null,offscreen:null},gr={box:null,offscreen:null},er=null,$n=null,vi=null,pn=0,ps=0,ms=0;kt.textFeatureIndex?pn=kt.textFeatureIndex:nt.useRuntimeCollisionCircles&&(pn=nt.featureIndex),kt.verticalTextFeatureIndex&&(ps=kt.verticalTextFeatureIndex);const ga=kt.textBox;if(ga){const Tr=Fn=>{let tr=o.ai.horizontal;if(g.allowVerticalPlacement&&!Fn&&this.prevPlacement){const Qr=this.prevPlacement.placedOrientations[nt.crossTileID];Qr&&(this.placedOrientations[nt.crossTileID]=Qr,tr=Qr,this.markUsedOrientation(g,tr,nt))}return tr},yr=(Fn,tr)=>{if(g.allowVerticalPlacement&&nt.numVerticalGlyphVertices>0&&kt.verticalTextBox){for(const Qr of g.writingModes)if(Qr===o.ai.vertical?(cn=tr(),gr=cn):cn=Fn(),cn&&cn.box&&cn.box.length)break}else cn=Fn()},Lr=nt.textAnchorOffsetStartIndex,$a=nt.textAnchorOffsetEndIndex;if($a===Lr){const Fn=(tr,Qr)=>{const Nn=this.collisionIndex.placeCollisionBox(tr,ee,R,E,re.predicate,gt);return Nn&&Nn.box&&Nn.box.length&&(this.markUsedOrientation(g,Qr,nt),this.placedOrientations[nt.crossTileID]=Qr),Nn};yr(()=>Fn(ga,o.ai.horizontal),()=>{const tr=kt.verticalTextBox;return g.allowVerticalPlacement&&nt.numVerticalGlyphVertices>0&&tr?Fn(tr,o.ai.vertical):{box:null,offscreen:null}}),Tr(cn&&cn.box&&cn.box.length)}else{let Fn=o.aq[(an=(vt=this.prevPlacement)===null||vt===void 0?void 0:vt.variableOffsets[nt.crossTileID])===null||an===void 0?void 0:an.anchor];const tr=(Nn,Ua,rc)=>{const Vp=Nn.x2-Nn.x1,jp=Nn.y2-Nn.y1,Mv=nt.textBoxScale,sd=ke&&Te==="never"?Ua:null;let gs={box:[],offscreen:!1},qa=ee==="never"?1:2,ys="never";Fn&&qa++;for(let Ni=0;Ni<qa;Ni++){for(let vs=Lr;vs<$a;vs++){const ad=g.textAnchorOffsets.get(vs);if(Fn&&ad.textAnchor!==Fn)continue;const $s=this.attemptAnchorPlacement(ad,Nn,Vp,jp,Mv,xe,Ae,R,E,re,ys,nt,g,rc,sd,gt);if($s&&(gs=$s.placedGlyphBoxes,gs&&gs.box&&gs.box.length))return jt=!0,On=$s.shift,gs}Fn?Fn=null:ys=ee}return gs};yr(()=>tr(ga,kt.iconBox,o.ai.horizontal),()=>{const Nn=kt.verticalTextBox;return g.allowVerticalPlacement&&!(cn&&cn.box&&cn.box.length)&&nt.numVerticalGlyphVertices>0&&Nn?tr(Nn,kt.verticalIconBox,o.ai.vertical):{box:null,offscreen:null}}),cn&&(jt=cn.box,qt=cn.offscreen);const Qr=Tr(cn&&cn.box);if(!jt&&this.prevPlacement){const Nn=this.prevPlacement.variableOffsets[nt.crossTileID];Nn&&(this.variableOffsets[nt.crossTileID]=Nn,this.markUsedJustification(g,Nn.anchor,nt,Qr))}}}if(er=cn,jt=er&&er.box&&er.box.length>0,qt=er&&er.offscreen,nt.useRuntimeCollisionCircles){const Tr=g.text.placedSymbolArray.get(nt.centerJustifiedTextSymbolIndex),yr=o.aj(g.textSizeData,Z,Tr),Lr=x.get("text-padding");$n=this.collisionIndex.placeCollisionCircles(ee,Tr,g.lineVertexArray,g.glyphOffsetArray,yr,E,T,k,p,Ae,re.predicate,nt.collisionCircleDiameter,Lr,gt),$n.circles.length&&$n.collisionDetected&&!p&&o.w("Collisions detected, but collision boxes are not shown"),jt=ye||$n.circles.length>0&&!$n.collisionDetected,qt=qt&&$n.offscreen}if(kt.iconFeatureIndex&&(ms=kt.iconFeatureIndex),kt.iconBox){const Tr=yr=>{const Lr=ke&&On?mt(yr,On.x,On.y,xe,Ae,this.transform.angle):yr;return this.collisionIndex.placeCollisionBox(Lr,Te,R,E,re.predicate,gt)};gr&&gr.box&&gr.box.length&&kt.verticalIconBox?(vi=Tr(kt.verticalIconBox),Ft=vi.box.length>0):(vi=Tr(kt.iconBox),Ft=vi.box.length>0),qt=qt&&vi.offscreen}const ja=ne||nt.numHorizontalGlyphVertices===0&&nt.numVerticalGlyphVertices===0,Oo=se||nt.numIconVertices===0;if(ja||Oo?Oo?ja||(Ft=Ft&&jt):jt=Ft&&jt:Ft=jt=Ft&&jt,jt&&er&&er.box&&this.collisionIndex.insertCollisionBox(er.box,ee,x.get("text-ignore-placement"),g.bucketInstanceId,gr&&gr.box&&ps?ps:pn,re.ID),Ft&&vi&&this.collisionIndex.insertCollisionBox(vi.box,Te,x.get("icon-ignore-placement"),g.bucketInstanceId,ms,re.ID),$n&&(jt&&this.collisionIndex.insertCollisionCircles($n.circles,ee,x.get("text-ignore-placement"),g.bucketInstanceId,pn,re.ID),p)){const Tr=g.bucketInstanceId;let yr=this.collisionCircleArrays[Tr];yr===void 0&&(yr=this.collisionCircleArrays[Tr]=new Le);for(let Lr=0;Lr<$n.circles.length;Lr+=4)yr.circles.push($n.circles[Lr+0]),yr.circles.push($n.circles[Lr+1]),yr.circles.push($n.circles[Lr+2]),yr.circles.push($n.collisionDetected?1:0)}if(nt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(g.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[nt.crossTileID]=new De(jt||Ge,Ft||Be,qt||g.justReloaded),c[nt.crossTileID]=!0};if(ze){if(i.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const nt=g.getSortedSymbolIndexes(this.transform.angle);for(let kt=nt.length-1;kt>=0;--kt){const vt=nt[kt];Ut(g.symbolInstances.get(vt),g.collisionArrays[vt])}}else for(let nt=i.symbolInstanceStart;nt<i.symbolInstanceEnd;nt++)Ut(g.symbolInstances.get(nt),g.collisionArrays[nt]);if(p&&g.bucketInstanceId in this.collisionCircleArrays){const nt=this.collisionCircleArrays[g.bucketInstanceId];o.as(nt.invProjMatrix,E),nt.viewportMatrix=this.collisionIndex.getViewportMatrix()}g.justReloaded=!1}markUsedJustification(i,c,p,g){let x;x=g===o.ai.vertical?p.verticalPlacedTextSymbolIndex:{left:p.leftJustifiedTextSymbolIndex,center:p.centerJustifiedTextSymbolIndex,right:p.rightJustifiedTextSymbolIndex}[o.at(c)];const E=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex,p.verticalPlacedTextSymbolIndex];for(const T of E)T>=0&&(i.text.placedSymbolArray.get(T).crossTileID=x>=0&&T!==x?0:p.crossTileID)}markUsedOrientation(i,c,p){const g=c===o.ai.horizontal||c===o.ai.horizontalOnly?c:0,x=c===o.ai.vertical?c:0,E=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex];for(const T of E)i.text.placedSymbolArray.get(T).placedOrientation=g;p.verticalPlacedTextSymbolIndex&&(i.text.placedSymbolArray.get(p.verticalPlacedTextSymbolIndex).placedOrientation=x)}commit(i){this.commitTime=i,this.zoomAtLastRecencyCheck=this.transform.zoom;const c=this.prevPlacement;let p=!1;this.prevZoomAdjustment=c?c.zoomAdjustment(this.transform.zoom):0;const g=c?c.symbolFadeChange(i):1,x=c?c.opacities:{},E=c?c.variableOffsets:{},T=c?c.placedOrientations:{};for(const k in this.placements){const R=this.placements[k],L=x[k];L?(this.opacities[k]=new _e(L,g,R.text,R.icon),p=p||R.text!==L.text.placed||R.icon!==L.icon.placed):(this.opacities[k]=new _e(null,g,R.text,R.icon,R.skipFade),p=p||R.text||R.icon)}for(const k in x){const R=x[k];if(!this.opacities[k]){const L=new _e(R,g,!1,!1);L.isHidden()||(this.opacities[k]=L,p=p||R.text.placed||R.icon.placed)}}for(const k in E)this.variableOffsets[k]||!this.opacities[k]||this.opacities[k].isHidden()||(this.variableOffsets[k]=E[k]);for(const k in T)this.placedOrientations[k]||!this.opacities[k]||this.opacities[k].isHidden()||(this.placedOrientations[k]=T[k]);if(c&&c.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");p?this.lastPlacementChangeTime=i:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=c?c.lastPlacementChangeTime:i)}updateLayerOpacities(i,c){const p={};for(const g of c){const x=g.getBucket(i);x&&g.latestFeatureIndex&&i.id===x.layerIds[0]&&this.updateBucketOpacities(x,p,g.collisionBoxArray)}}updateBucketOpacities(i,c,p){i.hasTextData()&&(i.text.opacityVertexArray.clear(),i.text.hasVisibleVertices=!1),i.hasIconData()&&(i.icon.opacityVertexArray.clear(),i.icon.hasVisibleVertices=!1),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexArray.clear(),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexArray.clear();const g=i.layers[0],x=g.layout,E=new _e(null,0,!1,!1,!0),T=x.get("text-allow-overlap"),k=x.get("icon-allow-overlap"),R=g._unevaluatedLayout.hasValue("text-variable-anchor")||g._unevaluatedLayout.hasValue("text-variable-anchor-offset"),L=x.get("text-rotation-alignment")==="map",z=x.get("text-pitch-alignment")==="map",Z=x.get("icon-text-fit")!=="none",re=new _e(null,0,T&&(k||!i.hasIconData()||x.get("icon-optional")),k&&(T||!i.hasTextData()||x.get("text-optional")),!0);!i.collisionArrays&&p&&(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData())&&i.deserializeCollisionBoxes(p);const ne=(se,ee,ye)=>{for(let Te=0;Te<ee/4;Te++)se.opacityVertexArray.emplaceBack(ye);se.hasVisibleVertices=se.hasVisibleVertices||ye!==Ri};for(let se=0;se<i.symbolInstances.length;se++){const ee=i.symbolInstances.get(se),{numHorizontalGlyphVertices:ye,numVerticalGlyphVertices:Te,crossTileID:ce}=ee;let xe=this.opacities[ce];c[ce]?xe=E:xe||(xe=re,this.opacities[ce]=xe),c[ce]=!0;const Ae=ee.numIconVertices>0,ke=this.placedOrientations[ee.crossTileID],ze=ke===o.ai.vertical,Ge=ke===o.ai.horizontal||ke===o.ai.horizontalOnly;if(ye>0||Te>0){const Be=pr(xe.text);ne(i.text,ye,ze?Ri:Be),ne(i.text,Te,Ge?Ri:Be);const We=xe.text.isHidden();[ee.rightJustifiedTextSymbolIndex,ee.centerJustifiedTextSymbolIndex,ee.leftJustifiedTextSymbolIndex].forEach(nt=>{nt>=0&&(i.text.placedSymbolArray.get(nt).hidden=We||ze?1:0)}),ee.verticalPlacedTextSymbolIndex>=0&&(i.text.placedSymbolArray.get(ee.verticalPlacedTextSymbolIndex).hidden=We||Ge?1:0);const gt=this.variableOffsets[ee.crossTileID];gt&&this.markUsedJustification(i,gt.anchor,ee,ke);const Ut=this.placedOrientations[ee.crossTileID];Ut&&(this.markUsedJustification(i,"left",ee,Ut),this.markUsedOrientation(i,Ut,ee))}if(Ae){const Be=pr(xe.icon),We=!(Z&&ee.verticalPlacedIconSymbolIndex&&ze);ee.placedIconSymbolIndex>=0&&(ne(i.icon,ee.numIconVertices,We?Be:Ri),i.icon.placedSymbolArray.get(ee.placedIconSymbolIndex).hidden=xe.icon.isHidden()),ee.verticalPlacedIconSymbolIndex>=0&&(ne(i.icon,ee.numVerticalIconVertices,We?Ri:Be),i.icon.placedSymbolArray.get(ee.verticalPlacedIconSymbolIndex).hidden=xe.icon.isHidden())}if(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData()){const Be=i.collisionArrays[se];if(Be){let We=new o.P(0,0);if(Be.textBox||Be.verticalTextBox){let Ut=!0;if(R){const nt=this.variableOffsets[ce];nt?(We=Mt(nt.anchor,nt.width,nt.height,nt.textOffset,nt.textBoxScale),L&&We._rotate(z?this.transform.angle:-this.transform.angle)):Ut=!1}Be.textBox&&Lt(i.textCollisionBox.collisionVertexArray,xe.text.placed,!Ut||ze,We.x,We.y),Be.verticalTextBox&&Lt(i.textCollisionBox.collisionVertexArray,xe.text.placed,!Ut||Ge,We.x,We.y)}const gt=!!(!Ge&&Be.verticalIconBox);Be.iconBox&&Lt(i.iconCollisionBox.collisionVertexArray,xe.icon.placed,gt,Z?We.x:0,Z?We.y:0),Be.verticalIconBox&&Lt(i.iconCollisionBox.collisionVertexArray,xe.icon.placed,!gt,Z?We.x:0,Z?We.y:0)}}}if(i.sortFeatures(this.transform.angle),this.retainedQueryData[i.bucketInstanceId]&&(this.retainedQueryData[i.bucketInstanceId].featureSortOrder=i.featureSortOrder),i.hasTextData()&&i.text.opacityVertexBuffer&&i.text.opacityVertexBuffer.updateData(i.text.opacityVertexArray),i.hasIconData()&&i.icon.opacityVertexBuffer&&i.icon.opacityVertexBuffer.updateData(i.icon.opacityVertexArray),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexBuffer&&i.iconCollisionBox.collisionVertexBuffer.updateData(i.iconCollisionBox.collisionVertexArray),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexBuffer&&i.textCollisionBox.collisionVertexBuffer.updateData(i.textCollisionBox.collisionVertexArray),i.text.opacityVertexArray.length!==i.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${i.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${i.text.layoutVertexArray.length}) / 4`);if(i.icon.opacityVertexArray.length!==i.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${i.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${i.icon.layoutVertexArray.length}) / 4`);if(i.bucketInstanceId in this.collisionCircleArrays){const se=this.collisionCircleArrays[i.bucketInstanceId];i.placementInvProjMatrix=se.invProjMatrix,i.placementViewportMatrix=se.viewportMatrix,i.collisionCircleArray=se.circles,delete this.collisionCircleArrays[i.bucketInstanceId]}}symbolFadeChange(i){return this.fadeDuration===0?1:(i-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(i){return Math.max(0,(this.transform.zoom-i)/1.5)}hasTransitions(i){return this.stale||i-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(i,c){const p=this.zoomAtLastRecencyCheck===c?1-this.zoomAdjustment(c):1;return this.zoomAtLastRecencyCheck=c,this.commitTime+this.fadeDuration*p>i}setStale(){this.stale=!0}}function Lt(y,i,c,p,g){y.emplaceBack(i?1:0,c?1:0,p||0,g||0),y.emplaceBack(i?1:0,c?1:0,p||0,g||0),y.emplaceBack(i?1:0,c?1:0,p||0,g||0),y.emplaceBack(i?1:0,c?1:0,p||0,g||0)}const tn=Math.pow(2,25),on=Math.pow(2,24),Kt=Math.pow(2,17),Ht=Math.pow(2,16),Sr=Math.pow(2,9),un=Math.pow(2,8),Kn=Math.pow(2,1);function pr(y){if(y.opacity===0&&!y.placed)return 0;if(y.opacity===1&&y.placed)return 4294967295;const i=y.placed?1:0,c=Math.floor(127*y.opacity);return c*tn+i*on+c*Kt+i*Ht+c*Sr+i*un+c*Kn+i}const Ri=0;class np{constructor(i){this._sortAcrossTiles=i.layout.get("symbol-z-order")!=="viewport-y"&&!i.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(i,c,p,g,x){const E=this._bucketParts;for(;this._currentTileIndex<i.length;)if(c.getBucketParts(E,g,i[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,x())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,E.sort((T,k)=>T.sortKey-k.sortKey));this._currentPartIndex<E.length;)if(c.placeLayerBucketPart(E[this._currentPartIndex],this._seenCrossTileIDs,p),this._currentPartIndex++,x())return!0;return!1}}class So{constructor(i,c,p,g,x,E,T,k){this.placement=new Ct(i,c,E,T,k),this._currentPlacementIndex=p.length-1,this._forceFullPlacement=g,this._showCollisionBoxes=x,this._done=!1}isDone(){return this._done}continuePlacement(i,c,p){const g=o.h.now(),x=()=>!this._forceFullPlacement&&o.h.now()-g>2;for(;this._currentPlacementIndex>=0;){const E=c[i[this._currentPlacementIndex]],T=this.placement.collisionIndex.transform.zoom;if(E.type==="symbol"&&(!E.minzoom||E.minzoom<=T)&&(!E.maxzoom||E.maxzoom>T)){if(this._inProgressLayer||(this._inProgressLayer=new np(E)),this._inProgressLayer.continuePlacement(p[E.source],this.placement,this._showCollisionBoxes,E,x))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(i){return this.placement.commit(i),this.placement}}const Eo=512/o.N/2;class pv{constructor(i,c,p){this.tileID=i,this.bucketInstanceId=p,this._symbolsByKey={};const g=new Map;for(let x=0;x<c.length;x++){const E=c.get(x),T=E.key,k=g.get(T);k?k.push(E):g.set(T,[E])}for(const[x,E]of g){const T={positions:E.map(k=>({x:Math.floor(k.anchorX*Eo),y:Math.floor(k.anchorY*Eo)})),crossTileIDs:E.map(k=>k.crossTileID)};if(T.positions.length>128){const k=new o.av(T.positions.length,16,Uint16Array);for(const{x:R,y:L}of T.positions)k.add(R,L);k.finish(),delete T.positions,T.index=k}this._symbolsByKey[x]=T}}getScaledCoordinates(i,c){const{x:p,y:g,z:x}=this.tileID.canonical,{x:E,y:T,z:k}=c.canonical,R=Eo/Math.pow(2,k-x),L=(T*o.N+i.anchorY)*R,z=g*o.N*Eo;return{x:Math.floor((E*o.N+i.anchorX)*R-p*o.N*Eo),y:Math.floor(L-z)}}findMatches(i,c,p){const g=this.tileID.canonical.z<c.canonical.z?1:Math.pow(2,this.tileID.canonical.z-c.canonical.z);for(let x=0;x<i.length;x++){const E=i.get(x);if(E.crossTileID)continue;const T=this._symbolsByKey[E.key];if(!T)continue;const k=this.getScaledCoordinates(E,c);if(T.index){const R=T.index.range(k.x-g,k.y-g,k.x+g,k.y+g).sort();for(const L of R){const z=T.crossTileIDs[L];if(!p[z]){p[z]=!0,E.crossTileID=z;break}}}else if(T.positions)for(let R=0;R<T.positions.length;R++){const L=T.positions[R],z=T.crossTileIDs[R];if(Math.abs(L.x-k.x)<=g&&Math.abs(L.y-k.y)<=g&&!p[z]){p[z]=!0,E.crossTileID=z;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:i})=>i)}}class sn{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class vh{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(i){const c=Math.round((i-this.lng)/360);if(c!==0)for(const p in this.indexes){const g=this.indexes[p],x={};for(const E in g){const T=g[E];T.tileID=T.tileID.unwrapTo(T.tileID.wrap+c),x[T.tileID.key]=T}this.indexes[p]=x}this.lng=i}addBucket(i,c,p){if(this.indexes[i.overscaledZ]&&this.indexes[i.overscaledZ][i.key]){if(this.indexes[i.overscaledZ][i.key].bucketInstanceId===c.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(i.overscaledZ,this.indexes[i.overscaledZ][i.key])}for(let x=0;x<c.symbolInstances.length;x++)c.symbolInstances.get(x).crossTileID=0;this.usedCrossTileIDs[i.overscaledZ]||(this.usedCrossTileIDs[i.overscaledZ]={});const g=this.usedCrossTileIDs[i.overscaledZ];for(const x in this.indexes){const E=this.indexes[x];if(Number(x)>i.overscaledZ)for(const T in E){const k=E[T];k.tileID.isChildOf(i)&&k.findMatches(c.symbolInstances,i,g)}else{const T=E[i.scaledTo(Number(x)).key];T&&T.findMatches(c.symbolInstances,i,g)}}for(let x=0;x<c.symbolInstances.length;x++){const E=c.symbolInstances.get(x);E.crossTileID||(E.crossTileID=p.generate(),g[E.crossTileID]=!0)}return this.indexes[i.overscaledZ]===void 0&&(this.indexes[i.overscaledZ]={}),this.indexes[i.overscaledZ][i.key]=new pv(i,c.symbolInstances,c.bucketInstanceId),!0}removeBucketCrossTileIDs(i,c){for(const p of c.getCrossTileIDsLists())for(const g of p)delete this.usedCrossTileIDs[i][g]}removeStaleBuckets(i){let c=!1;for(const p in this.indexes){const g=this.indexes[p];for(const x in g)i[g[x].bucketInstanceId]||(this.removeBucketCrossTileIDs(p,g[x]),delete g[x],c=!0)}return c}}class ku{constructor(){this.layerIndexes={},this.crossTileIDs=new sn,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(i,c,p){let g=this.layerIndexes[i.id];g===void 0&&(g=this.layerIndexes[i.id]=new vh);let x=!1;const E={};g.handleWrapJump(p);for(const T of c){const k=T.getBucket(i);k&&i.id===k.layerIds[0]&&(k.bucketInstanceId||(k.bucketInstanceId=++this.maxBucketInstanceId),g.addBucket(T.tileID,k,this.crossTileIDs)&&(x=!0),E[k.bucketInstanceId]=!0)}return g.removeStaleBuckets(E)&&(x=!0),x}pruneUnusedLayers(i){const c={};i.forEach(p=>{c[p]=!0});for(const p in this.layerIndexes)c[p]||delete this.layerIndexes[p]}}const Er=(y,i)=>o.x(y,i&&i.filter(c=>c.identifier!=="source.canvas")),fi=o.F(o.ax,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setGlyphs","setSprite"]),mv=o.F(o.ax,["setCenter","setZoom","setBearing","setPitch"]),Di=o.aw();class mr extends o.E{constructor(i,c={}){super(),this.map=i,this.dispatcher=new Rt(Gi(),this,i._getMapId()),this.imageManager=new qe,this.imageManager.setEventedParent(this),this.glyphManager=new ct(i._requestManager,c.localIdeographFontFamily),this.lineAtlas=new ft(256,512),this.crossTileSymbolIndex=new ku,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new o.ay,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",o.az());const p=this;this._rtlTextPluginCallback=mr.registerForPluginStateChange(g=>{p.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:g.pluginStatus,pluginURL:g.pluginURL},(x,E)=>{if(o.aA(x),E&&E.every(T=>T))for(const T in p.sourceCaches){const k=p.sourceCaches[T].getSource().type;k!=="vector"&&k!=="geojson"||p.sourceCaches[T].reload()}})}),this.on("data",g=>{if(g.dataType!=="source"||g.sourceDataType!=="metadata")return;const x=this.sourceCaches[g.sourceId];if(!x)return;const E=x.getSource();if(E&&E.vectorLayerIds)for(const T in this._layers){const k=this._layers[T];k.source===E.id&&this._validateLayer(k)}})}loadURL(i,c={},p){this.fire(new o.k("dataloading",{dataType:"style"})),c.validate=typeof c.validate!="boolean"||c.validate;const g=this.map._requestManager.transformRequest(i,F.Style);this._request=o.f(g,(x,E)=>{this._request=null,x?this.fire(new o.j(x)):E&&this._load(E,c,p)})}loadJSON(i,c={},p){this.fire(new o.k("dataloading",{dataType:"style"})),this._request=o.h.frame(()=>{this._request=null,c.validate=c.validate!==!1,this._load(i,c,p)})}loadEmpty(){this.fire(new o.k("dataloading",{dataType:"style"})),this._load(Di,{validate:!1})}_load(i,c,p){var g;const x=c.transformStyle?c.transformStyle(p,i):i;if(!c.validate||!Er(this,o.y(x))){this._loaded=!0,this.stylesheet=x;for(const E in x.sources)this.addSource(E,x.sources[E],{validate:!1});x.sprite?this._loadSprite(x.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(x.glyphs),this._createLayers(),this.light=new Ke(this.stylesheet.light),this.map.setTerrain((g=this.stylesheet.terrain)!==null&&g!==void 0?g:null),this.fire(new o.k("data",{dataType:"style"})),this.fire(new o.k("style.load"))}}_createLayers(){const i=o.aB(this.stylesheet.layers);this.dispatcher.broadcast("setLayers",i),this._order=i.map(c=>c.id),this._layers={},this._serializedLayers=null;for(const c of i){const p=o.aC(c);p.setEventedParent(this,{layer:{id:c.id}}),this._layers[c.id]=p}}_loadSprite(i,c=!1,p=void 0){this.imageManager.setLoaded(!1),this._spriteRequest=function(g,x,E,T){const k=ve(g),R=k.length,L=E>1?"@2x":"",z={},Z={},re={};for(const{id:ne,url:se}of k){const ee=x.transformRequest(x.normalizeSpriteURL(se,L,".json"),F.SpriteJSON),ye=`${ne}_${ee.url}`;z[ye]=o.f(ee,(xe,Ae)=>{delete z[ye],Z[ne]=Ae,Ve(T,Z,re,xe,R)});const Te=x.transformRequest(x.normalizeSpriteURL(se,L,".png"),F.SpriteImage),ce=`${ne}_${Te.url}`;z[ce]=G.getImage(Te,(xe,Ae)=>{delete z[ce],re[ne]=Ae,Ve(T,Z,re,xe,R)})}return{cancel(){for(const ne of Object.values(z))ne.cancel()}}}(i,this.map._requestManager,this.map.getPixelRatio(),(g,x)=>{if(this._spriteRequest=null,g)this.fire(new o.j(g));else if(x)for(const E in x){this._spritesImagesIds[E]=[];const T=this._spritesImagesIds[E]?this._spritesImagesIds[E].filter(k=>!(k in x)):[];for(const k of T)this.imageManager.removeImage(k),this._changedImages[k]=!0;for(const k in x[E]){const R=E==="default"?k:`${E}:${k}`;this._spritesImagesIds[E].push(R),R in this.imageManager.images?this.imageManager.updateImage(R,x[E][k],!1):this.imageManager.addImage(R,x[E][k]),c&&(this._changedImages[R]=!0)}}this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),c&&(this._changed=!0),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new o.k("data",{dataType:"style"})),p&&p(g)})}_unloadSprite(){for(const i of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(i),this._changedImages[i]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new o.k("data",{dataType:"style"}))}_validateLayer(i){const c=this.sourceCaches[i.source];if(!c)return;const p=i.sourceLayer;if(!p)return;const g=c.getSource();(g.type==="geojson"||g.vectorLayerIds&&g.vectorLayerIds.indexOf(p)===-1)&&this.fire(new o.j(new Error(`Source layer "${p}" does not exist on source "${g.id}" as specified by style layer "${i.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const i in this.sourceCaches)if(!this.sourceCaches[i].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(i){const c=this._serializedAllLayers();if(!i||i.length===0)return Object.values(c);const p=[];for(const g of i)c[g]&&p.push(c[g]);return p}_serializedAllLayers(){let i=this._serializedLayers;if(i)return i;i=this._serializedLayers={};const c=Object.keys(this._layers);for(const p of c){const g=this._layers[p];g.type!=="custom"&&(i[p]=g.serialize())}return i}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const i in this.sourceCaches)if(this.sourceCaches[i].hasTransition())return!0;for(const i in this._layers)if(this._layers[i].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(i){if(!this._loaded)return;const c=this._changed;if(this._changed){const g=Object.keys(this._updatedLayers),x=Object.keys(this._removedLayers);(g.length||x.length)&&this._updateWorkerLayers(g,x);for(const E in this._updatedSources){const T=this._updatedSources[E];if(T==="reload")this._reloadSource(E);else{if(T!=="clear")throw new Error(`Invalid action ${T}`);this._clearSource(E)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const E in this._updatedPaintProps)this._layers[E].updateTransitions(i);this.light.updateTransitions(i),this._resetUpdates()}const p={};for(const g in this.sourceCaches){const x=this.sourceCaches[g];p[g]=x.used,x.used=!1}for(const g of this._order){const x=this._layers[g];x.recalculate(i,this._availableImages),!x.isHidden(i.zoom)&&x.source&&(this.sourceCaches[x.source].used=!0)}for(const g in p){const x=this.sourceCaches[g];p[g]!==x.used&&x.fire(new o.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:g}))}this.light.recalculate(i),this.z=i.zoom,c&&this.fire(new o.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const i=Object.keys(this._changedImages);if(i.length){for(const c in this.sourceCaches)this.sourceCaches[c].reloadTilesForDependencies(["icons","patterns"],i);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const i in this.sourceCaches)this.sourceCaches[i].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(i,c){this.dispatcher.broadcast("updateLayers",{layers:this._serializeByIds(i),removedIds:c})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(i,c={}){this._checkLoaded();const p=this.serialize();if(i=c.transformStyle?c.transformStyle(p,i):i,Er(this,o.y(i)))return!1;(i=o.aD(i)).layers=o.aB(i.layers);const g=o.aE(p,i).filter(E=>!(E.command in mv));if(g.length===0)return!1;const x=g.filter(E=>!(E.command in fi));if(x.length>0)throw new Error(`Unimplemented: ${x.map(E=>E.command).join(", ")}.`);for(const E of g)E.command!=="setTransition"&&this[E.command].apply(this,E.args);return this.stylesheet=i,this._serializedLayers=null,!0}addImage(i,c){if(this.getImage(i))return this.fire(new o.j(new Error(`An image named "${i}" already exists.`)));this.imageManager.addImage(i,c),this._afterImageUpdated(i)}updateImage(i,c){this.imageManager.updateImage(i,c)}getImage(i){return this.imageManager.getImage(i)}removeImage(i){if(!this.getImage(i))return this.fire(new o.j(new Error(`An image named "${i}" does not exist.`)));this.imageManager.removeImage(i),this._afterImageUpdated(i)}_afterImageUpdated(i){this._availableImages=this.imageManager.listImages(),this._changedImages[i]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new o.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(i,c,p={}){if(this._checkLoaded(),this.sourceCaches[i]!==void 0)throw new Error(`Source "${i}" already exists.`);if(!c.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(c).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(c.type)>=0&&this._validate(o.y.source,`sources.${i}`,c,null,p))return;this.map&&this.map._collectResourceTiming&&(c.collectResourceTiming=!0);const g=this.sourceCaches[i]=new st(i,c,this.dispatcher);g.style=this,g.setEventedParent(this,()=>({isSourceLoaded:g.loaded(),source:g.serialize(),sourceId:i})),g.onAdd(this.map),this._changed=!0}removeSource(i){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error("There is no source with this ID");for(const p in this._layers)if(this._layers[p].source===i)return this.fire(new o.j(new Error(`Source "${i}" cannot be removed while layer "${p}" is using it.`)));const c=this.sourceCaches[i];delete this.sourceCaches[i],delete this._updatedSources[i],c.fire(new o.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:i})),c.setEventedParent(null),c.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(i,c){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error(`There is no source with this ID=${i}`);const p=this.sourceCaches[i].getSource();if(p.type!=="geojson")throw new Error(`geojsonSource.type is ${p.type}, which is !== 'geojson`);p.setData(c),this._changed=!0}getSource(i){return this.sourceCaches[i]&&this.sourceCaches[i].getSource()}addLayer(i,c,p={}){this._checkLoaded();const g=i.id;if(this.getLayer(g))return void this.fire(new o.j(new Error(`Layer "${g}" already exists on this map.`)));let x;if(i.type==="custom"){if(Er(this,o.aF(i)))return;x=o.aC(i)}else{if("source"in i&&typeof i.source=="object"&&(this.addSource(g,i.source),i=o.aD(i),i=o.e(i,{source:g})),this._validate(o.y.layer,`layers.${g}`,i,{arrayIndex:-1},p))return;x=o.aC(i),this._validateLayer(x),x.setEventedParent(this,{layer:{id:g}})}const E=c?this._order.indexOf(c):this._order.length;if(c&&E===-1)this.fire(new o.j(new Error(`Cannot add layer "${g}" before non-existing layer "${c}".`)));else{if(this._order.splice(E,0,g),this._layerOrderChanged=!0,this._layers[g]=x,this._removedLayers[g]&&x.source&&x.type!=="custom"){const T=this._removedLayers[g];delete this._removedLayers[g],T.type!==x.type?this._updatedSources[x.source]="clear":(this._updatedSources[x.source]="reload",this.sourceCaches[x.source].pause())}this._updateLayer(x),x.onAdd&&x.onAdd(this.map)}}moveLayer(i,c){if(this._checkLoaded(),this._changed=!0,!this._layers[i])return void this.fire(new o.j(new Error(`The layer '${i}' does not exist in the map's style and cannot be moved.`)));if(i===c)return;const p=this._order.indexOf(i);this._order.splice(p,1);const g=c?this._order.indexOf(c):this._order.length;c&&g===-1?this.fire(new o.j(new Error(`Cannot move layer "${i}" before non-existing layer "${c}".`))):(this._order.splice(g,0,i),this._layerOrderChanged=!0)}removeLayer(i){this._checkLoaded();const c=this._layers[i];if(!c)return void this.fire(new o.j(new Error(`Cannot remove non-existing layer "${i}".`)));c.setEventedParent(null);const p=this._order.indexOf(i);this._order.splice(p,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[i]=c,delete this._layers[i],this._serializedLayers&&delete this._serializedLayers[i],delete this._updatedLayers[i],delete this._updatedPaintProps[i],c.onRemove&&c.onRemove(this.map)}getLayer(i){return this._layers[i]}getLayersOrder(){return[...this._order]}hasLayer(i){return i in this._layers}setLayerZoomRange(i,c,p){this._checkLoaded();const g=this.getLayer(i);g?g.minzoom===c&&g.maxzoom===p||(c!=null&&(g.minzoom=c),p!=null&&(g.maxzoom=p),this._updateLayer(g)):this.fire(new o.j(new Error(`Cannot set the zoom range of non-existing layer "${i}".`)))}setFilter(i,c,p={}){this._checkLoaded();const g=this.getLayer(i);if(g){if(!o.aG(g.filter,c))return c==null?(g.filter=void 0,void this._updateLayer(g)):void(this._validate(o.y.filter,`layers.${g.id}.filter`,c,null,p)||(g.filter=o.aD(c),this._updateLayer(g)))}else this.fire(new o.j(new Error(`Cannot filter non-existing layer "${i}".`)))}getFilter(i){return o.aD(this.getLayer(i).filter)}setLayoutProperty(i,c,p,g={}){this._checkLoaded();const x=this.getLayer(i);x?o.aG(x.getLayoutProperty(c),p)||(x.setLayoutProperty(c,p,g),this._updateLayer(x)):this.fire(new o.j(new Error(`Cannot style non-existing layer "${i}".`)))}getLayoutProperty(i,c){const p=this.getLayer(i);if(p)return p.getLayoutProperty(c);this.fire(new o.j(new Error(`Cannot get style of non-existing layer "${i}".`)))}setPaintProperty(i,c,p,g={}){this._checkLoaded();const x=this.getLayer(i);x?o.aG(x.getPaintProperty(c),p)||(x.setPaintProperty(c,p,g)&&this._updateLayer(x),this._changed=!0,this._updatedPaintProps[i]=!0):this.fire(new o.j(new Error(`Cannot style non-existing layer "${i}".`)))}getPaintProperty(i,c){return this.getLayer(i).getPaintProperty(c)}setFeatureState(i,c){this._checkLoaded();const p=i.source,g=i.sourceLayer,x=this.sourceCaches[p];if(x===void 0)return void this.fire(new o.j(new Error(`The source '${p}' does not exist in the map's style.`)));const E=x.getSource().type;E==="geojson"&&g?this.fire(new o.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):E!=="vector"||g?(i.id===void 0&&this.fire(new o.j(new Error("The feature id parameter must be provided."))),x.setFeatureState(g,i.id,c)):this.fire(new o.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(i,c){this._checkLoaded();const p=i.source,g=this.sourceCaches[p];if(g===void 0)return void this.fire(new o.j(new Error(`The source '${p}' does not exist in the map's style.`)));const x=g.getSource().type,E=x==="vector"?i.sourceLayer:void 0;x!=="vector"||E?c&&typeof i.id!="string"&&typeof i.id!="number"?this.fire(new o.j(new Error("A feature id is required to remove its specific state property."))):g.removeFeatureState(E,i.id,c):this.fire(new o.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(i){this._checkLoaded();const c=i.source,p=i.sourceLayer,g=this.sourceCaches[c];if(g!==void 0)return g.getSource().type!=="vector"||p?(i.id===void 0&&this.fire(new o.j(new Error("The feature id parameter must be provided."))),g.getFeatureState(p,i.id)):void this.fire(new o.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new o.j(new Error(`The source '${c}' does not exist in the map's style.`)))}getTransition(){return o.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const i=o.aH(this.sourceCaches,x=>x.serialize()),c=this._serializeByIds(this._order),p=this.map.getTerrain()||void 0,g=this.stylesheet;return o.aI({version:g.version,name:g.name,metadata:g.metadata,light:g.light,center:g.center,zoom:g.zoom,bearing:g.bearing,pitch:g.pitch,sprite:g.sprite,glyphs:g.glyphs,transition:g.transition,sources:i,layers:c,terrain:p},x=>x!==void 0)}_updateLayer(i){this._updatedLayers[i.id]=!0,i.source&&!this._updatedSources[i.source]&&this.sourceCaches[i.source].getSource().type!=="raster"&&(this._updatedSources[i.source]="reload",this.sourceCaches[i.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(i){const c=E=>this._layers[E].type==="fill-extrusion",p={},g=[];for(let E=this._order.length-1;E>=0;E--){const T=this._order[E];if(c(T)){p[T]=E;for(const k of i){const R=k[T];if(R)for(const L of R)g.push(L)}}}g.sort((E,T)=>T.intersectionZ-E.intersectionZ);const x=[];for(let E=this._order.length-1;E>=0;E--){const T=this._order[E];if(c(T))for(let k=g.length-1;k>=0;k--){const R=g[k].feature;if(p[R.layer.id]<E)break;x.push(R),g.pop()}else for(const k of i){const R=k[T];if(R)for(const L of R)x.push(L.feature)}}return x}queryRenderedFeatures(i,c,p){c&&c.filter&&this._validate(o.y.filter,"queryRenderedFeatures.filter",c.filter,null,c);const g={};if(c&&c.layers){if(!Array.isArray(c.layers))return this.fire(new o.j(new Error("parameters.layers must be an Array."))),[];for(const T of c.layers){const k=this._layers[T];if(!k)return this.fire(new o.j(new Error(`The layer '${T}' does not exist in the map's style and cannot be queried for features.`))),[];g[k.source]=!0}}const x=[];c.availableImages=this._availableImages;const E=this._serializedAllLayers();for(const T in this.sourceCaches)c.layers&&!g[T]||x.push(la(this.sourceCaches[T],this._layers,E,i,c,p));return this.placement&&x.push(function(T,k,R,L,z,Z,re){const ne={},se=Z.queryRenderedSymbols(L),ee=[];for(const ye of Object.keys(se).map(Number))ee.push(re[ye]);ee.sort(Ls);for(const ye of ee){const Te=ye.featureIndex.lookupSymbolFeatures(se[ye.bucketInstanceId],k,ye.bucketIndex,ye.sourceLayerIndex,z.filter,z.layers,z.availableImages,T);for(const ce in Te){const xe=ne[ce]=ne[ce]||[],Ae=Te[ce];Ae.sort((ke,ze)=>{const Ge=ye.featureSortOrder;if(Ge){const Be=Ge.indexOf(ke.featureIndex);return Ge.indexOf(ze.featureIndex)-Be}return ze.featureIndex-ke.featureIndex});for(const ke of Ae)xe.push(ke)}}for(const ye in ne)ne[ye].forEach(Te=>{const ce=Te.feature,xe=R[T[ye].source].getFeatureState(ce.layer["source-layer"],ce.id);ce.source=ce.layer.source,ce.layer["source-layer"]&&(ce.sourceLayer=ce.layer["source-layer"]),ce.state=xe});return ne}(this._layers,E,this.sourceCaches,i,c,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(x)}querySourceFeatures(i,c){c&&c.filter&&this._validate(o.y.filter,"querySourceFeatures.filter",c.filter,null,c);const p=this.sourceCaches[i];return p?function(g,x){const E=g.getRenderableIds().map(R=>g.getTileByID(R)),T=[],k={};for(let R=0;R<E.length;R++){const L=E[R],z=L.tileID.canonical.key;k[z]||(k[z]=!0,L.querySourceFeatures(T,x))}return T}(p,c):[]}addSourceType(i,c,p){return Ii(i)?p(new Error(`A source type called "${i}" already exists.`)):(((g,x)=>{oa[g]=x})(i,c),c.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:i,url:c.workerSourceURL},p):p(null,null))}getLight(){return this.light.getLight()}setLight(i,c={}){this._checkLoaded();const p=this.light.getLight();let g=!1;for(const E in i)if(!o.aG(i[E],p[E])){g=!0;break}if(!g)return;const x={now:o.h.now(),transition:o.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(i,c),this.light.updateTransitions(x)}_validate(i,c,p,g,x={}){return(!x||x.validate!==!1)&&Er(this,i.call(o.y,o.e({key:c,style:this.serialize(),value:p,styleSpec:o.v},g)))}_remove(i=!0){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),o.aJ.off("pluginStateChange",this._rtlTextPluginCallback);for(const c in this._layers)this._layers[c].setEventedParent(null);for(const c in this.sourceCaches){const p=this.sourceCaches[c];p.setEventedParent(null),p.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove(i)}_clearSource(i){this.sourceCaches[i].clearTiles()}_reloadSource(i){this.sourceCaches[i].resume(),this.sourceCaches[i].reload()}_updateSources(i){for(const c in this.sourceCaches)this.sourceCaches[c].update(i,this.map.terrain)}_generateCollisionBoxes(){for(const i in this.sourceCaches)this._reloadSource(i)}_updatePlacement(i,c,p,g,x=!1){let E=!1,T=!1;const k={};for(const R of this._order){const L=this._layers[R];if(L.type!=="symbol")continue;if(!k[L.source]){const Z=this.sourceCaches[L.source];k[L.source]=Z.getRenderableIds(!0).map(re=>Z.getTileByID(re)).sort((re,ne)=>ne.tileID.overscaledZ-re.tileID.overscaledZ||(re.tileID.isLessThan(ne.tileID)?-1:1))}const z=this.crossTileSymbolIndex.addLayer(L,k[L.source],i.center.lng);E=E||z}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((x=x||this._layerOrderChanged||p===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(o.h.now(),i.zoom))&&(this.pauseablePlacement=new So(i,this.map.terrain,this._order,x,c,p,g,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,k),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(o.h.now()),T=!0),E&&this.pauseablePlacement.placement.setStale()),T||E)for(const R of this._order){const L=this._layers[R];L.type==="symbol"&&this.placement.updateLayerOpacities(L,k[L.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(o.h.now())}_releaseSymbolFadeTiles(){for(const i in this.sourceCaches)this.sourceCaches[i].releaseSymbolFadeTiles()}getImages(i,c,p){this.imageManager.getImages(c.icons,p),this._updateTilesForChangedImages();const g=this.sourceCaches[c.source];g&&g.setDependencies(c.tileID.key,c.type,c.icons)}getGlyphs(i,c,p){this.glyphManager.getGlyphs(c.stacks,p);const g=this.sourceCaches[c.source];g&&g.setDependencies(c.tileID.key,c.type,[""])}getResource(i,c,p){return o.m(c,p)}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(i,c={}){this._checkLoaded(),i&&this._validate(o.y.glyphs,"glyphs",i,null,c)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=i,this.glyphManager.entries={},this.glyphManager.setURL(i))}addSprite(i,c,p={},g){this._checkLoaded();const x=[{id:i,url:c}],E=[...ve(this.stylesheet.sprite),...x];this._validate(o.y.sprite,"sprite",E,null,p)||(this.stylesheet.sprite=E,this._loadSprite(x,!0,g))}removeSprite(i){this._checkLoaded();const c=ve(this.stylesheet.sprite);if(c.find(p=>p.id===i)){if(this._spritesImagesIds[i])for(const p of this._spritesImagesIds[i])this.imageManager.removeImage(p),this._changedImages[p]=!0;c.splice(c.findIndex(p=>p.id===i),1),this.stylesheet.sprite=c.length>0?c:void 0,delete this._spritesImagesIds[i],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new o.k("data",{dataType:"style"}))}else this.fire(new o.j(new Error(`Sprite "${i}" doesn't exists on this map.`)))}getSprite(){return ve(this.stylesheet.sprite)}setSprite(i,c={},p){this._checkLoaded(),i&&this._validate(o.y.sprite,"sprite",i,null,c)||(this.stylesheet.sprite=i,i?this._loadSprite(i,!0,p):(this._unloadSprite(),p&&p(null)))}}mr.registerForPluginStateChange=o.aK;var Iu=o.Q([{name:"a_pos",type:"Int16",components:2}]),To="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const Sn={prelude:Yt(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:Yt(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Yt(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Yt(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Yt("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Yt(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:Yt(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Yt("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Yt("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Yt("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:Yt(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:Yt(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:Yt(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:Yt(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Yt(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Yt(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Yt(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Yt(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Yt(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Yt(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Yt(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Yt(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Yt(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Yt(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Yt(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Yt(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Yt("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",To),terrainDepth:Yt("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",To),terrainCoords:Yt("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",To)};function Yt(y,i){const c=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,p=i.match(/attribute ([\w]+) ([\w]+)/g),g=y.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),x=i.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),E=x?x.concat(g):g,T={};return{fragmentSource:y=y.replace(c,(k,R,L,z,Z)=>(T[Z]=!0,R==="define"?`
#ifndef HAS_UNIFORM_u_${Z}
varying ${L} ${z} ${Z};
#else
uniform ${L} ${z} u_${Z};
#endif
`:`
#ifdef HAS_UNIFORM_u_${Z}
    ${L} ${z} ${Z} = u_${Z};
#endif
`)),vertexSource:i=i.replace(c,(k,R,L,z,Z)=>{const re=z==="float"?"vec2":"vec4",ne=Z.match(/color/)?"color":re;return T[Z]?R==="define"?`
#ifndef HAS_UNIFORM_u_${Z}
uniform lowp float u_${Z}_t;
attribute ${L} ${re} a_${Z};
varying ${L} ${z} ${Z};
#else
uniform ${L} ${z} u_${Z};
#endif
`:ne==="vec4"?`
#ifndef HAS_UNIFORM_u_${Z}
    ${Z} = a_${Z};
#else
    ${L} ${z} ${Z} = u_${Z};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Z}
    ${Z} = unpack_mix_${ne}(a_${Z}, u_${Z}_t);
#else
    ${L} ${z} ${Z} = u_${Z};
#endif
`:R==="define"?`
#ifndef HAS_UNIFORM_u_${Z}
uniform lowp float u_${Z}_t;
attribute ${L} ${re} a_${Z};
#else
uniform ${L} ${z} u_${Z};
#endif
`:ne==="vec4"?`
#ifndef HAS_UNIFORM_u_${Z}
    ${L} ${z} ${Z} = a_${Z};
#else
    ${L} ${z} ${Z} = u_${Z};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Z}
    ${L} ${z} ${Z} = unpack_mix_${ne}(a_${Z}, u_${Z}_t);
#else
    ${L} ${z} ${Z} = u_${Z};
#endif
`}),staticAttributes:p,staticUniforms:E}}class Da{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(i,c,p,g,x,E,T,k,R){this.context=i;let L=this.boundPaintVertexBuffers.length!==g.length;for(let z=0;!L&&z<g.length;z++)this.boundPaintVertexBuffers[z]!==g[z]&&(L=!0);!this.vao||this.boundProgram!==c||this.boundLayoutVertexBuffer!==p||L||this.boundIndexBuffer!==x||this.boundVertexOffset!==E||this.boundDynamicVertexBuffer!==T||this.boundDynamicVertexBuffer2!==k||this.boundDynamicVertexBuffer3!==R?this.freshBind(c,p,g,x,E,T,k,R):(i.bindVertexArray.set(this.vao),T&&T.bind(),x&&x.dynamicDraw&&x.bind(),k&&k.bind(),R&&R.bind())}freshBind(i,c,p,g,x,E,T,k){const R=i.numAttributes,L=this.context,z=L.gl;this.vao&&this.destroy(),this.vao=L.createVertexArray(),L.bindVertexArray.set(this.vao),this.boundProgram=i,this.boundLayoutVertexBuffer=c,this.boundPaintVertexBuffers=p,this.boundIndexBuffer=g,this.boundVertexOffset=x,this.boundDynamicVertexBuffer=E,this.boundDynamicVertexBuffer2=T,this.boundDynamicVertexBuffer3=k,c.enableAttributes(z,i);for(const Z of p)Z.enableAttributes(z,i);E&&E.enableAttributes(z,i),T&&T.enableAttributes(z,i),k&&k.enableAttributes(z,i),c.bind(),c.setVertexAttribPointers(z,i,x);for(const Z of p)Z.bind(),Z.setVertexAttribPointers(z,i,x);E&&(E.bind(),E.setVertexAttribPointers(z,i,x)),g&&g.bind(),T&&(T.bind(),T.setVertexAttribPointers(z,i,x)),k&&(k.bind(),k.setVertexAttribPointers(z,i,x)),L.currentNumAttributes=R}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function kn(y){const i=[];for(let c=0;c<y.length;c++){if(y[c]===null)continue;const p=y[c].split(" ");i.push(p.pop())}return i}class Mu{constructor(i,c,p,g,x,E){const T=i.gl;this.program=T.createProgram();const k=kn(c.staticAttributes),R=p?p.getBinderAttributes():[],L=k.concat(R),z=Sn.prelude.staticUniforms?kn(Sn.prelude.staticUniforms):[],Z=c.staticUniforms?kn(c.staticUniforms):[],re=p?p.getBinderUniforms():[],ne=z.concat(Z).concat(re),se=[];for(const ke of ne)se.indexOf(ke)<0&&se.push(ke);const ee=p?p.defines():[];x&&ee.push("#define OVERDRAW_INSPECTOR;"),E&&ee.push("#define TERRAIN3D;");const ye=ee.concat(Sn.prelude.fragmentSource,c.fragmentSource).join(`
`),Te=ee.concat(Sn.prelude.vertexSource,c.vertexSource).join(`
`),ce=T.createShader(T.FRAGMENT_SHADER);if(T.isContextLost())return void(this.failedToCreate=!0);if(T.shaderSource(ce,ye),T.compileShader(ce),!T.getShaderParameter(ce,T.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${T.getShaderInfoLog(ce)}`);T.attachShader(this.program,ce);const xe=T.createShader(T.VERTEX_SHADER);if(T.isContextLost())return void(this.failedToCreate=!0);if(T.shaderSource(xe,Te),T.compileShader(xe),!T.getShaderParameter(xe,T.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${T.getShaderInfoLog(xe)}`);T.attachShader(this.program,xe),this.attributes={};const Ae={};this.numAttributes=L.length;for(let ke=0;ke<this.numAttributes;ke++)L[ke]&&(T.bindAttribLocation(this.program,ke,L[ke]),this.attributes[L[ke]]=ke);if(T.linkProgram(this.program),!T.getProgramParameter(this.program,T.LINK_STATUS))throw new Error(`Program failed to link: ${T.getProgramInfoLog(this.program)}`);T.deleteShader(xe),T.deleteShader(ce);for(let ke=0;ke<se.length;ke++){const ze=se[ke];if(ze&&!Ae[ze]){const Ge=T.getUniformLocation(this.program,ze);Ge&&(Ae[ze]=Ge)}}this.fixedUniforms=g(i,Ae),this.terrainUniforms=((ke,ze)=>({u_depth:new o.aL(ke,ze.u_depth),u_terrain:new o.aL(ke,ze.u_terrain),u_terrain_dim:new o.aM(ke,ze.u_terrain_dim),u_terrain_matrix:new o.aN(ke,ze.u_terrain_matrix),u_terrain_unpack:new o.aO(ke,ze.u_terrain_unpack),u_terrain_exaggeration:new o.aM(ke,ze.u_terrain_exaggeration)}))(i,Ae),this.binderUniforms=p?p.getUniforms(i,Ae):[]}draw(i,c,p,g,x,E,T,k,R,L,z,Z,re,ne,se,ee,ye,Te){const ce=i.gl;if(this.failedToCreate)return;if(i.program.set(this.program),i.setDepthMode(p),i.setStencilMode(g),i.setColorMode(x),i.setCullFace(E),k){i.activeTexture.set(ce.TEXTURE2),ce.bindTexture(ce.TEXTURE_2D,k.depthTexture),i.activeTexture.set(ce.TEXTURE3),ce.bindTexture(ce.TEXTURE_2D,k.texture);for(const Ae in this.terrainUniforms)this.terrainUniforms[Ae].set(k[Ae])}for(const Ae in this.fixedUniforms)this.fixedUniforms[Ae].set(T[Ae]);se&&se.setUniforms(i,this.binderUniforms,re,{zoom:ne});let xe=0;switch(c){case ce.LINES:xe=2;break;case ce.TRIANGLES:xe=3;break;case ce.LINE_STRIP:xe=1}for(const Ae of Z.get()){const ke=Ae.vaos||(Ae.vaos={});(ke[R]||(ke[R]=new Da)).bind(i,this,L,se?se.getPaintVertexBuffers():[],z,Ae.vertexOffset,ee,ye,Te),ce.drawElements(c,Ae.primitiveLength*xe,ce.UNSIGNED_SHORT,Ae.primitiveOffset*xe*2)}}}function Li(y,i,c){const p=1/me(c,1,i.transform.tileZoom),g=Math.pow(2,c.tileID.overscaledZ),x=c.tileSize*Math.pow(2,i.transform.tileZoom)/g,E=x*(c.tileID.canonical.x+c.tileID.wrap*g),T=x*c.tileID.canonical.y;return{u_image:0,u_texsize:c.imageAtlasTexture.size,u_scale:[p,y.fromScale,y.toScale],u_fade:y.t,u_pixel_coord_upper:[E>>16,T>>16],u_pixel_coord_lower:[65535&E,65535&T]}}const xh=(y,i,c,p)=>{const g=i.style.light,x=g.properties.get("position"),E=[x.x,x.y,x.z],T=function(){var R=new o.A(9);return o.A!=Float32Array&&(R[1]=0,R[2]=0,R[3]=0,R[5]=0,R[6]=0,R[7]=0),R[0]=1,R[4]=1,R[8]=1,R}();g.properties.get("anchor")==="viewport"&&function(R,L){var z=Math.sin(L),Z=Math.cos(L);R[0]=Z,R[1]=z,R[2]=0,R[3]=-z,R[4]=Z,R[5]=0,R[6]=0,R[7]=0,R[8]=1}(T,-i.transform.angle),function(R,L,z){var Z=L[0],re=L[1],ne=L[2];R[0]=Z*z[0]+re*z[3]+ne*z[6],R[1]=Z*z[1]+re*z[4]+ne*z[7],R[2]=Z*z[2]+re*z[5]+ne*z[8]}(E,E,T);const k=g.properties.get("color");return{u_matrix:y,u_lightpos:E,u_lightintensity:g.properties.get("intensity"),u_lightcolor:[k.r,k.g,k.b],u_vertical_gradient:+c,u_opacity:p}},ca=(y,i,c,p,g,x,E)=>o.e(xh(y,i,c,p),Li(x,i,E),{u_height_factor:-Math.pow(2,g.overscaledZ)/E.tileSize/8}),rp=y=>({u_matrix:y}),_h=(y,i,c,p)=>o.e(rp(y),Li(c,i,p)),Ru=(y,i)=>({u_matrix:y,u_world:i}),Du=(y,i,c,p,g)=>o.e(_h(y,i,c,p),{u_world:g}),ha=(y,i,c,p)=>{const g=y.transform;let x,E;if(p.paint.get("circle-pitch-alignment")==="map"){const T=me(c,1,g.zoom);x=!0,E=[T,T]}else x=!1,E=g.pixelsToGLUnits;return{u_camera_to_center_distance:g.cameraToCenterDistance,u_scale_with_map:+(p.paint.get("circle-pitch-scale")==="map"),u_matrix:y.translatePosMatrix(i.posMatrix,c,p.paint.get("circle-translate"),p.paint.get("circle-translate-anchor")),u_pitch_with_map:+x,u_device_pixel_ratio:y.pixelRatio,u_extrude_scale:E}},wh=(y,i,c)=>{const p=me(c,1,i.zoom),g=Math.pow(2,i.zoom-c.tileID.overscaledZ),x=c.tileID.overscaleFactor();return{u_matrix:y,u_camera_to_center_distance:i.cameraToCenterDistance,u_pixels_to_tile_units:p,u_extrude_scale:[i.pixelsToGLUnits[0]/(p*g),i.pixelsToGLUnits[1]/(p*g)],u_overscale_factor:x}},Ml=(y,i,c=1)=>({u_matrix:y,u_color:i,u_overlay:0,u_overlay_scale:c}),ip=y=>({u_matrix:y}),gv=(y,i,c,p)=>({u_matrix:y,u_extrude_scale:me(i,1,c),u_intensity:p});function bh(y,i){const c=Math.pow(2,i.canonical.z),p=i.canonical.y;return[new o.U(0,p/c).toLngLat().lat,new o.U(0,(p+1)/c).toLngLat().lat]}const Sh=(y,i,c,p)=>{const g=y.transform;return{u_matrix:Lu(y,i,c,p),u_ratio:1/me(i,1,g.zoom),u_device_pixel_ratio:y.pixelRatio,u_units_to_pixels:[1/g.pixelsToGLUnits[0],1/g.pixelsToGLUnits[1]]}},sp=(y,i,c,p,g)=>o.e(Sh(y,i,c,g),{u_image:0,u_image_height:p}),yv=(y,i,c,p,g)=>{const x=y.transform,E=op(i,x);return{u_matrix:Lu(y,i,c,g),u_texsize:i.imageAtlasTexture.size,u_ratio:1/me(i,1,x.zoom),u_device_pixel_ratio:y.pixelRatio,u_image:0,u_scale:[E,p.fromScale,p.toScale],u_fade:p.t,u_units_to_pixels:[1/x.pixelsToGLUnits[0],1/x.pixelsToGLUnits[1]]}},ap=(y,i,c,p,g,x)=>{const E=y.lineAtlas,T=op(i,y.transform),k=c.layout.get("line-cap")==="round",R=E.getDash(p.from,k),L=E.getDash(p.to,k),z=R.width*g.fromScale,Z=L.width*g.toScale;return o.e(Sh(y,i,c,x),{u_patternscale_a:[T/z,-R.height/2],u_patternscale_b:[T/Z,-L.height/2],u_sdfgamma:E.width/(256*Math.min(z,Z)*y.pixelRatio)/2,u_image:0,u_tex_y_a:R.y,u_tex_y_b:L.y,u_mix:g.t})};function op(y,i){return 1/me(y,1,i.tileZoom)}function Lu(y,i,c,p){return y.translatePosMatrix(p?p.posMatrix:i.tileID.posMatrix,i,c.paint.get("line-translate"),c.paint.get("line-translate-anchor"))}const lp=(y,i,c,p,g)=>{return{u_matrix:y,u_tl_parent:i,u_scale_parent:c,u_buffer_scale:1,u_fade_t:p.mix,u_opacity:p.opacity*g.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:g.paint.get("raster-brightness-min"),u_brightness_high:g.paint.get("raster-brightness-max"),u_saturation_factor:(E=g.paint.get("raster-saturation"),E>0?1-1/(1.001-E):-E),u_contrast_factor:(x=g.paint.get("raster-contrast"),x>0?1/(1-x):1+x),u_spin_weights:up(g.paint.get("raster-hue-rotate"))};var x,E};function up(y){y*=Math.PI/180;const i=Math.sin(y),c=Math.cos(y);return[(2*c+1)/3,(-Math.sqrt(3)*i-c+1)/3,(Math.sqrt(3)*i-c+1)/3]}const Eh=(y,i,c,p,g,x,E,T,k,R)=>{const L=g.transform;return{u_is_size_zoom_constant:+(y==="constant"||y==="source"),u_is_size_feature_constant:+(y==="constant"||y==="camera"),u_size_t:i?i.uSizeT:0,u_size:i?i.uSize:0,u_camera_to_center_distance:L.cameraToCenterDistance,u_pitch:L.pitch/360*2*Math.PI,u_rotate_symbol:+c,u_aspect_ratio:L.width/L.height,u_fade_change:g.options.fadeDuration?g.symbolFadeChange:1,u_matrix:x,u_label_plane_matrix:E,u_coord_matrix:T,u_is_text:+k,u_pitch_with_map:+p,u_texsize:R,u_texture:0}},Th=(y,i,c,p,g,x,E,T,k,R,L)=>{const z=g.transform;return o.e(Eh(y,i,c,p,g,x,E,T,k,R),{u_gamma_scale:p?Math.cos(z._pitch)*z.cameraToCenterDistance:1,u_device_pixel_ratio:g.pixelRatio,u_is_halo:+L})},La=(y,i,c,p,g,x,E,T,k,R)=>o.e(Th(y,i,c,p,g,x,E,T,!0,k,!0),{u_texsize_icon:R,u_texture_icon:1}),zu=(y,i,c)=>({u_matrix:y,u_opacity:i,u_color:c}),zi=(y,i,c,p,g,x)=>o.e(function(E,T,k,R){const L=k.imageManager.getPattern(E.from.toString()),z=k.imageManager.getPattern(E.to.toString()),{width:Z,height:re}=k.imageManager.getPixelSize(),ne=Math.pow(2,R.tileID.overscaledZ),se=R.tileSize*Math.pow(2,k.transform.tileZoom)/ne,ee=se*(R.tileID.canonical.x+R.tileID.wrap*ne),ye=se*R.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:L.tl,u_pattern_br_a:L.br,u_pattern_tl_b:z.tl,u_pattern_br_b:z.br,u_texsize:[Z,re],u_mix:T.t,u_pattern_size_a:L.displaySize,u_pattern_size_b:z.displaySize,u_scale_a:T.fromScale,u_scale_b:T.toScale,u_tile_units_to_pixels:1/me(R,1,k.transform.tileZoom),u_pixel_coord_upper:[ee>>16,ye>>16],u_pixel_coord_lower:[65535&ee,65535&ye]}}(p,x,c,g),{u_matrix:y,u_opacity:i}),Ou={fillExtrusion:(y,i)=>({u_matrix:new o.aN(y,i.u_matrix),u_lightpos:new o.aP(y,i.u_lightpos),u_lightintensity:new o.aM(y,i.u_lightintensity),u_lightcolor:new o.aP(y,i.u_lightcolor),u_vertical_gradient:new o.aM(y,i.u_vertical_gradient),u_opacity:new o.aM(y,i.u_opacity)}),fillExtrusionPattern:(y,i)=>({u_matrix:new o.aN(y,i.u_matrix),u_lightpos:new o.aP(y,i.u_lightpos),u_lightintensity:new o.aM(y,i.u_lightintensity),u_lightcolor:new o.aP(y,i.u_lightcolor),u_vertical_gradient:new o.aM(y,i.u_vertical_gradient),u_height_factor:new o.aM(y,i.u_height_factor),u_image:new o.aL(y,i.u_image),u_texsize:new o.aQ(y,i.u_texsize),u_pixel_coord_upper:new o.aQ(y,i.u_pixel_coord_upper),u_pixel_coord_lower:new o.aQ(y,i.u_pixel_coord_lower),u_scale:new o.aP(y,i.u_scale),u_fade:new o.aM(y,i.u_fade),u_opacity:new o.aM(y,i.u_opacity)}),fill:(y,i)=>({u_matrix:new o.aN(y,i.u_matrix)}),fillPattern:(y,i)=>({u_matrix:new o.aN(y,i.u_matrix),u_image:new o.aL(y,i.u_image),u_texsize:new o.aQ(y,i.u_texsize),u_pixel_coord_upper:new o.aQ(y,i.u_pixel_coord_upper),u_pixel_coord_lower:new o.aQ(y,i.u_pixel_coord_lower),u_scale:new o.aP(y,i.u_scale),u_fade:new o.aM(y,i.u_fade)}),fillOutline:(y,i)=>({u_matrix:new o.aN(y,i.u_matrix),u_world:new o.aQ(y,i.u_world)}),fillOutlinePattern:(y,i)=>({u_matrix:new o.aN(y,i.u_matrix),u_world:new o.aQ(y,i.u_world),u_image:new o.aL(y,i.u_image),u_texsize:new o.aQ(y,i.u_texsize),u_pixel_coord_upper:new o.aQ(y,i.u_pixel_coord_upper),u_pixel_coord_lower:new o.aQ(y,i.u_pixel_coord_lower),u_scale:new o.aP(y,i.u_scale),u_fade:new o.aM(y,i.u_fade)}),circle:(y,i)=>({u_camera_to_center_distance:new o.aM(y,i.u_camera_to_center_distance),u_scale_with_map:new o.aL(y,i.u_scale_with_map),u_pitch_with_map:new o.aL(y,i.u_pitch_with_map),u_extrude_scale:new o.aQ(y,i.u_extrude_scale),u_device_pixel_ratio:new o.aM(y,i.u_device_pixel_ratio),u_matrix:new o.aN(y,i.u_matrix)}),collisionBox:(y,i)=>({u_matrix:new o.aN(y,i.u_matrix),u_camera_to_center_distance:new o.aM(y,i.u_camera_to_center_distance),u_pixels_to_tile_units:new o.aM(y,i.u_pixels_to_tile_units),u_extrude_scale:new o.aQ(y,i.u_extrude_scale),u_overscale_factor:new o.aM(y,i.u_overscale_factor)}),collisionCircle:(y,i)=>({u_matrix:new o.aN(y,i.u_matrix),u_inv_matrix:new o.aN(y,i.u_inv_matrix),u_camera_to_center_distance:new o.aM(y,i.u_camera_to_center_distance),u_viewport_size:new o.aQ(y,i.u_viewport_size)}),debug:(y,i)=>({u_color:new o.aR(y,i.u_color),u_matrix:new o.aN(y,i.u_matrix),u_overlay:new o.aL(y,i.u_overlay),u_overlay_scale:new o.aM(y,i.u_overlay_scale)}),clippingMask:(y,i)=>({u_matrix:new o.aN(y,i.u_matrix)}),heatmap:(y,i)=>({u_extrude_scale:new o.aM(y,i.u_extrude_scale),u_intensity:new o.aM(y,i.u_intensity),u_matrix:new o.aN(y,i.u_matrix)}),heatmapTexture:(y,i)=>({u_matrix:new o.aN(y,i.u_matrix),u_world:new o.aQ(y,i.u_world),u_image:new o.aL(y,i.u_image),u_color_ramp:new o.aL(y,i.u_color_ramp),u_opacity:new o.aM(y,i.u_opacity)}),hillshade:(y,i)=>({u_matrix:new o.aN(y,i.u_matrix),u_image:new o.aL(y,i.u_image),u_latrange:new o.aQ(y,i.u_latrange),u_light:new o.aQ(y,i.u_light),u_shadow:new o.aR(y,i.u_shadow),u_highlight:new o.aR(y,i.u_highlight),u_accent:new o.aR(y,i.u_accent)}),hillshadePrepare:(y,i)=>({u_matrix:new o.aN(y,i.u_matrix),u_image:new o.aL(y,i.u_image),u_dimension:new o.aQ(y,i.u_dimension),u_zoom:new o.aM(y,i.u_zoom),u_unpack:new o.aO(y,i.u_unpack)}),line:(y,i)=>({u_matrix:new o.aN(y,i.u_matrix),u_ratio:new o.aM(y,i.u_ratio),u_device_pixel_ratio:new o.aM(y,i.u_device_pixel_ratio),u_units_to_pixels:new o.aQ(y,i.u_units_to_pixels)}),lineGradient:(y,i)=>({u_matrix:new o.aN(y,i.u_matrix),u_ratio:new o.aM(y,i.u_ratio),u_device_pixel_ratio:new o.aM(y,i.u_device_pixel_ratio),u_units_to_pixels:new o.aQ(y,i.u_units_to_pixels),u_image:new o.aL(y,i.u_image),u_image_height:new o.aM(y,i.u_image_height)}),linePattern:(y,i)=>({u_matrix:new o.aN(y,i.u_matrix),u_texsize:new o.aQ(y,i.u_texsize),u_ratio:new o.aM(y,i.u_ratio),u_device_pixel_ratio:new o.aM(y,i.u_device_pixel_ratio),u_image:new o.aL(y,i.u_image),u_units_to_pixels:new o.aQ(y,i.u_units_to_pixels),u_scale:new o.aP(y,i.u_scale),u_fade:new o.aM(y,i.u_fade)}),lineSDF:(y,i)=>({u_matrix:new o.aN(y,i.u_matrix),u_ratio:new o.aM(y,i.u_ratio),u_device_pixel_ratio:new o.aM(y,i.u_device_pixel_ratio),u_units_to_pixels:new o.aQ(y,i.u_units_to_pixels),u_patternscale_a:new o.aQ(y,i.u_patternscale_a),u_patternscale_b:new o.aQ(y,i.u_patternscale_b),u_sdfgamma:new o.aM(y,i.u_sdfgamma),u_image:new o.aL(y,i.u_image),u_tex_y_a:new o.aM(y,i.u_tex_y_a),u_tex_y_b:new o.aM(y,i.u_tex_y_b),u_mix:new o.aM(y,i.u_mix)}),raster:(y,i)=>({u_matrix:new o.aN(y,i.u_matrix),u_tl_parent:new o.aQ(y,i.u_tl_parent),u_scale_parent:new o.aM(y,i.u_scale_parent),u_buffer_scale:new o.aM(y,i.u_buffer_scale),u_fade_t:new o.aM(y,i.u_fade_t),u_opacity:new o.aM(y,i.u_opacity),u_image0:new o.aL(y,i.u_image0),u_image1:new o.aL(y,i.u_image1),u_brightness_low:new o.aM(y,i.u_brightness_low),u_brightness_high:new o.aM(y,i.u_brightness_high),u_saturation_factor:new o.aM(y,i.u_saturation_factor),u_contrast_factor:new o.aM(y,i.u_contrast_factor),u_spin_weights:new o.aP(y,i.u_spin_weights)}),symbolIcon:(y,i)=>({u_is_size_zoom_constant:new o.aL(y,i.u_is_size_zoom_constant),u_is_size_feature_constant:new o.aL(y,i.u_is_size_feature_constant),u_size_t:new o.aM(y,i.u_size_t),u_size:new o.aM(y,i.u_size),u_camera_to_center_distance:new o.aM(y,i.u_camera_to_center_distance),u_pitch:new o.aM(y,i.u_pitch),u_rotate_symbol:new o.aL(y,i.u_rotate_symbol),u_aspect_ratio:new o.aM(y,i.u_aspect_ratio),u_fade_change:new o.aM(y,i.u_fade_change),u_matrix:new o.aN(y,i.u_matrix),u_label_plane_matrix:new o.aN(y,i.u_label_plane_matrix),u_coord_matrix:new o.aN(y,i.u_coord_matrix),u_is_text:new o.aL(y,i.u_is_text),u_pitch_with_map:new o.aL(y,i.u_pitch_with_map),u_texsize:new o.aQ(y,i.u_texsize),u_texture:new o.aL(y,i.u_texture)}),symbolSDF:(y,i)=>({u_is_size_zoom_constant:new o.aL(y,i.u_is_size_zoom_constant),u_is_size_feature_constant:new o.aL(y,i.u_is_size_feature_constant),u_size_t:new o.aM(y,i.u_size_t),u_size:new o.aM(y,i.u_size),u_camera_to_center_distance:new o.aM(y,i.u_camera_to_center_distance),u_pitch:new o.aM(y,i.u_pitch),u_rotate_symbol:new o.aL(y,i.u_rotate_symbol),u_aspect_ratio:new o.aM(y,i.u_aspect_ratio),u_fade_change:new o.aM(y,i.u_fade_change),u_matrix:new o.aN(y,i.u_matrix),u_label_plane_matrix:new o.aN(y,i.u_label_plane_matrix),u_coord_matrix:new o.aN(y,i.u_coord_matrix),u_is_text:new o.aL(y,i.u_is_text),u_pitch_with_map:new o.aL(y,i.u_pitch_with_map),u_texsize:new o.aQ(y,i.u_texsize),u_texture:new o.aL(y,i.u_texture),u_gamma_scale:new o.aM(y,i.u_gamma_scale),u_device_pixel_ratio:new o.aM(y,i.u_device_pixel_ratio),u_is_halo:new o.aL(y,i.u_is_halo)}),symbolTextAndIcon:(y,i)=>({u_is_size_zoom_constant:new o.aL(y,i.u_is_size_zoom_constant),u_is_size_feature_constant:new o.aL(y,i.u_is_size_feature_constant),u_size_t:new o.aM(y,i.u_size_t),u_size:new o.aM(y,i.u_size),u_camera_to_center_distance:new o.aM(y,i.u_camera_to_center_distance),u_pitch:new o.aM(y,i.u_pitch),u_rotate_symbol:new o.aL(y,i.u_rotate_symbol),u_aspect_ratio:new o.aM(y,i.u_aspect_ratio),u_fade_change:new o.aM(y,i.u_fade_change),u_matrix:new o.aN(y,i.u_matrix),u_label_plane_matrix:new o.aN(y,i.u_label_plane_matrix),u_coord_matrix:new o.aN(y,i.u_coord_matrix),u_is_text:new o.aL(y,i.u_is_text),u_pitch_with_map:new o.aL(y,i.u_pitch_with_map),u_texsize:new o.aQ(y,i.u_texsize),u_texsize_icon:new o.aQ(y,i.u_texsize_icon),u_texture:new o.aL(y,i.u_texture),u_texture_icon:new o.aL(y,i.u_texture_icon),u_gamma_scale:new o.aM(y,i.u_gamma_scale),u_device_pixel_ratio:new o.aM(y,i.u_device_pixel_ratio),u_is_halo:new o.aL(y,i.u_is_halo)}),background:(y,i)=>({u_matrix:new o.aN(y,i.u_matrix),u_opacity:new o.aM(y,i.u_opacity),u_color:new o.aR(y,i.u_color)}),backgroundPattern:(y,i)=>({u_matrix:new o.aN(y,i.u_matrix),u_opacity:new o.aM(y,i.u_opacity),u_image:new o.aL(y,i.u_image),u_pattern_tl_a:new o.aQ(y,i.u_pattern_tl_a),u_pattern_br_a:new o.aQ(y,i.u_pattern_br_a),u_pattern_tl_b:new o.aQ(y,i.u_pattern_tl_b),u_pattern_br_b:new o.aQ(y,i.u_pattern_br_b),u_texsize:new o.aQ(y,i.u_texsize),u_mix:new o.aM(y,i.u_mix),u_pattern_size_a:new o.aQ(y,i.u_pattern_size_a),u_pattern_size_b:new o.aQ(y,i.u_pattern_size_b),u_scale_a:new o.aM(y,i.u_scale_a),u_scale_b:new o.aM(y,i.u_scale_b),u_pixel_coord_upper:new o.aQ(y,i.u_pixel_coord_upper),u_pixel_coord_lower:new o.aQ(y,i.u_pixel_coord_lower),u_tile_units_to_pixels:new o.aM(y,i.u_tile_units_to_pixels)}),terrain:(y,i)=>({u_matrix:new o.aN(y,i.u_matrix),u_texture:new o.aL(y,i.u_texture),u_ele_delta:new o.aM(y,i.u_ele_delta)}),terrainDepth:(y,i)=>({u_matrix:new o.aN(y,i.u_matrix),u_ele_delta:new o.aM(y,i.u_ele_delta)}),terrainCoords:(y,i)=>({u_matrix:new o.aN(y,i.u_matrix),u_texture:new o.aL(y,i.u_texture),u_terrain_coords_id:new o.aM(y,i.u_terrain_coords_id),u_ele_delta:new o.aM(y,i.u_ele_delta)})};class Fu{constructor(i,c,p){this.context=i;const g=i.gl;this.buffer=g.createBuffer(),this.dynamicDraw=!!p,this.context.unbindVAO(),i.bindElementBuffer.set(this.buffer),g.bufferData(g.ELEMENT_ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?g.DYNAMIC_DRAW:g.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(i){const c=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),c.bufferSubData(c.ELEMENT_ARRAY_BUFFER,0,i.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Rl={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Nu{constructor(i,c,p,g){this.length=c.length,this.attributes=p,this.itemSize=c.bytesPerElement,this.dynamicDraw=g,this.context=i;const x=i.gl;this.buffer=x.createBuffer(),i.bindVertexBuffer.set(this.buffer),x.bufferData(x.ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?x.DYNAMIC_DRAW:x.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(i){if(i.length!==this.length)throw new Error(`Length of new data is ${i.length}, which doesn't match current length of ${this.length}`);const c=this.context.gl;this.bind(),c.bufferSubData(c.ARRAY_BUFFER,0,i.arrayBuffer)}enableAttributes(i,c){for(let p=0;p<this.attributes.length;p++){const g=c.attributes[this.attributes[p].name];g!==void 0&&i.enableVertexAttribArray(g)}}setVertexAttribPointers(i,c,p){for(let g=0;g<this.attributes.length;g++){const x=this.attributes[g],E=c.attributes[x.name];E!==void 0&&i.vertexAttribPointer(E,x.components,i[Rl[x.type]],!1,this.itemSize,x.offset+this.itemSize*(p||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Co=new WeakMap;function da(y){var i;if(Co.has(y))return Co.get(y);{const c=(i=y.getParameter(y.VERSION))===null||i===void 0?void 0:i.startsWith("WebGL 2.0");return Co.set(y,c),c}}class Zt{constructor(i){this.gl=i.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(i){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Bu extends Zt{getDefault(){return o.aT.transparent}set(i){const c=this.current;(i.r!==c.r||i.g!==c.g||i.b!==c.b||i.a!==c.a||this.dirty)&&(this.gl.clearColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class pi extends Zt{getDefault(){return 1}set(i){(i!==this.current||this.dirty)&&(this.gl.clearDepth(i),this.current=i,this.dirty=!1)}}class mi extends Zt{getDefault(){return 0}set(i){(i!==this.current||this.dirty)&&(this.gl.clearStencil(i),this.current=i,this.dirty=!1)}}class Ch extends Zt{getDefault(){return[!0,!0,!0,!0]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||i[2]!==c[2]||i[3]!==c[3]||this.dirty)&&(this.gl.colorMask(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class Vu extends Zt{getDefault(){return!0}set(i){(i!==this.current||this.dirty)&&(this.gl.depthMask(i),this.current=i,this.dirty=!1)}}class ju extends Zt{getDefault(){return 255}set(i){(i!==this.current||this.dirty)&&(this.gl.stencilMask(i),this.current=i,this.dirty=!1)}}class Ph extends Zt{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(i){const c=this.current;(i.func!==c.func||i.ref!==c.ref||i.mask!==c.mask||this.dirty)&&(this.gl.stencilFunc(i.func,i.ref,i.mask),this.current=i,this.dirty=!1)}}class Ah extends Zt{getDefault(){const i=this.gl;return[i.KEEP,i.KEEP,i.KEEP]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||i[2]!==c[2]||this.dirty)&&(this.gl.stencilOp(i[0],i[1],i[2]),this.current=i,this.dirty=!1)}}class $u extends Zt{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.STENCIL_TEST):c.disable(c.STENCIL_TEST),this.current=i,this.dirty=!1}}class kh extends Zt{getDefault(){return[0,1]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||this.dirty)&&(this.gl.depthRange(i[0],i[1]),this.current=i,this.dirty=!1)}}class Ih extends Zt{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST),this.current=i,this.dirty=!1}}class Uu extends Zt{getDefault(){return this.gl.LESS}set(i){(i!==this.current||this.dirty)&&(this.gl.depthFunc(i),this.current=i,this.dirty=!1)}}class cp extends Zt{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.BLEND):c.disable(c.BLEND),this.current=i,this.dirty=!1}}class hp extends Zt{getDefault(){const i=this.gl;return[i.ONE,i.ZERO]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||this.dirty)&&(this.gl.blendFunc(i[0],i[1]),this.current=i,this.dirty=!1)}}class Po extends Zt{getDefault(){return o.aT.transparent}set(i){const c=this.current;(i.r!==c.r||i.g!==c.g||i.b!==c.b||i.a!==c.a||this.dirty)&&(this.gl.blendColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class vv extends Zt{getDefault(){return this.gl.FUNC_ADD}set(i){(i!==this.current||this.dirty)&&(this.gl.blendEquation(i),this.current=i,this.dirty=!1)}}class xv extends Zt{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE),this.current=i,this.dirty=!1}}class _v extends Zt{getDefault(){return this.gl.BACK}set(i){(i!==this.current||this.dirty)&&(this.gl.cullFace(i),this.current=i,this.dirty=!1)}}class wv extends Zt{getDefault(){return this.gl.CCW}set(i){(i!==this.current||this.dirty)&&(this.gl.frontFace(i),this.current=i,this.dirty=!1)}}class bv extends Zt{getDefault(){return null}set(i){(i!==this.current||this.dirty)&&(this.gl.useProgram(i),this.current=i,this.dirty=!1)}}class Sv extends Zt{getDefault(){return this.gl.TEXTURE0}set(i){(i!==this.current||this.dirty)&&(this.gl.activeTexture(i),this.current=i,this.dirty=!1)}}class Mh extends Zt{getDefault(){const i=this.gl;return[0,0,i.drawingBufferWidth,i.drawingBufferHeight]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||i[2]!==c[2]||i[3]!==c[3]||this.dirty)&&(this.gl.viewport(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class qu extends Zt{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,i),this.current=i,this.dirty=!1}}class Rh extends Zt{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindRenderbuffer(c.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class Dh extends Zt{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindTexture(c.TEXTURE_2D,i),this.current=i,this.dirty=!1}}class Ao extends Zt{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindBuffer(c.ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class dp extends Zt{getDefault(){return null}set(i){const c=this.gl;c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class fp extends Zt{getDefault(){return null}set(i){var c;if(i===this.current&&!this.dirty)return;const p=this.gl;da(p)?p.bindVertexArray(i):(c=p.getExtension("OES_vertex_array_object"))===null||c===void 0||c.bindVertexArrayOES(i),this.current=i,this.dirty=!1}}class Lh extends Zt{getDefault(){return 4}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_ALIGNMENT,i),this.current=i,this.dirty=!1}}class za extends Zt{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i),this.current=i,this.dirty=!1}}class pp extends Zt{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,i),this.current=i,this.dirty=!1}}class fa extends Zt{constructor(i,c){super(i),this.context=i,this.parent=c}getDefault(){return null}}class ko extends fa{setDirty(){this.dirty=!0}set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,i,0),this.current=i,this.dirty=!1}}class mp extends fa{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class zh extends fa{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_STENCIL_ATTACHMENT,c.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class Jt{constructor(i,c,p,g,x){this.context=i,this.width=c,this.height=p;const E=i.gl,T=this.framebuffer=E.createFramebuffer();if(this.colorAttachment=new ko(i,T),g)this.depthAttachment=x?new zh(i,T):new mp(i,T);else if(x)throw new Error("Stencil cannot be setted without depth");if(E.checkFramebufferStatus(E.FRAMEBUFFER)!==E.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const i=this.context.gl,c=this.colorAttachment.get();if(c&&i.deleteTexture(c),this.depthAttachment){const p=this.depthAttachment.get();p&&i.deleteRenderbuffer(p)}i.deleteFramebuffer(this.framebuffer)}}class En{constructor(i,c,p){this.blendFunction=i,this.blendColor=c,this.mask=p}}En.Replace=[1,0],En.disabled=new En(En.Replace,o.aT.transparent,[!1,!1,!1,!1]),En.unblended=new En(En.Replace,o.aT.transparent,[!0,!0,!0,!0]),En.alphaBlended=new En([1,771],o.aT.transparent,[!0,!0,!0,!0]);class Ev{constructor(i){var c,p;if(this.gl=i,this.clearColor=new Bu(this),this.clearDepth=new pi(this),this.clearStencil=new mi(this),this.colorMask=new Ch(this),this.depthMask=new Vu(this),this.stencilMask=new ju(this),this.stencilFunc=new Ph(this),this.stencilOp=new Ah(this),this.stencilTest=new $u(this),this.depthRange=new kh(this),this.depthTest=new Ih(this),this.depthFunc=new Uu(this),this.blend=new cp(this),this.blendFunc=new hp(this),this.blendColor=new Po(this),this.blendEquation=new vv(this),this.cullFace=new xv(this),this.cullFaceSide=new _v(this),this.frontFace=new wv(this),this.program=new bv(this),this.activeTexture=new Sv(this),this.viewport=new Mh(this),this.bindFramebuffer=new qu(this),this.bindRenderbuffer=new Rh(this),this.bindTexture=new Dh(this),this.bindVertexBuffer=new Ao(this),this.bindElementBuffer=new dp(this),this.bindVertexArray=new fp(this),this.pixelStoreUnpack=new Lh(this),this.pixelStoreUnpackPremultiplyAlpha=new za(this),this.pixelStoreUnpackFlipY=new pp(this),this.extTextureFilterAnisotropic=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=i.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),da(i)){this.HALF_FLOAT=i.HALF_FLOAT;const g=i.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(c=i.RGBA16F)!==null&&c!==void 0?c:g==null?void 0:g.RGBA16F_EXT,this.RGB16F=(p=i.RGB16F)!==null&&p!==void 0?p:g==null?void 0:g.RGB16F_EXT,i.getExtension("EXT_color_buffer_float")}else{i.getExtension("EXT_color_buffer_half_float"),i.getExtension("OES_texture_half_float_linear");const g=i.getExtension("OES_texture_half_float");this.HALF_FLOAT=g==null?void 0:g.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(i,c){return new Fu(this,i,c)}createVertexBuffer(i,c,p){return new Nu(this,i,c,p)}createRenderbuffer(i,c,p){const g=this.gl,x=g.createRenderbuffer();return this.bindRenderbuffer.set(x),g.renderbufferStorage(g.RENDERBUFFER,i,c,p),this.bindRenderbuffer.set(null),x}createFramebuffer(i,c,p,g){return new Jt(this,i,c,p,g)}clear({color:i,depth:c,stencil:p}){const g=this.gl;let x=0;i&&(x|=g.COLOR_BUFFER_BIT,this.clearColor.set(i),this.colorMask.set([!0,!0,!0,!0])),c!==void 0&&(x|=g.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(c),this.depthMask.set(!0)),p!==void 0&&(x|=g.STENCIL_BUFFER_BIT,this.clearStencil.set(p),this.stencilMask.set(255)),g.clear(x)}setCullFace(i){i.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(i.mode),this.frontFace.set(i.frontFace))}setDepthMode(i){i.func!==this.gl.ALWAYS||i.mask?(this.depthTest.set(!0),this.depthFunc.set(i.func),this.depthMask.set(i.mask),this.depthRange.set(i.range)):this.depthTest.set(!1)}setStencilMode(i){i.test.func!==this.gl.ALWAYS||i.mask?(this.stencilTest.set(!0),this.stencilMask.set(i.mask),this.stencilOp.set([i.fail,i.depthFail,i.pass]),this.stencilFunc.set({func:i.test.func,ref:i.ref,mask:i.test.mask})):this.stencilTest.set(!1)}setColorMode(i){o.aG(i.blendFunction,En.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(i.blendFunction),this.blendColor.set(i.blendColor)),this.colorMask.set(i.mask)}createVertexArray(){var i;return da(this.gl)?this.gl.createVertexArray():(i=this.gl.getExtension("OES_vertex_array_object"))===null||i===void 0?void 0:i.createVertexArrayOES()}deleteVertexArray(i){var c;return da(this.gl)?this.gl.deleteVertexArray(i):(c=this.gl.getExtension("OES_vertex_array_object"))===null||c===void 0?void 0:c.deleteVertexArrayOES(i)}unbindVAO(){this.bindVertexArray.set(null)}}class Wt{constructor(i,c,p){this.func=i,this.mask=c,this.range=p}}Wt.ReadOnly=!1,Wt.ReadWrite=!0,Wt.disabled=new Wt(519,Wt.ReadOnly,[0,1]);const Oa=7680;class Tn{constructor(i,c,p,g,x,E){this.test=i,this.ref=c,this.mask=p,this.fail=g,this.depthFail=x,this.pass=E}}Tn.disabled=new Tn({func:519,mask:0},0,0,Oa,Oa,Oa);class wn{constructor(i,c,p){this.enable=i,this.mode=c,this.frontFace=p}}let Dl;function gp(y,i,c,p,g,x,E){const T=y.context,k=T.gl,R=y.useProgram("collisionBox"),L=[];let z=0,Z=0;for(let ce=0;ce<p.length;ce++){const xe=p[ce],Ae=i.getTile(xe),ke=Ae.getBucket(c);if(!ke)continue;let ze=xe.posMatrix;g[0]===0&&g[1]===0||(ze=y.translatePosMatrix(xe.posMatrix,Ae,g,x));const Ge=E?ke.textCollisionBox:ke.iconCollisionBox,Be=ke.collisionCircleArray;if(Be.length>0){const We=o.Z(),gt=ze;o.aU(We,ke.placementInvProjMatrix,y.transform.glCoordMatrix),o.aU(We,We,ke.placementViewportMatrix),L.push({circleArray:Be,circleOffset:Z,transform:gt,invTransform:We,coord:xe}),z+=Be.length/4,Z=z}Ge&&R.draw(T,k.LINES,Wt.disabled,Tn.disabled,y.colorModeForRenderPass(),wn.disabled,wh(ze,y.transform,Ae),y.style.map.terrain&&y.style.map.terrain.getTerrainData(xe),c.id,Ge.layoutVertexBuffer,Ge.indexBuffer,Ge.segments,null,y.transform.zoom,null,null,Ge.collisionVertexBuffer)}if(!E||!L.length)return;const re=y.useProgram("collisionCircle"),ne=new o.aV;ne.resize(4*z),ne._trim();let se=0;for(const ce of L)for(let xe=0;xe<ce.circleArray.length/4;xe++){const Ae=4*xe,ke=ce.circleArray[Ae+0],ze=ce.circleArray[Ae+1],Ge=ce.circleArray[Ae+2],Be=ce.circleArray[Ae+3];ne.emplace(se++,ke,ze,Ge,Be,0),ne.emplace(se++,ke,ze,Ge,Be,1),ne.emplace(se++,ke,ze,Ge,Be,2),ne.emplace(se++,ke,ze,Ge,Be,3)}(!Dl||Dl.length<2*z)&&(Dl=function(ce){const xe=2*ce,Ae=new o.aX;Ae.resize(xe),Ae._trim();for(let ke=0;ke<xe;ke++){const ze=6*ke;Ae.uint16[ze+0]=4*ke+0,Ae.uint16[ze+1]=4*ke+1,Ae.uint16[ze+2]=4*ke+2,Ae.uint16[ze+3]=4*ke+2,Ae.uint16[ze+4]=4*ke+3,Ae.uint16[ze+5]=4*ke+0}return Ae}(z));const ee=T.createIndexBuffer(Dl,!0),ye=T.createVertexBuffer(ne,o.aW.members,!0);for(const ce of L){const xe={u_matrix:ce.transform,u_inv_matrix:ce.invTransform,u_camera_to_center_distance:(Te=y.transform).cameraToCenterDistance,u_viewport_size:[Te.width,Te.height]};re.draw(T,k.TRIANGLES,Wt.disabled,Tn.disabled,y.colorModeForRenderPass(),wn.disabled,xe,y.style.map.terrain&&y.style.map.terrain.getTerrainData(ce.coord),c.id,ye,ee,o.S.simpleSegment(0,2*ce.circleOffset,ce.circleArray.length,ce.circleArray.length/2),null,y.transform.zoom,null,null,null)}var Te;ye.destroy(),ee.destroy()}wn.disabled=new wn(!1,1029,2305),wn.backCCW=new wn(!0,1029,2305);const Oh=o.ao(new Float32Array(16));function Gu(y,i,c,p,g,x){const{horizontalAlign:E,verticalAlign:T}=o.au(y);return new o.P((-(E-.5)*i/g+p[0])*x,(-(T-.5)*c/g+p[1])*x)}function Zu(y,i,c,p,g,x,E,T,k,R,L){const z=y.text.placedSymbolArray,Z=y.text.dynamicLayoutVertexArray,re=y.icon.dynamicLayoutVertexArray,ne={};Z.clear();for(let se=0;se<z.length;se++){const ee=z.get(se),ye=ee.hidden||!ee.crossTileID||y.allowVerticalPlacement&&!ee.placedOrientation?null:p[ee.crossTileID];if(ye){const Te=new o.P(ee.anchorX,ee.anchorY),ce=_n(Te,c?E:x,L),xe=hs(g.cameraToCenterDistance,ce.signedDistanceFromCamera);let Ae=o.aj(y.textSizeData,k,ee)*xe/o.ap;c&&(Ae*=y.tilePixelRatio/T);const{width:ke,height:ze,anchor:Ge,textOffset:Be,textBoxScale:We}=ye,gt=Gu(Ge,ke,ze,Be,We,Ae),Ut=c?_n(Te.add(gt),x,L).point:ce.point.add(i?gt.rotate(-g.angle):gt),nt=y.allowVerticalPlacement&&ee.placedOrientation===o.ai.vertical?Math.PI/2:0;for(let kt=0;kt<ee.numGlyphs;kt++)o.ak(Z,Ut,nt);R&&ee.associatedIconIndex>=0&&(ne[ee.associatedIconIndex]={shiftedAnchor:Ut,angle:nt})}else Y(ee.numGlyphs,Z)}if(R){re.clear();const se=y.icon.placedSymbolArray;for(let ee=0;ee<se.length;ee++){const ye=se.get(ee);if(ye.hidden)Y(ye.numGlyphs,re);else{const Te=ne[ee];if(Te)for(let ce=0;ce<ye.numGlyphs;ce++)o.ak(re,Te.shiftedAnchor,Te.angle);else Y(ye.numGlyphs,re)}}y.icon.dynamicLayoutVertexBuffer.updateData(re)}y.text.dynamicLayoutVertexBuffer.updateData(Z)}function Fh(y,i,c){return c.iconsInText&&i?"symbolTextAndIcon":y?"symbolSDF":"symbolIcon"}function Wu(y,i,c,p,g,x,E,T,k,R,L,z){const Z=y.context,re=Z.gl,ne=y.transform,se=T==="map",ee=k==="map",ye=T!=="viewport"&&c.layout.get("symbol-placement")!=="point",Te=se&&!ee&&!ye,ce=!c.layout.get("symbol-sort-key").isConstant();let xe=!1;const Ae=y.depthModeForSublayer(0,Wt.ReadOnly),ke=c._unevaluatedLayout.hasValue("text-variable-anchor")||c._unevaluatedLayout.hasValue("text-variable-anchor-offset"),ze=[];for(const Ge of p){const Be=i.getTile(Ge),We=Be.getBucket(c);if(!We)continue;const gt=g?We.text:We.icon;if(!gt||!gt.segments.get().length||!gt.hasVisibleVertices)continue;const Ut=gt.programConfigurations.get(c.id),nt=g||We.sdfIcons,kt=g?We.textSizeData:We.iconSizeData,vt=ee||ne.pitch!==0,an=y.useProgram(Fh(nt,g,We),Ut),jt=o.ah(kt,ne.zoom),Ft=y.style.map.terrain&&y.style.map.terrain.getTerrainData(Ge);let qt,On,cn,gr,er=[0,0],$n=null;if(g)On=Be.glyphAtlasTexture,cn=re.LINEAR,qt=Be.glyphAtlasTexture.size,We.iconsInText&&(er=Be.imageAtlasTexture.size,$n=Be.imageAtlasTexture,gr=vt||y.options.rotating||y.options.zooming||kt.kind==="composite"||kt.kind==="camera"?re.LINEAR:re.NEAREST);else{const Fn=c.layout.get("icon-size").constantOr(0)!==1||We.iconsNeedLinear;On=Be.imageAtlasTexture,cn=nt||y.options.rotating||y.options.zooming||Fn||vt?re.LINEAR:re.NEAREST,qt=Be.imageAtlasTexture.size}const vi=me(Be,1,y.transform.zoom),pn=He(Ge.posMatrix,ee,se,y.transform,vi),ps=di(Ge.posMatrix,ee,se,y.transform,vi),ms=ke&&We.hasTextData(),ga=c.layout.get("icon-text-fit")!=="none"&&ms&&We.hasIconData();if(ye){const Fn=y.style.map.terrain?(Qr,Nn)=>y.style.map.terrain.getElevation(Ge,Qr,Nn):null,tr=c.layout.get("text-rotation-alignment")==="map";et(We,Ge.posMatrix,y,g,pn,ps,ee,R,tr,Fn)}const ja=y.translatePosMatrix(Ge.posMatrix,Be,x,E),Oo=ye||g&&ke||ga?Oh:pn,Tr=y.translatePosMatrix(ps,Be,x,E,!0),yr=nt&&c.paint.get(g?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Lr;Lr=nt?We.iconsInText?La(kt.kind,jt,Te,ee,y,ja,Oo,Tr,qt,er):Th(kt.kind,jt,Te,ee,y,ja,Oo,Tr,g,qt,!0):Eh(kt.kind,jt,Te,ee,y,ja,Oo,Tr,g,qt);const $a={program:an,buffers:gt,uniformValues:Lr,atlasTexture:On,atlasTextureIcon:$n,atlasInterpolation:cn,atlasInterpolationIcon:gr,isSDF:nt,hasHalo:yr};if(ce&&We.canOverlap){xe=!0;const Fn=gt.segments.get();for(const tr of Fn)ze.push({segments:new o.S([tr]),sortKey:tr.sortKey,state:$a,terrainData:Ft})}else ze.push({segments:gt.segments,sortKey:0,state:$a,terrainData:Ft})}xe&&ze.sort((Ge,Be)=>Ge.sortKey-Be.sortKey);for(const Ge of ze){const Be=Ge.state;if(Z.activeTexture.set(re.TEXTURE0),Be.atlasTexture.bind(Be.atlasInterpolation,re.CLAMP_TO_EDGE),Be.atlasTextureIcon&&(Z.activeTexture.set(re.TEXTURE1),Be.atlasTextureIcon&&Be.atlasTextureIcon.bind(Be.atlasInterpolationIcon,re.CLAMP_TO_EDGE)),Be.isSDF){const We=Be.uniformValues;Be.hasHalo&&(We.u_is_halo=1,Nh(Be.buffers,Ge.segments,c,y,Be.program,Ae,L,z,We,Ge.terrainData)),We.u_is_halo=0}Nh(Be.buffers,Ge.segments,c,y,Be.program,Ae,L,z,Be.uniformValues,Ge.terrainData)}}function Nh(y,i,c,p,g,x,E,T,k,R){const L=p.context;g.draw(L,L.gl.TRIANGLES,x,E,T,wn.disabled,k,R,c.id,y.layoutVertexBuffer,y.indexBuffer,i,c.paint,p.transform.zoom,y.programConfigurations.get(c.id),y.dynamicLayoutVertexBuffer,y.opacityVertexBuffer)}function Ll(y,i,c,p,g){if(!c||!p||!p.imageAtlas)return;const x=p.imageAtlas.patternPositions;let E=x[c.to.toString()],T=x[c.from.toString()];if(!E&&T&&(E=T),!T&&E&&(T=E),!E||!T){const k=g.getPaintProperty(i);E=x[k],T=x[k]}E&&T&&y.setConstantPatternPositions(E,T)}function zl(y,i,c,p,g,x,E){const T=y.context.gl,k="fill-pattern",R=c.paint.get(k),L=R&&R.constantOr(1),z=c.getCrossfadeParameters();let Z,re,ne,se,ee;E?(re=L&&!c.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Z=T.LINES):(re=L?"fillPattern":"fill",Z=T.TRIANGLES);const ye=R.constantOr(null);for(const Te of p){const ce=i.getTile(Te);if(L&&!ce.patternsLoaded())continue;const xe=ce.getBucket(c);if(!xe)continue;const Ae=xe.programConfigurations.get(c.id),ke=y.useProgram(re,Ae),ze=y.style.map.terrain&&y.style.map.terrain.getTerrainData(Te);L&&(y.context.activeTexture.set(T.TEXTURE0),ce.imageAtlasTexture.bind(T.LINEAR,T.CLAMP_TO_EDGE),Ae.updatePaintBuffers(z)),Ll(Ae,k,ye,ce,c);const Ge=ze?Te:null,Be=y.translatePosMatrix(Ge?Ge.posMatrix:Te.posMatrix,ce,c.paint.get("fill-translate"),c.paint.get("fill-translate-anchor"));if(E){se=xe.indexBuffer2,ee=xe.segments2;const We=[T.drawingBufferWidth,T.drawingBufferHeight];ne=re==="fillOutlinePattern"&&L?Du(Be,y,z,ce,We):Ru(Be,We)}else se=xe.indexBuffer,ee=xe.segments,ne=L?_h(Be,y,z,ce):rp(Be);ke.draw(y.context,Z,g,y.stencilModeForClipping(Te),x,wn.disabled,ne,ze,c.id,xe.layoutVertexBuffer,se,ee,c.paint,y.transform.zoom,Ae)}}function Ol(y,i,c,p,g,x,E){const T=y.context,k=T.gl,R="fill-extrusion-pattern",L=c.paint.get(R),z=L.constantOr(1),Z=c.getCrossfadeParameters(),re=c.paint.get("fill-extrusion-opacity"),ne=L.constantOr(null);for(const se of p){const ee=i.getTile(se),ye=ee.getBucket(c);if(!ye)continue;const Te=y.style.map.terrain&&y.style.map.terrain.getTerrainData(se),ce=ye.programConfigurations.get(c.id),xe=y.useProgram(z?"fillExtrusionPattern":"fillExtrusion",ce);z&&(y.context.activeTexture.set(k.TEXTURE0),ee.imageAtlasTexture.bind(k.LINEAR,k.CLAMP_TO_EDGE),ce.updatePaintBuffers(Z)),Ll(ce,R,ne,ee,c);const Ae=y.translatePosMatrix(se.posMatrix,ee,c.paint.get("fill-extrusion-translate"),c.paint.get("fill-extrusion-translate-anchor")),ke=c.paint.get("fill-extrusion-vertical-gradient"),ze=z?ca(Ae,y,ke,re,se,Z,ee):xh(Ae,y,ke,re);xe.draw(T,T.gl.TRIANGLES,g,x,E,wn.backCCW,ze,Te,c.id,ye.layoutVertexBuffer,ye.indexBuffer,ye.segments,c.paint,y.transform.zoom,ce,y.style.map.terrain&&ye.centroidVertexBuffer)}}function Tv(y,i,c,p,g,x,E){const T=y.context,k=T.gl,R=c.fbo;if(!R)return;const L=y.useProgram("hillshade"),z=y.style.map.terrain&&y.style.map.terrain.getTerrainData(i);T.activeTexture.set(k.TEXTURE0),k.bindTexture(k.TEXTURE_2D,R.colorAttachment.get()),L.draw(T,k.TRIANGLES,g,x,E,wn.disabled,((Z,re,ne,se)=>{const ee=ne.paint.get("hillshade-shadow-color"),ye=ne.paint.get("hillshade-highlight-color"),Te=ne.paint.get("hillshade-accent-color");let ce=ne.paint.get("hillshade-illumination-direction")*(Math.PI/180);ne.paint.get("hillshade-illumination-anchor")==="viewport"&&(ce-=Z.transform.angle);const xe=!Z.options.moving;return{u_matrix:se?se.posMatrix:Z.transform.calculatePosMatrix(re.tileID.toUnwrapped(),xe),u_image:0,u_latrange:bh(0,re.tileID),u_light:[ne.paint.get("hillshade-exaggeration"),ce],u_shadow:ee,u_highlight:ye,u_accent:Te}})(y,c,p,z?i:null),z,p.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments)}function Bh(y,i,c,p,g,x){const E=y.context,T=E.gl,k=i.dem;if(k&&k.data){const R=k.dim,L=k.stride,z=k.getPixels();if(E.activeTexture.set(T.TEXTURE1),E.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||y.getTileTexture(L),i.demTexture){const re=i.demTexture;re.update(z,{premultiply:!1}),re.bind(T.NEAREST,T.CLAMP_TO_EDGE)}else i.demTexture=new Me(E,z,T.RGBA,{premultiply:!1}),i.demTexture.bind(T.NEAREST,T.CLAMP_TO_EDGE);E.activeTexture.set(T.TEXTURE0);let Z=i.fbo;if(!Z){const re=new Me(E,{width:R,height:R,data:null},T.RGBA);re.bind(T.LINEAR,T.CLAMP_TO_EDGE),Z=i.fbo=E.createFramebuffer(R,R,!0,!1),Z.colorAttachment.set(re.texture)}E.bindFramebuffer.set(Z.framebuffer),E.viewport.set([0,0,R,R]),y.useProgram("hillshadePrepare").draw(E,T.TRIANGLES,p,g,x,wn.disabled,((re,ne)=>{const se=ne.stride,ee=o.Z();return o.aS(ee,0,o.N,-o.N,0,0,1),o.$(ee,ee,[0,-o.N,0]),{u_matrix:ee,u_image:1,u_dimension:[se,se],u_zoom:re.overscaledZ,u_unpack:ne.getUnpackVector()}})(i.tileID,k),null,c.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments),i.needsHillshadePrepare=!1}}function Cv(y,i,c,p,g,x){const E=p.paint.get("raster-fade-duration");if(!x&&E>0){const T=o.h.now(),k=(T-y.timeAdded)/E,R=i?(T-i.timeAdded)/E:-1,L=c.getSource(),z=g.coveringZoomLevel({tileSize:L.tileSize,roundZoom:L.roundZoom}),Z=!i||Math.abs(i.tileID.overscaledZ-z)>Math.abs(y.tileID.overscaledZ-z),re=Z&&y.refreshedUponExpiration?1:o.ad(Z?k:1-R,0,1);return y.refreshedUponExpiration&&k>=1&&(y.refreshedUponExpiration=!1),i?{opacity:1,mix:1-re}:{opacity:re,mix:0}}return{opacity:1,mix:0}}const yp=new o.aT(1,0,0,1),Hu=new o.aT(0,1,0,1),Vh=new o.aT(0,0,1,1),vp=new o.aT(1,0,1,1),xp=new o.aT(0,1,1,1);function Fl(y,i,c,p){Xu(y,0,i+c/2,y.transform.width,c,p)}function Ku(y,i,c,p){Xu(y,i-c/2,0,c,y.transform.height,p)}function Xu(y,i,c,p,g,x){const E=y.context,T=E.gl;T.enable(T.SCISSOR_TEST),T.scissor(i*y.pixelRatio,c*y.pixelRatio,p*y.pixelRatio,g*y.pixelRatio),E.clear({color:x}),T.disable(T.SCISSOR_TEST)}function _p(y,i,c){const p=y.context,g=p.gl,x=c.posMatrix,E=y.useProgram("debug"),T=Wt.disabled,k=Tn.disabled,R=y.colorModeForRenderPass(),L="$debug",z=y.style.map.terrain&&y.style.map.terrain.getTerrainData(c);p.activeTexture.set(g.TEXTURE0);const Z=i.getTileByID(c.key).latestRawTileData,re=Math.floor((Z&&Z.byteLength||0)/1024),ne=i.getTile(c).tileSize,se=512/Math.min(ne,512)*(c.overscaledZ/y.transform.zoom)*.5;let ee=c.canonical.toString();c.overscaledZ!==c.canonical.z&&(ee+=` => ${c.overscaledZ}`),function(ye,Te){ye.initDebugOverlayCanvas();const ce=ye.debugOverlayCanvas,xe=ye.context.gl,Ae=ye.debugOverlayCanvas.getContext("2d");Ae.clearRect(0,0,ce.width,ce.height),Ae.shadowColor="white",Ae.shadowBlur=2,Ae.lineWidth=1.5,Ae.strokeStyle="white",Ae.textBaseline="top",Ae.font="bold 36px Open Sans, sans-serif",Ae.fillText(Te,5,5),Ae.strokeText(Te,5,5),ye.debugOverlayTexture.update(ce),ye.debugOverlayTexture.bind(xe.LINEAR,xe.CLAMP_TO_EDGE)}(y,`${ee} ${re}kB`),E.draw(p,g.TRIANGLES,T,k,En.alphaBlended,wn.disabled,Ml(x,o.aT.transparent,se),null,L,y.debugBuffer,y.quadTriangleIndexBuffer,y.debugSegments),E.draw(p,g.LINE_STRIP,T,k,R,wn.disabled,Ml(x,o.aT.red),z,L,y.debugBuffer,y.tileBorderIndexBuffer,y.debugSegments)}function In(y,i,c){const p=y.context,g=p.gl,x=y.colorModeForRenderPass(),E=new Wt(g.LEQUAL,Wt.ReadWrite,y.depthRangeFor3D),T=y.useProgram("terrain"),k=i.getTerrainMesh();p.bindFramebuffer.set(null),p.viewport.set([0,0,y.width,y.height]);for(const R of c){const L=y.renderToTexture.getTexture(R),z=i.getTerrainData(R.tileID);p.activeTexture.set(g.TEXTURE0),g.bindTexture(g.TEXTURE_2D,L.texture);const Z={u_matrix:y.transform.calculatePosMatrix(R.tileID.toUnwrapped()),u_texture:0,u_ele_delta:i.getMeshFrameDelta(y.transform.zoom)};T.draw(p,g.TRIANGLES,E,Tn.disabled,x,wn.backCCW,Z,z,"terrain",k.vertexBuffer,k.indexBuffer,k.segments)}}class Fa{constructor(i,c){this.context=new Ev(i),this.transform=c,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:o.Z(),renderTime:0},this.setup(),this.numSublayers=st.maxUnderzooming+st.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new ku}resize(i,c,p){if(this.width=Math.floor(i*p),this.height=Math.floor(c*p),this.pixelRatio=p,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const g of this.style._order)this.style._layers[g].resize()}setup(){const i=this.context,c=new o.a_;c.emplaceBack(0,0),c.emplaceBack(o.N,0),c.emplaceBack(0,o.N),c.emplaceBack(o.N,o.N),this.tileExtentBuffer=i.createVertexBuffer(c,Iu.members),this.tileExtentSegments=o.S.simpleSegment(0,0,4,2);const p=new o.a_;p.emplaceBack(0,0),p.emplaceBack(o.N,0),p.emplaceBack(0,o.N),p.emplaceBack(o.N,o.N),this.debugBuffer=i.createVertexBuffer(p,Iu.members),this.debugSegments=o.S.simpleSegment(0,0,4,5);const g=new o.V;g.emplaceBack(0,0,0,0),g.emplaceBack(o.N,0,o.N,0),g.emplaceBack(0,o.N,0,o.N),g.emplaceBack(o.N,o.N,o.N,o.N),this.rasterBoundsBuffer=i.createVertexBuffer(g,Wr.members),this.rasterBoundsSegments=o.S.simpleSegment(0,0,4,2);const x=new o.a_;x.emplaceBack(0,0),x.emplaceBack(1,0),x.emplaceBack(0,1),x.emplaceBack(1,1),this.viewportBuffer=i.createVertexBuffer(x,Iu.members),this.viewportSegments=o.S.simpleSegment(0,0,4,2);const E=new o.a$;E.emplaceBack(0),E.emplaceBack(1),E.emplaceBack(3),E.emplaceBack(2),E.emplaceBack(0),this.tileBorderIndexBuffer=i.createIndexBuffer(E);const T=new o.b0;T.emplaceBack(0,1,2),T.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=i.createIndexBuffer(T);const k=this.context.gl;this.stencilClearMode=new Tn({func:k.ALWAYS,mask:0},0,255,k.ZERO,k.ZERO,k.ZERO)}clearStencil(){const i=this.context,c=i.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const p=o.Z();o.aS(p,0,this.width,this.height,0,0,1),o.a0(p,p,[c.drawingBufferWidth,c.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(i,c.TRIANGLES,Wt.disabled,this.stencilClearMode,En.disabled,wn.disabled,ip(p),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(i,c){if(this.currentStencilSource===i.source||!i.isTileClipped()||!c||!c.length)return;this.currentStencilSource=i.source;const p=this.context,g=p.gl;this.nextStencilID+c.length>256&&this.clearStencil(),p.setColorMode(En.disabled),p.setDepthMode(Wt.disabled);const x=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const E of c){const T=this._tileClippingMaskIDs[E.key]=this.nextStencilID++,k=this.style.map.terrain&&this.style.map.terrain.getTerrainData(E);x.draw(p,g.TRIANGLES,Wt.disabled,new Tn({func:g.ALWAYS,mask:0},T,255,g.KEEP,g.KEEP,g.REPLACE),En.disabled,wn.disabled,ip(E.posMatrix),k,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const i=this.nextStencilID++,c=this.context.gl;return new Tn({func:c.NOTEQUAL,mask:255},i,255,c.KEEP,c.KEEP,c.REPLACE)}stencilModeForClipping(i){const c=this.context.gl;return new Tn({func:c.EQUAL,mask:255},this._tileClippingMaskIDs[i.key],0,c.KEEP,c.KEEP,c.REPLACE)}stencilConfigForOverlap(i){const c=this.context.gl,p=i.sort((E,T)=>T.overscaledZ-E.overscaledZ),g=p[p.length-1].overscaledZ,x=p[0].overscaledZ-g+1;if(x>1){this.currentStencilSource=void 0,this.nextStencilID+x>256&&this.clearStencil();const E={};for(let T=0;T<x;T++)E[T+g]=new Tn({func:c.GEQUAL,mask:255},T+this.nextStencilID,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID+=x,[E,p]}return[{[g]:Tn.disabled},p]}colorModeForRenderPass(){const i=this.context.gl;return this._showOverdrawInspector?new En([i.CONSTANT_COLOR,i.ONE],new o.aT(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?En.unblended:En.alphaBlended}depthModeForSublayer(i,c,p){if(!this.opaquePassEnabledForLayer())return Wt.disabled;const g=1-((1+this.currentLayer)*this.numSublayers+i)*this.depthEpsilon;return new Wt(p||this.context.gl.LEQUAL,c,[g,g])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(i,c){this.style=i,this.options=c,this.lineAtlas=i.lineAtlas,this.imageManager=i.imageManager,this.glyphManager=i.glyphManager,this.symbolFadeChange=i.placement.symbolFadeChange(o.h.now()),this.imageManager.beginFrame();const p=this.style._order,g=this.style.sourceCaches,x={},E={},T={};for(const k in g){const R=g[k];R.used&&R.prepare(this.context),x[k]=R.getVisibleCoordinates(),E[k]=x[k].slice().reverse(),T[k]=R.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let k=0;k<p.length;k++)if(this.style._layers[p[k]].is3D()){this.opaquePassCutoff=k;break}if(this.renderToTexture){this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0;const k=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!o.b1(this.terrainFacilitator.matrix,this.transform.projMatrix)||k.length)&&(o.b2(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(R,L){const z=R.context,Z=z.gl,re=En.unblended,ne=new Wt(Z.LEQUAL,Wt.ReadWrite,[0,1]),se=L.getTerrainMesh(),ee=L.sourceCache.getRenderableTiles(),ye=R.useProgram("terrainDepth");z.bindFramebuffer.set(L.getFramebuffer("depth").framebuffer),z.viewport.set([0,0,R.width/devicePixelRatio,R.height/devicePixelRatio]),z.clear({color:o.aT.transparent,depth:1});for(const Te of ee){const ce=L.getTerrainData(Te.tileID),xe={u_matrix:R.transform.calculatePosMatrix(Te.tileID.toUnwrapped()),u_ele_delta:L.getMeshFrameDelta(R.transform.zoom)};ye.draw(z,Z.TRIANGLES,ne,Tn.disabled,re,wn.backCCW,xe,ce,"terrain",se.vertexBuffer,se.indexBuffer,se.segments)}z.bindFramebuffer.set(null),z.viewport.set([0,0,R.width,R.height])}(this,this.style.map.terrain),function(R,L){const z=R.context,Z=z.gl,re=En.unblended,ne=new Wt(Z.LEQUAL,Wt.ReadWrite,[0,1]),se=L.getTerrainMesh(),ee=L.getCoordsTexture(),ye=L.sourceCache.getRenderableTiles(),Te=R.useProgram("terrainCoords");z.bindFramebuffer.set(L.getFramebuffer("coords").framebuffer),z.viewport.set([0,0,R.width/devicePixelRatio,R.height/devicePixelRatio]),z.clear({color:o.aT.transparent,depth:1}),L.coordsIndex=[];for(const ce of ye){const xe=L.getTerrainData(ce.tileID);z.activeTexture.set(Z.TEXTURE0),Z.bindTexture(Z.TEXTURE_2D,ee.texture);const Ae={u_matrix:R.transform.calculatePosMatrix(ce.tileID.toUnwrapped()),u_terrain_coords_id:(255-L.coordsIndex.length)/255,u_texture:0,u_ele_delta:L.getMeshFrameDelta(R.transform.zoom)};Te.draw(z,Z.TRIANGLES,ne,Tn.disabled,re,wn.backCCW,Ae,xe,"terrain",se.vertexBuffer,se.indexBuffer,se.segments),L.coordsIndex.push(ce.tileID.key)}z.bindFramebuffer.set(null),z.viewport.set([0,0,R.width,R.height])}(this,this.style.map.terrain))}this.renderPass="offscreen";for(const k of p){const R=this.style._layers[k];if(!R.hasOffscreenPass()||R.isHidden(this.transform.zoom))continue;const L=E[R.source];(R.type==="custom"||L.length)&&this.renderLayer(this,g[R.source],R,L)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:c.showOverdrawInspector?o.aT.black:o.aT.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=c.showOverdrawInspector,this.depthRangeFor3D=[0,1-(i._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=p.length-1;this.currentLayer>=0;this.currentLayer--){const k=this.style._layers[p[this.currentLayer]],R=g[k.source],L=x[k.source];this._renderTileClippingMasks(k,L),this.renderLayer(this,R,k,L)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<p.length;this.currentLayer++){const k=this.style._layers[p[this.currentLayer]],R=g[k.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(k))continue;const L=(k.type==="symbol"?T:E)[k.source];this._renderTileClippingMasks(k,x[k.source]),this.renderLayer(this,R,k,L)}if(this.options.showTileBoundaries){const k=function(R,L){let z=null;const Z=Object.values(R._layers).flatMap(ee=>ee.source&&!ee.isHidden(L)?[R.sourceCaches[ee.source]]:[]),re=Z.filter(ee=>ee.getSource().type==="vector"),ne=Z.filter(ee=>ee.getSource().type!=="vector"),se=ee=>{(!z||z.getSource().maxzoom<ee.getSource().maxzoom)&&(z=ee)};return re.forEach(ee=>se(ee)),z||ne.forEach(ee=>se(ee)),z}(this.style,this.transform.zoom);k&&function(R,L,z){for(let Z=0;Z<z.length;Z++)_p(R,L,z[Z])}(this,k,k.getVisibleCoordinates())}this.options.showPadding&&function(k){const R=k.transform.padding;Fl(k,k.transform.height-(R.top||0),3,yp),Fl(k,R.bottom||0,3,Hu),Ku(k,R.left||0,3,Vh),Ku(k,k.transform.width-(R.right||0),3,vp);const L=k.transform.centerPoint;(function(z,Z,re,ne){Xu(z,Z-1,re-10,2,20,ne),Xu(z,Z-10,re-1,20,2,ne)})(k,L.x,k.transform.height-L.y,xp)}(this),this.context.setDefault()}renderLayer(i,c,p,g){if(!p.isHidden(this.transform.zoom)&&(p.type==="background"||p.type==="custom"||(g||[]).length))switch(this.id=p.id,p.type){case"symbol":(function(x,E,T,k,R){if(x.renderPass!=="translucent")return;const L=Tn.disabled,z=x.colorModeForRenderPass();(T._unevaluatedLayout.hasValue("text-variable-anchor")||T._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(Z,re,ne,se,ee,ye,Te){const ce=re.transform,xe=ee==="map",Ae=ye==="map";for(const ke of Z){const ze=se.getTile(ke),Ge=ze.getBucket(ne);if(!Ge||!Ge.text||!Ge.text.segments.get().length)continue;const Be=o.ah(Ge.textSizeData,ce.zoom),We=me(ze,1,re.transform.zoom),gt=He(ke.posMatrix,Ae,xe,re.transform,We),Ut=ne.layout.get("icon-text-fit")!=="none"&&Ge.hasIconData();if(Be){const nt=Math.pow(2,ce.zoom-ze.tileID.overscaledZ);Zu(Ge,xe,Ae,Te,ce,gt,ke.posMatrix,nt,Be,Ut,re.style.map.terrain?(kt,vt)=>re.style.map.terrain.getElevation(ke,kt,vt):null)}}}(k,x,T,E,T.layout.get("text-rotation-alignment"),T.layout.get("text-pitch-alignment"),R),T.paint.get("icon-opacity").constantOr(1)!==0&&Wu(x,E,T,k,!1,T.paint.get("icon-translate"),T.paint.get("icon-translate-anchor"),T.layout.get("icon-rotation-alignment"),T.layout.get("icon-pitch-alignment"),T.layout.get("icon-keep-upright"),L,z),T.paint.get("text-opacity").constantOr(1)!==0&&Wu(x,E,T,k,!0,T.paint.get("text-translate"),T.paint.get("text-translate-anchor"),T.layout.get("text-rotation-alignment"),T.layout.get("text-pitch-alignment"),T.layout.get("text-keep-upright"),L,z),E.map.showCollisionBoxes&&(gp(x,E,T,k,T.paint.get("text-translate"),T.paint.get("text-translate-anchor"),!0),gp(x,E,T,k,T.paint.get("icon-translate"),T.paint.get("icon-translate-anchor"),!1))})(i,c,p,g,this.style.placement.variableOffsets);break;case"circle":(function(x,E,T,k){if(x.renderPass!=="translucent")return;const R=T.paint.get("circle-opacity"),L=T.paint.get("circle-stroke-width"),z=T.paint.get("circle-stroke-opacity"),Z=!T.layout.get("circle-sort-key").isConstant();if(R.constantOr(1)===0&&(L.constantOr(1)===0||z.constantOr(1)===0))return;const re=x.context,ne=re.gl,se=x.depthModeForSublayer(0,Wt.ReadOnly),ee=Tn.disabled,ye=x.colorModeForRenderPass(),Te=[];for(let ce=0;ce<k.length;ce++){const xe=k[ce],Ae=E.getTile(xe),ke=Ae.getBucket(T);if(!ke)continue;const ze=ke.programConfigurations.get(T.id),Ge=x.useProgram("circle",ze),Be=ke.layoutVertexBuffer,We=ke.indexBuffer,gt=x.style.map.terrain&&x.style.map.terrain.getTerrainData(xe),Ut={programConfiguration:ze,program:Ge,layoutVertexBuffer:Be,indexBuffer:We,uniformValues:ha(x,xe,Ae,T),terrainData:gt};if(Z){const nt=ke.segments.get();for(const kt of nt)Te.push({segments:new o.S([kt]),sortKey:kt.sortKey,state:Ut})}else Te.push({segments:ke.segments,sortKey:0,state:Ut})}Z&&Te.sort((ce,xe)=>ce.sortKey-xe.sortKey);for(const ce of Te){const{programConfiguration:xe,program:Ae,layoutVertexBuffer:ke,indexBuffer:ze,uniformValues:Ge,terrainData:Be}=ce.state;Ae.draw(re,ne.TRIANGLES,se,ee,ye,wn.disabled,Ge,Be,T.id,ke,ze,ce.segments,T.paint,x.transform.zoom,xe)}})(i,c,p,g);break;case"heatmap":(function(x,E,T,k){if(T.paint.get("heatmap-opacity")!==0)if(x.renderPass==="offscreen"){const R=x.context,L=R.gl,z=Tn.disabled,Z=new En([L.ONE,L.ONE],o.aT.transparent,[!0,!0,!0,!0]);(function(re,ne,se){const ee=re.gl;re.activeTexture.set(ee.TEXTURE1),re.viewport.set([0,0,ne.width/4,ne.height/4]);let ye=se.heatmapFbo;if(ye)ee.bindTexture(ee.TEXTURE_2D,ye.colorAttachment.get()),re.bindFramebuffer.set(ye.framebuffer);else{const Te=ee.createTexture();ee.bindTexture(ee.TEXTURE_2D,Te),ee.texParameteri(ee.TEXTURE_2D,ee.TEXTURE_WRAP_S,ee.CLAMP_TO_EDGE),ee.texParameteri(ee.TEXTURE_2D,ee.TEXTURE_WRAP_T,ee.CLAMP_TO_EDGE),ee.texParameteri(ee.TEXTURE_2D,ee.TEXTURE_MIN_FILTER,ee.LINEAR),ee.texParameteri(ee.TEXTURE_2D,ee.TEXTURE_MAG_FILTER,ee.LINEAR),ye=se.heatmapFbo=re.createFramebuffer(ne.width/4,ne.height/4,!1,!1),function(ce,xe,Ae,ke){var ze,Ge;const Be=ce.gl,We=(ze=ce.HALF_FLOAT)!==null&&ze!==void 0?ze:Be.UNSIGNED_BYTE,gt=(Ge=ce.RGBA16F)!==null&&Ge!==void 0?Ge:Be.RGBA;Be.texImage2D(Be.TEXTURE_2D,0,gt,xe.width/4,xe.height/4,0,Be.RGBA,We,null),ke.colorAttachment.set(Ae)}(re,ne,Te,ye)}})(R,x,T),R.clear({color:o.aT.transparent});for(let re=0;re<k.length;re++){const ne=k[re];if(E.hasRenderableParent(ne))continue;const se=E.getTile(ne),ee=se.getBucket(T);if(!ee)continue;const ye=ee.programConfigurations.get(T.id),Te=x.useProgram("heatmap",ye),{zoom:ce}=x.transform;Te.draw(R,L.TRIANGLES,Wt.disabled,z,Z,wn.disabled,gv(ne.posMatrix,se,ce,T.paint.get("heatmap-intensity")),null,T.id,ee.layoutVertexBuffer,ee.indexBuffer,ee.segments,T.paint,x.transform.zoom,ye)}R.viewport.set([0,0,x.width,x.height])}else x.renderPass==="translucent"&&(x.context.setColorMode(x.colorModeForRenderPass()),function(R,L){const z=R.context,Z=z.gl,re=L.heatmapFbo;if(!re)return;z.activeTexture.set(Z.TEXTURE0),Z.bindTexture(Z.TEXTURE_2D,re.colorAttachment.get()),z.activeTexture.set(Z.TEXTURE1);let ne=L.colorRampTexture;ne||(ne=L.colorRampTexture=new Me(z,L.colorRamp,Z.RGBA)),ne.bind(Z.LINEAR,Z.CLAMP_TO_EDGE),R.useProgram("heatmapTexture").draw(z,Z.TRIANGLES,Wt.disabled,Tn.disabled,R.colorModeForRenderPass(),wn.disabled,((se,ee,ye,Te)=>{const ce=o.Z();o.aS(ce,0,se.width,se.height,0,0,1);const xe=se.context.gl;return{u_matrix:ce,u_world:[xe.drawingBufferWidth,xe.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:ee.paint.get("heatmap-opacity")}})(R,L),null,L.id,R.viewportBuffer,R.quadTriangleIndexBuffer,R.viewportSegments,L.paint,R.transform.zoom)}(x,T))})(i,c,p,g);break;case"line":(function(x,E,T,k){if(x.renderPass!=="translucent")return;const R=T.paint.get("line-opacity"),L=T.paint.get("line-width");if(R.constantOr(1)===0||L.constantOr(1)===0)return;const z=x.depthModeForSublayer(0,Wt.ReadOnly),Z=x.colorModeForRenderPass(),re=T.paint.get("line-dasharray"),ne=T.paint.get("line-pattern"),se=ne.constantOr(1),ee=T.paint.get("line-gradient"),ye=T.getCrossfadeParameters(),Te=se?"linePattern":re?"lineSDF":ee?"lineGradient":"line",ce=x.context,xe=ce.gl;let Ae=!0;for(const ke of k){const ze=E.getTile(ke);if(se&&!ze.patternsLoaded())continue;const Ge=ze.getBucket(T);if(!Ge)continue;const Be=Ge.programConfigurations.get(T.id),We=x.context.program.get(),gt=x.useProgram(Te,Be),Ut=Ae||gt.program!==We,nt=x.style.map.terrain&&x.style.map.terrain.getTerrainData(ke),kt=ne.constantOr(null);if(kt&&ze.imageAtlas){const jt=ze.imageAtlas,Ft=jt.patternPositions[kt.to.toString()],qt=jt.patternPositions[kt.from.toString()];Ft&&qt&&Be.setConstantPatternPositions(Ft,qt)}const vt=nt?ke:null,an=se?yv(x,ze,T,ye,vt):re?ap(x,ze,T,re,ye,vt):ee?sp(x,ze,T,Ge.lineClipsArray.length,vt):Sh(x,ze,T,vt);if(se)ce.activeTexture.set(xe.TEXTURE0),ze.imageAtlasTexture.bind(xe.LINEAR,xe.CLAMP_TO_EDGE),Be.updatePaintBuffers(ye);else if(re&&(Ut||x.lineAtlas.dirty))ce.activeTexture.set(xe.TEXTURE0),x.lineAtlas.bind(ce);else if(ee){const jt=Ge.gradients[T.id];let Ft=jt.texture;if(T.gradientVersion!==jt.version){let qt=256;if(T.stepInterpolant){const On=E.getSource().maxzoom,cn=ke.canonical.z===On?Math.ceil(1<<x.transform.maxZoom-ke.canonical.z):1;qt=o.ad(o.aY(Ge.maxLineLength/o.N*1024*cn),256,ce.maxTextureSize)}jt.gradient=o.aZ({expression:T.gradientExpression(),evaluationKey:"lineProgress",resolution:qt,image:jt.gradient||void 0,clips:Ge.lineClipsArray}),jt.texture?jt.texture.update(jt.gradient):jt.texture=new Me(ce,jt.gradient,xe.RGBA),jt.version=T.gradientVersion,Ft=jt.texture}ce.activeTexture.set(xe.TEXTURE0),Ft.bind(T.stepInterpolant?xe.NEAREST:xe.LINEAR,xe.CLAMP_TO_EDGE)}gt.draw(ce,xe.TRIANGLES,z,x.stencilModeForClipping(ke),Z,wn.disabled,an,nt,T.id,Ge.layoutVertexBuffer,Ge.indexBuffer,Ge.segments,T.paint,x.transform.zoom,Be,Ge.layoutVertexBuffer2),Ae=!1}})(i,c,p,g);break;case"fill":(function(x,E,T,k){const R=T.paint.get("fill-color"),L=T.paint.get("fill-opacity");if(L.constantOr(1)===0)return;const z=x.colorModeForRenderPass(),Z=T.paint.get("fill-pattern"),re=x.opaquePassEnabledForLayer()&&!Z.constantOr(1)&&R.constantOr(o.aT.transparent).a===1&&L.constantOr(0)===1?"opaque":"translucent";if(x.renderPass===re){const ne=x.depthModeForSublayer(1,x.renderPass==="opaque"?Wt.ReadWrite:Wt.ReadOnly);zl(x,E,T,k,ne,z,!1)}if(x.renderPass==="translucent"&&T.paint.get("fill-antialias")){const ne=x.depthModeForSublayer(T.getPaintProperty("fill-outline-color")?2:0,Wt.ReadOnly);zl(x,E,T,k,ne,z,!0)}})(i,c,p,g);break;case"fill-extrusion":(function(x,E,T,k){const R=T.paint.get("fill-extrusion-opacity");if(R!==0&&x.renderPass==="translucent"){const L=new Wt(x.context.gl.LEQUAL,Wt.ReadWrite,x.depthRangeFor3D);if(R!==1||T.paint.get("fill-extrusion-pattern").constantOr(1))Ol(x,E,T,k,L,Tn.disabled,En.disabled),Ol(x,E,T,k,L,x.stencilModeFor3D(),x.colorModeForRenderPass());else{const z=x.colorModeForRenderPass();Ol(x,E,T,k,L,Tn.disabled,z)}}})(i,c,p,g);break;case"hillshade":(function(x,E,T,k){if(x.renderPass!=="offscreen"&&x.renderPass!=="translucent")return;const R=x.context,L=x.depthModeForSublayer(0,Wt.ReadOnly),z=x.colorModeForRenderPass(),[Z,re]=x.renderPass==="translucent"?x.stencilConfigForOverlap(k):[{},k];for(const ne of re){const se=E.getTile(ne);se.needsHillshadePrepare!==void 0&&se.needsHillshadePrepare&&x.renderPass==="offscreen"?Bh(x,se,T,L,Tn.disabled,z):x.renderPass==="translucent"&&Tv(x,ne,se,T,L,Z[ne.overscaledZ],z)}R.viewport.set([0,0,x.width,x.height])})(i,c,p,g);break;case"raster":(function(x,E,T,k){if(x.renderPass!=="translucent"||T.paint.get("raster-opacity")===0||!k.length)return;const R=x.context,L=R.gl,z=E.getSource(),Z=x.useProgram("raster"),re=x.colorModeForRenderPass(),[ne,se]=z instanceof Hr?[{},k]:x.stencilConfigForOverlap(k),ee=se[se.length-1].overscaledZ,ye=!x.options.moving;for(const Te of se){const ce=x.depthModeForSublayer(Te.overscaledZ-ee,T.paint.get("raster-opacity")===1?Wt.ReadWrite:Wt.ReadOnly,L.LESS),xe=E.getTile(Te);xe.registerFadeDuration(T.paint.get("raster-fade-duration"));const Ae=E.findLoadedParent(Te,0),ke=Cv(xe,Ae,E,T,x.transform,x.style.map.terrain);let ze,Ge;const Be=T.paint.get("raster-resampling")==="nearest"?L.NEAREST:L.LINEAR;R.activeTexture.set(L.TEXTURE0),xe.texture.bind(Be,L.CLAMP_TO_EDGE,L.LINEAR_MIPMAP_NEAREST),R.activeTexture.set(L.TEXTURE1),Ae?(Ae.texture.bind(Be,L.CLAMP_TO_EDGE,L.LINEAR_MIPMAP_NEAREST),ze=Math.pow(2,Ae.tileID.overscaledZ-xe.tileID.overscaledZ),Ge=[xe.tileID.canonical.x*ze%1,xe.tileID.canonical.y*ze%1]):xe.texture.bind(Be,L.CLAMP_TO_EDGE,L.LINEAR_MIPMAP_NEAREST);const We=x.style.map.terrain&&x.style.map.terrain.getTerrainData(Te),gt=We?Te:null,Ut=gt?gt.posMatrix:x.transform.calculatePosMatrix(Te.toUnwrapped(),ye),nt=lp(Ut,Ge||[0,0],ze||1,ke,T);z instanceof Hr?Z.draw(R,L.TRIANGLES,ce,Tn.disabled,re,wn.disabled,nt,We,T.id,z.boundsBuffer,x.quadTriangleIndexBuffer,z.boundsSegments):Z.draw(R,L.TRIANGLES,ce,ne[Te.overscaledZ],re,wn.disabled,nt,We,T.id,x.rasterBoundsBuffer,x.quadTriangleIndexBuffer,x.rasterBoundsSegments)}})(i,c,p,g);break;case"background":(function(x,E,T,k){const R=T.paint.get("background-color"),L=T.paint.get("background-opacity");if(L===0)return;const z=x.context,Z=z.gl,re=x.transform,ne=re.tileSize,se=T.paint.get("background-pattern");if(x.isPatternMissing(se))return;const ee=!se&&R.a===1&&L===1&&x.opaquePassEnabledForLayer()?"opaque":"translucent";if(x.renderPass!==ee)return;const ye=Tn.disabled,Te=x.depthModeForSublayer(0,ee==="opaque"?Wt.ReadWrite:Wt.ReadOnly),ce=x.colorModeForRenderPass(),xe=x.useProgram(se?"backgroundPattern":"background"),Ae=k||re.coveringTiles({tileSize:ne,terrain:x.style.map.terrain});se&&(z.activeTexture.set(Z.TEXTURE0),x.imageManager.bind(x.context));const ke=T.getCrossfadeParameters();for(const ze of Ae){const Ge=k?ze.posMatrix:x.transform.calculatePosMatrix(ze.toUnwrapped()),Be=se?zi(Ge,L,x,se,{tileID:ze,tileSize:ne},ke):zu(Ge,L,R),We=x.style.map.terrain&&x.style.map.terrain.getTerrainData(ze);xe.draw(z,Z.TRIANGLES,Te,ye,ce,wn.disabled,Be,We,T.id,x.tileExtentBuffer,x.quadTriangleIndexBuffer,x.tileExtentSegments)}})(i,0,p,g);break;case"custom":(function(x,E,T){const k=x.context,R=T.implementation;if(x.renderPass==="offscreen"){const L=R.prerender;L&&(x.setCustomLayerDefaults(),k.setColorMode(x.colorModeForRenderPass()),L.call(R,k.gl,x.transform.customLayerMatrix()),k.setDirty(),x.setBaseState())}else if(x.renderPass==="translucent"){x.setCustomLayerDefaults(),k.setColorMode(x.colorModeForRenderPass()),k.setStencilMode(Tn.disabled);const L=R.renderingMode==="3d"?new Wt(x.context.gl.LEQUAL,Wt.ReadWrite,x.depthRangeFor3D):x.depthModeForSublayer(0,Wt.ReadOnly);k.setDepthMode(L),R.render(k.gl,x.transform.customLayerMatrix()),k.setDirty(),x.setBaseState(),k.bindFramebuffer.set(null)}})(i,0,p)}}translatePosMatrix(i,c,p,g,x){if(!p[0]&&!p[1])return i;const E=x?g==="map"?this.transform.angle:0:g==="viewport"?-this.transform.angle:0;if(E){const R=Math.sin(E),L=Math.cos(E);p=[p[0]*L-p[1]*R,p[0]*R+p[1]*L]}const T=[x?p[0]:me(c,p[0],this.transform.zoom),x?p[1]:me(c,p[1],this.transform.zoom),0],k=new Float32Array(16);return o.$(k,i,T),k}saveTileTexture(i){const c=this._tileTextures[i.size[0]];c?c.push(i):this._tileTextures[i.size[0]]=[i]}getTileTexture(i){const c=this._tileTextures[i];return c&&c.length>0?c.pop():null}isPatternMissing(i){if(!i)return!1;if(!i.from||!i.to)return!0;const c=this.imageManager.getPattern(i.from.toString()),p=this.imageManager.getPattern(i.to.toString());return!c||!p}useProgram(i,c){this.cache=this.cache||{};const p=i+(c?c.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[p]||(this.cache[p]=new Mu(this.context,Sn[i],c,Ou[i],this._showOverdrawInspector,this.style.map.terrain)),this.cache[p]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const i=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(i.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new Me(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:i,drawingBufferHeight:c}=this.context.gl;return this.width!==i||this.height!==c}}class Kr{constructor(i,c){this.points=i,this.planes=c}static fromInvProjectionMatrix(i,c,p){const g=Math.pow(2,p),x=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(T=>{const k=1/(T=o.ag([],T,i))[3]/c*g;return o.b3(T,T,[k,k,1/T[3],k])}),E=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(T=>{const k=function(Z,re){var ne=re[0],se=re[1],ee=re[2],ye=ne*ne+se*se+ee*ee;return ye>0&&(ye=1/Math.sqrt(ye)),Z[0]=re[0]*ye,Z[1]=re[1]*ye,Z[2]=re[2]*ye,Z}([],function(Z,re,ne){var se=re[0],ee=re[1],ye=re[2],Te=ne[0],ce=ne[1],xe=ne[2];return Z[0]=ee*xe-ye*ce,Z[1]=ye*Te-se*xe,Z[2]=se*ce-ee*Te,Z}([],Ee([],x[T[0]],x[T[1]]),Ee([],x[T[2]],x[T[1]]))),R=-((L=k)[0]*(z=x[T[1]])[0]+L[1]*z[1]+L[2]*z[2]);var L,z;return k.concat(R)});return new Kr(x,E)}}class Io{constructor(i,c){this.min=i,this.max=c,this.center=function(p,g,x){return p[0]=.5*g[0],p[1]=.5*g[1],p[2]=.5*g[2],p}([],function(p,g,x){return p[0]=g[0]+x[0],p[1]=g[1]+x[1],p[2]=g[2]+x[2],p}([],this.min,this.max))}quadrant(i){const c=[i%2==0,i<2],p=J(this.min),g=J(this.max);for(let x=0;x<c.length;x++)p[x]=c[x]?this.min[x]:this.center[x],g[x]=c[x]?this.center[x]:this.max[x];return g[2]=this.max[2],new Io(p,g)}distanceX(i){return Math.max(Math.min(this.max[0],i[0]),this.min[0])-i[0]}distanceY(i){return Math.max(Math.min(this.max[1],i[1]),this.min[1])-i[1]}intersects(i){const c=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let p=!0;for(let g=0;g<i.planes.length;g++){const x=i.planes[g];let E=0;for(let T=0;T<c.length;T++)o.b4(x,c[T])>=0&&E++;if(E===0)return 0;E!==c.length&&(p=!1)}if(p)return 2;for(let g=0;g<3;g++){let x=Number.MAX_VALUE,E=-Number.MAX_VALUE;for(let T=0;T<i.points.length;T++){const k=i.points[T][g]-this.min[g];x=Math.min(x,k),E=Math.max(E,k)}if(E<0||x>this.max[g]-this.min[g])return 0}return 1}}class Nl{constructor(i=0,c=0,p=0,g=0){if(isNaN(i)||i<0||isNaN(c)||c<0||isNaN(p)||p<0||isNaN(g)||g<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=i,this.bottom=c,this.left=p,this.right=g}interpolate(i,c,p){return c.top!=null&&i.top!=null&&(this.top=o.B.number(i.top,c.top,p)),c.bottom!=null&&i.bottom!=null&&(this.bottom=o.B.number(i.bottom,c.bottom,p)),c.left!=null&&i.left!=null&&(this.left=o.B.number(i.left,c.left,p)),c.right!=null&&i.right!=null&&(this.right=o.B.number(i.right,c.right,p)),this}getCenter(i,c){const p=o.ad((this.left+i-this.right)/2,0,i),g=o.ad((this.top+c-this.bottom)/2,0,c);return new o.P(p,g)}equals(i){return this.top===i.top&&this.bottom===i.bottom&&this.left===i.left&&this.right===i.right}clone(){return new Nl(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class Qu{constructor(i,c,p,g,x){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=x===void 0||!!x,this._minZoom=i||0,this._maxZoom=c||22,this._minPitch=p??0,this._maxPitch=g??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new o.L(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Nl,this._posMatrixCache={},this._alignedPosMatrixCache={},this._minEleveationForCurrentTile=0}clone(){const i=new Qu(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return i.apply(this),i}apply(i){this.tileSize=i.tileSize,this.latRange=i.latRange,this.width=i.width,this.height=i.height,this._center=i._center,this._elevation=i._elevation,this._minEleveationForCurrentTile=i._minEleveationForCurrentTile,this.zoom=i.zoom,this.angle=i.angle,this._fov=i._fov,this._pitch=i._pitch,this._unmodified=i._unmodified,this._edgeInsets=i._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(i){this._minZoom!==i&&(this._minZoom=i,this.zoom=Math.max(this.zoom,i))}get maxZoom(){return this._maxZoom}set maxZoom(i){this._maxZoom!==i&&(this._maxZoom=i,this.zoom=Math.min(this.zoom,i))}get minPitch(){return this._minPitch}set minPitch(i){this._minPitch!==i&&(this._minPitch=i,this.pitch=Math.max(this.pitch,i))}get maxPitch(){return this._maxPitch}set maxPitch(i){this._maxPitch!==i&&(this._maxPitch=i,this.pitch=Math.min(this.pitch,i))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(i){i===void 0?i=!0:i===null&&(i=!1),this._renderWorldCopies=i}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new o.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(i){const c=-o.b5(i,-180,180)*Math.PI/180;this.angle!==c&&(this._unmodified=!1,this.angle=c,this._calcMatrices(),this.rotationMatrix=function(){var p=new o.A(4);return o.A!=Float32Array&&(p[1]=0,p[2]=0),p[0]=1,p[3]=1,p}(),function(p,g,x){var E=g[0],T=g[1],k=g[2],R=g[3],L=Math.sin(x),z=Math.cos(x);p[0]=E*z+k*L,p[1]=T*z+R*L,p[2]=E*-L+k*z,p[3]=T*-L+R*z}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(i){const c=o.ad(i,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==c&&(this._unmodified=!1,this._pitch=c,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(i){i=Math.max(.01,Math.min(60,i)),this._fov!==i&&(this._unmodified=!1,this._fov=i/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(i){const c=Math.min(Math.max(i,this.minZoom),this.maxZoom);this._zoom!==c&&(this._unmodified=!1,this._zoom=c,this.tileZoom=Math.max(0,Math.floor(c)),this.scale=this.zoomScale(c),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(i){i.lat===this._center.lat&&i.lng===this._center.lng||(this._unmodified=!1,this._center=i,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(i){i!==this._elevation&&(this._elevation=i,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(i){this._edgeInsets.equals(i)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,i,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(i){return this._edgeInsets.equals(i)}interpolatePadding(i,c,p){this._unmodified=!1,this._edgeInsets.interpolate(i,c,p),this._constrain(),this._calcMatrices()}coveringZoomLevel(i){const c=(i.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/i.tileSize));return Math.max(0,c)}getVisibleUnwrappedCoordinates(i){const c=[new o.b6(0,i)];if(this._renderWorldCopies){const p=this.pointCoordinate(new o.P(0,0)),g=this.pointCoordinate(new o.P(this.width,0)),x=this.pointCoordinate(new o.P(this.width,this.height)),E=this.pointCoordinate(new o.P(0,this.height)),T=Math.floor(Math.min(p.x,g.x,x.x,E.x)),k=Math.floor(Math.max(p.x,g.x,x.x,E.x)),R=1;for(let L=T-R;L<=k+R;L++)L!==0&&c.push(new o.b6(L,i))}return c}coveringTiles(i){var c,p;let g=this.coveringZoomLevel(i);const x=g;if(i.minzoom!==void 0&&g<i.minzoom)return[];i.maxzoom!==void 0&&g>i.maxzoom&&(g=i.maxzoom);const E=this.pointCoordinate(this.getCameraPoint()),T=o.U.fromLngLat(this.center),k=Math.pow(2,g),R=[k*E.x,k*E.y,0],L=[k*T.x,k*T.y,0],z=Kr.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,g);let Z=i.minzoom||0;!i.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(Z=g);const re=i.terrain?2/Math.min(this.tileSize,i.tileSize)*this.tileSize:3,ne=ce=>({aabb:new Io([ce*k,0,0],[(ce+1)*k,k,0]),zoom:0,x:0,y:0,wrap:ce,fullyVisible:!1}),se=[],ee=[],ye=g,Te=i.reparseOverscaled?x:g;if(this._renderWorldCopies)for(let ce=1;ce<=3;ce++)se.push(ne(-ce)),se.push(ne(ce));for(se.push(ne(0));se.length>0;){const ce=se.pop(),xe=ce.x,Ae=ce.y;let ke=ce.fullyVisible;if(!ke){const gt=ce.aabb.intersects(z);if(gt===0)continue;ke=gt===2}const ze=i.terrain?R:L,Ge=ce.aabb.distanceX(ze),Be=ce.aabb.distanceY(ze),We=Math.max(Math.abs(Ge),Math.abs(Be));if(ce.zoom===ye||We>re+(1<<ye-ce.zoom)-2&&ce.zoom>=Z){const gt=ye-ce.zoom,Ut=R[0]-.5-(xe<<gt),nt=R[1]-.5-(Ae<<gt);ee.push({tileID:new o.O(ce.zoom===ye?Te:ce.zoom,ce.wrap,ce.zoom,xe,Ae),distanceSq:Pe([L[0]-.5-xe,L[1]-.5-Ae]),tileDistanceToCamera:Math.sqrt(Ut*Ut+nt*nt)})}else for(let gt=0;gt<4;gt++){const Ut=(xe<<1)+gt%2,nt=(Ae<<1)+(gt>>1),kt=ce.zoom+1;let vt=ce.aabb.quadrant(gt);if(i.terrain){const an=new o.O(kt,ce.wrap,kt,Ut,nt),jt=i.terrain.getMinMaxElevation(an),Ft=(c=jt.minElevation)!==null&&c!==void 0?c:this.elevation,qt=(p=jt.maxElevation)!==null&&p!==void 0?p:this.elevation;vt=new Io([vt.min[0],vt.min[1],Ft],[vt.max[0],vt.max[1],qt])}se.push({aabb:vt,zoom:kt,x:Ut,y:nt,wrap:ce.wrap,fullyVisible:ke})}}return ee.sort((ce,xe)=>ce.distanceSq-xe.distanceSq).map(ce=>ce.tileID)}resize(i,c){this.width=i,this.height=c,this.pixelsToGLUnits=[2/i,-2/c],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(i){return Math.pow(2,i)}scaleZoom(i){return Math.log(i)/Math.LN2}project(i){const c=o.ad(i.lat,-this.maxValidLatitude,this.maxValidLatitude);return new o.P(o.G(i.lng)*this.worldSize,o.H(c)*this.worldSize)}unproject(i){return new o.U(i.x/this.worldSize,i.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(i){const c=this.pointLocation(this.centerPoint,i),p=i.getElevationForLngLatZoom(c,this.tileZoom);if(!(this.elevation-p))return;const g=this.getCameraPosition(),x=o.U.fromLngLat(g.lngLat,g.altitude),E=o.U.fromLngLat(c,p),T=x.x-E.x,k=x.y-E.y,R=x.z-E.z,L=Math.sqrt(T*T+k*k+R*R),z=this.scaleZoom(this.cameraToCenterDistance/L/this.tileSize);this._elevation=p,this._center=c,this.zoom=z}setLocationAtPoint(i,c){const p=this.pointCoordinate(c),g=this.pointCoordinate(this.centerPoint),x=this.locationCoordinate(i),E=new o.U(x.x-(p.x-g.x),x.y-(p.y-g.y));this.center=this.coordinateLocation(E),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(i,c){return c?this.coordinatePoint(this.locationCoordinate(i),c.getElevationForLngLatZoom(i,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(i))}pointLocation(i,c){return this.coordinateLocation(this.pointCoordinate(i,c))}locationCoordinate(i){return o.U.fromLngLat(i)}coordinateLocation(i){return i&&i.toLngLat()}pointCoordinate(i,c){if(c){const Z=c.pointCoordinate(i);if(Z!=null)return Z}const p=[i.x,i.y,0,1],g=[i.x,i.y,1,1];o.ag(p,p,this.pixelMatrixInverse),o.ag(g,g,this.pixelMatrixInverse);const x=p[3],E=g[3],T=p[1]/x,k=g[1]/E,R=p[2]/x,L=g[2]/E,z=R===L?0:(0-R)/(L-R);return new o.U(o.B.number(p[0]/x,g[0]/E,z)/this.worldSize,o.B.number(T,k,z)/this.worldSize)}coordinatePoint(i,c=0,p=this.pixelMatrix){const g=[i.x*this.worldSize,i.y*this.worldSize,c,1];return o.ag(g,g,p),new o.P(g[0]/g[3],g[1]/g[3])}getBounds(){const i=Math.max(0,this.height/2-this.getHorizon());return new It().extend(this.pointLocation(new o.P(0,i))).extend(this.pointLocation(new o.P(this.width,i))).extend(this.pointLocation(new o.P(this.width,this.height))).extend(this.pointLocation(new o.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new It([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(i){i?(this.lngRange=[i.getWest(),i.getEast()],this.latRange=[i.getSouth(),i.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(i,c=!1){const p=i.key,g=c?this._alignedPosMatrixCache:this._posMatrixCache;if(g[p])return g[p];const x=i.canonical,E=this.worldSize/this.zoomScale(x.z),T=x.x+Math.pow(2,x.z)*i.wrap,k=o.ao(new Float64Array(16));return o.$(k,k,[T*E,x.y*E,0]),o.a0(k,k,[E/o.N,E/o.N,1]),o.a1(k,c?this.alignedProjMatrix:this.projMatrix,k),g[p]=new Float32Array(k),g[p]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let i,c,p,g,x=-90,E=90,T=-180,k=180;const R=this.size,L=this._unmodified;if(this.latRange){const re=this.latRange;x=o.H(re[1])*this.worldSize,E=o.H(re[0])*this.worldSize,i=E-x<R.y?R.y/(E-x):0}if(this.lngRange){const re=this.lngRange;T=o.b5(o.G(re[0])*this.worldSize,0,this.worldSize),k=o.b5(o.G(re[1])*this.worldSize,0,this.worldSize),k<T&&(k+=this.worldSize),c=k-T<R.x?R.x/(k-T):0}const z=this.point,Z=Math.max(c||0,i||0);if(Z)return this.center=this.unproject(new o.P(c?(k+T)/2:z.x,i?(E+x)/2:z.y)),this.zoom+=this.scaleZoom(Z),this._unmodified=L,void(this._constraining=!1);if(this.latRange){const re=z.y,ne=R.y/2;re-ne<x&&(g=x+ne),re+ne>E&&(g=E-ne)}if(this.lngRange){const re=(T+k)/2,ne=o.b5(z.x,re-this.worldSize/2,re+this.worldSize/2),se=R.x/2;ne-se<T&&(p=T+se),ne+se>k&&(p=k-se)}p===void 0&&g===void 0||(this.center=this.unproject(new o.P(p!==void 0?p:z.x,g!==void 0?g:z.y)).wrap()),this._unmodified=L,this._constraining=!1}_calcMatrices(){if(!this.height)return;const i=this.centerOffset,c=this.point.x,p=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=o.b7(1,this.center.lat)*this.worldSize;let g=o.ao(new Float64Array(16));o.a0(g,g,[this.width/2,-this.height/2,1]),o.$(g,g,[1,-1,0]),this.labelPlaneMatrix=g,g=o.ao(new Float64Array(16)),o.a0(g,g,[1,-1,1]),o.$(g,g,[-1,-1,0]),o.a0(g,g,[2/this.width,2/this.height,1]),this.glCoordMatrix=g;const x=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),E=Math.min(this.elevation,this._minEleveationForCurrentTile),T=x-E*this._pixelPerMeter/Math.cos(this._pitch),k=E<0?T:x,R=Math.PI/2+this._pitch,L=this._fov*(.5+i.y/this.height),z=Math.sin(L)*k/Math.sin(o.ad(Math.PI-R-L,.01,Math.PI-.01)),Z=this.getHorizon(),re=2*Math.atan(Z/this.cameraToCenterDistance)*(.5+i.y/(2*Z)),ne=Math.sin(re)*k/Math.sin(o.ad(Math.PI-R-re,.01,Math.PI-.01)),se=Math.min(z,ne),ee=1.01*(Math.cos(Math.PI/2-this._pitch)*se+k),ye=this.height/50;g=new Float64Array(16),o.b8(g,this._fov,this.width/this.height,ye,ee),g[8]=2*-i.x/this.width,g[9]=2*i.y/this.height,o.a0(g,g,[1,-1,1]),o.$(g,g,[0,0,-this.cameraToCenterDistance]),o.b9(g,g,this._pitch),o.ae(g,g,this.angle),o.$(g,g,[-c,-p,0]),this.mercatorMatrix=o.a0([],g,[this.worldSize,this.worldSize,this.worldSize]),o.a0(g,g,[1,1,this._pixelPerMeter]),this.pixelMatrix=o.a1(new Float64Array(16),this.labelPlaneMatrix,g),o.$(g,g,[0,0,-this.elevation]),this.projMatrix=g,this.invProjMatrix=o.as([],g),this.pixelMatrix3D=o.a1(new Float64Array(16),this.labelPlaneMatrix,g);const Te=this.width%2/2,ce=this.height%2/2,xe=Math.cos(this.angle),Ae=Math.sin(this.angle),ke=c-Math.round(c)+xe*Te+Ae*ce,ze=p-Math.round(p)+xe*ce+Ae*Te,Ge=new Float64Array(g);if(o.$(Ge,Ge,[ke>.5?ke-1:ke,ze>.5?ze-1:ze,0]),this.alignedProjMatrix=Ge,g=o.as(new Float64Array(16),this.pixelMatrix),!g)throw new Error("failed to invert matrix");this.pixelMatrixInverse=g,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const i=this.pointCoordinate(new o.P(0,0)),c=[i.x*this.worldSize,i.y*this.worldSize,0,1];return o.ag(c,c,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const i=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new o.P(0,i))}getCameraQueryGeometry(i){const c=this.getCameraPoint();if(i.length===1)return[i[0],c];{let p=c.x,g=c.y,x=c.x,E=c.y;for(const T of i)p=Math.min(p,T.x),g=Math.min(g,T.y),x=Math.max(x,T.x),E=Math.max(E,T.y);return[new o.P(p,g),new o.P(x,g),new o.P(x,E),new o.P(p,E),new o.P(p,g)]}}}function Na(y,i){let c,p=!1,g=null,x=null;const E=()=>{g=null,p&&(y.apply(x,c),g=setTimeout(E,i),p=!1)};return(...T)=>(p=!0,x=this,c=T,g||E(),g)}class Bl{constructor(i){this._getCurrentHash=()=>{const c=window.location.hash.replace("#","");if(this._hashName){let p;return c.split("&").map(g=>g.split("=")).forEach(g=>{g[0]===this._hashName&&(p=g)}),(p&&p[1]||"").split("/")}return c.split("/")},this._onHashChange=()=>{const c=this._getCurrentHash();if(c.length>=3&&!c.some(p=>isNaN(p))){const p=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(c[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+c[2],+c[1]],zoom:+c[0],bearing:p,pitch:+(c[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const c=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,c)}catch{}},this._updateHash=Na(this._updateHashUnthrottled,300),this._hashName=i&&encodeURIComponent(i)}addTo(i){return this._map=i,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(i){const c=this._map.getCenter(),p=Math.round(100*this._map.getZoom())/100,g=Math.ceil((p*Math.LN2+Math.log(512/360/.5))/Math.LN10),x=Math.pow(10,g),E=Math.round(c.lng*x)/x,T=Math.round(c.lat*x)/x,k=this._map.getBearing(),R=this._map.getPitch();let L="";if(L+=i?`/${E}/${T}/${p}`:`${p}/${T}/${E}`,(k||R)&&(L+="/"+Math.round(10*k)/10),R&&(L+=`/${Math.round(R)}`),this._hashName){const z=this._hashName;let Z=!1;const re=window.location.hash.slice(1).split("&").map(ne=>{const se=ne.split("=")[0];return se===z?(Z=!0,`${se}=${L}`):ne}).filter(ne=>ne);return Z||re.push(`${z}=${L}`),`#${re.join("&")}`}return`#${L}`}}const Mo={linearity:.3,easing:o.ba(0,0,.3,1)},wp=o.e({deceleration:2500,maxSpeed:1400},Mo),bp=o.e({deceleration:20,maxSpeed:1400},Mo),Sp=o.e({deceleration:1e3,maxSpeed:360},Mo),Ep=o.e({deceleration:1e3,maxSpeed:90},Mo);class Tp{constructor(i){this._map=i,this.clear()}clear(){this._inertiaBuffer=[]}record(i){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:o.h.now(),settings:i})}_drainInertiaBuffer(){const i=this._inertiaBuffer,c=o.h.now();for(;i.length>0&&c-i[0].time>160;)i.shift()}_onMoveEnd(i){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const c={zoom:0,bearing:0,pitch:0,pan:new o.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:x}of this._inertiaBuffer)c.zoom+=x.zoomDelta||0,c.bearing+=x.bearingDelta||0,c.pitch+=x.pitchDelta||0,x.panDelta&&c.pan._add(x.panDelta),x.around&&(c.around=x.around),x.pinchAround&&(c.pinchAround=x.pinchAround);const p=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,g={};if(c.pan.mag()){const x=Vl(c.pan.mag(),p,o.e({},wp,i||{}));g.offset=c.pan.mult(x.amount/c.pan.mag()),g.center=this._map.transform.center,fs(g,x)}if(c.zoom){const x=Vl(c.zoom,p,bp);g.zoom=this._map.transform.zoom+x.amount,fs(g,x)}if(c.bearing){const x=Vl(c.bearing,p,Sp);g.bearing=this._map.transform.bearing+o.ad(x.amount,-179,179),fs(g,x)}if(c.pitch){const x=Vl(c.pitch,p,Ep);g.pitch=this._map.transform.pitch+x.amount,fs(g,x)}if(g.zoom||g.bearing){const x=c.pinchAround===void 0?c.around:c.pinchAround;g.around=x?this._map.unproject(x):this._map.getCenter()}return this.clear(),o.e(g,{noMoveStart:!0})}}function fs(y,i){(!y.duration||y.duration<i.duration)&&(y.duration=i.duration,y.easing=i.easing)}function Vl(y,i,c){const{maxSpeed:p,linearity:g,deceleration:x}=c,E=o.ad(y*g/(i/1e3),-p,p),T=Math.abs(E)/(x*g);return{easing:c.easing,duration:1e3*T,amount:E*(T/2)}}class gi extends o.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,c,p,g={}){const x=b.mousePos(c.getCanvasContainer(),p),E=c.unproject(x);super(i,o.e({point:x,lngLat:E,originalEvent:p},g)),this._defaultPrevented=!1,this.target=c}}class jl extends o.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,c,p){const g=i==="touchend"?p.changedTouches:p.touches,x=b.touchPos(c.getCanvasContainer(),g),E=x.map(k=>c.unproject(k)),T=x.reduce((k,R,L,z)=>k.add(R.div(z.length)),new o.P(0,0));super(i,{points:x,point:T,lngLats:E,lngLat:c.unproject(T),originalEvent:p}),this._defaultPrevented=!1}}class Cp extends o.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,c,p){super(i,{originalEvent:p}),this._defaultPrevented=!1}}class Pp{constructor(i,c){this._map=i,this._clickTolerance=c.clickTolerance}reset(){delete this._mousedownPos}wheel(i){return this._firePreventable(new Cp(i.type,this._map,i))}mousedown(i,c){return this._mousedownPos=c,this._firePreventable(new gi(i.type,this._map,i))}mouseup(i){this._map.fire(new gi(i.type,this._map,i))}click(i,c){this._mousedownPos&&this._mousedownPos.dist(c)>=this._clickTolerance||this._map.fire(new gi(i.type,this._map,i))}dblclick(i){return this._firePreventable(new gi(i.type,this._map,i))}mouseover(i){this._map.fire(new gi(i.type,this._map,i))}mouseout(i){this._map.fire(new gi(i.type,this._map,i))}touchstart(i){return this._firePreventable(new jl(i.type,this._map,i))}touchmove(i){this._map.fire(new jl(i.type,this._map,i))}touchend(i){this._map.fire(new jl(i.type,this._map,i))}touchcancel(i){this._map.fire(new jl(i.type,this._map,i))}_firePreventable(i){if(this._map.fire(i),i.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Ap{constructor(i){this._map=i}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(i){this._map.fire(new gi(i.type,this._map,i))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new gi("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(i){this._delayContextMenu?this._contextMenuEvent=i:this._ignoreContextMenu||this._map.fire(new gi(i.type,this._map,i)),this._map.listens("contextmenu")&&i.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Fs{constructor(i){this._map=i}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(i){return this.transform.pointLocation(o.P.convert(i),this._map.terrain)}}class kp{constructor(i,c){this._map=i,this._tr=new Fs(i),this._el=i.getCanvasContainer(),this._container=i.getContainer(),this._clickTolerance=c.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(i,c){this.isEnabled()&&i.shiftKey&&i.button===0&&(b.disableDrag(),this._startPos=this._lastPos=c,this._active=!0)}mousemoveWindow(i,c){if(!this._active)return;const p=c;if(this._lastPos.equals(p)||!this._box&&p.dist(this._startPos)<this._clickTolerance)return;const g=this._startPos;this._lastPos=p,this._box||(this._box=b.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",i));const x=Math.min(g.x,p.x),E=Math.max(g.x,p.x),T=Math.min(g.y,p.y),k=Math.max(g.y,p.y);b.setTransform(this._box,`translate(${x}px,${T}px)`),this._box.style.width=E-x+"px",this._box.style.height=k-T+"px"}mouseupWindow(i,c){if(!this._active||i.button!==0)return;const p=this._startPos,g=c;if(this.reset(),b.suppressClick(),p.x!==g.x||p.y!==g.y)return this._map.fire(new o.k("boxzoomend",{originalEvent:i})),{cameraAnimation:x=>x.fitScreenCoordinates(p,g,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",i)}keydown(i){this._active&&i.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",i))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(b.remove(this._box),this._box=null),b.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(i,c){return this._map.fire(new o.k(i,{originalEvent:c}))}}function Oi(y,i){if(y.length!==i.length)throw new Error(`The number of touches and points are not equal - touches ${y.length}, points ${i.length}`);const c={};for(let p=0;p<y.length;p++)c[y[p].identifier]=i[p];return c}class Ns{constructor(i){this.reset(),this.numTouches=i.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(i,c,p){(this.centroid||p.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=i.timeStamp),p.length===this.numTouches&&(this.centroid=function(g){const x=new o.P(0,0);for(const E of g)x._add(E);return x.div(g.length)}(c),this.touches=Oi(p,c)))}touchmove(i,c,p){if(this.aborted||!this.centroid)return;const g=Oi(p,c);for(const x in this.touches){const E=g[x];(!E||E.dist(this.touches[x])>30)&&(this.aborted=!0)}}touchend(i,c,p){if((!this.centroid||i.timeStamp-this.startTime>500)&&(this.aborted=!0),p.length===0){const g=!this.aborted&&this.centroid;if(this.reset(),g)return g}}}class Yu{constructor(i){this.singleTap=new Ns(i),this.numTaps=i.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(i,c,p){this.singleTap.touchstart(i,c,p)}touchmove(i,c,p){this.singleTap.touchmove(i,c,p)}touchend(i,c,p){const g=this.singleTap.touchend(i,c,p);if(g){const x=i.timeStamp-this.lastTime<500,E=!this.lastTap||this.lastTap.dist(g)<30;if(x&&E||this.reset(),this.count++,this.lastTime=i.timeStamp,this.lastTap=g,this.count===this.numTaps)return this.reset(),g}}}class Bs{constructor(i){this._tr=new Fs(i),this._zoomIn=new Yu({numTouches:1,numTaps:2}),this._zoomOut=new Yu({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(i,c,p){this._zoomIn.touchstart(i,c,p),this._zoomOut.touchstart(i,c,p)}touchmove(i,c,p){this._zoomIn.touchmove(i,c,p),this._zoomOut.touchmove(i,c,p)}touchend(i,c,p){const g=this._zoomIn.touchend(i,c,p),x=this._zoomOut.touchend(i,c,p),E=this._tr;return g?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:T=>T.easeTo({duration:300,zoom:E.zoom+1,around:E.unproject(g)},{originalEvent:i})}):x?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:T=>T.easeTo({duration:300,zoom:E.zoom-1,around:E.unproject(x)},{originalEvent:i})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Vs{constructor(i){this._enabled=!!i.enable,this._moveStateManager=i.moveStateManager,this._clickTolerance=i.clickTolerance||1,this._moveFunction=i.move,this._activateOnStart=!!i.activateOnStart,i.assignEvents(this),this.reset()}reset(i){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(i)}_move(...i){const c=this._moveFunction(...i);if(c.bearingDelta||c.pitchDelta||c.around||c.panDelta)return this._active=!0,c}dragStart(i,c){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(i)&&(this._moveStateManager.startMove(i),this._lastPoint=c.length?c[0]:c,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(i,c){if(!this.isEnabled())return;const p=this._lastPoint;if(!p)return;if(i.preventDefault(),!this._moveStateManager.isValidMoveEvent(i))return void this.reset(i);const g=c.length?c[0]:c;return!this._moved&&g.dist(p)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=g,this._move(p,g))}dragEnd(i){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(i)&&(this._moved&&b.suppressClick(),this.reset(i))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Pv={0:1,2:2};class jh{constructor(i){this._correctEvent=i.checkCorrectEvent}startMove(i){const c=b.mouseButton(i);this._eventButton=c}endMove(i){delete this._eventButton}isValidStartEvent(i){return this._correctEvent(i)}isValidMoveEvent(i){return!function(c,p){const g=Pv[p];return c.buttons===void 0||(c.buttons&g)!==g}(i,this._eventButton)}isValidEndEvent(i){return b.mouseButton(i)===this._eventButton}}class Ip{constructor(){this._firstTouch=void 0}_isOneFingerTouch(i){return i.targetTouches.length===1}_isSameTouchEvent(i){return i.targetTouches[0].identifier===this._firstTouch}startMove(i){this._firstTouch=i.targetTouches[0].identifier}endMove(i){delete this._firstTouch}isValidStartEvent(i){return this._isOneFingerTouch(i)}isValidMoveEvent(i){return this._isOneFingerTouch(i)&&this._isSameTouchEvent(i)}isValidEndEvent(i){return this._isOneFingerTouch(i)&&this._isSameTouchEvent(i)}}const Ju=y=>{y.mousedown=y.dragStart,y.mousemoveWindow=y.dragMove,y.mouseup=y.dragEnd,y.contextmenu=function(i){i.preventDefault()}},Ro=({enable:y,clickTolerance:i,bearingDegreesPerPixelMoved:c=.8})=>{const p=new jh({checkCorrectEvent:g=>b.mouseButton(g)===0&&g.ctrlKey||b.mouseButton(g)===2});return new Vs({clickTolerance:i,move:(g,x)=>({bearingDelta:(x.x-g.x)*c}),moveStateManager:p,enable:y,assignEvents:Ju})},js=({enable:y,clickTolerance:i,pitchDegreesPerPixelMoved:c=-.5})=>{const p=new jh({checkCorrectEvent:g=>b.mouseButton(g)===0&&g.ctrlKey||b.mouseButton(g)===2});return new Vs({clickTolerance:i,move:(g,x)=>({pitchDelta:(x.y-g.y)*c}),moveStateManager:p,enable:y,assignEvents:Ju})};class ht{constructor(i,c){this._minTouches=i.cooperativeGestures?2:1,this._clickTolerance=i.clickTolerance||1,this._map=c,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new o.P(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(i,c,p){return this._calculateTransform(i,c,p)}touchmove(i,c,p){if(this._map._cooperativeGestures&&(this._minTouches===2&&p.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(i,!1,p.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(p.length<this._minTouches))return i.preventDefault(),this._calculateTransform(i,c,p)}touchend(i,c,p){this._calculateTransform(i,c,p),this._active&&p.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(i,c,p){p.length>0&&(this._active=!0);const g=Oi(p,c),x=new o.P(0,0),E=new o.P(0,0);let T=0;for(const R in g){const L=g[R],z=this._touches[R];z&&(x._add(L),E._add(L.sub(z)),T++,g[R]=L)}if(this._touches=g,T<this._minTouches||!E.mag())return;const k=E.div(T);return this._sum._add(k),this._sum.mag()<this._clickTolerance?void 0:{around:x.div(T),panDelta:k}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ec{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(i,c,p){this._firstTwoTouches||p.length<2||(this._firstTwoTouches=[p[0].identifier,p[1].identifier],this._start([c[0],c[1]]))}touchmove(i,c,p){if(!this._firstTwoTouches)return;i.preventDefault();const[g,x]=this._firstTwoTouches,E=pa(p,c,g),T=pa(p,c,x);if(!E||!T)return;const k=this._aroundCenter?null:E.add(T).div(2);return this._move([E,T],k,i)}touchend(i,c,p){if(!this._firstTwoTouches)return;const[g,x]=this._firstTwoTouches,E=pa(p,c,g),T=pa(p,c,x);E&&T||(this._active&&b.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(i){this._enabled=!0,this._aroundCenter=!!i&&i.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function pa(y,i,c){for(let p=0;p<y.length;p++)if(y[p].identifier===c)return i[p]}function Do(y,i){return Math.log(y/i)/Math.LN2}class Mp extends ec{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(i){this._startDistance=this._distance=i[0].dist(i[1])}_move(i,c){const p=this._distance;if(this._distance=i[0].dist(i[1]),this._active||!(Math.abs(Do(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Do(this._distance,p),pinchAround:c}}}function ot(y,i){return 180*y.angleWith(i)/Math.PI}class $h extends ec{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(i){this._startVector=this._vector=i[0].sub(i[1]),this._minDiameter=i[0].dist(i[1])}_move(i,c){const p=this._vector;if(this._vector=i[0].sub(i[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:ot(this._vector,p),pinchAround:c}}_isBelowThreshold(i){this._minDiameter=Math.min(this._minDiameter,i.mag());const c=25/(Math.PI*this._minDiameter)*360,p=ot(i,this._startVector);return Math.abs(p)<c}}function Uh(y){return Math.abs(y.y)>Math.abs(y.x)}class Av extends ec{constructor(i){super(),this._map=i}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(i,c,p){super.touchstart(i,c,p),this._currentTouchCount=p.length}_start(i){this._lastPoints=i,Uh(i[0].sub(i[1]))&&(this._valid=!1)}_move(i,c,p){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const g=i[0].sub(this._lastPoints[0]),x=i[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(g,x,p.timeStamp),this._valid?(this._lastPoints=i,this._active=!0,{pitchDelta:(g.y+x.y)/2*-.5}):void 0}gestureBeginsVertically(i,c,p){if(this._valid!==void 0)return this._valid;const g=i.mag()>=2,x=c.mag()>=2;if(!g&&!x)return;if(!g||!x)return this._firstMove===void 0&&(this._firstMove=p),p-this._firstMove<100&&void 0;const E=i.y>0==c.y>0;return Uh(i)&&Uh(c)&&E}}const qh={panStep:100,bearingStep:15,pitchStep:10};class Rp{constructor(i){this._tr=new Fs(i);const c=qh;this._panStep=c.panStep,this._bearingStep=c.bearingStep,this._pitchStep=c.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(i){if(i.altKey||i.ctrlKey||i.metaKey)return;let c=0,p=0,g=0,x=0,E=0;switch(i.keyCode){case 61:case 107:case 171:case 187:c=1;break;case 189:case 109:case 173:c=-1;break;case 37:i.shiftKey?p=-1:(i.preventDefault(),x=-1);break;case 39:i.shiftKey?p=1:(i.preventDefault(),x=1);break;case 38:i.shiftKey?g=1:(i.preventDefault(),E=-1);break;case 40:i.shiftKey?g=-1:(i.preventDefault(),E=1);break;default:return}return this._rotationDisabled&&(p=0,g=0),{cameraAnimation:T=>{const k=this._tr;T.easeTo({duration:300,easeId:"keyboardHandler",easing:Dp,zoom:c?Math.round(k.zoom)+c*(i.shiftKey?2:1):k.zoom,bearing:k.bearing+p*this._bearingStep,pitch:k.pitch+g*this._pitchStep,offset:[-x*this._panStep,-E*this._panStep],center:k.center},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Dp(y){return y*(2-y)}const Lp=4.000244140625;class kv{constructor(i,c){this._onTimeout=p=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(p)},this._map=i,this._tr=new Fs(i),this._el=i.getCanvasContainer(),this._triggerRenderFrame=c,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(i){this._defaultZoomRate=i}setWheelZoomRate(i){this._wheelZoomRate=i}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(i){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!i&&i.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(i){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!i[this._map._metaKey])return;i.preventDefault()}let c=i.deltaMode===WheelEvent.DOM_DELTA_LINE?40*i.deltaY:i.deltaY;const p=o.h.now(),g=p-(this._lastWheelEventTime||0);this._lastWheelEventTime=p,c!==0&&c%Lp==0?this._type="wheel":c!==0&&Math.abs(c)<4?this._type="trackpad":g>400?(this._type=null,this._lastValue=c,this._timeout=setTimeout(this._onTimeout,40,i)):this._type||(this._type=Math.abs(g*c)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,c+=this._lastValue)),i.shiftKey&&c&&(c/=4),this._type&&(this._lastWheelEvent=i,this._delta-=c,this._active||this._start(i)),i.preventDefault()}_start(i){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const c=b.mousePos(this._el,i),p=this._tr;this._around=o.L.convert(this._aroundCenter?p.center:p.unproject(c)),this._aroundPoint=p.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const i=this._tr.transform;if(this._delta!==0){const T=this._type==="wheel"&&Math.abs(this._delta)>Lp?this._wheelZoomRate:this._defaultZoomRate;let k=2/(1+Math.exp(-Math.abs(this._delta*T)));this._delta<0&&k!==0&&(k=1/k);const R=typeof this._targetZoom=="number"?i.zoomScale(this._targetZoom):i.scale;this._targetZoom=Math.min(i.maxZoom,Math.max(i.minZoom,i.scaleZoom(R*k))),this._type==="wheel"&&(this._startZoom=i.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const c=typeof this._targetZoom=="number"?this._targetZoom:i.zoom,p=this._startZoom,g=this._easing;let x,E=!1;if(this._type==="wheel"&&p&&g){const T=Math.min((o.h.now()-this._lastWheelEventTime)/200,1),k=g(T);x=o.B.number(p,c,k),T<1?this._frameId||(this._frameId=!0):E=!0}else x=c,E=!0;return this._active=!0,E&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!E,zoomDelta:x-i.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(i){let c=o.bb;if(this._prevEase){const p=this._prevEase,g=(o.h.now()-p.start)/p.duration,x=p.easing(g+.01)-p.easing(g),E=.27/Math.sqrt(x*x+1e-4)*.01,T=Math.sqrt(.0729-E*E);c=o.ba(E,T,.25,1)}return this._prevEase={start:o.h.now(),duration:i,easing:c},c}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Gh{constructor(i,c){this._clickZoom=i,this._tapZoom=c}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Zh{constructor(i){this._tr=new Fs(i),this.reset()}reset(){this._active=!1}dblclick(i,c){return i.preventDefault(),{cameraAnimation:p=>{p.easeTo({duration:300,zoom:this._tr.zoom+(i.shiftKey?-1:1),around:this._tr.unproject(c)},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Wh{constructor(){this._tap=new Yu({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(i,c,p){if(!this._swipePoint)if(this._tapTime){const g=c[0],x=i.timeStamp-this._tapTime<500,E=this._tapPoint.dist(g)<30;x&&E?p.length>0&&(this._swipePoint=g,this._swipeTouch=p[0].identifier):this.reset()}else this._tap.touchstart(i,c,p)}touchmove(i,c,p){if(this._tapTime){if(this._swipePoint){if(p[0].identifier!==this._swipeTouch)return;const g=c[0],x=g.y-this._swipePoint.y;return this._swipePoint=g,i.preventDefault(),this._active=!0,{zoomDelta:x/128}}}else this._tap.touchmove(i,c,p)}touchend(i,c,p){if(this._tapTime)this._swipePoint&&p.length===0&&this.reset();else{const g=this._tap.touchend(i,c,p);g&&(this._tapTime=i.timeStamp,this._tapPoint=g)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Hh{constructor(i,c,p){this._el=i,this._mousePan=c,this._touchPan=p}enable(i){this._inertiaOptions=i||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Xr{constructor(i,c,p){this._pitchWithRotate=i.pitchWithRotate,this._mouseRotate=c,this._mousePitch=p}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class ma{constructor(i,c,p,g){this._el=i,this._touchZoom=c,this._touchRotate=p,this._tapDragZoom=g,this._rotationDisabled=!1,this._enabled=!0}enable(i){this._touchZoom.enable(i),this._rotationDisabled||this._touchRotate.enable(i),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const $l=y=>y.zoom||y.drag||y.pitch||y.rotate;class Kh extends o.k{}function Ul(y){return y.panDelta&&y.panDelta.mag()||y.zoomDelta||y.bearingDelta||y.pitchDelta}class Xh{constructor(i,c){this.handleWindowEvent=g=>{this.handleEvent(g,`${g.type}Window`)},this.handleEvent=(g,x)=>{if(g.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const E=g.type==="renderFrame"?void 0:g,T={needsRenderFrame:!1},k={},R={},L=g.touches,z=L?this._getMapTouches(L):void 0,Z=z?b.touchPos(this._el,z):b.mousePos(this._el,g);for(const{handlerName:se,handler:ee,allowed:ye}of this._handlers){if(!ee.isEnabled())continue;let Te;this._blockedByActive(R,ye,se)?ee.reset():ee[x||g.type]&&(Te=ee[x||g.type](g,Z,z),this.mergeHandlerResult(T,k,Te,se,E),Te&&Te.needsRenderFrame&&this._triggerRenderFrame()),(Te||ee.isActive())&&(R[se]=ee)}const re={};for(const se in this._previousActiveHandlers)R[se]||(re[se]=E);this._previousActiveHandlers=R,(Object.keys(re).length||Ul(T))&&(this._changes.push([T,k,re]),this._triggerRenderFrame()),(Object.keys(R).length||Ul(T))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:ne}=T;ne&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ne(this._map))},this._map=i,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Tp(i),this._bearingSnap=c.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(c);const p=this._el;this._listeners=[[p,"touchstart",{passive:!0}],[p,"touchmove",{passive:!1}],[p,"touchend",void 0],[p,"touchcancel",void 0],[p,"mousedown",void 0],[p,"mousemove",void 0],[p,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[p,"mouseover",void 0],[p,"mouseout",void 0],[p,"dblclick",void 0],[p,"click",void 0],[p,"keydown",{capture:!1}],[p,"keyup",void 0],[p,"wheel",{passive:!1}],[p,"contextmenu",void 0],[window,"blur",void 0]];for(const[g,x,E]of this._listeners)b.addEventListener(g,x,g===document?this.handleWindowEvent:this.handleEvent,E)}destroy(){for(const[i,c,p]of this._listeners)b.removeEventListener(i,c,i===document?this.handleWindowEvent:this.handleEvent,p)}_addDefaultHandlers(i){const c=this._map,p=c.getCanvasContainer();this._add("mapEvent",new Pp(c,i));const g=c.boxZoom=new kp(c,i);this._add("boxZoom",g),i.interactive&&i.boxZoom&&g.enable();const x=new Bs(c),E=new Zh(c);c.doubleClickZoom=new Gh(E,x),this._add("tapZoom",x),this._add("clickZoom",E),i.interactive&&i.doubleClickZoom&&c.doubleClickZoom.enable();const T=new Wh;this._add("tapDragZoom",T);const k=c.touchPitch=new Av(c);this._add("touchPitch",k),i.interactive&&i.touchPitch&&c.touchPitch.enable(i.touchPitch);const R=Ro(i),L=js(i);c.dragRotate=new Xr(i,R,L),this._add("mouseRotate",R,["mousePitch"]),this._add("mousePitch",L,["mouseRotate"]),i.interactive&&i.dragRotate&&c.dragRotate.enable();const z=(({enable:ye,clickTolerance:Te})=>{const ce=new jh({checkCorrectEvent:xe=>b.mouseButton(xe)===0&&!xe.ctrlKey});return new Vs({clickTolerance:Te,move:(xe,Ae)=>({around:Ae,panDelta:Ae.sub(xe)}),activateOnStart:!0,moveStateManager:ce,enable:ye,assignEvents:Ju})})(i),Z=new ht(i,c);c.dragPan=new Hh(p,z,Z),this._add("mousePan",z),this._add("touchPan",Z,["touchZoom","touchRotate"]),i.interactive&&i.dragPan&&c.dragPan.enable(i.dragPan);const re=new $h,ne=new Mp;c.touchZoomRotate=new ma(p,ne,re,T),this._add("touchRotate",re,["touchPan","touchZoom"]),this._add("touchZoom",ne,["touchPan","touchRotate"]),i.interactive&&i.touchZoomRotate&&c.touchZoomRotate.enable(i.touchZoomRotate);const se=c.scrollZoom=new kv(c,()=>this._triggerRenderFrame());this._add("scrollZoom",se,["mousePan"]),i.interactive&&i.scrollZoom&&c.scrollZoom.enable(i.scrollZoom);const ee=c.keyboard=new Rp(c);this._add("keyboard",ee),i.interactive&&i.keyboard&&c.keyboard.enable(),this._add("blockableMapEvent",new Ap(c))}_add(i,c,p){this._handlers.push({handlerName:i,handler:c,allowed:p}),this._handlersById[i]=c}stop(i){if(!this._updatingCamera){for(const{handler:c}of this._handlers)c.reset();this._inertia.clear(),this._fireEvents({},{},i),this._changes=[]}}isActive(){for(const{handler:i}of this._handlers)if(i.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!$l(this._eventsInProgress)||this.isZooming()}_blockedByActive(i,c,p){for(const g in i)if(g!==p&&(!c||c.indexOf(g)<0))return!0;return!1}_getMapTouches(i){const c=[];for(const p of i)this._el.contains(p.target)&&c.push(p);return c}mergeHandlerResult(i,c,p,g,x){if(!p)return;o.e(i,p);const E={handlerName:g,originalEvent:p.originalEvent||x};p.zoomDelta!==void 0&&(c.zoom=E),p.panDelta!==void 0&&(c.drag=E),p.pitchDelta!==void 0&&(c.pitch=E),p.bearingDelta!==void 0&&(c.rotate=E)}_applyChanges(){const i={},c={},p={};for(const[g,x,E]of this._changes)g.panDelta&&(i.panDelta=(i.panDelta||new o.P(0,0))._add(g.panDelta)),g.zoomDelta&&(i.zoomDelta=(i.zoomDelta||0)+g.zoomDelta),g.bearingDelta&&(i.bearingDelta=(i.bearingDelta||0)+g.bearingDelta),g.pitchDelta&&(i.pitchDelta=(i.pitchDelta||0)+g.pitchDelta),g.around!==void 0&&(i.around=g.around),g.pinchAround!==void 0&&(i.pinchAround=g.pinchAround),g.noInertia&&(i.noInertia=g.noInertia),o.e(c,x),o.e(p,E);this._updateMapTransform(i,c,p),this._changes=[]}_updateMapTransform(i,c,p){const g=this._map,x=g._getTransformForUpdate(),E=g.terrain;if(!(Ul(i)||E&&this._terrainMovement))return this._fireEvents(c,p,!0);let{panDelta:T,zoomDelta:k,bearingDelta:R,pitchDelta:L,around:z,pinchAround:Z}=i;Z!==void 0&&(z=Z),g._stop(!0),z=z||g.transform.centerPoint;const re=x.pointLocation(T?z.sub(T):z);R&&(x.bearing+=R),L&&(x.pitch+=L),k&&(x.zoom+=k),E?this._terrainMovement||!c.drag&&!c.zoom?c.drag&&this._terrainMovement?x.center=x.pointLocation(x.centerPoint.sub(T)):x.setLocationAtPoint(re,z):(this._terrainMovement=!0,this._map._elevationFreeze=!0,x.setLocationAtPoint(re,z),this._map.once("moveend",()=>{this._map._elevationFreeze=!1,this._terrainMovement=!1,x.recalculateZoom(g.terrain)})):x.setLocationAtPoint(re,z),g._applyUpdatedTransform(x),this._map._update(),i.noInertia||this._inertia.record(i),this._fireEvents(c,p,!0)}_fireEvents(i,c,p){const g=$l(this._eventsInProgress),x=$l(i),E={};for(const L in i){const{originalEvent:z}=i[L];this._eventsInProgress[L]||(E[`${L}start`]=z),this._eventsInProgress[L]=i[L]}!g&&x&&this._fireEvent("movestart",x.originalEvent);for(const L in E)this._fireEvent(L,E[L]);x&&this._fireEvent("move",x.originalEvent);for(const L in i){const{originalEvent:z}=i[L];this._fireEvent(L,z)}const T={};let k;for(const L in this._eventsInProgress){const{handlerName:z,originalEvent:Z}=this._eventsInProgress[L];this._handlersById[z].isActive()||(delete this._eventsInProgress[L],k=c[z]||Z,T[`${L}end`]=k)}for(const L in T)this._fireEvent(L,T[L]);const R=$l(this._eventsInProgress);if(p&&(g||x)&&!R){this._updatingCamera=!0;const L=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),z=Z=>Z!==0&&-this._bearingSnap<Z&&Z<this._bearingSnap;!L||!L.essential&&o.h.prefersReducedMotion?(this._map.fire(new o.k("moveend",{originalEvent:k})),z(this._map.getBearing())&&this._map.resetNorth()):(z(L.bearing||this._map.getBearing())&&(L.bearing=0),L.freezeElevation=!0,this._map.easeTo(L,{originalEvent:k})),this._updatingCamera=!1}}_fireEvent(i,c){this._map.fire(new o.k(i,c?{originalEvent:c}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(i=>{delete this._frameId,this.handleEvent(new Kh("renderFrame",{timeStamp:i})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class zp extends o.E{constructor(i,c){super(),this._renderFrameCallback=()=>{const p=Math.min((o.h.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(p)),p<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=i,this._bearingSnap=c.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new o.L(this.transform.center.lng,this.transform.center.lat)}setCenter(i,c){return this.jumpTo({center:i},c)}panBy(i,c,p){return i=o.P.convert(i).mult(-1),this.panTo(this.transform.center,o.e({offset:i},c),p)}panTo(i,c,p){return this.easeTo(o.e({center:i},c),p)}getZoom(){return this.transform.zoom}setZoom(i,c){return this.jumpTo({zoom:i},c),this}zoomTo(i,c,p){return this.easeTo(o.e({zoom:i},c),p)}zoomIn(i,c){return this.zoomTo(this.getZoom()+1,i,c),this}zoomOut(i,c){return this.zoomTo(this.getZoom()-1,i,c),this}getBearing(){return this.transform.bearing}setBearing(i,c){return this.jumpTo({bearing:i},c),this}getPadding(){return this.transform.padding}setPadding(i,c){return this.jumpTo({padding:i},c),this}rotateTo(i,c,p){return this.easeTo(o.e({bearing:i},c),p)}resetNorth(i,c){return this.rotateTo(0,o.e({duration:1e3},i),c),this}resetNorthPitch(i,c){return this.easeTo(o.e({bearing:0,pitch:0,duration:1e3},i),c),this}snapToNorth(i,c){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(i,c):this}getPitch(){return this.transform.pitch}setPitch(i,c){return this.jumpTo({pitch:i},c),this}cameraForBounds(i,c){i=It.convert(i);const p=c&&c.bearing||0;return this._cameraForBoxAndBearing(i.getNorthWest(),i.getSouthEast(),p,c)}_cameraForBoxAndBearing(i,c,p,g){const x={top:0,bottom:0,right:0,left:0};if(typeof(g=o.e({padding:x,offset:[0,0],maxZoom:this.transform.maxZoom},g)).padding=="number"){const Ae=g.padding;g.padding={top:Ae,bottom:Ae,right:Ae,left:Ae}}g.padding=o.e(x,g.padding);const E=this.transform,T=E.padding,k=E.project(o.L.convert(i)),R=E.project(o.L.convert(c)),L=k.rotate(-p*Math.PI/180),z=R.rotate(-p*Math.PI/180),Z=new o.P(Math.max(L.x,z.x),Math.max(L.y,z.y)),re=new o.P(Math.min(L.x,z.x),Math.min(L.y,z.y)),ne=Z.sub(re),se=(E.width-(T.left+T.right+g.padding.left+g.padding.right))/ne.x,ee=(E.height-(T.top+T.bottom+g.padding.top+g.padding.bottom))/ne.y;if(ee<0||se<0)return void o.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const ye=Math.min(E.scaleZoom(E.scale*Math.min(se,ee)),g.maxZoom),Te=o.P.convert(g.offset),ce=new o.P((g.padding.left-g.padding.right)/2,(g.padding.top-g.padding.bottom)/2).rotate(p*Math.PI/180),xe=Te.add(ce).mult(E.scale/E.zoomScale(ye));return{center:E.unproject(k.add(R).div(2).sub(xe)),zoom:ye,bearing:p}}fitBounds(i,c,p){return this._fitInternal(this.cameraForBounds(i,c),c,p)}fitScreenCoordinates(i,c,p,g,x){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(o.P.convert(i)),this.transform.pointLocation(o.P.convert(c)),p,g),g,x)}_fitInternal(i,c,p){return i?(delete(c=o.e(i,c)).padding,c.linear?this.easeTo(c,p):this.flyTo(c,p)):this}jumpTo(i,c){this.stop();const p=this._getTransformForUpdate();let g=!1,x=!1,E=!1;return"zoom"in i&&p.zoom!==+i.zoom&&(g=!0,p.zoom=+i.zoom),i.center!==void 0&&(p.center=o.L.convert(i.center)),"bearing"in i&&p.bearing!==+i.bearing&&(x=!0,p.bearing=+i.bearing),"pitch"in i&&p.pitch!==+i.pitch&&(E=!0,p.pitch=+i.pitch),i.padding==null||p.isPaddingEqual(i.padding)||(p.padding=i.padding),this._applyUpdatedTransform(p),this.fire(new o.k("movestart",c)).fire(new o.k("move",c)),g&&this.fire(new o.k("zoomstart",c)).fire(new o.k("zoom",c)).fire(new o.k("zoomend",c)),x&&this.fire(new o.k("rotatestart",c)).fire(new o.k("rotate",c)).fire(new o.k("rotateend",c)),E&&this.fire(new o.k("pitchstart",c)).fire(new o.k("pitch",c)).fire(new o.k("pitchend",c)),this.fire(new o.k("moveend",c))}calculateCameraOptionsFromTo(i,c,p,g=0){const x=o.U.fromLngLat(i,c),E=o.U.fromLngLat(p,g),T=E.x-x.x,k=E.y-x.y,R=E.z-x.z,L=Math.hypot(T,k,R);if(L===0)throw new Error("Can't calculate camera options with same From and To");const z=Math.hypot(T,k),Z=this.transform.scaleZoom(this.transform.cameraToCenterDistance/L/this.transform.tileSize),re=180*Math.atan2(T,-k)/Math.PI;let ne=180*Math.acos(z/L)/Math.PI;return ne=R<0?90-ne:90+ne,{center:E.toLngLat(),zoom:Z,pitch:ne,bearing:re}}easeTo(i,c){this._stop(!1,i.easeId),((i=o.e({offset:[0,0],duration:500,easing:o.bb},i)).animate===!1||!i.essential&&o.h.prefersReducedMotion)&&(i.duration=0);const p=this._getTransformForUpdate(),g=this.getZoom(),x=this.getBearing(),E=this.getPitch(),T=this.getPadding(),k="zoom"in i?+i.zoom:g,R="bearing"in i?this._normalizeBearing(i.bearing,x):x,L="pitch"in i?+i.pitch:E,z="padding"in i?i.padding:p.padding,Z=o.P.convert(i.offset);let re=p.centerPoint.add(Z);const ne=p.pointLocation(re),se=o.L.convert(i.center||ne);this._normalizeCenter(se);const ee=p.project(ne),ye=p.project(se).sub(ee),Te=p.zoomScale(k-g);let ce,xe;i.around&&(ce=o.L.convert(i.around),xe=p.locationPoint(ce));const Ae={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||k!==g,this._rotating=this._rotating||x!==R,this._pitching=this._pitching||L!==E,this._padding=!p.isPaddingEqual(z),this._easeId=i.easeId,this._prepareEase(c,i.noMoveStart,Ae),this.terrain&&this._prepareElevation(se),this._ease(ke=>{if(this._zooming&&(p.zoom=o.B.number(g,k,ke)),this._rotating&&(p.bearing=o.B.number(x,R,ke)),this._pitching&&(p.pitch=o.B.number(E,L,ke)),this._padding&&(p.interpolatePadding(T,z,ke),re=p.centerPoint.add(Z)),this.terrain&&!i.freezeElevation&&this._updateElevation(ke),ce)p.setLocationAtPoint(ce,xe);else{const ze=p.zoomScale(p.zoom-g),Ge=k>g?Math.min(2,Te):Math.max(.5,Te),Be=Math.pow(Ge,1-ke),We=p.unproject(ee.add(ye.mult(ke*Be)).mult(ze));p.setLocationAtPoint(p.renderWorldCopies?We.wrap():We,re)}this._applyUpdatedTransform(p),this._fireMoveEvents(c)},ke=>{this.terrain&&this._finalizeElevation(),this._afterEase(c,ke)},i),this}_prepareEase(i,c,p={}){this._moving=!0,c||p.moving||this.fire(new o.k("movestart",i)),this._zooming&&!p.zooming&&this.fire(new o.k("zoomstart",i)),this._rotating&&!p.rotating&&this.fire(new o.k("rotatestart",i)),this._pitching&&!p.pitching&&this.fire(new o.k("pitchstart",i))}_prepareElevation(i){this._elevationCenter=i,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(i,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(i){this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const c=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(i<1&&c!==this._elevationTarget){const p=this._elevationTarget-this._elevationStart;this._elevationStart+=i*(p-(c-(p*i+this._elevationStart))/(1-i)),this._elevationTarget=c}this.transform.elevation=o.B.number(this._elevationStart,this._elevationTarget,i)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(i){if(!this.transformCameraUpdate)return;const c=i.clone(),{center:p,zoom:g,pitch:x,bearing:E,elevation:T}=this.transformCameraUpdate(c);p&&(c.center=p),g!==void 0&&(c.zoom=g),x!==void 0&&(c.pitch=x),E!==void 0&&(c.bearing=E),T!==void 0&&(c.elevation=T),this.transform.apply(c)}_fireMoveEvents(i){this.fire(new o.k("move",i)),this._zooming&&this.fire(new o.k("zoom",i)),this._rotating&&this.fire(new o.k("rotate",i)),this._pitching&&this.fire(new o.k("pitch",i))}_afterEase(i,c){if(this._easeId&&c&&this._easeId===c)return;delete this._easeId;const p=this._zooming,g=this._rotating,x=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,p&&this.fire(new o.k("zoomend",i)),g&&this.fire(new o.k("rotateend",i)),x&&this.fire(new o.k("pitchend",i)),this.fire(new o.k("moveend",i))}flyTo(i,c){if(!i.essential&&o.h.prefersReducedMotion){const vt=o.F(i,["center","zoom","bearing","pitch","around"]);return this.jumpTo(vt,c)}this.stop(),i=o.e({offset:[0,0],speed:1.2,curve:1.42,easing:o.bb},i);const p=this._getTransformForUpdate(),g=this.getZoom(),x=this.getBearing(),E=this.getPitch(),T=this.getPadding(),k="zoom"in i?o.ad(+i.zoom,p.minZoom,p.maxZoom):g,R="bearing"in i?this._normalizeBearing(i.bearing,x):x,L="pitch"in i?+i.pitch:E,z="padding"in i?i.padding:p.padding,Z=p.zoomScale(k-g),re=o.P.convert(i.offset);let ne=p.centerPoint.add(re);const se=p.pointLocation(ne),ee=o.L.convert(i.center||se);this._normalizeCenter(ee);const ye=p.project(se),Te=p.project(ee).sub(ye);let ce=i.curve;const xe=Math.max(p.width,p.height),Ae=xe/Z,ke=Te.mag();if("minZoom"in i){const vt=o.ad(Math.min(i.minZoom,g,k),p.minZoom,p.maxZoom),an=xe/p.zoomScale(vt-g);ce=Math.sqrt(an/ke*2)}const ze=ce*ce;function Ge(vt){const an=(Ae*Ae-xe*xe+(vt?-1:1)*ze*ze*ke*ke)/(2*(vt?Ae:xe)*ze*ke);return Math.log(Math.sqrt(an*an+1)-an)}function Be(vt){return(Math.exp(vt)-Math.exp(-vt))/2}function We(vt){return(Math.exp(vt)+Math.exp(-vt))/2}const gt=Ge(!1);let Ut=function(vt){return We(gt)/We(gt+ce*vt)},nt=function(vt){return xe*((We(gt)*(Be(an=gt+ce*vt)/We(an))-Be(gt))/ze)/ke;var an},kt=(Ge(!0)-gt)/ce;if(Math.abs(ke)<1e-6||!isFinite(kt)){if(Math.abs(xe-Ae)<1e-6)return this.easeTo(i,c);const vt=Ae<xe?-1:1;kt=Math.abs(Math.log(Ae/xe))/ce,nt=function(){return 0},Ut=function(an){return Math.exp(vt*ce*an)}}return i.duration="duration"in i?+i.duration:1e3*kt/("screenSpeed"in i?+i.screenSpeed/ce:+i.speed),i.maxDuration&&i.duration>i.maxDuration&&(i.duration=0),this._zooming=!0,this._rotating=x!==R,this._pitching=L!==E,this._padding=!p.isPaddingEqual(z),this._prepareEase(c,!1),this.terrain&&this._prepareElevation(ee),this._ease(vt=>{const an=vt*kt,jt=1/Ut(an);p.zoom=vt===1?k:g+p.scaleZoom(jt),this._rotating&&(p.bearing=o.B.number(x,R,vt)),this._pitching&&(p.pitch=o.B.number(E,L,vt)),this._padding&&(p.interpolatePadding(T,z,vt),ne=p.centerPoint.add(re)),this.terrain&&!i.freezeElevation&&this._updateElevation(vt);const Ft=vt===1?ee:p.unproject(ye.add(Te.mult(nt(an))).mult(jt));p.setLocationAtPoint(p.renderWorldCopies?Ft.wrap():Ft,ne),this._applyUpdatedTransform(p),this._fireMoveEvents(c)},()=>{this.terrain&&this._finalizeElevation(),this._afterEase(c)},i),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(i,c){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const p=this._onEaseEnd;delete this._onEaseEnd,p.call(this,c)}if(!i){const p=this.handlers;p&&p.stop(!1)}return this}_ease(i,c,p){p.animate===!1||p.duration===0?(i(1),c()):(this._easeStart=o.h.now(),this._easeOptions=p,this._onEaseFrame=i,this._onEaseEnd=c,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(i,c){i=o.b5(i,-180,180);const p=Math.abs(i-c);return Math.abs(i-360-c)<p&&(i-=360),Math.abs(i+360-c)<p&&(i+=360),i}_normalizeCenter(i){const c=this.transform;if(!c.renderWorldCopies||c.lngRange)return;const p=i.lng-c.center.lng;i.lng+=p>180?-360:p<-180?360:0}queryTerrainElevation(i){return this.terrain?this.terrain.getElevationForLngLatZoom(o.L.convert(i),this.transform.tileZoom)-this.transform.elevation:null}}class yi{constructor(i={}){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=c=>{!c||c.sourceDataType!=="metadata"&&c.sourceDataType!=="visibility"&&c.dataType!=="style"&&c.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=i}getDefaultPosition(){return"bottom-right"}onAdd(i){return this._map=i,this._compact=this.options&&this.options.compact,this._container=b.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=b.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=b.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){b.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(i,c){const p=this._map._getUIString(`AttributionControl.${c}`);i.title=p,i.setAttribute("aria-label",p)}_updateAttributions(){if(!this._map.style)return;let i=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?i=i.concat(this.options.customAttribution.map(g=>typeof g!="string"?"":g)):typeof this.options.customAttribution=="string"&&i.push(this.options.customAttribution)),this._map.style.stylesheet){const g=this._map.style.stylesheet;this.styleOwner=g.owner,this.styleId=g.id}const c=this._map.style.sourceCaches;for(const g in c){const x=c[g];if(x.used||x.usedForTerrain){const E=x.getSource();E.attribution&&i.indexOf(E.attribution)<0&&i.push(E.attribution)}}i=i.filter(g=>String(g).trim()),i.sort((g,x)=>g.length-x.length),i=i.filter((g,x)=>{for(let E=x+1;E<i.length;E++)if(i[E].indexOf(g)>=0)return!1;return!0});const p=i.join(" | ");p!==this._attribHTML&&(this._attribHTML=p,i.length?(this._innerContainer.innerHTML=p,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class fn{constructor(i={}){this._updateCompact=()=>{const c=this._container.children;if(c.length){const p=c[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&p.classList.add("maplibregl-compact"):p.classList.remove("maplibregl-compact")}},this.options=i}getDefaultPosition(){return"bottom-left"}onAdd(i){this._map=i,this._compact=this.options&&this.options.compact,this._container=b.create("div","maplibregl-ctrl");const c=b.create("a","maplibregl-ctrl-logo");return c.target="_blank",c.rel="noopener nofollow",c.href="https://maplibre.org/",c.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),c.setAttribute("rel","noopener nofollow"),this._container.appendChild(c),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){b.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class tc{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(i){const c=++this._id;return this._queue.push({callback:i,id:c,cancelled:!1}),c}remove(i){const c=this._currentlyRunning,p=c?this._queue.concat(c):this._queue;for(const g of p)if(g.id===i)return void(g.cancelled=!0)}run(i=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const c=this._currentlyRunning=this._queue;this._queue=[];for(const p of c)if(!p.cancelled&&(p.callback(i),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const Qh={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"};var Op=o.Q([{name:"a_pos3d",type:"Int16",components:3}]);class Fp extends o.E{constructor(i){super(),this.sourceCache=i,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,i.usedForTerrain=!0,i.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(i,c){this.sourceCache.update(i,c),this._renderableTilesKeys=[];const p={};for(const g of i.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:c}))p[g.key]=!0,this._renderableTilesKeys.push(g.key),this._tiles[g.key]||(g.posMatrix=new Float64Array(16),o.aS(g.posMatrix,0,o.N,0,o.N,0,1),this._tiles[g.key]=new ge(g,this.tileSize));for(const g in this._tiles)p[g]||delete this._tiles[g]}freeRtt(i){for(const c in this._tiles){const p=this._tiles[c];(!i||p.tileID.equals(i)||p.tileID.isChildOf(i)||i.isChildOf(p.tileID))&&(p.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(i=>this.getTileByID(i))}getTileByID(i){return this._tiles[i]}getTerrainCoords(i){const c={};for(const p of this._renderableTilesKeys){const g=this._tiles[p].tileID;if(g.canonical.equals(i.canonical)){const x=i.clone();x.posMatrix=new Float64Array(16),o.aS(x.posMatrix,0,o.N,0,o.N,0,1),c[p]=x}else if(g.canonical.isChildOf(i.canonical)){const x=i.clone();x.posMatrix=new Float64Array(16);const E=g.canonical.z-i.canonical.z,T=g.canonical.x-(g.canonical.x>>E<<E),k=g.canonical.y-(g.canonical.y>>E<<E),R=o.N>>E;o.aS(x.posMatrix,0,R,0,R,0,1),o.$(x.posMatrix,x.posMatrix,[-T*R,-k*R,0]),c[p]=x}else if(i.canonical.isChildOf(g.canonical)){const x=i.clone();x.posMatrix=new Float64Array(16);const E=i.canonical.z-g.canonical.z,T=i.canonical.x-(i.canonical.x>>E<<E),k=i.canonical.y-(i.canonical.y>>E<<E),R=o.N>>E;o.aS(x.posMatrix,0,o.N,0,o.N,0,1),o.$(x.posMatrix,x.posMatrix,[T*R,k*R,0]),o.a0(x.posMatrix,x.posMatrix,[1/2**E,1/2**E,0]),c[p]=x}}return c}getSourceTile(i,c){const p=this.sourceCache._source;let g=i.overscaledZ-this.deltaZoom;if(g>p.maxzoom&&(g=p.maxzoom),g<p.minzoom)return null;this._sourceTileCache[i.key]||(this._sourceTileCache[i.key]=i.scaledTo(g).key);let x=this.sourceCache.getTileByID(this._sourceTileCache[i.key]);if((!x||!x.dem)&&c)for(;g>=p.minzoom&&(!x||!x.dem);)x=this.sourceCache.getTileByID(i.scaledTo(g--).key);return x}tilesAfterTime(i=Date.now()){return Object.values(this._tiles).filter(c=>c.timeAdded>=i)}}class Np{constructor(i,c,p){this.painter=i,this.sourceCache=new Fp(c),this.options=p,this.exaggeration=typeof p.exaggeration=="number"?p.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(i,c,p,g=o.N){var x;if(!(c>=0&&c<g&&p>=0&&p<g))return 0;const E=this.getTerrainData(i),T=(x=E.tile)===null||x===void 0?void 0:x.dem;if(!T)return 0;const k=function(ne,se,ee){var ye=se[0],Te=se[1];return ne[0]=ee[0]*ye+ee[4]*Te+ee[12],ne[1]=ee[1]*ye+ee[5]*Te+ee[13],ne}([],[c/g*o.N,p/g*o.N],E.u_terrain_matrix),R=[k[0]*T.dim,k[1]*T.dim],L=Math.floor(R[0]),z=Math.floor(R[1]),Z=R[0]-L,re=R[1]-z;return T.get(L,z)*(1-Z)*(1-re)+T.get(L+1,z)*Z*(1-re)+T.get(L,z+1)*(1-Z)*re+T.get(L+1,z+1)*Z*re}getElevationForLngLatZoom(i,c){const{tileID:p,mercatorX:g,mercatorY:x}=this._getOverscaledTileIDFromLngLatZoom(i,c);return this.getElevation(p,g%o.N,x%o.N,o.N)}getElevation(i,c,p,g=o.N){return this.getDEMElevation(i,c,p,g)*this.exaggeration}getTerrainData(i){if(!this._emptyDemTexture){const g=this.painter.context,x=new o.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new Me(g,x,g.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new Me(g,new o.R({width:1,height:1}),g.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(g.gl.NEAREST,g.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=o.ao([])}const c=this.sourceCache.getSourceTile(i,!0);if(c&&c.dem&&(!c.demTexture||c.needsTerrainPrepare)){const g=this.painter.context;c.demTexture=this.painter.getTileTexture(c.dem.stride),c.demTexture?c.demTexture.update(c.dem.getPixels(),{premultiply:!1}):c.demTexture=new Me(g,c.dem.getPixels(),g.gl.RGBA,{premultiply:!1}),c.demTexture.bind(g.gl.NEAREST,g.gl.CLAMP_TO_EDGE),c.needsTerrainPrepare=!1}const p=c&&c+c.tileID.key+i.key;if(p&&!this._demMatrixCache[p]){const g=this.sourceCache.sourceCache._source.maxzoom;let x=i.canonical.z-c.tileID.canonical.z;i.overscaledZ>i.canonical.z&&(i.canonical.z>=g?x=i.canonical.z-g:o.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const E=i.canonical.x-(i.canonical.x>>x<<x),T=i.canonical.y-(i.canonical.y>>x<<x),k=o.bc(new Float64Array(16),[1/(o.N<<x),1/(o.N<<x),0]);o.$(k,k,[E*o.N,T*o.N,0]),this._demMatrixCache[i.key]={matrix:k,coord:i}}return{u_depth:2,u_terrain:3,u_terrain_dim:c&&c.dem&&c.dem.dim||1,u_terrain_matrix:p?this._demMatrixCache[i.key].matrix:this._emptyDemMatrix,u_terrain_unpack:c&&c.dem&&c.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(c&&c.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:c}}getFramebuffer(i){const c=this.painter,p=c.width/devicePixelRatio,g=c.height/devicePixelRatio;return!this._fbo||this._fbo.width===p&&this._fbo.height===g||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new Me(c.context,{width:p,height:g,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new Me(c.context,{width:p,height:g,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=c.context.createFramebuffer(p,g,!0,!1),this._fbo.depthAttachment.set(c.context.createRenderbuffer(c.context.gl.DEPTH_COMPONENT16,p,g))),this._fbo.colorAttachment.set(i==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const i=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const c=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let x=0,E=0;x<this._coordsTextureSize;x++)for(let T=0;T<this._coordsTextureSize;T++,E+=4)c[E+0]=255&T,c[E+1]=255&x,c[E+2]=T>>8<<4|x>>8,c[E+3]=0;const p=new o.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(c.buffer)),g=new Me(i,p,i.gl.RGBA,{premultiply:!1});return g.bind(i.gl.NEAREST,i.gl.CLAMP_TO_EDGE),this._coordsTexture=g,g}pointCoordinate(i){const c=new Uint8Array(4),p=this.painter.context,g=p.gl;p.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),g.readPixels(i.x,this.painter.height/devicePixelRatio-i.y-1,1,1,g.RGBA,g.UNSIGNED_BYTE,c),p.bindFramebuffer.set(null);const x=c[0]+(c[2]>>4<<8),E=c[1]+((15&c[2])<<8),T=this.coordsIndex[255-c[3]],k=T&&this.sourceCache.getTileByID(T);if(!k)return null;const R=this._coordsTextureSize,L=(1<<k.tileID.canonical.z)*R;return new o.U(this._allowMercatorOverflow(i,(k.tileID.canonical.x*R+x)/L),(k.tileID.canonical.y*R+E)/L,this.getElevation(k.tileID,x,E,R))}getTerrainMesh(){if(this._mesh)return this._mesh;const i=this.painter.context,c=new o.bd,p=new o.b0,g=this.meshSize,x=o.N/g,E=g*g;for(let z=0;z<=g;z++)for(let Z=0;Z<=g;Z++)c.emplaceBack(Z*x,z*x,0);for(let z=0;z<E;z+=g+1)for(let Z=0;Z<g;Z++)p.emplaceBack(Z+z,g+Z+z+1,g+Z+z+2),p.emplaceBack(Z+z,g+Z+z+2,Z+z+1);const T=c.length,k=T+2*(g+1);for(const z of[0,1])for(let Z=0;Z<=g;Z++)for(const re of[0,1])c.emplaceBack(Z*x,z*o.N,re);for(let z=0;z<2*g;z+=2)p.emplaceBack(k+z,k+z+1,k+z+3),p.emplaceBack(k+z,k+z+3,k+z+2),p.emplaceBack(T+z,T+z+3,T+z+1),p.emplaceBack(T+z,T+z+2,T+z+3);const R=c.length,L=R+2*(g+1);for(const z of[0,1])for(let Z=0;Z<=g;Z++)for(const re of[0,1])c.emplaceBack(z*o.N,Z*x,re);for(let z=0;z<2*g;z+=2)p.emplaceBack(R+z,R+z+1,R+z+3),p.emplaceBack(R+z,R+z+3,R+z+2),p.emplaceBack(L+z,L+z+3,L+z+1),p.emplaceBack(L+z,L+z+2,L+z+3);return this._mesh={indexBuffer:i.createIndexBuffer(p),vertexBuffer:i.createVertexBuffer(c,Op.members),segments:o.S.simpleSegment(0,0,c.length,p.length)},this._mesh}getMeshFrameDelta(i){return 2*Math.PI*o.be/Math.pow(2,i)/5}getMinTileElevationForLngLatZoom(i,c){var p;const{tileID:g}=this._getOverscaledTileIDFromLngLatZoom(i,c);return(p=this.getMinMaxElevation(g).minElevation)!==null&&p!==void 0?p:0}getMinMaxElevation(i){const c=this.getTerrainData(i).tile,p={minElevation:null,maxElevation:null};return c&&c.dem&&(p.minElevation=c.dem.min*this.exaggeration,p.maxElevation=c.dem.max*this.exaggeration),p}_getOverscaledTileIDFromLngLatZoom(i,c){const p=o.U.fromLngLat(i.wrap()),g=(1<<c)*o.N,x=p.x*g,E=p.y*g,T=Math.floor(x/o.N),k=Math.floor(E/o.N);return{tileID:new o.O(c,0,c,T,k),mercatorX:x,mercatorY:E}}_allowMercatorOverflow(i,c){const p=i.x<this.painter.width/2;let g=o.bf(c);const x=this.painter.transform.center.lng;return p&&Math.sign(g)>0&&Math.sign(x)<0||!p&&Math.sign(g)<0&&Math.sign(x)>0?(g=360*Math.sign(x)+g,o.G(g)):c}}class Iv{constructor(i,c,p){this._context=i,this._size=c,this._tileSize=p,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const i of this._objects)i.texture.destroy(),i.fbo.destroy()}_createObject(i){const c=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),p=new Me(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return p.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),c.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),c.colorAttachment.set(p.texture),{id:i,fbo:c,texture:p,stamp:-1,inUse:!1}}getObjectForId(i){return this._objects[i]}useObject(i){i.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(c=>i.id!==c),this._recentlyUsed.push(i.id)}stampObject(i){i.stamp=++this._stamp}getOrCreateFreeObject(){for(const c of this._recentlyUsed)if(!this._objects[c].inUse)return this._objects[c];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const i=this._createObject(this._objects.length);return this._objects.push(i),i}freeObject(i){i.inUse=!1}freeAllObjects(){for(const i of this._objects)this.freeObject(i)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(i=>!i.inUse)===!1}}const Dr={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class nc{constructor(i,c){this.painter=i,this.terrain=c,this.pool=new Iv(i.context,30,c.sourceCache.tileSize*c.qualityFactor)}destruct(){this.pool.destruct()}getTexture(i){return this.pool.getObjectForId(i.rtt[this._stacks.length-1].id).texture}prepareForRender(i,c){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=i._order.filter(p=>!i._layers[p].isHidden(c)),this._coordsDescendingInv={};for(const p in i.sourceCaches){this._coordsDescendingInv[p]={};const g=i.sourceCaches[p].getVisibleCoordinates();for(const x of g){const E=this.terrain.sourceCache.getTerrainCoords(x);for(const T in E)this._coordsDescendingInv[p][T]||(this._coordsDescendingInv[p][T]=[]),this._coordsDescendingInv[p][T].push(E[T])}}this._coordsDescendingInvStr={};for(const p of i._order){const g=i._layers[p],x=g.source;if(Dr[g.type]&&!this._coordsDescendingInvStr[x]){this._coordsDescendingInvStr[x]={};for(const E in this._coordsDescendingInv[x])this._coordsDescendingInvStr[x][E]=this._coordsDescendingInv[x][E].map(T=>T.key).sort().join()}}for(const p of this._renderableTiles)for(const g in this._coordsDescendingInvStr){const x=this._coordsDescendingInvStr[g][p.tileID.key];x&&x!==p.rttCoords[g]&&(p.rtt=[])}}renderLayer(i){if(i.isHidden(this.painter.transform.zoom))return!1;const c=i.type,p=this.painter,g=this._renderableLayerIds[this._renderableLayerIds.length-1]===i.id;if(Dr[c]&&(this._prevType&&Dr[this._prevType]||this._stacks.push([]),this._prevType=c,this._stacks[this._stacks.length-1].push(i.id),!g))return!0;if(Dr[this._prevType]||Dr[c]&&g){this._prevType=c;const x=this._stacks.length-1,E=this._stacks[x]||[];for(const T of this._renderableTiles){if(this.pool.isFull()&&(In(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(T),T.rtt[x]){const R=this.pool.getObjectForId(T.rtt[x].id);if(R.stamp===T.rtt[x].stamp){this.pool.useObject(R);continue}}const k=this.pool.getOrCreateFreeObject();this.pool.useObject(k),this.pool.stampObject(k),T.rtt[x]={id:k.id,stamp:k.stamp},p.context.bindFramebuffer.set(k.fbo.framebuffer),p.context.clear({color:o.aT.transparent,stencil:0}),p.currentStencilSource=void 0;for(let R=0;R<E.length;R++){const L=p.style._layers[E[R]],z=L.source?this._coordsDescendingInv[L.source][T.tileID.key]:[T.tileID];p.context.viewport.set([0,0,k.fbo.width,k.fbo.height]),p._renderTileClippingMasks(L,z),p.renderLayer(p,p.style.sourceCaches[L.source],L,z),L.source&&(T.rttCoords[L.source]=this._coordsDescendingInvStr[L.source][T.tileID.key])}}return In(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),Dr[c]}return!1}}const wt=w,At={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:o.c.MAX_TILE_CACHE_ZOOM_LEVELS,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0,maxCanvasSize:[4096,4096]},ql=y=>{y.touchstart=y.dragStart,y.touchmoveWindow=y.dragMove,y.touchend=y.dragEnd},Yh={showCompass:!0,showZoom:!0,visualizePitch:!1};class Jh{constructor(i,c,p=!1){this.mousedown=E=>{this.startMouse(o.e({},E,{ctrlKey:!0,preventDefault:()=>E.preventDefault()}),b.mousePos(this.element,E)),b.addEventListener(window,"mousemove",this.mousemove),b.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=E=>{this.moveMouse(E,b.mousePos(this.element,E))},this.mouseup=E=>{this.mouseRotate.dragEnd(E),this.mousePitch&&this.mousePitch.dragEnd(E),this.offTemp()},this.touchstart=E=>{E.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=b.touchPos(this.element,E.targetTouches)[0],this.startTouch(E,this._startPos),b.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),b.addEventListener(window,"touchend",this.touchend))},this.touchmove=E=>{E.targetTouches.length!==1?this.reset():(this._lastPos=b.touchPos(this.element,E.targetTouches)[0],this.moveTouch(E,this._lastPos))},this.touchend=E=>{E.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const g=i.dragRotate._mouseRotate.getClickTolerance(),x=i.dragRotate._mousePitch.getClickTolerance();this.element=c,this.mouseRotate=Ro({clickTolerance:g,enable:!0}),this.touchRotate=(({enable:E,clickTolerance:T,bearingDegreesPerPixelMoved:k=.8})=>{const R=new Ip;return new Vs({clickTolerance:T,move:(L,z)=>({bearingDelta:(z.x-L.x)*k}),moveStateManager:R,enable:E,assignEvents:ql})})({clickTolerance:g,enable:!0}),this.map=i,p&&(this.mousePitch=js({clickTolerance:x,enable:!0}),this.touchPitch=(({enable:E,clickTolerance:T,pitchDegreesPerPixelMoved:k=-.5})=>{const R=new Ip;return new Vs({clickTolerance:T,move:(L,z)=>({pitchDelta:(z.y-L.y)*k}),moveStateManager:R,enable:E,assignEvents:ql})})({clickTolerance:x,enable:!0})),b.addEventListener(c,"mousedown",this.mousedown),b.addEventListener(c,"touchstart",this.touchstart,{passive:!1}),b.addEventListener(c,"touchcancel",this.reset)}startMouse(i,c){this.mouseRotate.dragStart(i,c),this.mousePitch&&this.mousePitch.dragStart(i,c),b.disableDrag()}startTouch(i,c){this.touchRotate.dragStart(i,c),this.touchPitch&&this.touchPitch.dragStart(i,c),b.disableDrag()}moveMouse(i,c){const p=this.map,{bearingDelta:g}=this.mouseRotate.dragMove(i,c)||{};if(g&&p.setBearing(p.getBearing()+g),this.mousePitch){const{pitchDelta:x}=this.mousePitch.dragMove(i,c)||{};x&&p.setPitch(p.getPitch()+x)}}moveTouch(i,c){const p=this.map,{bearingDelta:g}=this.touchRotate.dragMove(i,c)||{};if(g&&p.setBearing(p.getBearing()+g),this.touchPitch){const{pitchDelta:x}=this.touchPitch.dragMove(i,c)||{};x&&p.setPitch(p.getPitch()+x)}}off(){const i=this.element;b.removeEventListener(i,"mousedown",this.mousedown),b.removeEventListener(i,"touchstart",this.touchstart,{passive:!1}),b.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),b.removeEventListener(window,"touchend",this.touchend),b.removeEventListener(i,"touchcancel",this.reset),this.offTemp()}offTemp(){b.enableDrag(),b.removeEventListener(window,"mousemove",this.mousemove),b.removeEventListener(window,"mouseup",this.mouseup),b.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),b.removeEventListener(window,"touchend",this.touchend)}}let jn;function ed(y,i,c){if(y=new o.L(y.lng,y.lat),i){const p=new o.L(y.lng-360,y.lat),g=new o.L(y.lng+360,y.lat),x=c.locationPoint(y).distSqr(i);c.locationPoint(p).distSqr(i)<x?y=p:c.locationPoint(g).distSqr(i)<x&&(y=g)}for(;Math.abs(y.lng-c.center.lng)>180;){const p=c.locationPoint(y);if(p.x>=0&&p.y>=0&&p.x<=c.width&&p.y<=c.height)break;y.lng>c.center.lng?y.lng-=360:y.lng+=360}return y}const Fi={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Bp(y,i,c){const p=y.classList;for(const g in Fi)p.remove(`maplibregl-${c}-anchor-${g}`);p.add(`maplibregl-${c}-anchor-${i}`)}class Ba extends o.E{constructor(i){if(super(),this._onKeyPress=c=>{const p=c.code,g=c.charCode||c.keyCode;p!=="Space"&&p!=="Enter"&&g!==32&&g!==13||this.togglePopup()},this._onMapClick=c=>{const p=c.originalEvent.target,g=this._element;this._popup&&(p===g||g.contains(p))&&this.togglePopup()},this._update=c=>{if(!this._map)return;const p=this._map.loaded()&&!this._map.isMoving();((c==null?void 0:c.type)==="terrain"||(c==null?void 0:c.type)==="render"&&!p)&&this._map.once("render",this._update),this._map.transform.renderWorldCopies&&(this._lngLat=ed(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let g="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?g=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(g=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let x="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?x="rotateX(0deg)":this._pitchAlignment==="map"&&(x=`rotateX(${this._map.getPitch()}deg)`),c&&c.type!=="moveend"||(this._pos=this._pos.round()),b.setTransform(this._element,`${Fi[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${x} ${g}`),this._map.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const E=this._map.unproject(this._pos),T=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=E.distanceTo(this._lngLat)>20*T?"0.2":"1.0",this._opacityTimeout=null},100))},this._onMove=c=>{if(!this._isDragging){const p=this._clickTolerance||this._map._clickTolerance;this._isDragging=c.point.dist(this._pointerdownPos)>=p}this._isDragging&&(this._pos=c.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new o.k("dragstart"))),this.fire(new o.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new o.k("dragend")),this._state="inactive"},this._addDragHandler=c=>{this._element.contains(c.originalEvent.target)&&(c.preventDefault(),this._positionDelta=c.point.sub(this._pos).add(this._offset),this._pointerdownPos=c.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=i&&i.anchor||"center",this._color=i&&i.color||"#3FB1CE",this._scale=i&&i.scale||1,this._draggable=i&&i.draggable||!1,this._clickTolerance=i&&i.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=i&&i.rotation||0,this._rotationAlignment=i&&i.rotationAlignment||"auto",this._pitchAlignment=i&&i.pitchAlignment&&i.pitchAlignment!=="auto"?i.pitchAlignment:this._rotationAlignment,i&&i.element)this._element=i.element,this._offset=o.P.convert(i&&i.offset||[0,0]);else{this._defaultMarker=!0,this._element=b.create("div"),this._element.setAttribute("aria-label","Map marker");const c=b.createNS("http://www.w3.org/2000/svg","svg"),p=41,g=27;c.setAttributeNS(null,"display","block"),c.setAttributeNS(null,"height",`${p}px`),c.setAttributeNS(null,"width",`${g}px`),c.setAttributeNS(null,"viewBox",`0 0 ${g} ${p}`);const x=b.createNS("http://www.w3.org/2000/svg","g");x.setAttributeNS(null,"stroke","none"),x.setAttributeNS(null,"stroke-width","1"),x.setAttributeNS(null,"fill","none"),x.setAttributeNS(null,"fill-rule","evenodd");const E=b.createNS("http://www.w3.org/2000/svg","g");E.setAttributeNS(null,"fill-rule","nonzero");const T=b.createNS("http://www.w3.org/2000/svg","g");T.setAttributeNS(null,"transform","translate(3.0, 29.0)"),T.setAttributeNS(null,"fill","#000000");const k=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const ye of k){const Te=b.createNS("http://www.w3.org/2000/svg","ellipse");Te.setAttributeNS(null,"opacity","0.04"),Te.setAttributeNS(null,"cx","10.5"),Te.setAttributeNS(null,"cy","5.80029008"),Te.setAttributeNS(null,"rx",ye.rx),Te.setAttributeNS(null,"ry",ye.ry),T.appendChild(Te)}const R=b.createNS("http://www.w3.org/2000/svg","g");R.setAttributeNS(null,"fill",this._color);const L=b.createNS("http://www.w3.org/2000/svg","path");L.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),R.appendChild(L);const z=b.createNS("http://www.w3.org/2000/svg","g");z.setAttributeNS(null,"opacity","0.25"),z.setAttributeNS(null,"fill","#000000");const Z=b.createNS("http://www.w3.org/2000/svg","path");Z.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),z.appendChild(Z);const re=b.createNS("http://www.w3.org/2000/svg","g");re.setAttributeNS(null,"transform","translate(6.0, 7.0)"),re.setAttributeNS(null,"fill","#FFFFFF");const ne=b.createNS("http://www.w3.org/2000/svg","g");ne.setAttributeNS(null,"transform","translate(8.0, 8.0)");const se=b.createNS("http://www.w3.org/2000/svg","circle");se.setAttributeNS(null,"fill","#000000"),se.setAttributeNS(null,"opacity","0.25"),se.setAttributeNS(null,"cx","5.5"),se.setAttributeNS(null,"cy","5.5"),se.setAttributeNS(null,"r","5.4999962");const ee=b.createNS("http://www.w3.org/2000/svg","circle");ee.setAttributeNS(null,"fill","#FFFFFF"),ee.setAttributeNS(null,"cx","5.5"),ee.setAttributeNS(null,"cy","5.5"),ee.setAttributeNS(null,"r","5.4999962"),ne.appendChild(se),ne.appendChild(ee),E.appendChild(T),E.appendChild(R),E.appendChild(z),E.appendChild(re),E.appendChild(ne),c.appendChild(E),c.setAttributeNS(null,"height",p*this._scale+"px"),c.setAttributeNS(null,"width",g*this._scale+"px"),this._element.appendChild(c),this._offset=o.P.convert(i&&i.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",c=>{c.preventDefault()}),this._element.addEventListener("mousedown",c=>{c.preventDefault()}),Bp(this._element,this._anchor,"marker"),i&&i.className)for(const c of i.className.split(" "))this._element.classList.add(c);this._popup=null}addTo(i){return this.remove(),this._map=i,i.getCanvasContainer().appendChild(this._element),i.on("move",this._update),i.on("moveend",this._update),i.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),b.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(i){return this._lngLat=o.L.convert(i),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(i){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),i){if(!("offset"in i.options)){const g=Math.abs(13.5)/Math.SQRT2;i.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[g,-1*(38.1-13.5+g)],"bottom-right":[-g,-1*(38.1-13.5+g)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=i,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){const i=this._popup;return i?(i.isOpen()?i.remove():i.addTo(this._map),this):this}getOffset(){return this._offset}setOffset(i){return this._offset=o.P.convert(i),this._update(),this}addClassName(i){this._element.classList.add(i)}removeClassName(i){this._element.classList.remove(i)}toggleClassName(i){return this._element.classList.toggle(i)}setDraggable(i){return this._draggable=!!i,this._map&&(i?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(i){return this._rotation=i||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(i){return this._rotationAlignment=i||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(i){return this._pitchAlignment=i&&i!=="auto"?i:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const Mn={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Cn=0,Lo=!1;const Gl={maxWidth:100,unit:"metric"};function Zl(y,i,c){const p=c&&c.maxWidth||100,g=y._container.clientHeight/2,x=y.unproject([0,g]),E=y.unproject([p,g]),T=x.distanceTo(E);if(c&&c.unit==="imperial"){const k=3.2808*T;k>5280?Va(i,p,k/5280,y._getUIString("ScaleControl.Miles")):Va(i,p,k,y._getUIString("ScaleControl.Feet"))}else c&&c.unit==="nautical"?Va(i,p,T/1852,y._getUIString("ScaleControl.NauticalMiles")):T>=1e3?Va(i,p,T/1e3,y._getUIString("ScaleControl.Kilometers")):Va(i,p,T,y._getUIString("ScaleControl.Meters"))}function Va(y,i,c,p){const g=function(x){const E=Math.pow(10,`${Math.floor(x)}`.length-1);let T=x/E;return T=T>=10?10:T>=5?5:T>=3?3:T>=2?2:T>=1?1:function(k){const R=Math.pow(10,Math.ceil(-Math.log(k)/Math.LN10));return Math.round(k*R)/R}(T),E*T}(c);y.style.width=i*(g/c)+"px",y.innerHTML=`${g}&nbsp;${p}`}const td={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},nd=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function zo(y){if(y){if(typeof y=="number"){const i=Math.round(Math.abs(y)/Math.SQRT2);return{center:new o.P(0,0),top:new o.P(0,y),"top-left":new o.P(i,i),"top-right":new o.P(-i,i),bottom:new o.P(0,-y),"bottom-left":new o.P(i,-i),"bottom-right":new o.P(-i,-i),left:new o.P(y,0),right:new o.P(-y,0)}}if(y instanceof o.P||Array.isArray(y)){const i=o.P.convert(y);return{center:i,top:i,"top-left":i,"top-right":i,bottom:i,"bottom-left":i,"bottom-right":i,left:i,right:i}}return{center:o.P.convert(y.center||[0,0]),top:o.P.convert(y.top||[0,0]),"top-left":o.P.convert(y["top-left"]||[0,0]),"top-right":o.P.convert(y["top-right"]||[0,0]),bottom:o.P.convert(y.bottom||[0,0]),"bottom-left":o.P.convert(y["bottom-left"]||[0,0]),"bottom-right":o.P.convert(y["bottom-right"]||[0,0]),left:o.P.convert(y.left||[0,0]),right:o.P.convert(y.right||[0,0])}}return zo(new o.P(0,0))}const rd={extend:(y,...i)=>o.e(y,...i),run(y){y()},logToElement(y,i=!1,c="log"){const p=window.document.getElementById(c);p&&(i&&(p.innerHTML=""),p.innerHTML+=`<br>${y}`)}},id=w;class en{static get version(){return id}static get workerCount(){return $t.workerCount}static set workerCount(i){$t.workerCount=i}static get maxParallelImageRequests(){return o.c.MAX_PARALLEL_IMAGE_REQUESTS}static set maxParallelImageRequests(i){o.c.MAX_PARALLEL_IMAGE_REQUESTS=i}static get workerUrl(){return o.c.WORKER_URL}static set workerUrl(i){o.c.WORKER_URL=i}static addProtocol(i,c){o.c.REGISTERED_PROTOCOLS[i]=c}static removeProtocol(i){delete o.c.REGISTERED_PROTOCOLS[i]}}return en.Map=class extends zp{constructor(y){if(o.bg.mark(o.bh.create),(y=o.e({},At,y)).minZoom!=null&&y.maxZoom!=null&&y.minZoom>y.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(y.minPitch!=null&&y.maxPitch!=null&&y.minPitch>y.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(y.minPitch!=null&&y.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(y.maxPitch!=null&&y.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Qu(y.minZoom,y.maxZoom,y.minPitch,y.maxPitch,y.renderWorldCopies),{bearingSnap:y.bearingSnap}),this._cooperativeGesturesOnWheel=i=>{this._onCooperativeGesture(i,i[this._metaKey],1)},this._contextLost=i=>{i.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new o.k("webglcontextlost",{originalEvent:i}))},this._contextRestored=i=>{this._setupPainter(),this.resize(),this._update(),this.fire(new o.k("webglcontextrestored",{originalEvent:i}))},this._onMapScroll=i=>{if(i.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=y.interactive,this._cooperativeGestures=y.cooperativeGestures,this._metaKey=navigator.platform.indexOf("Mac")===0?"metaKey":"ctrlKey",this._maxTileCacheSize=y.maxTileCacheSize,this._maxTileCacheZoomLevels=y.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=y.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=y.preserveDrawingBuffer,this._antialias=y.antialias,this._trackResize=y.trackResize,this._bearingSnap=y.bearingSnap,this._refreshExpiredTiles=y.refreshExpiredTiles,this._fadeDuration=y.fadeDuration,this._crossSourceCollisions=y.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=y.collectResourceTiming,this._renderTaskQueue=new tc,this._controls=[],this._mapId=o.a2(),this._locale=o.e({},Qh,y.locale),this._clickTolerance=y.clickTolerance,this._overridePixelRatio=y.pixelRatio,this._maxCanvasSize=y.maxCanvasSize,this.transformCameraUpdate=y.transformCameraUpdate,this._imageQueueHandle=G.addThrottleControl(()=>this.isMoving()),this._requestManager=new B(y.transformRequest),typeof y.container=="string"){if(this._container=document.getElementById(y.container),!this._container)throw new Error(`Container '${y.container}' not found.`)}else{if(!(y.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=y.container}if(y.maxBounds&&this.setMaxBounds(y.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let i=!1;const c=Na(p=>{this._trackResize&&!this._removed&&this.resize(p)._update()},50);this._resizeObserver=new ResizeObserver(p=>{i?c(p):i=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Xh(this,y),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=y.hash&&new Bl(typeof y.hash=="string"&&y.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:y.center,zoom:y.zoom,bearing:y.bearing,pitch:y.pitch}),y.bounds&&(this.resize(),this.fitBounds(y.bounds,o.e({},y.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=y.localIdeographFontFamily,this._validateStyle=y.validateStyle,y.style&&this.setStyle(y.style,{localIdeographFontFamily:y.localIdeographFontFamily}),y.attributionControl&&this.addControl(new yi({customAttribution:y.customAttribution})),y.maplibreLogo&&this.addControl(new fn,y.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",i=>{this._update(i.dataType==="style"),this.fire(new o.k(`${i.dataType}data`,i))}),this.on("dataloading",i=>{this.fire(new o.k(`${i.dataType}dataloading`,i))}),this.on("dataabort",i=>{this.fire(new o.k("sourcedataabort",i))})}_getMapId(){return this._mapId}addControl(y,i){if(i===void 0&&(i=y.getDefaultPosition?y.getDefaultPosition():"top-right"),!y||!y.onAdd)return this.fire(new o.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const c=y.onAdd(this);this._controls.push(y);const p=this._controlPositions[i];return i.indexOf("bottom")!==-1?p.insertBefore(c,p.firstChild):p.appendChild(c),this}removeControl(y){if(!y||!y.onRemove)return this.fire(new o.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const i=this._controls.indexOf(y);return i>-1&&this._controls.splice(i,1),y.onRemove(this),this}hasControl(y){return this._controls.indexOf(y)>-1}calculateCameraOptionsFromTo(y,i,c,p){return p==null&&this.terrain&&(p=this.terrain.getElevationForLngLatZoom(c,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(y,i,c,p)}resize(y){var i;const c=this._containerDimensions(),p=c[0],g=c[1],x=this._getClampedPixelRatio(p,g);if(this._resizeCanvas(p,g,x),this.painter.resize(p,g,x),this.painter.overLimit()){const T=this.painter.context.gl;this._maxCanvasSize=[T.drawingBufferWidth,T.drawingBufferHeight];const k=this._getClampedPixelRatio(p,g);this._resizeCanvas(p,g,k),this.painter.resize(p,g,k)}this.transform.resize(p,g),(i=this._requestedCameraState)===null||i===void 0||i.resize(p,g);const E=!this._moving;return E&&(this.stop(),this.fire(new o.k("movestart",y)).fire(new o.k("move",y))),this.fire(new o.k("resize",y)),E&&this.fire(new o.k("moveend",y)),this}_getClampedPixelRatio(y,i){const{0:c,1:p}=this._maxCanvasSize,g=this.getPixelRatio(),x=y*g,E=i*g;return Math.min(x>c?c/x:1,E>p?p/E:1)*g}getPixelRatio(){var y;return(y=this._overridePixelRatio)!==null&&y!==void 0?y:devicePixelRatio}setPixelRatio(y){this._overridePixelRatio=y,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(y){return this.transform.setMaxBounds(It.convert(y)),this._update()}setMinZoom(y){if((y=y??-2)>=-2&&y<=this.transform.maxZoom)return this.transform.minZoom=y,this._update(),this.getZoom()<y&&this.setZoom(y),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(y){if((y=y??22)>=this.transform.minZoom)return this.transform.maxZoom=y,this._update(),this.getZoom()>y&&this.setZoom(y),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(y){if((y=y??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(y>=0&&y<=this.transform.maxPitch)return this.transform.minPitch=y,this._update(),this.getPitch()<y&&this.setPitch(y),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(y){if((y=y??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(y>=this.transform.minPitch)return this.transform.maxPitch=y,this._update(),this.getPitch()>y&&this.setPitch(y),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(y){return this.transform.renderWorldCopies=y,this._update()}getCooperativeGestures(){return this._cooperativeGestures}setCooperativeGestures(y){return this._cooperativeGestures=y,this._cooperativeGestures?this._setupCooperativeGestures():this._destroyCooperativeGestures(),this}project(y){return this.transform.locationPoint(o.L.convert(y),this.style&&this.terrain)}unproject(y){return this.transform.pointLocation(o.P.convert(y),this.terrain)}isMoving(){var y;return this._moving||((y=this.handlers)===null||y===void 0?void 0:y.isMoving())}isZooming(){var y;return this._zooming||((y=this.handlers)===null||y===void 0?void 0:y.isZooming())}isRotating(){var y;return this._rotating||((y=this.handlers)===null||y===void 0?void 0:y.isRotating())}_createDelegatedListener(y,i,c){if(y==="mouseenter"||y==="mouseover"){let p=!1;return{layer:i,listener:c,delegates:{mousemove:x=>{const E=this.getLayer(i)?this.queryRenderedFeatures(x.point,{layers:[i]}):[];E.length?p||(p=!0,c.call(this,new gi(y,this,x.originalEvent,{features:E}))):p=!1},mouseout:()=>{p=!1}}}}if(y==="mouseleave"||y==="mouseout"){let p=!1;return{layer:i,listener:c,delegates:{mousemove:E=>{(this.getLayer(i)?this.queryRenderedFeatures(E.point,{layers:[i]}):[]).length?p=!0:p&&(p=!1,c.call(this,new gi(y,this,E.originalEvent)))},mouseout:E=>{p&&(p=!1,c.call(this,new gi(y,this,E.originalEvent)))}}}}{const p=g=>{const x=this.getLayer(i)?this.queryRenderedFeatures(g.point,{layers:[i]}):[];x.length&&(g.features=x,c.call(this,g),delete g.features)};return{layer:i,listener:c,delegates:{[y]:p}}}}on(y,i,c){if(c===void 0)return super.on(y,i);const p=this._createDelegatedListener(y,i,c);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[y]=this._delegatedListeners[y]||[],this._delegatedListeners[y].push(p);for(const g in p.delegates)this.on(g,p.delegates[g]);return this}once(y,i,c){if(c===void 0)return super.once(y,i);const p=this._createDelegatedListener(y,i,c);for(const g in p.delegates)this.once(g,p.delegates[g]);return this}off(y,i,c){return c===void 0?super.off(y,i):(this._delegatedListeners&&this._delegatedListeners[y]&&(p=>{const g=this._delegatedListeners[y];for(let x=0;x<g.length;x++){const E=g[x];if(E.layer===i&&E.listener===c){for(const T in E.delegates)this.off(T,E.delegates[T]);return g.splice(x,1),this}}})(),this)}queryRenderedFeatures(y,i){if(!this.style)return[];let c;const p=y instanceof o.P||Array.isArray(y),g=p?y:[[0,0],[this.transform.width,this.transform.height]];if(i=i||(p?{}:y)||{},g instanceof o.P||typeof g[0]=="number")c=[o.P.convert(g)];else{const x=o.P.convert(g[0]),E=o.P.convert(g[1]);c=[x,new o.P(E.x,x.y),E,new o.P(x.x,E.y),x]}return this.style.queryRenderedFeatures(c,i,this.transform)}querySourceFeatures(y,i){return this.style.querySourceFeatures(y,i)}setStyle(y,i){return(i=o.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},i)).diff!==!1&&i.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&y?(this._diffStyle(y,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._updateStyle(y,i))}setTransformRequest(y){return this._requestManager.setTransformRequest(y),this}_getUIString(y){const i=this._locale[y];if(i==null)throw new Error(`Missing UI string '${y}'`);return i}_updateStyle(y,i){if(i.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(y,i));const c=this.style&&i.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!y)),y?(this.style=new mr(this,i||{}),this.style.setEventedParent(this,{style:this.style}),typeof y=="string"?this.style.loadURL(y,i,c):this.style.loadJSON(y,i,c),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new mr(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(y,i){if(typeof y=="string"){const c=this._requestManager.transformRequest(y,F.Style);o.f(c,(p,g)=>{p?this.fire(new o.j(p)):g&&this._updateDiff(g,i)})}else typeof y=="object"&&this._updateDiff(y,i)}_updateDiff(y,i){try{this.style.setState(y,i)&&this._update(!0)}catch(c){o.w(`Unable to perform style diff: ${c.message||c.error||c}.  Rebuilding the style from scratch.`),this._updateStyle(y,i)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():o.w("There is no style added to the map.")}addSource(y,i){return this._lazyInitEmptyStyle(),this.style.addSource(y,i),this._update(!0)}isSourceLoaded(y){const i=this.style&&this.style.sourceCaches[y];if(i!==void 0)return i.loaded();this.fire(new o.j(new Error(`There is no source with ID '${y}'`)))}setTerrain(y){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),y){const i=this.style.sourceCaches[y.source];if(!i)throw new Error(`cannot load terrain, because there exists no source with ID: ${y.source}`);for(const c in this.style._layers){const p=this.style._layers[c];p.type==="hillshade"&&p.source===y.source&&o.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Np(this.painter,i,y),this.painter.renderToTexture=new nc(this.painter,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=c=>{c.dataType==="style"?this.terrain.sourceCache.freeRtt():c.dataType==="source"&&c.tile&&(c.sourceId!==y.source||this._elevationFreeze||(this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(c.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0;return this.fire(new o.k("terrain",{terrain:y})),this}getTerrain(){var y,i;return(i=(y=this.terrain)===null||y===void 0?void 0:y.options)!==null&&i!==void 0?i:null}areTilesLoaded(){const y=this.style&&this.style.sourceCaches;for(const i in y){const c=y[i]._tiles;for(const p in c){const g=c[p];if(g.state!=="loaded"&&g.state!=="errored")return!1}}return!0}addSourceType(y,i,c){return this._lazyInitEmptyStyle(),this.style.addSourceType(y,i,c)}removeSource(y){return this.style.removeSource(y),this._update(!0)}getSource(y){return this.style.getSource(y)}addImage(y,i,c={}){const{pixelRatio:p=1,sdf:g=!1,stretchX:x,stretchY:E,content:T}=c;if(this._lazyInitEmptyStyle(),!(i instanceof HTMLImageElement||o.a(i))){if(i.width===void 0||i.height===void 0)return this.fire(new o.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:k,height:R,data:L}=i,z=i;return this.style.addImage(y,{data:new o.R({width:k,height:R},new Uint8Array(L)),pixelRatio:p,stretchX:x,stretchY:E,content:T,sdf:g,version:0,userImage:z}),z.onAdd&&z.onAdd(this,y),this}}{const{width:k,height:R,data:L}=o.h.getImageData(i);this.style.addImage(y,{data:new o.R({width:k,height:R},L),pixelRatio:p,stretchX:x,stretchY:E,content:T,sdf:g,version:0})}}updateImage(y,i){const c=this.style.getImage(y);if(!c)return this.fire(new o.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const p=i instanceof HTMLImageElement||o.a(i)?o.h.getImageData(i):i,{width:g,height:x,data:E}=p;if(g===void 0||x===void 0)return this.fire(new o.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(g!==c.data.width||x!==c.data.height)return this.fire(new o.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const T=!(i instanceof HTMLImageElement||o.a(i));return c.data.replace(E,T),this.style.updateImage(y,c),this}getImage(y){return this.style.getImage(y)}hasImage(y){return y?!!this.style.getImage(y):(this.fire(new o.j(new Error("Missing required image id"))),!1)}removeImage(y){this.style.removeImage(y)}loadImage(y,i){G.getImage(this._requestManager.transformRequest(y,F.Image),i)}listImages(){return this.style.listImages()}addLayer(y,i){return this._lazyInitEmptyStyle(),this.style.addLayer(y,i),this._update(!0)}moveLayer(y,i){return this.style.moveLayer(y,i),this._update(!0)}removeLayer(y){return this.style.removeLayer(y),this._update(!0)}getLayer(y){return this.style.getLayer(y)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(y,i,c){return this.style.setLayerZoomRange(y,i,c),this._update(!0)}setFilter(y,i,c={}){return this.style.setFilter(y,i,c),this._update(!0)}getFilter(y){return this.style.getFilter(y)}setPaintProperty(y,i,c,p={}){return this.style.setPaintProperty(y,i,c,p),this._update(!0)}getPaintProperty(y,i){return this.style.getPaintProperty(y,i)}setLayoutProperty(y,i,c,p={}){return this.style.setLayoutProperty(y,i,c,p),this._update(!0)}getLayoutProperty(y,i){return this.style.getLayoutProperty(y,i)}setGlyphs(y,i={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(y,i),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(y,i,c={}){return this._lazyInitEmptyStyle(),this.style.addSprite(y,i,c,p=>{p||this._update(!0)}),this}removeSprite(y){return this._lazyInitEmptyStyle(),this.style.removeSprite(y),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(y,i={}){return this._lazyInitEmptyStyle(),this.style.setSprite(y,i,c=>{c||this._update(!0)}),this}setLight(y,i={}){return this._lazyInitEmptyStyle(),this.style.setLight(y,i),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(y,i){return this.style.setFeatureState(y,i),this._update()}removeFeatureState(y,i){return this.style.removeFeatureState(y,i),this._update()}getFeatureState(y){return this.style.getFeatureState(y)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let y=0,i=0;return this._container&&(y=this._container.clientWidth||400,i=this._container.clientHeight||300),[y,i]}_setupContainer(){const y=this._container;y.classList.add("maplibregl-map");const i=this._canvasContainer=b.create("div","maplibregl-canvas-container",y);this._interactive&&i.classList.add("maplibregl-interactive"),this._canvas=b.create("canvas","maplibregl-canvas",i),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const c=this._containerDimensions(),p=this._getClampedPixelRatio(c[0],c[1]);this._resizeCanvas(c[0],c[1],p);const g=this._controlContainer=b.create("div","maplibregl-control-container",y),x=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(E=>{x[E]=b.create("div",`maplibregl-ctrl-${E} `,g)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){this._cooperativeGesturesScreen=b.create("div","maplibregl-cooperative-gesture-screen",this._container);let y=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(y=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use ⌘ + scroll to zoom the map"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${y}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,this._cooperativeGesturesScreen.setAttribute("aria-hidden","true"),this._canvasContainer.addEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.add("maplibregl-cooperative-gestures")}_destroyCooperativeGestures(){b.remove(this._cooperativeGesturesScreen),this._canvasContainer.removeEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.remove("maplibregl-cooperative-gestures")}_resizeCanvas(y,i,c){this._canvas.width=Math.floor(c*y),this._canvas.height=Math.floor(c*i),this._canvas.style.width=`${y}px`,this._canvas.style.height=`${i}px`}_setupPainter(){const y={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let i=null;this._canvas.addEventListener("webglcontextcreationerror",p=>{i={requestedAttributes:y},p&&(i.statusMessage=p.statusMessage,i.type=p.type)},{once:!0});const c=this._canvas.getContext("webgl2",y)||this._canvas.getContext("webgl",y);if(!c){const p="Failed to initialize WebGL";throw i?(i.message=p,new Error(JSON.stringify(i))):new Error(p)}this.painter=new Fa(c,this.transform),C.testSupport(c)}_onCooperativeGesture(y,i,c){return!i&&c<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(y){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||y,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(y){return this._update(),this._renderTaskQueue.add(y)}_cancelRenderFrame(y){this._renderTaskQueue.remove(y)}_render(y){const i=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(y),this._removed)return;let c=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const g=this.transform.zoom,x=o.h.now();this.style.zoomHistory.update(g,x);const E=new o.a8(g,{now:x,fadeDuration:i,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),T=E.crossFadingFactor();T===1&&T===this._crossFadingFactor||(c=!0,this._crossFadingFactor=T),this.style.update(E)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,i,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:i,showPadding:this.showPadding}),this.fire(new o.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,o.bg.mark(o.bh.load),this.fire(new o.k("load"))),this.style&&(this.style.hasTransitions()||c)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const p=this._sourcesDirty||this._styleDirty||this._placementDirty;return p||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new o.k("idle")),!this._loaded||this._fullyLoaded||p||(this._fullyLoaded=!0,o.bg.mark(o.bh.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){var y;this._hash&&this._hash.remove();for(const c of this._controls)c.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),G.removeThrottleControl(this._imageQueueHandle),(y=this._resizeObserver)===null||y===void 0||y.disconnect();const i=this.painter.context.gl.getExtension("WEBGL_lose_context");i&&i.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),b.remove(this._canvasContainer),b.remove(this._controlContainer),this._cooperativeGestures&&this._destroyCooperativeGestures(),this._container.classList.remove("maplibregl-map"),o.bg.clearMetrics(),this._removed=!0,this.fire(new o.k("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=o.h.frame(y=>{o.bg.frame(y),this._frame=null,this._render(y)}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(y){this._showTileBoundaries!==y&&(this._showTileBoundaries=y,this._update())}get showPadding(){return!!this._showPadding}set showPadding(y){this._showPadding!==y&&(this._showPadding=y,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(y){this._showCollisionBoxes!==y&&(this._showCollisionBoxes=y,y?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(y){this._showOverdrawInspector!==y&&(this._showOverdrawInspector=y,this._update())}get repaint(){return!!this._repaint}set repaint(y){this._repaint!==y&&(this._repaint=y,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(y){this._vertices=y,this._update()}get version(){return wt}getCameraTargetElevation(){return this.transform.elevation}},en.NavigationControl=class{constructor(y){this._updateZoomButtons=()=>{const i=this._map.getZoom(),c=i===this._map.getMaxZoom(),p=i===this._map.getMinZoom();this._zoomInButton.disabled=c,this._zoomOutButton.disabled=p,this._zoomInButton.setAttribute("aria-disabled",c.toString()),this._zoomOutButton.setAttribute("aria-disabled",p.toString())},this._rotateCompassArrow=()=>{const i=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=i},this._setButtonTitle=(i,c)=>{const p=this._map._getUIString(`NavigationControl.${c}`);i.title=p,i.setAttribute("aria-label",p)},this.options=o.e({},Yh,y),this._container=b.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",i=>i.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",i=>this._map.zoomIn({},{originalEvent:i})),b.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",i=>this._map.zoomOut({},{originalEvent:i})),b.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",i=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:i}):this._map.resetNorth({},{originalEvent:i})}),this._compassIcon=b.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(y){return this._map=y,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Jh(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){b.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(y,i){const c=b.create("button",y,this._container);return c.type="button",c.addEventListener("click",i),c}},en.GeolocateControl=class extends o.E{constructor(y){super(),this._onSuccess=i=>{if(this._map){if(this._isOutOfMapMaxBounds(i))return this._setErrorState(),this.fire(new o.k("outofmaxbounds",i)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=i,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(i),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(i),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new o.k("geolocate",i)),this._finish()}},this._updateCamera=i=>{const c=new o.L(i.coords.longitude,i.coords.latitude),p=i.coords.accuracy,g=this._map.getBearing(),x=o.e({bearing:g},this.options.fitBoundsOptions),E=It.fromLngLat(c,p);this._map.fitBounds(E,x,{geolocateSource:!0})},this._updateMarker=i=>{if(i){const c=new o.L(i.coords.longitude,i.coords.latitude);this._accuracyCircleMarker.setLngLat(c).addTo(this._map),this._userLocationDotMarker.setLngLat(c).addTo(this._map),this._accuracy=i.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=i=>{if(this._map){if(this.options.trackUserLocation)if(i.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(i.code===3&&Lo)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new o.k("error",i)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=i=>{if(this._map){if(this._container.addEventListener("contextmenu",c=>c.preventDefault()),this._geolocateButton=b.create("button","maplibregl-ctrl-geolocate",this._container),b.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",i===!1){o.w("Geolocation support is not available so the GeolocateControl will be disabled.");const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}else{const c=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=b.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Ba({element:this._dotElement}),this._circleElement=b.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Ba({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",c=>{c.geolocateSource||this._watchState!=="ACTIVE_LOCK"||c.originalEvent&&c.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new o.k("trackuserlocationend")))})}},this.options=o.e({},Mn,y)}onAdd(y){return this._map=y,this._container=b.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(i,c=!1){jn===void 0||c?window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(p=>{jn=p.state!=="denied",i(jn)}).catch(()=>{jn=!!window.navigator.geolocation,i(jn)}):(jn=!!window.navigator.geolocation,i(jn)):i(jn)}(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),b.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Cn=0,Lo=!1}_isOutOfMapMaxBounds(y){const i=this._map.getMaxBounds(),c=y.coords;return i&&(c.longitude<i.getWest()||c.longitude>i.getEast()||c.latitude<i.getSouth()||c.latitude>i.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const y=this._map.getBounds(),i=y.getSouthEast(),c=y.getNorthEast(),p=i.distanceTo(c),g=Math.ceil(this._accuracy/(p/this._map._container.clientHeight)*2);this._circleElement.style.width=`${g}px`,this._circleElement.style.height=`${g}px`}trigger(){if(!this._setup)return o.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new o.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Cn--,Lo=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new o.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new o.k("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let y;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Cn++,Cn>1?(y={maximumAge:6e5,timeout:0},Lo=!0):(y=this.options.positionOptions,Lo=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,y)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},en.AttributionControl=yi,en.LogoControl=fn,en.ScaleControl=class{constructor(y){this._onMove=()=>{Zl(this._map,this._container,this.options)},this.setUnit=i=>{this.options.unit=i,Zl(this._map,this._container,this.options)},this.options=o.e({},Gl,y)}getDefaultPosition(){return"bottom-left"}onAdd(y){return this._map=y,this._container=b.create("div","maplibregl-ctrl maplibregl-ctrl-scale",y.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){b.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},en.FullscreenControl=class extends o.E{constructor(y={}){super(),this._onFullscreenChange=()=>{(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,y&&y.container&&(y.container instanceof HTMLElement?this._container=y.container:o.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(y){return this._map=y,this._container||(this._container=this._map.getContainer()),this._controlContainer=b.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){b.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const y=this._fullscreenButton=b.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);b.create("span","maplibregl-ctrl-icon",y).setAttribute("aria-hidden","true"),y.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const y=this._getTitle();this._fullscreenButton.setAttribute("aria-label",y),this._fullscreenButton.title=y}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new o.k("fullscreenstart")),this._map._cooperativeGestures&&(this._prevCooperativeGestures=this._map._cooperativeGestures,this._map.setCooperativeGestures())):(this.fire(new o.k("fullscreenend")),this._prevCooperativeGestures&&(this._map.setCooperativeGestures(this._prevCooperativeGestures),delete this._prevCooperativeGestures))}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},en.TerrainControl=class{constructor(y){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))},this.options=y}onAdd(y){return this._map=y,this._container=b.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=b.create("button","maplibregl-ctrl-terrain",this._container),b.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){b.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},en.Popup=class extends o.E{constructor(y){super(),this.remove=()=>(this._content&&b.remove(this._content),this._container&&(b.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new o.k("close")),this),this._onMouseUp=i=>{this._update(i.point)},this._onMouseMove=i=>{this._update(i.point)},this._onDrag=i=>{this._update(i.point)},this._update=i=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=b.create("div","maplibregl-popup",this._map.getContainer()),this._tip=b.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const E of this.options.className.split(" "))this._container.classList.add(E);this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=ed(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!i)return;const c=this._pos=this._trackPointer&&i?i:this._map.project(this._lngLat);let p=this.options.anchor;const g=zo(this.options.offset);if(!p){const E=this._container.offsetWidth,T=this._container.offsetHeight;let k;k=c.y+g.bottom.y<T?["top"]:c.y>this._map.transform.height-T?["bottom"]:[],c.x<E/2?k.push("left"):c.x>this._map.transform.width-E/2&&k.push("right"),p=k.length===0?"bottom":k.join("-")}const x=c.add(g[p]).round();b.setTransform(this._container,`${Fi[p]} translate(${x.x}px,${x.y}px)`),Bp(this._container,p,"popup")},this._onClose=()=>{this.remove()},this.options=o.e(Object.create(td),y)}addTo(y){return this._map&&this.remove(),this._map=y,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new o.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(y){return this._lngLat=o.L.convert(y),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(y){return this.setDOMContent(document.createTextNode(y))}setHTML(y){const i=document.createDocumentFragment(),c=document.createElement("body");let p;for(c.innerHTML=y;p=c.firstChild,p;)i.appendChild(p);return this.setDOMContent(i)}getMaxWidth(){var y;return(y=this._container)===null||y===void 0?void 0:y.style.maxWidth}setMaxWidth(y){return this.options.maxWidth=y,this._update(),this}setDOMContent(y){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=b.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(y),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(y){this._container&&this._container.classList.add(y)}removeClassName(y){this._container&&this._container.classList.remove(y)}setOffset(y){return this.options.offset=y,this._update(),this}toggleClassName(y){if(this._container)return this._container.classList.toggle(y)}_createCloseButton(){this.options.closeButton&&(this._closeButton=b.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const y=this._container.querySelector(nd);y&&y.focus()}},en.Marker=Ba,en.Style=mr,en.LngLat=o.L,en.LngLatBounds=It,en.Point=o.P,en.MercatorCoordinate=o.U,en.Evented=o.E,en.AJAXError=o.bi,en.config=o.c,en.CanvasSource=cs,en.GeoJSONSource=ki,en.ImageSource=Hr,en.RasterDEMTileSource=Zr,en.RasterTileSource=hr,en.VectorTileSource=hi,en.VideoSource=aa,en.setRTLTextPlugin=o.bj,en.getRTLTextPluginStatus=o.bk,en.prewarm=function(){Gi().acquire(Je)},en.clearPrewarmedResources=function(){const y=An;y&&(y.isPreloaded()&&y.numActive()===1?(y.release(Je),An=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},rd.extend(en,{isSafari:o.ac,getPerformanceMetrics:o.bg.getPerformanceMetrics}),en});var f=u;return f})})(XD);var kG=XD.exports;function IG({mapOptions:e,enable3D:t=!1,disableRotation:n=!1}){const[s,u]=Q.useState(null),[h,f]=Q.useState(!1);return Q.useEffect(()=>{const o=new kG.Map({container:"maplibre-gl-map",style:{version:8,sources:{},layers:[]},center:[0,0],zoom:1,attributionControl:!1,...e});u(o)},[]),Q.useEffect(()=>{s&&s.on("load",()=>{s.addSource("terrainSource",{type:"raster-dem",tiles:["https://vtc-cdn.maptoolkit.net/terrainrgb/{z}/{x}/{y}.webp"],encoding:"mapbox",maxzoom:14,minzoom:4}),f(!0)})},[s]),Q.useEffect(()=>{!s||!h||(t?s.setTerrain({source:"terrainSource",exaggeration:.6}):s.setTerrain())},[s,h,t]),Q.useEffect(()=>{!s||!n||(s.dragRotate.disable(),s.touchZoomRotate.disableRotation())},[s,n]),{map:s,isMapLoaded:h}}const MG={osm:{version:8,sources:{osm:{type:"raster",tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:'Map tiles by <a target="_top" rel="noopener" href="https://tile.openstreetmap.org/">OpenStreetMap tile servers</a>, under the <a target="_top" rel="noopener" href="https://operations.osmfoundation.org/policies/tiles/">tile usage policy</a>. Data by <a target="_top" rel="noopener" href="http://openstreetmap.org">OpenStreetMap</a>'}},layers:[{id:"osm",type:"raster",source:"osm"}]},"osm-light":{version:8,sources:{"osm-light":{type:"raster",tiles:["https://a.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png","https://b.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png","https://c.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png"],tileSize:256,attribution:"",maxzoom:18}},layers:[{id:"osm-light",type:"raster",source:"osm-light"}]},satellite:{version:8,sources:{satellite:{type:"raster",tiles:["https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}"],tileSize:256,attribution:"",maxzoom:18}},layers:[{id:"satellite",type:"raster",source:"satellite"}]},topo:{version:8,sources:{topo:{type:"raster",tiles:["https://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}"],maxZoom:18}},layers:[{id:"topo",type:"raster",source:"topo"}]},hybrid:{version:8,sources:{hybrid:{type:"raster",tiles:["https://mt1.google.com/vt/lyrs=p&x={x}&y={y}&z={z}"],maxZoom:18}},layers:[{id:"hybrid",type:"raster",source:"hybrid"}]}};let Od={};function RG({map:e,baseLayers:t=MG,activeLayer:n="osm"}){const s=Q.useCallback(()=>{if(!(e!=null&&e.isStyleLoaded)||!e.getStyle())return;const{sources:u,layers:h}=e.getStyle();n in u||!(n in t)||(Od=u,h.forEach(f=>{Od[f.id]&&(Od[f.id].layer=f)}),e.setStyle(t[n]),Object.keys(Od).forEach(f=>{const{type:o,data:w,layer:b}=Od[f];!w||!b||(e.addSource(f,{type:o,data:w}),e.addLayer({id:f,...b}),e.off("style.load",s))}))},[e,t,n]);return Q.useEffect(()=>e?(e.once("style.load",s),()=>e.off("style.load",s)):()=>{},[e,n,t,s]),Q.useEffect(()=>{!e||!e.isStyleLoaded||s()},[e,n,s]),null}function DG(){const{map:e,isMapLoaded:t}=IG({mapOptions:{zoom:4,center:[80.0711,28.994],maxZoom:19}});return K(AG,{map:e,isMapLoaded:t,style:{width:"100%",height:"560px"},children:K(RG,{})})}function LG(){return K("main",{className:"contact naxatw-w-full",children:Ne("div",{className:"naxatw-flex naxatw-flex-col md:naxatw-flex-row naxatw-container naxatw-py-6 md:naxatw-py-14 naxatw-gap-8",children:[K("div",{className:"naxatw-w-full md:naxatw-w-[55%]",children:K(CG,{})}),K("div",{className:"naxatw-w-full md:naxatw-w-[45%] naxatw-rounded-xl naxatw-overflow-hidden naxatw-border naxatw-border-primary",children:K(DG,{})})]})})}function zG(){return K(LG,{})}function Xs({message:e}){return K("span",{role:"alert",className:"naxatw-px-1 naxatw-pt-2 naxatw-text-sm naxatw-text-red-500",children:e})}const OG=e=>Ma.post("user/login/",e),FG=e=>Ma.post("user/sign-up/",e),NG=e=>Jf.post("https://sujanadh.pythonanywhere.com/api/user/google-login/",e),BG=e=>Jf.post("https://sujanadh.pythonanywhere.com/api/user/reset-password-request/",e),VG=e=>Jf.post("https://sujanadh.pythonanywhere.com/api/user/resend-verification-email/",e);function jG(){const[e,t]=Q.useState(""),[n,s]=Q.useState(""),[u,h]=Q.useState(!1),[f,o]=Q.useState(!1),w=localStorage.getItem("signup_email");return w||t("No email found. Please sign up again."),Ne(ev,{gap:4,className:"naxatw-w-full naxatw-flex-col naxatw-items-center naxatw-justify-center naxatw-pb-4 naxatw-mt-[60px]",children:[K("h3",{className:"naxatw-text-2xl naxatw-font-bold naxatw-mb-2",children:"Verify Your Email"}),K("p",{className:"naxatw-text-center naxatw-text-grey-700 naxatw-mb-4 naxatw-max-w-xs",children:"Please check your registered email for a verification link. Click the link to verify your email."}),!f&&K("button",{type:"button",className:"naxatw-text-blue-600 hover:naxatw-underline naxatw-mb-2 naxatw-bg-transparent naxatw-border-0 naxatw-cursor-pointer naxatw-text-base",onClick:async()=>{var C,A,M,N,V,$;t(""),s(""),h(!0),o(!1);try{if(!w){t("No email found. Please sign up again."),h(!1);return}await VG({email:w}),s("Verification email resent successfully. Please check your inbox.")}catch(G){const F=((A=(C=G==null?void 0:G.response)==null?void 0:C.data)==null?void 0:A.detail)||((N=(M=G==null?void 0:G.response)==null?void 0:M.data)==null?void 0:N.message)||(typeof((V=G==null?void 0:G.response)==null?void 0:V.data)=="string"?($=G==null?void 0:G.response)==null?void 0:$.data:"Failed to resend verification email.");t(F),typeof F=="string"&&F.toLowerCase().includes("already verified")&&o(!0)}finally{h(!1)}},disabled:u,children:u?"Resending...":"Resend verification email"}),f&&K("span",{className:"naxatw-text-green-600 naxatw-text-sm naxatw-pt-2",children:e}),!f&&e&&K(Xs,{message:e}),n&&K("span",{className:"naxatw-text-green-600 naxatw-text-sm naxatw-pt-2",children:n})]})}const $G=[{path:"/",name:"Home ",component:zq,authenticated:!1},{path:"/notes",name:"Notes ",component:Fq,authenticated:!1},{path:"/exam",name:"Exam ",component:TG,authenticated:!1},{path:"/contact",name:"Contact ",component:zG,authenticated:!1},{path:"/verify-email",name:"Verify Email",component:jG,authenticated:!1}];function dw(e,t){return dw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,u){return s.__proto__=u,s},dw(e,t)}function YD(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,dw(e,t)}function UG(e,t){return e.classList?!!t&&e.classList.contains(t):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")!==-1}function qG(e,t){e.classList?e.classList.add(t):UG(e,t)||(typeof e.className=="string"?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}function aP(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function GG(e,t){e.classList?e.classList.remove(t):typeof e.className=="string"?e.className=aP(e.className,t):e.setAttribute("class",aP(e.className&&e.className.baseVal||"",t))}const oP={disabled:!1},JD=_t.createContext(null);var eL=function(t){return t.scrollTop},Zd="unmounted",iu="exited",su="entering",yc="entered",fw="exiting",bo=function(e){YD(t,e);function t(s,u){var h;h=e.call(this,s,u)||this;var f=u,o=f&&!f.isMounting?s.enter:s.appear,w;return h.appearStatus=null,s.in?o?(w=iu,h.appearStatus=su):w=yc:s.unmountOnExit||s.mountOnEnter?w=Zd:w=iu,h.state={status:w},h.nextCallback=null,h}t.getDerivedStateFromProps=function(u,h){var f=u.in;return f&&h.status===Zd?{status:iu}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(u){var h=null;if(u!==this.props){var f=this.state.status;this.props.in?f!==su&&f!==yc&&(h=su):(f===su||f===yc)&&(h=fw)}this.updateStatus(!1,h)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var u=this.props.timeout,h,f,o;return h=f=o=u,u!=null&&typeof u!="number"&&(h=u.exit,f=u.enter,o=u.appear!==void 0?u.appear:f),{exit:h,enter:f,appear:o}},n.updateStatus=function(u,h){if(u===void 0&&(u=!1),h!==null)if(this.cancelNextCallback(),h===su){if(this.props.unmountOnExit||this.props.mountOnEnter){var f=this.props.nodeRef?this.props.nodeRef.current:Cm.findDOMNode(this);f&&eL(f)}this.performEnter(u)}else this.performExit();else this.props.unmountOnExit&&this.state.status===iu&&this.setState({status:Zd})},n.performEnter=function(u){var h=this,f=this.props.enter,o=this.context?this.context.isMounting:u,w=this.props.nodeRef?[o]:[Cm.findDOMNode(this),o],b=w[0],C=w[1],A=this.getTimeouts(),M=o?A.appear:A.enter;if(!u&&!f||oP.disabled){this.safeSetState({status:yc},function(){h.props.onEntered(b)});return}this.props.onEnter(b,C),this.safeSetState({status:su},function(){h.props.onEntering(b,C),h.onTransitionEnd(M,function(){h.safeSetState({status:yc},function(){h.props.onEntered(b,C)})})})},n.performExit=function(){var u=this,h=this.props.exit,f=this.getTimeouts(),o=this.props.nodeRef?void 0:Cm.findDOMNode(this);if(!h||oP.disabled){this.safeSetState({status:iu},function(){u.props.onExited(o)});return}this.props.onExit(o),this.safeSetState({status:fw},function(){u.props.onExiting(o),u.onTransitionEnd(f.exit,function(){u.safeSetState({status:iu},function(){u.props.onExited(o)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(u,h){h=this.setNextCallback(h),this.setState(u,h)},n.setNextCallback=function(u){var h=this,f=!0;return this.nextCallback=function(o){f&&(f=!1,h.nextCallback=null,u(o))},this.nextCallback.cancel=function(){f=!1},this.nextCallback},n.onTransitionEnd=function(u,h){this.setNextCallback(h);var f=this.props.nodeRef?this.props.nodeRef.current:Cm.findDOMNode(this),o=u==null&&!this.props.addEndListener;if(!f||o){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var w=this.props.nodeRef?[this.nextCallback]:[f,this.nextCallback],b=w[0],C=w[1];this.props.addEndListener(b,C)}u!=null&&setTimeout(this.nextCallback,u)},n.render=function(){var u=this.state.status;if(u===Zd)return null;var h=this.props,f=h.children;h.in,h.mountOnEnter,h.unmountOnExit,h.appear,h.enter,h.exit,h.timeout,h.addEndListener,h.onEnter,h.onEntering,h.onEntered,h.onExit,h.onExiting,h.onExited,h.nodeRef;var o=h1(h,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return _t.createElement(JD.Provider,{value:null},typeof f=="function"?f(u,o):_t.cloneElement(_t.Children.only(f),o))},t}(_t.Component);bo.contextType=JD;bo.propTypes={};function mc(){}bo.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:mc,onEntering:mc,onEntered:mc,onExit:mc,onExiting:mc,onExited:mc};bo.UNMOUNTED=Zd;bo.EXITED=iu;bo.ENTERING=su;bo.ENTERED=yc;bo.EXITING=fw;const ZG=bo;var WG=function(t,n){return t&&n&&n.split(" ").forEach(function(s){return qG(t,s)})},E_=function(t,n){return t&&n&&n.split(" ").forEach(function(s){return GG(t,s)})},zb=function(e){YD(t,e);function t(){for(var s,u=arguments.length,h=new Array(u),f=0;f<u;f++)h[f]=arguments[f];return s=e.call.apply(e,[this].concat(h))||this,s.appliedClasses={appear:{},enter:{},exit:{}},s.onEnter=function(o,w){var b=s.resolveArguments(o,w),C=b[0],A=b[1];s.removeClasses(C,"exit"),s.addClass(C,A?"appear":"enter","base"),s.props.onEnter&&s.props.onEnter(o,w)},s.onEntering=function(o,w){var b=s.resolveArguments(o,w),C=b[0],A=b[1],M=A?"appear":"enter";s.addClass(C,M,"active"),s.props.onEntering&&s.props.onEntering(o,w)},s.onEntered=function(o,w){var b=s.resolveArguments(o,w),C=b[0],A=b[1],M=A?"appear":"enter";s.removeClasses(C,M),s.addClass(C,M,"done"),s.props.onEntered&&s.props.onEntered(o,w)},s.onExit=function(o){var w=s.resolveArguments(o),b=w[0];s.removeClasses(b,"appear"),s.removeClasses(b,"enter"),s.addClass(b,"exit","base"),s.props.onExit&&s.props.onExit(o)},s.onExiting=function(o){var w=s.resolveArguments(o),b=w[0];s.addClass(b,"exit","active"),s.props.onExiting&&s.props.onExiting(o)},s.onExited=function(o){var w=s.resolveArguments(o),b=w[0];s.removeClasses(b,"exit"),s.addClass(b,"exit","done"),s.props.onExited&&s.props.onExited(o)},s.resolveArguments=function(o,w){return s.props.nodeRef?[s.props.nodeRef.current,o]:[o,w]},s.getClassNames=function(o){var w=s.props.classNames,b=typeof w=="string",C=b&&w?w+"-":"",A=b?""+C+o:w[o],M=b?A+"-active":w[o+"Active"],N=b?A+"-done":w[o+"Done"];return{baseClassName:A,activeClassName:M,doneClassName:N}},s}var n=t.prototype;return n.addClass=function(u,h,f){var o=this.getClassNames(h)[f+"ClassName"],w=this.getClassNames("enter"),b=w.doneClassName;h==="appear"&&f==="done"&&b&&(o+=" "+b),f==="active"&&u&&eL(u),o&&(this.appliedClasses[h][f]=o,WG(u,o))},n.removeClasses=function(u,h){var f=this.appliedClasses[h],o=f.base,w=f.active,b=f.done;this.appliedClasses[h]={},o&&E_(u,o),w&&E_(u,w),b&&E_(u,b)},n.render=function(){var u=this.props;u.classNames;var h=h1(u,["classNames"]);return _t.createElement(ZG,Eu({},h,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(_t.Component);zb.defaultProps={classNames:""};zb.propTypes={};const HG=zb;function tL({title:e,subtitle:t,show:n,onClose:s,children:u,className:h,headerContent:f,zIndex:o=1111,hideCloseButton:w}){const b=Q.useRef(null);return K(HG,{nodeRef:b,in:n,timeout:150,unmountOnExit:!0,classNames:{enter:"naxatw-opacity-0 naxatw-scale-95",enterActive:"naxatw-opacity-100 naxatw-scale-100 naxatw-transition-all naxatw-ease-in naxatw-duration-150",enterDone:"naxatw-opacity-100 naxatw-scale-100",exit:"naxatw-opacity-50 naxatw-scale-75 naxatw-transition-all naxatw-ease-out naxatw-duration-150",exitActive:"naxatw-opacity-0 naxatw-scale-50"},children:K("div",{tabIndex:-1,className:` naxatw-h-modal naxatw-fixed naxatw-inset-0 naxatw-z-[11111] naxatw-flex 
          naxatw-h-screen naxatw-w-screen naxatw-justify-center naxatw-overflow-y-auto naxatw-overflow-x-hidden
          naxatw-bg-black naxatw-bg-opacity-30 naxatw-p-4 md:naxatw-inset-0 md:naxatw-h-full
      `,style:{zIndex:o},children:K("div",{ref:b,className:"naxatw-fixed naxatw-inset-0 naxatw-overflow-y-auto",children:K("div",{className:`naxatw-flex naxatw-min-h-full naxatw-items-center \r
            naxatw-justify-center naxatw-p-4`,children:K("div",{className:`naxatw-relative naxatw-flex naxatw-h-full naxatw-w-full\r
              naxatw-max-w-2xl naxatw-flex-col naxatw-items-center naxatw-justify-center md:naxatw-h-auto`,children:Ne("div",{className:`naxatw-relative naxatw-max-h-[calc(100vh-4rem)] naxatw-w-[42rem] naxatw-overflow-hidden
                   naxatw-rounded-[20px] naxatw-bg-white naxatw-shadow ${h}`,children:[Ne("div",{className:`naxatw-flex naxatw-items-start naxatw-justify-between
                    naxatw-rounded-t-[20px] naxatw-px-7 naxatw-py-5`,children:[f||Ne("div",{className:"naxatw-space-y-1",children:[K("h3",{className:"naxatw-font-bold ",children:e}),K("p",{className:"naxatw-text-body-lg",children:t})]}),!w&&Ne("button",{type:"button",className:`naxatw-ml-auto naxatw-inline-flex naxatw-items-center \r
                      naxatw-rounded-lg naxatw-bg-transparent naxatw-p-1.5 naxatw-text-sm\r
                      naxatw-text-grey-800 hover:naxatw-bg-grey-200 hover:naxatw-text-grey-900`,onClick:s,children:[K("i",{className:"material-icons",children:"close"}),K("span",{className:"naxatw-sr-only",children:"Close modal"})]})]}),K("div",{className:"naxatw-flex",children:K("div",{className:`scrollbar naxatw-max-h-[calc(100vh-10rem)] naxatw-grow naxatw-overflow-y-auto\r
                      naxatw-px-10 naxatw-pb-5`,children:u})})]})})})})})})}function nL({title:e="",show:t=!1,onClose:n=()=>{},children:s}){return K(tL,{show:t,title:e,onClose:n,zIndex:111111,children:s})}const lP=[{label:"Home",path:"/"},{label:"Notes",path:"/notes"},{label:"Exams",path:"/exam"},{label:"Contact",path:"/contact"}],KG=({subLinks:e})=>{var s;const[t,n]=Q.useState(!1);return Ne("div",{className:"naxatw-border-b naxatw-border-solid naxatw-border-b-[#D9D9D9]",children:[Ne("div",{className:"naxatw-flex naxatw-items-center naxatw-justify-between naxatw-gap-1",onClick:()=>n(!t),children:[K("p",{className:"naxatw-py-3 naxatw-text-2xl naxatw-font-medium naxatw-capitalize",children:e.label}),K(Gr,{name:t?"keyboard_arrow_up":"keyboard_arrow_down",className:"custom-btn-transition naxatw-h-4 !naxatw-text-2xl naxatw-text-[#131417]"})]}),K("div",{className:`common-btn-transition naxatw-flex naxatw-flex-col naxatw-gap-4 naxatw-overflow-hidden naxatw-px-4  ${t?"naxatw-pointer-events-auto naxatw-h-[245px]  naxatw-pt-3":"naxatw-pointer-events-none naxatw-h-0"} `,children:(s=e==null?void 0:e.children)==null?void 0:s.map(u=>Ne(x1,{to:u.link,className:"naxatw-flex naxatw-cursor-pointer naxatw-items-center naxatw-gap-5",children:[K("div",{className:"icon-container naxatw-h-9 naxatw-w-9 naxatw-rounded-lg naxatw-bg-[#cde5fd80] naxatw-p-2",children:K("img",{src:u.icon,alt:u.label})}),K("p",{className:"naxatw-text-lg naxatw-font-medium naxatw-leading-6 naxatw-tracking-[-0.0225rem]",children:u.label})]},u.id))})]})},XG=({navItems:e,mobileViewNavRef:t})=>{const n=Hk(),s=io(h=>h.common.navbarToggled);return Ne("div",{className:"mobile-view-navbar",children:[K("button",{type:"button",onClick:()=>{var h,f,o,w;s?(document.body.style.overflow="auto",(f=(h=t==null?void 0:t.current)==null?void 0:h.classList)==null||f.remove("nav-open")):(document.body.style.overflow="hidden",(w=(o=t==null?void 0:t.current)==null?void 0:o.classList)==null||w.add("nav-open")),n($C(!s))},className:"md:naxatw-hidden",children:s?K("div",{className:"close-btn naxatw-mt-2 naxatw-flex naxatw-cursor-pointer naxatw-items-center",children:K(Gr,{name:"close",className:"naxatw-text-white naxatw-text-2xl"})}):K("div",{className:"naxatw-flex naxatw-mt-2 naxatw-cursor-pointer naxatw-items-center",children:K(Gr,{name:"menu",className:"naxatw-text-white naxatw-text-2xl"})})}),s&&K("nav",{className:"primary-navigation naxatw-fixed naxatw-inset-x-0 naxatw-bottom-0 naxatw-top-[70px] naxatw-z-[99] naxatw-block naxatw-bg-[#FBF8F3] md:naxatw-hidden",ref:t,children:Ne("div",{className:"naxatw-flex naxatw-h-full naxatw-flex-col",children:[K("div",{className:"naxatw-flex naxatw-flex-1 naxatw-flex-col naxatw-px-4 naxatw-pt-5",children:e==null?void 0:e.map(h=>h!=null&&h.children?K(KG,{subLinks:h},h.id):K(x1,{to:h.path,onClick:()=>n($C(!1)),children:K("p",{className:"naxatw-border-b naxatw-border-solid naxatw-border-b-[#D9D9D9] naxatw-py-3 naxatw-text-2xl naxatw-font-medium naxatw-capitalize",children:h.label})},h.path))}),Ne("p",{className:"naxatw-border-t naxatw-border-solid naxatw-border-t-[#EDEDED] naxatw-py-6 naxatw-text-center naxatw-text-base naxatw-leading-[1.575rem] naxatw-tracking-[-0.00563rem] naxatw-text-[#000]",children:["© GeoSewa ",new Date().getFullYear(),". All Rights Reserved."]})]})})]})},rL="/assets/person-778a1af1.svg";function QG(){const e=Pl(),t=Gy(),n=Q.useRef(null),{isAuthenticated:s}=dM(),u=localStorage.getItem("username"),h=()=>{localStorage.removeItem("token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("username"),window.location.reload()};return K("nav",{className:"naxatw-bg-primary naxatw-sticky naxatw-top-0 naxatw-z-10",children:K("nav",{className:"naxatw-container naxatw-py-3",children:Ne(Ji,{className:"naxatw-items-center naxatw-justify-between",children:[Ne(Ji,{className:"naxatw-text-white naxatw-items-center",gap:2,children:[K(Gr,{name:"public"}),K("div",{className:"naxatw-cursor-pointer",role:"presentation",onClick:()=>t("/"),children:K("h3",{className:"naxatw-text-white naxatw-font-medium",children:"GeoSewa"})})]}),K(Ji,{className:"naxatw-hidden md:naxatw-flex naxatw-gap-4 naxatw-mt-1 naxatw-text-white",children:lP.map(f=>K(x1,{to:f.path,className:({isActive:o})=>`${o&&"naxatw-text-red-500"} naxatw-px-3 naxatw-py-2 naxatw-tracking-wide naxatw-text-[1rem] hover:naxatw-text-red-500`,children:f.label},f.path))}),K(Ji,{className:"naxatw-hidden md:naxatw-flex naxatw-items-center",gap:2,children:s?Ne(Ji,{className:"naxatw-items-center naxatw-gap-2",children:[K("img",{src:rL,alt:"user",width:32,height:32,style:{borderRadius:"50%"}}),K("span",{className:"naxatw-text-white naxatw-font-medium",children:u}),K("button",{onClick:h,className:"naxatw-ml-2 naxatw-bg-red-500 naxatw-text-white naxatw-px-3 naxatw-py-1 naxatw-rounded hover:naxatw-bg-red-600",children:"Logout"})]}):Ne(rs,{children:[K(Ps,{variant:"outline",className:"naxatw-w-24 naxatw-text-body-lg",onClick:()=>e(sh("login")),children:"Login"}),K(Ps,{variant:"default",className:"naxatw-w-24 naxatw-border !naxatw-border-white naxatw-text-body-lg hover:naxatw-bg-white hover:naxatw-text-primary",onClick:()=>e(sh("sign-up")),children:"Sign Up"})]})}),K(XG,{navItems:lP,mobileViewNavRef:n})]})})})}const YG="/assets/google-icon-849e85b0.svg";var ep=e=>e.type==="checkbox",zc=e=>e instanceof Date,Ei=e=>e==null;const iL=e=>typeof e=="object";var br=e=>!Ei(e)&&!Array.isArray(e)&&iL(e)&&!zc(e),JG=e=>br(e)&&e.target?ep(e.target)?e.target.checked:e.target.value:e,eZ=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,tZ=(e,t)=>e.has(eZ(t)),nZ=e=>{const t=e.constructor&&e.constructor.prototype;return br(t)&&t.hasOwnProperty("isPrototypeOf")},Ob=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function bs(e){let t;const n=Array.isArray(e);if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(!(Ob&&(e instanceof Blob||e instanceof FileList))&&(n||br(e)))if(t=n?[]:{},!n&&!nZ(e))t=e;else for(const s in e)e.hasOwnProperty(s)&&(t[s]=bs(e[s]));else return e;return t}var tp=e=>Array.isArray(e)?e.filter(Boolean):[],ur=e=>e===void 0,Pt=(e,t,n)=>{if(!t||!br(e))return n;const s=tp(t.split(/[,[\].]+?/)).reduce((u,h)=>Ei(u)?u:u[h],e);return ur(s)||s===e?ur(e[t])?n:e[t]:s},eo=e=>typeof e=="boolean";const uP={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},ta={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Xa={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"};_t.createContext(null);var rZ=(e,t,n,s=!0)=>{const u={defaultValues:t._defaultValues};for(const h in e)Object.defineProperty(u,h,{get:()=>{const f=h;return t._proxyFormState[f]!==ta.all&&(t._proxyFormState[f]=!s||ta.all),n&&(n[f]=!0),e[f]}});return u},Qi=e=>br(e)&&!Object.keys(e).length,iZ=(e,t,n,s)=>{n(e);const{name:u,...h}=e;return Qi(h)||Object.keys(h).length>=Object.keys(t).length||Object.keys(h).find(f=>t[f]===(!s||ta.all))},T_=e=>Array.isArray(e)?e:[e];function sZ(e){const t=_t.useRef(e);t.current=e,_t.useEffect(()=>{const n=!e.disabled&&t.current.subject&&t.current.subject.subscribe({next:t.current.next});return()=>{n&&n.unsubscribe()}},[e.disabled])}var Sa=e=>typeof e=="string",aZ=(e,t,n,s,u)=>Sa(e)?(s&&t.watch.add(e),Pt(n,e,u)):Array.isArray(e)?e.map(h=>(s&&t.watch.add(h),Pt(n,h))):(s&&(t.watchAll=!0),n),Fb=e=>/^\w*$/.test(e),sL=e=>tp(e.replace(/["|']|\]/g,"").split(/\.|\[/)),Ln=(e,t,n)=>{let s=-1;const u=Fb(t)?[t]:sL(t),h=u.length,f=h-1;for(;++s<h;){const o=u[s];let w=n;if(s!==f){const b=e[o];w=br(b)||Array.isArray(b)?b:isNaN(+u[s+1])?{}:[]}e[o]=w,e=e[o]}return e},oZ=(e,t,n,s,u)=>t?{...n[e],types:{...n[e]&&n[e].types?n[e].types:{},[s]:u||!0}}:{},cP=e=>({isOnSubmit:!e||e===ta.onSubmit,isOnBlur:e===ta.onBlur,isOnChange:e===ta.onChange,isOnAll:e===ta.all,isOnTouch:e===ta.onTouched}),hP=(e,t,n)=>!n&&(t.watchAll||t.watch.has(e)||[...t.watch].some(s=>e.startsWith(s)&&/^\.\w+/.test(e.slice(s.length))));const lf=(e,t,n,s)=>{for(const u of n||Object.keys(e)){const h=Pt(e,u);if(h){const{_f:f,...o}=h;if(f){if(f.refs&&f.refs[0]&&t(f.refs[0],u)&&!s)break;if(f.ref&&t(f.ref,f.name)&&!s)break;lf(o,t)}else br(o)&&lf(o,t)}}};var lZ=(e,t,n)=>{const s=tp(Pt(e,n));return Ln(s,"root",t[n]),Ln(e,n,s),e},Nb=e=>e.type==="file",il=e=>typeof e=="function",ny=e=>{if(!Ob)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},lg=e=>Sa(e),Bb=e=>e.type==="radio",ry=e=>e instanceof RegExp;const dP={value:!1,isValid:!1},fP={value:!0,isValid:!0};var aL=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!ur(e[0].attributes.value)?ur(e[0].value)||e[0].value===""?fP:{value:e[0].value,isValid:!0}:fP:dP}return dP};const pP={isValid:!1,value:null};var oL=e=>Array.isArray(e)?e.reduce((t,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:t,pP):pP;function mP(e,t,n="validate"){if(lg(e)||Array.isArray(e)&&e.every(lg)||eo(e)&&!e)return{type:n,message:lg(e)?e:"",ref:t}}var gc=e=>br(e)&&!ry(e)?e:{value:e,message:""},gP=async(e,t,n,s,u)=>{const{ref:h,refs:f,required:o,maxLength:w,minLength:b,min:C,max:A,pattern:M,validate:N,name:V,valueAsNumber:$,mount:G,disabled:F}=e._f,B=Pt(t,V);if(!G||F)return{};const H=f?f[0]:h,J=qe=>{s&&H.reportValidity&&(H.setCustomValidity(eo(qe)?"":qe||""),H.reportValidity())},fe={},Ee=Bb(h),Pe=ep(h),ve=Ee||Pe,Ve=($||Nb(h))&&ur(h.value)&&ur(B)||ny(h)&&h.value===""||B===""||Array.isArray(B)&&!B.length,Me=oZ.bind(null,V,n,fe),pt=(qe,it,ut,bt=Xa.maxLength,ct=Xa.minLength)=>{const je=qe?it:ut;fe[V]={type:qe?bt:ct,message:je,ref:h,...Me(qe?bt:ct,je)}};if(u?!Array.isArray(B)||!B.length:o&&(!ve&&(Ve||Ei(B))||eo(B)&&!B||Pe&&!aL(f).isValid||Ee&&!oL(f).isValid)){const{value:qe,message:it}=lg(o)?{value:!!o,message:o}:gc(o);if(qe&&(fe[V]={type:Xa.required,message:it,ref:H,...Me(Xa.required,it)},!n))return J(it),fe}if(!Ve&&(!Ei(C)||!Ei(A))){let qe,it;const ut=gc(A),bt=gc(C);if(!Ei(B)&&!isNaN(B)){const ct=h.valueAsNumber||B&&+B;Ei(ut.value)||(qe=ct>ut.value),Ei(bt.value)||(it=ct<bt.value)}else{const ct=h.valueAsDate||new Date(B),je=ft=>new Date(new Date().toDateString()+" "+ft),Re=h.type=="time",Ke=h.type=="week";Sa(ut.value)&&B&&(qe=Re?je(B)>je(ut.value):Ke?B>ut.value:ct>new Date(ut.value)),Sa(bt.value)&&B&&(it=Re?je(B)<je(bt.value):Ke?B<bt.value:ct<new Date(bt.value))}if((qe||it)&&(pt(!!qe,ut.message,bt.message,Xa.max,Xa.min),!n))return J(fe[V].message),fe}if((w||b)&&!Ve&&(Sa(B)||u&&Array.isArray(B))){const qe=gc(w),it=gc(b),ut=!Ei(qe.value)&&B.length>+qe.value,bt=!Ei(it.value)&&B.length<+it.value;if((ut||bt)&&(pt(ut,qe.message,it.message),!n))return J(fe[V].message),fe}if(M&&!Ve&&Sa(B)){const{value:qe,message:it}=gc(M);if(ry(qe)&&!B.match(qe)&&(fe[V]={type:Xa.pattern,message:it,ref:h,...Me(Xa.pattern,it)},!n))return J(it),fe}if(N){if(il(N)){const qe=await N(B,t),it=mP(qe,H);if(it&&(fe[V]={...it,...Me(Xa.validate,it.message)},!n))return J(it.message),fe}else if(br(N)){let qe={};for(const it in N){if(!Qi(qe)&&!n)break;const ut=mP(await N[it](B,t),H,it);ut&&(qe={...ut,...Me(it,ut.message)},J(ut.message),n&&(fe[V]=qe))}if(!Qi(qe)&&(fe[V]={ref:H,...qe},!n))return fe}}return J(!0),fe};function uZ(e,t){const n=t.slice(0,-1).length;let s=0;for(;s<n;)e=ur(e)?s++:e[t[s++]];return e}function cZ(e){for(const t in e)if(e.hasOwnProperty(t)&&!ur(e[t]))return!1;return!0}function xr(e,t){const n=Array.isArray(t)?t:Fb(t)?[t]:sL(t),s=n.length===1?e:uZ(e,n),u=n.length-1,h=n[u];return s&&delete s[h],u!==0&&(br(s)&&Qi(s)||Array.isArray(s)&&cZ(s))&&xr(e,n.slice(0,-1)),e}var C_=()=>{let e=[];return{get observers(){return e},next:u=>{for(const h of e)h.next&&h.next(u)},subscribe:u=>(e.push(u),{unsubscribe:()=>{e=e.filter(h=>h!==u)}}),unsubscribe:()=>{e=[]}}},iy=e=>Ei(e)||!iL(e);function mu(e,t){if(iy(e)||iy(t))return e===t;if(zc(e)&&zc(t))return e.getTime()===t.getTime();const n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(const u of n){const h=e[u];if(!s.includes(u))return!1;if(u!=="ref"){const f=t[u];if(zc(h)&&zc(f)||br(h)&&br(f)||Array.isArray(h)&&Array.isArray(f)?!mu(h,f):h!==f)return!1}}return!0}var lL=e=>e.type==="select-multiple",hZ=e=>Bb(e)||ep(e),P_=e=>ny(e)&&e.isConnected,uL=e=>{for(const t in e)if(il(e[t]))return!0;return!1};function sy(e,t={}){const n=Array.isArray(e);if(br(e)||n)for(const s in e)Array.isArray(e[s])||br(e[s])&&!uL(e[s])?(t[s]=Array.isArray(e[s])?[]:{},sy(e[s],t[s])):Ei(e[s])||(t[s]=!0);return t}function cL(e,t,n){const s=Array.isArray(e);if(br(e)||s)for(const u in e)Array.isArray(e[u])||br(e[u])&&!uL(e[u])?ur(t)||iy(n[u])?n[u]=Array.isArray(e[u])?sy(e[u],[]):{...sy(e[u])}:cL(e[u],Ei(t)?{}:t[u],n[u]):n[u]=!mu(e[u],t[u]);return n}var Dm=(e,t)=>cL(e,t,sy(t)),hL=(e,{valueAsNumber:t,valueAsDate:n,setValueAs:s})=>ur(e)?e:t?e===""?NaN:e&&+e:n&&Sa(e)?new Date(e):s?s(e):e;function A_(e){const t=e.ref;if(!(e.refs?e.refs.every(n=>n.disabled):t.disabled))return Nb(t)?t.files:Bb(t)?oL(e.refs).value:lL(t)?[...t.selectedOptions].map(({value:n})=>n):ep(t)?aL(e.refs).value:hL(ur(t.value)?e.ref.value:t.value,e)}var dZ=(e,t,n,s)=>{const u={};for(const h of e){const f=Pt(t,h);f&&Ln(u,h,f._f)}return{criteriaMode:n,names:[...e],fields:u,shouldUseNativeValidation:s}},Fd=e=>ur(e)?e:ry(e)?e.source:br(e)?ry(e.value)?e.value.source:e.value:e,fZ=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function yP(e,t,n){const s=Pt(e,n);if(s||Fb(n))return{error:s,name:n};const u=n.split(".");for(;u.length;){const h=u.join("."),f=Pt(t,h),o=Pt(e,h);if(f&&!Array.isArray(f)&&n!==h)return{name:n};if(o&&o.type)return{name:h,error:o};u.pop()}return{name:n}}var pZ=(e,t,n,s,u)=>u.isOnAll?!1:!n&&u.isOnTouch?!(t||e):(n?s.isOnBlur:u.isOnBlur)?!e:(n?s.isOnChange:u.isOnChange)?e:!0,mZ=(e,t)=>!tp(Pt(e,t)).length&&xr(e,t);const gZ={mode:ta.onSubmit,reValidateMode:ta.onChange,shouldFocusError:!0};function yZ(e={}){let t={...gZ,...e},n={submitCount:0,isDirty:!1,isLoading:il(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},s={},u=br(t.defaultValues)||br(t.values)?bs(t.defaultValues||t.values)||{}:{},h=t.shouldUnregister?{}:bs(u),f={action:!1,mount:!1,watch:!1},o={mount:new Set,unMount:new Set,array:new Set,watch:new Set},w,b=0;const C={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},A={values:C_(),array:C_(),state:C_()},M=cP(t.mode),N=cP(t.reValidateMode),V=t.criteriaMode===ta.all,$=ge=>Ie=>{clearTimeout(b),b=setTimeout(ge,Ie)},G=async ge=>{if(C.isValid||ge){const Ie=t.resolver?Qi((await ve()).errors):await Me(s,!0);Ie!==n.isValid&&A.state.next({isValid:Ie})}},F=(ge,Ie)=>{(C.isValidating||C.validatingFields)&&((ge||Array.from(o.mount)).forEach(ue=>{ue&&(Ie?Ln(n.validatingFields,ue,Ie):xr(n.validatingFields,ue))}),A.state.next({validatingFields:n.validatingFields,isValidating:!Qi(n.validatingFields)}))},B=(ge,Ie=[],ue,st,tt=!0,$e=!0)=>{if(st&&ue){if(f.action=!0,$e&&Array.isArray(Pt(s,ge))){const Je=ue(Pt(s,ge),st.argA,st.argB);tt&&Ln(s,ge,Je)}if($e&&Array.isArray(Pt(n.errors,ge))){const Je=ue(Pt(n.errors,ge),st.argA,st.argB);tt&&Ln(n.errors,ge,Je),mZ(n.errors,ge)}if(C.touchedFields&&$e&&Array.isArray(Pt(n.touchedFields,ge))){const Je=ue(Pt(n.touchedFields,ge),st.argA,st.argB);tt&&Ln(n.touchedFields,ge,Je)}C.dirtyFields&&(n.dirtyFields=Dm(u,h)),A.state.next({name:ge,isDirty:qe(ge,Ie),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else Ln(h,ge,Ie)},H=(ge,Ie)=>{Ln(n.errors,ge,Ie),A.state.next({errors:n.errors})},J=ge=>{n.errors=ge,A.state.next({errors:n.errors,isValid:!1})},fe=(ge,Ie,ue,st)=>{const tt=Pt(s,ge);if(tt){const $e=Pt(h,ge,ur(ue)?Pt(u,ge):ue);ur($e)||st&&st.defaultChecked||Ie?Ln(h,ge,Ie?$e:A_(tt._f)):bt(ge,$e),f.mount&&G()}},Ee=(ge,Ie,ue,st,tt)=>{let $e=!1,Je=!1;const $t={name:ge},xn=!!(Pt(s,ge)&&Pt(s,ge)._f.disabled);if(!ue||st){C.isDirty&&(Je=n.isDirty,n.isDirty=$t.isDirty=qe(),$e=Je!==$t.isDirty);const An=xn||mu(Pt(u,ge),Ie);Je=!!(!xn&&Pt(n.dirtyFields,ge)),An||xn?xr(n.dirtyFields,ge):Ln(n.dirtyFields,ge,!0),$t.dirtyFields=n.dirtyFields,$e=$e||C.dirtyFields&&Je!==!An}if(ue){const An=Pt(n.touchedFields,ge);An||(Ln(n.touchedFields,ge,ue),$t.touchedFields=n.touchedFields,$e=$e||C.touchedFields&&An!==ue)}return $e&&tt&&A.state.next($t),$e?$t:{}},Pe=(ge,Ie,ue,st)=>{const tt=Pt(n.errors,ge),$e=C.isValid&&eo(Ie)&&n.isValid!==Ie;if(e.delayError&&ue?(w=$(()=>H(ge,ue)),w(e.delayError)):(clearTimeout(b),w=null,ue?Ln(n.errors,ge,ue):xr(n.errors,ge)),(ue?!mu(tt,ue):tt)||!Qi(st)||$e){const Je={...st,...$e&&eo(Ie)?{isValid:Ie}:{},errors:n.errors,name:ge};n={...n,...Je},A.state.next(Je)}},ve=async ge=>{F(ge,!0);const Ie=await t.resolver(h,t.context,dZ(ge||o.mount,s,t.criteriaMode,t.shouldUseNativeValidation));return F(ge),Ie},Ve=async ge=>{const{errors:Ie}=await ve(ge);if(ge)for(const ue of ge){const st=Pt(Ie,ue);st?Ln(n.errors,ue,st):xr(n.errors,ue)}else n.errors=Ie;return Ie},Me=async(ge,Ie,ue={valid:!0})=>{for(const st in ge){const tt=ge[st];if(tt){const{_f:$e,...Je}=tt;if($e){const $t=o.array.has($e.name);F([st],!0);const xn=await gP(tt,h,V,t.shouldUseNativeValidation&&!Ie,$t);if(F([st]),xn[$e.name]&&(ue.valid=!1,Ie))break;!Ie&&(Pt(xn,$e.name)?$t?lZ(n.errors,xn,$e.name):Ln(n.errors,$e.name,xn[$e.name]):xr(n.errors,$e.name))}Je&&await Me(Je,Ie,ue)}}return ue.valid},pt=()=>{for(const ge of o.unMount){const Ie=Pt(s,ge);Ie&&(Ie._f.refs?Ie._f.refs.every(ue=>!P_(ue)):!P_(Ie._f.ref))&&hr(ge)}o.unMount=new Set},qe=(ge,Ie)=>(ge&&Ie&&Ln(h,ge,Ie),!mu(Rt(),u)),it=(ge,Ie,ue)=>aZ(ge,o,{...f.mount?h:ur(Ie)?u:Sa(ge)?{[ge]:Ie}:Ie},ue,Ie),ut=ge=>tp(Pt(f.mount?h:u,ge,e.shouldUnregister?Pt(u,ge,[]):[])),bt=(ge,Ie,ue={})=>{const st=Pt(s,ge);let tt=Ie;if(st){const $e=st._f;$e&&(!$e.disabled&&Ln(h,ge,hL(Ie,$e)),tt=ny($e.ref)&&Ei(Ie)?"":Ie,lL($e.ref)?[...$e.ref.options].forEach(Je=>Je.selected=tt.includes(Je.value)):$e.refs?ep($e.ref)?$e.refs.length>1?$e.refs.forEach(Je=>(!Je.defaultChecked||!Je.disabled)&&(Je.checked=Array.isArray(tt)?!!tt.find($t=>$t===Je.value):tt===Je.value)):$e.refs[0]&&($e.refs[0].checked=!!tt):$e.refs.forEach(Je=>Je.checked=Je.value===tt):Nb($e.ref)?$e.ref.value="":($e.ref.value=tt,$e.ref.type||A.values.next({name:ge,values:{...h}})))}(ue.shouldDirty||ue.shouldTouch)&&Ee(ge,tt,ue.shouldTouch,ue.shouldDirty,!0),ue.shouldValidate&&ft(ge)},ct=(ge,Ie,ue)=>{for(const st in Ie){const tt=Ie[st],$e=`${ge}.${st}`,Je=Pt(s,$e);(o.array.has(ge)||!iy(tt)||Je&&!Je._f)&&!zc(tt)?ct($e,tt,ue):bt($e,tt,ue)}},je=(ge,Ie,ue={})=>{const st=Pt(s,ge),tt=o.array.has(ge),$e=bs(Ie);Ln(h,ge,$e),tt?(A.array.next({name:ge,values:{...h}}),(C.isDirty||C.dirtyFields)&&ue.shouldDirty&&A.state.next({name:ge,dirtyFields:Dm(u,h),isDirty:qe(ge,$e)})):st&&!st._f&&!Ei($e)?ct(ge,$e,ue):bt(ge,$e,ue),hP(ge,o)&&A.state.next({...n}),A.values.next({name:f.mount?ge:void 0,values:{...h}})},Re=async ge=>{const Ie=ge.target;let ue=Ie.name,st=!0;const tt=Pt(s,ue),$e=()=>Ie.type?A_(tt._f):JG(ge),Je=$t=>{st=Number.isNaN($t)||$t===Pt(h,ue,$t)};if(tt){let $t,xn;const An=$e(),Gi=ge.type===uP.BLUR||ge.type===uP.FOCUS_OUT,ua=!fZ(tt._f)&&!t.resolver&&!Pt(n.errors,ue)&&!tt._f.deps||pZ(Gi,Pt(n.touchedFields,ue),n.isSubmitted,N,M),Mi=hP(ue,o,Gi);Ln(h,ue,An),Gi?(tt._f.onBlur&&tt._f.onBlur(ge),w&&w(0)):tt._f.onChange&&tt._f.onChange(ge);const Zi=Ee(ue,An,Gi,!1),He=!Qi(Zi)||Mi;if(!Gi&&A.values.next({name:ue,type:ge.type,values:{...h}}),ua)return C.isValid&&G(),He&&A.state.next({name:ue,...Mi?{}:Zi});if(!Gi&&Mi&&A.state.next({...n}),t.resolver){const{errors:di}=await ve([ue]);if(Je(An),st){const _n=yP(n.errors,s,ue),hs=yP(di,s,_n.name||ue);$t=hs.error,ue=hs.name,xn=Qi(di)}}else F([ue],!0),$t=(await gP(tt,h,V,t.shouldUseNativeValidation))[ue],F([ue]),Je(An),st&&($t?xn=!1:C.isValid&&(xn=await Me(s,!0)));st&&(tt._f.deps&&ft(tt._f.deps),Pe(ue,xn,$t,Zi))}},Ke=(ge,Ie)=>{if(Pt(n.errors,Ie)&&ge.focus)return ge.focus(),1},ft=async(ge,Ie={})=>{let ue,st;const tt=T_(ge);if(t.resolver){const $e=await Ve(ur(ge)?ge:tt);ue=Qi($e),st=ge?!tt.some(Je=>Pt($e,Je)):ue}else ge?(st=(await Promise.all(tt.map(async $e=>{const Je=Pt(s,$e);return await Me(Je&&Je._f?{[$e]:Je}:Je)}))).every(Boolean),!(!st&&!n.isValid)&&G()):st=ue=await Me(s);return A.state.next({...!Sa(ge)||C.isValid&&ue!==n.isValid?{}:{name:ge},...t.resolver||!ge?{isValid:ue}:{},errors:n.errors}),Ie.shouldFocus&&!st&&lf(s,Ke,ge?tt:o.mount),st},Rt=ge=>{const Ie={...u,...f.mount?h:{}};return ur(ge)?Ie:Sa(ge)?Pt(Ie,ge):ge.map(ue=>Pt(Ie,ue))},Bt=(ge,Ie)=>({invalid:!!Pt((Ie||n).errors,ge),isDirty:!!Pt((Ie||n).dirtyFields,ge),isTouched:!!Pt((Ie||n).touchedFields,ge),isValidating:!!Pt((Ie||n).validatingFields,ge),error:Pt((Ie||n).errors,ge)}),It=ge=>{ge&&T_(ge).forEach(Ie=>xr(n.errors,Ie)),A.state.next({errors:ge?n.errors:{}})},vn=(ge,Ie,ue)=>{const st=(Pt(s,ge,{_f:{}})._f||{}).ref;Ln(n.errors,ge,{...Ie,ref:st}),A.state.next({name:ge,errors:n.errors,isValid:!1}),ue&&ue.shouldFocus&&st&&st.focus&&st.focus()},hi=(ge,Ie)=>il(ge)?A.values.subscribe({next:ue=>ge(it(void 0,Ie),ue)}):it(ge,Ie,!0),hr=(ge,Ie={})=>{for(const ue of ge?T_(ge):o.mount)o.mount.delete(ue),o.array.delete(ue),Ie.keepValue||(xr(s,ue),xr(h,ue)),!Ie.keepError&&xr(n.errors,ue),!Ie.keepDirty&&xr(n.dirtyFields,ue),!Ie.keepTouched&&xr(n.touchedFields,ue),!Ie.keepIsValidating&&xr(n.validatingFields,ue),!t.shouldUnregister&&!Ie.keepDefaultValue&&xr(u,ue);A.values.next({values:{...h}}),A.state.next({...n,...Ie.keepDirty?{isDirty:qe()}:{}}),!Ie.keepIsValid&&G()},Zr=({disabled:ge,name:Ie,field:ue,fields:st,value:tt})=>{if(eo(ge)){const $e=ge?void 0:ur(tt)?A_(ue?ue._f:Pt(st,Ie)._f):tt;Ln(h,Ie,$e),Ee(Ie,$e,!1,!1,!0)}},ki=(ge,Ie={})=>{let ue=Pt(s,ge);const st=eo(Ie.disabled);return Ln(s,ge,{...ue||{},_f:{...ue&&ue._f?ue._f:{ref:{name:ge}},name:ge,mount:!0,...Ie}}),o.mount.add(ge),ue?Zr({field:ue,disabled:Ie.disabled,name:ge,value:Ie.value}):fe(ge,!0,Ie.value),{...st?{disabled:Ie.disabled}:{},...t.progressive?{required:!!Ie.required,min:Fd(Ie.min),max:Fd(Ie.max),minLength:Fd(Ie.minLength),maxLength:Fd(Ie.maxLength),pattern:Fd(Ie.pattern)}:{},name:ge,onChange:Re,onBlur:Re,ref:tt=>{if(tt){ki(ge,Ie),ue=Pt(s,ge);const $e=ur(tt.value)&&tt.querySelectorAll&&tt.querySelectorAll("input,select,textarea")[0]||tt,Je=hZ($e),$t=ue._f.refs||[];if(Je?$t.find(xn=>xn===$e):$e===ue._f.ref)return;Ln(s,ge,{_f:{...ue._f,...Je?{refs:[...$t.filter(P_),$e,...Array.isArray(Pt(u,ge))?[{}]:[]],ref:{type:$e.type,name:ge}}:{ref:$e}}}),fe(ge,!1,void 0,$e)}else ue=Pt(s,ge,{}),ue._f&&(ue._f.mount=!1),(t.shouldUnregister||Ie.shouldUnregister)&&!(tZ(o.array,ge)&&f.action)&&o.unMount.add(ge)}}},Wr=()=>t.shouldFocusError&&lf(s,Ke,o.mount),Hr=ge=>{eo(ge)&&(A.state.next({disabled:ge}),lf(s,(Ie,ue)=>{let st=ge;const tt=Pt(s,ue);tt&&eo(tt._f.disabled)&&(st||(st=tt._f.disabled)),Ie.disabled=st},0,!1))},aa=(ge,Ie)=>async ue=>{let st;ue&&(ue.preventDefault&&ue.preventDefault(),ue.persist&&ue.persist());let tt=bs(h);if(A.state.next({isSubmitting:!0}),t.resolver){const{errors:$e,values:Je}=await ve();n.errors=$e,tt=Je}else await Me(s);if(xr(n.errors,"root"),Qi(n.errors)){A.state.next({errors:{}});try{await ge(tt,ue)}catch($e){st=$e}}else Ie&&await Ie({...n.errors},ue),Wr(),setTimeout(Wr);if(A.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Qi(n.errors)&&!st,submitCount:n.submitCount+1,errors:n.errors}),st)throw st},cs=(ge,Ie={})=>{Pt(s,ge)&&(ur(Ie.defaultValue)?je(ge,bs(Pt(u,ge))):(je(ge,Ie.defaultValue),Ln(u,ge,bs(Ie.defaultValue))),Ie.keepTouched||xr(n.touchedFields,ge),Ie.keepDirty||(xr(n.dirtyFields,ge),n.isDirty=Ie.defaultValue?qe(ge,bs(Pt(u,ge))):qe()),Ie.keepError||(xr(n.errors,ge),C.isValid&&G()),A.state.next({...n}))},oa=(ge,Ie={})=>{const ue=ge?bs(ge):u,st=bs(ue),tt=Qi(ge),$e=tt?u:st;if(Ie.keepDefaultValues||(u=ue),!Ie.keepValues){if(Ie.keepDirtyValues)for(const Je of o.mount)Pt(n.dirtyFields,Je)?Ln($e,Je,Pt(h,Je)):je(Je,Pt($e,Je));else{if(Ob&&ur(ge))for(const Je of o.mount){const $t=Pt(s,Je);if($t&&$t._f){const xn=Array.isArray($t._f.refs)?$t._f.refs[0]:$t._f.ref;if(ny(xn)){const An=xn.closest("form");if(An){An.reset();break}}}}s={}}h=e.shouldUnregister?Ie.keepDefaultValues?bs(u):{}:bs($e),A.array.next({values:{...$e}}),A.values.next({values:{...$e}})}o={mount:Ie.keepDirtyValues?o.mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},f.mount=!C.isValid||!!Ie.keepIsValid||!!Ie.keepDirtyValues,f.watch=!!e.shouldUnregister,A.state.next({submitCount:Ie.keepSubmitCount?n.submitCount:0,isDirty:tt?!1:Ie.keepDirty?n.isDirty:!!(Ie.keepDefaultValues&&!mu(ge,u)),isSubmitted:Ie.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:tt?[]:Ie.keepDirtyValues?Ie.keepDefaultValues&&h?Dm(u,h):n.dirtyFields:Ie.keepDefaultValues&&ge?Dm(u,ge):{},touchedFields:Ie.keepTouched?n.touchedFields:{},errors:Ie.keepErrors?n.errors:{},isSubmitSuccessful:Ie.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},Ii=(ge,Ie)=>oa(il(ge)?ge(h):ge,Ie);return{control:{register:ki,unregister:hr,getFieldState:Bt,handleSubmit:aa,setError:vn,_executeSchema:ve,_getWatch:it,_getDirty:qe,_updateValid:G,_removeUnmounted:pt,_updateFieldArray:B,_updateDisabledField:Zr,_getFieldArray:ut,_reset:oa,_resetDefaultValues:()=>il(t.defaultValues)&&t.defaultValues().then(ge=>{Ii(ge,t.resetOptions),A.state.next({isLoading:!1})}),_updateFormState:ge=>{n={...n,...ge}},_disableForm:Hr,_subjects:A,_proxyFormState:C,_setErrors:J,get _fields(){return s},get _formValues(){return h},get _state(){return f},set _state(ge){f=ge},get _defaultValues(){return u},get _names(){return o},set _names(ge){o=ge},get _formState(){return n},set _formState(ge){n=ge},get _options(){return t},set _options(ge){t={...t,...ge}}},trigger:ft,register:ki,handleSubmit:aa,watch:hi,setValue:je,getValues:Rt,reset:Ii,resetField:cs,clearErrors:It,unregister:hr,setError:vn,setFocus:(ge,Ie={})=>{const ue=Pt(s,ge),st=ue&&ue._f;if(st){const tt=st.refs?st.refs[0]:st.ref;tt.focus&&(tt.focus(),Ie.shouldSelect&&tt.select())}},getFieldState:Bt}}function dL(e={}){const t=_t.useRef(),n=_t.useRef(),[s,u]=_t.useState({isDirty:!1,isValidating:!1,isLoading:il(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,defaultValues:il(e.defaultValues)?void 0:e.defaultValues});t.current||(t.current={...yZ(e),formState:s});const h=t.current.control;return h._options=e,sZ({subject:h._subjects.state,next:f=>{iZ(f,h._proxyFormState,h._updateFormState,!0)&&u({...h._formState})}}),_t.useEffect(()=>h._disableForm(e.disabled),[h,e.disabled]),_t.useEffect(()=>{if(h._proxyFormState.isDirty){const f=h._getDirty();f!==s.isDirty&&h._subjects.state.next({isDirty:f})}},[h,s.isDirty]),_t.useEffect(()=>{e.values&&!mu(e.values,n.current)?(h._reset(e.values,h._options.resetOptions),n.current=e.values,u(f=>({...f}))):h._resetDefaultValues()},[e.values,h]),_t.useEffect(()=>{e.errors&&h._setErrors(e.errors)},[e.errors,h]),_t.useEffect(()=>{h._state.mount||(h._updateValid(),h._state.mount=!0),h._state.watch&&(h._state.watch=!1,h._subjects.state.next({...h._formState})),h._removeUnmounted()}),_t.useEffect(()=>{e.shouldUnregister&&h._subjects.values.next({values:h._getWatch()})},[e.shouldUnregister,h]),t.current.formState=rZ(s,h),t.current}const vZ={email:"",password:""};function xZ(){const[e,t]=Q.useState(!1),[n,s]=Q.useState(""),[u,h]=Q.useState(""),[f,o]=Q.useState(!1),[w,b]=Q.useState(!1),[C,A]=Q.useState(!1),[M,N]=Q.useState(!1),[V,$]=Q.useState(""),G=Pl(),F=()=>t(ve=>!ve),{register:B,handleSubmit:H}=dL({defaultValues:vZ}),J=async ve=>{var Ve,Me,pt,qe,it,ut,bt,ct;s(""),h(""),o(!0);try{const je={...ve,recaptcha_response:"dummy-recaptcha"},Re=await OG(je);console.log("Login API Response:",Re),h("Login successful!"),(Me=(Ve=Re==null?void 0:Re.data)==null?void 0:Ve.user)!=null&&Me.username&&(localStorage.setItem("username",Re.data.user.username),G(UC({isAuthenticated:!0,username:Re.data.user.username})),console.log("Username saved to localStorage and Redux:",Re.data.user.username)),(pt=Re==null?void 0:Re.data)!=null&&pt.access&&(localStorage.setItem("token",Re.data.access),console.log("Token saved to localStorage:",Re.data.access)),(qe=Re==null?void 0:Re.data)!=null&&qe.refresh&&(localStorage.setItem("refresh_token",Re.data.refresh),console.log("Refresh token saved to localStorage:",Re.data.refresh)),G(sh()),window.dispatchEvent(new Event("authChanged")),console.log("Modal toggled off.")}catch(je){s(((ut=(it=je==null?void 0:je.response)==null?void 0:it.data)==null?void 0:ut.detail)||((ct=(bt=je==null?void 0:je.response)==null?void 0:bt.data)==null?void 0:ct.message)||"Login failed.")}finally{o(!1)}},fe=async()=>{var ve,Ve,Me,pt,qe,it,ut,bt;s(""),h(""),b(!0);try{const ct=await NG({});h("Login successful!"),(Ve=(ve=ct==null?void 0:ct.data)==null?void 0:ve.user)!=null&&Ve.username&&(localStorage.setItem("username",ct.data.user.username),G(UC({isAuthenticated:!0,username:ct.data.user.username}))),(Me=ct==null?void 0:ct.data)!=null&&Me.access&&localStorage.setItem("token",ct.data.access),(pt=ct==null?void 0:ct.data)!=null&&pt.refresh&&localStorage.setItem("refresh_token",ct.data.refresh),G(sh()),window.dispatchEvent(new Event("authChanged"))}catch(ct){s(((it=(qe=ct==null?void 0:ct.response)==null?void 0:qe.data)==null?void 0:it.detail)||((bt=(ut=ct==null?void 0:ct.response)==null?void 0:ut.data)==null?void 0:bt.message)||"Google login failed.")}finally{b(!1)}},Ee=()=>{s(""),h(""),$(""),N(!0)},Pe=async ve=>{var Ve,Me,pt,qe;ve.preventDefault(),s(""),h(""),A(!0);try{if(!V){s("Please enter your registered email address."),A(!1);return}await BG({email:V}),h("Password reset email sent successfully, please check your email."),N(!1)}catch(it){s(((Me=(Ve=it==null?void 0:it.response)==null?void 0:Ve.data)==null?void 0:Me.detail)||((qe=(pt=it==null?void 0:it.response)==null?void 0:pt.data)==null?void 0:qe.message)||"Failed to send password reset email.")}finally{A(!1)}};return Ne(rs,{children:[Ne(ev,{gap:4,className:"naxatw-w-full naxatw-flex-col naxatw-items-center naxatw-justify-center naxatw-pb-4",children:[K(so,{src:rL,width:60}),K("h3",{children:"Login"}),Ne("div",{className:"naxatw-flex naxatw-w-[60%] naxatw-cursor-pointer naxatw-items-center naxatw-justify-center naxatw-gap-2 naxatw-rounded-lg naxatw-border naxatw-border-grey-800 naxatw-px-5 naxatw-py-2 hover:naxatw-shadow-md",onClick:fe,children:[K(so,{src:YG}),K("span",{className:"naxatw-text-body-btn",children:w?"Loading...":"Continue with Google"})]}),Ne(Ji,{className:"naxatw-w-full naxatw-items-center naxatw-justify-center",gap:3,children:[K("hr",{className:"naxatw-w-[26%]"}),K("span",{children:"or"}),K("hr",{className:"naxatw-w-[26%]"})]}),Ne("form",{onSubmit:H(J),className:"naxatw-flex naxatw-w-full naxatw-flex-col naxatw-gap-4",children:[n&&K(Xs,{message:n}),u&&K("span",{className:"naxatw-text-green-600 naxatw-text-sm naxatw-pt-2",children:u}),Ne(Ya,{children:[K(Ys,{htmlFor:"username",required:!0,children:"Email"}),K(oi,{id:"username",type:"text",placeholder:"Username",className:"naxatw-mt-1 !naxatw-rounded-lg !naxatw-border-grey-400 !naxatw-p-3",...B("email",{required:!0})})]}),Ne(Ya,{className:"naxatw-relative",children:[K(Ys,{htmlFor:"password",required:!0,children:"Password"}),K(oi,{id:"password",placeholder:"*******",className:"naxatw-mt-1 !naxatw-rounded-lg !naxatw-border-grey-400 !naxatw-p-3",type:e?"text":"password",...B("password",{required:!0})}),K(Gr,{name:e?"visibility":"visibility_off",className:"naxatw-absolute naxatw-right-2 naxatw-top-[55%] naxatw-cursor-pointer naxatw-text-sm naxatw-text-grey-600",onClick:()=>F()})]}),Ne(Ji,{className:"naxatw-items-center naxatw-justify-between",children:[Ne(Ji,{className:"naxatw-items-center naxatw-gap-2 naxatw-pl-3",children:[K(oi,{type:"checkbox",id:"check"}),K(Ys,{htmlFor:"check",children:"Remember Me"})]}),K(Ps,{variant:"ghost",className:"naxatw-text-body-btn !naxatw-text-red",onClick:Ee,type:"button",children:C?"Sending...":"Forgot Your Password?"})]}),K(Ps,{className:"!naxatw-bg-red naxatw-py-5",type:"submit",withLoader:!0,isLoading:f,children:"Log In"})]})]}),K(nL,{title:"Reset Password",show:M,onClose:()=>N(!1),children:Ne("form",{onSubmit:Pe,className:"naxatw-flex naxatw-flex-col naxatw-gap-4 naxatw-py-4",children:[K(Ys,{htmlFor:"forgot-email",children:"Enter your registered email address"}),K(oi,{id:"forgot-email",type:"email",value:V,onChange:ve=>$(ve.target.value),placeholder:"Email",required:!0}),n&&K(Xs,{message:n}),u&&K("span",{className:"naxatw-text-green-600 naxatw-text-sm naxatw-pt-2",children:u}),K(Ps,{type:"submit",withLoader:!0,isLoading:C,className:"!naxatw-bg-red",children:"Send Reset Email"})]})})]})}const _Z={first_name:"",last_name:"",username:"",email:"",password:"",password_confirm:"",phone:"",gender:"male"};function wZ(){var G,F,B,H,J,fe,Ee,Pe,ve,Ve,Me,pt,qe,it;const[e,t]=Q.useState(!1),[n,s]=Q.useState(""),[u,h]=Q.useState(""),f=Gy(),o=Pl(),w=()=>t(ut=>!ut),b=()=>{o(sh()),setTimeout(()=>{o(ED(null))},150)},{mutate:C,isLoading:A}=o4({mutationFn:FG,onSuccess:(ut,bt)=>{localStorage.setItem("signup_email",bt.email||bt.get("email")),f("/verify-email"),b()},onError:ut=>{var je;const bt=(je=ut==null?void 0:ut.response)==null?void 0:je.data,ct=(bt==null?void 0:bt.detail)||(typeof bt=="string"?bt:"")||JSON.stringify(bt)||"Signup failed.";if(ct.includes("already exists")||ct.toLowerCase().includes("already registered")){localStorage.setItem("signup_email",n),f("/verify-email"),b();return}h(ct)}}),{register:M,handleSubmit:N,formState:V}=dL({defaultValues:_Z});return K(rs,{children:K(ev,{gap:4,className:"naxatw-w-full naxatw-flex-col naxatw-items-center naxatw-justify-center naxatw-pb-4",children:Ne("form",{onSubmit:N(ut=>{h("");const bt={...ut,password_confirm:ut.password_confirm,is_delete:!1};C(bt)}),className:"naxatw-flex naxatw-w-full naxatw-flex-col naxatw-gap-4",children:[u&&K(Xs,{message:u}),Ne(Ya,{children:[K(Ys,{htmlFor:"first_name",required:!0,children:"First Name"}),K(oi,{id:"first_name",type:"text",placeholder:"First Name",className:"naxatw-mt-1 !naxatw-rounded-lg !naxatw-border-grey-400 !naxatw-p-3",...M("first_name",{required:"First Name is required"})}),K(Xs,{message:((F=(G=V==null?void 0:V.errors)==null?void 0:G.first_name)==null?void 0:F.message)||""})]}),Ne(Ya,{children:[K(Ys,{htmlFor:"username",required:!0,children:"Last Name"}),K(oi,{id:"last_name",type:"text",placeholder:"Last Name",className:"naxatw-mt-1 !naxatw-rounded-lg !naxatw-border-grey-400 !naxatw-p-3",...M("last_name",{required:"Last Name is required"})}),K(Xs,{message:((H=(B=V==null?void 0:V.errors)==null?void 0:B.last_name)==null?void 0:H.message)||""})]}),Ne(Ya,{children:[K(Ys,{htmlFor:"username",required:!0,children:"Email"}),K(oi,{id:"email",type:"text",placeholder:"something@mail.com",className:"naxatw-mt-1 !naxatw-rounded-lg !naxatw-border-grey-400 !naxatw-p-3",...M("email",{required:"Email is required"})}),K(Xs,{message:((fe=(J=V==null?void 0:V.errors)==null?void 0:J.email)==null?void 0:fe.message)||""})]}),Ne(Ya,{children:[K(Ys,{htmlFor:"username",required:!0,children:"Phone Number"}),K(oi,{id:"phone",type:"text",placeholder:"something@mail.com",className:"naxatw-mt-1 !naxatw-rounded-lg !naxatw-border-grey-400 !naxatw-p-3",...M("phone",{required:"Phone is required"})}),K(Xs,{message:((Pe=(Ee=V==null?void 0:V.errors)==null?void 0:Ee.email)==null?void 0:Pe.message)||""})]}),Ne(Ya,{children:[K(Ys,{htmlFor:"username",required:!0,children:"Username"}),K(oi,{id:"username",type:"text",placeholder:"Username",className:"naxatw-mt-1 !naxatw-rounded-lg !naxatw-border-grey-400 !naxatw-p-3",...M("username",{required:"Username is required"})}),K(Xs,{message:((Ve=(ve=V==null?void 0:V.errors)==null?void 0:ve.username)==null?void 0:Ve.message)||""})]}),Ne(Ya,{className:"naxatw-relative",children:[K(Ys,{htmlFor:"password",required:!0,children:"Password"}),K(oi,{placeholder:"*******",className:"naxatw-mt-1 !naxatw-rounded-lg !naxatw-border-grey-400 !naxatw-p-3",type:e?"text":"password",...M("password",{required:"Password is required",onChange:ut=>s(ut.target.value)})}),K(Gr,{name:e?"visibility":"visibility_off",className:"naxatw-absolute naxatw-right-2 naxatw-top-[55%] naxatw-cursor-pointer naxatw-text-sm naxatw-text-grey-600",onClick:()=>w()}),K(Xs,{message:((pt=(Me=V==null?void 0:V.errors)==null?void 0:Me.password)==null?void 0:pt.message)||""})]}),Ne(Ya,{className:"naxatw-relative",children:[K(Ys,{htmlFor:"password_confirm",required:!0,children:"Confirm Password"}),K(oi,{id:"password_confirm",placeholder:"*******",className:"naxatw-mt-1 !naxatw-rounded-lg !naxatw-border-grey-400 !naxatw-p-3",type:e?"text":"password",...M("password_confirm",{required:"Confirm Password is required"})}),K(Gr,{name:e?"visibility":"visibility_off",className:"naxatw-absolute naxatw-right-2 naxatw-top-[55%] naxatw-cursor-pointer naxatw-text-sm naxatw-text-grey-600",onClick:()=>w()}),K(Xs,{message:((it=(qe=V==null?void 0:V.errors)==null?void 0:qe.password_confirm)==null?void 0:it.message)||""})]}),K(Ps,{className:"!naxatw-bg-red naxatw-py-5",type:"submit",withLoader:!0,isLoading:A,children:"Sign Up"})]})})})}function Lm(e){switch(e){case"login":return{title:"",content:K(xZ,{}),className:"!naxatw-w-[28rem]"};case"sign-up":return{title:"Sign Up",content:K(wZ,{}),className:"!naxatw-w-[30rem]"};default:return{title:"",content:K(rs,{})}}}function vP(e){switch(e){case"delete-layer":return{title:"",content:K(rs,{})};default:return{title:"",content:K(rs,{})}}}const bZ=()=>{const[e,t]=Q.useState(!1),n=()=>{document.documentElement.scrollTop>300?t(!0):t(!1)},s=()=>{window.scrollTo({top:0,behavior:"smooth"})};return Q.useEffect(()=>{window.addEventListener("scroll",n)},[]),K("div",{className:`scroll-to-top-wrapper naxatw-fixed naxatw-bottom-4 naxatw-right-4 ${e?"naxatw-opacity-full naxatw-pointer-events-auto":"naxatw-pointer-events-none naxatw-opacity-0"} common-btn-transition`,children:K("button",{className:"naxatw-relative naxatw-cursor-pointer",type:"button",onClick:s,children:K("div",{className:"naxatw-bg-primary hover:naxatw-bg-opacity-100 hover:naxatw-animate-none -naxatw-z-10 naxatw-bg-opacity-50 naxatw-w-12 naxatw-animate-pulse naxatw-h-12 naxatw-rounded-full naxatw-flex naxatw-items-center naxatw-justify-center",children:K("div",{className:"button-circle naxatw-bg-primary naxatw-z-20 naxatw-bg-opacity-90 naxatw-rounded-full naxatw-relative naxatw-flex naxatw-h-10 naxatw-w-10 -naxatw-rotate-90 naxatw-items-center naxatw-justify-end naxatw-overflow-hidden before:naxatw-absolute before:naxatw-h-full before:naxatw-w-full before:naxatw-scale-100  before:naxatw-rounded-full before:naxatw-bg-main before:naxatw-transition-transform  before:naxatw-duration-500 before:naxatw-ease-out before:naxatw-content-[''] hover:before:naxatw-scale-[0.85]",children:Ne("div",{className:"button-cirlce-svgs naxatw-absolute naxatw-z-[2] naxatw-inline-flex naxatw-w-[200%] naxatw-translate-x-0 naxatw-justify-center naxatw-overflow-hidden naxatw-transition-transform naxatw-duration-500 naxatw-ease-out hover:naxatw-translate-x-[50%]",children:[K(Gr,{name:"east",className:"!naxatw-w-1/2 !naxatw-overflow-hidden naxatw-align-middle !naxatw-text-[1.25rem] !naxatw-text-[#fbf8f3] "}),K(Gr,{name:"east",className:"!naxatw-w-1/2 !naxatw-overflow-hidden naxatw-align-middle !naxatw-text-[1.25rem] !naxatw-text-[#fbf8f3] "})]})})})})})};function SZ(){var o,w,b,C,A,M;const e=Pl(),t=io(N=>N.common.showModal),n=io(N=>N.common.modalContent),s=io(N=>N.common.showPromptDialog),u=io(N=>N.common.promptDialogContent),h=()=>{e(sh()),setTimeout(()=>{e(ED(null))},150)},f=()=>{e(Vq()),setTimeout(()=>{e(jq(null))},150)};return Ne(rs,{children:[!1,Ne("div",{className:"app-root naxatw-flex naxatw-flex-col",children:[K(QG,{}),K(N0,{}),K(tL,{show:t,className:((o=Lm(n))==null?void 0:o.className)||"",title:(w=Lm(n))==null?void 0:w.title,onClose:h,hideCloseButton:!!((b=Lm(n))!=null&&b.hideCloseButton),children:(C=Lm(n))==null?void 0:C.content}),K(nL,{show:s,title:(A=vP(u))==null?void 0:A.title,onClose:f,children:(M=vP(u))==null?void 0:M.content}),SV({routes:$G}),K(bZ,{})]})]})}const EZ=new $5({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:!1,suspense:!1}}});k_.createRoot(document.getElementById("root")).render(K(W5,{client:EZ,children:K(_3,{store:uM,children:K(xI,{loading:K("h1",{children:"hello"}),persistor:fV,children:K(w5,{children:K(SZ,{})})})})}));
