function QL(e,t){for(var n=0;n<t.length;n++){const s=t[n];if(typeof s!="string"&&!Array.isArray(s)){for(const u in s)if(u!=="default"&&!(u in e)){const h=Object.getOwnPropertyDescriptor(s,u);h&&Object.defineProperty(e,u,h.get?h:{enumerable:!0,get:()=>s[u]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))s(u);new MutationObserver(u=>{for(const h of u)if(h.type==="childList")for(const f of h.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function n(u){const h={};return u.integrity&&(h.integrity=u.integrity),u.referrerPolicy&&(h.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?h.credentials="include":u.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function s(u){if(u.ep)return;u.ep=!0;const h=n(u);fetch(u.href,h)}})();var YL=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function hP(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var dP={exports:{}},Hg={},fP={exports:{}},Qt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var If=Symbol.for("react.element"),JL=Symbol.for("react.portal"),eO=Symbol.for("react.fragment"),tO=Symbol.for("react.strict_mode"),nO=Symbol.for("react.profiler"),rO=Symbol.for("react.provider"),iO=Symbol.for("react.context"),sO=Symbol.for("react.forward_ref"),oO=Symbol.for("react.suspense"),aO=Symbol.for("react.memo"),lO=Symbol.for("react.lazy"),d2=Symbol.iterator;function uO(e){return e===null||typeof e!="object"?null:(e=d2&&e[d2]||e["@@iterator"],typeof e=="function"?e:null)}var pP={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},mP=Object.assign,gP={};function eh(e,t,n){this.props=e,this.context=t,this.refs=gP,this.updater=n||pP}eh.prototype.isReactComponent={};eh.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};eh.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function yP(){}yP.prototype=eh.prototype;function iw(e,t,n){this.props=e,this.context=t,this.refs=gP,this.updater=n||pP}var sw=iw.prototype=new yP;sw.constructor=iw;mP(sw,eh.prototype);sw.isPureReactComponent=!0;var f2=Array.isArray,vP=Object.prototype.hasOwnProperty,ow={current:null},_P={key:!0,ref:!0,__self:!0,__source:!0};function xP(e,t,n){var s,u={},h=null,f=null;if(t!=null)for(s in t.ref!==void 0&&(f=t.ref),t.key!==void 0&&(h=""+t.key),t)vP.call(t,s)&&!_P.hasOwnProperty(s)&&(u[s]=t[s]);var a=arguments.length-2;if(a===1)u.children=n;else if(1<a){for(var w=Array(a),b=0;b<a;b++)w[b]=arguments[b+2];u.children=w}if(e&&e.defaultProps)for(s in a=e.defaultProps,a)u[s]===void 0&&(u[s]=a[s]);return{$$typeof:If,type:e,key:h,ref:f,props:u,_owner:ow.current}}function cO(e,t){return{$$typeof:If,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function aw(e){return typeof e=="object"&&e!==null&&e.$$typeof===If}function hO(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var p2=/\/+/g;function l_(e,t){return typeof e=="object"&&e!==null&&e.key!=null?hO(""+e.key):t.toString(36)}function Sm(e,t,n,s,u){var h=typeof e;(h==="undefined"||h==="boolean")&&(e=null);var f=!1;if(e===null)f=!0;else switch(h){case"string":case"number":f=!0;break;case"object":switch(e.$$typeof){case If:case JL:f=!0}}if(f)return f=e,u=u(f),e=s===""?"."+l_(f,0):s,f2(u)?(n="",e!=null&&(n=e.replace(p2,"$&/")+"/"),Sm(u,t,n,"",function(b){return b})):u!=null&&(aw(u)&&(u=cO(u,n+(!u.key||f&&f.key===u.key?"":(""+u.key).replace(p2,"$&/")+"/")+e)),t.push(u)),1;if(f=0,s=s===""?".":s+":",f2(e))for(var a=0;a<e.length;a++){h=e[a];var w=s+l_(h,a);f+=Sm(h,t,n,w,u)}else if(w=uO(e),typeof w=="function")for(e=w.call(e),a=0;!(h=e.next()).done;)h=h.value,w=s+l_(h,a++),f+=Sm(h,t,n,w,u);else if(h==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return f}function Qp(e,t,n){if(e==null)return e;var s=[],u=0;return Sm(e,s,"","",function(h){return t.call(n,h,u++)}),s}function dO(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ei={current:null},Cm={transition:null},fO={ReactCurrentDispatcher:Ei,ReactCurrentBatchConfig:Cm,ReactCurrentOwner:ow};Qt.Children={map:Qp,forEach:function(e,t,n){Qp(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Qp(e,function(){t++}),t},toArray:function(e){return Qp(e,function(t){return t})||[]},only:function(e){if(!aw(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Qt.Component=eh;Qt.Fragment=eO;Qt.Profiler=nO;Qt.PureComponent=iw;Qt.StrictMode=tO;Qt.Suspense=oO;Qt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fO;Qt.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=mP({},e.props),u=e.key,h=e.ref,f=e._owner;if(t!=null){if(t.ref!==void 0&&(h=t.ref,f=ow.current),t.key!==void 0&&(u=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(w in t)vP.call(t,w)&&!_P.hasOwnProperty(w)&&(s[w]=t[w]===void 0&&a!==void 0?a[w]:t[w])}var w=arguments.length-2;if(w===1)s.children=n;else if(1<w){a=Array(w);for(var b=0;b<w;b++)a[b]=arguments[b+2];s.children=a}return{$$typeof:If,type:e.type,key:u,ref:h,props:s,_owner:f}};Qt.createContext=function(e){return e={$$typeof:iO,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:rO,_context:e},e.Consumer=e};Qt.createElement=xP;Qt.createFactory=function(e){var t=xP.bind(null,e);return t.type=e,t};Qt.createRef=function(){return{current:null}};Qt.forwardRef=function(e){return{$$typeof:sO,render:e}};Qt.isValidElement=aw;Qt.lazy=function(e){return{$$typeof:lO,_payload:{_status:-1,_result:e},_init:dO}};Qt.memo=function(e,t){return{$$typeof:aO,type:e,compare:t===void 0?null:t}};Qt.startTransition=function(e){var t=Cm.transition;Cm.transition={};try{e()}finally{Cm.transition=t}};Qt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Qt.useCallback=function(e,t){return Ei.current.useCallback(e,t)};Qt.useContext=function(e){return Ei.current.useContext(e)};Qt.useDebugValue=function(){};Qt.useDeferredValue=function(e){return Ei.current.useDeferredValue(e)};Qt.useEffect=function(e,t){return Ei.current.useEffect(e,t)};Qt.useId=function(){return Ei.current.useId()};Qt.useImperativeHandle=function(e,t,n){return Ei.current.useImperativeHandle(e,t,n)};Qt.useInsertionEffect=function(e,t){return Ei.current.useInsertionEffect(e,t)};Qt.useLayoutEffect=function(e,t){return Ei.current.useLayoutEffect(e,t)};Qt.useMemo=function(e,t){return Ei.current.useMemo(e,t)};Qt.useReducer=function(e,t,n){return Ei.current.useReducer(e,t,n)};Qt.useRef=function(e){return Ei.current.useRef(e)};Qt.useState=function(e){return Ei.current.useState(e)};Qt.useSyncExternalStore=function(e,t,n){return Ei.current.useSyncExternalStore(e,t,n)};Qt.useTransition=function(){return Ei.current.useTransition()};Qt.version="18.2.0";fP.exports=Qt;var X=fP.exports;const ft=hP(X),lw=QL({__proto__:null,default:ft},[X]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pO=X,mO=Symbol.for("react.element"),gO=Symbol.for("react.fragment"),yO=Object.prototype.hasOwnProperty,vO=pO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,_O={key:!0,ref:!0,__self:!0,__source:!0};function wP(e,t,n){var s,u={},h=null,f=null;n!==void 0&&(h=""+n),t.key!==void 0&&(h=""+t.key),t.ref!==void 0&&(f=t.ref);for(s in t)yO.call(t,s)&&!_O.hasOwnProperty(s)&&(u[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)u[s]===void 0&&(u[s]=t[s]);return{$$typeof:mO,type:e,key:h,ref:f,props:u,_owner:vO.current}}Hg.Fragment=gO;Hg.jsx=wP;Hg.jsxs=wP;dP.exports=Hg;var uw=dP.exports;const Eo=uw.Fragment,ae=uw.jsx,gt=uw.jsxs;var yx={},bP={exports:{}},is={},SP={exports:{}},CP={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(je,ct){var Pt=je.length;je.push(ct);e:for(;0<Pt;){var Ht=Pt-1>>>1,Zt=je[Ht];if(0<u(Zt,ct))je[Ht]=ct,je[Pt]=Zt,Pt=Ht;else break e}}function n(je){return je.length===0?null:je[0]}function s(je){if(je.length===0)return null;var ct=je[0],Pt=je.pop();if(Pt!==ct){je[0]=Pt;e:for(var Ht=0,Zt=je.length,Rt=Zt>>>1;Ht<Rt;){var vn=2*(Ht+1)-1,ui=je[vn],cr=vn+1,Gr=je[cr];if(0>u(ui,Pt))cr<Zt&&0>u(Gr,ui)?(je[Ht]=Gr,je[cr]=Pt,Ht=cr):(je[Ht]=ui,je[vn]=Pt,Ht=vn);else if(cr<Zt&&0>u(Gr,Pt))je[Ht]=Gr,je[cr]=Pt,Ht=cr;else break e}}return ct}function u(je,ct){var Pt=je.sortIndex-ct.sortIndex;return Pt!==0?Pt:je.id-ct.id}if(typeof performance=="object"&&typeof performance.now=="function"){var h=performance;e.unstable_now=function(){return h.now()}}else{var f=Date,a=f.now();e.unstable_now=function(){return f.now()-a}}var w=[],b=[],P=1,A=null,M=3,B=!1,V=!1,j=!1,K=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function W(je){for(var ct=n(b);ct!==null;){if(ct.callback===null)s(b);else if(ct.startTime<=je)s(b),ct.sortIndex=ct.expirationTime,t(w,ct);else break;ct=n(b)}}function ne(je){if(j=!1,W(je),!V)if(n(w)!==null)V=!0,zt(pe);else{var ct=n(b);ct!==null&&St(ne,ct.startTime-je)}}function pe(je,ct){V=!1,j&&(j=!1,F(Se),Se=-1),B=!0;var Pt=M;try{for(W(ct),A=n(w);A!==null&&(!(A.expirationTime>ct)||je&&!Et());){var Ht=A.callback;if(typeof Ht=="function"){A.callback=null,M=A.priorityLevel;var Zt=Ht(A.expirationTime<=ct);ct=e.unstable_now(),typeof Zt=="function"?A.callback=Zt:A===n(w)&&s(w),W(ct)}else s(w);A=n(w)}if(A!==null)var Rt=!0;else{var vn=n(b);vn!==null&&St(ne,vn.startTime-ct),Rt=!1}return Rt}finally{A=null,M=Pt,B=!1}}var Ce=!1,Ie=null,Se=-1,qe=5,ze=-1;function Et(){return!(e.unstable_now()-ze<qe)}function Ge(){if(Ie!==null){var je=e.unstable_now();ze=je;var ct=!0;try{ct=Ie(!0,je)}finally{ct?yt():(Ce=!1,Ie=null)}}else Ce=!1}var yt;if(typeof N=="function")yt=function(){N(Ge)};else if(typeof MessageChannel<"u"){var xt=new MessageChannel,Ot=xt.port2;xt.port1.onmessage=Ge,yt=function(){Ot.postMessage(null)}}else yt=function(){K(Ge,0)};function zt(je){Ie=je,Ce||(Ce=!0,yt())}function St(je,ct){Se=K(function(){je(e.unstable_now())},ct)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(je){je.callback=null},e.unstable_continueExecution=function(){V||B||(V=!0,zt(pe))},e.unstable_forceFrameRate=function(je){0>je||125<je?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):qe=0<je?Math.floor(1e3/je):5},e.unstable_getCurrentPriorityLevel=function(){return M},e.unstable_getFirstCallbackNode=function(){return n(w)},e.unstable_next=function(je){switch(M){case 1:case 2:case 3:var ct=3;break;default:ct=M}var Pt=M;M=ct;try{return je()}finally{M=Pt}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(je,ct){switch(je){case 1:case 2:case 3:case 4:case 5:break;default:je=3}var Pt=M;M=je;try{return ct()}finally{M=Pt}},e.unstable_scheduleCallback=function(je,ct,Pt){var Ht=e.unstable_now();switch(typeof Pt=="object"&&Pt!==null?(Pt=Pt.delay,Pt=typeof Pt=="number"&&0<Pt?Ht+Pt:Ht):Pt=Ht,je){case 1:var Zt=-1;break;case 2:Zt=250;break;case 5:Zt=1073741823;break;case 4:Zt=1e4;break;default:Zt=5e3}return Zt=Pt+Zt,je={id:P++,callback:ct,priorityLevel:je,startTime:Pt,expirationTime:Zt,sortIndex:-1},Pt>Ht?(je.sortIndex=Pt,t(b,je),n(w)===null&&je===n(b)&&(j?(F(Se),Se=-1):j=!0,St(ne,Pt-Ht))):(je.sortIndex=Zt,t(w,je),V||B||(V=!0,zt(pe))),je},e.unstable_shouldYield=Et,e.unstable_wrapCallback=function(je){var ct=M;return function(){var Pt=M;M=ct;try{return je.apply(this,arguments)}finally{M=Pt}}}})(CP);SP.exports=CP;var xO=SP.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TP=X,ts=xO;function He(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var EP=new Set,ef={};function _u(e,t){Bc(e,t),Bc(e+"Capture",t)}function Bc(e,t){for(ef[e]=t,e=0;e<t.length;e++)EP.add(t[e])}var oa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vx=Object.prototype.hasOwnProperty,wO=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m2={},g2={};function bO(e){return vx.call(g2,e)?!0:vx.call(m2,e)?!1:wO.test(e)?g2[e]=!0:(m2[e]=!0,!1)}function SO(e,t,n,s){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function CO(e,t,n,s){if(t===null||typeof t>"u"||SO(e,t,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Pi(e,t,n,s,u,h,f){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=u,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=h,this.removeEmptyString=f}var qr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){qr[e]=new Pi(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];qr[t]=new Pi(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){qr[e]=new Pi(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){qr[e]=new Pi(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){qr[e]=new Pi(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){qr[e]=new Pi(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){qr[e]=new Pi(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){qr[e]=new Pi(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){qr[e]=new Pi(e,5,!1,e.toLowerCase(),null,!1,!1)});var cw=/[\-:]([a-z])/g;function hw(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(cw,hw);qr[t]=new Pi(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(cw,hw);qr[t]=new Pi(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(cw,hw);qr[t]=new Pi(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){qr[e]=new Pi(e,1,!1,e.toLowerCase(),null,!1,!1)});qr.xlinkHref=new Pi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){qr[e]=new Pi(e,1,!1,e.toLowerCase(),null,!0,!0)});function dw(e,t,n,s){var u=qr.hasOwnProperty(t)?qr[t]:null;(u!==null?u.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(CO(t,n,u,s)&&(n=null),s||u===null?bO(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):u.mustUseProperty?e[u.propertyName]=n===null?u.type===3?!1:"":n:(t=u.attributeName,s=u.attributeNamespace,n===null?e.removeAttribute(t):(u=u.type,n=u===3||u===4&&n===!0?"":""+n,s?e.setAttributeNS(s,t,n):e.setAttribute(t,n))))}var ha=TP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Yp=Symbol.for("react.element"),hc=Symbol.for("react.portal"),dc=Symbol.for("react.fragment"),fw=Symbol.for("react.strict_mode"),_x=Symbol.for("react.profiler"),PP=Symbol.for("react.provider"),AP=Symbol.for("react.context"),pw=Symbol.for("react.forward_ref"),xx=Symbol.for("react.suspense"),wx=Symbol.for("react.suspense_list"),mw=Symbol.for("react.memo"),$a=Symbol.for("react.lazy"),kP=Symbol.for("react.offscreen"),y2=Symbol.iterator;function gd(e){return e===null||typeof e!="object"?null:(e=y2&&e[y2]||e["@@iterator"],typeof e=="function"?e:null)}var Hn=Object.assign,u_;function Id(e){if(u_===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);u_=t&&t[1]||""}return`
`+u_+e}var c_=!1;function h_(e,t){if(!e||c_)return"";c_=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(b){var s=b}Reflect.construct(e,[],t)}else{try{t.call()}catch(b){s=b}e.call(t.prototype)}else{try{throw Error()}catch(b){s=b}e()}}catch(b){if(b&&s&&typeof b.stack=="string"){for(var u=b.stack.split(`
`),h=s.stack.split(`
`),f=u.length-1,a=h.length-1;1<=f&&0<=a&&u[f]!==h[a];)a--;for(;1<=f&&0<=a;f--,a--)if(u[f]!==h[a]){if(f!==1||a!==1)do if(f--,a--,0>a||u[f]!==h[a]){var w=`
`+u[f].replace(" at new "," at ");return e.displayName&&w.includes("<anonymous>")&&(w=w.replace("<anonymous>",e.displayName)),w}while(1<=f&&0<=a);break}}}finally{c_=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Id(e):""}function TO(e){switch(e.tag){case 5:return Id(e.type);case 16:return Id("Lazy");case 13:return Id("Suspense");case 19:return Id("SuspenseList");case 0:case 2:case 15:return e=h_(e.type,!1),e;case 11:return e=h_(e.type.render,!1),e;case 1:return e=h_(e.type,!0),e;default:return""}}function bx(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case dc:return"Fragment";case hc:return"Portal";case _x:return"Profiler";case fw:return"StrictMode";case xx:return"Suspense";case wx:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case AP:return(e.displayName||"Context")+".Consumer";case PP:return(e._context.displayName||"Context")+".Provider";case pw:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case mw:return t=e.displayName||null,t!==null?t:bx(e.type)||"Memo";case $a:t=e._payload,e=e._init;try{return bx(e(t))}catch{}}return null}function EO(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return bx(t);case 8:return t===fw?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function cl(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function IP(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function PO(e){var t=IP(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var u=n.get,h=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return u.call(this)},set:function(f){s=""+f,h.call(this,f)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(f){s=""+f},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Jp(e){e._valueTracker||(e._valueTracker=PO(e))}function MP(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),s="";return e&&(s=IP(e)?e.checked?"true":"false":e.value),e=s,e!==n?(t.setValue(e),!0):!1}function Qm(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Sx(e,t){var n=t.checked;return Hn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function v2(e,t){var n=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;n=cl(t.value!=null?t.value:n),e._wrapperState={initialChecked:s,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function RP(e,t){t=t.checked,t!=null&&dw(e,"checked",t,!1)}function Cx(e,t){RP(e,t);var n=cl(t.value),s=t.type;if(n!=null)s==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Tx(e,t.type,n):t.hasOwnProperty("defaultValue")&&Tx(e,t.type,cl(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function _2(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Tx(e,t,n){(t!=="number"||Qm(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Md=Array.isArray;function Ic(e,t,n,s){if(e=e.options,t){t={};for(var u=0;u<n.length;u++)t["$"+n[u]]=!0;for(n=0;n<e.length;n++)u=t.hasOwnProperty("$"+e[n].value),e[n].selected!==u&&(e[n].selected=u),u&&s&&(e[n].defaultSelected=!0)}else{for(n=""+cl(n),t=null,u=0;u<e.length;u++){if(e[u].value===n){e[u].selected=!0,s&&(e[u].defaultSelected=!0);return}t!==null||e[u].disabled||(t=e[u])}t!==null&&(t.selected=!0)}}function Ex(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(He(91));return Hn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function x2(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(He(92));if(Md(n)){if(1<n.length)throw Error(He(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:cl(n)}}function DP(e,t){var n=cl(t.value),s=cl(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),s!=null&&(e.defaultValue=""+s)}function w2(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function zP(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Px(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?zP(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var em,LP=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,s,u){MSApp.execUnsafeLocalFunction(function(){return e(t,n,s,u)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(em=em||document.createElement("div"),em.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=em.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function tf(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Bd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},AO=["Webkit","ms","Moz","O"];Object.keys(Bd).forEach(function(e){AO.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Bd[t]=Bd[e]})});function OP(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Bd.hasOwnProperty(e)&&Bd[e]?(""+t).trim():t+"px"}function FP(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var s=n.indexOf("--")===0,u=OP(n,t[n],s);n==="float"&&(n="cssFloat"),s?e.setProperty(n,u):e[n]=u}}var kO=Hn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ax(e,t){if(t){if(kO[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(He(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(He(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(He(61))}if(t.style!=null&&typeof t.style!="object")throw Error(He(62))}}function kx(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ix=null;function gw(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Mx=null,Mc=null,Rc=null;function b2(e){if(e=Df(e)){if(typeof Mx!="function")throw Error(He(280));var t=e.stateNode;t&&(t=Jg(t),Mx(e.stateNode,e.type,t))}}function NP(e){Mc?Rc?Rc.push(e):Rc=[e]:Mc=e}function BP(){if(Mc){var e=Mc,t=Rc;if(Rc=Mc=null,b2(e),t)for(e=0;e<t.length;e++)b2(t[e])}}function VP(e,t){return e(t)}function $P(){}var d_=!1;function jP(e,t,n){if(d_)return e(t,n);d_=!0;try{return VP(e,t,n)}finally{d_=!1,(Mc!==null||Rc!==null)&&($P(),BP())}}function nf(e,t){var n=e.stateNode;if(n===null)return null;var s=Jg(n);if(s===null)return null;n=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(He(231,t,typeof n));return n}var Rx=!1;if(oa)try{var yd={};Object.defineProperty(yd,"passive",{get:function(){Rx=!0}}),window.addEventListener("test",yd,yd),window.removeEventListener("test",yd,yd)}catch{Rx=!1}function IO(e,t,n,s,u,h,f,a,w){var b=Array.prototype.slice.call(arguments,3);try{t.apply(n,b)}catch(P){this.onError(P)}}var Vd=!1,Ym=null,Jm=!1,Dx=null,MO={onError:function(e){Vd=!0,Ym=e}};function RO(e,t,n,s,u,h,f,a,w){Vd=!1,Ym=null,IO.apply(MO,arguments)}function DO(e,t,n,s,u,h,f,a,w){if(RO.apply(this,arguments),Vd){if(Vd){var b=Ym;Vd=!1,Ym=null}else throw Error(He(198));Jm||(Jm=!0,Dx=b)}}function xu(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function UP(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function S2(e){if(xu(e)!==e)throw Error(He(188))}function zO(e){var t=e.alternate;if(!t){if(t=xu(e),t===null)throw Error(He(188));return t!==e?null:e}for(var n=e,s=t;;){var u=n.return;if(u===null)break;var h=u.alternate;if(h===null){if(s=u.return,s!==null){n=s;continue}break}if(u.child===h.child){for(h=u.child;h;){if(h===n)return S2(u),e;if(h===s)return S2(u),t;h=h.sibling}throw Error(He(188))}if(n.return!==s.return)n=u,s=h;else{for(var f=!1,a=u.child;a;){if(a===n){f=!0,n=u,s=h;break}if(a===s){f=!0,s=u,n=h;break}a=a.sibling}if(!f){for(a=h.child;a;){if(a===n){f=!0,n=h,s=u;break}if(a===s){f=!0,s=h,n=u;break}a=a.sibling}if(!f)throw Error(He(189))}}if(n.alternate!==s)throw Error(He(190))}if(n.tag!==3)throw Error(He(188));return n.stateNode.current===n?e:t}function qP(e){return e=zO(e),e!==null?GP(e):null}function GP(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=GP(e);if(t!==null)return t;e=e.sibling}return null}var ZP=ts.unstable_scheduleCallback,C2=ts.unstable_cancelCallback,LO=ts.unstable_shouldYield,OO=ts.unstable_requestPaint,ur=ts.unstable_now,FO=ts.unstable_getCurrentPriorityLevel,yw=ts.unstable_ImmediatePriority,WP=ts.unstable_UserBlockingPriority,eg=ts.unstable_NormalPriority,NO=ts.unstable_LowPriority,HP=ts.unstable_IdlePriority,Kg=null,xo=null;function BO(e){if(xo&&typeof xo.onCommitFiberRoot=="function")try{xo.onCommitFiberRoot(Kg,e,void 0,(e.current.flags&128)===128)}catch{}}var Qs=Math.clz32?Math.clz32:jO,VO=Math.log,$O=Math.LN2;function jO(e){return e>>>=0,e===0?32:31-(VO(e)/$O|0)|0}var tm=64,nm=4194304;function Rd(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function tg(e,t){var n=e.pendingLanes;if(n===0)return 0;var s=0,u=e.suspendedLanes,h=e.pingedLanes,f=n&268435455;if(f!==0){var a=f&~u;a!==0?s=Rd(a):(h&=f,h!==0&&(s=Rd(h)))}else f=n&~u,f!==0?s=Rd(f):h!==0&&(s=Rd(h));if(s===0)return 0;if(t!==0&&t!==s&&!(t&u)&&(u=s&-s,h=t&-t,u>=h||u===16&&(h&4194240)!==0))return t;if(s&4&&(s|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)n=31-Qs(t),u=1<<n,s|=e[n],t&=~u;return s}function UO(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qO(e,t){for(var n=e.suspendedLanes,s=e.pingedLanes,u=e.expirationTimes,h=e.pendingLanes;0<h;){var f=31-Qs(h),a=1<<f,w=u[f];w===-1?(!(a&n)||a&s)&&(u[f]=UO(a,t)):w<=t&&(e.expiredLanes|=a),h&=~a}}function zx(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function KP(){var e=tm;return tm<<=1,!(tm&4194240)&&(tm=64),e}function f_(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Mf(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Qs(t),e[t]=n}function GO(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<n;){var u=31-Qs(n),h=1<<u;t[u]=0,s[u]=-1,e[u]=-1,n&=~h}}function vw(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var s=31-Qs(n),u=1<<s;u&t|e[s]&t&&(e[s]|=t),n&=~u}}var hn=0;function XP(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var QP,_w,YP,JP,eA,Lx=!1,rm=[],Ja=null,el=null,tl=null,rf=new Map,sf=new Map,qa=[],ZO="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function T2(e,t){switch(e){case"focusin":case"focusout":Ja=null;break;case"dragenter":case"dragleave":el=null;break;case"mouseover":case"mouseout":tl=null;break;case"pointerover":case"pointerout":rf.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":sf.delete(t.pointerId)}}function vd(e,t,n,s,u,h){return e===null||e.nativeEvent!==h?(e={blockedOn:t,domEventName:n,eventSystemFlags:s,nativeEvent:h,targetContainers:[u]},t!==null&&(t=Df(t),t!==null&&_w(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,u!==null&&t.indexOf(u)===-1&&t.push(u),e)}function WO(e,t,n,s,u){switch(t){case"focusin":return Ja=vd(Ja,e,t,n,s,u),!0;case"dragenter":return el=vd(el,e,t,n,s,u),!0;case"mouseover":return tl=vd(tl,e,t,n,s,u),!0;case"pointerover":var h=u.pointerId;return rf.set(h,vd(rf.get(h)||null,e,t,n,s,u)),!0;case"gotpointercapture":return h=u.pointerId,sf.set(h,vd(sf.get(h)||null,e,t,n,s,u)),!0}return!1}function tA(e){var t=eu(e.target);if(t!==null){var n=xu(t);if(n!==null){if(t=n.tag,t===13){if(t=UP(n),t!==null){e.blockedOn=t,eA(e.priority,function(){YP(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Tm(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Ox(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var s=new n.constructor(n.type,n);Ix=s,n.target.dispatchEvent(s),Ix=null}else return t=Df(n),t!==null&&_w(t),e.blockedOn=n,!1;t.shift()}return!0}function E2(e,t,n){Tm(e)&&n.delete(t)}function HO(){Lx=!1,Ja!==null&&Tm(Ja)&&(Ja=null),el!==null&&Tm(el)&&(el=null),tl!==null&&Tm(tl)&&(tl=null),rf.forEach(E2),sf.forEach(E2)}function _d(e,t){e.blockedOn===t&&(e.blockedOn=null,Lx||(Lx=!0,ts.unstable_scheduleCallback(ts.unstable_NormalPriority,HO)))}function of(e){function t(u){return _d(u,e)}if(0<rm.length){_d(rm[0],e);for(var n=1;n<rm.length;n++){var s=rm[n];s.blockedOn===e&&(s.blockedOn=null)}}for(Ja!==null&&_d(Ja,e),el!==null&&_d(el,e),tl!==null&&_d(tl,e),rf.forEach(t),sf.forEach(t),n=0;n<qa.length;n++)s=qa[n],s.blockedOn===e&&(s.blockedOn=null);for(;0<qa.length&&(n=qa[0],n.blockedOn===null);)tA(n),n.blockedOn===null&&qa.shift()}var Dc=ha.ReactCurrentBatchConfig,ng=!0;function KO(e,t,n,s){var u=hn,h=Dc.transition;Dc.transition=null;try{hn=1,xw(e,t,n,s)}finally{hn=u,Dc.transition=h}}function XO(e,t,n,s){var u=hn,h=Dc.transition;Dc.transition=null;try{hn=4,xw(e,t,n,s)}finally{hn=u,Dc.transition=h}}function xw(e,t,n,s){if(ng){var u=Ox(e,t,n,s);if(u===null)S_(e,t,s,rg,n),T2(e,s);else if(WO(u,e,t,n,s))s.stopPropagation();else if(T2(e,s),t&4&&-1<ZO.indexOf(e)){for(;u!==null;){var h=Df(u);if(h!==null&&QP(h),h=Ox(e,t,n,s),h===null&&S_(e,t,s,rg,n),h===u)break;u=h}u!==null&&s.stopPropagation()}else S_(e,t,s,null,n)}}var rg=null;function Ox(e,t,n,s){if(rg=null,e=gw(s),e=eu(e),e!==null)if(t=xu(e),t===null)e=null;else if(n=t.tag,n===13){if(e=UP(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return rg=e,null}function nA(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(FO()){case yw:return 1;case WP:return 4;case eg:case NO:return 16;case HP:return 536870912;default:return 16}default:return 16}}var Wa=null,ww=null,Em=null;function rA(){if(Em)return Em;var e,t=ww,n=t.length,s,u="value"in Wa?Wa.value:Wa.textContent,h=u.length;for(e=0;e<n&&t[e]===u[e];e++);var f=n-e;for(s=1;s<=f&&t[n-s]===u[h-s];s++);return Em=u.slice(e,1<s?1-s:void 0)}function Pm(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function im(){return!0}function P2(){return!1}function ss(e){function t(n,s,u,h,f){this._reactName=n,this._targetInst=u,this.type=s,this.nativeEvent=h,this.target=f,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(h):h[a]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?im:P2,this.isPropagationStopped=P2,this}return Hn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=im)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=im)},persist:function(){},isPersistent:im}),t}var th={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bw=ss(th),Rf=Hn({},th,{view:0,detail:0}),QO=ss(Rf),p_,m_,xd,Xg=Hn({},Rf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sw,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==xd&&(xd&&e.type==="mousemove"?(p_=e.screenX-xd.screenX,m_=e.screenY-xd.screenY):m_=p_=0,xd=e),p_)},movementY:function(e){return"movementY"in e?e.movementY:m_}}),A2=ss(Xg),YO=Hn({},Xg,{dataTransfer:0}),JO=ss(YO),eF=Hn({},Rf,{relatedTarget:0}),g_=ss(eF),tF=Hn({},th,{animationName:0,elapsedTime:0,pseudoElement:0}),nF=ss(tF),rF=Hn({},th,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),iF=ss(rF),sF=Hn({},th,{data:0}),k2=ss(sF),oF={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},aF={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},lF={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function uF(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=lF[e])?!!t[e]:!1}function Sw(){return uF}var cF=Hn({},Rf,{key:function(e){if(e.key){var t=oF[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Pm(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?aF[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sw,charCode:function(e){return e.type==="keypress"?Pm(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Pm(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),hF=ss(cF),dF=Hn({},Xg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),I2=ss(dF),fF=Hn({},Rf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sw}),pF=ss(fF),mF=Hn({},th,{propertyName:0,elapsedTime:0,pseudoElement:0}),gF=ss(mF),yF=Hn({},Xg,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),vF=ss(yF),_F=[9,13,27,32],Cw=oa&&"CompositionEvent"in window,$d=null;oa&&"documentMode"in document&&($d=document.documentMode);var xF=oa&&"TextEvent"in window&&!$d,iA=oa&&(!Cw||$d&&8<$d&&11>=$d),M2=String.fromCharCode(32),R2=!1;function sA(e,t){switch(e){case"keyup":return _F.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function oA(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var fc=!1;function wF(e,t){switch(e){case"compositionend":return oA(t);case"keypress":return t.which!==32?null:(R2=!0,M2);case"textInput":return e=t.data,e===M2&&R2?null:e;default:return null}}function bF(e,t){if(fc)return e==="compositionend"||!Cw&&sA(e,t)?(e=rA(),Em=ww=Wa=null,fc=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return iA&&t.locale!=="ko"?null:t.data;default:return null}}var SF={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function D2(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!SF[e.type]:t==="textarea"}function aA(e,t,n,s){NP(s),t=ig(t,"onChange"),0<t.length&&(n=new bw("onChange","change",null,n,s),e.push({event:n,listeners:t}))}var jd=null,af=null;function CF(e){vA(e,0)}function Qg(e){var t=gc(e);if(MP(t))return e}function TF(e,t){if(e==="change")return t}var lA=!1;if(oa){var y_;if(oa){var v_="oninput"in document;if(!v_){var z2=document.createElement("div");z2.setAttribute("oninput","return;"),v_=typeof z2.oninput=="function"}y_=v_}else y_=!1;lA=y_&&(!document.documentMode||9<document.documentMode)}function L2(){jd&&(jd.detachEvent("onpropertychange",uA),af=jd=null)}function uA(e){if(e.propertyName==="value"&&Qg(af)){var t=[];aA(t,af,e,gw(e)),jP(CF,t)}}function EF(e,t,n){e==="focusin"?(L2(),jd=t,af=n,jd.attachEvent("onpropertychange",uA)):e==="focusout"&&L2()}function PF(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Qg(af)}function AF(e,t){if(e==="click")return Qg(t)}function kF(e,t){if(e==="input"||e==="change")return Qg(t)}function IF(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Js=typeof Object.is=="function"?Object.is:IF;function lf(e,t){if(Js(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var u=n[s];if(!vx.call(t,u)||!Js(e[u],t[u]))return!1}return!0}function O2(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function F2(e,t){var n=O2(e);e=0;for(var s;n;){if(n.nodeType===3){if(s=e+n.textContent.length,e<=t&&s>=t)return{node:n,offset:t-e};e=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=O2(n)}}function cA(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?cA(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function hA(){for(var e=window,t=Qm();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Qm(e.document)}return t}function Tw(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function MF(e){var t=hA(),n=e.focusedElem,s=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&cA(n.ownerDocument.documentElement,n)){if(s!==null&&Tw(n)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var u=n.textContent.length,h=Math.min(s.start,u);s=s.end===void 0?h:Math.min(s.end,u),!e.extend&&h>s&&(u=s,s=h,h=u),u=F2(n,h);var f=F2(n,s);u&&f&&(e.rangeCount!==1||e.anchorNode!==u.node||e.anchorOffset!==u.offset||e.focusNode!==f.node||e.focusOffset!==f.offset)&&(t=t.createRange(),t.setStart(u.node,u.offset),e.removeAllRanges(),h>s?(e.addRange(t),e.extend(f.node,f.offset)):(t.setEnd(f.node,f.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var RF=oa&&"documentMode"in document&&11>=document.documentMode,pc=null,Fx=null,Ud=null,Nx=!1;function N2(e,t,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Nx||pc==null||pc!==Qm(s)||(s=pc,"selectionStart"in s&&Tw(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Ud&&lf(Ud,s)||(Ud=s,s=ig(Fx,"onSelect"),0<s.length&&(t=new bw("onSelect","select",null,t,n),e.push({event:t,listeners:s}),t.target=pc)))}function sm(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var mc={animationend:sm("Animation","AnimationEnd"),animationiteration:sm("Animation","AnimationIteration"),animationstart:sm("Animation","AnimationStart"),transitionend:sm("Transition","TransitionEnd")},__={},dA={};oa&&(dA=document.createElement("div").style,"AnimationEvent"in window||(delete mc.animationend.animation,delete mc.animationiteration.animation,delete mc.animationstart.animation),"TransitionEvent"in window||delete mc.transitionend.transition);function Yg(e){if(__[e])return __[e];if(!mc[e])return e;var t=mc[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in dA)return __[e]=t[n];return e}var fA=Yg("animationend"),pA=Yg("animationiteration"),mA=Yg("animationstart"),gA=Yg("transitionend"),yA=new Map,B2="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function vl(e,t){yA.set(e,t),_u(t,[e])}for(var x_=0;x_<B2.length;x_++){var w_=B2[x_],DF=w_.toLowerCase(),zF=w_[0].toUpperCase()+w_.slice(1);vl(DF,"on"+zF)}vl(fA,"onAnimationEnd");vl(pA,"onAnimationIteration");vl(mA,"onAnimationStart");vl("dblclick","onDoubleClick");vl("focusin","onFocus");vl("focusout","onBlur");vl(gA,"onTransitionEnd");Bc("onMouseEnter",["mouseout","mouseover"]);Bc("onMouseLeave",["mouseout","mouseover"]);Bc("onPointerEnter",["pointerout","pointerover"]);Bc("onPointerLeave",["pointerout","pointerover"]);_u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));_u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));_u("onBeforeInput",["compositionend","keypress","textInput","paste"]);_u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));_u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));_u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),LF=new Set("cancel close invalid load scroll toggle".split(" ").concat(Dd));function V2(e,t,n){var s=e.type||"unknown-event";e.currentTarget=n,DO(s,t,void 0,e),e.currentTarget=null}function vA(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var s=e[n],u=s.event;s=s.listeners;e:{var h=void 0;if(t)for(var f=s.length-1;0<=f;f--){var a=s[f],w=a.instance,b=a.currentTarget;if(a=a.listener,w!==h&&u.isPropagationStopped())break e;V2(u,a,b),h=w}else for(f=0;f<s.length;f++){if(a=s[f],w=a.instance,b=a.currentTarget,a=a.listener,w!==h&&u.isPropagationStopped())break e;V2(u,a,b),h=w}}}if(Jm)throw e=Dx,Jm=!1,Dx=null,e}function Dn(e,t){var n=t[Ux];n===void 0&&(n=t[Ux]=new Set);var s=e+"__bubble";n.has(s)||(_A(t,e,2,!1),n.add(s))}function b_(e,t,n){var s=0;t&&(s|=4),_A(n,e,s,t)}var om="_reactListening"+Math.random().toString(36).slice(2);function uf(e){if(!e[om]){e[om]=!0,EP.forEach(function(n){n!=="selectionchange"&&(LF.has(n)||b_(n,!1,e),b_(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[om]||(t[om]=!0,b_("selectionchange",!1,t))}}function _A(e,t,n,s){switch(nA(t)){case 1:var u=KO;break;case 4:u=XO;break;default:u=xw}n=u.bind(null,t,n,e),u=void 0,!Rx||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(u=!0),s?u!==void 0?e.addEventListener(t,n,{capture:!0,passive:u}):e.addEventListener(t,n,!0):u!==void 0?e.addEventListener(t,n,{passive:u}):e.addEventListener(t,n,!1)}function S_(e,t,n,s,u){var h=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var f=s.tag;if(f===3||f===4){var a=s.stateNode.containerInfo;if(a===u||a.nodeType===8&&a.parentNode===u)break;if(f===4)for(f=s.return;f!==null;){var w=f.tag;if((w===3||w===4)&&(w=f.stateNode.containerInfo,w===u||w.nodeType===8&&w.parentNode===u))return;f=f.return}for(;a!==null;){if(f=eu(a),f===null)return;if(w=f.tag,w===5||w===6){s=h=f;continue e}a=a.parentNode}}s=s.return}jP(function(){var b=h,P=gw(n),A=[];e:{var M=yA.get(e);if(M!==void 0){var B=bw,V=e;switch(e){case"keypress":if(Pm(n)===0)break e;case"keydown":case"keyup":B=hF;break;case"focusin":V="focus",B=g_;break;case"focusout":V="blur",B=g_;break;case"beforeblur":case"afterblur":B=g_;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":B=A2;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":B=JO;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":B=pF;break;case fA:case pA:case mA:B=nF;break;case gA:B=gF;break;case"scroll":B=QO;break;case"wheel":B=vF;break;case"copy":case"cut":case"paste":B=iF;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":B=I2}var j=(t&4)!==0,K=!j&&e==="scroll",F=j?M!==null?M+"Capture":null:M;j=[];for(var N=b,W;N!==null;){W=N;var ne=W.stateNode;if(W.tag===5&&ne!==null&&(W=ne,F!==null&&(ne=nf(N,F),ne!=null&&j.push(cf(N,ne,W)))),K)break;N=N.return}0<j.length&&(M=new B(M,V,null,n,P),A.push({event:M,listeners:j}))}}if(!(t&7)){e:{if(M=e==="mouseover"||e==="pointerover",B=e==="mouseout"||e==="pointerout",M&&n!==Ix&&(V=n.relatedTarget||n.fromElement)&&(eu(V)||V[aa]))break e;if((B||M)&&(M=P.window===P?P:(M=P.ownerDocument)?M.defaultView||M.parentWindow:window,B?(V=n.relatedTarget||n.toElement,B=b,V=V?eu(V):null,V!==null&&(K=xu(V),V!==K||V.tag!==5&&V.tag!==6)&&(V=null)):(B=null,V=b),B!==V)){if(j=A2,ne="onMouseLeave",F="onMouseEnter",N="mouse",(e==="pointerout"||e==="pointerover")&&(j=I2,ne="onPointerLeave",F="onPointerEnter",N="pointer"),K=B==null?M:gc(B),W=V==null?M:gc(V),M=new j(ne,N+"leave",B,n,P),M.target=K,M.relatedTarget=W,ne=null,eu(P)===b&&(j=new j(F,N+"enter",V,n,P),j.target=W,j.relatedTarget=K,ne=j),K=ne,B&&V)t:{for(j=B,F=V,N=0,W=j;W;W=ac(W))N++;for(W=0,ne=F;ne;ne=ac(ne))W++;for(;0<N-W;)j=ac(j),N--;for(;0<W-N;)F=ac(F),W--;for(;N--;){if(j===F||F!==null&&j===F.alternate)break t;j=ac(j),F=ac(F)}j=null}else j=null;B!==null&&$2(A,M,B,j,!1),V!==null&&K!==null&&$2(A,K,V,j,!0)}}e:{if(M=b?gc(b):window,B=M.nodeName&&M.nodeName.toLowerCase(),B==="select"||B==="input"&&M.type==="file")var pe=TF;else if(D2(M))if(lA)pe=kF;else{pe=PF;var Ce=EF}else(B=M.nodeName)&&B.toLowerCase()==="input"&&(M.type==="checkbox"||M.type==="radio")&&(pe=AF);if(pe&&(pe=pe(e,b))){aA(A,pe,n,P);break e}Ce&&Ce(e,M,b),e==="focusout"&&(Ce=M._wrapperState)&&Ce.controlled&&M.type==="number"&&Tx(M,"number",M.value)}switch(Ce=b?gc(b):window,e){case"focusin":(D2(Ce)||Ce.contentEditable==="true")&&(pc=Ce,Fx=b,Ud=null);break;case"focusout":Ud=Fx=pc=null;break;case"mousedown":Nx=!0;break;case"contextmenu":case"mouseup":case"dragend":Nx=!1,N2(A,n,P);break;case"selectionchange":if(RF)break;case"keydown":case"keyup":N2(A,n,P)}var Ie;if(Cw)e:{switch(e){case"compositionstart":var Se="onCompositionStart";break e;case"compositionend":Se="onCompositionEnd";break e;case"compositionupdate":Se="onCompositionUpdate";break e}Se=void 0}else fc?sA(e,n)&&(Se="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(Se="onCompositionStart");Se&&(iA&&n.locale!=="ko"&&(fc||Se!=="onCompositionStart"?Se==="onCompositionEnd"&&fc&&(Ie=rA()):(Wa=P,ww="value"in Wa?Wa.value:Wa.textContent,fc=!0)),Ce=ig(b,Se),0<Ce.length&&(Se=new k2(Se,e,null,n,P),A.push({event:Se,listeners:Ce}),Ie?Se.data=Ie:(Ie=oA(n),Ie!==null&&(Se.data=Ie)))),(Ie=xF?wF(e,n):bF(e,n))&&(b=ig(b,"onBeforeInput"),0<b.length&&(P=new k2("onBeforeInput","beforeinput",null,n,P),A.push({event:P,listeners:b}),P.data=Ie))}vA(A,t)})}function cf(e,t,n){return{instance:e,listener:t,currentTarget:n}}function ig(e,t){for(var n=t+"Capture",s=[];e!==null;){var u=e,h=u.stateNode;u.tag===5&&h!==null&&(u=h,h=nf(e,n),h!=null&&s.unshift(cf(e,h,u)),h=nf(e,t),h!=null&&s.push(cf(e,h,u))),e=e.return}return s}function ac(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function $2(e,t,n,s,u){for(var h=t._reactName,f=[];n!==null&&n!==s;){var a=n,w=a.alternate,b=a.stateNode;if(w!==null&&w===s)break;a.tag===5&&b!==null&&(a=b,u?(w=nf(n,h),w!=null&&f.unshift(cf(n,w,a))):u||(w=nf(n,h),w!=null&&f.push(cf(n,w,a)))),n=n.return}f.length!==0&&e.push({event:t,listeners:f})}var OF=/\r\n?/g,FF=/\u0000|\uFFFD/g;function j2(e){return(typeof e=="string"?e:""+e).replace(OF,`
`).replace(FF,"")}function am(e,t,n){if(t=j2(t),j2(e)!==t&&n)throw Error(He(425))}function sg(){}var Bx=null,Vx=null;function $x(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var jx=typeof setTimeout=="function"?setTimeout:void 0,NF=typeof clearTimeout=="function"?clearTimeout:void 0,U2=typeof Promise=="function"?Promise:void 0,BF=typeof queueMicrotask=="function"?queueMicrotask:typeof U2<"u"?function(e){return U2.resolve(null).then(e).catch(VF)}:jx;function VF(e){setTimeout(function(){throw e})}function C_(e,t){var n=t,s=0;do{var u=n.nextSibling;if(e.removeChild(n),u&&u.nodeType===8)if(n=u.data,n==="/$"){if(s===0){e.removeChild(u),of(t);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=u}while(n);of(t)}function nl(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function q2(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var nh=Math.random().toString(36).slice(2),yo="__reactFiber$"+nh,hf="__reactProps$"+nh,aa="__reactContainer$"+nh,Ux="__reactEvents$"+nh,$F="__reactListeners$"+nh,jF="__reactHandles$"+nh;function eu(e){var t=e[yo];if(t)return t;for(var n=e.parentNode;n;){if(t=n[aa]||n[yo]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=q2(e);e!==null;){if(n=e[yo])return n;e=q2(e)}return t}e=n,n=e.parentNode}return null}function Df(e){return e=e[yo]||e[aa],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function gc(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(He(33))}function Jg(e){return e[hf]||null}var qx=[],yc=-1;function _l(e){return{current:e}}function Ln(e){0>yc||(e.current=qx[yc],qx[yc]=null,yc--)}function Pn(e,t){yc++,qx[yc]=e.current,e.current=t}var hl={},li=_l(hl),$i=_l(!1),du=hl;function Vc(e,t){var n=e.type.contextTypes;if(!n)return hl;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var u={},h;for(h in n)u[h]=t[h];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=u),u}function ji(e){return e=e.childContextTypes,e!=null}function og(){Ln($i),Ln(li)}function G2(e,t,n){if(li.current!==hl)throw Error(He(168));Pn(li,t),Pn($i,n)}function xA(e,t,n){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var u in s)if(!(u in t))throw Error(He(108,EO(e)||"Unknown",u));return Hn({},n,s)}function ag(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||hl,du=li.current,Pn(li,e),Pn($i,$i.current),!0}function Z2(e,t,n){var s=e.stateNode;if(!s)throw Error(He(169));n?(e=xA(e,t,du),s.__reactInternalMemoizedMergedChildContext=e,Ln($i),Ln(li),Pn(li,e)):Ln($i),Pn($i,n)}var Ho=null,ey=!1,T_=!1;function wA(e){Ho===null?Ho=[e]:Ho.push(e)}function UF(e){ey=!0,wA(e)}function xl(){if(!T_&&Ho!==null){T_=!0;var e=0,t=hn;try{var n=Ho;for(hn=1;e<n.length;e++){var s=n[e];do s=s(!0);while(s!==null)}Ho=null,ey=!1}catch(u){throw Ho!==null&&(Ho=Ho.slice(e+1)),ZP(yw,xl),u}finally{hn=t,T_=!1}}return null}var vc=[],_c=0,lg=null,ug=0,bs=[],Ss=0,fu=null,Qo=1,Yo="";function Zl(e,t){vc[_c++]=ug,vc[_c++]=lg,lg=e,ug=t}function bA(e,t,n){bs[Ss++]=Qo,bs[Ss++]=Yo,bs[Ss++]=fu,fu=e;var s=Qo;e=Yo;var u=32-Qs(s)-1;s&=~(1<<u),n+=1;var h=32-Qs(t)+u;if(30<h){var f=u-u%5;h=(s&(1<<f)-1).toString(32),s>>=f,u-=f,Qo=1<<32-Qs(t)+u|n<<u|s,Yo=h+e}else Qo=1<<h|n<<u|s,Yo=e}function Ew(e){e.return!==null&&(Zl(e,1),bA(e,1,0))}function Pw(e){for(;e===lg;)lg=vc[--_c],vc[_c]=null,ug=vc[--_c],vc[_c]=null;for(;e===fu;)fu=bs[--Ss],bs[Ss]=null,Yo=bs[--Ss],bs[Ss]=null,Qo=bs[--Ss],bs[Ss]=null}var es=null,Yi=null,Vn=!1,Hs=null;function SA(e,t){var n=Cs(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function W2(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,es=e,Yi=nl(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,es=e,Yi=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=fu!==null?{id:Qo,overflow:Yo}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Cs(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,es=e,Yi=null,!0):!1;default:return!1}}function Gx(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Zx(e){if(Vn){var t=Yi;if(t){var n=t;if(!W2(e,t)){if(Gx(e))throw Error(He(418));t=nl(n.nextSibling);var s=es;t&&W2(e,t)?SA(s,n):(e.flags=e.flags&-4097|2,Vn=!1,es=e)}}else{if(Gx(e))throw Error(He(418));e.flags=e.flags&-4097|2,Vn=!1,es=e}}}function H2(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;es=e}function lm(e){if(e!==es)return!1;if(!Vn)return H2(e),Vn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!$x(e.type,e.memoizedProps)),t&&(t=Yi)){if(Gx(e))throw CA(),Error(He(418));for(;t;)SA(e,t),t=nl(t.nextSibling)}if(H2(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(He(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Yi=nl(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Yi=null}}else Yi=es?nl(e.stateNode.nextSibling):null;return!0}function CA(){for(var e=Yi;e;)e=nl(e.nextSibling)}function $c(){Yi=es=null,Vn=!1}function Aw(e){Hs===null?Hs=[e]:Hs.push(e)}var qF=ha.ReactCurrentBatchConfig;function Zs(e,t){if(e&&e.defaultProps){t=Hn({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var cg=_l(null),hg=null,xc=null,kw=null;function Iw(){kw=xc=hg=null}function Mw(e){var t=cg.current;Ln(cg),e._currentValue=t}function Wx(e,t,n){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===n)break;e=e.return}}function zc(e,t){hg=e,kw=xc=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Vi=!0),e.firstContext=null)}function As(e){var t=e._currentValue;if(kw!==e)if(e={context:e,memoizedValue:t,next:null},xc===null){if(hg===null)throw Error(He(308));xc=e,hg.dependencies={lanes:0,firstContext:e}}else xc=xc.next=e;return t}var tu=null;function Rw(e){tu===null?tu=[e]:tu.push(e)}function TA(e,t,n,s){var u=t.interleaved;return u===null?(n.next=n,Rw(t)):(n.next=u.next,u.next=n),t.interleaved=n,la(e,s)}function la(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var ja=!1;function Dw(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function EA(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ta(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function rl(e,t,n){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,rn&2){var u=s.pending;return u===null?t.next=t:(t.next=u.next,u.next=t),s.pending=t,la(e,n)}return u=s.interleaved,u===null?(t.next=t,Rw(s)):(t.next=u.next,u.next=t),s.interleaved=t,la(e,n)}function Am(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,vw(e,n)}}function K2(e,t){var n=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var u=null,h=null;if(n=n.firstBaseUpdate,n!==null){do{var f={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};h===null?u=h=f:h=h.next=f,n=n.next}while(n!==null);h===null?u=h=t:h=h.next=t}else u=h=t;n={baseState:s.baseState,firstBaseUpdate:u,lastBaseUpdate:h,shared:s.shared,effects:s.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function dg(e,t,n,s){var u=e.updateQueue;ja=!1;var h=u.firstBaseUpdate,f=u.lastBaseUpdate,a=u.shared.pending;if(a!==null){u.shared.pending=null;var w=a,b=w.next;w.next=null,f===null?h=b:f.next=b,f=w;var P=e.alternate;P!==null&&(P=P.updateQueue,a=P.lastBaseUpdate,a!==f&&(a===null?P.firstBaseUpdate=b:a.next=b,P.lastBaseUpdate=w))}if(h!==null){var A=u.baseState;f=0,P=b=w=null,a=h;do{var M=a.lane,B=a.eventTime;if((s&M)===M){P!==null&&(P=P.next={eventTime:B,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var V=e,j=a;switch(M=t,B=n,j.tag){case 1:if(V=j.payload,typeof V=="function"){A=V.call(B,A,M);break e}A=V;break e;case 3:V.flags=V.flags&-65537|128;case 0:if(V=j.payload,M=typeof V=="function"?V.call(B,A,M):V,M==null)break e;A=Hn({},A,M);break e;case 2:ja=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,M=u.effects,M===null?u.effects=[a]:M.push(a))}else B={eventTime:B,lane:M,tag:a.tag,payload:a.payload,callback:a.callback,next:null},P===null?(b=P=B,w=A):P=P.next=B,f|=M;if(a=a.next,a===null){if(a=u.shared.pending,a===null)break;M=a,a=M.next,M.next=null,u.lastBaseUpdate=M,u.shared.pending=null}}while(1);if(P===null&&(w=A),u.baseState=w,u.firstBaseUpdate=b,u.lastBaseUpdate=P,t=u.shared.interleaved,t!==null){u=t;do f|=u.lane,u=u.next;while(u!==t)}else h===null&&(u.shared.lanes=0);mu|=f,e.lanes=f,e.memoizedState=A}}function X2(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],u=s.callback;if(u!==null){if(s.callback=null,s=n,typeof u!="function")throw Error(He(191,u));u.call(s)}}}var PA=new TP.Component().refs;function Hx(e,t,n,s){t=e.memoizedState,n=n(s,t),n=n==null?t:Hn({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var ty={isMounted:function(e){return(e=e._reactInternals)?xu(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var s=Ci(),u=sl(e),h=ta(s,u);h.payload=t,n!=null&&(h.callback=n),t=rl(e,h,u),t!==null&&(Ys(t,e,u,s),Am(t,e,u))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var s=Ci(),u=sl(e),h=ta(s,u);h.tag=1,h.payload=t,n!=null&&(h.callback=n),t=rl(e,h,u),t!==null&&(Ys(t,e,u,s),Am(t,e,u))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ci(),s=sl(e),u=ta(n,s);u.tag=2,t!=null&&(u.callback=t),t=rl(e,u,s),t!==null&&(Ys(t,e,s,n),Am(t,e,s))}};function Q2(e,t,n,s,u,h,f){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,h,f):t.prototype&&t.prototype.isPureReactComponent?!lf(n,s)||!lf(u,h):!0}function AA(e,t,n){var s=!1,u=hl,h=t.contextType;return typeof h=="object"&&h!==null?h=As(h):(u=ji(t)?du:li.current,s=t.contextTypes,h=(s=s!=null)?Vc(e,u):hl),t=new t(n,h),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ty,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=u,e.__reactInternalMemoizedMaskedChildContext=h),t}function Y2(e,t,n,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,s),t.state!==e&&ty.enqueueReplaceState(t,t.state,null)}function Kx(e,t,n,s){var u=e.stateNode;u.props=n,u.state=e.memoizedState,u.refs=PA,Dw(e);var h=t.contextType;typeof h=="object"&&h!==null?u.context=As(h):(h=ji(t)?du:li.current,u.context=Vc(e,h)),u.state=e.memoizedState,h=t.getDerivedStateFromProps,typeof h=="function"&&(Hx(e,t,h,n),u.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof u.getSnapshotBeforeUpdate=="function"||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(t=u.state,typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount(),t!==u.state&&ty.enqueueReplaceState(u,u.state,null),dg(e,n,u,s),u.state=e.memoizedState),typeof u.componentDidMount=="function"&&(e.flags|=4194308)}function wd(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(He(309));var s=n.stateNode}if(!s)throw Error(He(147,e));var u=s,h=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===h?t.ref:(t=function(f){var a=u.refs;a===PA&&(a=u.refs={}),f===null?delete a[h]:a[h]=f},t._stringRef=h,t)}if(typeof e!="string")throw Error(He(284));if(!n._owner)throw Error(He(290,e))}return e}function um(e,t){throw e=Object.prototype.toString.call(t),Error(He(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function J2(e){var t=e._init;return t(e._payload)}function kA(e){function t(F,N){if(e){var W=F.deletions;W===null?(F.deletions=[N],F.flags|=16):W.push(N)}}function n(F,N){if(!e)return null;for(;N!==null;)t(F,N),N=N.sibling;return null}function s(F,N){for(F=new Map;N!==null;)N.key!==null?F.set(N.key,N):F.set(N.index,N),N=N.sibling;return F}function u(F,N){return F=ol(F,N),F.index=0,F.sibling=null,F}function h(F,N,W){return F.index=W,e?(W=F.alternate,W!==null?(W=W.index,W<N?(F.flags|=2,N):W):(F.flags|=2,N)):(F.flags|=1048576,N)}function f(F){return e&&F.alternate===null&&(F.flags|=2),F}function a(F,N,W,ne){return N===null||N.tag!==6?(N=R_(W,F.mode,ne),N.return=F,N):(N=u(N,W),N.return=F,N)}function w(F,N,W,ne){var pe=W.type;return pe===dc?P(F,N,W.props.children,ne,W.key):N!==null&&(N.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===$a&&J2(pe)===N.type)?(ne=u(N,W.props),ne.ref=wd(F,N,W),ne.return=F,ne):(ne=zm(W.type,W.key,W.props,null,F.mode,ne),ne.ref=wd(F,N,W),ne.return=F,ne)}function b(F,N,W,ne){return N===null||N.tag!==4||N.stateNode.containerInfo!==W.containerInfo||N.stateNode.implementation!==W.implementation?(N=D_(W,F.mode,ne),N.return=F,N):(N=u(N,W.children||[]),N.return=F,N)}function P(F,N,W,ne,pe){return N===null||N.tag!==7?(N=cu(W,F.mode,ne,pe),N.return=F,N):(N=u(N,W),N.return=F,N)}function A(F,N,W){if(typeof N=="string"&&N!==""||typeof N=="number")return N=R_(""+N,F.mode,W),N.return=F,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Yp:return W=zm(N.type,N.key,N.props,null,F.mode,W),W.ref=wd(F,null,N),W.return=F,W;case hc:return N=D_(N,F.mode,W),N.return=F,N;case $a:var ne=N._init;return A(F,ne(N._payload),W)}if(Md(N)||gd(N))return N=cu(N,F.mode,W,null),N.return=F,N;um(F,N)}return null}function M(F,N,W,ne){var pe=N!==null?N.key:null;if(typeof W=="string"&&W!==""||typeof W=="number")return pe!==null?null:a(F,N,""+W,ne);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case Yp:return W.key===pe?w(F,N,W,ne):null;case hc:return W.key===pe?b(F,N,W,ne):null;case $a:return pe=W._init,M(F,N,pe(W._payload),ne)}if(Md(W)||gd(W))return pe!==null?null:P(F,N,W,ne,null);um(F,W)}return null}function B(F,N,W,ne,pe){if(typeof ne=="string"&&ne!==""||typeof ne=="number")return F=F.get(W)||null,a(N,F,""+ne,pe);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case Yp:return F=F.get(ne.key===null?W:ne.key)||null,w(N,F,ne,pe);case hc:return F=F.get(ne.key===null?W:ne.key)||null,b(N,F,ne,pe);case $a:var Ce=ne._init;return B(F,N,W,Ce(ne._payload),pe)}if(Md(ne)||gd(ne))return F=F.get(W)||null,P(N,F,ne,pe,null);um(N,ne)}return null}function V(F,N,W,ne){for(var pe=null,Ce=null,Ie=N,Se=N=0,qe=null;Ie!==null&&Se<W.length;Se++){Ie.index>Se?(qe=Ie,Ie=null):qe=Ie.sibling;var ze=M(F,Ie,W[Se],ne);if(ze===null){Ie===null&&(Ie=qe);break}e&&Ie&&ze.alternate===null&&t(F,Ie),N=h(ze,N,Se),Ce===null?pe=ze:Ce.sibling=ze,Ce=ze,Ie=qe}if(Se===W.length)return n(F,Ie),Vn&&Zl(F,Se),pe;if(Ie===null){for(;Se<W.length;Se++)Ie=A(F,W[Se],ne),Ie!==null&&(N=h(Ie,N,Se),Ce===null?pe=Ie:Ce.sibling=Ie,Ce=Ie);return Vn&&Zl(F,Se),pe}for(Ie=s(F,Ie);Se<W.length;Se++)qe=B(Ie,F,Se,W[Se],ne),qe!==null&&(e&&qe.alternate!==null&&Ie.delete(qe.key===null?Se:qe.key),N=h(qe,N,Se),Ce===null?pe=qe:Ce.sibling=qe,Ce=qe);return e&&Ie.forEach(function(Et){return t(F,Et)}),Vn&&Zl(F,Se),pe}function j(F,N,W,ne){var pe=gd(W);if(typeof pe!="function")throw Error(He(150));if(W=pe.call(W),W==null)throw Error(He(151));for(var Ce=pe=null,Ie=N,Se=N=0,qe=null,ze=W.next();Ie!==null&&!ze.done;Se++,ze=W.next()){Ie.index>Se?(qe=Ie,Ie=null):qe=Ie.sibling;var Et=M(F,Ie,ze.value,ne);if(Et===null){Ie===null&&(Ie=qe);break}e&&Ie&&Et.alternate===null&&t(F,Ie),N=h(Et,N,Se),Ce===null?pe=Et:Ce.sibling=Et,Ce=Et,Ie=qe}if(ze.done)return n(F,Ie),Vn&&Zl(F,Se),pe;if(Ie===null){for(;!ze.done;Se++,ze=W.next())ze=A(F,ze.value,ne),ze!==null&&(N=h(ze,N,Se),Ce===null?pe=ze:Ce.sibling=ze,Ce=ze);return Vn&&Zl(F,Se),pe}for(Ie=s(F,Ie);!ze.done;Se++,ze=W.next())ze=B(Ie,F,Se,ze.value,ne),ze!==null&&(e&&ze.alternate!==null&&Ie.delete(ze.key===null?Se:ze.key),N=h(ze,N,Se),Ce===null?pe=ze:Ce.sibling=ze,Ce=ze);return e&&Ie.forEach(function(Ge){return t(F,Ge)}),Vn&&Zl(F,Se),pe}function K(F,N,W,ne){if(typeof W=="object"&&W!==null&&W.type===dc&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case Yp:e:{for(var pe=W.key,Ce=N;Ce!==null;){if(Ce.key===pe){if(pe=W.type,pe===dc){if(Ce.tag===7){n(F,Ce.sibling),N=u(Ce,W.props.children),N.return=F,F=N;break e}}else if(Ce.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===$a&&J2(pe)===Ce.type){n(F,Ce.sibling),N=u(Ce,W.props),N.ref=wd(F,Ce,W),N.return=F,F=N;break e}n(F,Ce);break}else t(F,Ce);Ce=Ce.sibling}W.type===dc?(N=cu(W.props.children,F.mode,ne,W.key),N.return=F,F=N):(ne=zm(W.type,W.key,W.props,null,F.mode,ne),ne.ref=wd(F,N,W),ne.return=F,F=ne)}return f(F);case hc:e:{for(Ce=W.key;N!==null;){if(N.key===Ce)if(N.tag===4&&N.stateNode.containerInfo===W.containerInfo&&N.stateNode.implementation===W.implementation){n(F,N.sibling),N=u(N,W.children||[]),N.return=F,F=N;break e}else{n(F,N);break}else t(F,N);N=N.sibling}N=D_(W,F.mode,ne),N.return=F,F=N}return f(F);case $a:return Ce=W._init,K(F,N,Ce(W._payload),ne)}if(Md(W))return V(F,N,W,ne);if(gd(W))return j(F,N,W,ne);um(F,W)}return typeof W=="string"&&W!==""||typeof W=="number"?(W=""+W,N!==null&&N.tag===6?(n(F,N.sibling),N=u(N,W),N.return=F,F=N):(n(F,N),N=R_(W,F.mode,ne),N.return=F,F=N),f(F)):n(F,N)}return K}var jc=kA(!0),IA=kA(!1),zf={},wo=_l(zf),df=_l(zf),ff=_l(zf);function nu(e){if(e===zf)throw Error(He(174));return e}function zw(e,t){switch(Pn(ff,t),Pn(df,e),Pn(wo,zf),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Px(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Px(t,e)}Ln(wo),Pn(wo,t)}function Uc(){Ln(wo),Ln(df),Ln(ff)}function MA(e){nu(ff.current);var t=nu(wo.current),n=Px(t,e.type);t!==n&&(Pn(df,e),Pn(wo,n))}function Lw(e){df.current===e&&(Ln(wo),Ln(df))}var qn=_l(0);function fg(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var E_=[];function Ow(){for(var e=0;e<E_.length;e++)E_[e]._workInProgressVersionPrimary=null;E_.length=0}var km=ha.ReactCurrentDispatcher,P_=ha.ReactCurrentBatchConfig,pu=0,Zn=null,xr=null,kr=null,pg=!1,qd=!1,pf=0,GF=0;function ni(){throw Error(He(321))}function Fw(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Js(e[n],t[n]))return!1;return!0}function Nw(e,t,n,s,u,h){if(pu=h,Zn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,km.current=e===null||e.memoizedState===null?KF:XF,e=n(s,u),qd){h=0;do{if(qd=!1,pf=0,25<=h)throw Error(He(301));h+=1,kr=xr=null,t.updateQueue=null,km.current=QF,e=n(s,u)}while(qd)}if(km.current=mg,t=xr!==null&&xr.next!==null,pu=0,kr=xr=Zn=null,pg=!1,t)throw Error(He(300));return e}function Bw(){var e=pf!==0;return pf=0,e}function go(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kr===null?Zn.memoizedState=kr=e:kr=kr.next=e,kr}function ks(){if(xr===null){var e=Zn.alternate;e=e!==null?e.memoizedState:null}else e=xr.next;var t=kr===null?Zn.memoizedState:kr.next;if(t!==null)kr=t,xr=e;else{if(e===null)throw Error(He(310));xr=e,e={memoizedState:xr.memoizedState,baseState:xr.baseState,baseQueue:xr.baseQueue,queue:xr.queue,next:null},kr===null?Zn.memoizedState=kr=e:kr=kr.next=e}return kr}function mf(e,t){return typeof t=="function"?t(e):t}function A_(e){var t=ks(),n=t.queue;if(n===null)throw Error(He(311));n.lastRenderedReducer=e;var s=xr,u=s.baseQueue,h=n.pending;if(h!==null){if(u!==null){var f=u.next;u.next=h.next,h.next=f}s.baseQueue=u=h,n.pending=null}if(u!==null){h=u.next,s=s.baseState;var a=f=null,w=null,b=h;do{var P=b.lane;if((pu&P)===P)w!==null&&(w=w.next={lane:0,action:b.action,hasEagerState:b.hasEagerState,eagerState:b.eagerState,next:null}),s=b.hasEagerState?b.eagerState:e(s,b.action);else{var A={lane:P,action:b.action,hasEagerState:b.hasEagerState,eagerState:b.eagerState,next:null};w===null?(a=w=A,f=s):w=w.next=A,Zn.lanes|=P,mu|=P}b=b.next}while(b!==null&&b!==h);w===null?f=s:w.next=a,Js(s,t.memoizedState)||(Vi=!0),t.memoizedState=s,t.baseState=f,t.baseQueue=w,n.lastRenderedState=s}if(e=n.interleaved,e!==null){u=e;do h=u.lane,Zn.lanes|=h,mu|=h,u=u.next;while(u!==e)}else u===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function k_(e){var t=ks(),n=t.queue;if(n===null)throw Error(He(311));n.lastRenderedReducer=e;var s=n.dispatch,u=n.pending,h=t.memoizedState;if(u!==null){n.pending=null;var f=u=u.next;do h=e(h,f.action),f=f.next;while(f!==u);Js(h,t.memoizedState)||(Vi=!0),t.memoizedState=h,t.baseQueue===null&&(t.baseState=h),n.lastRenderedState=h}return[h,s]}function RA(){}function DA(e,t){var n=Zn,s=ks(),u=t(),h=!Js(s.memoizedState,u);if(h&&(s.memoizedState=u,Vi=!0),s=s.queue,Vw(OA.bind(null,n,s,e),[e]),s.getSnapshot!==t||h||kr!==null&&kr.memoizedState.tag&1){if(n.flags|=2048,gf(9,LA.bind(null,n,s,u,t),void 0,null),Ir===null)throw Error(He(349));pu&30||zA(n,t,u)}return u}function zA(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Zn.updateQueue,t===null?(t={lastEffect:null,stores:null},Zn.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function LA(e,t,n,s){t.value=n,t.getSnapshot=s,FA(t)&&NA(e)}function OA(e,t,n){return n(function(){FA(t)&&NA(e)})}function FA(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Js(e,n)}catch{return!0}}function NA(e){var t=la(e,1);t!==null&&Ys(t,e,1,-1)}function eC(e){var t=go();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:mf,lastRenderedState:e},t.queue=e,e=e.dispatch=HF.bind(null,Zn,e),[t.memoizedState,e]}function gf(e,t,n,s){return e={tag:e,create:t,destroy:n,deps:s,next:null},t=Zn.updateQueue,t===null?(t={lastEffect:null,stores:null},Zn.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(s=n.next,n.next=e,e.next=s,t.lastEffect=e)),e}function BA(){return ks().memoizedState}function Im(e,t,n,s){var u=go();Zn.flags|=e,u.memoizedState=gf(1|t,n,void 0,s===void 0?null:s)}function ny(e,t,n,s){var u=ks();s=s===void 0?null:s;var h=void 0;if(xr!==null){var f=xr.memoizedState;if(h=f.destroy,s!==null&&Fw(s,f.deps)){u.memoizedState=gf(t,n,h,s);return}}Zn.flags|=e,u.memoizedState=gf(1|t,n,h,s)}function tC(e,t){return Im(8390656,8,e,t)}function Vw(e,t){return ny(2048,8,e,t)}function VA(e,t){return ny(4,2,e,t)}function $A(e,t){return ny(4,4,e,t)}function jA(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function UA(e,t,n){return n=n!=null?n.concat([e]):null,ny(4,4,jA.bind(null,t,e),n)}function $w(){}function qA(e,t){var n=ks();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&Fw(t,s[1])?s[0]:(n.memoizedState=[e,t],e)}function GA(e,t){var n=ks();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&Fw(t,s[1])?s[0]:(e=e(),n.memoizedState=[e,t],e)}function ZA(e,t,n){return pu&21?(Js(n,t)||(n=KP(),Zn.lanes|=n,mu|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Vi=!0),e.memoizedState=n)}function ZF(e,t){var n=hn;hn=n!==0&&4>n?n:4,e(!0);var s=P_.transition;P_.transition={};try{e(!1),t()}finally{hn=n,P_.transition=s}}function WA(){return ks().memoizedState}function WF(e,t,n){var s=sl(e);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},HA(e))KA(t,n);else if(n=TA(e,t,n,s),n!==null){var u=Ci();Ys(n,e,s,u),XA(n,t,s)}}function HF(e,t,n){var s=sl(e),u={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(HA(e))KA(t,u);else{var h=e.alternate;if(e.lanes===0&&(h===null||h.lanes===0)&&(h=t.lastRenderedReducer,h!==null))try{var f=t.lastRenderedState,a=h(f,n);if(u.hasEagerState=!0,u.eagerState=a,Js(a,f)){var w=t.interleaved;w===null?(u.next=u,Rw(t)):(u.next=w.next,w.next=u),t.interleaved=u;return}}catch{}finally{}n=TA(e,t,u,s),n!==null&&(u=Ci(),Ys(n,e,s,u),XA(n,t,s))}}function HA(e){var t=e.alternate;return e===Zn||t!==null&&t===Zn}function KA(e,t){qd=pg=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function XA(e,t,n){if(n&4194240){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,vw(e,n)}}var mg={readContext:As,useCallback:ni,useContext:ni,useEffect:ni,useImperativeHandle:ni,useInsertionEffect:ni,useLayoutEffect:ni,useMemo:ni,useReducer:ni,useRef:ni,useState:ni,useDebugValue:ni,useDeferredValue:ni,useTransition:ni,useMutableSource:ni,useSyncExternalStore:ni,useId:ni,unstable_isNewReconciler:!1},KF={readContext:As,useCallback:function(e,t){return go().memoizedState=[e,t===void 0?null:t],e},useContext:As,useEffect:tC,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Im(4194308,4,jA.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Im(4194308,4,e,t)},useInsertionEffect:function(e,t){return Im(4,2,e,t)},useMemo:function(e,t){var n=go();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var s=go();return t=n!==void 0?n(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=WF.bind(null,Zn,e),[s.memoizedState,e]},useRef:function(e){var t=go();return e={current:e},t.memoizedState=e},useState:eC,useDebugValue:$w,useDeferredValue:function(e){return go().memoizedState=e},useTransition:function(){var e=eC(!1),t=e[0];return e=ZF.bind(null,e[1]),go().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var s=Zn,u=go();if(Vn){if(n===void 0)throw Error(He(407));n=n()}else{if(n=t(),Ir===null)throw Error(He(349));pu&30||zA(s,t,n)}u.memoizedState=n;var h={value:n,getSnapshot:t};return u.queue=h,tC(OA.bind(null,s,h,e),[e]),s.flags|=2048,gf(9,LA.bind(null,s,h,n,t),void 0,null),n},useId:function(){var e=go(),t=Ir.identifierPrefix;if(Vn){var n=Yo,s=Qo;n=(s&~(1<<32-Qs(s)-1)).toString(32)+n,t=":"+t+"R"+n,n=pf++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=GF++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},XF={readContext:As,useCallback:qA,useContext:As,useEffect:Vw,useImperativeHandle:UA,useInsertionEffect:VA,useLayoutEffect:$A,useMemo:GA,useReducer:A_,useRef:BA,useState:function(){return A_(mf)},useDebugValue:$w,useDeferredValue:function(e){var t=ks();return ZA(t,xr.memoizedState,e)},useTransition:function(){var e=A_(mf)[0],t=ks().memoizedState;return[e,t]},useMutableSource:RA,useSyncExternalStore:DA,useId:WA,unstable_isNewReconciler:!1},QF={readContext:As,useCallback:qA,useContext:As,useEffect:Vw,useImperativeHandle:UA,useInsertionEffect:VA,useLayoutEffect:$A,useMemo:GA,useReducer:k_,useRef:BA,useState:function(){return k_(mf)},useDebugValue:$w,useDeferredValue:function(e){var t=ks();return xr===null?t.memoizedState=e:ZA(t,xr.memoizedState,e)},useTransition:function(){var e=k_(mf)[0],t=ks().memoizedState;return[e,t]},useMutableSource:RA,useSyncExternalStore:DA,useId:WA,unstable_isNewReconciler:!1};function qc(e,t){try{var n="",s=t;do n+=TO(s),s=s.return;while(s);var u=n}catch(h){u=`
Error generating stack: `+h.message+`
`+h.stack}return{value:e,source:t,stack:u,digest:null}}function I_(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Xx(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var YF=typeof WeakMap=="function"?WeakMap:Map;function QA(e,t,n){n=ta(-1,n),n.tag=3,n.payload={element:null};var s=t.value;return n.callback=function(){yg||(yg=!0,o0=s),Xx(e,t)},n}function YA(e,t,n){n=ta(-1,n),n.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var u=t.value;n.payload=function(){return s(u)},n.callback=function(){Xx(e,t)}}var h=e.stateNode;return h!==null&&typeof h.componentDidCatch=="function"&&(n.callback=function(){Xx(e,t),typeof s!="function"&&(il===null?il=new Set([this]):il.add(this));var f=t.stack;this.componentDidCatch(t.value,{componentStack:f!==null?f:""})}),n}function nC(e,t,n){var s=e.pingCache;if(s===null){s=e.pingCache=new YF;var u=new Set;s.set(t,u)}else u=s.get(t),u===void 0&&(u=new Set,s.set(t,u));u.has(n)||(u.add(n),e=d3.bind(null,e,t,n),t.then(e,e))}function rC(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function iC(e,t,n,s,u){return e.mode&1?(e.flags|=65536,e.lanes=u,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=ta(-1,1),t.tag=2,rl(n,t,1))),n.lanes|=1),e)}var JF=ha.ReactCurrentOwner,Vi=!1;function wi(e,t,n,s){t.child=e===null?IA(t,null,n,s):jc(t,e.child,n,s)}function sC(e,t,n,s,u){n=n.render;var h=t.ref;return zc(t,u),s=Nw(e,t,n,s,h,u),n=Bw(),e!==null&&!Vi?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~u,ua(e,t,u)):(Vn&&n&&Ew(t),t.flags|=1,wi(e,t,s,u),t.child)}function oC(e,t,n,s,u){if(e===null){var h=n.type;return typeof h=="function"&&!Kw(h)&&h.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=h,JA(e,t,h,s,u)):(e=zm(n.type,null,s,t,t.mode,u),e.ref=t.ref,e.return=t,t.child=e)}if(h=e.child,!(e.lanes&u)){var f=h.memoizedProps;if(n=n.compare,n=n!==null?n:lf,n(f,s)&&e.ref===t.ref)return ua(e,t,u)}return t.flags|=1,e=ol(h,s),e.ref=t.ref,e.return=t,t.child=e}function JA(e,t,n,s,u){if(e!==null){var h=e.memoizedProps;if(lf(h,s)&&e.ref===t.ref)if(Vi=!1,t.pendingProps=s=h,(e.lanes&u)!==0)e.flags&131072&&(Vi=!0);else return t.lanes=e.lanes,ua(e,t,u)}return Qx(e,t,n,s,u)}function ek(e,t,n){var s=t.pendingProps,u=s.children,h=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pn(bc,Qi),Qi|=n;else{if(!(n&1073741824))return e=h!==null?h.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Pn(bc,Qi),Qi|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=h!==null?h.baseLanes:n,Pn(bc,Qi),Qi|=s}else h!==null?(s=h.baseLanes|n,t.memoizedState=null):s=n,Pn(bc,Qi),Qi|=s;return wi(e,t,u,n),t.child}function tk(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Qx(e,t,n,s,u){var h=ji(n)?du:li.current;return h=Vc(t,h),zc(t,u),n=Nw(e,t,n,s,h,u),s=Bw(),e!==null&&!Vi?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~u,ua(e,t,u)):(Vn&&s&&Ew(t),t.flags|=1,wi(e,t,n,u),t.child)}function aC(e,t,n,s,u){if(ji(n)){var h=!0;ag(t)}else h=!1;if(zc(t,u),t.stateNode===null)Mm(e,t),AA(t,n,s),Kx(t,n,s,u),s=!0;else if(e===null){var f=t.stateNode,a=t.memoizedProps;f.props=a;var w=f.context,b=n.contextType;typeof b=="object"&&b!==null?b=As(b):(b=ji(n)?du:li.current,b=Vc(t,b));var P=n.getDerivedStateFromProps,A=typeof P=="function"||typeof f.getSnapshotBeforeUpdate=="function";A||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(a!==s||w!==b)&&Y2(t,f,s,b),ja=!1;var M=t.memoizedState;f.state=M,dg(t,s,f,u),w=t.memoizedState,a!==s||M!==w||$i.current||ja?(typeof P=="function"&&(Hx(t,n,P,s),w=t.memoizedState),(a=ja||Q2(t,n,a,s,M,w,b))?(A||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(t.flags|=4194308)):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=w),f.props=s,f.state=w,f.context=b,s=a):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{f=t.stateNode,EA(e,t),a=t.memoizedProps,b=t.type===t.elementType?a:Zs(t.type,a),f.props=b,A=t.pendingProps,M=f.context,w=n.contextType,typeof w=="object"&&w!==null?w=As(w):(w=ji(n)?du:li.current,w=Vc(t,w));var B=n.getDerivedStateFromProps;(P=typeof B=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(a!==A||M!==w)&&Y2(t,f,s,w),ja=!1,M=t.memoizedState,f.state=M,dg(t,s,f,u);var V=t.memoizedState;a!==A||M!==V||$i.current||ja?(typeof B=="function"&&(Hx(t,n,B,s),V=t.memoizedState),(b=ja||Q2(t,n,b,s,M,V,w)||!1)?(P||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(s,V,w),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(s,V,w)),typeof f.componentDidUpdate=="function"&&(t.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof f.componentDidUpdate!="function"||a===e.memoizedProps&&M===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&M===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=V),f.props=s,f.state=V,f.context=w,s=b):(typeof f.componentDidUpdate!="function"||a===e.memoizedProps&&M===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&M===e.memoizedState||(t.flags|=1024),s=!1)}return Yx(e,t,n,s,h,u)}function Yx(e,t,n,s,u,h){tk(e,t);var f=(t.flags&128)!==0;if(!s&&!f)return u&&Z2(t,n,!1),ua(e,t,h);s=t.stateNode,JF.current=t;var a=f&&typeof n.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&f?(t.child=jc(t,e.child,null,h),t.child=jc(t,null,a,h)):wi(e,t,a,h),t.memoizedState=s.state,u&&Z2(t,n,!0),t.child}function nk(e){var t=e.stateNode;t.pendingContext?G2(e,t.pendingContext,t.pendingContext!==t.context):t.context&&G2(e,t.context,!1),zw(e,t.containerInfo)}function lC(e,t,n,s,u){return $c(),Aw(u),t.flags|=256,wi(e,t,n,s),t.child}var Jx={dehydrated:null,treeContext:null,retryLane:0};function e0(e){return{baseLanes:e,cachePool:null,transitions:null}}function rk(e,t,n){var s=t.pendingProps,u=qn.current,h=!1,f=(t.flags&128)!==0,a;if((a=f)||(a=e!==null&&e.memoizedState===null?!1:(u&2)!==0),a?(h=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(u|=1),Pn(qn,u&1),e===null)return Zx(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(f=s.children,e=s.fallback,h?(s=t.mode,h=t.child,f={mode:"hidden",children:f},!(s&1)&&h!==null?(h.childLanes=0,h.pendingProps=f):h=sy(f,s,0,null),e=cu(e,s,n,null),h.return=t,e.return=t,h.sibling=e,t.child=h,t.child.memoizedState=e0(n),t.memoizedState=Jx,e):jw(t,f));if(u=e.memoizedState,u!==null&&(a=u.dehydrated,a!==null))return e3(e,t,f,s,a,u,n);if(h){h=s.fallback,f=t.mode,u=e.child,a=u.sibling;var w={mode:"hidden",children:s.children};return!(f&1)&&t.child!==u?(s=t.child,s.childLanes=0,s.pendingProps=w,t.deletions=null):(s=ol(u,w),s.subtreeFlags=u.subtreeFlags&14680064),a!==null?h=ol(a,h):(h=cu(h,f,n,null),h.flags|=2),h.return=t,s.return=t,s.sibling=h,t.child=s,s=h,h=t.child,f=e.child.memoizedState,f=f===null?e0(n):{baseLanes:f.baseLanes|n,cachePool:null,transitions:f.transitions},h.memoizedState=f,h.childLanes=e.childLanes&~n,t.memoizedState=Jx,s}return h=e.child,e=h.sibling,s=ol(h,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=n),s.return=t,s.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function jw(e,t){return t=sy({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function cm(e,t,n,s){return s!==null&&Aw(s),jc(t,e.child,null,n),e=jw(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function e3(e,t,n,s,u,h,f){if(n)return t.flags&256?(t.flags&=-257,s=I_(Error(He(422))),cm(e,t,f,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(h=s.fallback,u=t.mode,s=sy({mode:"visible",children:s.children},u,0,null),h=cu(h,u,f,null),h.flags|=2,s.return=t,h.return=t,s.sibling=h,t.child=s,t.mode&1&&jc(t,e.child,null,f),t.child.memoizedState=e0(f),t.memoizedState=Jx,h);if(!(t.mode&1))return cm(e,t,f,null);if(u.data==="$!"){if(s=u.nextSibling&&u.nextSibling.dataset,s)var a=s.dgst;return s=a,h=Error(He(419)),s=I_(h,s,void 0),cm(e,t,f,s)}if(a=(f&e.childLanes)!==0,Vi||a){if(s=Ir,s!==null){switch(f&-f){case 4:u=2;break;case 16:u=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:u=32;break;case 536870912:u=268435456;break;default:u=0}u=u&(s.suspendedLanes|f)?0:u,u!==0&&u!==h.retryLane&&(h.retryLane=u,la(e,u),Ys(s,e,u,-1))}return Hw(),s=I_(Error(He(421))),cm(e,t,f,s)}return u.data==="$?"?(t.flags|=128,t.child=e.child,t=f3.bind(null,e),u._reactRetry=t,null):(e=h.treeContext,Yi=nl(u.nextSibling),es=t,Vn=!0,Hs=null,e!==null&&(bs[Ss++]=Qo,bs[Ss++]=Yo,bs[Ss++]=fu,Qo=e.id,Yo=e.overflow,fu=t),t=jw(t,s.children),t.flags|=4096,t)}function uC(e,t,n){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),Wx(e.return,t,n)}function M_(e,t,n,s,u){var h=e.memoizedState;h===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:u}:(h.isBackwards=t,h.rendering=null,h.renderingStartTime=0,h.last=s,h.tail=n,h.tailMode=u)}function ik(e,t,n){var s=t.pendingProps,u=s.revealOrder,h=s.tail;if(wi(e,t,s.children,n),s=qn.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&uC(e,n,t);else if(e.tag===19)uC(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(Pn(qn,s),!(t.mode&1))t.memoizedState=null;else switch(u){case"forwards":for(n=t.child,u=null;n!==null;)e=n.alternate,e!==null&&fg(e)===null&&(u=n),n=n.sibling;n=u,n===null?(u=t.child,t.child=null):(u=n.sibling,n.sibling=null),M_(t,!1,u,n,h);break;case"backwards":for(n=null,u=t.child,t.child=null;u!==null;){if(e=u.alternate,e!==null&&fg(e)===null){t.child=u;break}e=u.sibling,u.sibling=n,n=u,u=e}M_(t,!0,n,null,h);break;case"together":M_(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Mm(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ua(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),mu|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(He(153));if(t.child!==null){for(e=t.child,n=ol(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=ol(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function t3(e,t,n){switch(t.tag){case 3:nk(t),$c();break;case 5:MA(t);break;case 1:ji(t.type)&&ag(t);break;case 4:zw(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,u=t.memoizedProps.value;Pn(cg,s._currentValue),s._currentValue=u;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(Pn(qn,qn.current&1),t.flags|=128,null):n&t.child.childLanes?rk(e,t,n):(Pn(qn,qn.current&1),e=ua(e,t,n),e!==null?e.sibling:null);Pn(qn,qn.current&1);break;case 19:if(s=(n&t.childLanes)!==0,e.flags&128){if(s)return ik(e,t,n);t.flags|=128}if(u=t.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),Pn(qn,qn.current),s)break;return null;case 22:case 23:return t.lanes=0,ek(e,t,n)}return ua(e,t,n)}var sk,t0,ok,ak;sk=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};t0=function(){};ok=function(e,t,n,s){var u=e.memoizedProps;if(u!==s){e=t.stateNode,nu(wo.current);var h=null;switch(n){case"input":u=Sx(e,u),s=Sx(e,s),h=[];break;case"select":u=Hn({},u,{value:void 0}),s=Hn({},s,{value:void 0}),h=[];break;case"textarea":u=Ex(e,u),s=Ex(e,s),h=[];break;default:typeof u.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=sg)}Ax(n,s);var f;n=null;for(b in u)if(!s.hasOwnProperty(b)&&u.hasOwnProperty(b)&&u[b]!=null)if(b==="style"){var a=u[b];for(f in a)a.hasOwnProperty(f)&&(n||(n={}),n[f]="")}else b!=="dangerouslySetInnerHTML"&&b!=="children"&&b!=="suppressContentEditableWarning"&&b!=="suppressHydrationWarning"&&b!=="autoFocus"&&(ef.hasOwnProperty(b)?h||(h=[]):(h=h||[]).push(b,null));for(b in s){var w=s[b];if(a=u!=null?u[b]:void 0,s.hasOwnProperty(b)&&w!==a&&(w!=null||a!=null))if(b==="style")if(a){for(f in a)!a.hasOwnProperty(f)||w&&w.hasOwnProperty(f)||(n||(n={}),n[f]="");for(f in w)w.hasOwnProperty(f)&&a[f]!==w[f]&&(n||(n={}),n[f]=w[f])}else n||(h||(h=[]),h.push(b,n)),n=w;else b==="dangerouslySetInnerHTML"?(w=w?w.__html:void 0,a=a?a.__html:void 0,w!=null&&a!==w&&(h=h||[]).push(b,w)):b==="children"?typeof w!="string"&&typeof w!="number"||(h=h||[]).push(b,""+w):b!=="suppressContentEditableWarning"&&b!=="suppressHydrationWarning"&&(ef.hasOwnProperty(b)?(w!=null&&b==="onScroll"&&Dn("scroll",e),h||a===w||(h=[])):(h=h||[]).push(b,w))}n&&(h=h||[]).push("style",n);var b=h;(t.updateQueue=b)&&(t.flags|=4)}};ak=function(e,t,n,s){n!==s&&(t.flags|=4)};function bd(e,t){if(!Vn)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function ri(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,s=0;if(t)for(var u=e.child;u!==null;)n|=u.lanes|u.childLanes,s|=u.subtreeFlags&14680064,s|=u.flags&14680064,u.return=e,u=u.sibling;else for(u=e.child;u!==null;)n|=u.lanes|u.childLanes,s|=u.subtreeFlags,s|=u.flags,u.return=e,u=u.sibling;return e.subtreeFlags|=s,e.childLanes=n,t}function n3(e,t,n){var s=t.pendingProps;switch(Pw(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ri(t),null;case 1:return ji(t.type)&&og(),ri(t),null;case 3:return s=t.stateNode,Uc(),Ln($i),Ln(li),Ow(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(lm(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Hs!==null&&(u0(Hs),Hs=null))),t0(e,t),ri(t),null;case 5:Lw(t);var u=nu(ff.current);if(n=t.type,e!==null&&t.stateNode!=null)ok(e,t,n,s,u),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(He(166));return ri(t),null}if(e=nu(wo.current),lm(t)){s=t.stateNode,n=t.type;var h=t.memoizedProps;switch(s[yo]=t,s[hf]=h,e=(t.mode&1)!==0,n){case"dialog":Dn("cancel",s),Dn("close",s);break;case"iframe":case"object":case"embed":Dn("load",s);break;case"video":case"audio":for(u=0;u<Dd.length;u++)Dn(Dd[u],s);break;case"source":Dn("error",s);break;case"img":case"image":case"link":Dn("error",s),Dn("load",s);break;case"details":Dn("toggle",s);break;case"input":v2(s,h),Dn("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!h.multiple},Dn("invalid",s);break;case"textarea":x2(s,h),Dn("invalid",s)}Ax(n,h),u=null;for(var f in h)if(h.hasOwnProperty(f)){var a=h[f];f==="children"?typeof a=="string"?s.textContent!==a&&(h.suppressHydrationWarning!==!0&&am(s.textContent,a,e),u=["children",a]):typeof a=="number"&&s.textContent!==""+a&&(h.suppressHydrationWarning!==!0&&am(s.textContent,a,e),u=["children",""+a]):ef.hasOwnProperty(f)&&a!=null&&f==="onScroll"&&Dn("scroll",s)}switch(n){case"input":Jp(s),_2(s,h,!0);break;case"textarea":Jp(s),w2(s);break;case"select":case"option":break;default:typeof h.onClick=="function"&&(s.onclick=sg)}s=u,t.updateQueue=s,s!==null&&(t.flags|=4)}else{f=u.nodeType===9?u:u.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=zP(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=f.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=f.createElement(n,{is:s.is}):(e=f.createElement(n),n==="select"&&(f=e,s.multiple?f.multiple=!0:s.size&&(f.size=s.size))):e=f.createElementNS(e,n),e[yo]=t,e[hf]=s,sk(e,t,!1,!1),t.stateNode=e;e:{switch(f=kx(n,s),n){case"dialog":Dn("cancel",e),Dn("close",e),u=s;break;case"iframe":case"object":case"embed":Dn("load",e),u=s;break;case"video":case"audio":for(u=0;u<Dd.length;u++)Dn(Dd[u],e);u=s;break;case"source":Dn("error",e),u=s;break;case"img":case"image":case"link":Dn("error",e),Dn("load",e),u=s;break;case"details":Dn("toggle",e),u=s;break;case"input":v2(e,s),u=Sx(e,s),Dn("invalid",e);break;case"option":u=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},u=Hn({},s,{value:void 0}),Dn("invalid",e);break;case"textarea":x2(e,s),u=Ex(e,s),Dn("invalid",e);break;default:u=s}Ax(n,u),a=u;for(h in a)if(a.hasOwnProperty(h)){var w=a[h];h==="style"?FP(e,w):h==="dangerouslySetInnerHTML"?(w=w?w.__html:void 0,w!=null&&LP(e,w)):h==="children"?typeof w=="string"?(n!=="textarea"||w!=="")&&tf(e,w):typeof w=="number"&&tf(e,""+w):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(ef.hasOwnProperty(h)?w!=null&&h==="onScroll"&&Dn("scroll",e):w!=null&&dw(e,h,w,f))}switch(n){case"input":Jp(e),_2(e,s,!1);break;case"textarea":Jp(e),w2(e);break;case"option":s.value!=null&&e.setAttribute("value",""+cl(s.value));break;case"select":e.multiple=!!s.multiple,h=s.value,h!=null?Ic(e,!!s.multiple,h,!1):s.defaultValue!=null&&Ic(e,!!s.multiple,s.defaultValue,!0);break;default:typeof u.onClick=="function"&&(e.onclick=sg)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ri(t),null;case 6:if(e&&t.stateNode!=null)ak(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(He(166));if(n=nu(ff.current),nu(wo.current),lm(t)){if(s=t.stateNode,n=t.memoizedProps,s[yo]=t,(h=s.nodeValue!==n)&&(e=es,e!==null))switch(e.tag){case 3:am(s.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&am(s.nodeValue,n,(e.mode&1)!==0)}h&&(t.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[yo]=t,t.stateNode=s}return ri(t),null;case 13:if(Ln(qn),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Vn&&Yi!==null&&t.mode&1&&!(t.flags&128))CA(),$c(),t.flags|=98560,h=!1;else if(h=lm(t),s!==null&&s.dehydrated!==null){if(e===null){if(!h)throw Error(He(318));if(h=t.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(He(317));h[yo]=t}else $c(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ri(t),h=!1}else Hs!==null&&(u0(Hs),Hs=null),h=!0;if(!h)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||qn.current&1?wr===0&&(wr=3):Hw())),t.updateQueue!==null&&(t.flags|=4),ri(t),null);case 4:return Uc(),t0(e,t),e===null&&uf(t.stateNode.containerInfo),ri(t),null;case 10:return Mw(t.type._context),ri(t),null;case 17:return ji(t.type)&&og(),ri(t),null;case 19:if(Ln(qn),h=t.memoizedState,h===null)return ri(t),null;if(s=(t.flags&128)!==0,f=h.rendering,f===null)if(s)bd(h,!1);else{if(wr!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(f=fg(e),f!==null){for(t.flags|=128,bd(h,!1),s=f.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=n,n=t.child;n!==null;)h=n,e=s,h.flags&=14680066,f=h.alternate,f===null?(h.childLanes=0,h.lanes=e,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=f.childLanes,h.lanes=f.lanes,h.child=f.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=f.memoizedProps,h.memoizedState=f.memoizedState,h.updateQueue=f.updateQueue,h.type=f.type,e=f.dependencies,h.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Pn(qn,qn.current&1|2),t.child}e=e.sibling}h.tail!==null&&ur()>Gc&&(t.flags|=128,s=!0,bd(h,!1),t.lanes=4194304)}else{if(!s)if(e=fg(f),e!==null){if(t.flags|=128,s=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),bd(h,!0),h.tail===null&&h.tailMode==="hidden"&&!f.alternate&&!Vn)return ri(t),null}else 2*ur()-h.renderingStartTime>Gc&&n!==1073741824&&(t.flags|=128,s=!0,bd(h,!1),t.lanes=4194304);h.isBackwards?(f.sibling=t.child,t.child=f):(n=h.last,n!==null?n.sibling=f:t.child=f,h.last=f)}return h.tail!==null?(t=h.tail,h.rendering=t,h.tail=t.sibling,h.renderingStartTime=ur(),t.sibling=null,n=qn.current,Pn(qn,s?n&1|2:n&1),t):(ri(t),null);case 22:case 23:return Ww(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?Qi&1073741824&&(ri(t),t.subtreeFlags&6&&(t.flags|=8192)):ri(t),null;case 24:return null;case 25:return null}throw Error(He(156,t.tag))}function r3(e,t){switch(Pw(t),t.tag){case 1:return ji(t.type)&&og(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Uc(),Ln($i),Ln(li),Ow(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Lw(t),null;case 13:if(Ln(qn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(He(340));$c()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ln(qn),null;case 4:return Uc(),null;case 10:return Mw(t.type._context),null;case 22:case 23:return Ww(),null;case 24:return null;default:return null}}var hm=!1,oi=!1,i3=typeof WeakSet=="function"?WeakSet:Set,mt=null;function wc(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){Yn(e,t,s)}else n.current=null}function n0(e,t,n){try{n()}catch(s){Yn(e,t,s)}}var cC=!1;function s3(e,t){if(Bx=ng,e=hA(),Tw(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var u=s.anchorOffset,h=s.focusNode;s=s.focusOffset;try{n.nodeType,h.nodeType}catch{n=null;break e}var f=0,a=-1,w=-1,b=0,P=0,A=e,M=null;t:for(;;){for(var B;A!==n||u!==0&&A.nodeType!==3||(a=f+u),A!==h||s!==0&&A.nodeType!==3||(w=f+s),A.nodeType===3&&(f+=A.nodeValue.length),(B=A.firstChild)!==null;)M=A,A=B;for(;;){if(A===e)break t;if(M===n&&++b===u&&(a=f),M===h&&++P===s&&(w=f),(B=A.nextSibling)!==null)break;A=M,M=A.parentNode}A=B}n=a===-1||w===-1?null:{start:a,end:w}}else n=null}n=n||{start:0,end:0}}else n=null;for(Vx={focusedElem:e,selectionRange:n},ng=!1,mt=t;mt!==null;)if(t=mt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,mt=e;else for(;mt!==null;){t=mt;try{var V=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(V!==null){var j=V.memoizedProps,K=V.memoizedState,F=t.stateNode,N=F.getSnapshotBeforeUpdate(t.elementType===t.type?j:Zs(t.type,j),K);F.__reactInternalSnapshotBeforeUpdate=N}break;case 3:var W=t.stateNode.containerInfo;W.nodeType===1?W.textContent="":W.nodeType===9&&W.documentElement&&W.removeChild(W.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(He(163))}}catch(ne){Yn(t,t.return,ne)}if(e=t.sibling,e!==null){e.return=t.return,mt=e;break}mt=t.return}return V=cC,cC=!1,V}function Gd(e,t,n){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var u=s=s.next;do{if((u.tag&e)===e){var h=u.destroy;u.destroy=void 0,h!==void 0&&n0(t,n,h)}u=u.next}while(u!==s)}}function ry(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var s=n.create;n.destroy=s()}n=n.next}while(n!==t)}}function r0(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function lk(e){var t=e.alternate;t!==null&&(e.alternate=null,lk(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[yo],delete t[hf],delete t[Ux],delete t[$F],delete t[jF])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function uk(e){return e.tag===5||e.tag===3||e.tag===4}function hC(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||uk(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function i0(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=sg));else if(s!==4&&(e=e.child,e!==null))for(i0(e,t,n),e=e.sibling;e!==null;)i0(e,t,n),e=e.sibling}function s0(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(s0(e,t,n),e=e.sibling;e!==null;)s0(e,t,n),e=e.sibling}var Vr=null,Ws=!1;function Oa(e,t,n){for(n=n.child;n!==null;)ck(e,t,n),n=n.sibling}function ck(e,t,n){if(xo&&typeof xo.onCommitFiberUnmount=="function")try{xo.onCommitFiberUnmount(Kg,n)}catch{}switch(n.tag){case 5:oi||wc(n,t);case 6:var s=Vr,u=Ws;Vr=null,Oa(e,t,n),Vr=s,Ws=u,Vr!==null&&(Ws?(e=Vr,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Vr.removeChild(n.stateNode));break;case 18:Vr!==null&&(Ws?(e=Vr,n=n.stateNode,e.nodeType===8?C_(e.parentNode,n):e.nodeType===1&&C_(e,n),of(e)):C_(Vr,n.stateNode));break;case 4:s=Vr,u=Ws,Vr=n.stateNode.containerInfo,Ws=!0,Oa(e,t,n),Vr=s,Ws=u;break;case 0:case 11:case 14:case 15:if(!oi&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){u=s=s.next;do{var h=u,f=h.destroy;h=h.tag,f!==void 0&&(h&2||h&4)&&n0(n,t,f),u=u.next}while(u!==s)}Oa(e,t,n);break;case 1:if(!oi&&(wc(n,t),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(a){Yn(n,t,a)}Oa(e,t,n);break;case 21:Oa(e,t,n);break;case 22:n.mode&1?(oi=(s=oi)||n.memoizedState!==null,Oa(e,t,n),oi=s):Oa(e,t,n);break;default:Oa(e,t,n)}}function dC(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new i3),t.forEach(function(s){var u=p3.bind(null,e,s);n.has(s)||(n.add(s),s.then(u,u))})}}function qs(e,t){var n=t.deletions;if(n!==null)for(var s=0;s<n.length;s++){var u=n[s];try{var h=e,f=t,a=f;e:for(;a!==null;){switch(a.tag){case 5:Vr=a.stateNode,Ws=!1;break e;case 3:Vr=a.stateNode.containerInfo,Ws=!0;break e;case 4:Vr=a.stateNode.containerInfo,Ws=!0;break e}a=a.return}if(Vr===null)throw Error(He(160));ck(h,f,u),Vr=null,Ws=!1;var w=u.alternate;w!==null&&(w.return=null),u.return=null}catch(b){Yn(u,t,b)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)hk(t,e),t=t.sibling}function hk(e,t){var n=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(qs(t,e),mo(e),s&4){try{Gd(3,e,e.return),ry(3,e)}catch(j){Yn(e,e.return,j)}try{Gd(5,e,e.return)}catch(j){Yn(e,e.return,j)}}break;case 1:qs(t,e),mo(e),s&512&&n!==null&&wc(n,n.return);break;case 5:if(qs(t,e),mo(e),s&512&&n!==null&&wc(n,n.return),e.flags&32){var u=e.stateNode;try{tf(u,"")}catch(j){Yn(e,e.return,j)}}if(s&4&&(u=e.stateNode,u!=null)){var h=e.memoizedProps,f=n!==null?n.memoizedProps:h,a=e.type,w=e.updateQueue;if(e.updateQueue=null,w!==null)try{a==="input"&&h.type==="radio"&&h.name!=null&&RP(u,h),kx(a,f);var b=kx(a,h);for(f=0;f<w.length;f+=2){var P=w[f],A=w[f+1];P==="style"?FP(u,A):P==="dangerouslySetInnerHTML"?LP(u,A):P==="children"?tf(u,A):dw(u,P,A,b)}switch(a){case"input":Cx(u,h);break;case"textarea":DP(u,h);break;case"select":var M=u._wrapperState.wasMultiple;u._wrapperState.wasMultiple=!!h.multiple;var B=h.value;B!=null?Ic(u,!!h.multiple,B,!1):M!==!!h.multiple&&(h.defaultValue!=null?Ic(u,!!h.multiple,h.defaultValue,!0):Ic(u,!!h.multiple,h.multiple?[]:"",!1))}u[hf]=h}catch(j){Yn(e,e.return,j)}}break;case 6:if(qs(t,e),mo(e),s&4){if(e.stateNode===null)throw Error(He(162));u=e.stateNode,h=e.memoizedProps;try{u.nodeValue=h}catch(j){Yn(e,e.return,j)}}break;case 3:if(qs(t,e),mo(e),s&4&&n!==null&&n.memoizedState.isDehydrated)try{of(t.containerInfo)}catch(j){Yn(e,e.return,j)}break;case 4:qs(t,e),mo(e);break;case 13:qs(t,e),mo(e),u=e.child,u.flags&8192&&(h=u.memoizedState!==null,u.stateNode.isHidden=h,!h||u.alternate!==null&&u.alternate.memoizedState!==null||(Gw=ur())),s&4&&dC(e);break;case 22:if(P=n!==null&&n.memoizedState!==null,e.mode&1?(oi=(b=oi)||P,qs(t,e),oi=b):qs(t,e),mo(e),s&8192){if(b=e.memoizedState!==null,(e.stateNode.isHidden=b)&&!P&&e.mode&1)for(mt=e,P=e.child;P!==null;){for(A=mt=P;mt!==null;){switch(M=mt,B=M.child,M.tag){case 0:case 11:case 14:case 15:Gd(4,M,M.return);break;case 1:wc(M,M.return);var V=M.stateNode;if(typeof V.componentWillUnmount=="function"){s=M,n=M.return;try{t=s,V.props=t.memoizedProps,V.state=t.memoizedState,V.componentWillUnmount()}catch(j){Yn(s,n,j)}}break;case 5:wc(M,M.return);break;case 22:if(M.memoizedState!==null){pC(A);continue}}B!==null?(B.return=M,mt=B):pC(A)}P=P.sibling}e:for(P=null,A=e;;){if(A.tag===5){if(P===null){P=A;try{u=A.stateNode,b?(h=u.style,typeof h.setProperty=="function"?h.setProperty("display","none","important"):h.display="none"):(a=A.stateNode,w=A.memoizedProps.style,f=w!=null&&w.hasOwnProperty("display")?w.display:null,a.style.display=OP("display",f))}catch(j){Yn(e,e.return,j)}}}else if(A.tag===6){if(P===null)try{A.stateNode.nodeValue=b?"":A.memoizedProps}catch(j){Yn(e,e.return,j)}}else if((A.tag!==22&&A.tag!==23||A.memoizedState===null||A===e)&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===e)break e;for(;A.sibling===null;){if(A.return===null||A.return===e)break e;P===A&&(P=null),A=A.return}P===A&&(P=null),A.sibling.return=A.return,A=A.sibling}}break;case 19:qs(t,e),mo(e),s&4&&dC(e);break;case 21:break;default:qs(t,e),mo(e)}}function mo(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(uk(n)){var s=n;break e}n=n.return}throw Error(He(160))}switch(s.tag){case 5:var u=s.stateNode;s.flags&32&&(tf(u,""),s.flags&=-33);var h=hC(e);s0(e,h,u);break;case 3:case 4:var f=s.stateNode.containerInfo,a=hC(e);i0(e,a,f);break;default:throw Error(He(161))}}catch(w){Yn(e,e.return,w)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function o3(e,t,n){mt=e,dk(e)}function dk(e,t,n){for(var s=(e.mode&1)!==0;mt!==null;){var u=mt,h=u.child;if(u.tag===22&&s){var f=u.memoizedState!==null||hm;if(!f){var a=u.alternate,w=a!==null&&a.memoizedState!==null||oi;a=hm;var b=oi;if(hm=f,(oi=w)&&!b)for(mt=u;mt!==null;)f=mt,w=f.child,f.tag===22&&f.memoizedState!==null?mC(u):w!==null?(w.return=f,mt=w):mC(u);for(;h!==null;)mt=h,dk(h),h=h.sibling;mt=u,hm=a,oi=b}fC(e)}else u.subtreeFlags&8772&&h!==null?(h.return=u,mt=h):fC(e)}}function fC(e){for(;mt!==null;){var t=mt;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:oi||ry(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!oi)if(n===null)s.componentDidMount();else{var u=t.elementType===t.type?n.memoizedProps:Zs(t.type,n.memoizedProps);s.componentDidUpdate(u,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var h=t.updateQueue;h!==null&&X2(t,h,s);break;case 3:var f=t.updateQueue;if(f!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}X2(t,f,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var w=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":w.autoFocus&&n.focus();break;case"img":w.src&&(n.src=w.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var b=t.alternate;if(b!==null){var P=b.memoizedState;if(P!==null){var A=P.dehydrated;A!==null&&of(A)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(He(163))}oi||t.flags&512&&r0(t)}catch(M){Yn(t,t.return,M)}}if(t===e){mt=null;break}if(n=t.sibling,n!==null){n.return=t.return,mt=n;break}mt=t.return}}function pC(e){for(;mt!==null;){var t=mt;if(t===e){mt=null;break}var n=t.sibling;if(n!==null){n.return=t.return,mt=n;break}mt=t.return}}function mC(e){for(;mt!==null;){var t=mt;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ry(4,t)}catch(w){Yn(t,n,w)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var u=t.return;try{s.componentDidMount()}catch(w){Yn(t,u,w)}}var h=t.return;try{r0(t)}catch(w){Yn(t,h,w)}break;case 5:var f=t.return;try{r0(t)}catch(w){Yn(t,f,w)}}}catch(w){Yn(t,t.return,w)}if(t===e){mt=null;break}var a=t.sibling;if(a!==null){a.return=t.return,mt=a;break}mt=t.return}}var a3=Math.ceil,gg=ha.ReactCurrentDispatcher,Uw=ha.ReactCurrentOwner,Es=ha.ReactCurrentBatchConfig,rn=0,Ir=null,dr=null,jr=0,Qi=0,bc=_l(0),wr=0,yf=null,mu=0,iy=0,qw=0,Zd=null,Bi=null,Gw=0,Gc=1/0,Wo=null,yg=!1,o0=null,il=null,dm=!1,Ha=null,vg=0,Wd=0,a0=null,Rm=-1,Dm=0;function Ci(){return rn&6?ur():Rm!==-1?Rm:Rm=ur()}function sl(e){return e.mode&1?rn&2&&jr!==0?jr&-jr:qF.transition!==null?(Dm===0&&(Dm=KP()),Dm):(e=hn,e!==0||(e=window.event,e=e===void 0?16:nA(e.type)),e):1}function Ys(e,t,n,s){if(50<Wd)throw Wd=0,a0=null,Error(He(185));Mf(e,n,s),(!(rn&2)||e!==Ir)&&(e===Ir&&(!(rn&2)&&(iy|=n),wr===4&&Ga(e,jr)),Ui(e,s),n===1&&rn===0&&!(t.mode&1)&&(Gc=ur()+500,ey&&xl()))}function Ui(e,t){var n=e.callbackNode;qO(e,t);var s=tg(e,e===Ir?jr:0);if(s===0)n!==null&&C2(n),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(n!=null&&C2(n),t===1)e.tag===0?UF(gC.bind(null,e)):wA(gC.bind(null,e)),BF(function(){!(rn&6)&&xl()}),n=null;else{switch(XP(s)){case 1:n=yw;break;case 4:n=WP;break;case 16:n=eg;break;case 536870912:n=HP;break;default:n=eg}n=xk(n,fk.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function fk(e,t){if(Rm=-1,Dm=0,rn&6)throw Error(He(327));var n=e.callbackNode;if(Lc()&&e.callbackNode!==n)return null;var s=tg(e,e===Ir?jr:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=_g(e,s);else{t=s;var u=rn;rn|=2;var h=mk();(Ir!==e||jr!==t)&&(Wo=null,Gc=ur()+500,uu(e,t));do try{c3();break}catch(a){pk(e,a)}while(1);Iw(),gg.current=h,rn=u,dr!==null?t=0:(Ir=null,jr=0,t=wr)}if(t!==0){if(t===2&&(u=zx(e),u!==0&&(s=u,t=l0(e,u))),t===1)throw n=yf,uu(e,0),Ga(e,s),Ui(e,ur()),n;if(t===6)Ga(e,s);else{if(u=e.current.alternate,!(s&30)&&!l3(u)&&(t=_g(e,s),t===2&&(h=zx(e),h!==0&&(s=h,t=l0(e,h))),t===1))throw n=yf,uu(e,0),Ga(e,s),Ui(e,ur()),n;switch(e.finishedWork=u,e.finishedLanes=s,t){case 0:case 1:throw Error(He(345));case 2:Wl(e,Bi,Wo);break;case 3:if(Ga(e,s),(s&130023424)===s&&(t=Gw+500-ur(),10<t)){if(tg(e,0)!==0)break;if(u=e.suspendedLanes,(u&s)!==s){Ci(),e.pingedLanes|=e.suspendedLanes&u;break}e.timeoutHandle=jx(Wl.bind(null,e,Bi,Wo),t);break}Wl(e,Bi,Wo);break;case 4:if(Ga(e,s),(s&4194240)===s)break;for(t=e.eventTimes,u=-1;0<s;){var f=31-Qs(s);h=1<<f,f=t[f],f>u&&(u=f),s&=~h}if(s=u,s=ur()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*a3(s/1960))-s,10<s){e.timeoutHandle=jx(Wl.bind(null,e,Bi,Wo),s);break}Wl(e,Bi,Wo);break;case 5:Wl(e,Bi,Wo);break;default:throw Error(He(329))}}}return Ui(e,ur()),e.callbackNode===n?fk.bind(null,e):null}function l0(e,t){var n=Zd;return e.current.memoizedState.isDehydrated&&(uu(e,t).flags|=256),e=_g(e,t),e!==2&&(t=Bi,Bi=n,t!==null&&u0(t)),e}function u0(e){Bi===null?Bi=e:Bi.push.apply(Bi,e)}function l3(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var u=n[s],h=u.getSnapshot;u=u.value;try{if(!Js(h(),u))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ga(e,t){for(t&=~qw,t&=~iy,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Qs(t),s=1<<n;e[n]=-1,t&=~s}}function gC(e){if(rn&6)throw Error(He(327));Lc();var t=tg(e,0);if(!(t&1))return Ui(e,ur()),null;var n=_g(e,t);if(e.tag!==0&&n===2){var s=zx(e);s!==0&&(t=s,n=l0(e,s))}if(n===1)throw n=yf,uu(e,0),Ga(e,t),Ui(e,ur()),n;if(n===6)throw Error(He(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Wl(e,Bi,Wo),Ui(e,ur()),null}function Zw(e,t){var n=rn;rn|=1;try{return e(t)}finally{rn=n,rn===0&&(Gc=ur()+500,ey&&xl())}}function gu(e){Ha!==null&&Ha.tag===0&&!(rn&6)&&Lc();var t=rn;rn|=1;var n=Es.transition,s=hn;try{if(Es.transition=null,hn=1,e)return e()}finally{hn=s,Es.transition=n,rn=t,!(rn&6)&&xl()}}function Ww(){Qi=bc.current,Ln(bc)}function uu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,NF(n)),dr!==null)for(n=dr.return;n!==null;){var s=n;switch(Pw(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&og();break;case 3:Uc(),Ln($i),Ln(li),Ow();break;case 5:Lw(s);break;case 4:Uc();break;case 13:Ln(qn);break;case 19:Ln(qn);break;case 10:Mw(s.type._context);break;case 22:case 23:Ww()}n=n.return}if(Ir=e,dr=e=ol(e.current,null),jr=Qi=t,wr=0,yf=null,qw=iy=mu=0,Bi=Zd=null,tu!==null){for(t=0;t<tu.length;t++)if(n=tu[t],s=n.interleaved,s!==null){n.interleaved=null;var u=s.next,h=n.pending;if(h!==null){var f=h.next;h.next=u,s.next=f}n.pending=s}tu=null}return e}function pk(e,t){do{var n=dr;try{if(Iw(),km.current=mg,pg){for(var s=Zn.memoizedState;s!==null;){var u=s.queue;u!==null&&(u.pending=null),s=s.next}pg=!1}if(pu=0,kr=xr=Zn=null,qd=!1,pf=0,Uw.current=null,n===null||n.return===null){wr=1,yf=t,dr=null;break}e:{var h=e,f=n.return,a=n,w=t;if(t=jr,a.flags|=32768,w!==null&&typeof w=="object"&&typeof w.then=="function"){var b=w,P=a,A=P.tag;if(!(P.mode&1)&&(A===0||A===11||A===15)){var M=P.alternate;M?(P.updateQueue=M.updateQueue,P.memoizedState=M.memoizedState,P.lanes=M.lanes):(P.updateQueue=null,P.memoizedState=null)}var B=rC(f);if(B!==null){B.flags&=-257,iC(B,f,a,h,t),B.mode&1&&nC(h,b,t),t=B,w=b;var V=t.updateQueue;if(V===null){var j=new Set;j.add(w),t.updateQueue=j}else V.add(w);break e}else{if(!(t&1)){nC(h,b,t),Hw();break e}w=Error(He(426))}}else if(Vn&&a.mode&1){var K=rC(f);if(K!==null){!(K.flags&65536)&&(K.flags|=256),iC(K,f,a,h,t),Aw(qc(w,a));break e}}h=w=qc(w,a),wr!==4&&(wr=2),Zd===null?Zd=[h]:Zd.push(h),h=f;do{switch(h.tag){case 3:h.flags|=65536,t&=-t,h.lanes|=t;var F=QA(h,w,t);K2(h,F);break e;case 1:a=w;var N=h.type,W=h.stateNode;if(!(h.flags&128)&&(typeof N.getDerivedStateFromError=="function"||W!==null&&typeof W.componentDidCatch=="function"&&(il===null||!il.has(W)))){h.flags|=65536,t&=-t,h.lanes|=t;var ne=YA(h,a,t);K2(h,ne);break e}}h=h.return}while(h!==null)}yk(n)}catch(pe){t=pe,dr===n&&n!==null&&(dr=n=n.return);continue}break}while(1)}function mk(){var e=gg.current;return gg.current=mg,e===null?mg:e}function Hw(){(wr===0||wr===3||wr===2)&&(wr=4),Ir===null||!(mu&268435455)&&!(iy&268435455)||Ga(Ir,jr)}function _g(e,t){var n=rn;rn|=2;var s=mk();(Ir!==e||jr!==t)&&(Wo=null,uu(e,t));do try{u3();break}catch(u){pk(e,u)}while(1);if(Iw(),rn=n,gg.current=s,dr!==null)throw Error(He(261));return Ir=null,jr=0,wr}function u3(){for(;dr!==null;)gk(dr)}function c3(){for(;dr!==null&&!LO();)gk(dr)}function gk(e){var t=_k(e.alternate,e,Qi);e.memoizedProps=e.pendingProps,t===null?yk(e):dr=t,Uw.current=null}function yk(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=r3(n,t),n!==null){n.flags&=32767,dr=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{wr=6,dr=null;return}}else if(n=n3(n,t,Qi),n!==null){dr=n;return}if(t=t.sibling,t!==null){dr=t;return}dr=t=e}while(t!==null);wr===0&&(wr=5)}function Wl(e,t,n){var s=hn,u=Es.transition;try{Es.transition=null,hn=1,h3(e,t,n,s)}finally{Es.transition=u,hn=s}return null}function h3(e,t,n,s){do Lc();while(Ha!==null);if(rn&6)throw Error(He(327));n=e.finishedWork;var u=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(He(177));e.callbackNode=null,e.callbackPriority=0;var h=n.lanes|n.childLanes;if(GO(e,h),e===Ir&&(dr=Ir=null,jr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||dm||(dm=!0,xk(eg,function(){return Lc(),null})),h=(n.flags&15990)!==0,n.subtreeFlags&15990||h){h=Es.transition,Es.transition=null;var f=hn;hn=1;var a=rn;rn|=4,Uw.current=null,s3(e,n),hk(n,e),MF(Vx),ng=!!Bx,Vx=Bx=null,e.current=n,o3(n),OO(),rn=a,hn=f,Es.transition=h}else e.current=n;if(dm&&(dm=!1,Ha=e,vg=u),h=e.pendingLanes,h===0&&(il=null),BO(n.stateNode),Ui(e,ur()),t!==null)for(s=e.onRecoverableError,n=0;n<t.length;n++)u=t[n],s(u.value,{componentStack:u.stack,digest:u.digest});if(yg)throw yg=!1,e=o0,o0=null,e;return vg&1&&e.tag!==0&&Lc(),h=e.pendingLanes,h&1?e===a0?Wd++:(Wd=0,a0=e):Wd=0,xl(),null}function Lc(){if(Ha!==null){var e=XP(vg),t=Es.transition,n=hn;try{if(Es.transition=null,hn=16>e?16:e,Ha===null)var s=!1;else{if(e=Ha,Ha=null,vg=0,rn&6)throw Error(He(331));var u=rn;for(rn|=4,mt=e.current;mt!==null;){var h=mt,f=h.child;if(mt.flags&16){var a=h.deletions;if(a!==null){for(var w=0;w<a.length;w++){var b=a[w];for(mt=b;mt!==null;){var P=mt;switch(P.tag){case 0:case 11:case 15:Gd(8,P,h)}var A=P.child;if(A!==null)A.return=P,mt=A;else for(;mt!==null;){P=mt;var M=P.sibling,B=P.return;if(lk(P),P===b){mt=null;break}if(M!==null){M.return=B,mt=M;break}mt=B}}}var V=h.alternate;if(V!==null){var j=V.child;if(j!==null){V.child=null;do{var K=j.sibling;j.sibling=null,j=K}while(j!==null)}}mt=h}}if(h.subtreeFlags&2064&&f!==null)f.return=h,mt=f;else e:for(;mt!==null;){if(h=mt,h.flags&2048)switch(h.tag){case 0:case 11:case 15:Gd(9,h,h.return)}var F=h.sibling;if(F!==null){F.return=h.return,mt=F;break e}mt=h.return}}var N=e.current;for(mt=N;mt!==null;){f=mt;var W=f.child;if(f.subtreeFlags&2064&&W!==null)W.return=f,mt=W;else e:for(f=N;mt!==null;){if(a=mt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:ry(9,a)}}catch(pe){Yn(a,a.return,pe)}if(a===f){mt=null;break e}var ne=a.sibling;if(ne!==null){ne.return=a.return,mt=ne;break e}mt=a.return}}if(rn=u,xl(),xo&&typeof xo.onPostCommitFiberRoot=="function")try{xo.onPostCommitFiberRoot(Kg,e)}catch{}s=!0}return s}finally{hn=n,Es.transition=t}}return!1}function yC(e,t,n){t=qc(n,t),t=QA(e,t,1),e=rl(e,t,1),t=Ci(),e!==null&&(Mf(e,1,t),Ui(e,t))}function Yn(e,t,n){if(e.tag===3)yC(e,e,n);else for(;t!==null;){if(t.tag===3){yC(t,e,n);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(il===null||!il.has(s))){e=qc(n,e),e=YA(t,e,1),t=rl(t,e,1),e=Ci(),t!==null&&(Mf(t,1,e),Ui(t,e));break}}t=t.return}}function d3(e,t,n){var s=e.pingCache;s!==null&&s.delete(t),t=Ci(),e.pingedLanes|=e.suspendedLanes&n,Ir===e&&(jr&n)===n&&(wr===4||wr===3&&(jr&130023424)===jr&&500>ur()-Gw?uu(e,0):qw|=n),Ui(e,t)}function vk(e,t){t===0&&(e.mode&1?(t=nm,nm<<=1,!(nm&130023424)&&(nm=4194304)):t=1);var n=Ci();e=la(e,t),e!==null&&(Mf(e,t,n),Ui(e,n))}function f3(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),vk(e,n)}function p3(e,t){var n=0;switch(e.tag){case 13:var s=e.stateNode,u=e.memoizedState;u!==null&&(n=u.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(He(314))}s!==null&&s.delete(t),vk(e,n)}var _k;_k=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||$i.current)Vi=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Vi=!1,t3(e,t,n);Vi=!!(e.flags&131072)}else Vi=!1,Vn&&t.flags&1048576&&bA(t,ug,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;Mm(e,t),e=t.pendingProps;var u=Vc(t,li.current);zc(t,n),u=Nw(null,t,s,e,u,n);var h=Bw();return t.flags|=1,typeof u=="object"&&u!==null&&typeof u.render=="function"&&u.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ji(s)?(h=!0,ag(t)):h=!1,t.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,Dw(t),u.updater=ty,t.stateNode=u,u._reactInternals=t,Kx(t,s,e,n),t=Yx(null,t,s,!0,h,n)):(t.tag=0,Vn&&h&&Ew(t),wi(null,t,u,n),t=t.child),t;case 16:s=t.elementType;e:{switch(Mm(e,t),e=t.pendingProps,u=s._init,s=u(s._payload),t.type=s,u=t.tag=g3(s),e=Zs(s,e),u){case 0:t=Qx(null,t,s,e,n);break e;case 1:t=aC(null,t,s,e,n);break e;case 11:t=sC(null,t,s,e,n);break e;case 14:t=oC(null,t,s,Zs(s.type,e),n);break e}throw Error(He(306,s,""))}return t;case 0:return s=t.type,u=t.pendingProps,u=t.elementType===s?u:Zs(s,u),Qx(e,t,s,u,n);case 1:return s=t.type,u=t.pendingProps,u=t.elementType===s?u:Zs(s,u),aC(e,t,s,u,n);case 3:e:{if(nk(t),e===null)throw Error(He(387));s=t.pendingProps,h=t.memoizedState,u=h.element,EA(e,t),dg(t,s,null,n);var f=t.memoizedState;if(s=f.element,h.isDehydrated)if(h={element:s,isDehydrated:!1,cache:f.cache,pendingSuspenseBoundaries:f.pendingSuspenseBoundaries,transitions:f.transitions},t.updateQueue.baseState=h,t.memoizedState=h,t.flags&256){u=qc(Error(He(423)),t),t=lC(e,t,s,n,u);break e}else if(s!==u){u=qc(Error(He(424)),t),t=lC(e,t,s,n,u);break e}else for(Yi=nl(t.stateNode.containerInfo.firstChild),es=t,Vn=!0,Hs=null,n=IA(t,null,s,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if($c(),s===u){t=ua(e,t,n);break e}wi(e,t,s,n)}t=t.child}return t;case 5:return MA(t),e===null&&Zx(t),s=t.type,u=t.pendingProps,h=e!==null?e.memoizedProps:null,f=u.children,$x(s,u)?f=null:h!==null&&$x(s,h)&&(t.flags|=32),tk(e,t),wi(e,t,f,n),t.child;case 6:return e===null&&Zx(t),null;case 13:return rk(e,t,n);case 4:return zw(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=jc(t,null,s,n):wi(e,t,s,n),t.child;case 11:return s=t.type,u=t.pendingProps,u=t.elementType===s?u:Zs(s,u),sC(e,t,s,u,n);case 7:return wi(e,t,t.pendingProps,n),t.child;case 8:return wi(e,t,t.pendingProps.children,n),t.child;case 12:return wi(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(s=t.type._context,u=t.pendingProps,h=t.memoizedProps,f=u.value,Pn(cg,s._currentValue),s._currentValue=f,h!==null)if(Js(h.value,f)){if(h.children===u.children&&!$i.current){t=ua(e,t,n);break e}}else for(h=t.child,h!==null&&(h.return=t);h!==null;){var a=h.dependencies;if(a!==null){f=h.child;for(var w=a.firstContext;w!==null;){if(w.context===s){if(h.tag===1){w=ta(-1,n&-n),w.tag=2;var b=h.updateQueue;if(b!==null){b=b.shared;var P=b.pending;P===null?w.next=w:(w.next=P.next,P.next=w),b.pending=w}}h.lanes|=n,w=h.alternate,w!==null&&(w.lanes|=n),Wx(h.return,n,t),a.lanes|=n;break}w=w.next}}else if(h.tag===10)f=h.type===t.type?null:h.child;else if(h.tag===18){if(f=h.return,f===null)throw Error(He(341));f.lanes|=n,a=f.alternate,a!==null&&(a.lanes|=n),Wx(f,n,t),f=h.sibling}else f=h.child;if(f!==null)f.return=h;else for(f=h;f!==null;){if(f===t){f=null;break}if(h=f.sibling,h!==null){h.return=f.return,f=h;break}f=f.return}h=f}wi(e,t,u.children,n),t=t.child}return t;case 9:return u=t.type,s=t.pendingProps.children,zc(t,n),u=As(u),s=s(u),t.flags|=1,wi(e,t,s,n),t.child;case 14:return s=t.type,u=Zs(s,t.pendingProps),u=Zs(s.type,u),oC(e,t,s,u,n);case 15:return JA(e,t,t.type,t.pendingProps,n);case 17:return s=t.type,u=t.pendingProps,u=t.elementType===s?u:Zs(s,u),Mm(e,t),t.tag=1,ji(s)?(e=!0,ag(t)):e=!1,zc(t,n),AA(t,s,u),Kx(t,s,u,n),Yx(null,t,s,!0,e,n);case 19:return ik(e,t,n);case 22:return ek(e,t,n)}throw Error(He(156,t.tag))};function xk(e,t){return ZP(e,t)}function m3(e,t,n,s){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cs(e,t,n,s){return new m3(e,t,n,s)}function Kw(e){return e=e.prototype,!(!e||!e.isReactComponent)}function g3(e){if(typeof e=="function")return Kw(e)?1:0;if(e!=null){if(e=e.$$typeof,e===pw)return 11;if(e===mw)return 14}return 2}function ol(e,t){var n=e.alternate;return n===null?(n=Cs(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function zm(e,t,n,s,u,h){var f=2;if(s=e,typeof e=="function")Kw(e)&&(f=1);else if(typeof e=="string")f=5;else e:switch(e){case dc:return cu(n.children,u,h,t);case fw:f=8,u|=8;break;case _x:return e=Cs(12,n,t,u|2),e.elementType=_x,e.lanes=h,e;case xx:return e=Cs(13,n,t,u),e.elementType=xx,e.lanes=h,e;case wx:return e=Cs(19,n,t,u),e.elementType=wx,e.lanes=h,e;case kP:return sy(n,u,h,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case PP:f=10;break e;case AP:f=9;break e;case pw:f=11;break e;case mw:f=14;break e;case $a:f=16,s=null;break e}throw Error(He(130,e==null?e:typeof e,""))}return t=Cs(f,n,t,u),t.elementType=e,t.type=s,t.lanes=h,t}function cu(e,t,n,s){return e=Cs(7,e,s,t),e.lanes=n,e}function sy(e,t,n,s){return e=Cs(22,e,s,t),e.elementType=kP,e.lanes=n,e.stateNode={isHidden:!1},e}function R_(e,t,n){return e=Cs(6,e,null,t),e.lanes=n,e}function D_(e,t,n){return t=Cs(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function y3(e,t,n,s,u){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=f_(0),this.expirationTimes=f_(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=f_(0),this.identifierPrefix=s,this.onRecoverableError=u,this.mutableSourceEagerHydrationData=null}function Xw(e,t,n,s,u,h,f,a,w){return e=new y3(e,t,n,a,w),t===1?(t=1,h===!0&&(t|=8)):t=0,h=Cs(3,null,null,t),e.current=h,h.stateNode=e,h.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Dw(h),e}function v3(e,t,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:hc,key:s==null?null:""+s,children:e,containerInfo:t,implementation:n}}function wk(e){if(!e)return hl;e=e._reactInternals;e:{if(xu(e)!==e||e.tag!==1)throw Error(He(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ji(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(He(171))}if(e.tag===1){var n=e.type;if(ji(n))return xA(e,n,t)}return t}function bk(e,t,n,s,u,h,f,a,w){return e=Xw(n,s,!0,e,u,h,f,a,w),e.context=wk(null),n=e.current,s=Ci(),u=sl(n),h=ta(s,u),h.callback=t??null,rl(n,h,u),e.current.lanes=u,Mf(e,u,s),Ui(e,s),e}function oy(e,t,n,s){var u=t.current,h=Ci(),f=sl(u);return n=wk(n),t.context===null?t.context=n:t.pendingContext=n,t=ta(h,f),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=rl(u,t,f),e!==null&&(Ys(e,u,f,h),Am(e,u,f)),f}function xg(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function vC(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Qw(e,t){vC(e,t),(e=e.alternate)&&vC(e,t)}function _3(){return null}var Sk=typeof reportError=="function"?reportError:function(e){console.error(e)};function Yw(e){this._internalRoot=e}ay.prototype.render=Yw.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(He(409));oy(e,t,null,null)};ay.prototype.unmount=Yw.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;gu(function(){oy(null,e,null,null)}),t[aa]=null}};function ay(e){this._internalRoot=e}ay.prototype.unstable_scheduleHydration=function(e){if(e){var t=JP();e={blockedOn:null,target:e,priority:t};for(var n=0;n<qa.length&&t!==0&&t<qa[n].priority;n++);qa.splice(n,0,e),n===0&&tA(e)}};function Jw(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ly(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function _C(){}function x3(e,t,n,s,u){if(u){if(typeof s=="function"){var h=s;s=function(){var b=xg(f);h.call(b)}}var f=bk(t,s,e,0,null,!1,!1,"",_C);return e._reactRootContainer=f,e[aa]=f.current,uf(e.nodeType===8?e.parentNode:e),gu(),f}for(;u=e.lastChild;)e.removeChild(u);if(typeof s=="function"){var a=s;s=function(){var b=xg(w);a.call(b)}}var w=Xw(e,0,!1,null,null,!1,!1,"",_C);return e._reactRootContainer=w,e[aa]=w.current,uf(e.nodeType===8?e.parentNode:e),gu(function(){oy(t,w,n,s)}),w}function uy(e,t,n,s,u){var h=n._reactRootContainer;if(h){var f=h;if(typeof u=="function"){var a=u;u=function(){var w=xg(f);a.call(w)}}oy(t,f,e,u)}else f=x3(n,t,e,u,s);return xg(f)}QP=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Rd(t.pendingLanes);n!==0&&(vw(t,n|1),Ui(t,ur()),!(rn&6)&&(Gc=ur()+500,xl()))}break;case 13:gu(function(){var s=la(e,1);if(s!==null){var u=Ci();Ys(s,e,1,u)}}),Qw(e,1)}};_w=function(e){if(e.tag===13){var t=la(e,134217728);if(t!==null){var n=Ci();Ys(t,e,134217728,n)}Qw(e,134217728)}};YP=function(e){if(e.tag===13){var t=sl(e),n=la(e,t);if(n!==null){var s=Ci();Ys(n,e,t,s)}Qw(e,t)}};JP=function(){return hn};eA=function(e,t){var n=hn;try{return hn=e,t()}finally{hn=n}};Mx=function(e,t,n){switch(t){case"input":if(Cx(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var s=n[t];if(s!==e&&s.form===e.form){var u=Jg(s);if(!u)throw Error(He(90));MP(s),Cx(s,u)}}}break;case"textarea":DP(e,n);break;case"select":t=n.value,t!=null&&Ic(e,!!n.multiple,t,!1)}};VP=Zw;$P=gu;var w3={usingClientEntryPoint:!1,Events:[Df,gc,Jg,NP,BP,Zw]},Sd={findFiberByHostInstance:eu,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},b3={bundleType:Sd.bundleType,version:Sd.version,rendererPackageName:Sd.rendererPackageName,rendererConfig:Sd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ha.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=qP(e),e===null?null:e.stateNode},findFiberByHostInstance:Sd.findFiberByHostInstance||_3,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fm.isDisabled&&fm.supportsFiber)try{Kg=fm.inject(b3),xo=fm}catch{}}is.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=w3;is.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Jw(t))throw Error(He(200));return v3(e,t,null,n)};is.createRoot=function(e,t){if(!Jw(e))throw Error(He(299));var n=!1,s="",u=Sk;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(u=t.onRecoverableError)),t=Xw(e,1,!1,null,null,n,!1,s,u),e[aa]=t.current,uf(e.nodeType===8?e.parentNode:e),new Yw(t)};is.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(He(188)):(e=Object.keys(e).join(","),Error(He(268,e)));return e=qP(t),e=e===null?null:e.stateNode,e};is.flushSync=function(e){return gu(e)};is.hydrate=function(e,t,n){if(!ly(t))throw Error(He(200));return uy(null,e,t,!0,n)};is.hydrateRoot=function(e,t,n){if(!Jw(e))throw Error(He(405));var s=n!=null&&n.hydratedSources||null,u=!1,h="",f=Sk;if(n!=null&&(n.unstable_strictMode===!0&&(u=!0),n.identifierPrefix!==void 0&&(h=n.identifierPrefix),n.onRecoverableError!==void 0&&(f=n.onRecoverableError)),t=bk(t,null,e,1,n??null,u,!1,h,f),e[aa]=t.current,uf(e),s)for(e=0;e<s.length;e++)n=s[e],u=n._getVersion,u=u(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,u]:t.mutableSourceEagerHydrationData.push(n,u);return new ay(t)};is.render=function(e,t,n){if(!ly(t))throw Error(He(200));return uy(null,e,t,!1,n)};is.unmountComponentAtNode=function(e){if(!ly(e))throw Error(He(40));return e._reactRootContainer?(gu(function(){uy(null,null,e,!1,function(){e._reactRootContainer=null,e[aa]=null})}),!0):!1};is.unstable_batchedUpdates=Zw;is.unstable_renderSubtreeIntoContainer=function(e,t,n,s){if(!ly(n))throw Error(He(200));if(e==null||e._reactInternals===void 0)throw Error(He(38));return uy(e,t,n,!1,s)};is.version="18.2.0-next-9e3b772b8-20220608";function Ck(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Ck)}catch(e){console.error(e)}}Ck(),bP.exports=is;var e1=bP.exports;const pm=hP(e1);var xC=e1;yx.createRoot=xC.createRoot,yx.hydrateRoot=xC.hydrateRoot;var Tk={exports:{}},Ek={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zc=X;function S3(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var C3=typeof Object.is=="function"?Object.is:S3,T3=Zc.useState,E3=Zc.useEffect,P3=Zc.useLayoutEffect,A3=Zc.useDebugValue;function k3(e,t){var n=t(),s=T3({inst:{value:n,getSnapshot:t}}),u=s[0].inst,h=s[1];return P3(function(){u.value=n,u.getSnapshot=t,z_(u)&&h({inst:u})},[e,n,t]),E3(function(){return z_(u)&&h({inst:u}),e(function(){z_(u)&&h({inst:u})})},[e]),A3(n),n}function z_(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!C3(e,n)}catch{return!0}}function I3(e,t){return t()}var M3=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?I3:k3;Ek.useSyncExternalStore=Zc.useSyncExternalStore!==void 0?Zc.useSyncExternalStore:M3;Tk.exports=Ek;var Pk=Tk.exports,Ak={exports:{}},kk={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cy=X,R3=Pk;function D3(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var z3=typeof Object.is=="function"?Object.is:D3,L3=R3.useSyncExternalStore,O3=cy.useRef,F3=cy.useEffect,N3=cy.useMemo,B3=cy.useDebugValue;kk.useSyncExternalStoreWithSelector=function(e,t,n,s,u){var h=O3(null);if(h.current===null){var f={hasValue:!1,value:null};h.current=f}else f=h.current;h=N3(function(){function w(B){if(!b){if(b=!0,P=B,B=s(B),u!==void 0&&f.hasValue){var V=f.value;if(u(V,B))return A=V}return A=B}if(V=A,z3(P,B))return V;var j=s(B);return u!==void 0&&u(V,j)?V:(P=B,A=j)}var b=!1,P,A,M=n===void 0?null:n;return[function(){return w(t())},M===null?void 0:function(){return w(M())}]},[t,n,s,u]);var a=L3(e,h[0],h[1]);return F3(function(){f.hasValue=!0,f.value=a},[a]),B3(a),a};Ak.exports=kk;var V3=Ak.exports;function $3(e){e()}let Ik=$3;const j3=e=>Ik=e,U3=()=>Ik,wC=Symbol.for("react-redux-context"),bC=typeof globalThis<"u"?globalThis:{};function q3(){var e;if(!X.createContext)return{};const t=(e=bC[wC])!=null?e:bC[wC]=new Map;let n=t.get(X.createContext);return n||(n=X.createContext(null),t.set(X.createContext,n)),n}const dl=q3();function t1(e=dl){return function(){return X.useContext(e)}}const Mk=t1(),G3=()=>{throw new Error("uSES not initialized!")};let Rk=G3;const Z3=e=>{Rk=e},W3=(e,t)=>e===t;function H3(e=dl){const t=e===dl?Mk:t1(e);return function(s,u={}){const{equalityFn:h=W3,stabilityCheck:f=void 0,noopCheck:a=void 0}=typeof u=="function"?{equalityFn:u}:u,{store:w,subscription:b,getServerState:P,stabilityCheck:A,noopCheck:M}=t();X.useRef(!0);const B=X.useCallback({[s.name](j){return s(j)}}[s.name],[s,A,f]),V=Rk(b.addNestedSub,w.getState,P||w.getState,B,h);return X.useDebugValue(V),V}}const K3=H3();function yu(){return yu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},yu.apply(this,arguments)}function n1(e,t){if(e==null)return{};var n={},s=Object.keys(e),u,h;for(h=0;h<s.length;h++)u=s[h],!(t.indexOf(u)>=0)&&(n[u]=e[u]);return n}var Dk={exports:{}},dn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mr=typeof Symbol=="function"&&Symbol.for,r1=Mr?Symbol.for("react.element"):60103,i1=Mr?Symbol.for("react.portal"):60106,hy=Mr?Symbol.for("react.fragment"):60107,dy=Mr?Symbol.for("react.strict_mode"):60108,fy=Mr?Symbol.for("react.profiler"):60114,py=Mr?Symbol.for("react.provider"):60109,my=Mr?Symbol.for("react.context"):60110,s1=Mr?Symbol.for("react.async_mode"):60111,gy=Mr?Symbol.for("react.concurrent_mode"):60111,yy=Mr?Symbol.for("react.forward_ref"):60112,vy=Mr?Symbol.for("react.suspense"):60113,X3=Mr?Symbol.for("react.suspense_list"):60120,_y=Mr?Symbol.for("react.memo"):60115,xy=Mr?Symbol.for("react.lazy"):60116,Q3=Mr?Symbol.for("react.block"):60121,Y3=Mr?Symbol.for("react.fundamental"):60117,J3=Mr?Symbol.for("react.responder"):60118,e5=Mr?Symbol.for("react.scope"):60119;function os(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case r1:switch(e=e.type,e){case s1:case gy:case hy:case fy:case dy:case vy:return e;default:switch(e=e&&e.$$typeof,e){case my:case yy:case xy:case _y:case py:return e;default:return t}}case i1:return t}}}function zk(e){return os(e)===gy}dn.AsyncMode=s1;dn.ConcurrentMode=gy;dn.ContextConsumer=my;dn.ContextProvider=py;dn.Element=r1;dn.ForwardRef=yy;dn.Fragment=hy;dn.Lazy=xy;dn.Memo=_y;dn.Portal=i1;dn.Profiler=fy;dn.StrictMode=dy;dn.Suspense=vy;dn.isAsyncMode=function(e){return zk(e)||os(e)===s1};dn.isConcurrentMode=zk;dn.isContextConsumer=function(e){return os(e)===my};dn.isContextProvider=function(e){return os(e)===py};dn.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===r1};dn.isForwardRef=function(e){return os(e)===yy};dn.isFragment=function(e){return os(e)===hy};dn.isLazy=function(e){return os(e)===xy};dn.isMemo=function(e){return os(e)===_y};dn.isPortal=function(e){return os(e)===i1};dn.isProfiler=function(e){return os(e)===fy};dn.isStrictMode=function(e){return os(e)===dy};dn.isSuspense=function(e){return os(e)===vy};dn.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===hy||e===gy||e===fy||e===dy||e===vy||e===X3||typeof e=="object"&&e!==null&&(e.$$typeof===xy||e.$$typeof===_y||e.$$typeof===py||e.$$typeof===my||e.$$typeof===yy||e.$$typeof===Y3||e.$$typeof===J3||e.$$typeof===e5||e.$$typeof===Q3)};dn.typeOf=os;Dk.exports=dn;var t5=Dk.exports,Lk=t5,n5={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},r5={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Ok={};Ok[Lk.ForwardRef]=n5;Ok[Lk.Memo]=r5;var yn={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o1=Symbol.for("react.element"),a1=Symbol.for("react.portal"),wy=Symbol.for("react.fragment"),by=Symbol.for("react.strict_mode"),Sy=Symbol.for("react.profiler"),Cy=Symbol.for("react.provider"),Ty=Symbol.for("react.context"),i5=Symbol.for("react.server_context"),Ey=Symbol.for("react.forward_ref"),Py=Symbol.for("react.suspense"),Ay=Symbol.for("react.suspense_list"),ky=Symbol.for("react.memo"),Iy=Symbol.for("react.lazy"),s5=Symbol.for("react.offscreen"),Fk;Fk=Symbol.for("react.module.reference");function Is(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case o1:switch(e=e.type,e){case wy:case Sy:case by:case Py:case Ay:return e;default:switch(e=e&&e.$$typeof,e){case i5:case Ty:case Ey:case Iy:case ky:case Cy:return e;default:return t}}case a1:return t}}}yn.ContextConsumer=Ty;yn.ContextProvider=Cy;yn.Element=o1;yn.ForwardRef=Ey;yn.Fragment=wy;yn.Lazy=Iy;yn.Memo=ky;yn.Portal=a1;yn.Profiler=Sy;yn.StrictMode=by;yn.Suspense=Py;yn.SuspenseList=Ay;yn.isAsyncMode=function(){return!1};yn.isConcurrentMode=function(){return!1};yn.isContextConsumer=function(e){return Is(e)===Ty};yn.isContextProvider=function(e){return Is(e)===Cy};yn.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===o1};yn.isForwardRef=function(e){return Is(e)===Ey};yn.isFragment=function(e){return Is(e)===wy};yn.isLazy=function(e){return Is(e)===Iy};yn.isMemo=function(e){return Is(e)===ky};yn.isPortal=function(e){return Is(e)===a1};yn.isProfiler=function(e){return Is(e)===Sy};yn.isStrictMode=function(e){return Is(e)===by};yn.isSuspense=function(e){return Is(e)===Py};yn.isSuspenseList=function(e){return Is(e)===Ay};yn.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===wy||e===Sy||e===by||e===Py||e===Ay||e===s5||typeof e=="object"&&e!==null&&(e.$$typeof===Iy||e.$$typeof===ky||e.$$typeof===Cy||e.$$typeof===Ty||e.$$typeof===Ey||e.$$typeof===Fk||e.getModuleId!==void 0)};yn.typeOf=Is;function o5(){const e=U3();let t=null,n=null;return{clear(){t=null,n=null},notify(){e(()=>{let s=t;for(;s;)s.callback(),s=s.next})},get(){let s=[],u=t;for(;u;)s.push(u),u=u.next;return s},subscribe(s){let u=!0,h=n={callback:s,next:null,prev:n};return h.prev?h.prev.next=h:t=h,function(){!u||t===null||(u=!1,h.next?h.next.prev=h.prev:n=h.prev,h.prev?h.prev.next=h.next:t=h.next)}}}}const SC={notify(){},get:()=>[]};function a5(e,t){let n,s=SC,u=0,h=!1;function f(j){P();const K=s.subscribe(j);let F=!1;return()=>{F||(F=!0,K(),A())}}function a(){s.notify()}function w(){V.onStateChange&&V.onStateChange()}function b(){return h}function P(){u++,n||(n=t?t.addNestedSub(w):e.subscribe(w),s=o5())}function A(){u--,n&&u===0&&(n(),n=void 0,s.clear(),s=SC)}function M(){h||(h=!0,P())}function B(){h&&(h=!1,A())}const V={addNestedSub:f,notifyNestedSubs:a,handleChangeWrapper:w,isSubscribed:b,trySubscribe:M,tryUnsubscribe:B,getListeners:()=>s};return V}const l5=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",u5=l5?X.useLayoutEffect:X.useEffect;function c5({store:e,context:t,children:n,serverState:s,stabilityCheck:u="once",noopCheck:h="once"}){const f=X.useMemo(()=>{const b=a5(e);return{store:e,subscription:b,getServerState:s?()=>s:void 0,stabilityCheck:u,noopCheck:h}},[e,s,u,h]),a=X.useMemo(()=>e.getState(),[e]);u5(()=>{const{subscription:b}=f;return b.onStateChange=b.notifyNestedSubs,b.trySubscribe(),a!==e.getState()&&b.notifyNestedSubs(),()=>{b.tryUnsubscribe(),b.onStateChange=void 0}},[f,a]);const w=t||dl;return X.createElement(w.Provider,{value:f},n)}function Nk(e=dl){const t=e===dl?Mk:t1(e);return function(){const{store:s}=t();return s}}const h5=Nk();function d5(e=dl){const t=e===dl?h5:Nk(e);return function(){return t().dispatch}}const Bk=d5();Z3(V3.useSyncExternalStoreWithSelector);j3(e1.unstable_batchedUpdates);/**
 * @remix-run/router v1.15.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function vf(){return vf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},vf.apply(this,arguments)}var Ka;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Ka||(Ka={}));const CC="popstate";function f5(e){e===void 0&&(e={});function t(s,u){let{pathname:h,search:f,hash:a}=s.location;return c0("",{pathname:h,search:f,hash:a},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function n(s,u){return typeof u=="string"?u:wg(u)}return m5(t,n,null,e)}function Wn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Vk(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function p5(){return Math.random().toString(36).substr(2,8)}function TC(e,t){return{usr:e.state,key:e.key,idx:t}}function c0(e,t,n,s){return n===void 0&&(n=null),vf({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?rh(t):t,{state:n,key:t&&t.key||s||p5()})}function wg(e){let{pathname:t="/",search:n="",hash:s=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function rh(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let s=e.indexOf("?");s>=0&&(t.search=e.substr(s),e=e.substr(0,s)),e&&(t.pathname=e)}return t}function m5(e,t,n,s){s===void 0&&(s={});let{window:u=document.defaultView,v5Compat:h=!1}=s,f=u.history,a=Ka.Pop,w=null,b=P();b==null&&(b=0,f.replaceState(vf({},f.state,{idx:b}),""));function P(){return(f.state||{idx:null}).idx}function A(){a=Ka.Pop;let K=P(),F=K==null?null:K-b;b=K,w&&w({action:a,location:j.location,delta:F})}function M(K,F){a=Ka.Push;let N=c0(j.location,K,F);n&&n(N,K),b=P()+1;let W=TC(N,b),ne=j.createHref(N);try{f.pushState(W,"",ne)}catch(pe){if(pe instanceof DOMException&&pe.name==="DataCloneError")throw pe;u.location.assign(ne)}h&&w&&w({action:a,location:j.location,delta:1})}function B(K,F){a=Ka.Replace;let N=c0(j.location,K,F);n&&n(N,K),b=P();let W=TC(N,b),ne=j.createHref(N);f.replaceState(W,"",ne),h&&w&&w({action:a,location:j.location,delta:0})}function V(K){let F=u.location.origin!=="null"?u.location.origin:u.location.href,N=typeof K=="string"?K:wg(K);return N=N.replace(/ $/,"%20"),Wn(F,"No window.location.(origin|href) available to create URL for href: "+N),new URL(N,F)}let j={get action(){return a},get location(){return e(u,f)},listen(K){if(w)throw new Error("A history only accepts one active listener");return u.addEventListener(CC,A),w=K,()=>{u.removeEventListener(CC,A),w=null}},createHref(K){return t(u,K)},createURL:V,encodeLocation(K){let F=V(K);return{pathname:F.pathname,search:F.search,hash:F.hash}},push:M,replace:B,go(K){return f.go(K)}};return j}var EC;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(EC||(EC={}));function g5(e,t,n){n===void 0&&(n="/");let s=typeof t=="string"?rh(t):t,u=Wc(s.pathname||"/",n);if(u==null)return null;let h=$k(e);y5(h);let f=null;for(let a=0;f==null&&a<h.length;++a){let w=A5(u);f=E5(h[a],w)}return f}function $k(e,t,n,s){t===void 0&&(t=[]),n===void 0&&(n=[]),s===void 0&&(s="");let u=(h,f,a)=>{let w={relativePath:a===void 0?h.path||"":a,caseSensitive:h.caseSensitive===!0,childrenIndex:f,route:h};w.relativePath.startsWith("/")&&(Wn(w.relativePath.startsWith(s),'Absolute route path "'+w.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),w.relativePath=w.relativePath.slice(s.length));let b=al([s,w.relativePath]),P=n.concat(w);h.children&&h.children.length>0&&(Wn(h.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+b+'".')),$k(h.children,t,P,b)),!(h.path==null&&!h.index)&&t.push({path:b,score:C5(b,h.index),routesMeta:P})};return e.forEach((h,f)=>{var a;if(h.path===""||!((a=h.path)!=null&&a.includes("?")))u(h,f);else for(let w of jk(h.path))u(h,f,w)}),t}function jk(e){let t=e.split("/");if(t.length===0)return[];let[n,...s]=t,u=n.endsWith("?"),h=n.replace(/\?$/,"");if(s.length===0)return u?[h,""]:[h];let f=jk(s.join("/")),a=[];return a.push(...f.map(w=>w===""?h:[h,w].join("/"))),u&&a.push(...f),a.map(w=>e.startsWith("/")&&w===""?"/":w)}function y5(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:T5(t.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}const v5=/^:[\w-]+$/,_5=3,x5=2,w5=1,b5=10,S5=-2,PC=e=>e==="*";function C5(e,t){let n=e.split("/"),s=n.length;return n.some(PC)&&(s+=S5),t&&(s+=x5),n.filter(u=>!PC(u)).reduce((u,h)=>u+(v5.test(h)?_5:h===""?w5:b5),s)}function T5(e,t){return e.length===t.length&&e.slice(0,-1).every((s,u)=>s===t[u])?e[e.length-1]-t[t.length-1]:0}function E5(e,t){let{routesMeta:n}=e,s={},u="/",h=[];for(let f=0;f<n.length;++f){let a=n[f],w=f===n.length-1,b=u==="/"?t:t.slice(u.length)||"/",P=h0({path:a.relativePath,caseSensitive:a.caseSensitive,end:w},b);if(!P)return null;Object.assign(s,P.params);let A=a.route;h.push({params:s,pathname:al([u,P.pathname]),pathnameBase:R5(al([u,P.pathnameBase])),route:A}),P.pathnameBase!=="/"&&(u=al([u,P.pathnameBase]))}return h}function h0(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,s]=P5(e.path,e.caseSensitive,e.end),u=t.match(n);if(!u)return null;let h=u[0],f=h.replace(/(.)\/+$/,"$1"),a=u.slice(1);return{params:s.reduce((b,P,A)=>{let{paramName:M,isOptional:B}=P;if(M==="*"){let j=a[A]||"";f=h.slice(0,h.length-j.length).replace(/(.)\/+$/,"$1")}const V=a[A];return B&&!V?b[M]=void 0:b[M]=(V||"").replace(/%2F/g,"/"),b},{}),pathname:h,pathnameBase:f,pattern:e}}function P5(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Vk(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let s=[],u="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,a,w)=>(s.push({paramName:a,isOptional:w!=null}),w?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(s.push({paramName:"*"}),u+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?u+="\\/*$":e!==""&&e!=="/"&&(u+="(?:(?=\\/|$))"),[new RegExp(u,t?void 0:"i"),s]}function A5(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Vk(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Wc(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,s=e.charAt(n);return s&&s!=="/"?null:e.slice(n)||"/"}function k5(e,t){t===void 0&&(t="/");let{pathname:n,search:s="",hash:u=""}=typeof e=="string"?rh(e):e;return{pathname:n?n.startsWith("/")?n:I5(n,t):t,search:D5(s),hash:z5(u)}}function I5(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(u=>{u===".."?n.length>1&&n.pop():u!=="."&&n.push(u)}),n.length>1?n.join("/"):"/"}function L_(e,t,n,s){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function M5(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function l1(e,t){let n=M5(e);return t?n.map((s,u)=>u===e.length-1?s.pathname:s.pathnameBase):n.map(s=>s.pathnameBase)}function u1(e,t,n,s){s===void 0&&(s=!1);let u;typeof e=="string"?u=rh(e):(u=vf({},e),Wn(!u.pathname||!u.pathname.includes("?"),L_("?","pathname","search",u)),Wn(!u.pathname||!u.pathname.includes("#"),L_("#","pathname","hash",u)),Wn(!u.search||!u.search.includes("#"),L_("#","search","hash",u)));let h=e===""||u.pathname==="",f=h?"/":u.pathname,a;if(f==null)a=n;else{let A=t.length-1;if(!s&&f.startsWith("..")){let M=f.split("/");for(;M[0]==="..";)M.shift(),A-=1;u.pathname=M.join("/")}a=A>=0?t[A]:"/"}let w=k5(u,a),b=f&&f!=="/"&&f.endsWith("/"),P=(h||f===".")&&n.endsWith("/");return!w.pathname.endsWith("/")&&(b||P)&&(w.pathname+="/"),w}const al=e=>e.join("/").replace(/\/\/+/g,"/"),R5=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),D5=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,z5=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function L5(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Uk=["post","put","patch","delete"];new Set(Uk);const O5=["get",...Uk];new Set(O5);/**
 * React Router v6.22.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _f(){return _f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},_f.apply(this,arguments)}const My=X.createContext(null),qk=X.createContext(null),da=X.createContext(null),Ry=X.createContext(null),fa=X.createContext({outlet:null,matches:[],isDataRoute:!1}),Gk=X.createContext(null);function F5(e,t){let{relative:n}=t===void 0?{}:t;ih()||Wn(!1);let{basename:s,navigator:u}=X.useContext(da),{hash:h,pathname:f,search:a}=Dy(e,{relative:n}),w=f;return s!=="/"&&(w=f==="/"?s:al([s,f])),u.createHref({pathname:w,search:a,hash:h})}function ih(){return X.useContext(Ry)!=null}function sh(){return ih()||Wn(!1),X.useContext(Ry).location}function Zk(e){X.useContext(da).static||X.useLayoutEffect(e)}function c1(){let{isDataRoute:e}=X.useContext(fa);return e?Y5():N5()}function N5(){ih()||Wn(!1);let e=X.useContext(My),{basename:t,future:n,navigator:s}=X.useContext(da),{matches:u}=X.useContext(fa),{pathname:h}=sh(),f=JSON.stringify(l1(u,n.v7_relativeSplatPath)),a=X.useRef(!1);return Zk(()=>{a.current=!0}),X.useCallback(function(b,P){if(P===void 0&&(P={}),!a.current)return;if(typeof b=="number"){s.go(b);return}let A=u1(b,JSON.parse(f),h,P.relative==="path");e==null&&t!=="/"&&(A.pathname=A.pathname==="/"?t:al([t,A.pathname])),(P.replace?s.replace:s.push)(A,P.state,P)},[t,s,f,h,e])}const B5=X.createContext(null);function V5(e){let t=X.useContext(fa).outlet;return t&&X.createElement(B5.Provider,{value:e},t)}function Dy(e,t){let{relative:n}=t===void 0?{}:t,{future:s}=X.useContext(da),{matches:u}=X.useContext(fa),{pathname:h}=sh(),f=JSON.stringify(l1(u,s.v7_relativeSplatPath));return X.useMemo(()=>u1(e,JSON.parse(f),h,n==="path"),[e,f,h,n])}function $5(e,t){return j5(e,t)}function j5(e,t,n,s){ih()||Wn(!1);let{navigator:u}=X.useContext(da),{matches:h}=X.useContext(fa),f=h[h.length-1],a=f?f.params:{};f&&f.pathname;let w=f?f.pathnameBase:"/";f&&f.route;let b=sh(),P;if(t){var A;let K=typeof t=="string"?rh(t):t;w==="/"||(A=K.pathname)!=null&&A.startsWith(w)||Wn(!1),P=K}else P=b;let M=P.pathname||"/",B=M;if(w!=="/"){let K=w.replace(/^\//,"").split("/");B="/"+M.replace(/^\//,"").split("/").slice(K.length).join("/")}let V=g5(e,{pathname:B}),j=W5(V&&V.map(K=>Object.assign({},K,{params:Object.assign({},a,K.params),pathname:al([w,u.encodeLocation?u.encodeLocation(K.pathname).pathname:K.pathname]),pathnameBase:K.pathnameBase==="/"?w:al([w,u.encodeLocation?u.encodeLocation(K.pathnameBase).pathname:K.pathnameBase])})),h,n,s);return t&&j?X.createElement(Ry.Provider,{value:{location:_f({pathname:"/",search:"",hash:"",state:null,key:"default"},P),navigationType:Ka.Pop}},j):j}function U5(){let e=Q5(),t=L5(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,u={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},h=null;return X.createElement(X.Fragment,null,X.createElement("h2",null,"Unexpected Application Error!"),X.createElement("h3",{style:{fontStyle:"italic"}},t),n?X.createElement("pre",{style:u},n):null,h)}const q5=X.createElement(U5,null);class G5 extends X.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?X.createElement(fa.Provider,{value:this.props.routeContext},X.createElement(Gk.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Z5(e){let{routeContext:t,match:n,children:s}=e,u=X.useContext(My);return u&&u.static&&u.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(u.staticContext._deepestRenderedBoundaryId=n.route.id),X.createElement(fa.Provider,{value:t},s)}function W5(e,t,n,s){var u;if(t===void 0&&(t=[]),n===void 0&&(n=null),s===void 0&&(s=null),e==null){var h;if((h=n)!=null&&h.errors)e=n.matches;else return null}let f=e,a=(u=n)==null?void 0:u.errors;if(a!=null){let P=f.findIndex(A=>A.route.id&&(a==null?void 0:a[A.route.id]));P>=0||Wn(!1),f=f.slice(0,Math.min(f.length,P+1))}let w=!1,b=-1;if(n&&s&&s.v7_partialHydration)for(let P=0;P<f.length;P++){let A=f[P];if((A.route.HydrateFallback||A.route.hydrateFallbackElement)&&(b=P),A.route.id){let{loaderData:M,errors:B}=n,V=A.route.loader&&M[A.route.id]===void 0&&(!B||B[A.route.id]===void 0);if(A.route.lazy||V){w=!0,b>=0?f=f.slice(0,b+1):f=[f[0]];break}}}return f.reduceRight((P,A,M)=>{let B,V=!1,j=null,K=null;n&&(B=a&&A.route.id?a[A.route.id]:void 0,j=A.route.errorElement||q5,w&&(b<0&&M===0?(J5("route-fallback",!1),V=!0,K=null):b===M&&(V=!0,K=A.route.hydrateFallbackElement||null)));let F=t.concat(f.slice(0,M+1)),N=()=>{let W;return B?W=j:V?W=K:A.route.Component?W=X.createElement(A.route.Component,null):A.route.element?W=A.route.element:W=P,X.createElement(Z5,{match:A,routeContext:{outlet:P,matches:F,isDataRoute:n!=null},children:W})};return n&&(A.route.ErrorBoundary||A.route.errorElement||M===0)?X.createElement(G5,{location:n.location,revalidation:n.revalidation,component:j,error:B,children:N(),routeContext:{outlet:null,matches:F,isDataRoute:!0}}):N()},null)}var Wk=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Wk||{}),bg=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(bg||{});function H5(e){let t=X.useContext(My);return t||Wn(!1),t}function K5(e){let t=X.useContext(qk);return t||Wn(!1),t}function X5(e){let t=X.useContext(fa);return t||Wn(!1),t}function Hk(e){let t=X5(),n=t.matches[t.matches.length-1];return n.route.id||Wn(!1),n.route.id}function Q5(){var e;let t=X.useContext(Gk),n=K5(bg.UseRouteError),s=Hk(bg.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[s]}function Y5(){let{router:e}=H5(Wk.UseNavigateStable),t=Hk(bg.UseNavigateStable),n=X.useRef(!1);return Zk(()=>{n.current=!0}),X.useCallback(function(u,h){h===void 0&&(h={}),n.current&&(typeof u=="number"?e.navigate(u):e.navigate(u,_f({fromRouteId:t},h)))},[e,t])}const AC={};function J5(e,t,n){!t&&!AC[e]&&(AC[e]=!0)}function e4(e){let{to:t,replace:n,state:s,relative:u}=e;ih()||Wn(!1);let{future:h,static:f}=X.useContext(da),{matches:a}=X.useContext(fa),{pathname:w}=sh(),b=c1(),P=u1(t,l1(a,h.v7_relativeSplatPath),w,u==="path"),A=JSON.stringify(P);return X.useEffect(()=>b(JSON.parse(A),{replace:n,state:s,relative:u}),[b,A,u,n,s]),null}function t4(e){return V5(e.context)}function Ba(e){Wn(!1)}function n4(e){let{basename:t="/",children:n=null,location:s,navigationType:u=Ka.Pop,navigator:h,static:f=!1,future:a}=e;ih()&&Wn(!1);let w=t.replace(/^\/*/,"/"),b=X.useMemo(()=>({basename:w,navigator:h,static:f,future:_f({v7_relativeSplatPath:!1},a)}),[w,a,h,f]);typeof s=="string"&&(s=rh(s));let{pathname:P="/",search:A="",hash:M="",state:B=null,key:V="default"}=s,j=X.useMemo(()=>{let K=Wc(P,w);return K==null?null:{location:{pathname:K,search:A,hash:M,state:B,key:V},navigationType:u}},[w,P,A,M,B,V,u]);return j==null?null:X.createElement(da.Provider,{value:b},X.createElement(Ry.Provider,{children:n,value:j}))}function r4(e){let{children:t,location:n}=e;return $5(d0(t),n)}new Promise(()=>{});function d0(e,t){t===void 0&&(t=[]);let n=[];return X.Children.forEach(e,(s,u)=>{if(!X.isValidElement(s))return;let h=[...t,u];if(s.type===X.Fragment){n.push.apply(n,d0(s.props.children,h));return}s.type!==Ba&&Wn(!1),!s.props.index||!s.props.children||Wn(!1);let f={id:s.props.id||h.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(f.children=d0(s.props.children,h)),n.push(f)}),n}/**
 * React Router DOM v6.22.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Sg(){return Sg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Sg.apply(this,arguments)}function Kk(e,t){if(e==null)return{};var n={},s=Object.keys(e),u,h;for(h=0;h<s.length;h++)u=s[h],!(t.indexOf(u)>=0)&&(n[u]=e[u]);return n}function i4(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function s4(e,t){return e.button===0&&(!t||t==="_self")&&!i4(e)}const o4=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],a4=["aria-current","caseSensitive","className","end","style","to","unstable_viewTransition","children"],l4="6";try{window.__reactRouterVersion=l4}catch{}const u4=X.createContext({isTransitioning:!1}),c4="startTransition",kC=lw[c4];function h4(e){let{basename:t,children:n,future:s,window:u}=e,h=X.useRef();h.current==null&&(h.current=f5({window:u,v5Compat:!0}));let f=h.current,[a,w]=X.useState({action:f.action,location:f.location}),{v7_startTransition:b}=s||{},P=X.useCallback(A=>{b&&kC?kC(()=>w(A)):w(A)},[w,b]);return X.useLayoutEffect(()=>f.listen(P),[f,P]),X.createElement(n4,{basename:t,children:n,location:a.location,navigationType:a.action,navigator:f,future:s})}const d4=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",f4=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,p4=X.forwardRef(function(t,n){let{onClick:s,relative:u,reloadDocument:h,replace:f,state:a,target:w,to:b,preventScrollReset:P,unstable_viewTransition:A}=t,M=Kk(t,o4),{basename:B}=X.useContext(da),V,j=!1;if(typeof b=="string"&&f4.test(b)&&(V=b,d4))try{let W=new URL(window.location.href),ne=b.startsWith("//")?new URL(W.protocol+b):new URL(b),pe=Wc(ne.pathname,B);ne.origin===W.origin&&pe!=null?b=pe+ne.search+ne.hash:j=!0}catch{}let K=F5(b,{relative:u}),F=g4(b,{replace:f,state:a,target:w,preventScrollReset:P,relative:u,unstable_viewTransition:A});function N(W){s&&s(W),W.defaultPrevented||F(W)}return X.createElement("a",Sg({},M,{href:V||K,onClick:j||h?s:N,ref:n,target:w}))}),h1=X.forwardRef(function(t,n){let{"aria-current":s="page",caseSensitive:u=!1,className:h="",end:f=!1,style:a,to:w,unstable_viewTransition:b,children:P}=t,A=Kk(t,a4),M=Dy(w,{relative:A.relative}),B=sh(),V=X.useContext(qk),{navigator:j,basename:K}=X.useContext(da),F=V!=null&&y4(M)&&b===!0,N=j.encodeLocation?j.encodeLocation(M).pathname:M.pathname,W=B.pathname,ne=V&&V.navigation&&V.navigation.location?V.navigation.location.pathname:null;u||(W=W.toLowerCase(),ne=ne?ne.toLowerCase():null,N=N.toLowerCase()),ne&&K&&(ne=Wc(ne,K)||ne);const pe=N!=="/"&&N.endsWith("/")?N.length-1:N.length;let Ce=W===N||!f&&W.startsWith(N)&&W.charAt(pe)==="/",Ie=ne!=null&&(ne===N||!f&&ne.startsWith(N)&&ne.charAt(N.length)==="/"),Se={isActive:Ce,isPending:Ie,isTransitioning:F},qe=Ce?s:void 0,ze;typeof h=="function"?ze=h(Se):ze=[h,Ce?"active":null,Ie?"pending":null,F?"transitioning":null].filter(Boolean).join(" ");let Et=typeof a=="function"?a(Se):a;return X.createElement(p4,Sg({},A,{"aria-current":qe,className:ze,ref:n,style:Et,to:w,unstable_viewTransition:b}),typeof P=="function"?P(Se):P)});var f0;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(f0||(f0={}));var IC;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(IC||(IC={}));function m4(e){let t=X.useContext(My);return t||Wn(!1),t}function g4(e,t){let{target:n,replace:s,state:u,preventScrollReset:h,relative:f,unstable_viewTransition:a}=t===void 0?{}:t,w=c1(),b=sh(),P=Dy(e,{relative:f});return X.useCallback(A=>{if(s4(A,n)){A.preventDefault();let M=s!==void 0?s:wg(b)===wg(P);w(e,{replace:M,state:u,preventScrollReset:h,relative:f,unstable_viewTransition:a})}},[b,w,P,s,u,n,e,h,f,a])}function y4(e,t){t===void 0&&(t={});let n=X.useContext(u4);n==null&&Wn(!1);let{basename:s}=m4(f0.useViewTransitionState),u=Dy(e,{relative:t.relative});if(!n.isTransitioning)return!1;let h=Wc(n.currentLocation.pathname,s)||n.currentLocation.pathname,f=Wc(n.nextLocation.pathname,s)||n.nextLocation.pathname;return h0(u.pathname,f)!=null||h0(u.pathname,h)!=null}class Lf{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){const n={listener:t};return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}}const xf=typeof window>"u"||"Deno"in window;function ws(){}function v4(e,t){return typeof e=="function"?e(t):e}function p0(e){return typeof e=="number"&&e>=0&&e!==1/0}function Xk(e,t){return Math.max(e+(t||0)-Date.now(),0)}function zd(e,t,n){return zy(e)?typeof t=="function"?{...n,queryKey:e,queryFn:t}:{...t,queryKey:e}:e}function Ua(e,t,n){return zy(e)?[{...t,queryKey:e},n]:[e||{},t]}function MC(e,t){const{type:n="all",exact:s,fetchStatus:u,predicate:h,queryKey:f,stale:a}=e;if(zy(f)){if(s){if(t.queryHash!==d1(f,t.options))return!1}else if(!Cg(t.queryKey,f))return!1}if(n!=="all"){const w=t.isActive();if(n==="active"&&!w||n==="inactive"&&w)return!1}return!(typeof a=="boolean"&&t.isStale()!==a||typeof u<"u"&&u!==t.state.fetchStatus||h&&!h(t))}function RC(e,t){const{exact:n,fetching:s,predicate:u,mutationKey:h}=e;if(zy(h)){if(!t.options.mutationKey)return!1;if(n){if(ru(t.options.mutationKey)!==ru(h))return!1}else if(!Cg(t.options.mutationKey,h))return!1}return!(typeof s=="boolean"&&t.state.status==="loading"!==s||u&&!u(t))}function d1(e,t){return((t==null?void 0:t.queryKeyHashFn)||ru)(e)}function ru(e){return JSON.stringify(e,(t,n)=>g0(n)?Object.keys(n).sort().reduce((s,u)=>(s[u]=n[u],s),{}):n)}function Cg(e,t){return Qk(e,t)}function Qk(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(n=>!Qk(e[n],t[n])):!1}function Yk(e,t){if(e===t)return e;const n=DC(e)&&DC(t);if(n||g0(e)&&g0(t)){const s=n?e.length:Object.keys(e).length,u=n?t:Object.keys(t),h=u.length,f=n?[]:{};let a=0;for(let w=0;w<h;w++){const b=n?w:u[w];f[b]=Yk(e[b],t[b]),f[b]===e[b]&&a++}return s===h&&a===s?e:f}return t}function m0(e,t){if(e&&!t||t&&!e)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function DC(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function g0(e){if(!zC(e))return!1;const t=e.constructor;if(typeof t>"u")return!0;const n=t.prototype;return!(!zC(n)||!n.hasOwnProperty("isPrototypeOf"))}function zC(e){return Object.prototype.toString.call(e)==="[object Object]"}function zy(e){return Array.isArray(e)}function Jk(e){return new Promise(t=>{setTimeout(t,e)})}function LC(e){Jk(0).then(e)}function _4(){if(typeof AbortController=="function")return new AbortController}function y0(e,t,n){return n.isDataEqual!=null&&n.isDataEqual(e,t)?e:typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?Yk(e,t):t}class x4 extends Lf{constructor(){super(),this.setup=t=>{if(!xf&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),window.addEventListener("focus",n,!1),()=>{window.removeEventListener("visibilitychange",n),window.removeEventListener("focus",n)}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var t;(t=this.cleanup)==null||t.call(this),this.cleanup=void 0}}setEventListener(t){var n;this.setup=t,(n=this.cleanup)==null||n.call(this),this.cleanup=t(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()})}setFocused(t){this.focused!==t&&(this.focused=t,this.onFocus())}onFocus(){this.listeners.forEach(({listener:t})=>{t()})}isFocused(){return typeof this.focused=="boolean"?this.focused:typeof document>"u"?!0:[void 0,"visible","prerender"].includes(document.visibilityState)}}const Tg=new x4,OC=["online","offline"];class w4 extends Lf{constructor(){super(),this.setup=t=>{if(!xf&&window.addEventListener){const n=()=>t();return OC.forEach(s=>{window.addEventListener(s,n,!1)}),()=>{OC.forEach(s=>{window.removeEventListener(s,n)})}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var t;(t=this.cleanup)==null||t.call(this),this.cleanup=void 0}}setEventListener(t){var n;this.setup=t,(n=this.cleanup)==null||n.call(this),this.cleanup=t(s=>{typeof s=="boolean"?this.setOnline(s):this.onOnline()})}setOnline(t){this.online!==t&&(this.online=t,this.onOnline())}onOnline(){this.listeners.forEach(({listener:t})=>{t()})}isOnline(){return typeof this.online=="boolean"?this.online:typeof navigator>"u"||typeof navigator.onLine>"u"?!0:navigator.onLine}}const Eg=new w4;function b4(e){return Math.min(1e3*2**e,3e4)}function Ly(e){return(e??"online")==="online"?Eg.isOnline():!0}class eI{constructor(t){this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}}function Lm(e){return e instanceof eI}function tI(e){let t=!1,n=0,s=!1,u,h,f;const a=new Promise((K,F)=>{h=K,f=F}),w=K=>{s||(B(new eI(K)),e.abort==null||e.abort())},b=()=>{t=!0},P=()=>{t=!1},A=()=>!Tg.isFocused()||e.networkMode!=="always"&&!Eg.isOnline(),M=K=>{s||(s=!0,e.onSuccess==null||e.onSuccess(K),u==null||u(),h(K))},B=K=>{s||(s=!0,e.onError==null||e.onError(K),u==null||u(),f(K))},V=()=>new Promise(K=>{u=F=>{const N=s||!A();return N&&K(F),N},e.onPause==null||e.onPause()}).then(()=>{u=void 0,s||e.onContinue==null||e.onContinue()}),j=()=>{if(s)return;let K;try{K=e.fn()}catch(F){K=Promise.reject(F)}Promise.resolve(K).then(M).catch(F=>{var N,W;if(s)return;const ne=(N=e.retry)!=null?N:3,pe=(W=e.retryDelay)!=null?W:b4,Ce=typeof pe=="function"?pe(n,F):pe,Ie=ne===!0||typeof ne=="number"&&n<ne||typeof ne=="function"&&ne(n,F);if(t||!Ie){B(F);return}n++,e.onFail==null||e.onFail(n,F),Jk(Ce).then(()=>{if(A())return V()}).then(()=>{t?B(F):j()})})};return Ly(e.networkMode)?j():V().then(j),{promise:a,cancel:w,continue:()=>(u==null?void 0:u())?a:Promise.resolve(),cancelRetry:b,continueRetry:P}}const f1=console;function S4(){let e=[],t=0,n=P=>{P()},s=P=>{P()};const u=P=>{let A;t++;try{A=P()}finally{t--,t||a()}return A},h=P=>{t?e.push(P):LC(()=>{n(P)})},f=P=>(...A)=>{h(()=>{P(...A)})},a=()=>{const P=e;e=[],P.length&&LC(()=>{s(()=>{P.forEach(A=>{n(A)})})})};return{batch:u,batchCalls:f,schedule:h,setNotifyFunction:P=>{n=P},setBatchNotifyFunction:P=>{s=P}}}const hr=S4();class nI{destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),p0(this.cacheTime)&&(this.gcTimeout=setTimeout(()=>{this.optionalRemove()},this.cacheTime))}updateCacheTime(t){this.cacheTime=Math.max(this.cacheTime||0,t??(xf?1/0:5*60*1e3))}clearGcTimeout(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)}}class C4 extends nI{constructor(t){super(),this.abortSignalConsumed=!1,this.defaultOptions=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.cache=t.cache,this.logger=t.logger||f1,this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.initialState=t.state||T4(this.options),this.state=this.initialState,this.scheduleGc()}get meta(){return this.options.meta}setOptions(t){this.options={...this.defaultOptions,...t},this.updateCacheTime(this.options.cacheTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.cache.remove(this)}setData(t,n){const s=y0(this.state.data,t,this.options);return this.dispatch({data:s,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),s}setState(t,n){this.dispatch({type:"setState",state:t,setStateOptions:n})}cancel(t){var n;const s=this.promise;return(n=this.retryer)==null||n.cancel(t),s?s.then(ws).catch(ws):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.initialState)}isActive(){return this.observers.some(t=>t.options.enabled!==!1)}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some(t=>t.getCurrentResult().isStale)}isStaleByTime(t=0){return this.state.isInvalidated||!this.state.dataUpdatedAt||!Xk(this.state.dataUpdatedAt,t)}onFocus(){var t;const n=this.observers.find(s=>s.shouldFetchOnWindowFocus());n&&n.refetch({cancelRefetch:!1}),(t=this.retryer)==null||t.continue()}onOnline(){var t;const n=this.observers.find(s=>s.shouldFetchOnReconnect());n&&n.refetch({cancelRefetch:!1}),(t=this.retryer)==null||t.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(this.retryer&&(this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.scheduleGc()),this.cache.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.dispatch({type:"invalidate"})}fetch(t,n){var s,u;if(this.state.fetchStatus!=="idle"){if(this.state.dataUpdatedAt&&n!=null&&n.cancelRefetch)this.cancel({silent:!0});else if(this.promise){var h;return(h=this.retryer)==null||h.continueRetry(),this.promise}}if(t&&this.setOptions(t),!this.options.queryFn){const B=this.observers.find(V=>V.options.queryFn);B&&this.setOptions(B.options)}const f=_4(),a={queryKey:this.queryKey,pageParam:void 0,meta:this.meta},w=B=>{Object.defineProperty(B,"signal",{enumerable:!0,get:()=>{if(f)return this.abortSignalConsumed=!0,f.signal}})};w(a);const b=()=>this.options.queryFn?(this.abortSignalConsumed=!1,this.options.queryFn(a)):Promise.reject("Missing queryFn for queryKey '"+this.options.queryHash+"'"),P={fetchOptions:n,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:b};if(w(P),(s=this.options.behavior)==null||s.onFetch(P),this.revertState=this.state,this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=P.fetchOptions)==null?void 0:u.meta)){var A;this.dispatch({type:"fetch",meta:(A=P.fetchOptions)==null?void 0:A.meta})}const M=B=>{if(Lm(B)&&B.silent||this.dispatch({type:"error",error:B}),!Lm(B)){var V,j,K,F;(V=(j=this.cache.config).onError)==null||V.call(j,B,this),(K=(F=this.cache.config).onSettled)==null||K.call(F,this.state.data,B,this)}this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return this.retryer=tI({fn:P.fetchFn,abort:f==null?void 0:f.abort.bind(f),onSuccess:B=>{var V,j,K,F;if(typeof B>"u"){M(new Error(this.queryHash+" data is undefined"));return}this.setData(B),(V=(j=this.cache.config).onSuccess)==null||V.call(j,B,this),(K=(F=this.cache.config).onSettled)==null||K.call(F,B,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1},onError:M,onFail:(B,V)=>{this.dispatch({type:"failed",failureCount:B,error:V})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:P.options.retry,retryDelay:P.options.retryDelay,networkMode:P.options.networkMode}),this.promise=this.retryer.promise,this.promise}dispatch(t){const n=s=>{var u,h;switch(t.type){case"failed":return{...s,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:(u=t.meta)!=null?u:null,fetchStatus:Ly(this.options.networkMode)?"fetching":"paused",...!s.dataUpdatedAt&&{error:null,status:"loading"}};case"success":return{...s,data:t.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:(h=t.dataUpdatedAt)!=null?h:Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const f=t.error;return Lm(f)&&f.revert&&this.revertState?{...this.revertState,fetchStatus:"idle"}:{...s,error:f,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:f,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...t.state}}};this.state=n(this.state),hr.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate(t)}),this.cache.notify({query:this,type:"updated",action:t})})}}function T4(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=typeof t<"u",s=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"loading",fetchStatus:"idle"}}class E4 extends Lf{constructor(t){super(),this.config=t||{},this.queries=[],this.queriesMap={}}build(t,n,s){var u;const h=n.queryKey,f=(u=n.queryHash)!=null?u:d1(h,n);let a=this.get(f);return a||(a=new C4({cache:this,logger:t.getLogger(),queryKey:h,queryHash:f,options:t.defaultQueryOptions(n),state:s,defaultOptions:t.getQueryDefaults(h)}),this.add(a)),a}add(t){this.queriesMap[t.queryHash]||(this.queriesMap[t.queryHash]=t,this.queries.push(t),this.notify({type:"added",query:t}))}remove(t){const n=this.queriesMap[t.queryHash];n&&(t.destroy(),this.queries=this.queries.filter(s=>s!==t),n===t&&delete this.queriesMap[t.queryHash],this.notify({type:"removed",query:t}))}clear(){hr.batch(()=>{this.queries.forEach(t=>{this.remove(t)})})}get(t){return this.queriesMap[t]}getAll(){return this.queries}find(t,n){const[s]=Ua(t,n);return typeof s.exact>"u"&&(s.exact=!0),this.queries.find(u=>MC(s,u))}findAll(t,n){const[s]=Ua(t,n);return Object.keys(s).length>0?this.queries.filter(u=>MC(s,u)):this.queries}notify(t){hr.batch(()=>{this.listeners.forEach(({listener:n})=>{n(t)})})}onFocus(){hr.batch(()=>{this.queries.forEach(t=>{t.onFocus()})})}onOnline(){hr.batch(()=>{this.queries.forEach(t=>{t.onOnline()})})}}class P4 extends nI{constructor(t){super(),this.defaultOptions=t.defaultOptions,this.mutationId=t.mutationId,this.mutationCache=t.mutationCache,this.logger=t.logger||f1,this.observers=[],this.state=t.state||A4(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options={...this.defaultOptions,...t},this.updateCacheTime(this.options.cacheTime)}get meta(){return this.options.meta}setState(t){this.dispatch({type:"setState",state:t})}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.mutationCache.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.observers=this.observers.filter(n=>n!==t),this.scheduleGc(),this.mutationCache.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.observers.length||(this.state.status==="loading"?this.scheduleGc():this.mutationCache.remove(this))}continue(){var t,n;return(t=(n=this.retryer)==null?void 0:n.continue())!=null?t:this.execute()}async execute(){const t=()=>{var Ie;return this.retryer=tI({fn:()=>this.options.mutationFn?this.options.mutationFn(this.state.variables):Promise.reject("No mutationFn found"),onFail:(Se,qe)=>{this.dispatch({type:"failed",failureCount:Se,error:qe})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:(Ie=this.options.retry)!=null?Ie:0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode}),this.retryer.promise},n=this.state.status==="loading";try{var s,u,h,f,a,w,b,P;if(!n){var A,M,B,V;this.dispatch({type:"loading",variables:this.options.variables}),await((A=(M=this.mutationCache.config).onMutate)==null?void 0:A.call(M,this.state.variables,this));const Se=await((B=(V=this.options).onMutate)==null?void 0:B.call(V,this.state.variables));Se!==this.state.context&&this.dispatch({type:"loading",context:Se,variables:this.state.variables})}const Ie=await t();return await((s=(u=this.mutationCache.config).onSuccess)==null?void 0:s.call(u,Ie,this.state.variables,this.state.context,this)),await((h=(f=this.options).onSuccess)==null?void 0:h.call(f,Ie,this.state.variables,this.state.context)),await((a=(w=this.mutationCache.config).onSettled)==null?void 0:a.call(w,Ie,null,this.state.variables,this.state.context,this)),await((b=(P=this.options).onSettled)==null?void 0:b.call(P,Ie,null,this.state.variables,this.state.context)),this.dispatch({type:"success",data:Ie}),Ie}catch(Ie){try{var j,K,F,N,W,ne,pe,Ce;throw await((j=(K=this.mutationCache.config).onError)==null?void 0:j.call(K,Ie,this.state.variables,this.state.context,this)),await((F=(N=this.options).onError)==null?void 0:F.call(N,Ie,this.state.variables,this.state.context)),await((W=(ne=this.mutationCache.config).onSettled)==null?void 0:W.call(ne,void 0,Ie,this.state.variables,this.state.context,this)),await((pe=(Ce=this.options).onSettled)==null?void 0:pe.call(Ce,void 0,Ie,this.state.variables,this.state.context)),Ie}finally{this.dispatch({type:"error",error:Ie})}}}dispatch(t){const n=s=>{switch(t.type){case"failed":return{...s,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"loading":return{...s,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:!Ly(this.options.networkMode),status:"loading",variables:t.variables};case"success":return{...s,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:t.error,failureCount:s.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"};case"setState":return{...s,...t.state}}};this.state=n(this.state),hr.batch(()=>{this.observers.forEach(s=>{s.onMutationUpdate(t)}),this.mutationCache.notify({mutation:this,type:"updated",action:t})})}}function A4(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0}}class k4 extends Lf{constructor(t){super(),this.config=t||{},this.mutations=[],this.mutationId=0}build(t,n,s){const u=new P4({mutationCache:this,logger:t.getLogger(),mutationId:++this.mutationId,options:t.defaultMutationOptions(n),state:s,defaultOptions:n.mutationKey?t.getMutationDefaults(n.mutationKey):void 0});return this.add(u),u}add(t){this.mutations.push(t),this.notify({type:"added",mutation:t})}remove(t){this.mutations=this.mutations.filter(n=>n!==t),this.notify({type:"removed",mutation:t})}clear(){hr.batch(()=>{this.mutations.forEach(t=>{this.remove(t)})})}getAll(){return this.mutations}find(t){return typeof t.exact>"u"&&(t.exact=!0),this.mutations.find(n=>RC(t,n))}findAll(t){return this.mutations.filter(n=>RC(t,n))}notify(t){hr.batch(()=>{this.listeners.forEach(({listener:n})=>{n(t)})})}resumePausedMutations(){var t;return this.resuming=((t=this.resuming)!=null?t:Promise.resolve()).then(()=>{const n=this.mutations.filter(s=>s.state.isPaused);return hr.batch(()=>n.reduce((s,u)=>s.then(()=>u.continue().catch(ws)),Promise.resolve()))}).then(()=>{this.resuming=void 0}),this.resuming}}function I4(){return{onFetch:e=>{e.fetchFn=()=>{var t,n,s,u,h,f;const a=(t=e.fetchOptions)==null||(n=t.meta)==null?void 0:n.refetchPage,w=(s=e.fetchOptions)==null||(u=s.meta)==null?void 0:u.fetchMore,b=w==null?void 0:w.pageParam,P=(w==null?void 0:w.direction)==="forward",A=(w==null?void 0:w.direction)==="backward",M=((h=e.state.data)==null?void 0:h.pages)||[],B=((f=e.state.data)==null?void 0:f.pageParams)||[];let V=B,j=!1;const K=Ce=>{Object.defineProperty(Ce,"signal",{enumerable:!0,get:()=>{var Ie;if((Ie=e.signal)!=null&&Ie.aborted)j=!0;else{var Se;(Se=e.signal)==null||Se.addEventListener("abort",()=>{j=!0})}return e.signal}})},F=e.options.queryFn||(()=>Promise.reject("Missing queryFn for queryKey '"+e.options.queryHash+"'")),N=(Ce,Ie,Se,qe)=>(V=qe?[Ie,...V]:[...V,Ie],qe?[Se,...Ce]:[...Ce,Se]),W=(Ce,Ie,Se,qe)=>{if(j)return Promise.reject("Cancelled");if(typeof Se>"u"&&!Ie&&Ce.length)return Promise.resolve(Ce);const ze={queryKey:e.queryKey,pageParam:Se,meta:e.options.meta};K(ze);const Et=F(ze);return Promise.resolve(Et).then(yt=>N(Ce,Se,yt,qe))};let ne;if(!M.length)ne=W([]);else if(P){const Ce=typeof b<"u",Ie=Ce?b:FC(e.options,M);ne=W(M,Ce,Ie)}else if(A){const Ce=typeof b<"u",Ie=Ce?b:M4(e.options,M);ne=W(M,Ce,Ie,!0)}else{V=[];const Ce=typeof e.options.getNextPageParam>"u";ne=(a&&M[0]?a(M[0],0,M):!0)?W([],Ce,B[0]):Promise.resolve(N([],B[0],M[0]));for(let Se=1;Se<M.length;Se++)ne=ne.then(qe=>{if(a&&M[Se]?a(M[Se],Se,M):!0){const Et=Ce?B[Se]:FC(e.options,qe);return W(qe,Ce,Et)}return Promise.resolve(N(qe,B[Se],M[Se]))})}return ne.then(Ce=>({pages:Ce,pageParams:V}))}}}}function FC(e,t){return e.getNextPageParam==null?void 0:e.getNextPageParam(t[t.length-1],t)}function M4(e,t){return e.getPreviousPageParam==null?void 0:e.getPreviousPageParam(t[0],t)}class R4{constructor(t={}){this.queryCache=t.queryCache||new E4,this.mutationCache=t.mutationCache||new k4,this.logger=t.logger||f1,this.defaultOptions=t.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[],this.mountCount=0}mount(){this.mountCount++,this.mountCount===1&&(this.unsubscribeFocus=Tg.subscribe(()=>{Tg.isFocused()&&(this.resumePausedMutations(),this.queryCache.onFocus())}),this.unsubscribeOnline=Eg.subscribe(()=>{Eg.isOnline()&&(this.resumePausedMutations(),this.queryCache.onOnline())}))}unmount(){var t,n;this.mountCount--,this.mountCount===0&&((t=this.unsubscribeFocus)==null||t.call(this),this.unsubscribeFocus=void 0,(n=this.unsubscribeOnline)==null||n.call(this),this.unsubscribeOnline=void 0)}isFetching(t,n){const[s]=Ua(t,n);return s.fetchStatus="fetching",this.queryCache.findAll(s).length}isMutating(t){return this.mutationCache.findAll({...t,fetching:!0}).length}getQueryData(t,n){var s;return(s=this.queryCache.find(t,n))==null?void 0:s.state.data}ensureQueryData(t,n,s){const u=zd(t,n,s),h=this.getQueryData(u.queryKey);return h?Promise.resolve(h):this.fetchQuery(u)}getQueriesData(t){return this.getQueryCache().findAll(t).map(({queryKey:n,state:s})=>{const u=s.data;return[n,u]})}setQueryData(t,n,s){const u=this.queryCache.find(t),h=u==null?void 0:u.state.data,f=v4(n,h);if(typeof f>"u")return;const a=zd(t),w=this.defaultQueryOptions(a);return this.queryCache.build(this,w).setData(f,{...s,manual:!0})}setQueriesData(t,n,s){return hr.batch(()=>this.getQueryCache().findAll(t).map(({queryKey:u})=>[u,this.setQueryData(u,n,s)]))}getQueryState(t,n){var s;return(s=this.queryCache.find(t,n))==null?void 0:s.state}removeQueries(t,n){const[s]=Ua(t,n),u=this.queryCache;hr.batch(()=>{u.findAll(s).forEach(h=>{u.remove(h)})})}resetQueries(t,n,s){const[u,h]=Ua(t,n,s),f=this.queryCache,a={type:"active",...u};return hr.batch(()=>(f.findAll(u).forEach(w=>{w.reset()}),this.refetchQueries(a,h)))}cancelQueries(t,n,s){const[u,h={}]=Ua(t,n,s);typeof h.revert>"u"&&(h.revert=!0);const f=hr.batch(()=>this.queryCache.findAll(u).map(a=>a.cancel(h)));return Promise.all(f).then(ws).catch(ws)}invalidateQueries(t,n,s){const[u,h]=Ua(t,n,s);return hr.batch(()=>{var f,a;if(this.queryCache.findAll(u).forEach(b=>{b.invalidate()}),u.refetchType==="none")return Promise.resolve();const w={...u,type:(f=(a=u.refetchType)!=null?a:u.type)!=null?f:"active"};return this.refetchQueries(w,h)})}refetchQueries(t,n,s){const[u,h]=Ua(t,n,s),f=hr.batch(()=>this.queryCache.findAll(u).filter(w=>!w.isDisabled()).map(w=>{var b;return w.fetch(void 0,{...h,cancelRefetch:(b=h==null?void 0:h.cancelRefetch)!=null?b:!0,meta:{refetchPage:u.refetchPage}})}));let a=Promise.all(f).then(ws);return h!=null&&h.throwOnError||(a=a.catch(ws)),a}fetchQuery(t,n,s){const u=zd(t,n,s),h=this.defaultQueryOptions(u);typeof h.retry>"u"&&(h.retry=!1);const f=this.queryCache.build(this,h);return f.isStaleByTime(h.staleTime)?f.fetch(h):Promise.resolve(f.state.data)}prefetchQuery(t,n,s){return this.fetchQuery(t,n,s).then(ws).catch(ws)}fetchInfiniteQuery(t,n,s){const u=zd(t,n,s);return u.behavior=I4(),this.fetchQuery(u)}prefetchInfiniteQuery(t,n,s){return this.fetchInfiniteQuery(t,n,s).then(ws).catch(ws)}resumePausedMutations(){return this.mutationCache.resumePausedMutations()}getQueryCache(){return this.queryCache}getMutationCache(){return this.mutationCache}getLogger(){return this.logger}getDefaultOptions(){return this.defaultOptions}setDefaultOptions(t){this.defaultOptions=t}setQueryDefaults(t,n){const s=this.queryDefaults.find(u=>ru(t)===ru(u.queryKey));s?s.defaultOptions=n:this.queryDefaults.push({queryKey:t,defaultOptions:n})}getQueryDefaults(t){if(!t)return;const n=this.queryDefaults.find(s=>Cg(t,s.queryKey));return n==null?void 0:n.defaultOptions}setMutationDefaults(t,n){const s=this.mutationDefaults.find(u=>ru(t)===ru(u.mutationKey));s?s.defaultOptions=n:this.mutationDefaults.push({mutationKey:t,defaultOptions:n})}getMutationDefaults(t){if(!t)return;const n=this.mutationDefaults.find(s=>Cg(t,s.mutationKey));return n==null?void 0:n.defaultOptions}defaultQueryOptions(t){if(t!=null&&t._defaulted)return t;const n={...this.defaultOptions.queries,...this.getQueryDefaults(t==null?void 0:t.queryKey),...t,_defaulted:!0};return!n.queryHash&&n.queryKey&&(n.queryHash=d1(n.queryKey,n)),typeof n.refetchOnReconnect>"u"&&(n.refetchOnReconnect=n.networkMode!=="always"),typeof n.useErrorBoundary>"u"&&(n.useErrorBoundary=!!n.suspense),n}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...this.defaultOptions.mutations,...this.getMutationDefaults(t==null?void 0:t.mutationKey),...t,_defaulted:!0}}clear(){this.queryCache.clear(),this.mutationCache.clear()}}class D4 extends Lf{constructor(t,n){super(),this.client=t,this.options=n,this.trackedProps=new Set,this.selectError=null,this.bindMethods(),this.setOptions(n)}bindMethods(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.currentQuery.addObserver(this),NC(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return v0(this.currentQuery,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return v0(this.currentQuery,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.clearStaleTimeout(),this.clearRefetchInterval(),this.currentQuery.removeObserver(this)}setOptions(t,n){const s=this.options,u=this.currentQuery;if(this.options=this.client.defaultQueryOptions(t),m0(s,this.options)||this.client.getQueryCache().notify({type:"observerOptionsUpdated",query:this.currentQuery,observer:this}),typeof this.options.enabled<"u"&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=s.queryKey),this.updateQuery();const h=this.hasListeners();h&&BC(this.currentQuery,u,this.options,s)&&this.executeFetch(),this.updateResult(n),h&&(this.currentQuery!==u||this.options.enabled!==s.enabled||this.options.staleTime!==s.staleTime)&&this.updateStaleTimeout();const f=this.computeRefetchInterval();h&&(this.currentQuery!==u||this.options.enabled!==s.enabled||f!==this.currentRefetchInterval)&&this.updateRefetchInterval(f)}getOptimisticResult(t){const n=this.client.getQueryCache().build(this.client,t),s=this.createResult(n,t);return L4(this,s,t)&&(this.currentResult=s,this.currentResultOptions=this.options,this.currentResultState=this.currentQuery.state),s}getCurrentResult(){return this.currentResult}trackResult(t){const n={};return Object.keys(t).forEach(s=>{Object.defineProperty(n,s,{configurable:!1,enumerable:!0,get:()=>(this.trackedProps.add(s),t[s])})}),n}getCurrentQuery(){return this.currentQuery}remove(){this.client.getQueryCache().remove(this.currentQuery)}refetch({refetchPage:t,...n}={}){return this.fetch({...n,meta:{refetchPage:t}})}fetchOptimistic(t){const n=this.client.defaultQueryOptions(t),s=this.client.getQueryCache().build(this.client,n);return s.isFetchingOptimistic=!0,s.fetch().then(()=>this.createResult(s,n))}fetch(t){var n;return this.executeFetch({...t,cancelRefetch:(n=t.cancelRefetch)!=null?n:!0}).then(()=>(this.updateResult(),this.currentResult))}executeFetch(t){this.updateQuery();let n=this.currentQuery.fetch(this.options,t);return t!=null&&t.throwOnError||(n=n.catch(ws)),n}updateStaleTimeout(){if(this.clearStaleTimeout(),xf||this.currentResult.isStale||!p0(this.options.staleTime))return;const n=Xk(this.currentResult.dataUpdatedAt,this.options.staleTime)+1;this.staleTimeoutId=setTimeout(()=>{this.currentResult.isStale||this.updateResult()},n)}computeRefetchInterval(){var t;return typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.currentResult.data,this.currentQuery):(t=this.options.refetchInterval)!=null?t:!1}updateRefetchInterval(t){this.clearRefetchInterval(),this.currentRefetchInterval=t,!(xf||this.options.enabled===!1||!p0(this.currentRefetchInterval)||this.currentRefetchInterval===0)&&(this.refetchIntervalId=setInterval(()=>{(this.options.refetchIntervalInBackground||Tg.isFocused())&&this.executeFetch()},this.currentRefetchInterval))}updateTimers(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())}clearStaleTimeout(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)}clearRefetchInterval(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)}createResult(t,n){const s=this.currentQuery,u=this.options,h=this.currentResult,f=this.currentResultState,a=this.currentResultOptions,w=t!==s,b=w?t.state:this.currentQueryInitialState,P=w?this.currentResult:this.previousQueryResult,{state:A}=t;let{dataUpdatedAt:M,error:B,errorUpdatedAt:V,fetchStatus:j,status:K}=A,F=!1,N=!1,W;if(n._optimisticResults){const Se=this.hasListeners(),qe=!Se&&NC(t,n),ze=Se&&BC(t,s,n,u);(qe||ze)&&(j=Ly(t.options.networkMode)?"fetching":"paused",M||(K="loading")),n._optimisticResults==="isRestoring"&&(j="idle")}if(n.keepPreviousData&&!A.dataUpdatedAt&&P!=null&&P.isSuccess&&K!=="error")W=P.data,M=P.dataUpdatedAt,K=P.status,F=!0;else if(n.select&&typeof A.data<"u")if(h&&A.data===(f==null?void 0:f.data)&&n.select===this.selectFn)W=this.selectResult;else try{this.selectFn=n.select,W=n.select(A.data),W=y0(h==null?void 0:h.data,W,n),this.selectResult=W,this.selectError=null}catch(Se){this.selectError=Se}else W=A.data;if(typeof n.placeholderData<"u"&&typeof W>"u"&&K==="loading"){let Se;if(h!=null&&h.isPlaceholderData&&n.placeholderData===(a==null?void 0:a.placeholderData))Se=h.data;else if(Se=typeof n.placeholderData=="function"?n.placeholderData():n.placeholderData,n.select&&typeof Se<"u")try{Se=n.select(Se),this.selectError=null}catch(qe){this.selectError=qe}typeof Se<"u"&&(K="success",W=y0(h==null?void 0:h.data,Se,n),N=!0)}this.selectError&&(B=this.selectError,W=this.selectResult,V=Date.now(),K="error");const ne=j==="fetching",pe=K==="loading",Ce=K==="error";return{status:K,fetchStatus:j,isLoading:pe,isSuccess:K==="success",isError:Ce,isInitialLoading:pe&&ne,data:W,dataUpdatedAt:M,error:B,errorUpdatedAt:V,failureCount:A.fetchFailureCount,failureReason:A.fetchFailureReason,errorUpdateCount:A.errorUpdateCount,isFetched:A.dataUpdateCount>0||A.errorUpdateCount>0,isFetchedAfterMount:A.dataUpdateCount>b.dataUpdateCount||A.errorUpdateCount>b.errorUpdateCount,isFetching:ne,isRefetching:ne&&!pe,isLoadingError:Ce&&A.dataUpdatedAt===0,isPaused:j==="paused",isPlaceholderData:N,isPreviousData:F,isRefetchError:Ce&&A.dataUpdatedAt!==0,isStale:p1(t,n),refetch:this.refetch,remove:this.remove}}updateResult(t){const n=this.currentResult,s=this.createResult(this.currentQuery,this.options);if(this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,m0(s,n))return;this.currentResult=s;const u={cache:!0},h=()=>{if(!n)return!0;const{notifyOnChangeProps:f}=this.options,a=typeof f=="function"?f():f;if(a==="all"||!a&&!this.trackedProps.size)return!0;const w=new Set(a??this.trackedProps);return this.options.useErrorBoundary&&w.add("error"),Object.keys(this.currentResult).some(b=>{const P=b;return this.currentResult[P]!==n[P]&&w.has(P)})};(t==null?void 0:t.listeners)!==!1&&h()&&(u.listeners=!0),this.notify({...u,...t})}updateQuery(){const t=this.client.getQueryCache().build(this.client,this.options);if(t===this.currentQuery)return;const n=this.currentQuery;this.currentQuery=t,this.currentQueryInitialState=t.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(n==null||n.removeObserver(this),t.addObserver(this))}onQueryUpdate(t){const n={};t.type==="success"?n.onSuccess=!t.manual:t.type==="error"&&!Lm(t.error)&&(n.onError=!0),this.updateResult(n),this.hasListeners()&&this.updateTimers()}notify(t){hr.batch(()=>{if(t.onSuccess){var n,s,u,h;(n=(s=this.options).onSuccess)==null||n.call(s,this.currentResult.data),(u=(h=this.options).onSettled)==null||u.call(h,this.currentResult.data,null)}else if(t.onError){var f,a,w,b;(f=(a=this.options).onError)==null||f.call(a,this.currentResult.error),(w=(b=this.options).onSettled)==null||w.call(b,void 0,this.currentResult.error)}t.listeners&&this.listeners.forEach(({listener:P})=>{P(this.currentResult)}),t.cache&&this.client.getQueryCache().notify({query:this.currentQuery,type:"observerResultsUpdated"})})}}function z4(e,t){return t.enabled!==!1&&!e.state.dataUpdatedAt&&!(e.state.status==="error"&&t.retryOnMount===!1)}function NC(e,t){return z4(e,t)||e.state.dataUpdatedAt>0&&v0(e,t,t.refetchOnMount)}function v0(e,t,n){if(t.enabled!==!1){const s=typeof n=="function"?n(e):n;return s==="always"||s!==!1&&p1(e,t)}return!1}function BC(e,t,n,s){return n.enabled!==!1&&(e!==t||s.enabled===!1)&&(!n.suspense||e.state.status!=="error")&&p1(e,n)}function p1(e,t){return e.isStaleByTime(t.staleTime)}function L4(e,t,n){return n.keepPreviousData?!1:n.placeholderData!==void 0?t.isPlaceholderData:!m0(e.getCurrentResult(),t)}const O4=Pk.useSyncExternalStore,VC=X.createContext(void 0),rI=X.createContext(!1);function iI(e,t){return e||(t&&typeof window<"u"?(window.ReactQueryClientContext||(window.ReactQueryClientContext=VC),window.ReactQueryClientContext):VC)}const F4=({context:e}={})=>{const t=X.useContext(iI(e,X.useContext(rI)));if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},N4=({client:e,children:t,context:n,contextSharing:s=!1})=>{X.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]);const u=iI(n,s);return X.createElement(rI.Provider,{value:!n&&s},X.createElement(u.Provider,{value:e},t))},sI=X.createContext(!1),B4=()=>X.useContext(sI);sI.Provider;function V4(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}const $4=X.createContext(V4()),j4=()=>X.useContext($4);function U4(e,t){return typeof e=="function"?e(...t):!!e}const q4=(e,t)=>{(e.suspense||e.useErrorBoundary)&&(t.isReset()||(e.retryOnMount=!1))},G4=e=>{X.useEffect(()=>{e.clearReset()},[e])},Z4=({result:e,errorResetBoundary:t,useErrorBoundary:n,query:s})=>e.isError&&!t.isReset()&&!e.isFetching&&U4(n,[e.error,s]),W4=e=>{e.suspense&&typeof e.staleTime!="number"&&(e.staleTime=1e3)},H4=(e,t)=>e.isLoading&&e.isFetching&&!t,K4=(e,t,n)=>(e==null?void 0:e.suspense)&&H4(t,n),X4=(e,t,n)=>t.fetchOptimistic(e).then(({data:s})=>{e.onSuccess==null||e.onSuccess(s),e.onSettled==null||e.onSettled(s,null)}).catch(s=>{n.clearReset(),e.onError==null||e.onError(s),e.onSettled==null||e.onSettled(void 0,s)});function Q4(e,t){const n=F4({context:e.context}),s=B4(),u=j4(),h=n.defaultQueryOptions(e);h._optimisticResults=s?"isRestoring":"optimistic",h.onError&&(h.onError=hr.batchCalls(h.onError)),h.onSuccess&&(h.onSuccess=hr.batchCalls(h.onSuccess)),h.onSettled&&(h.onSettled=hr.batchCalls(h.onSettled)),W4(h),q4(h,u),G4(u);const[f]=X.useState(()=>new t(n,h)),a=f.getOptimisticResult(h);if(O4(X.useCallback(w=>{const b=s?()=>{}:f.subscribe(hr.batchCalls(w));return f.updateResult(),b},[f,s]),()=>f.getCurrentResult(),()=>f.getCurrentResult()),X.useEffect(()=>{f.setOptions(h,{listeners:!1})},[h,f]),K4(h,a,s))throw X4(h,f,u);if(Z4({result:a,errorResetBoundary:u,useErrorBoundary:h.useErrorBoundary,query:f.getCurrentQuery()}))throw a.error;return h.notifyOnChangeProps?a:f.trackResult(a)}function Y4(e,t,n){const s=zd(e,t,n);return Q4(s,D4)}function Om(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Om=function(n){return typeof n}:Om=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Om(e)}function J4(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $C(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function eN(e,t,n){return t&&$C(e.prototype,t),n&&$C(e,n),e}function tN(e,t){return t&&(Om(t)==="object"||typeof t=="function")?t:Fm(e)}function _0(e){return _0=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},_0(e)}function Fm(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nN(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x0(e,t)}function x0(e,t){return x0=Object.setPrototypeOf||function(s,u){return s.__proto__=u,s},x0(e,t)}function Nm(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var oI=function(e){nN(t,e);function t(){var n,s;J4(this,t);for(var u=arguments.length,h=new Array(u),f=0;f<u;f++)h[f]=arguments[f];return s=tN(this,(n=_0(t)).call.apply(n,[this].concat(h))),Nm(Fm(s),"state",{bootstrapped:!1}),Nm(Fm(s),"_unsubscribe",void 0),Nm(Fm(s),"handlePersistorState",function(){var a=s.props.persistor,w=a.getState(),b=w.bootstrapped;b&&(s.props.onBeforeLift?Promise.resolve(s.props.onBeforeLift()).finally(function(){return s.setState({bootstrapped:!0})}):s.setState({bootstrapped:!0}),s._unsubscribe&&s._unsubscribe())}),s}return eN(t,[{key:"componentDidMount",value:function(){this._unsubscribe=this.props.persistor.subscribe(this.handlePersistorState),this.handlePersistorState()}},{key:"componentWillUnmount",value:function(){this._unsubscribe&&this._unsubscribe()}},{key:"render",value:function(){return typeof this.props.children=="function"?this.props.children(this.state.bootstrapped):this.state.bootstrapped?this.props.children:this.props.loading}}]),t}(X.PureComponent);Nm(oI,"defaultProps",{children:null,loading:null});function Ks(e){for(var t=arguments.length,n=Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(u){return"'"+u+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function fl(e){return!!e&&!!e[Bn]}function ca(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var s=Object.getPrototypeOf(n);if(s===null)return!0;var u=Object.hasOwnProperty.call(s,"constructor")&&s.constructor;return u===Object||typeof u=="function"&&Function.toString.call(u)===hN}(e)||Array.isArray(e)||!!e[HC]||!!(!((t=e.constructor)===null||t===void 0)&&t[HC])||m1(e)||g1(e))}function vu(e,t,n){n===void 0&&(n=!1),oh(e)===0?(n?Object.keys:Fc)(e).forEach(function(s){n&&typeof s=="symbol"||t(s,e[s],e)}):e.forEach(function(s,u){return t(u,s,e)})}function oh(e){var t=e[Bn];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:m1(e)?2:g1(e)?3:0}function Oc(e,t){return oh(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function rN(e,t){return oh(e)===2?e.get(t):e[t]}function aI(e,t,n){var s=oh(e);s===2?e.set(t,n):s===3?e.add(n):e[t]=n}function lI(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function m1(e){return uN&&e instanceof Map}function g1(e){return cN&&e instanceof Set}function Hl(e){return e.o||e.t}function y1(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=cI(e);delete t[Bn];for(var n=Fc(t),s=0;s<n.length;s++){var u=n[s],h=t[u];h.writable===!1&&(h.writable=!0,h.configurable=!0),(h.get||h.set)&&(t[u]={configurable:!0,writable:!0,enumerable:h.enumerable,value:e[u]})}return Object.create(Object.getPrototypeOf(e),t)}function v1(e,t){return t===void 0&&(t=!1),_1(e)||fl(e)||!ca(e)||(oh(e)>1&&(e.set=e.add=e.clear=e.delete=iN),Object.freeze(e),t&&vu(e,function(n,s){return v1(s,!0)},!0)),e}function iN(){Ks(2)}function _1(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function bo(e){var t=C0[e];return t||Ks(18,e),t}function sN(e,t){C0[e]||(C0[e]=t)}function w0(){return wf}function O_(e,t){t&&(bo("Patches"),e.u=[],e.s=[],e.v=t)}function Pg(e){b0(e),e.p.forEach(oN),e.p=null}function b0(e){e===wf&&(wf=e.l)}function jC(e){return wf={p:[],l:wf,h:e,m:!0,_:0}}function oN(e){var t=e[Bn];t.i===0||t.i===1?t.j():t.g=!0}function F_(e,t){t._=t.p.length;var n=t.p[0],s=e!==void 0&&e!==n;return t.h.O||bo("ES5").S(t,e,s),s?(n[Bn].P&&(Pg(t),Ks(4)),ca(e)&&(e=Ag(t,e),t.l||kg(t,e)),t.u&&bo("Patches").M(n[Bn].t,e,t.u,t.s)):e=Ag(t,n,[]),Pg(t),t.u&&t.v(t.u,t.s),e!==uI?e:void 0}function Ag(e,t,n){if(_1(t))return t;var s=t[Bn];if(!s)return vu(t,function(a,w){return UC(e,s,t,a,w,n)},!0),t;if(s.A!==e)return t;if(!s.P)return kg(e,s.t,!0),s.t;if(!s.I){s.I=!0,s.A._--;var u=s.i===4||s.i===5?s.o=y1(s.k):s.o,h=u,f=!1;s.i===3&&(h=new Set(u),u.clear(),f=!0),vu(h,function(a,w){return UC(e,s,u,a,w,n,f)}),kg(e,u,!1),n&&e.u&&bo("Patches").N(s,n,e.u,e.s)}return s.o}function UC(e,t,n,s,u,h,f){if(fl(u)){var a=Ag(e,u,h&&t&&t.i!==3&&!Oc(t.R,s)?h.concat(s):void 0);if(aI(n,s,a),!fl(a))return;e.m=!1}else f&&n.add(u);if(ca(u)&&!_1(u)){if(!e.h.D&&e._<1)return;Ag(e,u),t&&t.A.l||kg(e,u)}}function kg(e,t,n){n===void 0&&(n=!1),!e.l&&e.h.D&&e.m&&v1(t,n)}function N_(e,t){var n=e[Bn];return(n?Hl(n):e)[t]}function qC(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var s=Object.getOwnPropertyDescriptor(n,t);if(s)return s;n=Object.getPrototypeOf(n)}}function Za(e){e.P||(e.P=!0,e.l&&Za(e.l))}function B_(e){e.o||(e.o=y1(e.t))}function S0(e,t,n){var s=m1(t)?bo("MapSet").F(t,n):g1(t)?bo("MapSet").T(t,n):e.O?function(u,h){var f=Array.isArray(u),a={i:f?1:0,A:h?h.A:w0(),P:!1,I:!1,R:{},l:h,t:u,k:null,o:null,j:null,C:!1},w=a,b=bf;f&&(w=[a],b=Ld);var P=Proxy.revocable(w,b),A=P.revoke,M=P.proxy;return a.k=M,a.j=A,M}(t,n):bo("ES5").J(t,n);return(n?n.A:w0()).p.push(s),s}function aN(e){return fl(e)||Ks(22,e),function t(n){if(!ca(n))return n;var s,u=n[Bn],h=oh(n);if(u){if(!u.P&&(u.i<4||!bo("ES5").K(u)))return u.t;u.I=!0,s=GC(n,h),u.I=!1}else s=GC(n,h);return vu(s,function(f,a){u&&rN(u.t,f)===a||aI(s,f,t(a))}),h===3?new Set(s):s}(e)}function GC(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return y1(e)}function lN(){function e(h,f){var a=u[h];return a?a.enumerable=f:u[h]=a={configurable:!0,enumerable:f,get:function(){var w=this[Bn];return bf.get(w,h)},set:function(w){var b=this[Bn];bf.set(b,h,w)}},a}function t(h){for(var f=h.length-1;f>=0;f--){var a=h[f][Bn];if(!a.P)switch(a.i){case 5:s(a)&&Za(a);break;case 4:n(a)&&Za(a)}}}function n(h){for(var f=h.t,a=h.k,w=Fc(a),b=w.length-1;b>=0;b--){var P=w[b];if(P!==Bn){var A=f[P];if(A===void 0&&!Oc(f,P))return!0;var M=a[P],B=M&&M[Bn];if(B?B.t!==A:!lI(M,A))return!0}}var V=!!f[Bn];return w.length!==Fc(f).length+(V?0:1)}function s(h){var f=h.k;if(f.length!==h.t.length)return!0;var a=Object.getOwnPropertyDescriptor(f,f.length-1);if(a&&!a.get)return!0;for(var w=0;w<f.length;w++)if(!f.hasOwnProperty(w))return!0;return!1}var u={};sN("ES5",{J:function(h,f){var a=Array.isArray(h),w=function(P,A){if(P){for(var M=Array(A.length),B=0;B<A.length;B++)Object.defineProperty(M,""+B,e(B,!0));return M}var V=cI(A);delete V[Bn];for(var j=Fc(V),K=0;K<j.length;K++){var F=j[K];V[F]=e(F,P||!!V[F].enumerable)}return Object.create(Object.getPrototypeOf(A),V)}(a,h),b={i:a?5:4,A:f?f.A:w0(),P:!1,I:!1,R:{},l:f,t:h,k:w,o:null,g:!1,C:!1};return Object.defineProperty(w,Bn,{value:b,writable:!0}),w},S:function(h,f,a){a?fl(f)&&f[Bn].A===h&&t(h.p):(h.u&&function w(b){if(b&&typeof b=="object"){var P=b[Bn];if(P){var A=P.t,M=P.k,B=P.R,V=P.i;if(V===4)vu(M,function(W){W!==Bn&&(A[W]!==void 0||Oc(A,W)?B[W]||w(M[W]):(B[W]=!0,Za(P)))}),vu(A,function(W){M[W]!==void 0||Oc(M,W)||(B[W]=!1,Za(P))});else if(V===5){if(s(P)&&(Za(P),B.length=!0),M.length<A.length)for(var j=M.length;j<A.length;j++)B[j]=!1;else for(var K=A.length;K<M.length;K++)B[K]=!0;for(var F=Math.min(M.length,A.length),N=0;N<F;N++)M.hasOwnProperty(N)||(B[N]=!0),B[N]===void 0&&w(M[N])}}}}(h.p[0]),t(h.p))},K:function(h){return h.i===4?n(h):s(h)}})}var ZC,wf,x1=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",uN=typeof Map<"u",cN=typeof Set<"u",WC=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",uI=x1?Symbol.for("immer-nothing"):((ZC={})["immer-nothing"]=!0,ZC),HC=x1?Symbol.for("immer-draftable"):"__$immer_draftable",Bn=x1?Symbol.for("immer-state"):"__$immer_state",hN=""+Object.prototype.constructor,Fc=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,cI=Object.getOwnPropertyDescriptors||function(e){var t={};return Fc(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},C0={},bf={get:function(e,t){if(t===Bn)return e;var n=Hl(e);if(!Oc(n,t))return function(u,h,f){var a,w=qC(h,f);return w?"value"in w?w.value:(a=w.get)===null||a===void 0?void 0:a.call(u.k):void 0}(e,n,t);var s=n[t];return e.I||!ca(s)?s:s===N_(e.t,t)?(B_(e),e.o[t]=S0(e.A.h,s,e)):s},has:function(e,t){return t in Hl(e)},ownKeys:function(e){return Reflect.ownKeys(Hl(e))},set:function(e,t,n){var s=qC(Hl(e),t);if(s!=null&&s.set)return s.set.call(e.k,n),!0;if(!e.P){var u=N_(Hl(e),t),h=u==null?void 0:u[Bn];if(h&&h.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(lI(n,u)&&(n!==void 0||Oc(e.t,t)))return!0;B_(e),Za(e)}return e.o[t]===n&&(n!==void 0||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return N_(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,B_(e),Za(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=Hl(e),s=Reflect.getOwnPropertyDescriptor(n,t);return s&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:s.enumerable,value:n[t]}},defineProperty:function(){Ks(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Ks(12)}},Ld={};vu(bf,function(e,t){Ld[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),Ld.deleteProperty=function(e,t){return Ld.set.call(this,e,t,void 0)},Ld.set=function(e,t,n){return bf.set.call(this,e[0],t,n,e[0])};var dN=function(){function e(n){var s=this;this.O=WC,this.D=!0,this.produce=function(u,h,f){if(typeof u=="function"&&typeof h!="function"){var a=h;h=u;var w=s;return function(j){var K=this;j===void 0&&(j=a);for(var F=arguments.length,N=Array(F>1?F-1:0),W=1;W<F;W++)N[W-1]=arguments[W];return w.produce(j,function(ne){var pe;return(pe=h).call.apply(pe,[K,ne].concat(N))})}}var b;if(typeof h!="function"&&Ks(6),f!==void 0&&typeof f!="function"&&Ks(7),ca(u)){var P=jC(s),A=S0(s,u,void 0),M=!0;try{b=h(A),M=!1}finally{M?Pg(P):b0(P)}return typeof Promise<"u"&&b instanceof Promise?b.then(function(j){return O_(P,f),F_(j,P)},function(j){throw Pg(P),j}):(O_(P,f),F_(b,P))}if(!u||typeof u!="object"){if((b=h(u))===void 0&&(b=u),b===uI&&(b=void 0),s.D&&v1(b,!0),f){var B=[],V=[];bo("Patches").M(u,b,B,V),f(B,V)}return b}Ks(21,u)},this.produceWithPatches=function(u,h){if(typeof u=="function")return function(b){for(var P=arguments.length,A=Array(P>1?P-1:0),M=1;M<P;M++)A[M-1]=arguments[M];return s.produceWithPatches(b,function(B){return u.apply(void 0,[B].concat(A))})};var f,a,w=s.produce(u,h,function(b,P){f=b,a=P});return typeof Promise<"u"&&w instanceof Promise?w.then(function(b){return[b,f,a]}):[w,f,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){ca(n)||Ks(8),fl(n)&&(n=aN(n));var s=jC(this),u=S0(this,n,void 0);return u[Bn].C=!0,b0(s),u},t.finishDraft=function(n,s){var u=n&&n[Bn],h=u.A;return O_(h,s),F_(void 0,h)},t.setAutoFreeze=function(n){this.D=n},t.setUseProxies=function(n){n&&!WC&&Ks(20),this.O=n},t.applyPatches=function(n,s){var u;for(u=s.length-1;u>=0;u--){var h=s[u];if(h.path.length===0&&h.op==="replace"){n=h.value;break}}u>-1&&(s=s.slice(u+1));var f=bo("Patches").$;return fl(n)?f(n,s):this.produce(n,function(a){return f(a,s)})},e}(),ns=new dN,hI=ns.produce;ns.produceWithPatches.bind(ns);ns.setAutoFreeze.bind(ns);ns.setUseProxies.bind(ns);ns.applyPatches.bind(ns);ns.createDraft.bind(ns);ns.finishDraft.bind(ns);function Sf(e){"@babel/helpers - typeof";return Sf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sf(e)}function fN(e,t){if(Sf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Sf(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pN(e){var t=fN(e,"string");return Sf(t)=="symbol"?t:t+""}function mN(e,t,n){return t=pN(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function KC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,s)}return n}function XC(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?KC(Object(n),!0).forEach(function(s){mN(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):KC(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function ii(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var QC=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),V_=function(){return Math.random().toString(36).substring(7).split("").join(".")},Ig={INIT:"@@redux/INIT"+V_(),REPLACE:"@@redux/REPLACE"+V_(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+V_()}};function gN(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function w1(e,t,n){var s;if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(ii(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(ii(1));return n(w1)(e,t)}if(typeof e!="function")throw new Error(ii(2));var u=e,h=t,f=[],a=f,w=!1;function b(){a===f&&(a=f.slice())}function P(){if(w)throw new Error(ii(3));return h}function A(j){if(typeof j!="function")throw new Error(ii(4));if(w)throw new Error(ii(5));var K=!0;return b(),a.push(j),function(){if(K){if(w)throw new Error(ii(6));K=!1,b();var N=a.indexOf(j);a.splice(N,1),f=null}}}function M(j){if(!gN(j))throw new Error(ii(7));if(typeof j.type>"u")throw new Error(ii(8));if(w)throw new Error(ii(9));try{w=!0,h=u(h,j)}finally{w=!1}for(var K=f=a,F=0;F<K.length;F++){var N=K[F];N()}return j}function B(j){if(typeof j!="function")throw new Error(ii(10));u=j,M({type:Ig.REPLACE})}function V(){var j,K=A;return j={subscribe:function(N){if(typeof N!="object"||N===null)throw new Error(ii(11));function W(){N.next&&N.next(P())}W();var ne=K(W);return{unsubscribe:ne}}},j[QC]=function(){return this},j}return M({type:Ig.INIT}),s={dispatch:M,subscribe:A,getState:P,replaceReducer:B},s[QC]=V,s}function yN(e){Object.keys(e).forEach(function(t){var n=e[t],s=n(void 0,{type:Ig.INIT});if(typeof s>"u")throw new Error(ii(12));if(typeof n(void 0,{type:Ig.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(ii(13))})}function dI(e){for(var t=Object.keys(e),n={},s=0;s<t.length;s++){var u=t[s];typeof e[u]=="function"&&(n[u]=e[u])}var h=Object.keys(n),f;try{yN(n)}catch(a){f=a}return function(w,b){if(w===void 0&&(w={}),f)throw f;for(var P=!1,A={},M=0;M<h.length;M++){var B=h[M],V=n[B],j=w[B],K=V(j,b);if(typeof K>"u")throw b&&b.type,new Error(ii(14));A[B]=K,P=P||K!==j}return P=P||h.length!==Object.keys(w).length,P?A:w}}function Mg(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===0?function(s){return s}:t.length===1?t[0]:t.reduce(function(s,u){return function(){return s(u.apply(void 0,arguments))}})}function vN(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(s){return function(){var u=s.apply(void 0,arguments),h=function(){throw new Error(ii(15))},f={getState:u.getState,dispatch:function(){return h.apply(void 0,arguments)}},a=t.map(function(w){return w(f)});return h=Mg.apply(void 0,a)(u.dispatch),XC(XC({},u),{},{dispatch:h})}}}function fI(e){var t=function(s){var u=s.dispatch,h=s.getState;return function(f){return function(a){return typeof a=="function"?a(u,h,e):f(a)}}};return t}var pI=fI();pI.withExtraArgument=fI;const YC=pI;var mI=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,u){s.__proto__=u}||function(s,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(s[h]=u[h])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function s(){this.constructor=t}t.prototype=n===null?Object.create(n):(s.prototype=n.prototype,new s)}}(),_N=globalThis&&globalThis.__generator||function(e,t){var n={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},s,u,h,f;return f={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function a(b){return function(P){return w([b,P])}}function w(b){if(s)throw new TypeError("Generator is already executing.");for(;n;)try{if(s=1,u&&(h=b[0]&2?u.return:b[0]?u.throw||((h=u.return)&&h.call(u),0):u.next)&&!(h=h.call(u,b[1])).done)return h;switch(u=0,h&&(b=[b[0]&2,h.value]),b[0]){case 0:case 1:h=b;break;case 4:return n.label++,{value:b[1],done:!1};case 5:n.label++,u=b[1],b=[0];continue;case 7:b=n.ops.pop(),n.trys.pop();continue;default:if(h=n.trys,!(h=h.length>0&&h[h.length-1])&&(b[0]===6||b[0]===2)){n=0;continue}if(b[0]===3&&(!h||b[1]>h[0]&&b[1]<h[3])){n.label=b[1];break}if(b[0]===6&&n.label<h[1]){n.label=h[1],h=b;break}if(h&&n.label<h[2]){n.label=h[2],n.ops.push(b);break}h[2]&&n.ops.pop(),n.trys.pop();continue}b=t.call(e,n)}catch(P){b=[6,P],u=0}finally{s=h=0}if(b[0]&5)throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}},Hc=globalThis&&globalThis.__spreadArray||function(e,t){for(var n=0,s=t.length,u=e.length;n<s;n++,u++)e[u]=t[n];return e},xN=Object.defineProperty,wN=Object.defineProperties,bN=Object.getOwnPropertyDescriptors,JC=Object.getOwnPropertySymbols,SN=Object.prototype.hasOwnProperty,CN=Object.prototype.propertyIsEnumerable,eT=function(e,t,n){return t in e?xN(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},ll=function(e,t){for(var n in t||(t={}))SN.call(t,n)&&eT(e,n,t[n]);if(JC)for(var s=0,u=JC(t);s<u.length;s++){var n=u[s];CN.call(t,n)&&eT(e,n,t[n])}return e},$_=function(e,t){return wN(e,bN(t))},TN=function(e,t,n){return new Promise(function(s,u){var h=function(w){try{a(n.next(w))}catch(b){u(b)}},f=function(w){try{a(n.throw(w))}catch(b){u(b)}},a=function(w){return w.done?s(w.value):Promise.resolve(w.value).then(h,f)};a((n=n.apply(e,t)).next())})},EN=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Mg:Mg.apply(null,arguments)};function PN(e){if(typeof e!="object"||e===null)return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var n=t;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return t===n}function ul(e,t){function n(){for(var s=[],u=0;u<arguments.length;u++)s[u]=arguments[u];if(t){var h=t.apply(void 0,s);if(!h)throw new Error("prepareAction did not return an object");return ll(ll({type:e,payload:h.payload},"meta"in h&&{meta:h.meta}),"error"in h&&{error:h.error})}return{type:e,payload:s[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(s){return s.type===e},n}var AN=function(e){mI(t,e);function t(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];var u=e.apply(this,n)||this;return Object.setPrototypeOf(u,t.prototype),u}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,Hc([void 0],n[0].concat(this)))):new(t.bind.apply(t,Hc([void 0],n.concat(this))))},t}(Array),kN=function(e){mI(t,e);function t(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];var u=e.apply(this,n)||this;return Object.setPrototypeOf(u,t.prototype),u}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,Hc([void 0],n[0].concat(this)))):new(t.bind.apply(t,Hc([void 0],n.concat(this))))},t}(Array);function T0(e){return ca(e)?hI(e,function(){}):e}function IN(e){return typeof e=="boolean"}function MN(){return function(t){return RN(t)}}function RN(e){e===void 0&&(e={});var t=e.thunk,n=t===void 0?!0:t;e.immutableCheck,e.serializableCheck,e.actionCreatorCheck;var s=new AN;return n&&(IN(n)?s.push(YC):s.push(YC.withExtraArgument(n.extraArgument))),s}var DN=!0;function zN(e){var t=MN(),n=e||{},s=n.reducer,u=s===void 0?void 0:s,h=n.middleware,f=h===void 0?t():h,a=n.devTools,w=a===void 0?!0:a,b=n.preloadedState,P=b===void 0?void 0:b,A=n.enhancers,M=A===void 0?void 0:A,B;if(typeof u=="function")B=u;else if(PN(u))B=dI(u);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var V=f;typeof V=="function"&&(V=V(t));var j=vN.apply(void 0,V),K=Mg;w&&(K=EN(ll({trace:!DN},typeof w=="object"&&w)));var F=new kN(j),N=F;Array.isArray(M)?N=Hc([j],M):typeof M=="function"&&(N=M(F));var W=K.apply(void 0,N);return w1(B,P,W)}function gI(e){var t={},n=[],s,u={addCase:function(h,f){var a=typeof h=="string"?h:h.type;if(!a)throw new Error("`builder.addCase` cannot be called with an empty action type");if(a in t)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return t[a]=f,u},addMatcher:function(h,f){return n.push({matcher:h,reducer:f}),u},addDefaultCase:function(h){return s=h,u}};return e(u),[t,n,s]}function LN(e){return typeof e=="function"}function ON(e,t,n,s){n===void 0&&(n=[]);var u=typeof t=="function"?gI(t):[t,n,s],h=u[0],f=u[1],a=u[2],w;if(LN(e))w=function(){return T0(e())};else{var b=T0(e);w=function(){return b}}function P(A,M){A===void 0&&(A=w());var B=Hc([h[M.type]],f.filter(function(V){var j=V.matcher;return j(M)}).map(function(V){var j=V.reducer;return j}));return B.filter(function(V){return!!V}).length===0&&(B=[a]),B.reduce(function(V,j){if(j)if(fl(V)){var K=V,F=j(K,M);return F===void 0?V:F}else{if(ca(V))return hI(V,function(N){return j(N,M)});var F=j(V,M);if(F===void 0){if(V===null)return V;throw Error("A case reducer on a non-draftable value must not return undefined")}return F}return V},A)}return P.getInitialState=w,P}function FN(e,t){return e+"/"+t}function yI(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");typeof process<"u";var n=typeof e.initialState=="function"?e.initialState:T0(e.initialState),s=e.reducers||{},u=Object.keys(s),h={},f={},a={};u.forEach(function(P){var A=s[P],M=FN(t,P),B,V;"reducer"in A?(B=A.reducer,V=A.prepare):B=A,h[P]=B,f[M]=B,a[P]=V?ul(M,V):ul(M)});function w(){var P=typeof e.extraReducers=="function"?gI(e.extraReducers):[e.extraReducers],A=P[0],M=A===void 0?{}:A,B=P[1],V=B===void 0?[]:B,j=P[2],K=j===void 0?void 0:j,F=ll(ll({},M),f);return ON(n,function(N){for(var W in F)N.addCase(W,F[W]);for(var ne=0,pe=V;ne<pe.length;ne++){var Ce=pe[ne];N.addMatcher(Ce.matcher,Ce.reducer)}K&&N.addDefaultCase(K)})}var b;return{name:t,reducer:function(P,A){return b||(b=w()),b(P,A)},actions:a,caseReducers:h,getInitialState:function(){return b||(b=w()),b.getInitialState()}}}var NN="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",BN=function(e){e===void 0&&(e=21);for(var t="",n=e;n--;)t+=NN[Math.random()*64|0];return t},VN=["name","message","stack","code"],j_=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),tT=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),$N=function(e){if(typeof e=="object"&&e!==null){for(var t={},n=0,s=VN;n<s.length;n++){var u=s[n];typeof e[u]=="string"&&(t[u]=e[u])}return t}return{message:String(e)}};(function(){function e(t,n,s){var u=ul(t+"/fulfilled",function(b,P,A,M){return{payload:b,meta:$_(ll({},M||{}),{arg:A,requestId:P,requestStatus:"fulfilled"})}}),h=ul(t+"/pending",function(b,P,A){return{payload:void 0,meta:$_(ll({},A||{}),{arg:P,requestId:b,requestStatus:"pending"})}}),f=ul(t+"/rejected",function(b,P,A,M,B){return{payload:M,error:(s&&s.serializeError||$N)(b||"Rejected"),meta:$_(ll({},B||{}),{arg:A,requestId:P,rejectedWithValue:!!M,requestStatus:"rejected",aborted:(b==null?void 0:b.name)==="AbortError",condition:(b==null?void 0:b.name)==="ConditionError"})}}),a=typeof AbortController<"u"?AbortController:function(){function b(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return b.prototype.abort=function(){},b}();function w(b){return function(P,A,M){var B=s!=null&&s.idGenerator?s.idGenerator(b):BN(),V=new a,j;function K(N){j=N,V.abort()}var F=function(){return TN(this,null,function(){var N,W,ne,pe,Ce,Ie,Se;return _N(this,function(qe){switch(qe.label){case 0:return qe.trys.push([0,4,,5]),pe=(N=s==null?void 0:s.condition)==null?void 0:N.call(s,b,{getState:A,extra:M}),UN(pe)?[4,pe]:[3,2];case 1:pe=qe.sent(),qe.label=2;case 2:if(pe===!1||V.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return Ce=new Promise(function(ze,Et){return V.signal.addEventListener("abort",function(){return Et({name:"AbortError",message:j||"Aborted"})})}),P(h(B,b,(W=s==null?void 0:s.getPendingMeta)==null?void 0:W.call(s,{requestId:B,arg:b},{getState:A,extra:M}))),[4,Promise.race([Ce,Promise.resolve(n(b,{dispatch:P,getState:A,extra:M,requestId:B,signal:V.signal,abort:K,rejectWithValue:function(ze,Et){return new j_(ze,Et)},fulfillWithValue:function(ze,Et){return new tT(ze,Et)}})).then(function(ze){if(ze instanceof j_)throw ze;return ze instanceof tT?u(ze.payload,B,b,ze.meta):u(ze,B,b)})])];case 3:return ne=qe.sent(),[3,5];case 4:return Ie=qe.sent(),ne=Ie instanceof j_?f(null,B,b,Ie.payload,Ie.meta):f(Ie,B,b),[3,5];case 5:return Se=s&&!s.dispatchConditionRejection&&f.match(ne)&&ne.meta.condition,Se||P(ne),[2,ne]}})})}();return Object.assign(F,{abort:K,requestId:B,arg:b,unwrap:function(){return F.then(jN)}})}}return Object.assign(w,{pending:h,rejected:f,fulfilled:u,typePrefix:t})}return e.withTypes=function(){return e},e})();function jN(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function UN(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var b1="listenerMiddleware";ul(b1+"/add");ul(b1+"/removeAll");ul(b1+"/remove");var nT;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);lN();var eo=function(t){return"@@redux-saga/"+t},qN=eo("CANCEL_PROMISE"),vI=eo("CHANNEL_END"),_I=eo("IO"),rT=eo("MATCH"),GN=eo("MULTICAST"),xI=eo("SAGA_ACTION"),ZN=eo("SELF_CANCELLATION"),WN=eo("TASK"),Nc=eo("TASK_CANCEL"),wI=eo("TERMINATE"),HN=eo("LOCATION"),KN=function(t){return t==null},XN=function(t){return t!=null},pl=function(t){return typeof t=="function"},QN=function(t){return typeof t=="string"},ah=Array.isArray,Oy=function(t){return t&&pl(t.then)},S1=function(t){return t&&pl(t.next)&&pl(t.throw)},YN=function(t){return pl(t)&&t.hasOwnProperty("toString")},JN=function(t){return!!t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype},eB=function(t){return function(){return t}},tB=eB(!0),Si=function(){},nB=function(t){return t},C1=function(t,n){yu(t,n),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(n).forEach(function(s){t[s]=n[s]})},rB=function(t,n){var s;return(s=[]).concat.apply(s,n.map(t))};function Fy(e,t){var n=e.indexOf(t);n>=0&&e.splice(n,1)}function iB(e){var t=!1;return function(){t||(t=!0,e())}}var sB=function(t){throw t},oB=function(t){return{value:t,done:!0}};function iT(e,t,n){t===void 0&&(t=sB),n===void 0&&(n="iterator");var s={meta:{name:n},next:e,throw:t,return:oB,isSagaIterator:!0};return typeof Symbol<"u"&&(s[Symbol.iterator]=function(){return s}),s}function aB(e,t){var n=t.sagaStack;console.error(e),console.error(n)}var bI=function(t){return Array.apply(null,new Array(t))},lB=function(t){return function(n){return t(Object.defineProperty(n,xI,{value:!0}))}},SI=function(t){return t===wI},CI=function(t){return t===Nc},TI=function(t){return SI(t)||CI(t)};function EI(e,t){var n=Object.keys(e),s=n.length,u=0,h,f=ah(e)?bI(s):{},a={};function w(){u===s&&(h=!0,t(f))}return n.forEach(function(b){var P=function(M,B){h||(B||TI(M)?(t.cancel(),t(M,B)):(f[b]=M,u++,w()))};P.cancel=Si,a[b]=P}),t.cancel=function(){h||(h=!0,n.forEach(function(b){return a[b].cancel()}))},a}function T1(e){return{name:e.name||"anonymous",location:PI(e)}}function PI(e){return e[HN]}function uB(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===0?function(s){return s}:t.length===1?t[0]:t.reduce(function(s,u){return function(){return s(u.apply(void 0,arguments))}})}var cB="Channel's Buffer overflow!",hB=1,dB=3,AI=4;function fB(e,t){e===void 0&&(e=10);var n=new Array(e),s=0,u=0,h=0,f=function(P){n[u]=P,u=(u+1)%e,s++},a=function(){if(s!=0){var P=n[h];return n[h]=null,s--,h=(h+1)%e,P}},w=function(){for(var P=[];s;)P.push(a());return P};return{isEmpty:function(){return s==0},put:function(P){if(s<e)f(P);else{var A;switch(t){case hB:throw new Error(cB);case dB:n[u]=P,u=(u+1)%e,h=u;break;case AI:A=2*e,n=w(),s=n.length,u=n.length,h=0,n.length=A,e=A,f(P);break}}},take:a,flush:w}}var pB=function(t){return fB(t,AI)},mB="TAKE",gB="PUT",kI="ALL",yB="RACE",vB="CALL",_B="CPS",xB="FORK",wB="JOIN",bB="CANCEL",SB="SELECT",CB="ACTION_CHANNEL",TB="CANCELLED",EB="FLUSH",PB="GET_CONTEXT",AB="SET_CONTEXT",kB=function(t,n){var s;return s={},s[_I]=!0,s.combinator=!1,s.type=t,s.payload=n,s};function IB(e){var t=kB(kI,e);return t.combinator=!0,t}function MB(){var e={};return e.promise=new Promise(function(t,n){e.resolve=t,e.reject=n}),e}var II=[],Ny=0;function RB(e){try{E1(),e()}finally{DI()}}function MI(e){II.push(e),Ny||(E1(),zI())}function RI(e){try{return E1(),e()}finally{zI()}}function E1(){Ny++}function DI(){Ny--}function zI(){DI();for(var e;!Ny&&(e=II.shift())!==void 0;)RB(e)}var DB=function(t){return function(n){return t.some(function(s){return P1(s)(n)})}},zB=function(t){return function(n){return t(n)}},sT=function(t){return function(n){return n.type===String(t)}},LB=function(t){return function(n){return n.type===t}},LI=function(){return tB};function P1(e){var t=e==="*"?LI:QN(e)?sT:ah(e)?DB:YN(e)?sT:pl(e)?zB:JN(e)?LB:null;if(t===null)throw new Error("invalid pattern: "+e);return t(e)}var Hd={type:vI},A1=function(t){return t&&t.type===vI};function OB(e){e===void 0&&(e=pB());var t=!1,n=[];function s(a){if(!t){if(n.length===0)return e.put(a);var w=n.shift();w(a)}}function u(a){t&&e.isEmpty()?a(Hd):e.isEmpty()?(n.push(a),a.cancel=function(){Fy(n,a)}):a(e.take())}function h(a){if(t&&e.isEmpty()){a(Hd);return}a(e.flush())}function f(){if(!t){t=!0;var a=n;n=[];for(var w=0,b=a.length;w<b;w++){var P=a[w];P(Hd)}}}return{take:u,put:s,flush:h,close:f}}function FB(){var e,t=!1,n=[],s=n,u=function(){s===n&&(s=n.slice())},h=function(){t=!0;var a=n=s;s=[],a.forEach(function(w){w(Hd)})};return e={},e[GN]=!0,e.put=function(a){if(!t){if(A1(a)){h();return}for(var w=n=s,b=0,P=w.length;b<P;b++){var A=w[b];A[rT](a)&&(A.cancel(),A(a))}}},e.take=function(a,w){if(w===void 0&&(w=LI),t){a(Hd);return}a[rT]=w,u(),s.push(a),a.cancel=iB(function(){u(),Fy(s,a)})},e.close=h,e}function OI(){var e=FB(),t=e.put;return e.put=function(n){if(n[xI]){t(n);return}MI(function(){t(n)})},e}var Jl=0,Xo=1,Bm=2,FI=3;function k1(e,t){var n=e[qN];pl(n)&&(t.cancel=n),e.then(t,function(s){t(s,!0)})}var Of=0,NI=function(){return++Of},Br;function NB(e,t){return e.isSagaIterator?{name:e.meta.name}:T1(t)}function BB(e){var t=e.context,n=e.fn,s=e.args;try{var u=n.apply(t,s);if(S1(u))return u;var h=!1,f=function(w){return h?{value:w,done:!0}:(h=!0,{value:u,done:!Oy(u)})};return iT(f)}catch(a){return iT(function(){throw a})}}function VB(e,t,n){var s=t.channel,u=t.action,h=t.resolve;MI(function(){var f;try{f=(s?s.put:e.dispatch)(u)}catch(a){n(a,!0);return}h&&Oy(f)?k1(f,n):n(f)})}function $B(e,t,n){var s=t.channel,u=s===void 0?e.channel:s,h=t.pattern,f=t.maybe,a=function(b){if(b instanceof Error){n(b,!0);return}if(A1(b)&&!f){n(wI);return}n(b)};try{u.take(a,XN(h)?P1(h):null)}catch(w){n(w,!0);return}n.cancel=a.cancel}function jB(e,t,n,s){var u=t.context,h=t.fn,f=t.args,a=s.task;try{var w=h.apply(u,f);if(Oy(w)){k1(w,n);return}if(S1(w)){By(e,w,a.context,Of,T1(h),!1,n);return}n(w)}catch(b){n(b,!0)}}function UB(e,t,n){var s=t.context,u=t.fn,h=t.args;try{var f=function(w,b){KN(w)?n(b):n(w,!0)};u.apply(s,h.concat(f)),f.cancel&&(n.cancel=f.cancel)}catch(a){n(a,!0)}}function qB(e,t,n,s){var u=t.context,h=t.fn,f=t.args,a=t.detached,w=s.task,b=BB({context:u,fn:h,args:f}),P=NB(b,h);RI(function(){var A=By(e,b,w.context,Of,P,a,void 0);a?n(A):A.isRunning()?(w.queue.addTask(A),n(A)):A.isAborted()?w.queue.abort(A.error()):n(A)})}function GB(e,t,n,s){var u=s.task,h=function(w,b){if(w.isRunning()){var P={task:u,cb:b};b.cancel=function(){w.isRunning()&&Fy(w.joiners,P)},w.joiners.push(P)}else w.isAborted()?b(w.error(),!0):b(w.result())};if(ah(t)){if(t.length===0){n([]);return}var f=EI(t,n);t.forEach(function(a,w){h(a,f[w])})}else h(t,n)}function U_(e){e.isRunning()&&e.cancel()}function ZB(e,t,n,s){var u=s.task;t===ZN?U_(u):ah(t)?t.forEach(U_):U_(t),n()}function WB(e,t,n,s){var u=s.digestEffect,h=Of,f=Object.keys(t);if(f.length===0){n(ah(t)?[]:{});return}var a=EI(t,n);f.forEach(function(w){u(t[w],h,a[w],w)})}function HB(e,t,n,s){var u=s.digestEffect,h=Of,f=Object.keys(t),a=ah(t)?bI(f.length):{},w={},b=!1;f.forEach(function(P){var A=function(B,V){b||(V||TI(B)?(n.cancel(),n(B,V)):(n.cancel(),b=!0,a[P]=B,n(a)))};A.cancel=Si,w[P]=A}),n.cancel=function(){b||(b=!0,f.forEach(function(P){return w[P].cancel()}))},f.forEach(function(P){b||u(t[P],h,w[P],P)})}function KB(e,t,n){var s=t.selector,u=t.args;try{var h=s.apply(void 0,[e.getState()].concat(u));n(h)}catch(f){n(f,!0)}}function XB(e,t,n){var s=t.pattern,u=t.buffer,h=OB(u),f=P1(s),a=function b(P){A1(P)||e.channel.take(b,f),h.put(P)},w=h.close;h.close=function(){a.cancel(),w()},e.channel.take(a,f),n(h)}function QB(e,t,n,s){var u=s.task;n(u.isCancelled())}function YB(e,t,n){t.flush(n)}function JB(e,t,n,s){var u=s.task;n(u.context[t])}function e6(e,t,n,s){var u=s.task;C1(u.context,t),n()}var t6=(Br={},Br[mB]=$B,Br[gB]=VB,Br[kI]=WB,Br[yB]=HB,Br[vB]=jB,Br[_B]=UB,Br[xB]=qB,Br[wB]=GB,Br[bB]=ZB,Br[SB]=KB,Br[CB]=XB,Br[TB]=QB,Br[EB]=YB,Br[PB]=JB,Br[AB]=e6,Br);function n6(e,t,n){var s=[],u,h=!1;w(e);var f=function(){return s};function a(P){t(),b(),n(P,!0)}function w(P){s.push(P),P.cont=function(A,M){h||(Fy(s,P),P.cont=Si,M?a(A):(P===e&&(u=A),s.length||(h=!0,n(u))))}}function b(){h||(h=!0,s.forEach(function(P){P.cont=Si,P.cancel()}),s=[])}return{addTask:w,cancelAll:b,abort:a,getTasks:f}}function BI(e,t){return e+"?"+t}function r6(e){var t=PI(e);if(t){var n=t.code,s=t.fileName,u=t.lineNumber,h=n+"  "+BI(s,u);return h}return""}function oT(e){var t=e.name,n=e.location;return n?t+"  "+BI(n.fileName,n.lineNumber):t}function i6(e){var t=rB(function(n){return n.cancelledTasks},e);return t.length?["Tasks cancelled due to error:"].concat(t).join(`
`):""}var I1=null,Kd=[],s6=function(t){t.crashedEffect=I1,Kd.push(t)},VI=function(){I1=null,Kd.length=0},o6=function(t){I1=t},a6=function(){var t=Kd[0],n=Kd.slice(1),s=t.crashedEffect?r6(t.crashedEffect):null,u="The above error occurred in task "+oT(t.meta)+(s?` 
 when executing effect `+s:"");return[u].concat(n.map(function(h){return"    created by "+oT(h.meta)}),[i6(Kd)]).join(`
`)};function l6(e,t,n,s,u,h,f){var a;f===void 0&&(f=Si);var w=Jl,b,P,A=null,M=[],B=Object.create(n),V=n6(t,function(){M.push.apply(M,V.getTasks().map(function(pe){return pe.meta.name}))},K);function j(){w===Jl&&(w=Xo,V.cancelAll(),K(Nc,!1))}function K(ne,pe){if(!pe)ne===Nc?w=Xo:w!==Xo&&(w=FI),b=ne,A&&A.resolve(ne);else{if(w=Bm,s6({meta:u,cancelledTasks:M}),W.isRoot){var Ce=a6();VI(),e.onError(ne,{sagaStack:Ce})}P=ne,A&&A.reject(ne)}W.cont(ne,pe),W.joiners.forEach(function(Ie){Ie.cb(ne,pe)}),W.joiners=null}function F(ne){C1(B,ne)}function N(){return A||(A=MB(),w===Bm?A.reject(P):w!==Jl&&A.resolve(b)),A.promise}var W=(a={},a[WN]=!0,a.id=s,a.meta=u,a.isRoot=h,a.context=B,a.joiners=[],a.queue=V,a.cancel=j,a.cont=f,a.end=K,a.setContext=F,a.toPromise=N,a.isRunning=function(){return w===Jl},a.isCancelled=function(){return w===Xo||w===Jl&&t.status===Xo},a.isAborted=function(){return w===Bm},a.result=function(){return b},a.error=function(){return P},a);return W}function By(e,t,n,s,u,h,f){var a=e.finalizeRunEffect(B);M.cancel=Si;var w={meta:u,cancel:A,status:Jl},b=l6(e,w,n,s,u,h,f),P={task:b,digestEffect:V};function A(){w.status===Jl&&(w.status=Xo,M(Nc))}return f&&(f.cancel=b.cancel),M(),b;function M(j,K){try{var F;K?(F=t.throw(j),VI()):CI(j)?(w.status=Xo,M.cancel(),F=pl(t.return)?t.return(Nc):{done:!0,value:Nc}):SI(j)?F=pl(t.return)?t.return():{done:!0}:F=t.next(j),F.done?(w.status!==Xo&&(w.status=FI),w.cont(F.value)):V(F.value,s,M)}catch(N){if(w.status===Xo)throw N;w.status=Bm,w.cont(N,!0)}}function B(j,K,F){if(Oy(j))k1(j,F);else if(S1(j))By(e,j,b.context,K,u,!1,F);else if(j&&j[_I]){var N=t6[j.type];N(e,j.payload,F,P)}else F(j)}function V(j,K,F,N){N===void 0&&(N="");var W=NI();e.sagaMonitor&&e.sagaMonitor.effectTriggered({effectId:W,parentEffectId:K,label:N,effect:j});var ne;function pe(Ce,Ie){ne||(ne=!0,F.cancel=Si,e.sagaMonitor&&(Ie?e.sagaMonitor.effectRejected(W,Ce):e.sagaMonitor.effectResolved(W,Ce)),Ie&&o6(j),F(Ce,Ie))}pe.cancel=Si,F.cancel=function(){ne||(ne=!0,pe.cancel(),pe.cancel=Si,e.sagaMonitor&&e.sagaMonitor.effectCancelled(W))},a(j,W,pe)}}function u6(e,t){for(var n=e.channel,s=n===void 0?OI():n,u=e.dispatch,h=e.getState,f=e.context,a=f===void 0?{}:f,w=e.sagaMonitor,b=e.effectMiddlewares,P=e.onError,A=P===void 0?aB:P,M=arguments.length,B=new Array(M>2?M-2:0),V=2;V<M;V++)B[V-2]=arguments[V];var j=t.apply(void 0,B),K=NI();w&&(w.rootSagaStarted=w.rootSagaStarted||Si,w.effectTriggered=w.effectTriggered||Si,w.effectResolved=w.effectResolved||Si,w.effectRejected=w.effectRejected||Si,w.effectCancelled=w.effectCancelled||Si,w.actionDispatched=w.actionDispatched||Si,w.rootSagaStarted({effectId:K,saga:t,args:B}));var F;if(b){var N=uB.apply(void 0,b);F=function(pe){return function(Ce,Ie,Se){var qe=function(Et){return pe(Et,Ie,Se)};return N(qe)(Ce)}}}else F=nB;var W={channel:s,dispatch:lB(u),getState:h,sagaMonitor:w,onError:A,finalizeRunEffect:F};return RI(function(){var ne=By(W,j,a,K,T1(t),!0,void 0);return w&&w.effectResolved(K,ne),ne})}function c6(e){var t=e===void 0?{}:e,n=t.context,s=n===void 0?{}:n,u=t.channel,h=u===void 0?OI():u,f=t.sagaMonitor,a=n1(t,["context","channel","sagaMonitor"]),w;function b(P){var A=P.getState,M=P.dispatch;return w=u6.bind(null,yu({},a,{context:s,channel:h,dispatch:M,getState:A,sagaMonitor:f})),function(B){return function(V){f&&f.actionDispatched&&f.actionDispatched(V);var j=B(V);return h.put(V),j}}}return b.run=function(){return w.apply(void 0,arguments)},b.setContext=function(P){C1(s,P)},b}var M1="persist:",$I="persist/FLUSH",R1="persist/REHYDRATE",jI="persist/PAUSE",UI="persist/PERSIST",qI="persist/PURGE",GI="persist/REGISTER",h6=-1;function Vm(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Vm=function(n){return typeof n}:Vm=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Vm(e)}function aT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,s)}return n}function d6(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?aT(n,!0).forEach(function(s){f6(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aT(n).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function f6(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p6(e,t,n,s){s.debug;var u=d6({},n);return e&&Vm(e)==="object"&&Object.keys(e).forEach(function(h){h!=="_persist"&&t[h]===n[h]&&(u[h]=e[h])}),u}function m6(e){var t=e.blacklist||null,n=e.whitelist||null,s=e.transforms||[],u=e.throttle||0,h="".concat(e.keyPrefix!==void 0?e.keyPrefix:M1).concat(e.key),f=e.storage,a;e.serialize===!1?a=function(pe){return pe}:typeof e.serialize=="function"?a=e.serialize:a=g6;var w=e.writeFailHandler||null,b={},P={},A=[],M=null,B=null,V=function(pe){Object.keys(pe).forEach(function(Ce){F(Ce)&&b[Ce]!==pe[Ce]&&A.indexOf(Ce)===-1&&A.push(Ce)}),Object.keys(b).forEach(function(Ce){pe[Ce]===void 0&&F(Ce)&&A.indexOf(Ce)===-1&&b[Ce]!==void 0&&A.push(Ce)}),M===null&&(M=setInterval(j,u)),b=pe};function j(){if(A.length===0){M&&clearInterval(M),M=null;return}var ne=A.shift(),pe=s.reduce(function(Ce,Ie){return Ie.in(Ce,ne,b)},b[ne]);if(pe!==void 0)try{P[ne]=a(pe)}catch(Ce){console.error("redux-persist/createPersistoid: error serializing state",Ce)}else delete P[ne];A.length===0&&K()}function K(){Object.keys(P).forEach(function(ne){b[ne]===void 0&&delete P[ne]}),B=f.setItem(h,a(P)).catch(N)}function F(ne){return!(n&&n.indexOf(ne)===-1&&ne!=="_persist"||t&&t.indexOf(ne)!==-1)}function N(ne){w&&w(ne)}var W=function(){for(;A.length!==0;)j();return B||Promise.resolve()};return{update:V,flush:W}}function g6(e){return JSON.stringify(e)}function y6(e){var t=e.transforms||[],n="".concat(e.keyPrefix!==void 0?e.keyPrefix:M1).concat(e.key),s=e.storage;e.debug;var u;return e.deserialize===!1?u=function(f){return f}:typeof e.deserialize=="function"?u=e.deserialize:u=v6,s.getItem(n).then(function(h){if(h)try{var f={},a=u(h);return Object.keys(a).forEach(function(w){f[w]=t.reduceRight(function(b,P){return P.out(b,w,a)},u(a[w]))}),f}catch(w){throw w}else return})}function v6(e){return JSON.parse(e)}function _6(e){var t=e.storage,n="".concat(e.keyPrefix!==void 0?e.keyPrefix:M1).concat(e.key);return t.removeItem(n,x6)}function x6(e){}function lT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,s)}return n}function Go(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?lT(n,!0).forEach(function(s){w6(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lT(n).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function w6(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b6(e,t){if(e==null)return{};var n=S6(e,t),s,u;if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(u=0;u<h.length;u++)s=h[u],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function S6(e,t){if(e==null)return{};var n={},s=Object.keys(e),u,h;for(h=0;h<s.length;h++)u=s[h],!(t.indexOf(u)>=0)&&(n[u]=e[u]);return n}var C6=5e3;function T6(e,t){var n=e.version!==void 0?e.version:h6;e.debug;var s=e.stateReconciler===void 0?p6:e.stateReconciler,u=e.getStoredState||y6,h=e.timeout!==void 0?e.timeout:C6,f=null,a=!1,w=!0,b=function(A){return A._persist.rehydrated&&f&&!w&&f.update(A),A};return function(P,A){var M=P||{},B=M._persist,V=b6(M,["_persist"]),j=V;if(A.type===UI){var K=!1,F=function(Se,qe){K||(A.rehydrate(e.key,Se,qe),K=!0)};if(h&&setTimeout(function(){!K&&F(void 0,new Error('redux-persist: persist timed out for persist key "'.concat(e.key,'"')))},h),w=!1,f||(f=m6(e)),B)return Go({},t(j,A),{_persist:B});if(typeof A.rehydrate!="function"||typeof A.register!="function")throw new Error("redux-persist: either rehydrate or register is not a function on the PERSIST action. This can happen if the action is being replayed. This is an unexplored use case, please open an issue and we will figure out a resolution.");return A.register(e.key),u(e).then(function(Ie){var Se=e.migrate||function(qe,ze){return Promise.resolve(qe)};Se(Ie,n).then(function(qe){F(qe)},function(qe){F(void 0,qe)})},function(Ie){F(void 0,Ie)}),Go({},t(j,A),{_persist:{version:n,rehydrated:!1}})}else{if(A.type===qI)return a=!0,A.result(_6(e)),Go({},t(j,A),{_persist:B});if(A.type===$I)return A.result(f&&f.flush()),Go({},t(j,A),{_persist:B});if(A.type===jI)w=!0;else if(A.type===R1){if(a)return Go({},j,{_persist:Go({},B,{rehydrated:!0})});if(A.key===e.key){var N=t(j,A),W=A.payload,ne=s!==!1&&W!==void 0?s(W,P,N,e):N,pe=Go({},ne,{_persist:Go({},B,{rehydrated:!0})});return b(pe)}}}if(!B)return t(P,A);var Ce=t(j,A);return Ce===j?P:b(Go({},Ce,{_persist:B}))}}function uT(e){return A6(e)||P6(e)||E6()}function E6(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function P6(e){if(Symbol.iterator in Object(e)||Object.prototype.toString.call(e)==="[object Arguments]")return Array.from(e)}function A6(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function cT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,s)}return n}function E0(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cT(n,!0).forEach(function(s){k6(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cT(n).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function k6(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ZI={registry:[],bootstrapped:!1},I6=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ZI,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case GI:return E0({},t,{registry:[].concat(uT(t.registry),[n.key])});case R1:var s=t.registry.indexOf(n.key),u=uT(t.registry);return u.splice(s,1),E0({},t,{registry:u,bootstrapped:u.length===0});default:return t}};function M6(e,t,n){var s=n||!1,u=w1(I6,ZI,t&&t.enhancer?t.enhancer:void 0),h=function(b){u.dispatch({type:GI,key:b})},f=function(b,P,A){var M={type:R1,payload:P,err:A,key:b};e.dispatch(M),u.dispatch(M),s&&a.getState().bootstrapped&&(s(),s=!1)},a=E0({},u,{purge:function(){var b=[];return e.dispatch({type:qI,result:function(A){b.push(A)}}),Promise.all(b)},flush:function(){var b=[];return e.dispatch({type:$I,result:function(A){b.push(A)}}),Promise.all(b)},pause:function(){e.dispatch({type:jI})},persist:function(){e.dispatch({type:UI,register:h,rehydrate:f})}});return t&&t.manualPersist||a.persist(),a}var D1={},z1={};z1.__esModule=!0;z1.default=z6;function $m(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?$m=function(n){return typeof n}:$m=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},$m(e)}function q_(){}var R6={getItem:q_,setItem:q_,removeItem:q_};function D6(e){if((typeof self>"u"?"undefined":$m(self))!=="object"||!(e in self))return!1;try{var t=self[e],n="redux-persist ".concat(e," test");t.setItem(n,"test"),t.getItem(n),t.removeItem(n)}catch{return!1}return!0}function z6(e){var t="".concat(e,"Storage");return D6(t)?self[t]:R6}D1.__esModule=!0;D1.default=F6;var L6=O6(z1);function O6(e){return e&&e.__esModule?e:{default:e}}function F6(e){var t=(0,L6.default)(e);return{getItem:function(s){return new Promise(function(u,h){u(t.getItem(s))})},setItem:function(s,u){return new Promise(function(h,f){h(t.setItem(s,u))})},removeItem:function(s){return new Promise(function(u,h){u(t.removeItem(s))})}}}var WI=void 0,N6=B6(D1);function B6(e){return e&&e.__esModule?e:{default:e}}var V6=(0,N6.default)("local");WI=V6;function $6(e,t,n){return T6({key:e,storage:WI,whitelist:t},n)}const j6={showModal:!1,modalContent:null,showPromptDialog:!1,promptDialogContent:null,navbarToggled:!1,activeExamTab:"exam-section"},U6=(e,t)=>({...e,...t.payload}),q6=(e,t)=>({...e,showModal:!!t.payload,modalContent:t.payload||e.modalContent}),G6=(e,t)=>({...e,navbarToggled:t.payload}),Z6=(e,t)=>({...e,modalContent:t.payload||null}),W6=(e,t)=>({...e,showPromptDialog:!!t.payload||!e.showPromptDialog,promptDialogContent:t.payload||e.promptDialogContent}),H6=(e,t)=>({...e,promptDialogContent:t.payload||null}),HI=yI({name:"common",initialState:j6,reducers:{setCommonState:U6,toggleModal:q6,setModalContent:Z6,setToggleNavbar:G6,togglePromptDialog:W6,setPromptDialogContent:H6}}),K6=$6("common",[],HI.reducer),X6={actions:[]},Q6=yI({name:"loader",initialState:X6,reducers:{startAction(e,t){e.actions.push(t.payload)},stopAction(e,t){e.actions=e.actions.filter(n=>n!==t.payload)}}}),Y6=Q6.reducer,J6=dI({common:K6,loader:Y6});function*eV(){yield IB([])}const KI=c6(),tV=[KI],XI=zN({reducer:J6,middleware:e=>e({thunk:!1,serializableCheck:!1}).concat(tV)});KI.run(eV);const nV=M6(XI);function QI(e){var t,n,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=QI(e[t]))&&(s&&(s+=" "),s+=n);else for(t in e)e[t]&&(s&&(s+=" "),s+=t);return s}function Xa(){for(var e,t,n=0,s="";n<arguments.length;)(e=arguments[n++])&&(t=QI(e))&&(s&&(s+=" "),s+=t);return s}const jm=e=>typeof e=="number"&&!isNaN(e),Rg=e=>typeof e=="string",Ji=e=>typeof e=="function",Um=e=>Rg(e)||Ji(e)?e:null,G_=e=>X.isValidElement(e)||Rg(e)||Ji(e)||jm(e);function rV(e,t,n){n===void 0&&(n=300);const{scrollHeight:s,style:u}=e;requestAnimationFrame(()=>{u.minHeight="initial",u.height=s+"px",u.transition=`all ${n}ms`,requestAnimationFrame(()=>{u.height="0",u.padding="0",u.margin="0",setTimeout(t,n)})})}function Vy(e){let{enter:t,exit:n,appendPosition:s=!1,collapse:u=!0,collapseDuration:h=300}=e;return function(f){let{children:a,position:w,preventExitTransition:b,done:P,nodeRef:A,isIn:M}=f;const B=s?`${t}--${w}`:t,V=s?`${n}--${w}`:n,j=X.useRef(0);return X.useLayoutEffect(()=>{const K=A.current,F=B.split(" "),N=W=>{W.target===A.current&&(K.dispatchEvent(new Event("d")),K.removeEventListener("animationend",N),K.removeEventListener("animationcancel",N),j.current===0&&W.type!=="animationcancel"&&K.classList.remove(...F))};K.classList.add(...F),K.addEventListener("animationend",N),K.addEventListener("animationcancel",N)},[]),X.useEffect(()=>{const K=A.current,F=()=>{K.removeEventListener("animationend",F),u?rV(K,P,h):P()};M||(b?F():(j.current=1,K.className+=` ${V}`,K.addEventListener("animationend",F)))},[M]),ft.createElement(ft.Fragment,null,a)}}function hT(e,t){return e!=null?{content:e.content,containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,status:t}:{}}const iu={list:new Map,emitQueue:new Map,on(e,t){return this.list.has(e)||this.list.set(e,[]),this.list.get(e).push(t),this},off(e,t){if(t){const n=this.list.get(e).filter(s=>s!==t);return this.list.set(e,n),this}return this.list.delete(e),this},cancelEmit(e){const t=this.emitQueue.get(e);return t&&(t.forEach(clearTimeout),this.emitQueue.delete(e)),this},emit(e){this.list.has(e)&&this.list.get(e).forEach(t=>{const n=setTimeout(()=>{t(...[].slice.call(arguments,1))},0);this.emitQueue.has(e)||this.emitQueue.set(e,[]),this.emitQueue.get(e).push(n)})}},mm=e=>{let{theme:t,type:n,...s}=e;return ft.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:t==="colored"?"currentColor":`var(--toastify-icon-color-${n})`,...s})},Z_={info:function(e){return ft.createElement(mm,{...e},ft.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(e){return ft.createElement(mm,{...e},ft.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(e){return ft.createElement(mm,{...e},ft.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(e){return ft.createElement(mm,{...e},ft.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return ft.createElement("div",{className:"Toastify__spinner"})}};function iV(e){const[,t]=X.useReducer(B=>B+1,0),[n,s]=X.useState([]),u=X.useRef(null),h=X.useRef(new Map).current,f=B=>n.indexOf(B)!==-1,a=X.useRef({toastKey:1,displayedToast:0,count:0,queue:[],props:e,containerId:null,isToastActive:f,getToast:B=>h.get(B)}).current;function w(B){let{containerId:V}=B;const{limit:j}=a.props;!j||V&&a.containerId!==V||(a.count-=a.queue.length,a.queue=[])}function b(B){s(V=>B==null?[]:V.filter(j=>j!==B))}function P(){const{toastContent:B,toastProps:V,staleId:j}=a.queue.shift();M(B,V,j)}function A(B,V){let{delay:j,staleId:K,...F}=V;if(!G_(B)||function(Ge){return!u.current||a.props.enableMultiContainer&&Ge.containerId!==a.props.containerId||h.has(Ge.toastId)&&Ge.updateId==null}(F))return;const{toastId:N,updateId:W,data:ne}=F,{props:pe}=a,Ce=()=>b(N),Ie=W==null;Ie&&a.count++;const Se={...pe,style:pe.toastStyle,key:a.toastKey++,...Object.fromEntries(Object.entries(F).filter(Ge=>{let[yt,xt]=Ge;return xt!=null})),toastId:N,updateId:W,data:ne,closeToast:Ce,isIn:!1,className:Um(F.className||pe.toastClassName),bodyClassName:Um(F.bodyClassName||pe.bodyClassName),progressClassName:Um(F.progressClassName||pe.progressClassName),autoClose:!F.isLoading&&(qe=F.autoClose,ze=pe.autoClose,qe===!1||jm(qe)&&qe>0?qe:ze),deleteToast(){const Ge=hT(h.get(N),"removed");h.delete(N),iu.emit(4,Ge);const yt=a.queue.length;if(a.count=N==null?a.count-a.displayedToast:a.count-1,a.count<0&&(a.count=0),yt>0){const xt=N==null?a.props.limit:1;if(yt===1||xt===1)a.displayedToast++,P();else{const Ot=xt>yt?yt:xt;a.displayedToast=Ot;for(let zt=0;zt<Ot;zt++)P()}}else t()}};var qe,ze;Se.iconOut=function(Ge){let{theme:yt,type:xt,isLoading:Ot,icon:zt}=Ge,St=null;const je={theme:yt,type:xt};return zt===!1||(Ji(zt)?St=zt(je):X.isValidElement(zt)?St=X.cloneElement(zt,je):Rg(zt)||jm(zt)?St=zt:Ot?St=Z_.spinner():(ct=>ct in Z_)(xt)&&(St=Z_[xt](je))),St}(Se),Ji(F.onOpen)&&(Se.onOpen=F.onOpen),Ji(F.onClose)&&(Se.onClose=F.onClose),Se.closeButton=pe.closeButton,F.closeButton===!1||G_(F.closeButton)?Se.closeButton=F.closeButton:F.closeButton===!0&&(Se.closeButton=!G_(pe.closeButton)||pe.closeButton);let Et=B;X.isValidElement(B)&&!Rg(B.type)?Et=X.cloneElement(B,{closeToast:Ce,toastProps:Se,data:ne}):Ji(B)&&(Et=B({closeToast:Ce,toastProps:Se,data:ne})),pe.limit&&pe.limit>0&&a.count>pe.limit&&Ie?a.queue.push({toastContent:Et,toastProps:Se,staleId:K}):jm(j)?setTimeout(()=>{M(Et,Se,K)},j):M(Et,Se,K)}function M(B,V,j){const{toastId:K}=V;j&&h.delete(j);const F={content:B,props:V};h.set(K,F),s(N=>[...N,K].filter(W=>W!==j)),iu.emit(4,hT(F,F.props.updateId==null?"added":"updated"))}return X.useEffect(()=>(a.containerId=e.containerId,iu.cancelEmit(3).on(0,A).on(1,B=>u.current&&b(B)).on(5,w).emit(2,a),()=>{h.clear(),iu.emit(3,a)}),[]),X.useEffect(()=>{a.props=e,a.isToastActive=f,a.displayedToast=n.length}),{getToastToRender:function(B){const V=new Map,j=Array.from(h.values());return e.newestOnTop&&j.reverse(),j.forEach(K=>{const{position:F}=K.props;V.has(F)||V.set(F,[]),V.get(F).push(K)}),Array.from(V,K=>B(K[0],K[1]))},containerRef:u,isToastActive:f}}function dT(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientX:e.clientX}function fT(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientY:e.clientY}function sV(e){const[t,n]=X.useState(!1),[s,u]=X.useState(!1),h=X.useRef(null),f=X.useRef({start:0,x:0,y:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,boundingRect:null,didMove:!1}).current,a=X.useRef(e),{autoClose:w,pauseOnHover:b,closeToast:P,onClick:A,closeOnClick:M}=e;function B(ne){if(e.draggable){ne.nativeEvent.type==="touchstart"&&ne.nativeEvent.preventDefault(),f.didMove=!1,document.addEventListener("mousemove",F),document.addEventListener("mouseup",N),document.addEventListener("touchmove",F),document.addEventListener("touchend",N);const pe=h.current;f.canCloseOnClick=!0,f.canDrag=!0,f.boundingRect=pe.getBoundingClientRect(),pe.style.transition="",f.x=dT(ne.nativeEvent),f.y=fT(ne.nativeEvent),e.draggableDirection==="x"?(f.start=f.x,f.removalDistance=pe.offsetWidth*(e.draggablePercent/100)):(f.start=f.y,f.removalDistance=pe.offsetHeight*(e.draggablePercent===80?1.5*e.draggablePercent:e.draggablePercent/100))}}function V(ne){if(f.boundingRect){const{top:pe,bottom:Ce,left:Ie,right:Se}=f.boundingRect;ne.nativeEvent.type!=="touchend"&&e.pauseOnHover&&f.x>=Ie&&f.x<=Se&&f.y>=pe&&f.y<=Ce?K():j()}}function j(){n(!0)}function K(){n(!1)}function F(ne){const pe=h.current;f.canDrag&&pe&&(f.didMove=!0,t&&K(),f.x=dT(ne),f.y=fT(ne),f.delta=e.draggableDirection==="x"?f.x-f.start:f.y-f.start,f.start!==f.x&&(f.canCloseOnClick=!1),pe.style.transform=`translate${e.draggableDirection}(${f.delta}px)`,pe.style.opacity=""+(1-Math.abs(f.delta/f.removalDistance)))}function N(){document.removeEventListener("mousemove",F),document.removeEventListener("mouseup",N),document.removeEventListener("touchmove",F),document.removeEventListener("touchend",N);const ne=h.current;if(f.canDrag&&f.didMove&&ne){if(f.canDrag=!1,Math.abs(f.delta)>f.removalDistance)return u(!0),void e.closeToast();ne.style.transition="transform 0.2s, opacity 0.2s",ne.style.transform=`translate${e.draggableDirection}(0)`,ne.style.opacity="1"}}X.useEffect(()=>{a.current=e}),X.useEffect(()=>(h.current&&h.current.addEventListener("d",j,{once:!0}),Ji(e.onOpen)&&e.onOpen(X.isValidElement(e.children)&&e.children.props),()=>{const ne=a.current;Ji(ne.onClose)&&ne.onClose(X.isValidElement(ne.children)&&ne.children.props)}),[]),X.useEffect(()=>(e.pauseOnFocusLoss&&(document.hasFocus()||K(),window.addEventListener("focus",j),window.addEventListener("blur",K)),()=>{e.pauseOnFocusLoss&&(window.removeEventListener("focus",j),window.removeEventListener("blur",K))}),[e.pauseOnFocusLoss]);const W={onMouseDown:B,onTouchStart:B,onMouseUp:V,onTouchEnd:V};return w&&b&&(W.onMouseEnter=K,W.onMouseLeave=j),M&&(W.onClick=ne=>{A&&A(ne),f.canCloseOnClick&&P()}),{playToast:j,pauseToast:K,isRunning:t,preventExitTransition:s,toastRef:h,eventHandlers:W}}function YI(e){let{closeToast:t,theme:n,ariaLabel:s="close"}=e;return ft.createElement("button",{className:`Toastify__close-button Toastify__close-button--${n}`,type:"button",onClick:u=>{u.stopPropagation(),t(u)},"aria-label":s},ft.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},ft.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function oV(e){let{delay:t,isRunning:n,closeToast:s,type:u="default",hide:h,className:f,style:a,controlledProgress:w,progress:b,rtl:P,isIn:A,theme:M}=e;const B=h||w&&b===0,V={...a,animationDuration:`${t}ms`,animationPlayState:n?"running":"paused",opacity:B?0:1};w&&(V.transform=`scaleX(${b})`);const j=Xa("Toastify__progress-bar",w?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${M}`,`Toastify__progress-bar--${u}`,{"Toastify__progress-bar--rtl":P}),K=Ji(f)?f({rtl:P,type:u,defaultClassName:j}):Xa(j,f);return ft.createElement("div",{role:"progressbar","aria-hidden":B?"true":"false","aria-label":"notification timer",className:K,style:V,[w&&b>=1?"onTransitionEnd":"onAnimationEnd"]:w&&b<1?null:()=>{A&&s()}})}const aV=e=>{const{isRunning:t,preventExitTransition:n,toastRef:s,eventHandlers:u}=sV(e),{closeButton:h,children:f,autoClose:a,onClick:w,type:b,hideProgressBar:P,closeToast:A,transition:M,position:B,className:V,style:j,bodyClassName:K,bodyStyle:F,progressClassName:N,progressStyle:W,updateId:ne,role:pe,progress:Ce,rtl:Ie,toastId:Se,deleteToast:qe,isIn:ze,isLoading:Et,iconOut:Ge,closeOnClick:yt,theme:xt}=e,Ot=Xa("Toastify__toast",`Toastify__toast-theme--${xt}`,`Toastify__toast--${b}`,{"Toastify__toast--rtl":Ie},{"Toastify__toast--close-on-click":yt}),zt=Ji(V)?V({rtl:Ie,position:B,type:b,defaultClassName:Ot}):Xa(Ot,V),St=!!Ce||!a,je={closeToast:A,type:b,theme:xt};let ct=null;return h===!1||(ct=Ji(h)?h(je):X.isValidElement(h)?X.cloneElement(h,je):YI(je)),ft.createElement(M,{isIn:ze,done:qe,position:B,preventExitTransition:n,nodeRef:s},ft.createElement("div",{id:Se,onClick:w,className:zt,...u,style:j,ref:s},ft.createElement("div",{...ze&&{role:pe},className:Ji(K)?K({type:b}):Xa("Toastify__toast-body",K),style:F},Ge!=null&&ft.createElement("div",{className:Xa("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!Et})},Ge),ft.createElement("div",null,f)),ct,ft.createElement(oV,{...ne&&!St?{key:`pb-${ne}`}:{},rtl:Ie,theme:xt,delay:a,isRunning:t,isIn:ze,closeToast:A,hide:P,type:b,style:W,className:N,controlledProgress:St,progress:Ce||0})))},$y=function(e,t){return t===void 0&&(t=!1),{enter:`Toastify--animate Toastify__${e}-enter`,exit:`Toastify--animate Toastify__${e}-exit`,appendPosition:t}},lV=Vy($y("bounce",!0));Vy($y("slide",!0));Vy($y("zoom"));Vy($y("flip"));const P0=X.forwardRef((e,t)=>{const{getToastToRender:n,containerRef:s,isToastActive:u}=iV(e),{className:h,style:f,rtl:a,containerId:w}=e;function b(P){const A=Xa("Toastify__toast-container",`Toastify__toast-container--${P}`,{"Toastify__toast-container--rtl":a});return Ji(h)?h({position:P,rtl:a,defaultClassName:A}):Xa(A,Um(h))}return X.useEffect(()=>{t&&(t.current=s.current)},[]),ft.createElement("div",{ref:s,className:"Toastify",id:w},n((P,A)=>{const M=A.length?{...f}:{...f,pointerEvents:"none"};return ft.createElement("div",{className:b(P),style:M,key:`container-${P}`},A.map((B,V)=>{let{content:j,props:K}=B;return ft.createElement(aV,{...K,isIn:u(K.toastId),style:{...K.style,"--nth":V+1,"--len":A.length},key:`toast-${K.key}`},j)}))}))});P0.displayName="ToastContainer",P0.defaultProps={position:"top-right",transition:lV,autoClose:5e3,closeButton:YI,pauseOnHover:!0,pauseOnFocusLoss:!0,closeOnClick:!0,draggable:!0,draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};let pT,W_=new Map,mT=[];iu.on(2,e=>{pT=e.containerId||e,W_.set(pT,e),mT.forEach(t=>{iu.emit(0,t.content,t.options)}),mT=[]}).on(3,e=>{W_.delete(e.containerId||e),W_.size===0&&iu.off(0).off(1).off(5)});const L1=()=>Bk(),Sc=K3;function uV(){return ae("h1",{children:"Something went wrong!"})}function cV(){return{isAuthenticated:()=>!!localStorage.getItem("token")}}function hV({isAuthenticated:e,redirectPath:t="/login",children:n}){return e?n||ae(t4,{}):ae(e4,{to:t,replace:!0})}function dV({routes:e,fallback:t=ae(uV,{})}){const{isAuthenticated:n}=cV();return ae(X.Suspense,{fallback:t,children:ae(r4,{children:e==null?void 0:e.map(s=>{var u,h;return s.authenticated?ae(Ba,{element:ae(hV,{isAuthenticated:n()}),children:s!=null&&s.children?ae(Ba,{path:s.path,children:(u=s==null?void 0:s.children)==null?void 0:u.map(f=>ae(Ba,{path:f.path,element:ae(f.component,{})},f.name))},s.name):ae(Ba,{path:s.path,element:ae(s.component,{})},s.name)},s.name):s!=null&&s.children?ae(Ba,{path:s.path,children:(h=s==null?void 0:s.children)==null?void 0:h.map(f=>ae(Ba,{path:f.path,element:ae(f.component,{})},f.name))},s.name):ae(Ba,{path:s.path,element:ae(s.component,{})},s.name)})})})}function JI(e){var t,n,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var u=e.length;for(t=0;t<u;t++)e[t]&&(n=JI(e[t]))&&(s&&(s+=" "),s+=n)}else for(n in e)e[n]&&(s&&(s+=" "),s+=n);return s}function fV(){for(var e,t,n=0,s="",u=arguments.length;n<u;n++)(e=arguments[n])&&(t=JI(e))&&(s&&(s+=" "),s+=t);return s}function pV(){for(var e=0,t,n,s="";e<arguments.length;)(t=arguments[e++])&&(n=eM(t))&&(s&&(s+=" "),s+=n);return s}function eM(e){if(typeof e=="string")return e;for(var t,n="",s=0;s<e.length;s++)e[s]&&(t=eM(e[s]))&&(n&&(n+=" "),n+=t);return n}var O1="-";function mV(e){var t=yV(e),n=e.conflictingClassGroups,s=e.conflictingClassGroupModifiers,u=s===void 0?{}:s;function h(a){var w=a.split(O1);return w[0]===""&&w.length!==1&&w.shift(),tM(w,t)||gV(a)}function f(a,w){var b=n[a]||[];return w&&u[a]?[].concat(b,u[a]):b}return{getClassGroupId:h,getConflictingClassGroupIds:f}}function tM(e,t){var f;if(e.length===0)return t.classGroupId;var n=e[0],s=t.nextPart.get(n),u=s?tM(e.slice(1),s):void 0;if(u)return u;if(t.validators.length!==0){var h=e.join(O1);return(f=t.validators.find(function(a){var w=a.validator;return w(h)}))==null?void 0:f.classGroupId}}var gT=/^\[(.+)\]$/;function gV(e){if(gT.test(e)){var t=gT.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}}function yV(e){var t=e.theme,n=e.prefix,s={nextPart:new Map,validators:[]},u=_V(Object.entries(e.classGroups),n);return u.forEach(function(h){var f=h[0],a=h[1];A0(a,s,f,t)}),s}function A0(e,t,n,s){e.forEach(function(u){if(typeof u=="string"){var h=u===""?t:yT(t,u);h.classGroupId=n;return}if(typeof u=="function"){if(vV(u)){A0(u(s),t,n,s);return}t.validators.push({validator:u,classGroupId:n});return}Object.entries(u).forEach(function(f){var a=f[0],w=f[1];A0(w,yT(t,a),n,s)})})}function yT(e,t){var n=e;return t.split(O1).forEach(function(s){n.nextPart.has(s)||n.nextPart.set(s,{nextPart:new Map,validators:[]}),n=n.nextPart.get(s)}),n}function vV(e){return e.isThemeGetter}function _V(e,t){return t?e.map(function(n){var s=n[0],u=n[1],h=u.map(function(f){return typeof f=="string"?t+f:typeof f=="object"?Object.fromEntries(Object.entries(f).map(function(a){var w=a[0],b=a[1];return[t+w,b]})):f});return[s,h]}):e}function xV(e){if(e<1)return{get:function(){},set:function(){}};var t=0,n=new Map,s=new Map;function u(h,f){n.set(h,f),t++,t>e&&(t=0,s=n,n=new Map)}return{get:function(f){var a=n.get(f);if(a!==void 0)return a;if((a=s.get(f))!==void 0)return u(f,a),a},set:function(f,a){n.has(f)?n.set(f,a):u(f,a)}}}var nM="!";function wV(e){var t=e.separator||":",n=t.length===1,s=t[0],u=t.length;return function(f){for(var a=[],w=0,b=0,P,A=0;A<f.length;A++){var M=f[A];if(w===0){if(M===s&&(n||f.slice(A,A+u)===t)){a.push(f.slice(b,A)),b=A+u;continue}if(M==="/"){P=A;continue}}M==="["?w++:M==="]"&&w--}var B=a.length===0?f:f.substring(b),V=B.startsWith(nM),j=V?B.substring(1):B,K=P&&P>b?P-b:void 0;return{modifiers:a,hasImportantModifier:V,baseClassName:j,maybePostfixModifierPosition:K}}}function bV(e){if(e.length<=1)return e;var t=[],n=[];return e.forEach(function(s){var u=s[0]==="[";u?(t.push.apply(t,n.sort().concat([s])),n=[]):n.push(s)}),t.push.apply(t,n.sort()),t}function SV(e){return{cache:xV(e.cacheSize),splitModifiers:wV(e),...mV(e)}}var CV=/\s+/;function TV(e,t){var n=t.splitModifiers,s=t.getClassGroupId,u=t.getConflictingClassGroupIds,h=new Set;return e.trim().split(CV).map(function(f){var a=n(f),w=a.modifiers,b=a.hasImportantModifier,P=a.baseClassName,A=a.maybePostfixModifierPosition,M=s(A?P.substring(0,A):P),B=!!A;if(!M){if(!A)return{isTailwindClass:!1,originalClassName:f};if(M=s(P),!M)return{isTailwindClass:!1,originalClassName:f};B=!1}var V=bV(w).join(":"),j=b?V+nM:V;return{isTailwindClass:!0,modifierId:j,classGroupId:M,originalClassName:f,hasPostfixModifier:B}}).reverse().filter(function(f){if(!f.isTailwindClass)return!0;var a=f.modifierId,w=f.classGroupId,b=f.hasPostfixModifier,P=a+w;return h.has(P)?!1:(h.add(P),u(w,b).forEach(function(A){return h.add(a+A)}),!0)}).reverse().map(function(f){return f.originalClassName}).join(" ")}function EV(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var s,u,h,f=a;function a(b){var P=t[0],A=t.slice(1),M=A.reduce(function(B,V){return V(B)},P());return s=SV(M),u=s.cache.get,h=s.cache.set,f=w,w(b)}function w(b){var P=u(b);if(P)return P;var A=TV(b,s);return h(b,A),A}return function(){return f(pV.apply(null,arguments))}}function Rn(e){var t=function(s){return s[e]||[]};return t.isThemeGetter=!0,t}var rM=/^\[(?:([a-z-]+):)?(.+)\]$/i,PV=/^\d+\/\d+$/,AV=new Set(["px","full","screen"]),kV=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,IV=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,MV=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function Gs(e){return su(e)||AV.has(e)||PV.test(e)||k0(e)}function k0(e){return wu(e,"length",FV)}function RV(e){return wu(e,"size",iM)}function DV(e){return wu(e,"position",iM)}function zV(e){return wu(e,"url",NV)}function gm(e){return wu(e,"number",su)}function su(e){return!Number.isNaN(Number(e))}function LV(e){return e.endsWith("%")&&su(e.slice(0,-1))}function Cd(e){return vT(e)||wu(e,"number",vT)}function Xt(e){return rM.test(e)}function Td(){return!0}function Fa(e){return kV.test(e)}function OV(e){return wu(e,"",BV)}function wu(e,t,n){var s=rM.exec(e);return s?s[1]?s[1]===t:n(s[2]):!1}function FV(e){return IV.test(e)}function iM(){return!1}function NV(e){return e.startsWith("url(")}function vT(e){return Number.isInteger(Number(e))}function BV(e){return MV.test(e)}function VV(){var e=Rn("colors"),t=Rn("spacing"),n=Rn("blur"),s=Rn("brightness"),u=Rn("borderColor"),h=Rn("borderRadius"),f=Rn("borderSpacing"),a=Rn("borderWidth"),w=Rn("contrast"),b=Rn("grayscale"),P=Rn("hueRotate"),A=Rn("invert"),M=Rn("gap"),B=Rn("gradientColorStops"),V=Rn("gradientColorStopPositions"),j=Rn("inset"),K=Rn("margin"),F=Rn("opacity"),N=Rn("padding"),W=Rn("saturate"),ne=Rn("scale"),pe=Rn("sepia"),Ce=Rn("skew"),Ie=Rn("space"),Se=Rn("translate"),qe=function(){return["auto","contain","none"]},ze=function(){return["auto","hidden","clip","visible","scroll"]},Et=function(){return["auto",Xt,t]},Ge=function(){return[Xt,t]},yt=function(){return["",Gs]},xt=function(){return["auto",su,Xt]},Ot=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},zt=function(){return["solid","dashed","dotted","double","none"]},St=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},je=function(){return["start","end","center","between","around","evenly","stretch"]},ct=function(){return["","0",Xt]},Pt=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},Ht=function(){return[su,gm]},Zt=function(){return[su,Xt]};return{cacheSize:500,theme:{colors:[Td],spacing:[Gs],blur:["none","",Fa,Xt],brightness:Ht(),borderColor:[e],borderRadius:["none","","full",Fa,Xt],borderSpacing:Ge(),borderWidth:yt(),contrast:Ht(),grayscale:ct(),hueRotate:Zt(),invert:ct(),gap:Ge(),gradientColorStops:[e],gradientColorStopPositions:[LV,k0],inset:Et(),margin:Et(),opacity:Ht(),padding:Ge(),saturate:Ht(),scale:Ht(),sepia:ct(),skew:Zt(),space:Ge(),translate:Ge()},classGroups:{aspect:[{aspect:["auto","square","video",Xt]}],container:["container"],columns:[{columns:[Fa]}],"break-after":[{"break-after":Pt()}],"break-before":[{"break-before":Pt()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(Ot(),[Xt])}],overflow:[{overflow:ze()}],"overflow-x":[{"overflow-x":ze()}],"overflow-y":[{"overflow-y":ze()}],overscroll:[{overscroll:qe()}],"overscroll-x":[{"overscroll-x":qe()}],"overscroll-y":[{"overscroll-y":qe()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[j]}],"inset-x":[{"inset-x":[j]}],"inset-y":[{"inset-y":[j]}],start:[{start:[j]}],end:[{end:[j]}],top:[{top:[j]}],right:[{right:[j]}],bottom:[{bottom:[j]}],left:[{left:[j]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Cd]}],basis:[{basis:Et()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Xt]}],grow:[{grow:ct()}],shrink:[{shrink:ct()}],order:[{order:["first","last","none",Cd]}],"grid-cols":[{"grid-cols":[Td]}],"col-start-end":[{col:["auto",{span:["full",Cd]},Xt]}],"col-start":[{"col-start":xt()}],"col-end":[{"col-end":xt()}],"grid-rows":[{"grid-rows":[Td]}],"row-start-end":[{row:["auto",{span:[Cd]},Xt]}],"row-start":[{"row-start":xt()}],"row-end":[{"row-end":xt()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Xt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Xt]}],gap:[{gap:[M]}],"gap-x":[{"gap-x":[M]}],"gap-y":[{"gap-y":[M]}],"justify-content":[{justify:["normal"].concat(je())}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat(je(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(je(),["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[N]}],px:[{px:[N]}],py:[{py:[N]}],ps:[{ps:[N]}],pe:[{pe:[N]}],pt:[{pt:[N]}],pr:[{pr:[N]}],pb:[{pb:[N]}],pl:[{pl:[N]}],m:[{m:[K]}],mx:[{mx:[K]}],my:[{my:[K]}],ms:[{ms:[K]}],me:[{me:[K]}],mt:[{mt:[K]}],mr:[{mr:[K]}],mb:[{mb:[K]}],ml:[{ml:[K]}],"space-x":[{"space-x":[Ie]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[Ie]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",Xt,t]}],"min-w":[{"min-w":["min","max","fit",Xt,Gs]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[Fa]},Fa,Xt]}],h:[{h:[Xt,t,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",Xt,Gs]}],"max-h":[{"max-h":[Xt,t,"min","max","fit"]}],"font-size":[{text:["base",Fa,k0]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",gm]}],"font-family":[{font:[Td]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Xt]}],"line-clamp":[{"line-clamp":["none",su,gm]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Xt,Gs]}],"list-image":[{"list-image":["none",Xt]}],"list-style-type":[{list:["none","disc","decimal",Xt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[F]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[F]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(zt(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",Gs]}],"underline-offset":[{"underline-offset":["auto",Xt,Gs]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:Ge()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Xt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Xt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[F]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(Ot(),[DV])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",RV]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},zV]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[V]}],"gradient-via-pos":[{via:[V]}],"gradient-to-pos":[{to:[V]}],"gradient-from":[{from:[B]}],"gradient-via":[{via:[B]}],"gradient-to":[{to:[B]}],rounded:[{rounded:[h]}],"rounded-s":[{"rounded-s":[h]}],"rounded-e":[{"rounded-e":[h]}],"rounded-t":[{"rounded-t":[h]}],"rounded-r":[{"rounded-r":[h]}],"rounded-b":[{"rounded-b":[h]}],"rounded-l":[{"rounded-l":[h]}],"rounded-ss":[{"rounded-ss":[h]}],"rounded-se":[{"rounded-se":[h]}],"rounded-ee":[{"rounded-ee":[h]}],"rounded-es":[{"rounded-es":[h]}],"rounded-tl":[{"rounded-tl":[h]}],"rounded-tr":[{"rounded-tr":[h]}],"rounded-br":[{"rounded-br":[h]}],"rounded-bl":[{"rounded-bl":[h]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[F]}],"border-style":[{border:[].concat(zt(),["hidden"])}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[F]}],"divide-style":[{divide:zt()}],"border-color":[{border:[u]}],"border-color-x":[{"border-x":[u]}],"border-color-y":[{"border-y":[u]}],"border-color-t":[{"border-t":[u]}],"border-color-r":[{"border-r":[u]}],"border-color-b":[{"border-b":[u]}],"border-color-l":[{"border-l":[u]}],"divide-color":[{divide:[u]}],"outline-style":[{outline:[""].concat(zt())}],"outline-offset":[{"outline-offset":[Xt,Gs]}],"outline-w":[{outline:[Gs]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:yt()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[F]}],"ring-offset-w":[{"ring-offset":[Gs]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Fa,OV]}],"shadow-color":[{shadow:[Td]}],opacity:[{opacity:[F]}],"mix-blend":[{"mix-blend":St()}],"bg-blend":[{"bg-blend":St()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[s]}],contrast:[{contrast:[w]}],"drop-shadow":[{"drop-shadow":["","none",Fa,Xt]}],grayscale:[{grayscale:[b]}],"hue-rotate":[{"hue-rotate":[P]}],invert:[{invert:[A]}],saturate:[{saturate:[W]}],sepia:[{sepia:[pe]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[s]}],"backdrop-contrast":[{"backdrop-contrast":[w]}],"backdrop-grayscale":[{"backdrop-grayscale":[b]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[P]}],"backdrop-invert":[{"backdrop-invert":[A]}],"backdrop-opacity":[{"backdrop-opacity":[F]}],"backdrop-saturate":[{"backdrop-saturate":[W]}],"backdrop-sepia":[{"backdrop-sepia":[pe]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[f]}],"border-spacing-x":[{"border-spacing-x":[f]}],"border-spacing-y":[{"border-spacing-y":[f]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Xt]}],duration:[{duration:Zt()}],ease:[{ease:["linear","in","out","in-out",Xt]}],delay:[{delay:Zt()}],animate:[{animate:["none","spin","ping","pulse","bounce",Xt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[ne]}],"scale-x":[{"scale-x":[ne]}],"scale-y":[{"scale-y":[ne]}],rotate:[{rotate:[Cd,Xt]}],"translate-x":[{"translate-x":[Se]}],"translate-y":[{"translate-y":[Se]}],"skew-x":[{"skew-x":[Ce]}],"skew-y":[{"skew-y":[Ce]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Xt]}],accent:[{accent:["auto",e]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Xt]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":Ge()}],"scroll-mx":[{"scroll-mx":Ge()}],"scroll-my":[{"scroll-my":Ge()}],"scroll-ms":[{"scroll-ms":Ge()}],"scroll-me":[{"scroll-me":Ge()}],"scroll-mt":[{"scroll-mt":Ge()}],"scroll-mr":[{"scroll-mr":Ge()}],"scroll-mb":[{"scroll-mb":Ge()}],"scroll-ml":[{"scroll-ml":Ge()}],"scroll-p":[{"scroll-p":Ge()}],"scroll-px":[{"scroll-px":Ge()}],"scroll-py":[{"scroll-py":Ge()}],"scroll-ps":[{"scroll-ps":Ge()}],"scroll-pe":[{"scroll-pe":Ge()}],"scroll-pt":[{"scroll-pt":Ge()}],"scroll-pr":[{"scroll-pr":Ge()}],"scroll-pb":[{"scroll-pb":Ge()}],"scroll-pl":[{"scroll-pl":Ge()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Xt]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Gs,gm]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}var $V=EV(VV);function wl(...e){return $V(fV(e))}function sM({className:e="",children:t,gap:n,md:s,row:u,...h}){let f="";return s&&(f+="md:naxatw-flex-row "),ae("div",{className:wl(`naxatw-flex naxatw-flex-col ${f}
      ${e}`),...h,style:{gap:n?`${n*.25}rem`:""},children:t})}function Ts({className:e="",children:t,gap:n,...s}){return ae("div",{className:wl(`naxatw-flex naxatw-flex-row
      ${e}`),...s,style:{gap:n?`${n*.25}rem`:""},children:t})}function ou({className:e="",children:t,gap:n,...s}){return ae("div",{className:wl(`naxatw-flex naxatw-flex-col ${e}`),style:{gap:n?`${n*.25}rem`:""},...s,children:t})}const jV="/assets/landing-image-eda3ebc4.svg";function Jo({aspectRation:e,styleClass:t,src:n,alt:s,width:u,className:h}){return ae("div",{className:`image-cover naxatw-aspect-${e} ${t}}  `,style:{aspectRatio:e},children:ae("img",{src:n,alt:s,width:u,className:h})})}function UV(){return ae("section",{className:"home naxatw-bg-primary naxatw-w-full naxatw-h-[35rem]",children:gt(Ts,{className:"naxatw-container naxatw-h-full naxatw-items-center naxatw-justify-between",children:[gt(ou,{gap:10,children:[gt("div",{className:"naxatw-animate-fade-up",children:[ae("h1",{className:"naxatw-text-white naxatw-text-[5rem]",children:"GeoSewa"}),ae("p",{className:"naxatw-text-white naxatw-tracking-widest naxatw-text-[1.15rem] naxatw-mt-3 naxatw-ml-3",children:"Your Spatial Reference!"})]}),ae("p",{className:"naxatw-text-white naxatw-text-[1.5rem] naxatw-ml-3 naxatw-animate-fade-up",children:"Unlock your potential with notes and mock exam mastery!!"})]}),ae(Jo,{src:jV,width:400,className:"naxatw-animate-fade-up naxatw-hidden md:naxatw-flex"})]})})}const qV="/assets/about-image-87671f32.svg";function GV(e){if(typeof Proxy>"u")return e;const t=new Map,n=(...s)=>e(...s);return new Proxy(n,{get:(s,u)=>u==="create"?e:(t.has(u)||t.set(u,e(u)),t.get(u))})}function Cf(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const I0=e=>Array.isArray(e);function oM(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let s=0;s<n;s++)if(t[s]!==e[s])return!1;return!0}function Tf(e){return typeof e=="string"||Array.isArray(e)}function _T(e){const t=[{},{}];return e==null||e.values.forEach((n,s)=>{t[0][s]=n.get(),t[1][s]=n.getVelocity()}),t}function F1(e,t,n,s){if(typeof t=="function"){const[u,h]=_T(s);t=t(n!==void 0?n:e.custom,u,h)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[u,h]=_T(s);t=t(n!==void 0?n:e.custom,u,h)}return t}function jy(e,t,n){const s=e.getProps();return F1(s,t,n!==void 0?n:s.custom,e)}const N1=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],B1=["initial",...N1],Ff=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],bl=new Set(Ff),So=e=>e*1e3,na=e=>e/1e3,ZV={type:"spring",stiffness:500,damping:25,restSpeed:10},WV=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),HV={type:"keyframes",duration:.8},KV={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},XV=(e,{keyframes:t})=>t.length>2?HV:bl.has(e)?e.startsWith("scale")?WV(t[1]):ZV:KV;function V1(e,t){return e?e[t]||e.default||e:void 0}const QV={skipAnimations:!1,useManualTiming:!1},YV=e=>e!==null;function Uy(e,{repeat:t,repeatType:n="loop"},s){const u=e.filter(YV),h=t&&n!=="loop"&&t%2===1?0:u.length-1;return!h||s===void 0?u[h]:s}const Ur=e=>e;function JV(e){let t=new Set,n=new Set,s=!1,u=!1;const h=new WeakSet;let f={delta:0,timestamp:0,isProcessing:!1};function a(b){h.has(b)&&(w.schedule(b),e()),b(f)}const w={schedule:(b,P=!1,A=!1)=>{const B=A&&s?t:n;return P&&h.add(b),B.has(b)||B.add(b),b},cancel:b=>{n.delete(b),h.delete(b)},process:b=>{if(f=b,s){u=!0;return}s=!0,[t,n]=[n,t],n.clear(),t.forEach(a),s=!1,u&&(u=!1,w.process(b))}};return w}const ym=["read","resolveKeyframes","update","preRender","render","postRender"],e$=40;function aM(e,t){let n=!1,s=!0;const u={delta:0,timestamp:0,isProcessing:!1},h=()=>n=!0,f=ym.reduce((F,N)=>(F[N]=JV(h),F),{}),{read:a,resolveKeyframes:w,update:b,preRender:P,render:A,postRender:M}=f,B=()=>{const F=performance.now();n=!1,u.delta=s?1e3/60:Math.max(Math.min(F-u.timestamp,e$),1),u.timestamp=F,u.isProcessing=!0,a.process(u),w.process(u),b.process(u),P.process(u),A.process(u),M.process(u),u.isProcessing=!1,n&&t&&(s=!1,e(B))},V=()=>{n=!0,s=!0,u.isProcessing||e(B)};return{schedule:ym.reduce((F,N)=>{const W=f[N];return F[N]=(ne,pe=!1,Ce=!1)=>(n||V(),W.schedule(ne,pe,Ce)),F},{}),cancel:F=>{for(let N=0;N<ym.length;N++)f[ym[N]].cancel(F)},state:u,steps:f}}const{schedule:gn,cancel:ml,state:$r,steps:H_}=aM(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ur,!0),lM=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,t$=1e-7,n$=12;function r$(e,t,n,s,u){let h,f,a=0;do f=t+(n-t)/2,h=lM(f,s,u)-e,h>0?n=f:t=f;while(Math.abs(h)>t$&&++a<n$);return f}function Nf(e,t,n,s){if(e===t&&n===s)return Ur;const u=h=>r$(h,0,1,e,n);return h=>h===0||h===1?h:lM(u(h),t,s)}const uM=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,cM=e=>t=>1-e(1-t),hM=Nf(.33,1.53,.69,.99),$1=cM(hM),dM=uM($1),fM=e=>(e*=2)<1?.5*$1(e):.5*(2-Math.pow(2,-10*(e-1))),j1=e=>1-Math.sin(Math.acos(e)),pM=cM(j1),mM=uM(j1),gM=e=>/^0[^.\s]+$/u.test(e);function i$(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||gM(e):!0}let s$=Ur,yM=Ur;const vM=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),_M=e=>t=>typeof t=="string"&&t.startsWith(e),xM=_M("--"),o$=_M("var(--"),U1=e=>o$(e)?a$.test(e.split("/*")[0].trim()):!1,a$=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,l$=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function u$(e){const t=l$.exec(e);if(!t)return[,];const[,n,s,u]=t;return[`--${n??s}`,u]}function wM(e,t,n=1){const[s,u]=u$(e);if(!s)return;const h=window.getComputedStyle(t).getPropertyValue(s);if(h){const f=h.trim();return vM(f)?parseFloat(f):f}return U1(u)?wM(u,t,n+1):u}const gl=(e,t,n)=>n>t?t:n<e?e:n,lh={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Ef={...lh,transform:e=>gl(0,1,e)},vm={...lh,default:1},Bf=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Va=Bf("deg"),Co=Bf("%"),Mt=Bf("px"),c$=Bf("vh"),h$=Bf("vw"),xT={...Co,parse:e=>Co.parse(e)/100,transform:e=>Co.transform(e*100)},d$=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),wT=e=>e===lh||e===Mt,bT=(e,t)=>parseFloat(e.split(", ")[t]),ST=(e,t)=>(n,{transform:s})=>{if(s==="none"||!s)return 0;const u=s.match(/^matrix3d\((.+)\)$/u);if(u)return bT(u[1],t);{const h=s.match(/^matrix\((.+)\)$/u);return h?bT(h[1],e):0}},f$=new Set(["x","y","z"]),p$=Ff.filter(e=>!f$.has(e));function m$(e){const t=[];return p$.forEach(n=>{const s=e.getValue(n);s!==void 0&&(t.push([n,s.get()]),s.set(n.startsWith("scale")?1:0))}),t}const Kc={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:ST(4,13),y:ST(5,14)};Kc.translateX=Kc.x;Kc.translateY=Kc.y;const bM=e=>t=>t.test(e),g$={test:e=>e==="auto",parse:e=>e},SM=[lh,Mt,Co,Va,h$,c$,g$],CT=e=>SM.find(bM(e)),hu=new Set;let M0=!1,R0=!1;function CM(){if(R0){const e=Array.from(hu).filter(s=>s.needsMeasurement),t=new Set(e.map(s=>s.element)),n=new Map;t.forEach(s=>{const u=m$(s);u.length&&(n.set(s,u),s.render())}),e.forEach(s=>s.measureInitialState()),t.forEach(s=>{s.render();const u=n.get(s);u&&u.forEach(([h,f])=>{var a;(a=s.getValue(h))===null||a===void 0||a.set(f)})}),e.forEach(s=>s.measureEndState()),e.forEach(s=>{s.suspendedScrollY!==void 0&&window.scrollTo(0,s.suspendedScrollY)})}R0=!1,M0=!1,hu.forEach(e=>e.complete()),hu.clear()}function TM(){hu.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(R0=!0)})}function y$(){TM(),CM()}class q1{constructor(t,n,s,u,h,f=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=s,this.motionValue=u,this.element=h,this.isAsync=f}scheduleResolve(){this.isScheduled=!0,this.isAsync?(hu.add(this),M0||(M0=!0,gn.read(TM),gn.resolveKeyframes(CM))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:s,motionValue:u}=this;for(let h=0;h<t.length;h++)if(t[h]===null)if(h===0){const f=u==null?void 0:u.get(),a=t[t.length-1];if(f!==void 0)t[0]=f;else if(s&&n){const w=s.readValue(n,a);w!=null&&(t[0]=w)}t[0]===void 0&&(t[0]=a),u&&f===void 0&&u.set(t[0])}else t[h]=t[h-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),hu.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,hu.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const Xd=e=>Math.round(e*1e5)/1e5,G1=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function v$(e){return e==null}const _$=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Z1=(e,t)=>n=>!!(typeof n=="string"&&_$.test(n)&&n.startsWith(e)||t&&!v$(n)&&Object.prototype.hasOwnProperty.call(n,t)),EM=(e,t,n)=>s=>{if(typeof s!="string")return s;const[u,h,f,a]=s.match(G1);return{[e]:parseFloat(u),[t]:parseFloat(h),[n]:parseFloat(f),alpha:a!==void 0?parseFloat(a):1}},x$=e=>gl(0,255,e),K_={...lh,transform:e=>Math.round(x$(e))},au={test:Z1("rgb","red"),parse:EM("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:s=1})=>"rgba("+K_.transform(e)+", "+K_.transform(t)+", "+K_.transform(n)+", "+Xd(Ef.transform(s))+")"};function w$(e){let t="",n="",s="",u="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),s=e.substring(5,7),u=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),s=e.substring(3,4),u=e.substring(4,5),t+=t,n+=n,s+=s,u+=u),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(s,16),alpha:u?parseInt(u,16)/255:1}}const D0={test:Z1("#"),parse:w$,transform:au.transform},Cc={test:Z1("hsl","hue"),parse:EM("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:s=1})=>"hsla("+Math.round(e)+", "+Co.transform(Xd(t))+", "+Co.transform(Xd(n))+", "+Xd(Ef.transform(s))+")"},si={test:e=>au.test(e)||D0.test(e)||Cc.test(e),parse:e=>au.test(e)?au.parse(e):Cc.test(e)?Cc.parse(e):D0.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?au.transform(e):Cc.transform(e)},b$=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function S$(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(G1))===null||t===void 0?void 0:t.length)||0)+(((n=e.match(b$))===null||n===void 0?void 0:n.length)||0)>0}const PM="number",AM="color",C$="var",T$="var(",TT="${}",E$=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Pf(e){const t=e.toString(),n=[],s={color:[],number:[],var:[]},u=[];let h=0;const a=t.replace(E$,w=>(si.test(w)?(s.color.push(h),u.push(AM),n.push(si.parse(w))):w.startsWith(T$)?(s.var.push(h),u.push(C$),n.push(w)):(s.number.push(h),u.push(PM),n.push(parseFloat(w))),++h,TT)).split(TT);return{values:n,split:a,indexes:s,types:u}}function kM(e){return Pf(e).values}function IM(e){const{split:t,types:n}=Pf(e),s=t.length;return u=>{let h="";for(let f=0;f<s;f++)if(h+=t[f],u[f]!==void 0){const a=n[f];a===PM?h+=Xd(u[f]):a===AM?h+=si.transform(u[f]):h+=u[f]}return h}}const P$=e=>typeof e=="number"?0:e;function A$(e){const t=kM(e);return IM(e)(t.map(P$))}const yl={test:S$,parse:kM,createTransformer:IM,getAnimatableNone:A$},k$=new Set(["brightness","contrast","saturate","opacity"]);function I$(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[s]=n.match(G1)||[];if(!s)return e;const u=n.replace(s,"");let h=k$.has(t)?1:0;return s!==n&&(h*=100),t+"("+h+u+")"}const M$=/\b([a-z-]*)\(.*?\)/gu,z0={...yl,getAnimatableNone:e=>{const t=e.match(M$);return t?t.map(I$).join(" "):e}},R$={borderWidth:Mt,borderTopWidth:Mt,borderRightWidth:Mt,borderBottomWidth:Mt,borderLeftWidth:Mt,borderRadius:Mt,radius:Mt,borderTopLeftRadius:Mt,borderTopRightRadius:Mt,borderBottomRightRadius:Mt,borderBottomLeftRadius:Mt,width:Mt,maxWidth:Mt,height:Mt,maxHeight:Mt,top:Mt,right:Mt,bottom:Mt,left:Mt,padding:Mt,paddingTop:Mt,paddingRight:Mt,paddingBottom:Mt,paddingLeft:Mt,margin:Mt,marginTop:Mt,marginRight:Mt,marginBottom:Mt,marginLeft:Mt,backgroundPositionX:Mt,backgroundPositionY:Mt},D$={rotate:Va,rotateX:Va,rotateY:Va,rotateZ:Va,scale:vm,scaleX:vm,scaleY:vm,scaleZ:vm,skew:Va,skewX:Va,skewY:Va,distance:Mt,translateX:Mt,translateY:Mt,translateZ:Mt,x:Mt,y:Mt,z:Mt,perspective:Mt,transformPerspective:Mt,opacity:Ef,originX:xT,originY:xT,originZ:Mt},ET={...lh,transform:Math.round},W1={...R$,...D$,zIndex:ET,size:Mt,fillOpacity:Ef,strokeOpacity:Ef,numOctaves:ET},z$={...W1,color:si,backgroundColor:si,outlineColor:si,fill:si,stroke:si,borderColor:si,borderTopColor:si,borderRightColor:si,borderBottomColor:si,borderLeftColor:si,filter:z0,WebkitFilter:z0},H1=e=>z$[e];function MM(e,t){let n=H1(e);return n!==z0&&(n=yl),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const L$=new Set(["auto","none","0"]);function O$(e,t,n){let s=0,u;for(;s<e.length&&!u;){const h=e[s];typeof h=="string"&&!L$.has(h)&&Pf(h).values.length&&(u=e[s]),s++}if(u&&n)for(const h of t)e[h]=MM(n,u)}class RM extends q1{constructor(t,n,s,u,h){super(t,n,s,u,h,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:s}=this;if(!n||!n.current)return;super.readKeyframes();for(let w=0;w<t.length;w++){let b=t[w];if(typeof b=="string"&&(b=b.trim(),U1(b))){const P=wM(b,n.current);P!==void 0&&(t[w]=P),w===t.length-1&&(this.finalKeyframe=b)}}if(this.resolveNoneKeyframes(),!d$.has(s)||t.length!==2)return;const[u,h]=t,f=CT(u),a=CT(h);if(f!==a)if(wT(f)&&wT(a))for(let w=0;w<t.length;w++){const b=t[w];typeof b=="string"&&(t[w]=parseFloat(b))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,s=[];for(let u=0;u<t.length;u++)i$(t[u])&&s.push(u);s.length&&O$(t,s,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:s}=this;if(!t||!t.current)return;s==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Kc[s](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const u=n[n.length-1];u!==void 0&&t.getValue(s,u).jump(u,!1)}measureEndState(){var t;const{element:n,name:s,unresolvedKeyframes:u}=this;if(!n||!n.current)return;const h=n.getValue(s);h&&h.jump(this.measuredOrigin,!1);const f=u.length-1,a=u[f];u[f]=Kc[s](n.measureViewportBox(),window.getComputedStyle(n.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((t=this.removedTransforms)===null||t===void 0)&&t.length&&this.removedTransforms.forEach(([w,b])=>{n.getValue(w).set(b)}),this.resolveNoneKeyframes()}}function K1(e){return typeof e=="function"}let qm;function F$(){qm=void 0}const To={now:()=>(qm===void 0&&To.set($r.isProcessing||QV.useManualTiming?$r.timestamp:performance.now()),qm),set:e=>{qm=e,queueMicrotask(F$)}},PT=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(yl.test(e)||e==="0")&&!e.startsWith("url("));function N$(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function B$(e,t,n,s){const u=e[0];if(u===null)return!1;if(t==="display"||t==="visibility")return!0;const h=e[e.length-1],f=PT(u,t),a=PT(h,t);return!f||!a?!1:N$(e)||(n==="spring"||K1(n))&&s}const V$=40;class DM{constructor({autoplay:t=!0,delay:n=0,type:s="keyframes",repeat:u=0,repeatDelay:h=0,repeatType:f="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=To.now(),this.options={autoplay:t,delay:n,type:s,repeat:u,repeatDelay:h,repeatType:f,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>V$?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&y$(),this._resolved}onKeyframesResolved(t,n){this.resolvedAt=To.now(),this.hasAttemptedResolve=!0;const{name:s,type:u,velocity:h,delay:f,onComplete:a,onUpdate:w,isGenerator:b}=this.options;if(!b&&!B$(t,s,u,h))if(f)this.options.duration=0;else{w==null||w(Uy(t,this.options,n)),a==null||a(),this.resolveFinishedPromise();return}const P=this.initPlayback(t,n);P!==!1&&(this._resolved={keyframes:t,finalKeyframe:n,...P},this.onPostResolved())}onPostResolved(){}then(t,n){return this.currentFinishedPromise.then(t,n)}updateFinishedPromise(){this.currentFinishedPromise=new Promise(t=>{this.resolveFinishedPromise=t})}}function zM(e,t){return t?e*(1e3/t):0}const $$=5;function LM(e,t,n){const s=Math.max(t-$$,0);return zM(n-e(s),t-s)}const X_=.001,j$=.01,AT=10,U$=.05,q$=1;function G$({duration:e=800,bounce:t=.25,velocity:n=0,mass:s=1}){let u,h;s$(e<=So(AT));let f=1-t;f=gl(U$,q$,f),e=gl(j$,AT,na(e)),f<1?(u=b=>{const P=b*f,A=P*e,M=P-n,B=L0(b,f),V=Math.exp(-A);return X_-M/B*V},h=b=>{const A=b*f*e,M=A*n+n,B=Math.pow(f,2)*Math.pow(b,2)*e,V=Math.exp(-A),j=L0(Math.pow(b,2),f);return(-u(b)+X_>0?-1:1)*((M-B)*V)/j}):(u=b=>{const P=Math.exp(-b*e),A=(b-n)*e+1;return-X_+P*A},h=b=>{const P=Math.exp(-b*e),A=(n-b)*(e*e);return P*A});const a=5/e,w=W$(u,h,a);if(e=So(e),isNaN(w))return{stiffness:100,damping:10,duration:e};{const b=Math.pow(w,2)*s;return{stiffness:b,damping:f*2*Math.sqrt(s*b),duration:e}}}const Z$=12;function W$(e,t,n){let s=n;for(let u=1;u<Z$;u++)s=s-e(s)/t(s);return s}function L0(e,t){return e*Math.sqrt(1-t*t)}const H$=["duration","bounce"],K$=["stiffness","damping","mass"];function kT(e,t){return t.some(n=>e[n]!==void 0)}function X$(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!kT(e,K$)&&kT(e,H$)){const n=G$(e);t={...t,...n,mass:1},t.isResolvedFromDuration=!0}return t}function OM({keyframes:e,restDelta:t,restSpeed:n,...s}){const u=e[0],h=e[e.length-1],f={done:!1,value:u},{stiffness:a,damping:w,mass:b,duration:P,velocity:A,isResolvedFromDuration:M}=X$({...s,velocity:-na(s.velocity||0)}),B=A||0,V=w/(2*Math.sqrt(a*b)),j=h-u,K=na(Math.sqrt(a/b)),F=Math.abs(j)<5;n||(n=F?.01:2),t||(t=F?.005:.5);let N;if(V<1){const W=L0(K,V);N=ne=>{const pe=Math.exp(-V*K*ne);return h-pe*((B+V*K*j)/W*Math.sin(W*ne)+j*Math.cos(W*ne))}}else if(V===1)N=W=>h-Math.exp(-K*W)*(j+(B+K*j)*W);else{const W=K*Math.sqrt(V*V-1);N=ne=>{const pe=Math.exp(-V*K*ne),Ce=Math.min(W*ne,300);return h-pe*((B+V*K*j)*Math.sinh(Ce)+W*j*Math.cosh(Ce))/W}}return{calculatedDuration:M&&P||null,next:W=>{const ne=N(W);if(M)f.done=W>=P;else{let pe=0;V<1&&(pe=W===0?So(B):LM(N,W,ne));const Ce=Math.abs(pe)<=n,Ie=Math.abs(h-ne)<=t;f.done=Ce&&Ie}return f.value=f.done?h:ne,f}}}function IT({keyframes:e,velocity:t=0,power:n=.8,timeConstant:s=325,bounceDamping:u=10,bounceStiffness:h=500,modifyTarget:f,min:a,max:w,restDelta:b=.5,restSpeed:P}){const A=e[0],M={done:!1,value:A},B=Se=>a!==void 0&&Se<a||w!==void 0&&Se>w,V=Se=>a===void 0?w:w===void 0||Math.abs(a-Se)<Math.abs(w-Se)?a:w;let j=n*t;const K=A+j,F=f===void 0?K:f(K);F!==K&&(j=F-A);const N=Se=>-j*Math.exp(-Se/s),W=Se=>F+N(Se),ne=Se=>{const qe=N(Se),ze=W(Se);M.done=Math.abs(qe)<=b,M.value=M.done?F:ze};let pe,Ce;const Ie=Se=>{B(M.value)&&(pe=Se,Ce=OM({keyframes:[M.value,V(M.value)],velocity:LM(W,Se,M.value),damping:u,stiffness:h,restDelta:b,restSpeed:P}))};return Ie(0),{calculatedDuration:null,next:Se=>{let qe=!1;return!Ce&&pe===void 0&&(qe=!0,ne(Se),Ie(Se)),pe!==void 0&&Se>=pe?Ce.next(Se-pe):(!qe&&ne(Se),M)}}}const Q$=Nf(.42,0,1,1),Y$=Nf(0,0,.58,1),FM=Nf(.42,0,.58,1),J$=e=>Array.isArray(e)&&typeof e[0]!="number",X1=e=>Array.isArray(e)&&typeof e[0]=="number",ej={linear:Ur,easeIn:Q$,easeInOut:FM,easeOut:Y$,circIn:j1,circInOut:mM,circOut:pM,backIn:$1,backInOut:dM,backOut:hM,anticipate:fM},MT=e=>{if(X1(e)){yM(e.length===4);const[t,n,s,u]=e;return Nf(t,n,s,u)}else if(typeof e=="string")return ej[e];return e},tj=(e,t)=>n=>t(e(n)),ra=(...e)=>e.reduce(tj),Xc=(e,t,n)=>{const s=t-e;return s===0?1:(n-e)/s},Gn=(e,t,n)=>e+(t-e)*n;function Q_(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function nj({hue:e,saturation:t,lightness:n,alpha:s}){e/=360,t/=100,n/=100;let u=0,h=0,f=0;if(!t)u=h=f=n;else{const a=n<.5?n*(1+t):n+t-n*t,w=2*n-a;u=Q_(w,a,e+1/3),h=Q_(w,a,e),f=Q_(w,a,e-1/3)}return{red:Math.round(u*255),green:Math.round(h*255),blue:Math.round(f*255),alpha:s}}function Dg(e,t){return n=>n>0?t:e}const Y_=(e,t,n)=>{const s=e*e,u=n*(t*t-s)+s;return u<0?0:Math.sqrt(u)},rj=[D0,au,Cc],ij=e=>rj.find(t=>t.test(e));function RT(e){const t=ij(e);if(!t)return!1;let n=t.parse(e);return t===Cc&&(n=nj(n)),n}const DT=(e,t)=>{const n=RT(e),s=RT(t);if(!n||!s)return Dg(e,t);const u={...n};return h=>(u.red=Y_(n.red,s.red,h),u.green=Y_(n.green,s.green,h),u.blue=Y_(n.blue,s.blue,h),u.alpha=Gn(n.alpha,s.alpha,h),au.transform(u))},O0=new Set(["none","hidden"]);function sj(e,t){return O0.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function oj(e,t){return n=>Gn(e,t,n)}function Q1(e){return typeof e=="number"?oj:typeof e=="string"?U1(e)?Dg:si.test(e)?DT:uj:Array.isArray(e)?NM:typeof e=="object"?si.test(e)?DT:aj:Dg}function NM(e,t){const n=[...e],s=n.length,u=e.map((h,f)=>Q1(h)(h,t[f]));return h=>{for(let f=0;f<s;f++)n[f]=u[f](h);return n}}function aj(e,t){const n={...e,...t},s={};for(const u in n)e[u]!==void 0&&t[u]!==void 0&&(s[u]=Q1(e[u])(e[u],t[u]));return u=>{for(const h in s)n[h]=s[h](u);return n}}function lj(e,t){var n;const s=[],u={color:0,var:0,number:0};for(let h=0;h<t.values.length;h++){const f=t.types[h],a=e.indexes[f][u[f]],w=(n=e.values[a])!==null&&n!==void 0?n:0;s[h]=w,u[f]++}return s}const uj=(e,t)=>{const n=yl.createTransformer(t),s=Pf(e),u=Pf(t);return s.indexes.var.length===u.indexes.var.length&&s.indexes.color.length===u.indexes.color.length&&s.indexes.number.length>=u.indexes.number.length?O0.has(e)&&!u.values.length||O0.has(t)&&!s.values.length?sj(e,t):ra(NM(lj(s,u),u.values),n):Dg(e,t)};function BM(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?Gn(e,t,n):Q1(e)(e,t)}function cj(e,t,n){const s=[],u=n||BM,h=e.length-1;for(let f=0;f<h;f++){let a=u(e[f],e[f+1]);if(t){const w=Array.isArray(t)?t[f]||Ur:t;a=ra(w,a)}s.push(a)}return s}function hj(e,t,{clamp:n=!0,ease:s,mixer:u}={}){const h=e.length;if(yM(h===t.length),h===1)return()=>t[0];if(h===2&&e[0]===e[1])return()=>t[1];e[0]>e[h-1]&&(e=[...e].reverse(),t=[...t].reverse());const f=cj(t,s,u),a=f.length,w=b=>{let P=0;if(a>1)for(;P<e.length-2&&!(b<e[P+1]);P++);const A=Xc(e[P],e[P+1],b);return f[P](A)};return n?b=>w(gl(e[0],e[h-1],b)):w}function dj(e,t){const n=e[e.length-1];for(let s=1;s<=t;s++){const u=Xc(0,t,s);e.push(Gn(n,1,u))}}function fj(e){const t=[0];return dj(t,e.length-1),t}function pj(e,t){return e.map(n=>n*t)}function mj(e,t){return e.map(()=>t||FM).splice(0,e.length-1)}function zg({duration:e=300,keyframes:t,times:n,ease:s="easeInOut"}){const u=J$(s)?s.map(MT):MT(s),h={done:!1,value:t[0]},f=pj(n&&n.length===t.length?n:fj(t),e),a=hj(f,t,{ease:Array.isArray(u)?u:mj(t,u)});return{calculatedDuration:e,next:w=>(h.value=a(w),h.done=w>=e,h)}}const zT=2e4;function gj(e){let t=0;const n=50;let s=e.next(t);for(;!s.done&&t<zT;)t+=n,s=e.next(t);return t>=zT?1/0:t}const yj=e=>{const t=({timestamp:n})=>e(n);return{start:()=>gn.update(t,!0),stop:()=>ml(t),now:()=>$r.isProcessing?$r.timestamp:To.now()}},vj={decay:IT,inertia:IT,tween:zg,keyframes:zg,spring:OM},_j=e=>e/100;class Y1 extends DM{constructor(t){super(t),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:w}=this.options;w&&w()};const{name:n,motionValue:s,element:u,keyframes:h}=this.options,f=(u==null?void 0:u.KeyframeResolver)||q1,a=(w,b)=>this.onKeyframesResolved(w,b);this.resolver=new f(h,a,n,s,u),this.resolver.scheduleResolve()}initPlayback(t){const{type:n="keyframes",repeat:s=0,repeatDelay:u=0,repeatType:h,velocity:f=0}=this.options,a=K1(n)?n:vj[n]||zg;let w,b;a!==zg&&typeof t[0]!="number"&&(w=ra(_j,BM(t[0],t[1])),t=[0,100]);const P=a({...this.options,keyframes:t});h==="mirror"&&(b=a({...this.options,keyframes:[...t].reverse(),velocity:-f})),P.calculatedDuration===null&&(P.calculatedDuration=gj(P));const{calculatedDuration:A}=P,M=A+u,B=M*(s+1)-u;return{generator:P,mirroredGenerator:b,mapPercentToKeyframes:w,calculatedDuration:A,resolvedDuration:M,totalDuration:B}}onPostResolved(){const{autoplay:t=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!t?this.pause():this.state=this.pendingPlayState}tick(t,n=!1){const{resolved:s}=this;if(!s){const{keyframes:Se}=this.options;return{done:!0,value:Se[Se.length-1]}}const{finalKeyframe:u,generator:h,mirroredGenerator:f,mapPercentToKeyframes:a,keyframes:w,calculatedDuration:b,totalDuration:P,resolvedDuration:A}=s;if(this.startTime===null)return h.next(0);const{delay:M,repeat:B,repeatType:V,repeatDelay:j,onUpdate:K}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-P/this.speed,this.startTime)),n?this.currentTime=t:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(t-this.startTime)*this.speed;const F=this.currentTime-M*(this.speed>=0?1:-1),N=this.speed>=0?F<0:F>P;this.currentTime=Math.max(F,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=P);let W=this.currentTime,ne=h;if(B){const Se=Math.min(this.currentTime,P)/A;let qe=Math.floor(Se),ze=Se%1;!ze&&Se>=1&&(ze=1),ze===1&&qe--,qe=Math.min(qe,B+1),!!(qe%2)&&(V==="reverse"?(ze=1-ze,j&&(ze-=j/A)):V==="mirror"&&(ne=f)),W=gl(0,1,ze)*A}const pe=N?{done:!1,value:w[0]}:ne.next(W);a&&(pe.value=a(pe.value));let{done:Ce}=pe;!N&&b!==null&&(Ce=this.speed>=0?this.currentTime>=P:this.currentTime<=0);const Ie=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&Ce);return Ie&&u!==void 0&&(pe.value=Uy(w,this.options,u)),K&&K(pe.value),Ie&&this.finish(),pe}get duration(){const{resolved:t}=this;return t?na(t.calculatedDuration):0}get time(){return na(this.currentTime)}set time(t){t=So(t),this.currentTime=t,this.holdTime!==null||this.speed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.speed)}get speed(){return this.playbackSpeed}set speed(t){const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=na(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:t=yj,onPlay:n,startTime:s}=this.options;this.driver||(this.driver=t(h=>this.tick(h))),n&&n();const u=this.driver.now();this.holdTime!==null?this.startTime=u-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=u):this.startTime=s??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var t;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(t=this.currentTime)!==null&&t!==void 0?t:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:t}=this.options;t&&t()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}}const VM=new Set(["opacity","clipPath","filter","transform"]),xj=10,wj=(e,t)=>{let n="";const s=Math.max(Math.round(t/xj),2);for(let u=0;u<s;u++)n+=e(Xc(0,s-1,u))+", ";return`linear(${n.substring(0,n.length-2)})`};function J1(e){let t;return()=>(t===void 0&&(t=e()),t)}const bj={linearEasing:void 0};function Sj(e,t){const n=J1(e);return()=>{var s;return(s=bj[t])!==null&&s!==void 0?s:n()}}const Lg=Sj(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing");function $M(e){return!!(typeof e=="function"&&Lg()||!e||typeof e=="string"&&(e in F0||Lg())||X1(e)||Array.isArray(e)&&e.every($M))}const Od=([e,t,n,s])=>`cubic-bezier(${e}, ${t}, ${n}, ${s})`,F0={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Od([0,.65,.55,1]),circOut:Od([.55,0,1,.45]),backIn:Od([.31,.01,.66,-.59]),backOut:Od([.33,1.53,.69,.99])};function jM(e,t){if(e)return typeof e=="function"&&Lg()?wj(e,t):X1(e)?Od(e):Array.isArray(e)?e.map(n=>jM(n,t)||F0.easeOut):F0[e]}function Cj(e,t,n,{delay:s=0,duration:u=300,repeat:h=0,repeatType:f="loop",ease:a,times:w}={}){const b={[t]:n};w&&(b.offset=w);const P=jM(a,u);return Array.isArray(P)&&(b.easing=P),e.animate(b,{delay:s,duration:u,easing:Array.isArray(P)?"linear":P,fill:"both",iterations:h+1,direction:f==="reverse"?"alternate":"normal"})}function LT(e,t){e.timeline=t,e.onfinish=null}const Tj=J1(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Og=10,Ej=2e4;function Pj(e){return K1(e.type)||e.type==="spring"||!$M(e.ease)}function Aj(e,t){const n=new Y1({...t,keyframes:e,repeat:0,delay:0,isGenerator:!0});let s={done:!1,value:e[0]};const u=[];let h=0;for(;!s.done&&h<Ej;)s=n.sample(h),u.push(s.value),h+=Og;return{times:void 0,keyframes:u,duration:h-Og,ease:"linear"}}const UM={anticipate:fM,backInOut:dM,circInOut:mM};function kj(e){return e in UM}class OT extends DM{constructor(t){super(t);const{name:n,motionValue:s,element:u,keyframes:h}=this.options;this.resolver=new RM(h,(f,a)=>this.onKeyframesResolved(f,a),n,s,u),this.resolver.scheduleResolve()}initPlayback(t,n){var s;let{duration:u=300,times:h,ease:f,type:a,motionValue:w,name:b,startTime:P}=this.options;if(!(!((s=w.owner)===null||s===void 0)&&s.current))return!1;if(typeof f=="string"&&Lg()&&kj(f)&&(f=UM[f]),Pj(this.options)){const{onComplete:M,onUpdate:B,motionValue:V,element:j,...K}=this.options,F=Aj(t,K);t=F.keyframes,t.length===1&&(t[1]=t[0]),u=F.duration,h=F.times,f=F.ease,a="keyframes"}const A=Cj(w.owner.current,b,t,{...this.options,duration:u,times:h,ease:f});return A.startTime=P??this.calcStartTime(),this.pendingTimeline?(LT(A,this.pendingTimeline),this.pendingTimeline=void 0):A.onfinish=()=>{const{onComplete:M}=this.options;w.set(Uy(t,this.options,n)),M&&M(),this.cancel(),this.resolveFinishedPromise()},{animation:A,duration:u,times:h,type:a,ease:f,keyframes:t}}get duration(){const{resolved:t}=this;if(!t)return 0;const{duration:n}=t;return na(n)}get time(){const{resolved:t}=this;if(!t)return 0;const{animation:n}=t;return na(n.currentTime||0)}set time(t){const{resolved:n}=this;if(!n)return;const{animation:s}=n;s.currentTime=So(t)}get speed(){const{resolved:t}=this;if(!t)return 1;const{animation:n}=t;return n.playbackRate}set speed(t){const{resolved:n}=this;if(!n)return;const{animation:s}=n;s.playbackRate=t}get state(){const{resolved:t}=this;if(!t)return"idle";const{animation:n}=t;return n.playState}get startTime(){const{resolved:t}=this;if(!t)return null;const{animation:n}=t;return n.startTime}attachTimeline(t){if(!this._resolved)this.pendingTimeline=t;else{const{resolved:n}=this;if(!n)return Ur;const{animation:s}=n;LT(s,t)}return Ur}play(){if(this.isStopped)return;const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:t}=this;if(!t)return;const{animation:n,keyframes:s,duration:u,type:h,ease:f,times:a}=t;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:b,onUpdate:P,onComplete:A,element:M,...B}=this.options,V=new Y1({...B,keyframes:s,duration:u,type:h,ease:f,times:a,isGenerator:!0}),j=So(this.time);b.setWithVelocity(V.sample(j-Og).value,V.sample(j).value,Og)}const{onStop:w}=this.options;w&&w(),this.cancel()}complete(){const{resolved:t}=this;t&&t.animation.finish()}cancel(){const{resolved:t}=this;t&&t.animation.cancel()}static supports(t){const{motionValue:n,name:s,repeatDelay:u,repeatType:h,damping:f,type:a}=t;return Tj()&&s&&VM.has(s)&&n&&n.owner&&n.owner.current instanceof HTMLElement&&!n.owner.getProps().onUpdate&&!u&&h!=="mirror"&&f!==0&&a!=="inertia"}}const Ij=J1(()=>window.ScrollTimeline!==void 0);class Mj{constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}then(t,n){return Promise.all(this.animations).then(t).catch(n)}getAll(t){return this.animations[0][t]}setAll(t,n){for(let s=0;s<this.animations.length;s++)this.animations[s][t]=n}attachTimeline(t,n){const s=this.animations.map(u=>Ij()&&u.attachTimeline?u.attachTimeline(t):n(u));return()=>{s.forEach((u,h)=>{u&&u(),this.animations[h].stop()})}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get startTime(){return this.getAll("startTime")}get duration(){let t=0;for(let n=0;n<this.animations.length;n++)t=Math.max(t,this.animations[n].duration);return t}runAll(t){this.animations.forEach(n=>n[t]())}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}function Rj({when:e,delay:t,delayChildren:n,staggerChildren:s,staggerDirection:u,repeat:h,repeatType:f,repeatDelay:a,from:w,elapsed:b,...P}){return!!Object.keys(P).length}const eb=(e,t,n,s={},u,h)=>f=>{const a=V1(s,e)||{},w=a.delay||s.delay||0;let{elapsed:b=0}=s;b=b-So(w);let P={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...a,delay:-b,onUpdate:M=>{t.set(M),a.onUpdate&&a.onUpdate(M)},onComplete:()=>{f(),a.onComplete&&a.onComplete()},name:e,motionValue:t,element:h?void 0:u};Rj(a)||(P={...P,...XV(e,P)}),P.duration&&(P.duration=So(P.duration)),P.repeatDelay&&(P.repeatDelay=So(P.repeatDelay)),P.from!==void 0&&(P.keyframes[0]=P.from);let A=!1;if((P.type===!1||P.duration===0&&!P.repeatDelay)&&(P.duration=0,P.delay===0&&(A=!0)),A&&!h&&t.get()!==void 0){const M=Uy(P.keyframes,a);if(M!==void 0)return gn.update(()=>{P.onUpdate(M),P.onComplete()}),new Mj([])}return!h&&OT.supports(P)?new OT(P):new Y1(P)},Dj=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),zj=e=>I0(e)?e[e.length-1]||0:e;function tb(e,t){e.indexOf(t)===-1&&e.push(t)}function nb(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class rb{constructor(){this.subscriptions=[]}add(t){return tb(this.subscriptions,t),()=>nb(this.subscriptions,t)}notify(t,n,s){const u=this.subscriptions.length;if(u)if(u===1)this.subscriptions[0](t,n,s);else for(let h=0;h<u;h++){const f=this.subscriptions[h];f&&f(t,n,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const FT=30,Lj=e=>!isNaN(parseFloat(e));class Oj{constructor(t,n={}){this.version="11.11.8",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(s,u=!0)=>{const h=To.now();this.updatedAt!==h&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(s),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),u&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=To.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=Lj(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new rb);const s=this.events[t].add(n);return t==="change"?()=>{s(),gn.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,s){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-s}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=To.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>FT)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,FT);return zM(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Af(e,t){return new Oj(e,t)}function Fj(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,Af(n))}function Nj(e,t){const n=jy(e,t);let{transitionEnd:s={},transition:u={},...h}=n||{};h={...h,...s};for(const f in h){const a=zj(h[f]);Fj(e,f,a)}}const qy=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Bj="framerAppearId",qM="data-"+qy(Bj);function GM(e){return e.props[qM]}const ai=e=>!!(e&&e.getVelocity);function Vj(e){return!!(ai(e)&&e.add)}function ZM(e){if(bl.has(e))return"transform";if(VM.has(e))return qy(e)}function N0(e,t){var n;if(!e.applyWillChange)return;const s=e.getValue("willChange");if(Vj(s))return s.add(t);!(!((n=e.props.style)===null||n===void 0)&&n.willChange)&&ZM(t)&&e.setStaticValue("willChange","transform")}function $j({protectedKeys:e,needsAnimating:t},n){const s=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,s}function WM(e,t,{delay:n=0,transitionOverride:s,type:u}={}){var h;let{transition:f=e.getDefaultTransition(),transitionEnd:a,...w}=t;s&&(f=s);const b=[],P=u&&e.animationState&&e.animationState.getState()[u];for(const A in w){const M=e.getValue(A,(h=e.latestValues[A])!==null&&h!==void 0?h:null),B=w[A];if(B===void 0||P&&$j(P,A))continue;const V={delay:n,...V1(f||{},A)};let j=!1;if(window.MotionHandoffAnimation){const F=GM(e);if(F){const N=window.MotionHandoffAnimation(F,A,gn);N!==null&&(V.startTime=N,j=!0)}}N0(e,A),M.start(eb(A,M,B,e.shouldReduceMotion&&bl.has(A)?{type:!1}:V,e,j));const K=M.animation;K&&b.push(K)}return a&&Promise.all(b).then(()=>{gn.update(()=>{a&&Nj(e,a)})}),b}function B0(e,t,n={}){var s;const u=jy(e,t,n.type==="exit"?(s=e.presenceContext)===null||s===void 0?void 0:s.custom:void 0);let{transition:h=e.getDefaultTransition()||{}}=u||{};n.transitionOverride&&(h=n.transitionOverride);const f=u?()=>Promise.all(WM(e,u,n)):()=>Promise.resolve(),a=e.variantChildren&&e.variantChildren.size?(b=0)=>{const{delayChildren:P=0,staggerChildren:A,staggerDirection:M}=h;return jj(e,t,P+b,A,M,n)}:()=>Promise.resolve(),{when:w}=h;if(w){const[b,P]=w==="beforeChildren"?[f,a]:[a,f];return b().then(()=>P())}else return Promise.all([f(),a(n.delay)])}function jj(e,t,n=0,s=0,u=1,h){const f=[],a=(e.variantChildren.size-1)*s,w=u===1?(b=0)=>b*s:(b=0)=>a-b*s;return Array.from(e.variantChildren).sort(Uj).forEach((b,P)=>{b.notify("AnimationStart",t),f.push(B0(b,t,{...h,delay:n+w(P)}).then(()=>b.notify("AnimationComplete",t)))}),Promise.all(f)}function Uj(e,t){return e.sortNodePosition(t)}function qj(e,t,n={}){e.notify("AnimationStart",t);let s;if(Array.isArray(t)){const u=t.map(h=>B0(e,h,n));s=Promise.all(u)}else if(typeof t=="string")s=B0(e,t,n);else{const u=typeof t=="function"?jy(e,t,n.custom):t;s=Promise.all(WM(e,u,n))}return s.then(()=>{e.notify("AnimationComplete",t)})}const Gj=B1.length;function HM(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?HM(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<Gj;n++){const s=B1[n],u=e.props[s];(Tf(u)||u===!1)&&(t[s]=u)}return t}const Zj=[...N1].reverse(),Wj=N1.length;function Hj(e){return t=>Promise.all(t.map(({animation:n,options:s})=>qj(e,n,s)))}function Kj(e){let t=Hj(e),n=NT(),s=!0;const u=w=>(b,P)=>{var A;const M=jy(e,P,w==="exit"?(A=e.presenceContext)===null||A===void 0?void 0:A.custom:void 0);if(M){const{transition:B,transitionEnd:V,...j}=M;b={...b,...j,...V}}return b};function h(w){t=w(e)}function f(w){const{props:b}=e,P=HM(e.parent)||{},A=[],M=new Set;let B={},V=1/0;for(let K=0;K<Wj;K++){const F=Zj[K],N=n[F],W=b[F]!==void 0?b[F]:P[F],ne=Tf(W),pe=F===w?N.isActive:null;pe===!1&&(V=K);let Ce=W===P[F]&&W!==b[F]&&ne;if(Ce&&s&&e.manuallyAnimateOnMount&&(Ce=!1),N.protectedKeys={...B},!N.isActive&&pe===null||!W&&!N.prevProp||Cf(W)||typeof W=="boolean")continue;const Ie=Xj(N.prevProp,W);let Se=Ie||F===w&&N.isActive&&!Ce&&ne||K>V&&ne,qe=!1;const ze=Array.isArray(W)?W:[W];let Et=ze.reduce(u(F),{});pe===!1&&(Et={});const{prevResolvedValues:Ge={}}=N,yt={...Ge,...Et},xt=St=>{Se=!0,M.has(St)&&(qe=!0,M.delete(St)),N.needsAnimating[St]=!0;const je=e.getValue(St);je&&(je.liveStyle=!1)};for(const St in yt){const je=Et[St],ct=Ge[St];if(B.hasOwnProperty(St))continue;let Pt=!1;I0(je)&&I0(ct)?Pt=!oM(je,ct):Pt=je!==ct,Pt?je!=null?xt(St):M.add(St):je!==void 0&&M.has(St)?xt(St):N.protectedKeys[St]=!0}N.prevProp=W,N.prevResolvedValues=Et,N.isActive&&(B={...B,...Et}),s&&e.blockInitialAnimation&&(Se=!1),Se&&(!(Ce&&Ie)||qe)&&A.push(...ze.map(St=>({animation:St,options:{type:F}})))}if(M.size){const K={};M.forEach(F=>{const N=e.getBaseTarget(F),W=e.getValue(F);W&&(W.liveStyle=!0),K[F]=N??null}),A.push({animation:K})}let j=!!A.length;return s&&(b.initial===!1||b.initial===b.animate)&&!e.manuallyAnimateOnMount&&(j=!1),s=!1,j?t(A):Promise.resolve()}function a(w,b){var P;if(n[w].isActive===b)return Promise.resolve();(P=e.variantChildren)===null||P===void 0||P.forEach(M=>{var B;return(B=M.animationState)===null||B===void 0?void 0:B.setActive(w,b)}),n[w].isActive=b;const A=f(w);for(const M in n)n[M].protectedKeys={};return A}return{animateChanges:f,setActive:a,setAnimateFunction:h,getState:()=>n,reset:()=>{n=NT(),s=!0}}}function Xj(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!oM(t,e):!1}function Gl(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function NT(){return{animate:Gl(!0),whileInView:Gl(),whileHover:Gl(),whileTap:Gl(),whileDrag:Gl(),whileFocus:Gl(),exit:Gl()}}class Sl{constructor(t){this.isMounted=!1,this.node=t}update(){}}class Qj extends Sl{constructor(t){super(t),t.animationState||(t.animationState=Kj(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Cf(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)===null||t===void 0||t.call(this)}}let Yj=0;class Jj extends Sl{constructor(){super(...arguments),this.id=Yj++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===s)return;const u=this.node.animationState.setActive("exit",!t);n&&!t&&u.then(()=>n(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const eU={animation:{Feature:Qj},exit:{Feature:Jj}},KM=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function Gy(e,t="page"){return{point:{x:e[`${t}X`],y:e[`${t}Y`]}}}const tU=e=>t=>KM(t)&&e(t,Gy(t));function ea(e,t,n,s={passive:!0}){return e.addEventListener(t,n,s),()=>e.removeEventListener(t,n)}function ia(e,t,n,s){return ea(e,t,tU(n),s)}const BT=(e,t)=>Math.abs(e-t);function nU(e,t){const n=BT(e.x,t.x),s=BT(e.y,t.y);return Math.sqrt(n**2+s**2)}class XM{constructor(t,n,{transformPagePoint:s,contextWindow:u,dragSnapToOrigin:h=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const A=ex(this.lastMoveEventInfo,this.history),M=this.startEvent!==null,B=nU(A.offset,{x:0,y:0})>=3;if(!M&&!B)return;const{point:V}=A,{timestamp:j}=$r;this.history.push({...V,timestamp:j});const{onStart:K,onMove:F}=this.handlers;M||(K&&K(this.lastMoveEvent,A),this.startEvent=this.lastMoveEvent),F&&F(this.lastMoveEvent,A)},this.handlePointerMove=(A,M)=>{this.lastMoveEvent=A,this.lastMoveEventInfo=J_(M,this.transformPagePoint),gn.update(this.updatePoint,!0)},this.handlePointerUp=(A,M)=>{this.end();const{onEnd:B,onSessionEnd:V,resumeAnimation:j}=this.handlers;if(this.dragSnapToOrigin&&j&&j(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const K=ex(A.type==="pointercancel"?this.lastMoveEventInfo:J_(M,this.transformPagePoint),this.history);this.startEvent&&B&&B(A,K),V&&V(A,K)},!KM(t))return;this.dragSnapToOrigin=h,this.handlers=n,this.transformPagePoint=s,this.contextWindow=u||window;const f=Gy(t),a=J_(f,this.transformPagePoint),{point:w}=a,{timestamp:b}=$r;this.history=[{...w,timestamp:b}];const{onSessionStart:P}=n;P&&P(t,ex(a,this.history)),this.removeListeners=ra(ia(this.contextWindow,"pointermove",this.handlePointerMove),ia(this.contextWindow,"pointerup",this.handlePointerUp),ia(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),ml(this.updatePoint)}}function J_(e,t){return t?{point:t(e.point)}:e}function VT(e,t){return{x:e.x-t.x,y:e.y-t.y}}function ex({point:e},t){return{point:e,delta:VT(e,QM(t)),offset:VT(e,rU(t)),velocity:iU(t,.1)}}function rU(e){return e[0]}function QM(e){return e[e.length-1]}function iU(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,s=null;const u=QM(e);for(;n>=0&&(s=e[n],!(u.timestamp-s.timestamp>So(t)));)n--;if(!s)return{x:0,y:0};const h=na(u.timestamp-s.timestamp);if(h===0)return{x:0,y:0};const f={x:(u.x-s.x)/h,y:(u.y-s.y)/h};return f.x===1/0&&(f.x=0),f.y===1/0&&(f.y=0),f}function YM(e){let t=null;return()=>{const n=()=>{t=null};return t===null?(t=e,n):!1}}const $T=YM("dragHorizontal"),jT=YM("dragVertical");function JM(e){let t=!1;if(e==="y")t=jT();else if(e==="x")t=$T();else{const n=$T(),s=jT();n&&s?t=()=>{n(),s()}:(n&&n(),s&&s())}return t}function eR(){const e=JM(!0);return e?(e(),!1):!0}function Tc(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}const tR=1e-4,sU=1-tR,oU=1+tR,nR=.01,aU=0-nR,lU=0+nR;function rs(e){return e.max-e.min}function uU(e,t,n){return Math.abs(e-t)<=n}function UT(e,t,n,s=.5){e.origin=s,e.originPoint=Gn(t.min,t.max,e.origin),e.scale=rs(n)/rs(t),e.translate=Gn(n.min,n.max,e.origin)-e.originPoint,(e.scale>=sU&&e.scale<=oU||isNaN(e.scale))&&(e.scale=1),(e.translate>=aU&&e.translate<=lU||isNaN(e.translate))&&(e.translate=0)}function Qd(e,t,n,s){UT(e.x,t.x,n.x,s?s.originX:void 0),UT(e.y,t.y,n.y,s?s.originY:void 0)}function qT(e,t,n){e.min=n.min+t.min,e.max=e.min+rs(t)}function cU(e,t,n){qT(e.x,t.x,n.x),qT(e.y,t.y,n.y)}function GT(e,t,n){e.min=t.min-n.min,e.max=e.min+rs(t)}function Yd(e,t,n){GT(e.x,t.x,n.x),GT(e.y,t.y,n.y)}function hU(e,{min:t,max:n},s){return t!==void 0&&e<t?e=s?Gn(t,e,s.min):Math.max(e,t):n!==void 0&&e>n&&(e=s?Gn(n,e,s.max):Math.min(e,n)),e}function ZT(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function dU(e,{top:t,left:n,bottom:s,right:u}){return{x:ZT(e.x,n,u),y:ZT(e.y,t,s)}}function WT(e,t){let n=t.min-e.min,s=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,s]=[s,n]),{min:n,max:s}}function fU(e,t){return{x:WT(e.x,t.x),y:WT(e.y,t.y)}}function pU(e,t){let n=.5;const s=rs(e),u=rs(t);return u>s?n=Xc(t.min,t.max-s,e.min):s>u&&(n=Xc(e.min,e.max-u,t.min)),gl(0,1,n)}function mU(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const V0=.35;function gU(e=V0){return e===!1?e=0:e===!0&&(e=V0),{x:HT(e,"left","right"),y:HT(e,"top","bottom")}}function HT(e,t,n){return{min:KT(e,t),max:KT(e,n)}}function KT(e,t){return typeof e=="number"?e:e[t]||0}const XT=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ec=()=>({x:XT(),y:XT()}),QT=()=>({min:0,max:0}),ar=()=>({x:QT(),y:QT()});function xs(e){return[e("x"),e("y")]}function rR({top:e,left:t,right:n,bottom:s}){return{x:{min:t,max:n},y:{min:e,max:s}}}function yU({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function vU(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),s=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:s.y,right:s.x}}function tx(e){return e===void 0||e===1}function $0({scale:e,scaleX:t,scaleY:n}){return!tx(e)||!tx(t)||!tx(n)}function Kl(e){return $0(e)||iR(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function iR(e){return YT(e.x)||YT(e.y)}function YT(e){return e&&e!=="0%"}function Fg(e,t,n){const s=e-n,u=t*s;return n+u}function JT(e,t,n,s,u){return u!==void 0&&(e=Fg(e,u,s)),Fg(e,n,s)+t}function j0(e,t=0,n=1,s,u){e.min=JT(e.min,t,n,s,u),e.max=JT(e.max,t,n,s,u)}function sR(e,{x:t,y:n}){j0(e.x,t.translate,t.scale,t.originPoint),j0(e.y,n.translate,n.scale,n.originPoint)}const eE=.999999999999,tE=1.0000000000001;function _U(e,t,n,s=!1){const u=n.length;if(!u)return;t.x=t.y=1;let h,f;for(let a=0;a<u;a++){h=n[a],f=h.projectionDelta;const{visualElement:w}=h.options;w&&w.props.style&&w.props.style.display==="contents"||(s&&h.options.layoutScroll&&h.scroll&&h!==h.root&&Ac(e,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),f&&(t.x*=f.x.scale,t.y*=f.y.scale,sR(e,f)),s&&Kl(h.latestValues)&&Ac(e,h.latestValues))}t.x<tE&&t.x>eE&&(t.x=1),t.y<tE&&t.y>eE&&(t.y=1)}function Pc(e,t){e.min=e.min+t,e.max=e.max+t}function nE(e,t,n,s,u=.5){const h=Gn(e.min,e.max,u);j0(e,t,n,h,s)}function Ac(e,t){nE(e.x,t.x,t.scaleX,t.scale,t.originX),nE(e.y,t.y,t.scaleY,t.scale,t.originY)}function oR(e,t){return rR(vU(e.getBoundingClientRect(),t))}function xU(e,t,n){const s=oR(e,n),{scroll:u}=t;return u&&(Pc(s.x,u.offset.x),Pc(s.y,u.offset.y)),s}const aR=({current:e})=>e?e.ownerDocument.defaultView:null,wU=new WeakMap;class bU{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ar(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const u=P=>{const{dragSnapToOrigin:A}=this.getProps();A?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Gy(P,"page").point)},h=(P,A)=>{const{drag:M,dragPropagation:B,onDragStart:V}=this.getProps();if(M&&!B&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=JM(M),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),xs(K=>{let F=this.getAxisMotionValue(K).get()||0;if(Co.test(F)){const{projection:N}=this.visualElement;if(N&&N.layout){const W=N.layout.layoutBox[K];W&&(F=rs(W)*(parseFloat(F)/100))}}this.originPoint[K]=F}),V&&gn.postRender(()=>V(P,A)),N0(this.visualElement,"transform");const{animationState:j}=this.visualElement;j&&j.setActive("whileDrag",!0)},f=(P,A)=>{const{dragPropagation:M,dragDirectionLock:B,onDirectionLock:V,onDrag:j}=this.getProps();if(!M&&!this.openGlobalLock)return;const{offset:K}=A;if(B&&this.currentDirection===null){this.currentDirection=SU(K),this.currentDirection!==null&&V&&V(this.currentDirection);return}this.updateAxis("x",A.point,K),this.updateAxis("y",A.point,K),this.visualElement.render(),j&&j(P,A)},a=(P,A)=>this.stop(P,A),w=()=>xs(P=>{var A;return this.getAnimationState(P)==="paused"&&((A=this.getAxisMotionValue(P).animation)===null||A===void 0?void 0:A.play())}),{dragSnapToOrigin:b}=this.getProps();this.panSession=new XM(t,{onSessionStart:u,onStart:h,onMove:f,onSessionEnd:a,resumeAnimation:w},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:b,contextWindow:aR(this.visualElement)})}stop(t,n){const s=this.isDragging;if(this.cancel(),!s)return;const{velocity:u}=n;this.startAnimation(u);const{onDragEnd:h}=this.getProps();h&&gn.postRender(()=>h(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,s){const{drag:u}=this.getProps();if(!s||!_m(t,u,this.currentDirection))return;const h=this.getAxisMotionValue(t);let f=this.originPoint[t]+s[t];this.constraints&&this.constraints[t]&&(f=hU(f,this.constraints[t],this.elastic[t])),h.set(f)}resolveConstraints(){var t;const{dragConstraints:n,dragElastic:s}=this.getProps(),u=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,h=this.constraints;n&&Tc(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&u?this.constraints=dU(u.layoutBox,n):this.constraints=!1,this.elastic=gU(s),h!==this.constraints&&u&&this.constraints&&!this.hasMutatedConstraints&&xs(f=>{this.constraints!==!1&&this.getAxisMotionValue(f)&&(this.constraints[f]=mU(u.layoutBox[f],this.constraints[f]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!Tc(t))return!1;const s=t.current,{projection:u}=this.visualElement;if(!u||!u.layout)return!1;const h=xU(s,u.root,this.visualElement.getTransformPagePoint());let f=fU(u.layout.layoutBox,h);if(n){const a=n(yU(f));this.hasMutatedConstraints=!!a,a&&(f=rR(a))}return f}startAnimation(t){const{drag:n,dragMomentum:s,dragElastic:u,dragTransition:h,dragSnapToOrigin:f,onDragTransitionEnd:a}=this.getProps(),w=this.constraints||{},b=xs(P=>{if(!_m(P,n,this.currentDirection))return;let A=w&&w[P]||{};f&&(A={min:0,max:0});const M=u?200:1e6,B=u?40:1e7,V={type:"inertia",velocity:s?t[P]:0,bounceStiffness:M,bounceDamping:B,timeConstant:750,restDelta:1,restSpeed:10,...h,...A};return this.startAxisValueAnimation(P,V)});return Promise.all(b).then(a)}startAxisValueAnimation(t,n){const s=this.getAxisMotionValue(t);return N0(this.visualElement,t),s.start(eb(t,s,0,n,this.visualElement,!1))}stopAnimation(){xs(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){xs(t=>{var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,s=this.visualElement.getProps(),u=s[n];return u||this.visualElement.getValue(t,(s.initial?s.initial[t]:void 0)||0)}snapToCursor(t){xs(n=>{const{drag:s}=this.getProps();if(!_m(n,s,this.currentDirection))return;const{projection:u}=this.visualElement,h=this.getAxisMotionValue(n);if(u&&u.layout){const{min:f,max:a}=u.layout.layoutBox[n];h.set(t[n]-Gn(f,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:s}=this.visualElement;if(!Tc(n)||!s||!this.constraints)return;this.stopAnimation();const u={x:0,y:0};xs(f=>{const a=this.getAxisMotionValue(f);if(a&&this.constraints!==!1){const w=a.get();u[f]=pU({min:w,max:w},this.constraints[f])}});const{transformTemplate:h}=this.visualElement.getProps();this.visualElement.current.style.transform=h?h({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),xs(f=>{if(!_m(f,t,null))return;const a=this.getAxisMotionValue(f),{min:w,max:b}=this.constraints[f];a.set(Gn(w,b,u[f]))})}addListeners(){if(!this.visualElement.current)return;wU.set(this.visualElement,this);const t=this.visualElement.current,n=ia(t,"pointerdown",w=>{const{drag:b,dragListener:P=!0}=this.getProps();b&&P&&this.start(w)}),s=()=>{const{dragConstraints:w}=this.getProps();Tc(w)&&w.current&&(this.constraints=this.resolveRefConstraints())},{projection:u}=this.visualElement,h=u.addEventListener("measure",s);u&&!u.layout&&(u.root&&u.root.updateScroll(),u.updateLayout()),gn.read(s);const f=ea(window,"resize",()=>this.scalePositionWithinConstraints()),a=u.addEventListener("didUpdate",({delta:w,hasLayoutChanged:b})=>{this.isDragging&&b&&(xs(P=>{const A=this.getAxisMotionValue(P);A&&(this.originPoint[P]+=w[P].translate,A.set(A.get()+w[P].translate))}),this.visualElement.render())});return()=>{f(),n(),h(),a&&a()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:s=!1,dragPropagation:u=!1,dragConstraints:h=!1,dragElastic:f=V0,dragMomentum:a=!0}=t;return{...t,drag:n,dragDirectionLock:s,dragPropagation:u,dragConstraints:h,dragElastic:f,dragMomentum:a}}}function _m(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function SU(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class CU extends Sl{constructor(t){super(t),this.removeGroupControls=Ur,this.removeListeners=Ur,this.controls=new bU(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ur}unmount(){this.removeGroupControls(),this.removeListeners()}}const rE=e=>(t,n)=>{e&&gn.postRender(()=>e(t,n))};class TU extends Sl{constructor(){super(...arguments),this.removePointerDownListener=Ur}onPointerDown(t){this.session=new XM(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:aR(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:s,onPanEnd:u}=this.node.getProps();return{onSessionStart:rE(t),onStart:rE(n),onMove:s,onEnd:(h,f)=>{delete this.session,u&&gn.postRender(()=>u(h,f))}}}mount(){this.removePointerDownListener=ia(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const ib=X.createContext(null);function EU(){const e=X.useContext(ib);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:n,register:s}=e,u=X.useId();X.useEffect(()=>s(u),[]);const h=X.useCallback(()=>n&&n(u),[u,n]);return!t&&n?[!1,h]:[!0]}const lR=X.createContext({}),uR=X.createContext({}),Gm={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function iE(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Ed={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(Mt.test(e))e=parseFloat(e);else return e;const n=iE(e,t.target.x),s=iE(e,t.target.y);return`${n}% ${s}%`}},PU={correct:(e,{treeScale:t,projectionDelta:n})=>{const s=e,u=yl.parse(e);if(u.length>5)return s;const h=yl.createTransformer(e),f=typeof u[0]!="number"?1:0,a=n.x.scale*t.x,w=n.y.scale*t.y;u[0+f]/=a,u[1+f]/=w;const b=Gn(a,w,.5);return typeof u[2+f]=="number"&&(u[2+f]/=b),typeof u[3+f]=="number"&&(u[3+f]/=b),h(u)}},Ng={};function AU(e){Object.assign(Ng,e)}const{schedule:sb,cancel:TZ}=aM(queueMicrotask,!1);class kU extends X.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:s,layoutId:u}=this.props,{projection:h}=t;AU(IU),h&&(n.group&&n.group.add(h),s&&s.register&&u&&s.register(h),h.root.didUpdate(),h.addEventListener("animationComplete",()=>{this.safeToRemove()}),h.setOptions({...h.options,onExitComplete:()=>this.safeToRemove()})),Gm.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:s,drag:u,isPresent:h}=this.props,f=s.projection;return f&&(f.isPresent=h,u||t.layoutDependency!==n||n===void 0?f.willUpdate():this.safeToRemove(),t.isPresent!==h&&(h?f.promote():f.relegate()||gn.postRender(()=>{const a=f.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),sb.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:s}=this.props,{projection:u}=t;u&&(u.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(u),s&&s.deregister&&s.deregister(u))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function cR(e){const[t,n]=EU(),s=X.useContext(lR);return ae(kU,{...e,layoutGroup:s,switchLayoutGroup:X.useContext(uR),isPresent:t,safeToRemove:n})}const IU={borderRadius:{...Ed,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ed,borderTopRightRadius:Ed,borderBottomLeftRadius:Ed,borderBottomRightRadius:Ed,boxShadow:PU},hR=["TopLeft","TopRight","BottomLeft","BottomRight"],MU=hR.length,sE=e=>typeof e=="string"?parseFloat(e):e,oE=e=>typeof e=="number"||Mt.test(e);function RU(e,t,n,s,u,h){u?(e.opacity=Gn(0,n.opacity!==void 0?n.opacity:1,DU(s)),e.opacityExit=Gn(t.opacity!==void 0?t.opacity:1,0,zU(s))):h&&(e.opacity=Gn(t.opacity!==void 0?t.opacity:1,n.opacity!==void 0?n.opacity:1,s));for(let f=0;f<MU;f++){const a=`border${hR[f]}Radius`;let w=aE(t,a),b=aE(n,a);if(w===void 0&&b===void 0)continue;w||(w=0),b||(b=0),w===0||b===0||oE(w)===oE(b)?(e[a]=Math.max(Gn(sE(w),sE(b),s),0),(Co.test(b)||Co.test(w))&&(e[a]+="%")):e[a]=b}(t.rotate||n.rotate)&&(e.rotate=Gn(t.rotate||0,n.rotate||0,s))}function aE(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const DU=dR(0,.5,pM),zU=dR(.5,.95,Ur);function dR(e,t,n){return s=>s<e?0:s>t?1:n(Xc(e,t,s))}function lE(e,t){e.min=t.min,e.max=t.max}function vs(e,t){lE(e.x,t.x),lE(e.y,t.y)}function uE(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function cE(e,t,n,s,u){return e-=t,e=Fg(e,1/n,s),u!==void 0&&(e=Fg(e,1/u,s)),e}function LU(e,t=0,n=1,s=.5,u,h=e,f=e){if(Co.test(t)&&(t=parseFloat(t),t=Gn(f.min,f.max,t/100)-f.min),typeof t!="number")return;let a=Gn(h.min,h.max,s);e===h&&(a-=t),e.min=cE(e.min,t,n,a,u),e.max=cE(e.max,t,n,a,u)}function hE(e,t,[n,s,u],h,f){LU(e,t[n],t[s],t[u],t.scale,h,f)}const OU=["x","scaleX","originX"],FU=["y","scaleY","originY"];function dE(e,t,n,s){hE(e.x,t,OU,n?n.x:void 0,s?s.x:void 0),hE(e.y,t,FU,n?n.y:void 0,s?s.y:void 0)}function fE(e){return e.translate===0&&e.scale===1}function fR(e){return fE(e.x)&&fE(e.y)}function pE(e,t){return e.min===t.min&&e.max===t.max}function NU(e,t){return pE(e.x,t.x)&&pE(e.y,t.y)}function mE(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function pR(e,t){return mE(e.x,t.x)&&mE(e.y,t.y)}function gE(e){return rs(e.x)/rs(e.y)}function yE(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class BU{constructor(){this.members=[]}add(t){tb(this.members,t),t.scheduleRender()}remove(t){if(nb(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(u=>t===u);if(n===0)return!1;let s;for(let u=n;u>=0;u--){const h=this.members[u];if(h.isPresent!==!1){s=h;break}}return s?(this.promote(s),!0):!1}promote(t,n){const s=this.lead;if(t!==s&&(this.prevLead=s,this.lead=t,t.show(),s)){s.instance&&s.scheduleRender(),t.scheduleRender(),t.resumeFrom=s,n&&(t.resumeFrom.preserveOpacity=!0),s.snapshot&&(t.snapshot=s.snapshot,t.snapshot.latestValues=s.animationValues||s.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:u}=t.options;u===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:s}=t;n.onExitComplete&&n.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function VU(e,t,n){let s="";const u=e.x.translate/t.x,h=e.y.translate/t.y,f=(n==null?void 0:n.z)||0;if((u||h||f)&&(s=`translate3d(${u}px, ${h}px, ${f}px) `),(t.x!==1||t.y!==1)&&(s+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:b,rotate:P,rotateX:A,rotateY:M,skewX:B,skewY:V}=n;b&&(s=`perspective(${b}px) ${s}`),P&&(s+=`rotate(${P}deg) `),A&&(s+=`rotateX(${A}deg) `),M&&(s+=`rotateY(${M}deg) `),B&&(s+=`skewX(${B}deg) `),V&&(s+=`skewY(${V}deg) `)}const a=e.x.scale*t.x,w=e.y.scale*t.y;return(a!==1||w!==1)&&(s+=`scale(${a}, ${w})`),s||"none"}const $U=(e,t)=>e.depth-t.depth;class jU{constructor(){this.children=[],this.isDirty=!1}add(t){tb(this.children,t),this.isDirty=!0}remove(t){nb(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort($U),this.isDirty=!1,this.children.forEach(t)}}function Zm(e){const t=ai(e)?e.get():e;return Dj(t)?t.toValue():t}function UU(e,t){const n=To.now(),s=({timestamp:u})=>{const h=u-n;h>=t&&(ml(s),e(h-t))};return gn.read(s,!0),()=>ml(s)}function qU(e){return e instanceof SVGElement&&e.tagName!=="svg"}function GU(e,t,n){const s=ai(e)?e:Af(e);return s.start(eb("",s,t,n)),s.animation}const Xl={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Fd=typeof window<"u"&&window.MotionDebug!==void 0,nx=["","X","Y","Z"],ZU={visibility:"hidden"},vE=1e3;let WU=0;function rx(e,t,n,s){const{latestValues:u}=t;u[e]&&(n[e]=u[e],t.setStaticValue(e,0),s&&(s[e]=0))}function mR(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=GM(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:u,layoutId:h}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",gn,!(u||h))}const{parent:s}=e;s&&!s.hasCheckedOptimisedAppear&&mR(s)}function gR({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:s,resetTransform:u}){return class{constructor(f={},a=t==null?void 0:t()){this.id=WU++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Fd&&(Xl.totalNodes=Xl.resolvedTargetDeltas=Xl.recalculatedProjection=0),this.nodes.forEach(XU),this.nodes.forEach(t8),this.nodes.forEach(n8),this.nodes.forEach(QU),Fd&&window.MotionDebug.record(Xl)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=f,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let w=0;w<this.path.length;w++)this.path[w].shouldResetTransform=!0;this.root===this&&(this.nodes=new jU)}addEventListener(f,a){return this.eventHandlers.has(f)||this.eventHandlers.set(f,new rb),this.eventHandlers.get(f).add(a)}notifyListeners(f,...a){const w=this.eventHandlers.get(f);w&&w.notify(...a)}hasListeners(f){return this.eventHandlers.has(f)}mount(f,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=qU(f),this.instance=f;const{layoutId:w,layout:b,visualElement:P}=this.options;if(P&&!P.current&&P.mount(f),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(b||w)&&(this.isLayoutDirty=!0),e){let A;const M=()=>this.root.updateBlockedByResize=!1;e(f,()=>{this.root.updateBlockedByResize=!0,A&&A(),A=UU(M,250),Gm.hasAnimatedSinceResize&&(Gm.hasAnimatedSinceResize=!1,this.nodes.forEach(xE))})}w&&this.root.registerSharedNode(w,this),this.options.animate!==!1&&P&&(w||b)&&this.addEventListener("didUpdate",({delta:A,hasLayoutChanged:M,hasRelativeTargetChanged:B,layout:V})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const j=this.options.transition||P.getDefaultTransition()||a8,{onLayoutAnimationStart:K,onLayoutAnimationComplete:F}=P.getProps(),N=!this.targetLayout||!pR(this.targetLayout,V)||B,W=!M&&B;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||W||M&&(N||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(A,W);const ne={...V1(j,"layout"),onPlay:K,onComplete:F};(P.shouldReduceMotion||this.options.layoutRoot)&&(ne.delay=0,ne.type=!1),this.startAnimation(ne)}else M||xE(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=V})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const f=this.getStack();f&&f.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,ml(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(r8),this.animationId++)}getTransformTemplate(){const{visualElement:f}=this.options;return f&&f.getProps().transformTemplate}willUpdate(f=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&mR(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let P=0;P<this.path.length;P++){const A=this.path[P];A.shouldResetTransform=!0,A.updateScroll("snapshot"),A.options.layoutRoot&&A.willUpdate(!1)}const{layoutId:a,layout:w}=this.options;if(a===void 0&&!w)return;const b=this.getTransformTemplate();this.prevTransformTemplateValue=b?b(this.latestValues,""):void 0,this.updateSnapshot(),f&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(_E);return}this.isUpdating||this.nodes.forEach(JU),this.isUpdating=!1,this.nodes.forEach(e8),this.nodes.forEach(HU),this.nodes.forEach(KU),this.clearAllSnapshots();const a=To.now();$r.delta=gl(0,1e3/60,a-$r.timestamp),$r.timestamp=a,$r.isProcessing=!0,H_.update.process($r),H_.preRender.process($r),H_.render.process($r),$r.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,sb.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(YU),this.sharedNodes.forEach(i8)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,gn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){gn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let w=0;w<this.path.length;w++)this.path[w].updateScroll();const f=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ar(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,f?f.layoutBox:void 0)}updateScroll(f="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===f&&(a=!1),a){const w=s(this.instance);this.scroll={animationId:this.root.animationId,phase:f,isRoot:w,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:w}}}resetTransform(){if(!u)return;const f=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!fR(this.projectionDelta),w=this.getTransformTemplate(),b=w?w(this.latestValues,""):void 0,P=b!==this.prevTransformTemplateValue;f&&(a||Kl(this.latestValues)||P)&&(u(this.instance,b),this.shouldResetTransform=!1,this.scheduleRender())}measure(f=!0){const a=this.measurePageBox();let w=this.removeElementScroll(a);return f&&(w=this.removeTransform(w)),l8(w),{animationId:this.root.animationId,measuredBox:a,layoutBox:w,latestValues:{},source:this.id}}measurePageBox(){var f;const{visualElement:a}=this.options;if(!a)return ar();const w=a.measureViewportBox();if(!(((f=this.scroll)===null||f===void 0?void 0:f.wasRoot)||this.path.some(u8))){const{scroll:P}=this.root;P&&(Pc(w.x,P.offset.x),Pc(w.y,P.offset.y))}return w}removeElementScroll(f){var a;const w=ar();if(vs(w,f),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return w;for(let b=0;b<this.path.length;b++){const P=this.path[b],{scroll:A,options:M}=P;P!==this.root&&A&&M.layoutScroll&&(A.wasRoot&&vs(w,f),Pc(w.x,A.offset.x),Pc(w.y,A.offset.y))}return w}applyTransform(f,a=!1){const w=ar();vs(w,f);for(let b=0;b<this.path.length;b++){const P=this.path[b];!a&&P.options.layoutScroll&&P.scroll&&P!==P.root&&Ac(w,{x:-P.scroll.offset.x,y:-P.scroll.offset.y}),Kl(P.latestValues)&&Ac(w,P.latestValues)}return Kl(this.latestValues)&&Ac(w,this.latestValues),w}removeTransform(f){const a=ar();vs(a,f);for(let w=0;w<this.path.length;w++){const b=this.path[w];if(!b.instance||!Kl(b.latestValues))continue;$0(b.latestValues)&&b.updateSnapshot();const P=ar(),A=b.measurePageBox();vs(P,A),dE(a,b.latestValues,b.snapshot?b.snapshot.layoutBox:void 0,P)}return Kl(this.latestValues)&&dE(a,this.latestValues),a}setTargetDelta(f){this.targetDelta=f,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(f){this.options={...this.options,...f,crossfade:f.crossfade!==void 0?f.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==$r.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(f=!1){var a;const w=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=w.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=w.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=w.isSharedProjectionDirty);const b=!!this.resumingFrom||this!==w;if(!(f||b&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:A,layoutId:M}=this.options;if(!(!this.layout||!(A||M))){if(this.resolvedRelativeTargetAt=$r.timestamp,!this.targetDelta&&!this.relativeTarget){const B=this.getClosestProjectingParent();B&&B.layout&&this.animationProgress!==1?(this.relativeParent=B,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ar(),this.relativeTargetOrigin=ar(),Yd(this.relativeTargetOrigin,this.layout.layoutBox,B.layout.layoutBox),vs(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=ar(),this.targetWithTransforms=ar()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),cU(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):vs(this.target,this.layout.layoutBox),sR(this.target,this.targetDelta)):vs(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const B=this.getClosestProjectingParent();B&&!!B.resumingFrom==!!this.resumingFrom&&!B.options.layoutScroll&&B.target&&this.animationProgress!==1?(this.relativeParent=B,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ar(),this.relativeTargetOrigin=ar(),Yd(this.relativeTargetOrigin,this.target,B.target),vs(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Fd&&Xl.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||$0(this.parent.latestValues)||iR(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var f;const a=this.getLead(),w=!!this.resumingFrom||this!==a;let b=!0;if((this.isProjectionDirty||!((f=this.parent)===null||f===void 0)&&f.isProjectionDirty)&&(b=!1),w&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(b=!1),this.resolvedRelativeTargetAt===$r.timestamp&&(b=!1),b)return;const{layout:P,layoutId:A}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(P||A))return;vs(this.layoutCorrected,this.layout.layoutBox);const M=this.treeScale.x,B=this.treeScale.y;_U(this.layoutCorrected,this.treeScale,this.path,w),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=ar());const{target:V}=a;if(!V){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(uE(this.prevProjectionDelta.x,this.projectionDelta.x),uE(this.prevProjectionDelta.y,this.projectionDelta.y)),Qd(this.projectionDelta,this.layoutCorrected,V,this.latestValues),(this.treeScale.x!==M||this.treeScale.y!==B||!yE(this.projectionDelta.x,this.prevProjectionDelta.x)||!yE(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",V)),Fd&&Xl.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(f=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),f){const w=this.getStack();w&&w.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Ec(),this.projectionDelta=Ec(),this.projectionDeltaWithTransform=Ec()}setAnimationOrigin(f,a=!1){const w=this.snapshot,b=w?w.latestValues:{},P={...this.latestValues},A=Ec();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const M=ar(),B=w?w.source:void 0,V=this.layout?this.layout.source:void 0,j=B!==V,K=this.getStack(),F=!K||K.members.length<=1,N=!!(j&&!F&&this.options.crossfade===!0&&!this.path.some(o8));this.animationProgress=0;let W;this.mixTargetDelta=ne=>{const pe=ne/1e3;wE(A.x,f.x,pe),wE(A.y,f.y,pe),this.setTargetDelta(A),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Yd(M,this.layout.layoutBox,this.relativeParent.layout.layoutBox),s8(this.relativeTarget,this.relativeTargetOrigin,M,pe),W&&NU(this.relativeTarget,W)&&(this.isProjectionDirty=!1),W||(W=ar()),vs(W,this.relativeTarget)),j&&(this.animationValues=P,RU(P,b,this.latestValues,pe,N,F)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=pe},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(f){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(ml(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=gn.update(()=>{Gm.hasAnimatedSinceResize=!0,this.currentAnimation=GU(0,vE,{...f,onUpdate:a=>{this.mixTargetDelta(a),f.onUpdate&&f.onUpdate(a)},onComplete:()=>{f.onComplete&&f.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const f=this.getStack();f&&f.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(vE),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const f=this.getLead();let{targetWithTransforms:a,target:w,layout:b,latestValues:P}=f;if(!(!a||!w||!b)){if(this!==f&&this.layout&&b&&yR(this.options.animationType,this.layout.layoutBox,b.layoutBox)){w=this.target||ar();const A=rs(this.layout.layoutBox.x);w.x.min=f.target.x.min,w.x.max=w.x.min+A;const M=rs(this.layout.layoutBox.y);w.y.min=f.target.y.min,w.y.max=w.y.min+M}vs(a,w),Ac(a,P),Qd(this.projectionDeltaWithTransform,this.layoutCorrected,a,P)}}registerSharedNode(f,a){this.sharedNodes.has(f)||this.sharedNodes.set(f,new BU),this.sharedNodes.get(f).add(a);const b=a.options.initialPromotionConfig;a.promote({transition:b?b.transition:void 0,preserveFollowOpacity:b&&b.shouldPreserveFollowOpacity?b.shouldPreserveFollowOpacity(a):void 0})}isLead(){const f=this.getStack();return f?f.lead===this:!0}getLead(){var f;const{layoutId:a}=this.options;return a?((f=this.getStack())===null||f===void 0?void 0:f.lead)||this:this}getPrevLead(){var f;const{layoutId:a}=this.options;return a?(f=this.getStack())===null||f===void 0?void 0:f.prevLead:void 0}getStack(){const{layoutId:f}=this.options;if(f)return this.root.sharedNodes.get(f)}promote({needsReset:f,transition:a,preserveFollowOpacity:w}={}){const b=this.getStack();b&&b.promote(this,w),f&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const f=this.getStack();return f?f.relegate(this):!1}resetSkewAndRotation(){const{visualElement:f}=this.options;if(!f)return;let a=!1;const{latestValues:w}=f;if((w.z||w.rotate||w.rotateX||w.rotateY||w.rotateZ||w.skewX||w.skewY)&&(a=!0),!a)return;const b={};w.z&&rx("z",f,b,this.animationValues);for(let P=0;P<nx.length;P++)rx(`rotate${nx[P]}`,f,b,this.animationValues),rx(`skew${nx[P]}`,f,b,this.animationValues);f.render();for(const P in b)f.setStaticValue(P,b[P]),this.animationValues&&(this.animationValues[P]=b[P]);f.scheduleRender()}getProjectionStyles(f){var a,w;if(!this.instance||this.isSVG)return;if(!this.isVisible)return ZU;const b={visibility:""},P=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,b.opacity="",b.pointerEvents=Zm(f==null?void 0:f.pointerEvents)||"",b.transform=P?P(this.latestValues,""):"none",b;const A=this.getLead();if(!this.projectionDelta||!this.layout||!A.target){const j={};return this.options.layoutId&&(j.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,j.pointerEvents=Zm(f==null?void 0:f.pointerEvents)||""),this.hasProjected&&!Kl(this.latestValues)&&(j.transform=P?P({},""):"none",this.hasProjected=!1),j}const M=A.animationValues||A.latestValues;this.applyTransformsToTarget(),b.transform=VU(this.projectionDeltaWithTransform,this.treeScale,M),P&&(b.transform=P(M,b.transform));const{x:B,y:V}=this.projectionDelta;b.transformOrigin=`${B.origin*100}% ${V.origin*100}% 0`,A.animationValues?b.opacity=A===this?(w=(a=M.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&w!==void 0?w:1:this.preserveOpacity?this.latestValues.opacity:M.opacityExit:b.opacity=A===this?M.opacity!==void 0?M.opacity:"":M.opacityExit!==void 0?M.opacityExit:0;for(const j in Ng){if(M[j]===void 0)continue;const{correct:K,applyTo:F}=Ng[j],N=b.transform==="none"?M[j]:K(M[j],A);if(F){const W=F.length;for(let ne=0;ne<W;ne++)b[F[ne]]=N}else b[j]=N}return this.options.layoutId&&(b.pointerEvents=A===this?Zm(f==null?void 0:f.pointerEvents)||"":"none"),b}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(f=>{var a;return(a=f.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(_E),this.root.sharedNodes.clear()}}}function HU(e){e.updateLayout()}function KU(e){var t;const n=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:u}=e.layout,{animationType:h}=e.options,f=n.source!==e.layout.source;h==="size"?xs(A=>{const M=f?n.measuredBox[A]:n.layoutBox[A],B=rs(M);M.min=s[A].min,M.max=M.min+B}):yR(h,n.layoutBox,s)&&xs(A=>{const M=f?n.measuredBox[A]:n.layoutBox[A],B=rs(s[A]);M.max=M.min+B,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[A].max=e.relativeTarget[A].min+B)});const a=Ec();Qd(a,s,n.layoutBox);const w=Ec();f?Qd(w,e.applyTransform(u,!0),n.measuredBox):Qd(w,s,n.layoutBox);const b=!fR(a);let P=!1;if(!e.resumeFrom){const A=e.getClosestProjectingParent();if(A&&!A.resumeFrom){const{snapshot:M,layout:B}=A;if(M&&B){const V=ar();Yd(V,n.layoutBox,M.layoutBox);const j=ar();Yd(j,s,B.layoutBox),pR(V,j)||(P=!0),A.options.layoutRoot&&(e.relativeTarget=j,e.relativeTargetOrigin=V,e.relativeParent=A)}}}e.notifyListeners("didUpdate",{layout:s,snapshot:n,delta:w,layoutDelta:a,hasLayoutChanged:b,hasRelativeTargetChanged:P})}else if(e.isLead()){const{onExitComplete:s}=e.options;s&&s()}e.options.transition=void 0}function XU(e){Fd&&Xl.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function QU(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function YU(e){e.clearSnapshot()}function _E(e){e.clearMeasurements()}function JU(e){e.isLayoutDirty=!1}function e8(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function xE(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function t8(e){e.resolveTargetDelta()}function n8(e){e.calcProjection()}function r8(e){e.resetSkewAndRotation()}function i8(e){e.removeLeadSnapshot()}function wE(e,t,n){e.translate=Gn(t.translate,0,n),e.scale=Gn(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function bE(e,t,n,s){e.min=Gn(t.min,n.min,s),e.max=Gn(t.max,n.max,s)}function s8(e,t,n,s){bE(e.x,t.x,n.x,s),bE(e.y,t.y,n.y,s)}function o8(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const a8={duration:.45,ease:[.4,0,.1,1]},SE=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),CE=SE("applewebkit/")&&!SE("chrome/")?Math.round:Ur;function TE(e){e.min=CE(e.min),e.max=CE(e.max)}function l8(e){TE(e.x),TE(e.y)}function yR(e,t,n){return e==="position"||e==="preserve-aspect"&&!uU(gE(t),gE(n),.2)}function u8(e){var t;return e!==e.root&&((t=e.scroll)===null||t===void 0?void 0:t.wasRoot)}const c8=gR({attachResizeListener:(e,t)=>ea(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),ix={current:void 0},vR=gR({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!ix.current){const e=new c8({});e.mount(window),e.setOptions({layoutScroll:!0}),ix.current=e}return ix.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),h8={pan:{Feature:TU},drag:{Feature:CU,ProjectionNode:vR,MeasureLayout:cR}};function EE(e,t){const n=t?"pointerenter":"pointerleave",s=t?"onHoverStart":"onHoverEnd",u=(h,f)=>{if(h.pointerType==="touch"||eR())return;const a=e.getProps();e.animationState&&a.whileHover&&e.animationState.setActive("whileHover",t);const w=a[s];w&&gn.postRender(()=>w(h,f))};return ia(e.current,n,u,{passive:!e.getProps()[s]})}class d8 extends Sl{mount(){this.unmount=ra(EE(this.node,!0),EE(this.node,!1))}unmount(){}}class f8 extends Sl{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ra(ea(this.node.current,"focus",()=>this.onFocus()),ea(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const _R=(e,t)=>t?e===t?!0:_R(e,t.parentElement):!1;function sx(e,t){if(!t)return;const n=new PointerEvent("pointer"+e);t(n,Gy(n))}class p8 extends Sl{constructor(){super(...arguments),this.removeStartListeners=Ur,this.removeEndListeners=Ur,this.removeAccessibleListeners=Ur,this.startPointerPress=(t,n)=>{if(this.isPressing)return;this.removeEndListeners();const s=this.node.getProps(),h=ia(window,"pointerup",(a,w)=>{if(!this.checkPressEnd())return;const{onTap:b,onTapCancel:P,globalTapTarget:A}=this.node.getProps(),M=!A&&!_R(this.node.current,a.target)?P:b;M&&gn.update(()=>M(a,w))},{passive:!(s.onTap||s.onPointerUp)}),f=ia(window,"pointercancel",(a,w)=>this.cancelPress(a,w),{passive:!(s.onTapCancel||s.onPointerCancel)});this.removeEndListeners=ra(h,f),this.startPress(t,n)},this.startAccessiblePress=()=>{const t=h=>{if(h.key!=="Enter"||this.isPressing)return;const f=a=>{a.key!=="Enter"||!this.checkPressEnd()||sx("up",(w,b)=>{const{onTap:P}=this.node.getProps();P&&gn.postRender(()=>P(w,b))})};this.removeEndListeners(),this.removeEndListeners=ea(this.node.current,"keyup",f),sx("down",(a,w)=>{this.startPress(a,w)})},n=ea(this.node.current,"keydown",t),s=()=>{this.isPressing&&sx("cancel",(h,f)=>this.cancelPress(h,f))},u=ea(this.node.current,"blur",s);this.removeAccessibleListeners=ra(n,u)}}startPress(t,n){this.isPressing=!0;const{onTapStart:s,whileTap:u}=this.node.getProps();u&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),s&&gn.postRender(()=>s(t,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!eR()}cancelPress(t,n){if(!this.checkPressEnd())return;const{onTapCancel:s}=this.node.getProps();s&&gn.postRender(()=>s(t,n))}mount(){const t=this.node.getProps(),n=ia(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),s=ea(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=ra(n,s)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const U0=new WeakMap,ox=new WeakMap,m8=e=>{const t=U0.get(e.target);t&&t(e)},g8=e=>{e.forEach(m8)};function y8({root:e,...t}){const n=e||document;ox.has(n)||ox.set(n,{});const s=ox.get(n),u=JSON.stringify(t);return s[u]||(s[u]=new IntersectionObserver(g8,{root:e,...t})),s[u]}function v8(e,t,n){const s=y8(t);return U0.set(e,n),s.observe(e),()=>{U0.delete(e),s.unobserve(e)}}const _8={some:0,all:1};class x8 extends Sl{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:s,amount:u="some",once:h}=t,f={root:n?n.current:void 0,rootMargin:s,threshold:typeof u=="number"?u:_8[u]},a=w=>{const{isIntersecting:b}=w;if(this.isInView===b||(this.isInView=b,h&&!b&&this.hasEnteredView))return;b&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",b);const{onViewportEnter:P,onViewportLeave:A}=this.node.getProps(),M=b?P:A;M&&M(w)};return v8(this.node.current,f,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(w8(t,n))&&this.startObserver()}unmount(){}}function w8({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const b8={inView:{Feature:x8},tap:{Feature:p8},focus:{Feature:f8},hover:{Feature:d8}},S8={layout:{ProjectionNode:vR,MeasureLayout:cR}},xR=X.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),Zy=X.createContext({}),ob=typeof window<"u",C8=ob?X.useLayoutEffect:X.useEffect,wR=X.createContext({strict:!1});function T8(e,t,n,s,u){var h,f;const{visualElement:a}=X.useContext(Zy),w=X.useContext(wR),b=X.useContext(ib),P=X.useContext(xR).reducedMotion,A=X.useRef();s=s||w.renderer,!A.current&&s&&(A.current=s(e,{visualState:t,parent:a,props:n,presenceContext:b,blockInitialAnimation:b?b.initial===!1:!1,reducedMotionConfig:P}));const M=A.current,B=X.useContext(uR);M&&!M.projection&&u&&(M.type==="html"||M.type==="svg")&&E8(A.current,n,u,B),X.useInsertionEffect(()=>{M&&M.update(n,b)});const V=n[qM],j=X.useRef(!!V&&!(!((h=window.MotionHandoffIsComplete)===null||h===void 0)&&h.call(window,V))&&((f=window.MotionHasOptimisedAnimation)===null||f===void 0?void 0:f.call(window,V)));return C8(()=>{M&&(window.MotionIsMounted=!0,M.updateFeatures(),sb.render(M.render),j.current&&M.animationState&&M.animationState.animateChanges())}),X.useEffect(()=>{M&&(!j.current&&M.animationState&&M.animationState.animateChanges(),j.current&&(queueMicrotask(()=>{var K;(K=window.MotionHandoffMarkAsComplete)===null||K===void 0||K.call(window,V)}),j.current=!1))}),M}function E8(e,t,n,s){const{layoutId:u,layout:h,drag:f,dragConstraints:a,layoutScroll:w,layoutRoot:b}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:bR(e.parent)),e.projection.setOptions({layoutId:u,layout:h,alwaysMeasureLayout:!!f||a&&Tc(a),visualElement:e,animationType:typeof h=="string"?h:"both",initialPromotionConfig:s,layoutScroll:w,layoutRoot:b})}function bR(e){if(e)return e.options.allowProjection!==!1?e.projection:bR(e.parent)}function P8(e,t,n){return X.useCallback(s=>{s&&e.mount&&e.mount(s),t&&(s?t.mount(s):t.unmount()),n&&(typeof n=="function"?n(s):Tc(n)&&(n.current=s))},[t])}function Wy(e){return Cf(e.animate)||B1.some(t=>Tf(e[t]))}function SR(e){return!!(Wy(e)||e.variants)}function A8(e,t){if(Wy(e)){const{initial:n,animate:s}=e;return{initial:n===!1||Tf(n)?n:void 0,animate:Tf(s)?s:void 0}}return e.inherit!==!1?t:{}}function k8(e){const{initial:t,animate:n}=A8(e,X.useContext(Zy));return X.useMemo(()=>({initial:t,animate:n}),[PE(t),PE(n)])}function PE(e){return Array.isArray(e)?e.join(" "):e}const AE={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Qc={};for(const e in AE)Qc[e]={isEnabled:t=>AE[e].some(n=>!!t[n])};function I8(e){for(const t in e)Qc[t]={...Qc[t],...e[t]}}const M8=Symbol.for("motionComponentSymbol");function R8({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:s,Component:u}){e&&I8(e);function h(a,w){let b;const P={...X.useContext(xR),...a,layoutId:D8(a)},{isStatic:A}=P,M=k8(a),B=s(a,A);if(!A&&ob){z8();const V=L8(P);b=V.MeasureLayout,M.visualElement=T8(u,B,P,t,V.ProjectionNode)}return gt(Zy.Provider,{value:M,children:[b&&M.visualElement?ae(b,{visualElement:M.visualElement,...P}):null,n(u,a,P8(B,M.visualElement,w),B,A,M.visualElement)]})}const f=X.forwardRef(h);return f[M8]=u,f}function D8({layoutId:e}){const t=X.useContext(lR).id;return t&&e!==void 0?t+"-"+e:e}function z8(e,t){X.useContext(wR).strict}function L8(e){const{drag:t,layout:n}=Qc;if(!t&&!n)return{};const s={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}const O8=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function ab(e){return typeof e!="string"||e.includes("-")?!1:!!(O8.indexOf(e)>-1||/[A-Z]/u.test(e))}function CR(e,{style:t,vars:n},s,u){Object.assign(e.style,t,u&&u.getProjectionStyles(s));for(const h in n)e.style.setProperty(h,n[h])}const TR=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function ER(e,t,n,s){CR(e,t,void 0,s);for(const u in t.attrs)e.setAttribute(TR.has(u)?u:qy(u),t.attrs[u])}function PR(e,{layout:t,layoutId:n}){return bl.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!Ng[e]||e==="opacity")}function lb(e,t,n){var s;const{style:u}=e,h={};for(const f in u)(ai(u[f])||t.style&&ai(t.style[f])||PR(f,e)||((s=n==null?void 0:n.getValue(f))===null||s===void 0?void 0:s.liveStyle)!==void 0)&&(h[f]=u[f]);return n&&u&&typeof u.willChange=="string"&&(n.applyWillChange=!1),h}function AR(e,t,n){const s=lb(e,t,n);for(const u in e)if(ai(e[u])||ai(t[u])){const h=Ff.indexOf(u)!==-1?"attr"+u.charAt(0).toUpperCase()+u.substring(1):u;s[h]=e[u]}return s}function F8(e){const t=X.useRef(null);return t.current===null&&(t.current=e()),t.current}function N8({applyWillChange:e=!1,scrapeMotionValuesFromProps:t,createRenderState:n,onMount:s},u,h,f,a){const w={latestValues:B8(u,h,f,a?!1:e,t),renderState:n()};return s&&(w.mount=b=>s(u,b,w)),w}const kR=e=>(t,n)=>{const s=X.useContext(Zy),u=X.useContext(ib),h=()=>N8(e,t,s,u,n);return n?h():F8(h)};function kE(e,t,n){const s=Array.isArray(t)?t:[t];for(let u=0;u<s.length;u++){const h=F1(e,s[u]);if(h){const{transitionEnd:f,transition:a,...w}=h;n(w,f)}}}function B8(e,t,n,s,u){var h;const f={};let a=s&&((h=e.style)===null||h===void 0?void 0:h.willChange)===void 0;const w=u(e,{});for(const j in w)f[j]=Zm(w[j]);let{initial:b,animate:P}=e;const A=Wy(e),M=SR(e);t&&M&&!A&&e.inherit!==!1&&(b===void 0&&(b=t.initial),P===void 0&&(P=t.animate));let B=n?n.initial===!1:!1;B=B||b===!1;const V=B?P:b;return V&&typeof V!="boolean"&&!Cf(V)&&kE(e,V,(j,K)=>{for(const F in j){let N=j[F];if(Array.isArray(N)){const W=B?N.length-1:0;N=N[W]}N!==null&&(f[F]=N)}for(const F in K)f[F]=K[F]}),a&&P&&b!==!1&&!Cf(P)&&kE(e,P,j=>{for(const K in j)if(ZM(K)){f.willChange="transform";return}}),f}const ub=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),IR=()=>({...ub(),attrs:{}}),MR=(e,t)=>t&&typeof e=="number"?t.transform(e):e,V8={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},$8=Ff.length;function j8(e,t,n){let s="",u=!0;for(let h=0;h<$8;h++){const f=Ff[h],a=e[f];if(a===void 0)continue;let w=!0;if(typeof a=="number"?w=a===(f.startsWith("scale")?1:0):w=parseFloat(a)===0,!w||n){const b=MR(a,W1[f]);if(!w){u=!1;const P=V8[f]||f;s+=`${P}(${b}) `}n&&(t[f]=b)}}return s=s.trim(),n?s=n(t,u?"":s):u&&(s="none"),s}function cb(e,t,n){const{style:s,vars:u,transformOrigin:h}=e;let f=!1,a=!1;for(const w in t){const b=t[w];if(bl.has(w)){f=!0;continue}else if(xM(w)){u[w]=b;continue}else{const P=MR(b,W1[w]);w.startsWith("origin")?(a=!0,h[w]=P):s[w]=P}}if(t.transform||(f||n?s.transform=j8(t,e.transform,n):s.transform&&(s.transform="none")),a){const{originX:w="50%",originY:b="50%",originZ:P=0}=h;s.transformOrigin=`${w} ${b} ${P}`}}function IE(e,t,n){return typeof e=="string"?e:Mt.transform(t+n*e)}function U8(e,t,n){const s=IE(t,e.x,e.width),u=IE(n,e.y,e.height);return`${s} ${u}`}const q8={offset:"stroke-dashoffset",array:"stroke-dasharray"},G8={offset:"strokeDashoffset",array:"strokeDasharray"};function Z8(e,t,n=1,s=0,u=!0){e.pathLength=1;const h=u?q8:G8;e[h.offset]=Mt.transform(-s);const f=Mt.transform(t),a=Mt.transform(n);e[h.array]=`${f} ${a}`}function hb(e,{attrX:t,attrY:n,attrScale:s,originX:u,originY:h,pathLength:f,pathSpacing:a=1,pathOffset:w=0,...b},P,A){if(cb(e,b,A),P){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:M,style:B,dimensions:V}=e;M.transform&&(V&&(B.transform=M.transform),delete M.transform),V&&(u!==void 0||h!==void 0||B.transform)&&(B.transformOrigin=U8(V,u!==void 0?u:.5,h!==void 0?h:.5)),t!==void 0&&(M.x=t),n!==void 0&&(M.y=n),s!==void 0&&(M.scale=s),f!==void 0&&Z8(M,f,a,w,!1)}const db=e=>typeof e=="string"&&e.toLowerCase()==="svg",W8={useVisualState:kR({scrapeMotionValuesFromProps:AR,createRenderState:IR,onMount:(e,t,{renderState:n,latestValues:s})=>{gn.read(()=>{try{n.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),gn.render(()=>{hb(n,s,db(t.tagName),e.transformTemplate),ER(t,n)})}})},H8={useVisualState:kR({applyWillChange:!0,scrapeMotionValuesFromProps:lb,createRenderState:ub})};function RR(e,t,n){for(const s in t)!ai(t[s])&&!PR(s,n)&&(e[s]=t[s])}function K8({transformTemplate:e},t){return X.useMemo(()=>{const n=ub();return cb(n,t,e),Object.assign({},n.vars,n.style)},[t])}function X8(e,t){const n=e.style||{},s={};return RR(s,n,e),Object.assign(s,K8(e,t)),s}function Q8(e,t){const n={},s=X8(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=s,n}const Y8=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Bg(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||Y8.has(e)}let DR=e=>!Bg(e);function J8(e){e&&(DR=t=>t.startsWith("on")?!Bg(t):e(t))}try{J8(require("@emotion/is-prop-valid").default)}catch{}function e9(e,t,n){const s={};for(const u in e)u==="values"&&typeof e.values=="object"||(DR(u)||n===!0&&Bg(u)||!t&&!Bg(u)||e.draggable&&u.startsWith("onDrag"))&&(s[u]=e[u]);return s}function t9(e,t,n,s){const u=X.useMemo(()=>{const h=IR();return hb(h,t,db(s),e.transformTemplate),{...h.attrs,style:{...h.style}}},[t]);if(e.style){const h={};RR(h,e.style,e),u.style={...h,...u.style}}return u}function n9(e=!1){return(n,s,u,{latestValues:h},f)=>{const w=(ab(n)?t9:Q8)(s,h,f,n),b=e9(s,typeof n=="string",e),P=n!==X.Fragment?{...b,...w,ref:u}:{},{children:A}=s,M=X.useMemo(()=>ai(A)?A.get():A,[A]);return X.createElement(n,{...P,children:M})}}function r9(e,t){return function(s,{forwardMotionProps:u}={forwardMotionProps:!1}){const f={...ab(s)?W8:H8,preloadedFeatures:e,useRender:n9(u),createVisualElement:t,Component:s};return R8(f)}}const q0={current:null},zR={current:!1};function i9(){if(zR.current=!0,!!ob)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>q0.current=e.matches;e.addListener(t),t()}else q0.current=!1}function s9(e,t,n){for(const s in t){const u=t[s],h=n[s];if(ai(u))e.addValue(s,u);else if(ai(h))e.addValue(s,Af(u,{owner:e}));else if(h!==u)if(e.hasValue(s)){const f=e.getValue(s);f.liveStyle===!0?f.jump(u):f.hasAnimated||f.set(u)}else{const f=e.getStaticValue(s);e.addValue(s,Af(f!==void 0?f:u,{owner:e}))}}for(const s in n)t[s]===void 0&&e.removeValue(s);return t}const ME=new WeakMap,o9=[...SM,si,yl],a9=e=>o9.find(bM(e)),RE=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class l9{scrapeMotionValuesFromProps(t,n,s){return{}}constructor({parent:t,props:n,presenceContext:s,reducedMotionConfig:u,blockInitialAnimation:h,visualState:f},a={}){this.applyWillChange=!1,this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=q1,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const M=To.now();this.renderScheduledAt<M&&(this.renderScheduledAt=M,gn.render(this.render,!1,!0))};const{latestValues:w,renderState:b}=f;this.latestValues=w,this.baseTarget={...w},this.initialValues=n.initial?{...w}:{},this.renderState=b,this.parent=t,this.props=n,this.presenceContext=s,this.depth=t?t.depth+1:0,this.reducedMotionConfig=u,this.options=a,this.blockInitialAnimation=!!h,this.isControllingVariants=Wy(n),this.isVariantNode=SR(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:P,...A}=this.scrapeMotionValuesFromProps(n,{},this);for(const M in A){const B=A[M];w[M]!==void 0&&ai(B)&&B.set(w[M],!1)}}mount(t){this.current=t,ME.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,s)=>this.bindToMotionValue(s,n)),zR.current||i9(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:q0.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){ME.delete(this.current),this.projection&&this.projection.unmount(),ml(this.notifyUpdate),ml(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const s=bl.has(t),u=n.on("change",a=>{this.latestValues[t]=a,this.props.onUpdate&&gn.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0)}),h=n.on("renderRequest",this.scheduleRender);let f;window.MotionCheckAppearSync&&(f=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{u(),h(),f&&f(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Qc){const n=Qc[t];if(!n)continue;const{isEnabled:s,Feature:u}=n;if(!this.features[t]&&u&&s(this.props)&&(this.features[t]=new u(this)),this.features[t]){const h=this.features[t];h.isMounted?h.update():(h.mount(),h.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ar()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let s=0;s<RE.length;s++){const u=RE[s];this.propEventSubscriptions[u]&&(this.propEventSubscriptions[u](),delete this.propEventSubscriptions[u]);const h="on"+u,f=t[h];f&&(this.propEventSubscriptions[u]=this.on(u,f))}this.prevMotionValues=s9(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const s=this.values.get(t);n!==s&&(s&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let s=this.values.get(t);return s===void 0&&n!==void 0&&(s=Af(n===null?void 0:n,{owner:this}),this.addValue(t,s)),s}readValue(t,n){var s;let u=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(s=this.getBaseTargetFromProps(this.props,t))!==null&&s!==void 0?s:this.readValueFromInstance(this.current,t,this.options);return u!=null&&(typeof u=="string"&&(vM(u)||gM(u))?u=parseFloat(u):!a9(u)&&yl.test(n)&&(u=MM(t,n)),this.setBaseTarget(t,ai(u)?u.get():u)),ai(u)?u.get():u}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var n;const{initial:s}=this.props;let u;if(typeof s=="string"||typeof s=="object"){const f=F1(this.props,s,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);f&&(u=f[t])}if(s&&u!==void 0)return u;const h=this.getBaseTargetFromProps(this.props,t);return h!==void 0&&!ai(h)?h:this.initialValues[t]!==void 0&&u===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new rb),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class LR extends l9{constructor(){super(...arguments),this.KeyframeResolver=RM}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:s}){delete n[t],delete s[t]}}function u9(e){return window.getComputedStyle(e)}class c9 extends LR{constructor(){super(...arguments),this.type="html",this.applyWillChange=!0,this.renderInstance=CR}readValueFromInstance(t,n){if(bl.has(n)){const s=H1(n);return s&&s.default||0}else{const s=u9(t),u=(xM(n)?s.getPropertyValue(n):s[n])||0;return typeof u=="string"?u.trim():u}}measureInstanceViewportBox(t,{transformPagePoint:n}){return oR(t,n)}build(t,n,s){cb(t,n,s.transformTemplate)}scrapeMotionValuesFromProps(t,n,s){return lb(t,n,s)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;ai(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}class h9 extends LR{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ar}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(bl.has(n)){const s=H1(n);return s&&s.default||0}return n=TR.has(n)?n:qy(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,s){return AR(t,n,s)}build(t,n,s){hb(t,n,this.isSVGTag,s.transformTemplate)}renderInstance(t,n,s,u){ER(t,n,s,u)}mount(t){this.isSVGTag=db(t.tagName),super.mount(t)}}const d9=(e,t)=>ab(e)?new h9(t):new c9(t,{allowProjection:e!==X.Fragment}),f9=r9({...eU,...b8,...h8,...S8},d9),Yc=GV(f9);function p9(){return ae("section",{className:"about naxatw-bg-white naxatw-h-fit lg:naxatw-h-[25rem]",children:gt("div",{className:"naxatw-flex naxatw-flex-col lg:naxatw-flex-row naxatw-container naxatw-py-10 lg:naxatw-py-20 naxatw-text-gray-800 naxatw-items-center",children:[ae(Yc.div,{initial:{translateX:-200,opacity:0},whileInView:{translateX:0,opacity:1},transition:{duration:.7},viewport:{once:!0},className:"naxatw-w-1/2",children:ae(Jo,{src:qV,width:350})}),gt(Yc.div,{initial:{translateX:200,opacity:0},whileInView:{translateX:0,opacity:1},transition:{duration:.7},viewport:{once:!0},className:"naxatw-flex naxatw-flex-col naxatw-gap-8 naxatw-w-full lg:naxatw-w-1/2",children:[ae("p",{className:"naxatw-text-[3rem]",children:"About Us"}),ae("p",{children:"At Geosewa, we provide essential resources for geomatics engineers, including mock tests and past exam questions for the NEC Geomatics Engineering License. Our services also encompass professional mapping and IT solutions. Join us to access top-tier study materials, expert guidance, and advanced mapping services, all designed to help you excel in your geomatics engineering career."})]})]})})}const m9="/assets/Nec-License-66fc4921.svg",g9="/assets/Nec-mocktest-c99ca461.svg",y9="/assets/Psc-prepration-40714612.svg",v9="/assets/It-services-13bbd2a9.svg",_9="/assets/arun-bhumi-91b25f28.jpg",x9="/assets/bishal-gyawali-a96bd964.jpg",w9="/assets/karan-chaudhary-be801aac.jpg",b9="/assets/samrat-acharya-073d53b9.jpg",S9=[{id:1,image:m9,title:"NEC License Material",description:"Comprehensive materials for Nepal Engineering Councils GeomaticsEngineering License exam, aligned with the latest syllabus"},{id:2,image:g9,title:"NEC License Mocktest",description:"Extensive mock tests with previous NEC questions help gauge preparation and build confidence for the exam."},{id:3,image:y9,title:"PSC Preparation",description:"We offer curated materials for PSC exams in Nepal, focusing on 4th, 5th, and 7th levels to give you an edge."},{id:4,image:v9,title:"GeoSpatial And IT services",description:"At GeoSewa, we provide geomatics and IT services, including mapping, surveys, drone services, and digital solutions."}],C9=[{id:1,question:"What is GeoSewa?",answer:"Geosewa is an educational and it service company decidated for sharing top-tier study materials, expert guidance, and advanced mapping services."},{id:2,question:"How can we get license exam materials?",answer:"You can simply email us on geosewa7@gmail.com requesting for the materials."},{id:3,question:"When does the mock test generally happen?",answer:"Generally, before one or two weeks before NEC license examination."},{id:4,question:"Is this page only for geomatics engineering mock test?",answer:"Yes, you can try us for free for 30 days.If you want, we'll provide you with a free, personalized 30-minute onboading call to get you up and running as soon as possible. "},{id:5,question:"How does billing work?",answer:"Yes, you can try us for free for a few days.If you want, we'll provide you with a free, personalized 30-minute onboading call to get you up and running as soon as possible. "},{id:6,question:"How can we contact you?",answer:"You can contact or whatsapp us at 9763252325 or DM us at geosewa page."}],T9=[{id:3,student:"Karan Chaudhary",organization:"IOE, WRC",image:w9,quote:"Very helpful and worth it. I recommend everyone to participate in the moct test conducted by Geo Sewa. It helps a lot."},{id:1,student:"Arun Kumar Bhomi",organization:"KU",image:_9,quote:"I took five Geosewa mock exams, which closely mirrored the NEC format and provided excellent practice. Many questions in the actual license exam were similar, significantly boosting my confidence and success. I highly recommend Geosewa's tests for anyone preparing for the exam."},{id:2,student:"Bishal Gyawali",organization:"IOE, WRC",image:x9,quote:"Thanks for encouraging and better confidence as the mock test is really worth it. Huge love for all Geosewa team and memebers"},{id:4,student:"Samrat Acharya",organization:"KU",image:b9,quote:"Thank you for everything. Mock Test was really a worth it. It gives you the time calculation for the questions, past question (which gets repeat in Real Examination).So, Thank you for everything."}];function E9({image:e,title:t,description:n}){return gt(ou,{gap:2,className:"naxatw-p-4 naxatw-transform naxatw-transition-transform naxatw-duration-300 hover:naxatw-scale-105 naxatw-bg-white naxatw-rounded-xl naxatw-border naxatw-shadow-lg",children:[ae(Jo,{src:e,width:60}),ae("h4",{className:"naxatw-text-gray-800",children:t}),ae("p",{children:n})]})}const OR={hidden:{opacity:0,scale:1},visible:{opacity:1,scale:1,transition:{delayChildren:.3,staggerChildren:.2}}},FR={hidden:{y:20,opacity:0},visible:{y:0,opacity:1}};function P9(){return ae("section",{className:"services naxatw-w-full naxatw-bg-[#F5FAFF]",children:gt("div",{className:"naxatw-container naxatw-py-10 md:naxatw-py-20",children:[gt(Ts,{gap:2,children:[ae("p",{className:"naxatw-text-[3rem] naxatw-text-gray-800 naxatw-text-center naxatw-mb-8",children:"Our"}),ae("p",{className:"naxatw-text-[3rem] naxatw-text-[#59AAFB] naxatw-text-center naxatw-mb-8",children:"Services"})]}),ae(Yc.div,{variants:OR,initial:"hidden",whileInView:"visible",viewport:{once:!0},className:"naxatw-grid naxatw-grid-cols-1 md:naxatw-grid-cols-2 naxatw-gap-14",children:S9.map(e=>ae(Yc.div,{variants:FR,children:ae(E9,{image:e.image,title:e.title,description:e.description},e.id)},e.id))})]})})}const A9=e=>{const{image:t,student:n,quote:s,organization:u}=e;return gt("div",{className:"testimonial-card naxatw-cursor-default naxatw-shadow-lg naxatw-rounded-xl naxatw-border naxatw-border-solid naxatw-border-[#E7EAEE] naxatw-bg-white naxatw-p-8 naxatw-text-center",children:[ae("div",{className:"image-container naxatw-mx-auto naxatw-mb-10 naxatw-h-16 naxatw-w-16",children:ae("img",{src:t,alt:n,width:100,height:100,className:"naxatw-rounded-[50%] naxatw-object-cover naxatw-object-center"})}),gt("div",{className:"text-container",children:[ae("div",{className:"description naxatw-mb-10",children:ae("p",{className:"naxatw-text-base naxatw-leading-7 naxatw-tracking-[-0.01125rem] naxatw-text-[#07090D]",children:s})}),gt("div",{className:"cutomer-details",children:[ae("p",{className:"naxatw-text-base naxatw-font-medium naxatw-leading-6 naxatw-tracking-[-0.03rem] naxatw-text-[#07090D]",children:n}),ae("span",{className:"naxatw-text-[0.875rem] naxatw-leading-6 naxatw-tracking-[-0.00875rem] naxatw-text-[#818A9C]",children:u})]})]})]})};function k9(){return ae("section",{className:"what-students-say naxatw-bg-[#FBF8F3]",children:gt("div",{className:"naxatw-py-10 md:naxatw-py-20 naxatw-container",children:[gt("p",{className:"naxatw-text-[3rem] naxatw-text-gray-800 naxatw-text-center",children:["Our Students",ae("span",{className:"naxatw-text-[3rem] naxatw-ml-2 naxatw-text-[#59AAFB]",children:"Say !"})]}),ae(Yc.div,{variants:OR,initial:"hidden",whileInView:"visible",viewport:{once:!0},className:"naxatw-grid naxatw-grid-cols-1 naxatw-gap-10 naxatw-mt-8 md:naxatw-grid-cols-2 xl:naxatw-grid-cols-3",children:T9.slice(1,4).map(e=>ae(Yc.div,{variants:FR,children:ae(A9,{...e},e.id)},e.id))})]})})}function I9(e,t=[]){let n=[];function s(h,f){const a=X.createContext(f),w=n.length;n=[...n,f];const b=A=>{var F;const{scope:M,children:B,...V}=A,j=((F=M==null?void 0:M[e])==null?void 0:F[w])||a,K=X.useMemo(()=>V,Object.values(V));return ae(j.Provider,{value:K,children:B})};b.displayName=h+"Provider";function P(A,M){var j;const B=((j=M==null?void 0:M[e])==null?void 0:j[w])||a,V=X.useContext(B);if(V)return V;if(f!==void 0)return f;throw new Error(`\`${A}\` must be used within \`${h}\``)}return[b,P]}const u=()=>{const h=n.map(f=>X.createContext(f));return function(a){const w=(a==null?void 0:a[e])||h;return X.useMemo(()=>({[`__scope${e}`]:{...a,[e]:w}}),[a,w])}};return u.scopeName=e,[s,M9(u,...t)]}function M9(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const s=e.map(u=>({useScope:u(),scopeName:u.scopeName}));return function(h){const f=s.reduce((a,{useScope:w,scopeName:b})=>{const A=w(h)[`__scope${b}`];return{...a,...A}},{});return X.useMemo(()=>({[`__scope${t.scopeName}`]:f}),[f])}};return n.scopeName=t.scopeName,n}function R9(e,t=[]){let n=[];function s(h,f){const a=X.createContext(f),w=n.length;n=[...n,f];function b(A){const{scope:M,children:B,...V}=A,j=(M==null?void 0:M[e][w])||a,K=X.useMemo(()=>V,Object.values(V));return ae(j.Provider,{value:K,children:B})}function P(A,M){const B=(M==null?void 0:M[e][w])||a,V=X.useContext(B);if(V)return V;if(f!==void 0)return f;throw new Error(`\`${A}\` must be used within \`${h}\``)}return b.displayName=h+"Provider",[b,P]}const u=()=>{const h=n.map(f=>X.createContext(f));return function(a){const w=(a==null?void 0:a[e])||h;return X.useMemo(()=>({[`__scope${e}`]:{...a,[e]:w}}),[a,w])}};return u.scopeName=e,[s,D9(u,...t)]}function D9(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const s=e.map(u=>({useScope:u(),scopeName:u.scopeName}));return function(h){const f=s.reduce((a,{useScope:w,scopeName:b})=>{const A=w(h)[`__scope${b}`];return{...a,...A}},{});return X.useMemo(()=>({[`__scope${t.scopeName}`]:f}),[f])}};return n.scopeName=t.scopeName,n}function z9(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function NR(...e){return t=>e.forEach(n=>z9(n,t))}function DE(...e){return X.useCallback(NR(...e),e)}var G0=X.forwardRef((e,t)=>{const{children:n,...s}=e,u=X.Children.toArray(n),h=u.find(O9);if(h){const f=h.props.children,a=u.map(w=>w===h?X.Children.count(f)>1?X.Children.only(null):X.isValidElement(f)?f.props.children:null:w);return ae(Z0,{...s,ref:t,children:X.isValidElement(f)?X.cloneElement(f,void 0,a):null})}return ae(Z0,{...s,ref:t,children:n})});G0.displayName="Slot";var Z0=X.forwardRef((e,t)=>{const{children:n,...s}=e;if(X.isValidElement(n)){const u=N9(n);return X.cloneElement(n,{...F9(s,n.props),ref:t?NR(t,u):u})}return X.Children.count(n)>1?X.Children.only(null):null});Z0.displayName="SlotClone";var L9=({children:e})=>ae(Eo,{children:e});function O9(e){return X.isValidElement(e)&&e.type===L9}function F9(e,t){const n={...t};for(const s in t){const u=e[s],h=t[s];/^on[A-Z]/.test(s)?u&&h?n[s]=(...a)=>{h(...a),u(...a)}:u&&(n[s]=u):s==="style"?n[s]={...u,...h}:s==="className"&&(n[s]=[u,h].filter(Boolean).join(" "))}return{...e,...n}}function N9(e){var s,u;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(u=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:u.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function B9(e){const t=e+"CollectionProvider",[n,s]=R9(t),[u,h]=n(t,{collectionRef:{current:null},itemMap:new Map}),f=B=>{const{scope:V,children:j}=B,K=ft.useRef(null),F=ft.useRef(new Map).current;return ae(u,{scope:V,itemMap:F,collectionRef:K,children:j})};f.displayName=t;const a=e+"CollectionSlot",w=ft.forwardRef((B,V)=>{const{scope:j,children:K}=B,F=h(a,j),N=DE(V,F.collectionRef);return ae(G0,{ref:N,children:K})});w.displayName=a;const b=e+"CollectionItemSlot",P="data-radix-collection-item",A=ft.forwardRef((B,V)=>{const{scope:j,children:K,...F}=B,N=ft.useRef(null),W=DE(V,N),ne=h(b,j);return ft.useEffect(()=>(ne.itemMap.set(N,{ref:N,...F}),()=>void ne.itemMap.delete(N))),ae(G0,{[P]:"",ref:W,children:K})});A.displayName=b;function M(B){const V=h(e+"CollectionConsumer",B);return ft.useCallback(()=>{const K=V.collectionRef.current;if(!K)return[];const F=Array.from(K.querySelectorAll(`[${P}]`));return Array.from(V.itemMap.values()).sort((ne,pe)=>F.indexOf(ne.ref.current)-F.indexOf(pe.ref.current))},[V.collectionRef,V.itemMap])}return[{Provider:f,Slot:w,ItemSlot:A},M,s]}function V9(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function BR(...e){return t=>e.forEach(n=>V9(n,t))}function $9(...e){return X.useCallback(BR(...e),e)}function j9(e,t,{checkForDefaultPrevented:n=!0}={}){return function(u){if(e==null||e(u),n===!1||!u.defaultPrevented)return t==null?void 0:t(u)}}function VR(e){const t=X.useRef(e);return X.useEffect(()=>{t.current=e}),X.useMemo(()=>(...n)=>{var s;return(s=t.current)==null?void 0:s.call(t,...n)},[])}function $R({prop:e,defaultProp:t,onChange:n=()=>{}}){const[s,u]=U9({defaultProp:t,onChange:n}),h=e!==void 0,f=h?e:s,a=VR(n),w=X.useCallback(b=>{if(h){const A=typeof b=="function"?b(e):b;A!==e&&a(A)}else u(b)},[h,e,u,a]);return[f,w]}function U9({defaultProp:e,onChange:t}){const n=X.useState(e),[s]=n,u=X.useRef(s),h=VR(t);return X.useEffect(()=>{u.current!==s&&(h(s),u.current=s)},[s,u,h]),n}var jR=X.forwardRef((e,t)=>{const{children:n,...s}=e,u=X.Children.toArray(n),h=u.find(G9);if(h){const f=h.props.children,a=u.map(w=>w===h?X.Children.count(f)>1?X.Children.only(null):X.isValidElement(f)?f.props.children:null:w);return ae(W0,{...s,ref:t,children:X.isValidElement(f)?X.cloneElement(f,void 0,a):null})}return ae(W0,{...s,ref:t,children:n})});jR.displayName="Slot";var W0=X.forwardRef((e,t)=>{const{children:n,...s}=e;if(X.isValidElement(n)){const u=W9(n);return X.cloneElement(n,{...Z9(s,n.props),ref:t?BR(t,u):u})}return X.Children.count(n)>1?X.Children.only(null):null});W0.displayName="SlotClone";var q9=({children:e})=>ae(Eo,{children:e});function G9(e){return X.isValidElement(e)&&e.type===q9}function Z9(e,t){const n={...t};for(const s in t){const u=e[s],h=t[s];/^on[A-Z]/.test(s)?u&&h?n[s]=(...a)=>{h(...a),u(...a)}:u&&(n[s]=u):s==="style"?n[s]={...u,...h}:s==="className"&&(n[s]=[u,h].filter(Boolean).join(" "))}return{...e,...n}}function W9(e){var s,u;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(u=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:u.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var H9=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],UR=H9.reduce((e,t)=>{const n=X.forwardRef((s,u)=>{const{asChild:h,...f}=s,a=h?jR:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),ae(a,{...f,ref:u})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function K9(e,t,{checkForDefaultPrevented:n=!0}={}){return function(u){if(e==null||e(u),n===!1||!u.defaultPrevented)return t==null?void 0:t(u)}}function X9(e,t=[]){let n=[];function s(h,f){const a=X.createContext(f),w=n.length;n=[...n,f];const b=A=>{var F;const{scope:M,children:B,...V}=A,j=((F=M==null?void 0:M[e])==null?void 0:F[w])||a,K=X.useMemo(()=>V,Object.values(V));return ae(j.Provider,{value:K,children:B})};b.displayName=h+"Provider";function P(A,M){var j;const B=((j=M==null?void 0:M[e])==null?void 0:j[w])||a,V=X.useContext(B);if(V)return V;if(f!==void 0)return f;throw new Error(`\`${A}\` must be used within \`${h}\``)}return[b,P]}const u=()=>{const h=n.map(f=>X.createContext(f));return function(a){const w=(a==null?void 0:a[e])||h;return X.useMemo(()=>({[`__scope${e}`]:{...a,[e]:w}}),[a,w])}};return u.scopeName=e,[s,Q9(u,...t)]}function Q9(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const s=e.map(u=>({useScope:u(),scopeName:u.scopeName}));return function(h){const f=s.reduce((a,{useScope:w,scopeName:b})=>{const A=w(h)[`__scope${b}`];return{...a,...A}},{});return X.useMemo(()=>({[`__scope${t.scopeName}`]:f}),[f])}};return n.scopeName=t.scopeName,n}function qR(e){const t=X.useRef(e);return X.useEffect(()=>{t.current=e}),X.useMemo(()=>(...n)=>{var s;return(s=t.current)==null?void 0:s.call(t,...n)},[])}function Y9({prop:e,defaultProp:t,onChange:n=()=>{}}){const[s,u]=J9({defaultProp:t,onChange:n}),h=e!==void 0,f=h?e:s,a=qR(n),w=X.useCallback(b=>{if(h){const A=typeof b=="function"?b(e):b;A!==e&&a(A)}else u(b)},[h,e,u,a]);return[f,w]}function J9({defaultProp:e,onChange:t}){const n=X.useState(e),[s]=n,u=X.useRef(s),h=qR(t);return X.useEffect(()=>{u.current!==s&&(h(s),u.current=s)},[s,u,h]),n}var Vg=globalThis!=null&&globalThis.document?X.useLayoutEffect:()=>{};function eq(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function GR(...e){return t=>e.forEach(n=>eq(n,t))}function ZR(...e){return X.useCallback(GR(...e),e)}var WR=X.forwardRef((e,t)=>{const{children:n,...s}=e,u=X.Children.toArray(n),h=u.find(nq);if(h){const f=h.props.children,a=u.map(w=>w===h?X.Children.count(f)>1?X.Children.only(null):X.isValidElement(f)?f.props.children:null:w);return ae(H0,{...s,ref:t,children:X.isValidElement(f)?X.cloneElement(f,void 0,a):null})}return ae(H0,{...s,ref:t,children:n})});WR.displayName="Slot";var H0=X.forwardRef((e,t)=>{const{children:n,...s}=e;if(X.isValidElement(n)){const u=iq(n);return X.cloneElement(n,{...rq(s,n.props),ref:t?GR(t,u):u})}return X.Children.count(n)>1?X.Children.only(null):null});H0.displayName="SlotClone";var tq=({children:e})=>ae(Eo,{children:e});function nq(e){return X.isValidElement(e)&&e.type===tq}function rq(e,t){const n={...t};for(const s in t){const u=e[s],h=t[s];/^on[A-Z]/.test(s)?u&&h?n[s]=(...a)=>{h(...a),u(...a)}:u&&(n[s]=u):s==="style"?n[s]={...u,...h}:s==="className"&&(n[s]=[u,h].filter(Boolean).join(" "))}return{...e,...n}}function iq(e){var s,u;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(u=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:u.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var sq=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],fb=sq.reduce((e,t)=>{const n=X.forwardRef((s,u)=>{const{asChild:h,...f}=s,a=h?WR:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),ae(a,{...f,ref:u})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function oq(e,t){return X.useReducer((n,s)=>t[n][s]??n,e)}var HR=e=>{const{present:t,children:n}=e,s=aq(t),u=typeof n=="function"?n({present:s.isPresent}):X.Children.only(n),h=ZR(s.ref,lq(u));return typeof n=="function"||s.isPresent?X.cloneElement(u,{ref:h}):null};HR.displayName="Presence";function aq(e){const[t,n]=X.useState(),s=X.useRef({}),u=X.useRef(e),h=X.useRef("none"),f=e?"mounted":"unmounted",[a,w]=oq(f,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return X.useEffect(()=>{const b=xm(s.current);h.current=a==="mounted"?b:"none"},[a]),Vg(()=>{const b=s.current,P=u.current;if(P!==e){const M=h.current,B=xm(b);e?w("MOUNT"):B==="none"||(b==null?void 0:b.display)==="none"?w("UNMOUNT"):w(P&&M!==B?"ANIMATION_OUT":"UNMOUNT"),u.current=e}},[e,w]),Vg(()=>{if(t){let b;const P=t.ownerDocument.defaultView??window,A=B=>{const j=xm(s.current).includes(B.animationName);if(B.target===t&&j&&(w("ANIMATION_END"),!u.current)){const K=t.style.animationFillMode;t.style.animationFillMode="forwards",b=P.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=K)})}},M=B=>{B.target===t&&(h.current=xm(s.current))};return t.addEventListener("animationstart",M),t.addEventListener("animationcancel",A),t.addEventListener("animationend",A),()=>{P.clearTimeout(b),t.removeEventListener("animationstart",M),t.removeEventListener("animationcancel",A),t.removeEventListener("animationend",A)}}else w("ANIMATION_END")},[t,w]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:X.useCallback(b=>{b&&(s.current=getComputedStyle(b)),n(b)},[])}}function xm(e){return(e==null?void 0:e.animationName)||"none"}function lq(e){var s,u;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(u=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:u.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var uq=lw["useId".toString()]||(()=>{}),cq=0;function hq(e){const[t,n]=X.useState(uq());return Vg(()=>{e||n(s=>s??String(cq++))},[e]),e||(t?`radix-${t}`:"")}var pb="Collapsible",[dq,KR]=X9(pb),[fq,mb]=dq(pb),XR=X.forwardRef((e,t)=>{const{__scopeCollapsible:n,open:s,defaultOpen:u,disabled:h,onOpenChange:f,...a}=e,[w=!1,b]=Y9({prop:s,defaultProp:u,onChange:f});return ae(fq,{scope:n,disabled:h,contentId:hq(),open:w,onOpenToggle:X.useCallback(()=>b(P=>!P),[b]),children:ae(fb.div,{"data-state":yb(w),"data-disabled":h?"":void 0,...a,ref:t})})});XR.displayName=pb;var QR="CollapsibleTrigger",YR=X.forwardRef((e,t)=>{const{__scopeCollapsible:n,...s}=e,u=mb(QR,n);return ae(fb.button,{type:"button","aria-controls":u.contentId,"aria-expanded":u.open||!1,"data-state":yb(u.open),"data-disabled":u.disabled?"":void 0,disabled:u.disabled,...s,ref:t,onClick:K9(e.onClick,u.onOpenToggle)})});YR.displayName=QR;var gb="CollapsibleContent",JR=X.forwardRef((e,t)=>{const{forceMount:n,...s}=e,u=mb(gb,e.__scopeCollapsible);return ae(HR,{present:n||u.open,children:({present:h})=>ae(pq,{...s,ref:t,present:h})})});JR.displayName=gb;var pq=X.forwardRef((e,t)=>{const{__scopeCollapsible:n,present:s,children:u,...h}=e,f=mb(gb,n),[a,w]=X.useState(s),b=X.useRef(null),P=ZR(t,b),A=X.useRef(0),M=A.current,B=X.useRef(0),V=B.current,j=f.open||a,K=X.useRef(j),F=X.useRef();return X.useEffect(()=>{const N=requestAnimationFrame(()=>K.current=!1);return()=>cancelAnimationFrame(N)},[]),Vg(()=>{const N=b.current;if(N){F.current=F.current||{transitionDuration:N.style.transitionDuration,animationName:N.style.animationName},N.style.transitionDuration="0s",N.style.animationName="none";const W=N.getBoundingClientRect();A.current=W.height,B.current=W.width,K.current||(N.style.transitionDuration=F.current.transitionDuration,N.style.animationName=F.current.animationName),w(s)}},[f.open,s]),ae(fb.div,{"data-state":yb(f.open),"data-disabled":f.disabled?"":void 0,id:f.contentId,hidden:!j,...h,ref:P,style:{"--radix-collapsible-content-height":M?`${M}px`:void 0,"--radix-collapsible-content-width":V?`${V}px`:void 0,...e.style},children:j&&u})});function yb(e){return e?"open":"closed"}var mq=XR,gq=YR,yq=JR,vq=globalThis!=null&&globalThis.document?X.useLayoutEffect:()=>{},_q=lw["useId".toString()]||(()=>{}),xq=0;function wq(e){const[t,n]=X.useState(_q());return vq(()=>{e||n(s=>s??String(xq++))},[e]),e||(t?`radix-${t}`:"")}var bq=X.createContext(void 0);function Sq(e){const t=X.useContext(bq);return e||t||"ltr"}var pa="Accordion",Cq=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[vb,Tq,Eq]=B9(pa),[Hy,PZ]=I9(pa,[Eq,KR]),_b=KR(),eD=ft.forwardRef((e,t)=>{const{type:n,...s}=e,u=s,h=s;return ae(vb.Provider,{scope:e.__scopeAccordion,children:n==="multiple"?ae(Iq,{...h,ref:t}):ae(kq,{...u,ref:t})})});eD.displayName=pa;var[tD,Pq]=Hy(pa),[nD,Aq]=Hy(pa,{collapsible:!1}),kq=ft.forwardRef((e,t)=>{const{value:n,defaultValue:s,onValueChange:u=()=>{},collapsible:h=!1,...f}=e,[a,w]=$R({prop:n,defaultProp:s,onChange:u});return ae(tD,{scope:e.__scopeAccordion,value:a?[a]:[],onItemOpen:w,onItemClose:ft.useCallback(()=>h&&w(""),[h,w]),children:ae(nD,{scope:e.__scopeAccordion,collapsible:h,children:ae(rD,{...f,ref:t})})})}),Iq=ft.forwardRef((e,t)=>{const{value:n,defaultValue:s,onValueChange:u=()=>{},...h}=e,[f=[],a]=$R({prop:n,defaultProp:s,onChange:u}),w=ft.useCallback(P=>a((A=[])=>[...A,P]),[a]),b=ft.useCallback(P=>a((A=[])=>A.filter(M=>M!==P)),[a]);return ae(tD,{scope:e.__scopeAccordion,value:f,onItemOpen:w,onItemClose:b,children:ae(nD,{scope:e.__scopeAccordion,collapsible:!0,children:ae(rD,{...h,ref:t})})})}),[Mq,Ky]=Hy(pa),rD=ft.forwardRef((e,t)=>{const{__scopeAccordion:n,disabled:s,dir:u,orientation:h="vertical",...f}=e,a=ft.useRef(null),w=$9(a,t),b=Tq(n),A=Sq(u)==="ltr",M=j9(e.onKeyDown,B=>{var Se;if(!Cq.includes(B.key))return;const V=B.target,j=b().filter(qe=>{var ze;return!((ze=qe.ref.current)!=null&&ze.disabled)}),K=j.findIndex(qe=>qe.ref.current===V),F=j.length;if(K===-1)return;B.preventDefault();let N=K;const W=0,ne=F-1,pe=()=>{N=K+1,N>ne&&(N=W)},Ce=()=>{N=K-1,N<W&&(N=ne)};switch(B.key){case"Home":N=W;break;case"End":N=ne;break;case"ArrowRight":h==="horizontal"&&(A?pe():Ce());break;case"ArrowDown":h==="vertical"&&pe();break;case"ArrowLeft":h==="horizontal"&&(A?Ce():pe());break;case"ArrowUp":h==="vertical"&&Ce();break}const Ie=N%F;(Se=j[Ie].ref.current)==null||Se.focus()});return ae(Mq,{scope:n,disabled:s,direction:u,orientation:h,children:ae(vb.Slot,{scope:n,children:ae(UR.div,{...f,"data-orientation":h,ref:w,onKeyDown:s?void 0:M})})})}),$g="AccordionItem",[Rq,xb]=Hy($g),iD=ft.forwardRef((e,t)=>{const{__scopeAccordion:n,value:s,...u}=e,h=Ky($g,n),f=Pq($g,n),a=_b(n),w=wq(),b=s&&f.value.includes(s)||!1,P=h.disabled||e.disabled;return ae(Rq,{scope:n,open:b,disabled:P,triggerId:w,children:ae(mq,{"data-orientation":h.orientation,"data-state":cD(b),...a,...u,ref:t,disabled:P,open:b,onOpenChange:A=>{A?f.onItemOpen(s):f.onItemClose(s)}})})});iD.displayName=$g;var sD="AccordionHeader",oD=ft.forwardRef((e,t)=>{const{__scopeAccordion:n,...s}=e,u=Ky(pa,n),h=xb(sD,n);return ae(UR.h3,{"data-orientation":u.orientation,"data-state":cD(h.open),"data-disabled":h.disabled?"":void 0,...s,ref:t})});oD.displayName=sD;var K0="AccordionTrigger",aD=ft.forwardRef((e,t)=>{const{__scopeAccordion:n,...s}=e,u=Ky(pa,n),h=xb(K0,n),f=Aq(K0,n),a=_b(n);return ae(vb.ItemSlot,{scope:n,children:ae(gq,{"aria-disabled":h.open&&!f.collapsible||void 0,"data-orientation":u.orientation,id:h.triggerId,...a,...s,ref:t})})});aD.displayName=K0;var lD="AccordionContent",uD=ft.forwardRef((e,t)=>{const{__scopeAccordion:n,...s}=e,u=Ky(pa,n),h=xb(lD,n),f=_b(n);return ae(yq,{role:"region","aria-labelledby":h.triggerId,"data-orientation":u.orientation,...f,...s,ref:t,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...e.style}})});uD.displayName=lD;function cD(e){return e?"open":"closed"}var Dq=eD,zq=iD,Lq=oD,hD=aD,dD=uD;const Oq=Dq,fD=ft.forwardRef(({className:e,...t},n)=>ae(zq,{ref:n,className:wl("",e),...t}));fD.displayName="AccordionItem";const pD=ft.forwardRef(({className:e,children:t,...n},s)=>ae(Lq,{children:ae(hD,{ref:s,className:wl("",e),...n,children:t})}));pD.displayName=hD.displayName;const mD=ft.forwardRef(({className:e,children:t,...n},s)=>ae(dD,{ref:s,className:wl("naxatw-overflow-hidden data-[state=closed]:naxatw-animate-accordion-up data-[state=open]:naxatw-animate-accordion-down",e),...n,children:t}));mD.displayName=dD.displayName;function Ti({name:e,className:t,iconSymbolType:n="material-symbols-outlined",onClick:s}){return ae("i",{role:"button",tabIndex:0,onKeyUp:()=>{},onClick:s,className:`naxatw-text-icon-sm lg:naxatw-text-2xl ${t} ${n}`,children:e})}const Fq=({faqsDataList:e})=>{const[t,n]=X.useState(null);return ae("div",{className:"accordion-wrapper",children:ae(Oq,{type:"single",collapsible:!0,className:"naxatw-transition-all naxatw-duration-300 naxatw-ease-out",children:e.map(s=>gt(fD,{value:`item-${s.id}`,className:"naxatw-border-b naxatw-border-b-[#A9A9A9]",onClick:()=>{if(t===s.id){n(null);return}n(s.id)},children:[gt(pD,{className:"naxatw-flex naxatw-w-full  naxatw-items-center naxatw-justify-between naxatw-gap-4 naxatw-py-6 naxatw-text-left",children:[ae("p",{className:"naxatw-text-xl naxatw-font-medium naxatw-leading-6 naxatw-tracking-[-0.01125rem] naxatw-text-[#2B2B2B] ",children:s.question}),t===s.id?ae(Ti,{name:"remove_circle_outline",className:"naxatw-text-main"}):ae(Ti,{name:"add_circle_outline",className:"hover:naxatw-text-main"})]}),t===s.id&&ae(mD,{className:"data-[state=closed]:naxatw-animate-accordion-up",children:ae("p",{className:"naxatw-overflow-hidden naxatw-pb-6 naxatw-text-lg naxatw-font-normal naxatw-tracking-[-0.01125rem] naxatw-text-[#4E4E4E]",children:s.answer})})]},s.id))})})};function Nq(){return ae("section",{className:"faq-section naxatw-bg-[#F5FAFF]",children:gt("div",{className:"naxatw-container naxatw-py-10 md:naxatw-py-20",children:[ae("p",{className:"naxatw-text-[3rem] naxatw-text-gray-800",children:"FAQs"}),ae("div",{className:"faqs-container",children:ae(Fq,{faqsDataList:C9})})]})})}const Bq="/assets/twitter-icon-26997669.svg",Vq="/assets/facebook-icon-2cec1970.svg",$q="/assets/linkedin-icon-575d4072.svg",jq="/assets/instagram-icon-1a2c4b29.svg";function Uq(){return ae("section",{className:"footer naxatw-bg-primary",children:gt("div",{className:"naxatw-container naxatw-py-10 md:naxatw-py-20 naxatw-flex naxatw-justify-between naxatw-flex-col md:naxatw-flex-row naxatw-items-center naxatw-gap-14 naxatw-animate-fade-up",children:[gt(ou,{gap:2.5,children:[gt(Ts,{className:"naxatw-text-white naxatw-items-center",gap:2,children:[ae(Ti,{name:"public"}),ae("div",{className:"naxatw-cursor-pointer",role:"presentation",children:ae("h3",{className:"naxatw-text-white naxatw-font-medium",children:"GeoSewa"})})]}),gt(ou,{gap:1,className:"naxatw-ml-3",children:[ae("p",{className:"naxatw-text-white naxatw-text-body-lg",children:"geosewa7@gmail.com"}),ae("p",{className:"naxatw-text-white naxatw-text-body-lg",children:"+977-9763252325"})]})]}),gt(ou,{gap:2.5,children:[ae("h4",{className:"naxatw-text-white naxatw-font-medium",children:"Follow Us On"}),gt(Ts,{gap:2,children:[ae(Jo,{src:Bq,width:20}),ae(Jo,{src:Vq,width:20}),ae(Jo,{src:$q,width:20}),ae(Jo,{src:jq,width:20})]})]}),gt(ou,{children:[ae("h4",{className:"naxatw-text-white naxatw-font-medium naxatw-mb-2",children:"Payment Partners"}),ae(Ts,{children:ae("p",{className:"naxatw-text-white naxatw-text-xl",children:"Khalti"})})]})]})})}function qq(){return gt("main",{className:"scrollbar",children:[ae(UV,{}),ae(p9,{}),ae(P9,{}),ae(k9,{}),ae(Nq,{}),ae(Uq,{})]})}function Gq(){return ae("main",{className:"notes naxatw-h-screen-nav naxatw-w-full",children:ae(sM,{className:"naxatw-h-full naxatw-justify-center naxatw-animate-fade-up naxatw-font-medium naxatw-items-center",children:ae("h3",{children:"The notes section is in progress. Stay tuned...."})})})}function Zq(){return ae(Gq,{})}const Wq=({tabOptions:e,className:t,activeClassName:n,onTabChange:s,activeTab:u,clickable:h=!1,orientation:f="column"})=>{const[a,w]=X.useState(u);X.useEffect(()=>{w(u)},[u]);const b=P=>{h&&(w(P),s(P))};return ae("div",{className:`${f==="column"?"":"naxatw-flex"}`,children:e.map(P=>ae("div",{className:`${t} naxatw-cursor-pointer naxatw-text-gray-600a ${a===P.value?`${n} !naxatw-border-b-primary naxatw-border-b-2 naxatw-text-primary`:"hover:naxatw-text-primary"}`,onClick:()=>b(P.value),children:ae("p",{className:"naxatw-px-3 naxatw-py-2 naxatw-text-body-btn",children:P.label})},P.id))})},Hq=[{id:1,label:"Exam Section",value:"exam-section"},{id:2,label:"Form Section",value:"form-section"}],{setCommonState:Kq,toggleModal:gD,setModalContent:Xq,togglePromptDialog:Qq,setToggleNavbar:zE,setPromptDialogContent:Yq}=HI.actions;function Jq(){return gt("div",{className:"naxatw-border-primary naxatw-border naxatw-cursor-pointer naxatw-rounded-md naxatw-flex naxatw-flex-col naxatw-w-fit naxatw-p-4 naxatw-gap-2",children:[ae(Ti,{name:"edit_note",className:"naxatw-text-[4rem] naxatw-text-center naxatw-text-primary"}),ae("h5",{className:"naxatw-text-primary",children:"Geomatics License Mock Test"})]})}function LE(){return ae("section",{className:"naxatw-h-full naxatw-p-4",children:gt("div",{className:"naxatw-h-full",children:[ae("h6",{children:"These are the currently available exams:"}),ae("div",{className:"naxatw-mt-6",children:ae(Jq,{})})]})})}function e7(){return ae("section",{className:"naxatw-h-full naxatw-w-full naxatw-p-4",children:ae("div",{className:"naxatw-h-[80%] naxatw-flex naxatw-items-center naxatw-justify-center",children:gt("div",{className:"naxatw-flex naxatw-flex-col naxatw-items-center naxatw-gap-2",children:[ae(Ti,{name:"delete_forever",className:"naxatw-text-[10em]"}),ae("h6",{children:"No Forms Available at the moment"})]})})})}function yD(e,t){return function(){return e.apply(t,arguments)}}const{toString:t7}=Object.prototype,{getPrototypeOf:wb}=Object,Xy=(e=>t=>{const n=t7.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Po=e=>(e=e.toLowerCase(),t=>Xy(t)===e),Qy=e=>t=>typeof t===e,{isArray:uh}=Array,kf=Qy("undefined");function n7(e){return e!==null&&!kf(e)&&e.constructor!==null&&!kf(e.constructor)&&Ps(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const vD=Po("ArrayBuffer");function r7(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&vD(e.buffer),t}const i7=Qy("string"),Ps=Qy("function"),_D=Qy("number"),Yy=e=>e!==null&&typeof e=="object",s7=e=>e===!0||e===!1,Wm=e=>{if(Xy(e)!=="object")return!1;const t=wb(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},o7=Po("Date"),a7=Po("File"),l7=Po("Blob"),u7=Po("FileList"),c7=e=>Yy(e)&&Ps(e.pipe),h7=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Ps(e.append)&&((t=Xy(e))==="formdata"||t==="object"&&Ps(e.toString)&&e.toString()==="[object FormData]"))},d7=Po("URLSearchParams"),f7=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Vf(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let s,u;if(typeof e!="object"&&(e=[e]),uh(e))for(s=0,u=e.length;s<u;s++)t.call(null,e[s],s,e);else{const h=n?Object.getOwnPropertyNames(e):Object.keys(e),f=h.length;let a;for(s=0;s<f;s++)a=h[s],t.call(null,e[a],a,e)}}function xD(e,t){t=t.toLowerCase();const n=Object.keys(e);let s=n.length,u;for(;s-- >0;)if(u=n[s],t===u.toLowerCase())return u;return null}const wD=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),bD=e=>!kf(e)&&e!==wD;function X0(){const{caseless:e}=bD(this)&&this||{},t={},n=(s,u)=>{const h=e&&xD(t,u)||u;Wm(t[h])&&Wm(s)?t[h]=X0(t[h],s):Wm(s)?t[h]=X0({},s):uh(s)?t[h]=s.slice():t[h]=s};for(let s=0,u=arguments.length;s<u;s++)arguments[s]&&Vf(arguments[s],n);return t}const p7=(e,t,n,{allOwnKeys:s}={})=>(Vf(t,(u,h)=>{n&&Ps(u)?e[h]=yD(u,n):e[h]=u},{allOwnKeys:s}),e),m7=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),g7=(e,t,n,s)=>{e.prototype=Object.create(t.prototype,s),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},y7=(e,t,n,s)=>{let u,h,f;const a={};if(t=t||{},e==null)return t;do{for(u=Object.getOwnPropertyNames(e),h=u.length;h-- >0;)f=u[h],(!s||s(f,e,t))&&!a[f]&&(t[f]=e[f],a[f]=!0);e=n!==!1&&wb(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},v7=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const s=e.indexOf(t,n);return s!==-1&&s===n},_7=e=>{if(!e)return null;if(uh(e))return e;let t=e.length;if(!_D(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},x7=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&wb(Uint8Array)),w7=(e,t)=>{const s=(e&&e[Symbol.iterator]).call(e);let u;for(;(u=s.next())&&!u.done;){const h=u.value;t.call(e,h[0],h[1])}},b7=(e,t)=>{let n;const s=[];for(;(n=e.exec(t))!==null;)s.push(n);return s},S7=Po("HTMLFormElement"),C7=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,s,u){return s.toUpperCase()+u}),OE=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),T7=Po("RegExp"),SD=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),s={};Vf(n,(u,h)=>{let f;(f=t(u,h,e))!==!1&&(s[h]=f||u)}),Object.defineProperties(e,s)},E7=e=>{SD(e,(t,n)=>{if(Ps(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const s=e[n];if(Ps(s)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},P7=(e,t)=>{const n={},s=u=>{u.forEach(h=>{n[h]=!0})};return uh(e)?s(e):s(String(e).split(t)),n},A7=()=>{},k7=(e,t)=>(e=+e,Number.isFinite(e)?e:t),ax="abcdefghijklmnopqrstuvwxyz",FE="0123456789",CD={DIGIT:FE,ALPHA:ax,ALPHA_DIGIT:ax+ax.toUpperCase()+FE},I7=(e=16,t=CD.ALPHA_DIGIT)=>{let n="";const{length:s}=t;for(;e--;)n+=t[Math.random()*s|0];return n};function M7(e){return!!(e&&Ps(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const R7=e=>{const t=new Array(10),n=(s,u)=>{if(Yy(s)){if(t.indexOf(s)>=0)return;if(!("toJSON"in s)){t[u]=s;const h=uh(s)?[]:{};return Vf(s,(f,a)=>{const w=n(f,u+1);!kf(w)&&(h[a]=w)}),t[u]=void 0,h}}return s};return n(e,0)},D7=Po("AsyncFunction"),z7=e=>e&&(Yy(e)||Ps(e))&&Ps(e.then)&&Ps(e.catch),Be={isArray:uh,isArrayBuffer:vD,isBuffer:n7,isFormData:h7,isArrayBufferView:r7,isString:i7,isNumber:_D,isBoolean:s7,isObject:Yy,isPlainObject:Wm,isUndefined:kf,isDate:o7,isFile:a7,isBlob:l7,isRegExp:T7,isFunction:Ps,isStream:c7,isURLSearchParams:d7,isTypedArray:x7,isFileList:u7,forEach:Vf,merge:X0,extend:p7,trim:f7,stripBOM:m7,inherits:g7,toFlatObject:y7,kindOf:Xy,kindOfTest:Po,endsWith:v7,toArray:_7,forEachEntry:w7,matchAll:b7,isHTMLForm:S7,hasOwnProperty:OE,hasOwnProp:OE,reduceDescriptors:SD,freezeMethods:E7,toObjectSet:P7,toCamelCase:C7,noop:A7,toFiniteNumber:k7,findKey:xD,global:wD,isContextDefined:bD,ALPHABET:CD,generateString:I7,isSpecCompliantForm:M7,toJSONObject:R7,isAsyncFn:D7,isThenable:z7};function nn(e,t,n,s,u){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),s&&(this.request=s),u&&(this.response=u)}Be.inherits(nn,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Be.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const TD=nn.prototype,ED={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{ED[e]={value:e}});Object.defineProperties(nn,ED);Object.defineProperty(TD,"isAxiosError",{value:!0});nn.from=(e,t,n,s,u,h)=>{const f=Object.create(TD);return Be.toFlatObject(e,f,function(w){return w!==Error.prototype},a=>a!=="isAxiosError"),nn.call(f,e.message,t,n,s,u),f.cause=e,f.name=e.name,h&&Object.assign(f,h),f};const L7=null;function Q0(e){return Be.isPlainObject(e)||Be.isArray(e)}function PD(e){return Be.endsWith(e,"[]")?e.slice(0,-2):e}function NE(e,t,n){return e?e.concat(t).map(function(u,h){return u=PD(u),!n&&h?"["+u+"]":u}).join(n?".":""):t}function O7(e){return Be.isArray(e)&&!e.some(Q0)}const F7=Be.toFlatObject(Be,{},null,function(t){return/^is[A-Z]/.test(t)});function Jy(e,t,n){if(!Be.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=Be.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(j,K){return!Be.isUndefined(K[j])});const s=n.metaTokens,u=n.visitor||P,h=n.dots,f=n.indexes,w=(n.Blob||typeof Blob<"u"&&Blob)&&Be.isSpecCompliantForm(t);if(!Be.isFunction(u))throw new TypeError("visitor must be a function");function b(V){if(V===null)return"";if(Be.isDate(V))return V.toISOString();if(!w&&Be.isBlob(V))throw new nn("Blob is not supported. Use a Buffer instead.");return Be.isArrayBuffer(V)||Be.isTypedArray(V)?w&&typeof Blob=="function"?new Blob([V]):Buffer.from(V):V}function P(V,j,K){let F=V;if(V&&!K&&typeof V=="object"){if(Be.endsWith(j,"{}"))j=s?j:j.slice(0,-2),V=JSON.stringify(V);else if(Be.isArray(V)&&O7(V)||(Be.isFileList(V)||Be.endsWith(j,"[]"))&&(F=Be.toArray(V)))return j=PD(j),F.forEach(function(W,ne){!(Be.isUndefined(W)||W===null)&&t.append(f===!0?NE([j],ne,h):f===null?j:j+"[]",b(W))}),!1}return Q0(V)?!0:(t.append(NE(K,j,h),b(V)),!1)}const A=[],M=Object.assign(F7,{defaultVisitor:P,convertValue:b,isVisitable:Q0});function B(V,j){if(!Be.isUndefined(V)){if(A.indexOf(V)!==-1)throw Error("Circular reference detected in "+j.join("."));A.push(V),Be.forEach(V,function(F,N){(!(Be.isUndefined(F)||F===null)&&u.call(t,F,Be.isString(N)?N.trim():N,j,M))===!0&&B(F,j?j.concat(N):[N])}),A.pop()}}if(!Be.isObject(e))throw new TypeError("data must be an object");return B(e),t}function BE(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(s){return t[s]})}function bb(e,t){this._pairs=[],e&&Jy(e,this,t)}const AD=bb.prototype;AD.append=function(t,n){this._pairs.push([t,n])};AD.toString=function(t){const n=t?function(s){return t.call(this,s,BE)}:BE;return this._pairs.map(function(u){return n(u[0])+"="+n(u[1])},"").join("&")};function N7(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function kD(e,t,n){if(!t)return e;const s=n&&n.encode||N7,u=n&&n.serialize;let h;if(u?h=u(t,n):h=Be.isURLSearchParams(t)?t.toString():new bb(t,n).toString(s),h){const f=e.indexOf("#");f!==-1&&(e=e.slice(0,f)),e+=(e.indexOf("?")===-1?"?":"&")+h}return e}class B7{constructor(){this.handlers=[]}use(t,n,s){return this.handlers.push({fulfilled:t,rejected:n,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Be.forEach(this.handlers,function(s){s!==null&&t(s)})}}const VE=B7,ID={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},V7=typeof URLSearchParams<"u"?URLSearchParams:bb,$7=typeof FormData<"u"?FormData:null,j7=typeof Blob<"u"?Blob:null,U7={isBrowser:!0,classes:{URLSearchParams:V7,FormData:$7,Blob:j7},protocols:["http","https","file","blob","url","data"]},MD=typeof window<"u"&&typeof document<"u",q7=(e=>MD&&["ReactNative","NativeScript","NS"].indexOf(e)<0)(typeof navigator<"u"&&navigator.product),G7=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),Z7=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:MD,hasStandardBrowserEnv:q7,hasStandardBrowserWebWorkerEnv:G7},Symbol.toStringTag,{value:"Module"})),vo={...Z7,...U7};function W7(e,t){return Jy(e,new vo.classes.URLSearchParams,Object.assign({visitor:function(n,s,u,h){return vo.isNode&&Be.isBuffer(n)?(this.append(s,n.toString("base64")),!1):h.defaultVisitor.apply(this,arguments)}},t))}function H7(e){return Be.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function K7(e){const t={},n=Object.keys(e);let s;const u=n.length;let h;for(s=0;s<u;s++)h=n[s],t[h]=e[h];return t}function RD(e){function t(n,s,u,h){let f=n[h++];if(f==="__proto__")return!0;const a=Number.isFinite(+f),w=h>=n.length;return f=!f&&Be.isArray(u)?u.length:f,w?(Be.hasOwnProp(u,f)?u[f]=[u[f],s]:u[f]=s,!a):((!u[f]||!Be.isObject(u[f]))&&(u[f]=[]),t(n,s,u[f],h)&&Be.isArray(u[f])&&(u[f]=K7(u[f])),!a)}if(Be.isFormData(e)&&Be.isFunction(e.entries)){const n={};return Be.forEachEntry(e,(s,u)=>{t(H7(s),u,n,0)}),n}return null}function X7(e,t,n){if(Be.isString(e))try{return(t||JSON.parse)(e),Be.trim(e)}catch(s){if(s.name!=="SyntaxError")throw s}return(n||JSON.stringify)(e)}const Sb={transitional:ID,adapter:["xhr","http"],transformRequest:[function(t,n){const s=n.getContentType()||"",u=s.indexOf("application/json")>-1,h=Be.isObject(t);if(h&&Be.isHTMLForm(t)&&(t=new FormData(t)),Be.isFormData(t))return u?JSON.stringify(RD(t)):t;if(Be.isArrayBuffer(t)||Be.isBuffer(t)||Be.isStream(t)||Be.isFile(t)||Be.isBlob(t))return t;if(Be.isArrayBufferView(t))return t.buffer;if(Be.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let a;if(h){if(s.indexOf("application/x-www-form-urlencoded")>-1)return W7(t,this.formSerializer).toString();if((a=Be.isFileList(t))||s.indexOf("multipart/form-data")>-1){const w=this.env&&this.env.FormData;return Jy(a?{"files[]":t}:t,w&&new w,this.formSerializer)}}return h||u?(n.setContentType("application/json",!1),X7(t)):t}],transformResponse:[function(t){const n=this.transitional||Sb.transitional,s=n&&n.forcedJSONParsing,u=this.responseType==="json";if(t&&Be.isString(t)&&(s&&!this.responseType||u)){const f=!(n&&n.silentJSONParsing)&&u;try{return JSON.parse(t)}catch(a){if(f)throw a.name==="SyntaxError"?nn.from(a,nn.ERR_BAD_RESPONSE,this,null,this.response):a}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:vo.classes.FormData,Blob:vo.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Be.forEach(["delete","get","head","post","put","patch"],e=>{Sb.headers[e]={}});const Cb=Sb,Q7=Be.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Y7=e=>{const t={};let n,s,u;return e&&e.split(`
`).forEach(function(f){u=f.indexOf(":"),n=f.substring(0,u).trim().toLowerCase(),s=f.substring(u+1).trim(),!(!n||t[n]&&Q7[n])&&(n==="set-cookie"?t[n]?t[n].push(s):t[n]=[s]:t[n]=t[n]?t[n]+", "+s:s)}),t},$E=Symbol("internals");function Pd(e){return e&&String(e).trim().toLowerCase()}function Hm(e){return e===!1||e==null?e:Be.isArray(e)?e.map(Hm):String(e)}function J7(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=n.exec(e);)t[s[1]]=s[2];return t}const eG=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function lx(e,t,n,s,u){if(Be.isFunction(s))return s.call(this,t,n);if(u&&(t=n),!!Be.isString(t)){if(Be.isString(s))return t.indexOf(s)!==-1;if(Be.isRegExp(s))return s.test(t)}}function tG(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,s)=>n.toUpperCase()+s)}function nG(e,t){const n=Be.toCamelCase(" "+t);["get","set","has"].forEach(s=>{Object.defineProperty(e,s+n,{value:function(u,h,f){return this[s].call(this,t,u,h,f)},configurable:!0})})}class ev{constructor(t){t&&this.set(t)}set(t,n,s){const u=this;function h(a,w,b){const P=Pd(w);if(!P)throw new Error("header name must be a non-empty string");const A=Be.findKey(u,P);(!A||u[A]===void 0||b===!0||b===void 0&&u[A]!==!1)&&(u[A||w]=Hm(a))}const f=(a,w)=>Be.forEach(a,(b,P)=>h(b,P,w));return Be.isPlainObject(t)||t instanceof this.constructor?f(t,n):Be.isString(t)&&(t=t.trim())&&!eG(t)?f(Y7(t),n):t!=null&&h(n,t,s),this}get(t,n){if(t=Pd(t),t){const s=Be.findKey(this,t);if(s){const u=this[s];if(!n)return u;if(n===!0)return J7(u);if(Be.isFunction(n))return n.call(this,u,s);if(Be.isRegExp(n))return n.exec(u);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=Pd(t),t){const s=Be.findKey(this,t);return!!(s&&this[s]!==void 0&&(!n||lx(this,this[s],s,n)))}return!1}delete(t,n){const s=this;let u=!1;function h(f){if(f=Pd(f),f){const a=Be.findKey(s,f);a&&(!n||lx(s,s[a],a,n))&&(delete s[a],u=!0)}}return Be.isArray(t)?t.forEach(h):h(t),u}clear(t){const n=Object.keys(this);let s=n.length,u=!1;for(;s--;){const h=n[s];(!t||lx(this,this[h],h,t,!0))&&(delete this[h],u=!0)}return u}normalize(t){const n=this,s={};return Be.forEach(this,(u,h)=>{const f=Be.findKey(s,h);if(f){n[f]=Hm(u),delete n[h];return}const a=t?tG(h):String(h).trim();a!==h&&delete n[h],n[a]=Hm(u),s[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return Be.forEach(this,(s,u)=>{s!=null&&s!==!1&&(n[u]=t&&Be.isArray(s)?s.join(", "):s)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const s=new this(t);return n.forEach(u=>s.set(u)),s}static accessor(t){const s=(this[$E]=this[$E]={accessors:{}}).accessors,u=this.prototype;function h(f){const a=Pd(f);s[a]||(nG(u,f),s[a]=!0)}return Be.isArray(t)?t.forEach(h):h(t),this}}ev.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Be.reduceDescriptors(ev.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(s){this[n]=s}}});Be.freezeMethods(ev);const sa=ev;function ux(e,t){const n=this||Cb,s=t||n,u=sa.from(s.headers);let h=s.data;return Be.forEach(e,function(a){h=a.call(n,h,u.normalize(),t?t.status:void 0)}),u.normalize(),h}function DD(e){return!!(e&&e.__CANCEL__)}function $f(e,t,n){nn.call(this,e??"canceled",nn.ERR_CANCELED,t,n),this.name="CanceledError"}Be.inherits($f,nn,{__CANCEL__:!0});function rG(e,t,n){const s=n.config.validateStatus;!n.status||!s||s(n.status)?e(n):t(new nn("Request failed with status code "+n.status,[nn.ERR_BAD_REQUEST,nn.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const iG=vo.hasStandardBrowserEnv?{write(e,t,n,s,u,h){const f=[e+"="+encodeURIComponent(t)];Be.isNumber(n)&&f.push("expires="+new Date(n).toGMTString()),Be.isString(s)&&f.push("path="+s),Be.isString(u)&&f.push("domain="+u),h===!0&&f.push("secure"),document.cookie=f.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function sG(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function oG(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function zD(e,t){return e&&!sG(t)?oG(e,t):t}const aG=vo.hasStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let s;function u(h){let f=h;return t&&(n.setAttribute("href",f),f=n.href),n.setAttribute("href",f),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return s=u(window.location.href),function(f){const a=Be.isString(f)?u(f):f;return a.protocol===s.protocol&&a.host===s.host}}():function(){return function(){return!0}}();function lG(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function uG(e,t){e=e||10;const n=new Array(e),s=new Array(e);let u=0,h=0,f;return t=t!==void 0?t:1e3,function(w){const b=Date.now(),P=s[h];f||(f=b),n[u]=w,s[u]=b;let A=h,M=0;for(;A!==u;)M+=n[A++],A=A%e;if(u=(u+1)%e,u===h&&(h=(h+1)%e),b-f<t)return;const B=P&&b-P;return B?Math.round(M*1e3/B):void 0}}function jE(e,t){let n=0;const s=uG(50,250);return u=>{const h=u.loaded,f=u.lengthComputable?u.total:void 0,a=h-n,w=s(a),b=h<=f;n=h;const P={loaded:h,total:f,progress:f?h/f:void 0,bytes:a,rate:w||void 0,estimated:w&&f&&b?(f-h)/w:void 0,event:u};P[t?"download":"upload"]=!0,e(P)}}const cG=typeof XMLHttpRequest<"u",hG=cG&&function(e){return new Promise(function(n,s){let u=e.data;const h=sa.from(e.headers).normalize();let{responseType:f,withXSRFToken:a}=e,w;function b(){e.cancelToken&&e.cancelToken.unsubscribe(w),e.signal&&e.signal.removeEventListener("abort",w)}let P;if(Be.isFormData(u)){if(vo.hasStandardBrowserEnv||vo.hasStandardBrowserWebWorkerEnv)h.setContentType(!1);else if((P=h.getContentType())!==!1){const[j,...K]=P?P.split(";").map(F=>F.trim()).filter(Boolean):[];h.setContentType([j||"multipart/form-data",...K].join("; "))}}let A=new XMLHttpRequest;if(e.auth){const j=e.auth.username||"",K=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";h.set("Authorization","Basic "+btoa(j+":"+K))}const M=zD(e.baseURL,e.url);A.open(e.method.toUpperCase(),kD(M,e.params,e.paramsSerializer),!0),A.timeout=e.timeout;function B(){if(!A)return;const j=sa.from("getAllResponseHeaders"in A&&A.getAllResponseHeaders()),F={data:!f||f==="text"||f==="json"?A.responseText:A.response,status:A.status,statusText:A.statusText,headers:j,config:e,request:A};rG(function(W){n(W),b()},function(W){s(W),b()},F),A=null}if("onloadend"in A?A.onloadend=B:A.onreadystatechange=function(){!A||A.readyState!==4||A.status===0&&!(A.responseURL&&A.responseURL.indexOf("file:")===0)||setTimeout(B)},A.onabort=function(){A&&(s(new nn("Request aborted",nn.ECONNABORTED,e,A)),A=null)},A.onerror=function(){s(new nn("Network Error",nn.ERR_NETWORK,e,A)),A=null},A.ontimeout=function(){let K=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const F=e.transitional||ID;e.timeoutErrorMessage&&(K=e.timeoutErrorMessage),s(new nn(K,F.clarifyTimeoutError?nn.ETIMEDOUT:nn.ECONNABORTED,e,A)),A=null},vo.hasStandardBrowserEnv&&(a&&Be.isFunction(a)&&(a=a(e)),a||a!==!1&&aG(M))){const j=e.xsrfHeaderName&&e.xsrfCookieName&&iG.read(e.xsrfCookieName);j&&h.set(e.xsrfHeaderName,j)}u===void 0&&h.setContentType(null),"setRequestHeader"in A&&Be.forEach(h.toJSON(),function(K,F){A.setRequestHeader(F,K)}),Be.isUndefined(e.withCredentials)||(A.withCredentials=!!e.withCredentials),f&&f!=="json"&&(A.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&A.addEventListener("progress",jE(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&A.upload&&A.upload.addEventListener("progress",jE(e.onUploadProgress)),(e.cancelToken||e.signal)&&(w=j=>{A&&(s(!j||j.type?new $f(null,e,A):j),A.abort(),A=null)},e.cancelToken&&e.cancelToken.subscribe(w),e.signal&&(e.signal.aborted?w():e.signal.addEventListener("abort",w)));const V=lG(M);if(V&&vo.protocols.indexOf(V)===-1){s(new nn("Unsupported protocol "+V+":",nn.ERR_BAD_REQUEST,e));return}A.send(u||null)})},Y0={http:L7,xhr:hG};Be.forEach(Y0,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const UE=e=>`- ${e}`,dG=e=>Be.isFunction(e)||e===null||e===!1,LD={getAdapter:e=>{e=Be.isArray(e)?e:[e];const{length:t}=e;let n,s;const u={};for(let h=0;h<t;h++){n=e[h];let f;if(s=n,!dG(n)&&(s=Y0[(f=String(n)).toLowerCase()],s===void 0))throw new nn(`Unknown adapter '${f}'`);if(s)break;u[f||"#"+h]=s}if(!s){const h=Object.entries(u).map(([a,w])=>`adapter ${a} `+(w===!1?"is not supported by the environment":"is not available in the build"));let f=t?h.length>1?`since :
`+h.map(UE).join(`
`):" "+UE(h[0]):"as no adapter specified";throw new nn("There is no suitable adapter to dispatch the request "+f,"ERR_NOT_SUPPORT")}return s},adapters:Y0};function cx(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new $f(null,e)}function qE(e){return cx(e),e.headers=sa.from(e.headers),e.data=ux.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),LD.getAdapter(e.adapter||Cb.adapter)(e).then(function(s){return cx(e),s.data=ux.call(e,e.transformResponse,s),s.headers=sa.from(s.headers),s},function(s){return DD(s)||(cx(e),s&&s.response&&(s.response.data=ux.call(e,e.transformResponse,s.response),s.response.headers=sa.from(s.response.headers))),Promise.reject(s)})}const GE=e=>e instanceof sa?{...e}:e;function Jc(e,t){t=t||{};const n={};function s(b,P,A){return Be.isPlainObject(b)&&Be.isPlainObject(P)?Be.merge.call({caseless:A},b,P):Be.isPlainObject(P)?Be.merge({},P):Be.isArray(P)?P.slice():P}function u(b,P,A){if(Be.isUndefined(P)){if(!Be.isUndefined(b))return s(void 0,b,A)}else return s(b,P,A)}function h(b,P){if(!Be.isUndefined(P))return s(void 0,P)}function f(b,P){if(Be.isUndefined(P)){if(!Be.isUndefined(b))return s(void 0,b)}else return s(void 0,P)}function a(b,P,A){if(A in t)return s(b,P);if(A in e)return s(void 0,b)}const w={url:h,method:h,data:h,baseURL:f,transformRequest:f,transformResponse:f,paramsSerializer:f,timeout:f,timeoutMessage:f,withCredentials:f,withXSRFToken:f,adapter:f,responseType:f,xsrfCookieName:f,xsrfHeaderName:f,onUploadProgress:f,onDownloadProgress:f,decompress:f,maxContentLength:f,maxBodyLength:f,beforeRedirect:f,transport:f,httpAgent:f,httpsAgent:f,cancelToken:f,socketPath:f,responseEncoding:f,validateStatus:a,headers:(b,P)=>u(GE(b),GE(P),!0)};return Be.forEach(Object.keys(Object.assign({},e,t)),function(P){const A=w[P]||u,M=A(e[P],t[P],P);Be.isUndefined(M)&&A!==a||(n[P]=M)}),n}const OD="1.6.8",Tb={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Tb[e]=function(s){return typeof s===e||"a"+(t<1?"n ":" ")+e}});const ZE={};Tb.transitional=function(t,n,s){function u(h,f){return"[Axios v"+OD+"] Transitional option '"+h+"'"+f+(s?". "+s:"")}return(h,f,a)=>{if(t===!1)throw new nn(u(f," has been removed"+(n?" in "+n:"")),nn.ERR_DEPRECATED);return n&&!ZE[f]&&(ZE[f]=!0,console.warn(u(f," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(h,f,a):!0}};function fG(e,t,n){if(typeof e!="object")throw new nn("options must be an object",nn.ERR_BAD_OPTION_VALUE);const s=Object.keys(e);let u=s.length;for(;u-- >0;){const h=s[u],f=t[h];if(f){const a=e[h],w=a===void 0||f(a,h,e);if(w!==!0)throw new nn("option "+h+" must be "+w,nn.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new nn("Unknown option "+h,nn.ERR_BAD_OPTION)}}const J0={assertOptions:fG,validators:Tb},Na=J0.validators;class jg{constructor(t){this.defaults=t,this.interceptors={request:new VE,response:new VE}}async request(t,n){try{return await this._request(t,n)}catch(s){if(s instanceof Error){let u;Error.captureStackTrace?Error.captureStackTrace(u={}):u=new Error;const h=u.stack?u.stack.replace(/^.+\n/,""):"";s.stack?h&&!String(s.stack).endsWith(h.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+h):s.stack=h}throw s}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=Jc(this.defaults,n);const{transitional:s,paramsSerializer:u,headers:h}=n;s!==void 0&&J0.assertOptions(s,{silentJSONParsing:Na.transitional(Na.boolean),forcedJSONParsing:Na.transitional(Na.boolean),clarifyTimeoutError:Na.transitional(Na.boolean)},!1),u!=null&&(Be.isFunction(u)?n.paramsSerializer={serialize:u}:J0.assertOptions(u,{encode:Na.function,serialize:Na.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let f=h&&Be.merge(h.common,h[n.method]);h&&Be.forEach(["delete","get","head","post","put","patch","common"],V=>{delete h[V]}),n.headers=sa.concat(f,h);const a=[];let w=!0;this.interceptors.request.forEach(function(j){typeof j.runWhen=="function"&&j.runWhen(n)===!1||(w=w&&j.synchronous,a.unshift(j.fulfilled,j.rejected))});const b=[];this.interceptors.response.forEach(function(j){b.push(j.fulfilled,j.rejected)});let P,A=0,M;if(!w){const V=[qE.bind(this),void 0];for(V.unshift.apply(V,a),V.push.apply(V,b),M=V.length,P=Promise.resolve(n);A<M;)P=P.then(V[A++],V[A++]);return P}M=a.length;let B=n;for(A=0;A<M;){const V=a[A++],j=a[A++];try{B=V(B)}catch(K){j.call(this,K);break}}try{P=qE.call(this,B)}catch(V){return Promise.reject(V)}for(A=0,M=b.length;A<M;)P=P.then(b[A++],b[A++]);return P}getUri(t){t=Jc(this.defaults,t);const n=zD(t.baseURL,t.url);return kD(n,t.params,t.paramsSerializer)}}Be.forEach(["delete","get","head","options"],function(t){jg.prototype[t]=function(n,s){return this.request(Jc(s||{},{method:t,url:n,data:(s||{}).data}))}});Be.forEach(["post","put","patch"],function(t){function n(s){return function(h,f,a){return this.request(Jc(a||{},{method:t,headers:s?{"Content-Type":"multipart/form-data"}:{},url:h,data:f}))}}jg.prototype[t]=n(),jg.prototype[t+"Form"]=n(!0)});const Km=jg;class Eb{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(h){n=h});const s=this;this.promise.then(u=>{if(!s._listeners)return;let h=s._listeners.length;for(;h-- >0;)s._listeners[h](u);s._listeners=null}),this.promise.then=u=>{let h;const f=new Promise(a=>{s.subscribe(a),h=a}).then(u);return f.cancel=function(){s.unsubscribe(h)},f},t(function(h,f,a){s.reason||(s.reason=new $f(h,f,a),n(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}static source(){let t;return{token:new Eb(function(u){t=u}),cancel:t}}}const pG=Eb;function mG(e){return function(n){return e.apply(null,n)}}function gG(e){return Be.isObject(e)&&e.isAxiosError===!0}const ew={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(ew).forEach(([e,t])=>{ew[t]=e});const yG=ew;function FD(e){const t=new Km(e),n=yD(Km.prototype.request,t);return Be.extend(n,Km.prototype,t,{allOwnKeys:!0}),Be.extend(n,t,null,{allOwnKeys:!0}),n.create=function(u){return FD(Jc(e,u))},n}const fr=FD(Cb);fr.Axios=Km;fr.CanceledError=$f;fr.CancelToken=pG;fr.isCancel=DD;fr.VERSION=OD;fr.toFormData=Jy;fr.AxiosError=nn;fr.Cancel=fr.CanceledError;fr.all=function(t){return Promise.all(t)};fr.spread=mG;fr.isAxiosError=gG;fr.mergeConfig=Jc;fr.AxiosHeaders=sa;fr.formToJSON=e=>RD(Be.isHTMLForm(e)?new FormData(e):e);fr.getAdapter=LD.getAdapter;fr.HttpStatusCode=yG;fr.default=fr;const ND=fr,{BASE_URL:BD}={BASE_URL:"https://sujanadh.pythonanywhere.com/"},vG=ND.create({baseURL:BD,timeout:5*60*1e3,headers:{accept:"application/json","Content-Type":"application/json"}});ND.create({baseURL:BD,timeout:5*60*1e3,headers:{accept:"application/json","Content-Type":"multipart/form-data"}});const _G=e=>vG.get("api/mcq/questions/",{params:e}),xG=e=>{switch(e){case"exam-section":return ae(LE,{});case"form-section":return ae(e7,{});default:return ae(LE,{})}};function wG(){const e=L1(),t=Sc(n=>n.common.activeExamTab);return Y4({queryKey:["key"],queryFn:()=>_G({set:1})}),ae("main",{className:"notes naxatw-h-screen-nav naxatw-w-full naxatw-bg-white",children:gt("div",{className:"naxatw-container naxatw-py-4 naxatw-h-full",children:[ae(Wq,{orientation:"row",clickable:!0,onTabChange:n=>{e(Kq({activeExamTab:n}))},tabOptions:Hq,activeTab:t}),xG(t)]})})}function hx({children:e,htmlFor:t,required:n}){return gt("label",{className:"naxatw-text-sm naxatw-text-grey-800",htmlFor:t==null?void 0:t.toString(),children:[e,n&&ae("span",{className:"naxatw-text-red-500",children:"*"})]})}const Qa=X.forwardRef(({className:e,placeholder:t,type:n,...s},u)=>ae("input",{type:n,placeholder:t||"Search",className:wl("naxatw-flex naxatw-rounded-[4px] naxatw-border naxatw-border-[#555555] naxatw-bg-transparent naxatw-p-2 naxatw-text-body-md file:naxatw-font-medium hover:naxatw-border-red focus:naxatw-border-red focus:naxatw-bg-transparent focus:naxatw-outline-none disabled:naxatw-cursor-not-allowed",e),ref:u,...s}));Qa.displayName="Input";function WE({children:e,className:t}){return ae(ou,{className:t,children:e})}function bG(){return gt("div",{className:"contact-form animation-area",children:[ae("div",{className:"title naxatw-mb-12 md:naxatw-mb-16",children:gt("p",{className:"naxatw-text-[2.75rem] naxatw-leading-[3.75rem] naxatw-tracking-[-0.04125rem] naxatw-text-[#07090D]",children:["Get in Touch with Us"," "]})}),gt("form",{action:"",children:[gt("div",{className:"naxatw-grid naxatw-grid-cols-2 naxatw-gap-x-7 naxatw-gap-y-4",children:[gt("div",{className:"form-control naxatw-flex naxatw-w-full naxatw-flex-col naxatw-gap-2",children:[ae("p",{className:"naxatw-text-[0.875rem] naxatw-leading-4 naxatw-text-[#343434]",children:"Name"}),ae(Qa,{type:"text",name:"name",className:"naxatw-w-full !naxatw-rounded-lg naxatw-border !naxatw-border-b naxatw-border-solid !naxatw-border-[#969696] !naxatw-text-[0.875rem] naxatw-leading-5 !naxatw-text-[#343434] hover:!naxatw-border-[#969696] focus:!naxatw-border-[#343434]",placeholder:"Name"})]}),gt("div",{className:"form-control naxatw-flex naxatw-w-full naxatw-flex-col naxatw-gap-2",children:[ae("p",{className:"naxatw-text-[0.875rem] naxatw-leading-4 naxatw-text-[#343434]",children:"Email"}),ae(Qa,{type:"text",className:" naxatw-w-full !naxatw-rounded-lg naxatw-border !naxatw-border-b naxatw-border-solid !naxatw-border-[#969696]  !naxatw-text-[0.875rem] naxatw-leading-5 !naxatw-text-[#343434] hover:!naxatw-border-[#969696] focus:!naxatw-border-[#343434]",placeholder:"Email"})]}),gt("div",{className:"form-control naxatw-flex naxatw-w-full naxatw-flex-col naxatw-gap-2",children:[ae("p",{className:"naxatw-text-[0.875rem] naxatw-leading-4 naxatw-text-[#343434]",children:"Phone"}),ae(Qa,{type:"text",className:"naxatw-w-full !naxatw-rounded-lg naxatw-border !naxatw-border-b naxatw-border-solid !naxatw-border-[#969696] !naxatw-text-[0.875rem] naxatw-leading-5 !naxatw-text-[#343434] hover:!naxatw-border-[#969696] focus:!naxatw-border-[#343434]",placeholder:"Phone"})]}),gt("div",{className:"form-control naxatw-flex naxatw-w-full naxatw-flex-col naxatw-gap-2",children:[ae("p",{className:"naxatw-text-[0.875rem] naxatw-leading-4 naxatw-text-[#343434]",children:"College/Organization"}),ae(Qa,{type:"text",className:"naxatw-w-full !naxatw-rounded-lg naxatw-border !naxatw-border-b naxatw-border-solid !naxatw-border-[#969696] !naxatw-text-[0.875rem] naxatw-leading-5 !naxatw-text-[#343434] hover:!naxatw-border-[#969696] focus:!naxatw-border-[#343434]",placeholder:"College/Organization"})]})]}),ae("div",{className:"naxatw-my-6",children:ae("textarea",{placeholder:"Describe to us how you would use GeoSewa",className:"naxatw-h-[7.75rem] naxatw-w-full  naxatw-resize-none naxatw-rounded-lg !naxatw-border !naxatw-border-solid !naxatw-border-[#969696] naxatw-p-3  naxatw-text-[#343434] focus:!naxatw-border-[#343434] focus:!naxatw-outline-none"})}),gt("button",{className:"btn hover:naxatw-bg-primary naxatw-relative naxatw-z-10 naxatw-flex naxatw-h-14 naxatw-items-center naxatw-justify-start naxatw-gap-4 naxatw-overflow-hidden naxatw-rounded-[2.4375rem] naxatw-bg-[#39CDF2] naxatw-px-5 naxatw-py-3 naxatw-no-underline naxatw-shadow-[0px_1px_2px_0px_rgba(16,24,40,0.05)] naxatw-w-[12.5rem]",type:"button",children:[ae("span",{className:"naxatw-text-base naxatw-font-semibold naxatw-leading-6 naxatw-tracking-[-0.011rem] naxatw-text-white",children:"Send message"}),ae(Ti,{name:"east",className:"naxatw-text-white"})]})]})]})}const{Children:HE,cloneElement:KE,forwardRef:SG}=ft,CG=SG(({children:e,map:t,isMapLoaded:n,...s},u)=>{const h=HE.count(e),f={map:t,isMapLoaded:n};return ae("div",{id:"maplibre-gl-map",...s,children:h<1?ae(Eo,{}):h>1?HE.map(e,a=>a?KE(a,{...f}):ae(Eo,{})):KE(e,{...f})})});var VD={exports:{}};(function(e,t){(function(n,s){e.exports=s()})(YL,function(){var n,s,u;function h(a,w){if(!n)n=w;else if(!s)s=w;else{var b="var sharedChunk = {}; ("+n+")(sharedChunk); ("+s+")(sharedChunk);",P={};n(P),u=w(P),typeof window<"u"&&(u.workerUrl=window.URL.createObjectURL(new Blob([b],{type:"text/javascript"})))}}h(["exports"],function(a){function w(o,r,l,d){return new(l||(l=Promise))(function(m,v){function x(I){try{E(d.next(I))}catch(D){v(D)}}function S(I){try{E(d.throw(I))}catch(D){v(D)}}function E(I){var D;I.done?m(I.value):(D=I.value,D instanceof l?D:new l(function(O){O(D)})).then(x,S)}E((d=d.apply(o,r||[])).next())})}function b(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}typeof SuppressedError=="function"&&SuppressedError;var P=A;function A(o,r){this.x=o,this.y=r}A.prototype={clone:function(){return new A(this.x,this.y)},add:function(o){return this.clone()._add(o)},sub:function(o){return this.clone()._sub(o)},multByPoint:function(o){return this.clone()._multByPoint(o)},divByPoint:function(o){return this.clone()._divByPoint(o)},mult:function(o){return this.clone()._mult(o)},div:function(o){return this.clone()._div(o)},rotate:function(o){return this.clone()._rotate(o)},rotateAround:function(o,r){return this.clone()._rotateAround(o,r)},matMult:function(o){return this.clone()._matMult(o)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(o){return this.x===o.x&&this.y===o.y},dist:function(o){return Math.sqrt(this.distSqr(o))},distSqr:function(o){var r=o.x-this.x,l=o.y-this.y;return r*r+l*l},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(o){return Math.atan2(this.y-o.y,this.x-o.x)},angleWith:function(o){return this.angleWithSep(o.x,o.y)},angleWithSep:function(o,r){return Math.atan2(this.x*r-this.y*o,this.x*o+this.y*r)},_matMult:function(o){var r=o[2]*this.x+o[3]*this.y;return this.x=o[0]*this.x+o[1]*this.y,this.y=r,this},_add:function(o){return this.x+=o.x,this.y+=o.y,this},_sub:function(o){return this.x-=o.x,this.y-=o.y,this},_mult:function(o){return this.x*=o,this.y*=o,this},_div:function(o){return this.x/=o,this.y/=o,this},_multByPoint:function(o){return this.x*=o.x,this.y*=o.y,this},_divByPoint:function(o){return this.x/=o.x,this.y/=o.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var o=this.y;return this.y=this.x,this.x=-o,this},_rotate:function(o){var r=Math.cos(o),l=Math.sin(o),d=l*this.x+r*this.y;return this.x=r*this.x-l*this.y,this.y=d,this},_rotateAround:function(o,r){var l=Math.cos(o),d=Math.sin(o),m=r.y+d*(this.x-r.x)+l*(this.y-r.y);return this.x=r.x+l*(this.x-r.x)-d*(this.y-r.y),this.y=m,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},A.convert=function(o){return o instanceof A?o:Array.isArray(o)?new A(o[0],o[1]):o};var M=b(P),B=V;function V(o,r,l,d){this.cx=3*o,this.bx=3*(l-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*r,this.by=3*(d-r)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=r,this.p2x=l,this.p2y=d}V.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,r){if(r===void 0&&(r=1e-6),o<0)return 0;if(o>1)return 1;for(var l=o,d=0;d<8;d++){var m=this.sampleCurveX(l)-o;if(Math.abs(m)<r)return l;var v=this.sampleCurveDerivativeX(l);if(Math.abs(v)<1e-6)break;l-=m/v}var x=0,S=1;for(l=o,d=0;d<20&&(m=this.sampleCurveX(l),!(Math.abs(m-o)<r));d++)o>m?x=l:S=l,l=.5*(S-x)+x;return l},solve:function(o,r){return this.sampleCurveY(this.solveCurveX(o,r))}};var j=b(B);let K,F;function N(){return K==null&&(K=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),K}function W(){if(F==null&&(F=!1,N())){const r=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(r){for(let d=0;d<5*5;d++){const m=4*d;r.fillStyle=`rgb(${m},${m+1},${m+2})`,r.fillRect(d%5,Math.floor(d/5),1,1)}const l=r.getImageData(0,0,5,5).data;for(let d=0;d<5*5*4;d++)if(d%4!=3&&l[d]!==d){F=!0;break}}}return F||!1}function ne(o,r,l,d){const m=new j(o,r,l,d);return function(v){return m.solve(v)}}const pe=ne(.25,.1,.25,1);function Ce(o,r,l){return Math.min(l,Math.max(r,o))}function Ie(o,r,l){const d=l-r,m=((o-r)%d+d)%d+r;return m===r?l:m}function Se(o,...r){for(const l of r)for(const d in l)o[d]=l[d];return o}let qe=1;function ze(o,r,l){const d={};for(const m in o)d[m]=r.call(l||this,o[m],m,o);return d}function Et(o,r,l){const d={};for(const m in o)r.call(l||this,o[m],m,o)&&(d[m]=o[m]);return d}function Ge(o){return Array.isArray(o)?o.map(Ge):typeof o=="object"&&o?ze(o,Ge):o}const yt={};function xt(o){yt[o]||(typeof console<"u"&&console.warn(o),yt[o]=!0)}function Ot(o,r,l){return(l.y-o.y)*(r.x-o.x)>(r.y-o.y)*(l.x-o.x)}function zt(o){let r=0;for(let l,d,m=0,v=o.length,x=v-1;m<v;x=m++)l=o[m],d=o[x],r+=(d.x-l.x)*(l.y+d.y);return r}function St(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}let je=null;function ct(o){return typeof ImageBitmap<"u"&&o instanceof ImageBitmap}const Pt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Ht(o,r,l,d,m){return w(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const v=new VideoFrame(o,{timestamp:0});try{const x=v==null?void 0:v.format;if(!x||!x.startsWith("BGR")&&!x.startsWith("RGB"))throw new Error(`Unrecognized format ${x}`);const S=x.startsWith("BGR"),E=new Uint8ClampedArray(d*m*4);if(yield v.copyTo(E,function(I,D,O,U,Z){const H=4*Math.max(-D,0),J=(Math.max(0,O)-O)*U*4+H,oe=4*U,he=Math.max(0,D),xe=Math.max(0,O);return{rect:{x:he,y:xe,width:Math.min(I.width,D+U)-he,height:Math.min(I.height,O+Z)-xe},layout:[{offset:J,stride:oe}]}}(o,r,l,d,m)),S)for(let I=0;I<E.length;I+=4){const D=E[I];E[I]=E[I+2],E[I+2]=D}return E}finally{v.close()}})}let Zt,Rt,vn,ui;const cr={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(o){const r=requestAnimationFrame(o);return{cancel:()=>cancelAnimationFrame(r)}},getImageData(o,r=0){return this.getImageCanvasContext(o).getImageData(-r,-r,o.width+2*r,o.height+2*r)},getImageCanvasContext(o){const r=window.document.createElement("canvas"),l=r.getContext("2d",{willReadFrequently:!0});if(!l)throw new Error("failed to create canvas 2d context");return r.width=o.width,r.height=o.height,l.drawImage(o,0,0,o.width,o.height),l},resolveURL:o=>(vn||(vn=document.createElement("a")),vn.href=o,vn.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(ui==null&&(ui=matchMedia("(prefers-reduced-motion: reduce)")),ui.matches)}},Gr={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};class Ai extends Error{constructor(r,l,d,m){super(`AJAXError: ${l} (${r}): ${d}`),this.status=r,this.statusText=l,this.url=d,this.body=m}}const Zr=St()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href,Wr=o=>Gr.REGISTERED_PROTOCOLS[o.substring(0,o.indexOf("://"))];function to(o,r){const l=new AbortController,d=new Request(o.url,{method:o.method||"GET",body:o.body,credentials:o.credentials,headers:o.headers,cache:o.cache,referrer:Zr(),signal:l.signal});let m=!1,v=!1;return o.type==="json"&&d.headers.set("Accept","application/json"),v||fetch(d).then(x=>x.ok?(S=>{(o.type==="arrayBuffer"||o.type==="image"?S.arrayBuffer():o.type==="json"?S.json():S.text()).then(E=>{v||(m=!0,r(null,E,S.headers.get("Cache-Control"),S.headers.get("Expires")))}).catch(E=>{v||r(new Error(E.message))})})(x):x.blob().then(S=>r(new Ai(x.status,x.statusText,o.url,S)))).catch(x=>{x.code!==20&&r(new Error(x.message))}),{cancel:()=>{v=!0,m||l.abort()}}}const as=function(o,r){if(/:\/\//.test(o.url)&&!/^https?:|^file:/.test(o.url)){if(St()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",o,r);if(!St())return(Wr(o.url)||to)(o,r)}if(!(/^file:/.test(l=o.url)||/^file:/.test(Zr())&&!/^\w+:/.test(l))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return to(o,r);if(St()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",o,r,void 0,!0)}var l;return function(d,m){const v=new XMLHttpRequest;v.open(d.method||"GET",d.url,!0),d.type!=="arrayBuffer"&&d.type!=="image"||(v.responseType="arraybuffer");for(const x in d.headers)v.setRequestHeader(x,d.headers[x]);return d.type==="json"&&(v.responseType="text",v.setRequestHeader("Accept","application/json")),v.withCredentials=d.credentials==="include",v.onerror=()=>{m(new Error(v.statusText))},v.onload=()=>{if((v.status>=200&&v.status<300||v.status===0)&&v.response!==null){let x=v.response;if(d.type==="json")try{x=JSON.parse(v.response)}catch(S){return m(S)}m(null,x,v.getResponseHeader("Cache-Control"),v.getResponseHeader("Expires"))}else{const x=new Blob([v.response],{type:v.getResponseHeader("Content-Type")});m(new Ai(v.status,v.statusText,d.url,x))}},v.send(d.body),{cancel:()=>v.abort()}}(o,r)},no=function(o,r){return as(Se(o,{type:"arrayBuffer"}),r)};function ki(o){if(!o||o.indexOf("://")<=0||o.indexOf("data:image/")===0||o.indexOf("blob:")===0)return!0;const r=new URL(o),l=window.location;return r.protocol===l.protocol&&r.host===l.host}function Ao(o,r,l){l[o]&&l[o].indexOf(r)!==-1||(l[o]=l[o]||[],l[o].push(r))}function ro(o,r,l){if(l&&l[o]){const d=l[o].indexOf(r);d!==-1&&l[o].splice(d,1)}}class Ms{constructor(r,l={}){Se(this,l),this.type=r}}class ge extends Ms{constructor(r,l={}){super("error",Se({error:r},l))}}class ke{on(r,l){return this._listeners=this._listeners||{},Ao(r,l,this._listeners),this}off(r,l){return ro(r,l,this._listeners),ro(r,l,this._oneTimeListeners),this}once(r,l){return l?(this._oneTimeListeners=this._oneTimeListeners||{},Ao(r,l,this._oneTimeListeners),this):new Promise(d=>this.once(r,d))}fire(r,l){typeof r=="string"&&(r=new Ms(r,l||{}));const d=r.type;if(this.listens(d)){r.target=this;const m=this._listeners&&this._listeners[d]?this._listeners[d].slice():[];for(const S of m)S.call(this,r);const v=this._oneTimeListeners&&this._oneTimeListeners[d]?this._oneTimeListeners[d].slice():[];for(const S of v)ro(d,S,this._oneTimeListeners),S.call(this,r);const x=this._eventedParent;x&&(Se(r,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),x.fire(r))}else r instanceof ge&&console.error(r.error);return this}listens(r){return this._listeners&&this._listeners[r]&&this._listeners[r].length>0||this._oneTimeListeners&&this._oneTimeListeners[r]&&this._oneTimeListeners[r].length>0||this._eventedParent&&this._eventedParent.listens(r)}setEventedParent(r,l){return this._eventedParent=r,this._eventedParentData=l,this}}var ue={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const tt=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Ye(o,r){const l={};for(const d in o)d!=="ref"&&(l[d]=o[d]);return tt.forEach(d=>{d in r&&(l[d]=r[d])}),l}function Ne(o,r){if(Array.isArray(o)){if(!Array.isArray(r)||o.length!==r.length)return!1;for(let l=0;l<o.length;l++)if(!Ne(o[l],r[l]))return!1;return!0}if(typeof o=="object"&&o!==null&&r!==null){if(typeof r!="object"||Object.keys(o).length!==Object.keys(r).length)return!1;for(const l in o)if(!Ne(o[l],r[l]))return!1;return!0}return o===r}const Xe={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Vt(o,r,l){l.push({command:Xe.addSource,args:[o,r[o]]})}function _n(o,r,l){r.push({command:Xe.removeSource,args:[o]}),l[o]=!0}function An(o,r,l,d){_n(o,l,d),Vt(o,r,l)}function qi(o,r,l){let d;for(d in o[l])if(Object.prototype.hasOwnProperty.call(o[l],d)&&d!=="data"&&!Ne(o[l][d],r[l][d]))return!1;for(d in r[l])if(Object.prototype.hasOwnProperty.call(r[l],d)&&d!=="data"&&!Ne(o[l][d],r[l][d]))return!1;return!0}function io(o,r,l,d,m,v){let x;for(x in r=r||{},o=o||{})Object.prototype.hasOwnProperty.call(o,x)&&(Ne(o[x],r[x])||l.push({command:v,args:[d,x,r[x],m]}));for(x in r)Object.prototype.hasOwnProperty.call(r,x)&&!Object.prototype.hasOwnProperty.call(o,x)&&(Ne(o[x],r[x])||l.push({command:v,args:[d,x,r[x],m]}))}function Ii(o){return o.id}function Gi(o,r){return o[r.id]=r,o}class Ze{constructor(r,l,d,m){this.message=(r?`${r}: `:"")+d,m&&(this.identifier=m),l!=null&&l.__line__&&(this.line=l.__line__)}}function ci(o,...r){for(const l of r)for(const d in l)o[d]=l[d];return o}class xn extends Error{constructor(r,l){super(l),this.message=l,this.key=r}}class ls{constructor(r,l=[]){this.parent=r,this.bindings={};for(const[d,m]of l)this.bindings[d]=m}concat(r){return new ls(this,r)}get(r){if(this.bindings[r])return this.bindings[r];if(this.parent)return this.parent.get(r);throw new Error(`${r} not found in scope.`)}has(r){return!!this.bindings[r]||!!this.parent&&this.parent.has(r)}}const Rs={kind:"null"},Qe={kind:"number"},Ft={kind:"string"},kt={kind:"boolean"},Rr={kind:"color"},us={kind:"object"},Dt={kind:"value"},Ds={kind:"collator"},re={kind:"formatted"},$={kind:"padding"},q={kind:"resolvedImage"},Q={kind:"variableAnchorOffsetCollection"};function se(o,r){return{kind:"array",itemType:o,N:r}}function le(o){if(o.kind==="array"){const r=le(o.itemType);return typeof o.N=="number"?`array<${r}, ${o.N}>`:o.itemType.kind==="value"?"array":`array<${r}>`}return o.kind}const we=[Rs,Qe,Ft,kt,Rr,re,us,se(Dt),$,q,Q];function me(o,r){if(r.kind==="error")return null;if(o.kind==="array"){if(r.kind==="array"&&(r.N===0&&r.itemType.kind==="value"||!me(o.itemType,r.itemType))&&(typeof o.N!="number"||o.N===r.N))return null}else{if(o.kind===r.kind)return null;if(o.kind==="value"){for(const l of we)if(!me(l,r))return null}}return`Expected ${le(o)} but found ${le(r)} instead.`}function de(o,r){return r.some(l=>l.kind===o.kind)}function _e(o,r){return r.some(l=>l==="null"?o===null:l==="array"?Array.isArray(o):l==="object"?o&&!Array.isArray(o)&&typeof o=="object":l===typeof o)}function Me(o,r){return o.kind==="array"&&r.kind==="array"?o.itemType.kind===r.itemType.kind&&typeof o.N=="number":o.kind===r.kind}const Re=.96422,Oe=.82521,vt=4/29,At=6/29,at=3*At*At,wt=At*At*At,It=Math.PI/180,tn=180/Math.PI;function an(o){return(o%=360)<0&&(o+=360),o}function Kt([o,r,l,d]){let m,v;const x=Sr((.2225045*(o=Wt(o))+.7168786*(r=Wt(r))+.0606169*(l=Wt(l)))/1);o===r&&r===l?m=v=x:(m=Sr((.4360747*o+.3850649*r+.1430804*l)/Re),v=Sr((.0139322*o+.0971045*r+.7141733*l)/Oe));const S=116*x-16;return[S<0?0:S,500*(m-x),200*(x-v),d]}function Wt(o){return o<=.04045?o/12.92:Math.pow((o+.055)/1.055,2.4)}function Sr(o){return o>wt?Math.pow(o,1/3):o/at+vt}function un([o,r,l,d]){let m=(o+16)/116,v=isNaN(r)?m:m+r/500,x=isNaN(l)?m:m-l/200;return m=1*pr(m),v=Re*pr(v),x=Oe*pr(x),[Kn(3.1338561*v-1.6168667*m-.4906146*x),Kn(-.9787684*v+1.9161415*m+.033454*x),Kn(.0719453*v-.2289914*m+1.4052427*x),d]}function Kn(o){return(o=o<=.00304?12.92*o:1.055*Math.pow(o,1/2.4)-.055)<0?0:o>1?1:o}function pr(o){return o>At?o*o*o:at*(o-vt)}function Mi(o){return parseInt(o.padEnd(2,o),16)/255}function qf(o,r){return ga(r?o/100:o,0,1)}function ga(o,r,l){return Math.min(Math.max(r,o),l)}function ya(o){return!o.some(Number.isNaN)}const tv={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class sn{constructor(r,l,d,m=1,v=!0){this.r=r,this.g=l,this.b=d,this.a=m,v||(this.r*=m,this.g*=m,this.b*=m,m||this.overwriteGetter("rgb",[r,l,d,m]))}static parse(r){if(r instanceof sn)return r;if(typeof r!="string")return;const l=function(d){if((d=d.toLowerCase().trim())==="transparent")return[0,0,0,0];const m=tv[d];if(m){const[x,S,E]=m;return[x/255,S/255,E/255,1]}if(d.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(d)){const x=d.length<6?1:2;let S=1;return[Mi(d.slice(S,S+=x)),Mi(d.slice(S,S+=x)),Mi(d.slice(S,S+=x)),Mi(d.slice(S,S+x)||"ff")]}if(d.startsWith("rgb")){const x=d.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(x){const[S,E,I,D,O,U,Z,H,J,oe,he,xe]=x,fe=[D||" ",Z||" ",oe].join("");if(fe==="  "||fe==="  /"||fe===",,"||fe===",,,"){const be=[I,U,J].join(""),Ee=be==="%%%"?100:be===""?255:0;if(Ee){const Le=[ga(+E/Ee,0,1),ga(+O/Ee,0,1),ga(+H/Ee,0,1),he?qf(+he,xe):1];if(ya(Le))return Le}}return}}const v=d.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(v){const[x,S,E,I,D,O,U,Z,H]=v,J=[E||" ",D||" ",U].join("");if(J==="  "||J==="  /"||J===",,"||J===",,,"){const oe=[+S,ga(+I,0,100),ga(+O,0,100),Z?qf(+Z,H):1];if(ya(oe))return function([he,xe,fe,be]){function Ee(Le){const it=(Le+he/30)%12,ut=xe*Math.min(fe,1-fe);return fe-ut*Math.max(-1,Math.min(it-3,9-it,1))}return he=an(he),xe/=100,fe/=100,[Ee(0),Ee(8),Ee(4),be]}(oe)}}}(r);return l?new sn(...l,!1):void 0}get rgb(){const{r,g:l,b:d,a:m}=this,v=m||1/0;return this.overwriteGetter("rgb",[r/v,l/v,d/v,m])}get hcl(){return this.overwriteGetter("hcl",function(r){const[l,d,m,v]=Kt(r),x=Math.sqrt(d*d+m*m);return[Math.round(1e4*x)?an(Math.atan2(m,d)*tn):NaN,x,l,v]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Kt(this.rgb))}overwriteGetter(r,l){return Object.defineProperty(this,r,{value:l}),l}toString(){const[r,l,d,m]=this.rgb;return`rgba(${[r,l,d].map(v=>Math.round(255*v)).join(",")},${m})`}}sn.black=new sn(0,0,0,1),sn.white=new sn(1,1,1,1),sn.transparent=new sn(0,0,0,0),sn.red=new sn(1,0,0,1);class ch{constructor(r,l,d){this.sensitivity=r?l?"variant":"case":l?"accent":"base",this.locale=d,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(r,l){return this.collator.compare(r,l)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class bu{constructor(r,l,d,m,v){this.text=r,this.image=l,this.scale=d,this.fontStack=m,this.textColor=v}}class Cr{constructor(r){this.sections=r}static fromString(r){return new Cr([new bu(r,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(r=>r.text.length!==0||r.image&&r.image.name.length!==0)}static factory(r){return r instanceof Cr?r:Cr.fromString(r)}toString(){return this.sections.length===0?"":this.sections.map(r=>r.text).join("")}}class hi{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof hi)return r;if(typeof r=="number")return new hi([r,r,r,r]);if(Array.isArray(r)&&!(r.length<1||r.length>4)){for(const l of r)if(typeof l!="number")return;switch(r.length){case 1:r=[r[0],r[0],r[0],r[0]];break;case 2:r=[r[0],r[1],r[0],r[1]];break;case 3:r=[r[0],r[1],r[2],r[1]]}return new hi(r)}}toString(){return JSON.stringify(this.values)}}const nv=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Ri{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof Ri)return r;if(Array.isArray(r)&&!(r.length<1)&&r.length%2==0){for(let l=0;l<r.length;l+=2){const d=r[l],m=r[l+1];if(typeof d!="string"||!nv.has(d)||!Array.isArray(m)||m.length!==2||typeof m[0]!="number"||typeof m[1]!="number")return}return new Ri(r)}}toString(){return JSON.stringify(this.values)}}class mr{constructor(r){this.name=r.name,this.available=r.available}toString(){return this.name}static fromString(r){return r?new mr({name:r,available:!1}):null}}function Su(o,r,l,d){return typeof o=="number"&&o>=0&&o<=255&&typeof r=="number"&&r>=0&&r<=255&&typeof l=="number"&&l>=0&&l<=255?d===void 0||typeof d=="number"&&d>=0&&d<=1?null:`Invalid rgba value [${[o,r,l,d].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof d=="number"?[o,r,l,d]:[o,r,l]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function va(o){if(o===null||typeof o=="string"||typeof o=="boolean"||typeof o=="number"||o instanceof sn||o instanceof ch||o instanceof Cr||o instanceof hi||o instanceof Ri||o instanceof mr)return!0;if(Array.isArray(o)){for(const r of o)if(!va(r))return!1;return!0}if(typeof o=="object"){for(const r in o)if(!va(o[r]))return!1;return!0}return!1}function Sn(o){if(o===null)return Rs;if(typeof o=="string")return Ft;if(typeof o=="boolean")return kt;if(typeof o=="number")return Qe;if(o instanceof sn)return Rr;if(o instanceof ch)return Ds;if(o instanceof Cr)return re;if(o instanceof hi)return $;if(o instanceof Ri)return Q;if(o instanceof mr)return q;if(Array.isArray(o)){const r=o.length;let l;for(const d of o){const m=Sn(d);if(l){if(l===m)continue;l=Dt;break}l=m}return se(l||Dt,r)}return us}function Yt(o){const r=typeof o;return o===null?"":r==="string"||r==="number"||r==="boolean"?String(o):o instanceof sn||o instanceof Cr||o instanceof hi||o instanceof Ri||o instanceof mr?o.toString():JSON.stringify(o)}class ko{constructor(r,l){this.type=r,this.value=l}static parse(r,l){if(r.length!==2)return l.error(`'literal' expression requires exactly one argument, but found ${r.length-1} instead.`);if(!va(r[1]))return l.error("invalid value");const d=r[1];let m=Sn(d);const v=l.expectedType;return m.kind!=="array"||m.N!==0||!v||v.kind!=="array"||typeof v.N=="number"&&v.N!==0||(m=v),new ko(m,d)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class kn{constructor(r){this.name="ExpressionEvaluationError",this.message=r}toJSON(){return this.message}}const Cu={string:Ft,number:Qe,boolean:kt,object:us};class Di{constructor(r,l){this.type=r,this.args=l}static parse(r,l){if(r.length<2)return l.error("Expected at least one argument.");let d,m=1;const v=r[0];if(v==="array"){let S,E;if(r.length>2){const I=r[1];if(typeof I!="string"||!(I in Cu)||I==="object")return l.error('The item type argument of "array" must be one of string, number, boolean',1);S=Cu[I],m++}else S=Dt;if(r.length>3){if(r[2]!==null&&(typeof r[2]!="number"||r[2]<0||r[2]!==Math.floor(r[2])))return l.error('The length argument to "array" must be a positive integer literal',2);E=r[2],m++}d=se(S,E)}else{if(!Cu[v])throw new Error(`Types doesn't contain name = ${v}`);d=Cu[v]}const x=[];for(;m<r.length;m++){const S=l.parse(r[m],m,Dt);if(!S)return null;x.push(S)}return new Di(d,x)}evaluate(r){for(let l=0;l<this.args.length;l++){const d=this.args[l].evaluate(r);if(!me(this.type,Sn(d)))return d;if(l===this.args.length-1)throw new kn(`Expected value to be of type ${le(this.type)}, but found ${le(Sn(d))} instead.`)}throw new Error}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}const hh={"to-boolean":kt,"to-color":Rr,"to-number":Qe,"to-string":Ft};class so{constructor(r,l){this.type=r,this.args=l}static parse(r,l){if(r.length<2)return l.error("Expected at least one argument.");const d=r[0];if(!hh[d])throw new Error(`Can't parse ${d} as it is not part of the known types`);if((d==="to-boolean"||d==="to-string")&&r.length!==2)return l.error("Expected one argument.");const m=hh[d],v=[];for(let x=1;x<r.length;x++){const S=l.parse(r[x],x,Dt);if(!S)return null;v.push(S)}return new so(m,v)}evaluate(r){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(r);case"color":{let l,d;for(const m of this.args){if(l=m.evaluate(r),d=null,l instanceof sn)return l;if(typeof l=="string"){const v=r.parseColor(l);if(v)return v}else if(Array.isArray(l)&&(d=l.length<3||l.length>4?`Invalid rbga value ${JSON.stringify(l)}: expected an array containing either three or four numeric values.`:Su(l[0],l[1],l[2],l[3]),!d))return new sn(l[0]/255,l[1]/255,l[2]/255,l[3])}throw new kn(d||`Could not parse color from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"padding":{let l;for(const d of this.args){l=d.evaluate(r);const m=hi.parse(l);if(m)return m}throw new kn(`Could not parse padding from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"variableAnchorOffsetCollection":{let l;for(const d of this.args){l=d.evaluate(r);const m=Ri.parse(l);if(m)return m}throw new kn(`Could not parse variableAnchorOffsetCollection from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"number":{let l=null;for(const d of this.args){if(l=d.evaluate(r),l===null)return 0;const m=Number(l);if(!isNaN(m))return m}throw new kn(`Could not convert ${JSON.stringify(l)} to number.`)}case"formatted":return Cr.fromString(Yt(this.args[0].evaluate(r)));case"resolvedImage":return mr.fromString(Yt(this.args[0].evaluate(r)));default:return Yt(this.args[0].evaluate(r))}}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}const Gf=["Unknown","Point","LineString","Polygon"];class dh{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Gf[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(r){let l=this._parseColorCache[r];return l||(l=this._parseColorCache[r]=sn.parse(r)),l}}class Tu{constructor(r,l,d=[],m,v=new ls,x=[]){this.registry=r,this.path=d,this.key=d.map(S=>`[${S}]`).join(""),this.scope=v,this.errors=x,this.expectedType=m,this._isConstant=l}parse(r,l,d,m,v={}){return l?this.concat(l,d,m)._parse(r,v):this._parse(r,v)}_parse(r,l){function d(m,v,x){return x==="assert"?new Di(v,[m]):x==="coerce"?new so(v,[m]):m}if(r!==null&&typeof r!="string"&&typeof r!="boolean"&&typeof r!="number"||(r=["literal",r]),Array.isArray(r)){if(r.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const m=r[0];if(typeof m!="string")return this.error(`Expression name must be a string, but found ${typeof m} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const v=this.registry[m];if(v){let x=v.parse(r,this);if(!x)return null;if(this.expectedType){const S=this.expectedType,E=x.type;if(S.kind!=="string"&&S.kind!=="number"&&S.kind!=="boolean"&&S.kind!=="object"&&S.kind!=="array"||E.kind!=="value")if(S.kind!=="color"&&S.kind!=="formatted"&&S.kind!=="resolvedImage"||E.kind!=="value"&&E.kind!=="string")if(S.kind!=="padding"||E.kind!=="value"&&E.kind!=="number"&&E.kind!=="array")if(S.kind!=="variableAnchorOffsetCollection"||E.kind!=="value"&&E.kind!=="array"){if(this.checkSubtype(S,E))return null}else x=d(x,S,l.typeAnnotation||"coerce");else x=d(x,S,l.typeAnnotation||"coerce");else x=d(x,S,l.typeAnnotation||"coerce");else x=d(x,S,l.typeAnnotation||"assert")}if(!(x instanceof ko)&&x.type.kind!=="resolvedImage"&&this._isConstant(x)){const S=new dh;try{x=new ko(x.type,x.evaluate(S))}catch(E){return this.error(E.message),null}}return x}return this.error(`Unknown expression "${m}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(r===void 0?"'undefined' value invalid. Use null instead.":typeof r=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof r} instead.`)}concat(r,l,d){const m=typeof r=="number"?this.path.concat(r):this.path,v=d?this.scope.concat(d):this.scope;return new Tu(this.registry,this._isConstant,m,l||null,v,this.errors)}error(r,...l){const d=`${this.key}${l.map(m=>`[${m}]`).join("")}`;this.errors.push(new xn(d,r))}checkSubtype(r,l){const d=me(r,l);return d&&this.error(d),d}}class Eu{constructor(r,l,d){this.type=Ds,this.locale=d,this.caseSensitive=r,this.diacriticSensitive=l}static parse(r,l){if(r.length!==2)return l.error("Expected one argument.");const d=r[1];if(typeof d!="object"||Array.isArray(d))return l.error("Collator options argument must be an object.");const m=l.parse(d["case-sensitive"]!==void 0&&d["case-sensitive"],1,kt);if(!m)return null;const v=l.parse(d["diacritic-sensitive"]!==void 0&&d["diacritic-sensitive"],1,kt);if(!v)return null;let x=null;return d.locale&&(x=l.parse(d.locale,1,Ft),!x)?null:new Eu(m,v,x)}evaluate(r){return new ch(this.caseSensitive.evaluate(r),this.diacriticSensitive.evaluate(r),this.locale?this.locale.evaluate(r):null)}eachChild(r){r(this.caseSensitive),r(this.diacriticSensitive),this.locale&&r(this.locale)}outputDefined(){return!1}}const oo=8192;function fh(o,r){o[0]=Math.min(o[0],r[0]),o[1]=Math.min(o[1],r[1]),o[2]=Math.max(o[2],r[0]),o[3]=Math.max(o[3],r[1])}function Cl(o,r){return!(o[0]<=r[0]||o[2]>=r[2]||o[1]<=r[1]||o[3]>=r[3])}function Zf(o,r){const l=(180+o[0])/360,d=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o[1]*Math.PI/360)))/360,m=Math.pow(2,r.z);return[Math.round(l*m*oo),Math.round(d*m*oo)]}function rv(o,r,l){const d=o[0]-r[0],m=o[1]-r[1],v=o[0]-l[0],x=o[1]-l[1];return d*x-v*m==0&&d*v<=0&&m*x<=0}function ph(o,r){let l=!1;for(let x=0,S=r.length;x<S;x++){const E=r[x];for(let I=0,D=E.length;I<D-1;I++){if(rv(o,E[I],E[I+1]))return!1;(m=E[I])[1]>(d=o)[1]!=(v=E[I+1])[1]>d[1]&&d[0]<(v[0]-m[0])*(d[1]-m[1])/(v[1]-m[1])+m[0]&&(l=!l)}}var d,m,v;return l}function mh(o,r){for(let l=0;l<r.length;l++)if(ph(o,r[l]))return!0;return!1}function Wf(o,r,l,d){const m=d[0]-l[0],v=d[1]-l[1],x=(o[0]-l[0])*v-m*(o[1]-l[1]),S=(r[0]-l[0])*v-m*(r[1]-l[1]);return x>0&&S<0||x<0&&S>0}function iv(o,r,l){for(const I of l)for(let D=0;D<I.length-1;++D)if((S=[(x=I[D+1])[0]-(v=I[D])[0],x[1]-v[1]])[0]*(E=[(m=r)[0]-(d=o)[0],m[1]-d[1]])[1]-S[1]*E[0]!=0&&Wf(d,m,v,x)&&Wf(v,x,d,m))return!0;var d,m,v,x,S,E;return!1}function Hf(o,r){for(let l=0;l<o.length;++l)if(!ph(o[l],r))return!1;for(let l=0;l<o.length-1;++l)if(iv(o[l],o[l+1],r))return!1;return!0}function Kf(o,r){for(let l=0;l<r.length;l++)if(Hf(o,r[l]))return!0;return!1}function Pu(o,r,l){const d=[];for(let m=0;m<o.length;m++){const v=[];for(let x=0;x<o[m].length;x++){const S=Zf(o[m][x],l);fh(r,S),v.push(S)}d.push(v)}return d}function Xf(o,r,l){const d=[];for(let m=0;m<o.length;m++){const v=Pu(o[m],r,l);d.push(v)}return d}function Qf(o,r,l,d){if(o[0]<l[0]||o[0]>l[2]){const m=.5*d;let v=o[0]-l[0]>m?-d:l[0]-o[0]>m?d:0;v===0&&(v=o[0]-l[2]>m?-d:l[2]-o[0]>m?d:0),o[0]+=v}fh(r,o)}function gh(o,r,l,d){const m=Math.pow(2,d.z)*oo,v=[d.x*oo,d.y*oo],x=[];for(const S of o)for(const E of S){const I=[E.x+v[0],E.y+v[1]];Qf(I,r,l,m),x.push(I)}return x}function yh(o,r,l,d){const m=Math.pow(2,d.z)*oo,v=[d.x*oo,d.y*oo],x=[];for(const E of o){const I=[];for(const D of E){const O=[D.x+v[0],D.y+v[1]];fh(r,O),I.push(O)}x.push(I)}if(r[2]-r[0]<=m/2){(S=r)[0]=S[1]=1/0,S[2]=S[3]=-1/0;for(const E of x)for(const I of E)Qf(I,r,l,m)}var S;return x}class Io{constructor(r,l){this.type=kt,this.geojson=r,this.geometries=l}static parse(r,l){if(r.length!==2)return l.error(`'within' expression requires exactly one argument, but found ${r.length-1} instead.`);if(va(r[1])){const d=r[1];if(d.type==="FeatureCollection")for(let m=0;m<d.features.length;++m){const v=d.features[m].geometry.type;if(v==="Polygon"||v==="MultiPolygon")return new Io(d,d.features[m].geometry)}else if(d.type==="Feature"){const m=d.geometry.type;if(m==="Polygon"||m==="MultiPolygon")return new Io(d,d.geometry)}else if(d.type==="Polygon"||d.type==="MultiPolygon")return new Io(d,d)}return l.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(r){if(r.geometry()!=null&&r.canonicalID()!=null){if(r.geometryType()==="Point")return function(l,d){const m=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],x=l.canonicalID();if(d.type==="Polygon"){const S=Pu(d.coordinates,v,x),E=gh(l.geometry(),m,v,x);if(!Cl(m,v))return!1;for(const I of E)if(!ph(I,S))return!1}if(d.type==="MultiPolygon"){const S=Xf(d.coordinates,v,x),E=gh(l.geometry(),m,v,x);if(!Cl(m,v))return!1;for(const I of E)if(!mh(I,S))return!1}return!0}(r,this.geometries);if(r.geometryType()==="LineString")return function(l,d){const m=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],x=l.canonicalID();if(d.type==="Polygon"){const S=Pu(d.coordinates,v,x),E=yh(l.geometry(),m,v,x);if(!Cl(m,v))return!1;for(const I of E)if(!Hf(I,S))return!1}if(d.type==="MultiPolygon"){const S=Xf(d.coordinates,v,x),E=yh(l.geometry(),m,v,x);if(!Cl(m,v))return!1;for(const I of E)if(!Kf(I,S))return!1}return!0}(r,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class Au{constructor(r,l){this.type=l.type,this.name=r,this.boundExpression=l}static parse(r,l){if(r.length!==2||typeof r[1]!="string")return l.error("'var' expression requires exactly one string literal argument.");const d=r[1];return l.scope.has(d)?new Au(d,l.scope.get(d)):l.error(`Unknown variable "${d}". Make sure "${d}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(r){return this.boundExpression.evaluate(r)}eachChild(){}outputDefined(){return!1}}class zi{constructor(r,l,d,m){this.name=r,this.type=l,this._evaluate=d,this.args=m}evaluate(r){return this._evaluate(r,this.args)}eachChild(r){this.args.forEach(r)}outputDefined(){return!1}static parse(r,l){const d=r[0],m=zi.definitions[d];if(!m)return l.error(`Unknown expression "${d}". If you wanted a literal array, use ["literal", [...]].`,0);const v=Array.isArray(m)?m[0]:m.type,x=Array.isArray(m)?[[m[1],m[2]]]:m.overloads,S=x.filter(([I])=>!Array.isArray(I)||I.length===r.length-1);let E=null;for(const[I,D]of S){E=new Tu(l.registry,ku,l.path,null,l.scope);const O=[];let U=!1;for(let Z=1;Z<r.length;Z++){const H=r[Z],J=Array.isArray(I)?I[Z-1]:I.type,oe=E.parse(H,1+O.length,J);if(!oe){U=!0;break}O.push(oe)}if(!U)if(Array.isArray(I)&&I.length!==O.length)E.error(`Expected ${I.length} arguments, but found ${O.length} instead.`);else{for(let Z=0;Z<O.length;Z++){const H=Array.isArray(I)?I[Z]:I.type,J=O[Z];E.concat(Z+1).checkSubtype(H,J.type)}if(E.errors.length===0)return new zi(d,v,D,O)}}if(S.length===1)l.errors.push(...E.errors);else{const I=(S.length?S:x).map(([O])=>{return U=O,Array.isArray(U)?`(${U.map(le).join(", ")})`:`(${le(U.type)}...)`;var U}).join(" | "),D=[];for(let O=1;O<r.length;O++){const U=l.parse(r[O],1+D.length);if(!U)return null;D.push(le(U.type))}l.error(`Expected arguments of type ${I}, but found (${D.join(", ")}) instead.`)}return null}static register(r,l){zi.definitions=l;for(const d in l)r[d]=zi}}function ku(o){if(o instanceof Au)return ku(o.boundExpression);if(o instanceof zi&&o.name==="error"||o instanceof Eu||o instanceof Io)return!1;const r=o instanceof so||o instanceof Di;let l=!0;return o.eachChild(d=>{l=r?l&&ku(d):l&&d instanceof ko}),!!l&&Iu(o)&&Mu(o,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Iu(o){if(o instanceof zi&&(o.name==="get"&&o.args.length===1||o.name==="feature-state"||o.name==="has"&&o.args.length===1||o.name==="properties"||o.name==="geometry-type"||o.name==="id"||/^filter-/.test(o.name))||o instanceof Io)return!1;let r=!0;return o.eachChild(l=>{r&&!Iu(l)&&(r=!1)}),r}function Tl(o){if(o instanceof zi&&o.name==="feature-state")return!1;let r=!0;return o.eachChild(l=>{r&&!Tl(l)&&(r=!1)}),r}function Mu(o,r){if(o instanceof zi&&r.indexOf(o.name)>=0)return!1;let l=!0;return o.eachChild(d=>{l&&!Mu(d,r)&&(l=!1)}),l}function _a(o,r){const l=o.length-1;let d,m,v=0,x=l,S=0;for(;v<=x;)if(S=Math.floor((v+x)/2),d=o[S],m=o[S+1],d<=r){if(S===l||r<m)return S;v=S+1}else{if(!(d>r))throw new kn("Input is not a number.");x=S-1}return 0}class ao{constructor(r,l,d){this.type=r,this.input=l,this.labels=[],this.outputs=[];for(const[m,v]of d)this.labels.push(m),this.outputs.push(v)}static parse(r,l){if(r.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return l.error("Expected an even number of arguments.");const d=l.parse(r[1],1,Qe);if(!d)return null;const m=[];let v=null;l.expectedType&&l.expectedType.kind!=="value"&&(v=l.expectedType);for(let x=1;x<r.length;x+=2){const S=x===1?-1/0:r[x],E=r[x+1],I=x,D=x+1;if(typeof S!="number")return l.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',I);if(m.length&&m[m.length-1][0]>=S)return l.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',I);const O=l.parse(E,D,v);if(!O)return null;v=v||O.type,m.push([S,O])}return new ao(v,d,m)}evaluate(r){const l=this.labels,d=this.outputs;if(l.length===1)return d[0].evaluate(r);const m=this.input.evaluate(r);if(m<=l[0])return d[0].evaluate(r);const v=l.length;return m>=l[v-1]?d[v-1].evaluate(r):d[_a(l,m)].evaluate(r)}eachChild(r){r(this.input);for(const l of this.outputs)r(l)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}}function qt(o,r,l){return o+l*(r-o)}function Ru(o,r,l){return o.map((d,m)=>qt(d,r[m],l))}const di={number:qt,color:function(o,r,l,d="rgb"){switch(d){case"rgb":{const[m,v,x,S]=Ru(o.rgb,r.rgb,l);return new sn(m,v,x,S,!1)}case"hcl":{const[m,v,x,S]=o.hcl,[E,I,D,O]=r.hcl;let U,Z;if(isNaN(m)||isNaN(E))isNaN(m)?isNaN(E)?U=NaN:(U=E,x!==1&&x!==0||(Z=I)):(U=m,D!==1&&D!==0||(Z=v));else{let xe=E-m;E>m&&xe>180?xe-=360:E<m&&m-E>180&&(xe+=360),U=m+l*xe}const[H,J,oe,he]=function([xe,fe,be,Ee]){return xe=isNaN(xe)?0:xe*It,un([be,Math.cos(xe)*fe,Math.sin(xe)*fe,Ee])}([U,Z??qt(v,I,l),qt(x,D,l),qt(S,O,l)]);return new sn(H,J,oe,he,!1)}case"lab":{const[m,v,x,S]=un(Ru(o.lab,r.lab,l));return new sn(m,v,x,S,!1)}}},array:Ru,padding:function(o,r,l){return new hi(Ru(o.values,r.values,l))},variableAnchorOffsetCollection:function(o,r,l){const d=o.values,m=r.values;if(d.length!==m.length)throw new kn(`Cannot interpolate values of different length. from: ${o.toString()}, to: ${r.toString()}`);const v=[];for(let x=0;x<d.length;x+=2){if(d[x]!==m[x])throw new kn(`Cannot interpolate values containing mismatched anchors. from[${x}]: ${d[x]}, to[${x}]: ${m[x]}`);v.push(d[x]);const[S,E]=d[x+1],[I,D]=m[x+1];v.push([qt(S,I,l),qt(E,D,l)])}return new Ri(v)}};class fi{constructor(r,l,d,m,v){this.type=r,this.operator=l,this.interpolation=d,this.input=m,this.labels=[],this.outputs=[];for(const[x,S]of v)this.labels.push(x),this.outputs.push(S)}static interpolationFactor(r,l,d,m){let v=0;if(r.name==="exponential")v=vh(l,r.base,d,m);else if(r.name==="linear")v=vh(l,1,d,m);else if(r.name==="cubic-bezier"){const x=r.controlPoints;v=new j(x[0],x[1],x[2],x[3]).solve(vh(l,1,d,m))}return v}static parse(r,l){let[d,m,v,...x]=r;if(!Array.isArray(m)||m.length===0)return l.error("Expected an interpolation type expression.",1);if(m[0]==="linear")m={name:"linear"};else if(m[0]==="exponential"){const I=m[1];if(typeof I!="number")return l.error("Exponential interpolation requires a numeric base.",1,1);m={name:"exponential",base:I}}else{if(m[0]!=="cubic-bezier")return l.error(`Unknown interpolation type ${String(m[0])}`,1,0);{const I=m.slice(1);if(I.length!==4||I.some(D=>typeof D!="number"||D<0||D>1))return l.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);m={name:"cubic-bezier",controlPoints:I}}}if(r.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return l.error("Expected an even number of arguments.");if(v=l.parse(v,2,Qe),!v)return null;const S=[];let E=null;d==="interpolate-hcl"||d==="interpolate-lab"?E=Rr:l.expectedType&&l.expectedType.kind!=="value"&&(E=l.expectedType);for(let I=0;I<x.length;I+=2){const D=x[I],O=x[I+1],U=I+3,Z=I+4;if(typeof D!="number")return l.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',U);if(S.length&&S[S.length-1][0]>=D)return l.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',U);const H=l.parse(O,Z,E);if(!H)return null;E=E||H.type,S.push([D,H])}return Me(E,Qe)||Me(E,Rr)||Me(E,$)||Me(E,Q)||Me(E,se(Qe))?new fi(E,d,m,v,S):l.error(`Type ${le(E)} is not interpolatable.`)}evaluate(r){const l=this.labels,d=this.outputs;if(l.length===1)return d[0].evaluate(r);const m=this.input.evaluate(r);if(m<=l[0])return d[0].evaluate(r);const v=l.length;if(m>=l[v-1])return d[v-1].evaluate(r);const x=_a(l,m),S=fi.interpolationFactor(this.interpolation,m,l[x],l[x+1]),E=d[x].evaluate(r),I=d[x+1].evaluate(r);switch(this.operator){case"interpolate":return di[this.type.kind](E,I,S);case"interpolate-hcl":return di.color(E,I,S,"hcl");case"interpolate-lab":return di.color(E,I,S,"lab")}}eachChild(r){r(this.input);for(const l of this.outputs)r(l)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}}function vh(o,r,l,d){const m=d-l,v=o-l;return m===0?0:r===1?v/m:(Math.pow(r,v)-1)/(Math.pow(r,m)-1)}class Du{constructor(r,l){this.type=r,this.args=l}static parse(r,l){if(r.length<2)return l.error("Expectected at least one argument.");let d=null;const m=l.expectedType;m&&m.kind!=="value"&&(d=m);const v=[];for(const S of r.slice(1)){const E=l.parse(S,1+v.length,d,void 0,{typeAnnotation:"omit"});if(!E)return null;d=d||E.type,v.push(E)}if(!d)throw new Error("No output type");const x=m&&v.some(S=>me(m,S.type));return new Du(x?Dt:d,v)}evaluate(r){let l,d=null,m=0;for(const v of this.args)if(m++,d=v.evaluate(r),d&&d instanceof mr&&!d.available&&(l||(l=d.name),d=null,m===this.args.length&&(d=l)),d!==null)break;return d}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}class zu{constructor(r,l){this.type=l.type,this.bindings=[].concat(r),this.result=l}evaluate(r){return this.result.evaluate(r)}eachChild(r){for(const l of this.bindings)r(l[1]);r(this.result)}static parse(r,l){if(r.length<4)return l.error(`Expected at least 3 arguments, but found ${r.length-1} instead.`);const d=[];for(let v=1;v<r.length-1;v+=2){const x=r[v];if(typeof x!="string")return l.error(`Expected string, but found ${typeof x} instead.`,v);if(/[^a-zA-Z0-9_]/.test(x))return l.error("Variable names must contain only alphanumeric characters or '_'.",v);const S=l.parse(r[v+1],v+1);if(!S)return null;d.push([x,S])}const m=l.parse(r[r.length-1],r.length-1,l.expectedType,d);return m?new zu(d,m):null}outputDefined(){return this.result.outputDefined()}}class _h{constructor(r,l,d){this.type=r,this.index=l,this.input=d}static parse(r,l){if(r.length!==3)return l.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const d=l.parse(r[1],1,Qe),m=l.parse(r[2],2,se(l.expectedType||Dt));return d&&m?new _h(m.type.itemType,d,m):null}evaluate(r){const l=this.index.evaluate(r),d=this.input.evaluate(r);if(l<0)throw new kn(`Array index out of bounds: ${l} < 0.`);if(l>=d.length)throw new kn(`Array index out of bounds: ${l} > ${d.length-1}.`);if(l!==Math.floor(l))throw new kn(`Array index must be an integer, but found ${l} instead.`);return d[l]}eachChild(r){r(this.index),r(this.input)}outputDefined(){return!1}}class xh{constructor(r,l){this.type=kt,this.needle=r,this.haystack=l}static parse(r,l){if(r.length!==3)return l.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const d=l.parse(r[1],1,Dt),m=l.parse(r[2],2,Dt);return d&&m?de(d.type,[kt,Ft,Qe,Rs,Dt])?new xh(d,m):l.error(`Expected first argument to be of type boolean, string, number or null, but found ${le(d.type)} instead`):null}evaluate(r){const l=this.needle.evaluate(r),d=this.haystack.evaluate(r);if(!d)return!1;if(!_e(l,["boolean","string","number","null"]))throw new kn(`Expected first argument to be of type boolean, string, number or null, but found ${le(Sn(l))} instead.`);if(!_e(d,["string","array"]))throw new kn(`Expected second argument to be of type array or string, but found ${le(Sn(d))} instead.`);return d.indexOf(l)>=0}eachChild(r){r(this.needle),r(this.haystack)}outputDefined(){return!0}}class Lu{constructor(r,l,d){this.type=Qe,this.needle=r,this.haystack=l,this.fromIndex=d}static parse(r,l){if(r.length<=2||r.length>=5)return l.error(`Expected 3 or 4 arguments, but found ${r.length-1} instead.`);const d=l.parse(r[1],1,Dt),m=l.parse(r[2],2,Dt);if(!d||!m)return null;if(!de(d.type,[kt,Ft,Qe,Rs,Dt]))return l.error(`Expected first argument to be of type boolean, string, number or null, but found ${le(d.type)} instead`);if(r.length===4){const v=l.parse(r[3],3,Qe);return v?new Lu(d,m,v):null}return new Lu(d,m)}evaluate(r){const l=this.needle.evaluate(r),d=this.haystack.evaluate(r);if(!_e(l,["boolean","string","number","null"]))throw new kn(`Expected first argument to be of type boolean, string, number or null, but found ${le(Sn(l))} instead.`);if(!_e(d,["string","array"]))throw new kn(`Expected second argument to be of type array or string, but found ${le(Sn(d))} instead.`);if(this.fromIndex){const m=this.fromIndex.evaluate(r);return d.indexOf(l,m)}return d.indexOf(l)}eachChild(r){r(this.needle),r(this.haystack),this.fromIndex&&r(this.fromIndex)}outputDefined(){return!1}}class wh{constructor(r,l,d,m,v,x){this.inputType=r,this.type=l,this.input=d,this.cases=m,this.outputs=v,this.otherwise=x}static parse(r,l){if(r.length<5)return l.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if(r.length%2!=1)return l.error("Expected an even number of arguments.");let d,m;l.expectedType&&l.expectedType.kind!=="value"&&(m=l.expectedType);const v={},x=[];for(let I=2;I<r.length-1;I+=2){let D=r[I];const O=r[I+1];Array.isArray(D)||(D=[D]);const U=l.concat(I);if(D.length===0)return U.error("Expected at least one branch label.");for(const H of D){if(typeof H!="number"&&typeof H!="string")return U.error("Branch labels must be numbers or strings.");if(typeof H=="number"&&Math.abs(H)>Number.MAX_SAFE_INTEGER)return U.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof H=="number"&&Math.floor(H)!==H)return U.error("Numeric branch labels must be integer values.");if(d){if(U.checkSubtype(d,Sn(H)))return null}else d=Sn(H);if(v[String(H)]!==void 0)return U.error("Branch labels must be unique.");v[String(H)]=x.length}const Z=l.parse(O,I,m);if(!Z)return null;m=m||Z.type,x.push(Z)}const S=l.parse(r[1],1,Dt);if(!S)return null;const E=l.parse(r[r.length-1],r.length-1,m);return E?S.type.kind!=="value"&&l.concat(1).checkSubtype(d,S.type)?null:new wh(d,m,S,v,x,E):null}evaluate(r){const l=this.input.evaluate(r);return(Sn(l)===this.inputType&&this.outputs[this.cases[l]]||this.otherwise).evaluate(r)}eachChild(r){r(this.input),this.outputs.forEach(r),r(this.otherwise)}outputDefined(){return this.outputs.every(r=>r.outputDefined())&&this.otherwise.outputDefined()}}class bh{constructor(r,l,d){this.type=r,this.branches=l,this.otherwise=d}static parse(r,l){if(r.length<4)return l.error(`Expected at least 3 arguments, but found only ${r.length-1}.`);if(r.length%2!=0)return l.error("Expected an odd number of arguments.");let d;l.expectedType&&l.expectedType.kind!=="value"&&(d=l.expectedType);const m=[];for(let x=1;x<r.length-1;x+=2){const S=l.parse(r[x],x,kt);if(!S)return null;const E=l.parse(r[x+1],x+1,d);if(!E)return null;m.push([S,E]),d=d||E.type}const v=l.parse(r[r.length-1],r.length-1,d);if(!v)return null;if(!d)throw new Error("Can't infer output type");return new bh(d,m,v)}evaluate(r){for(const[l,d]of this.branches)if(l.evaluate(r))return d.evaluate(r);return this.otherwise.evaluate(r)}eachChild(r){for(const[l,d]of this.branches)r(l),r(d);r(this.otherwise)}outputDefined(){return this.branches.every(([r,l])=>l.outputDefined())&&this.otherwise.outputDefined()}}class Ou{constructor(r,l,d,m){this.type=r,this.input=l,this.beginIndex=d,this.endIndex=m}static parse(r,l){if(r.length<=2||r.length>=5)return l.error(`Expected 3 or 4 arguments, but found ${r.length-1} instead.`);const d=l.parse(r[1],1,Dt),m=l.parse(r[2],2,Qe);if(!d||!m)return null;if(!de(d.type,[se(Dt),Ft,Dt]))return l.error(`Expected first argument to be of type array or string, but found ${le(d.type)} instead`);if(r.length===4){const v=l.parse(r[3],3,Qe);return v?new Ou(d.type,d,m,v):null}return new Ou(d.type,d,m)}evaluate(r){const l=this.input.evaluate(r),d=this.beginIndex.evaluate(r);if(!_e(l,["string","array"]))throw new kn(`Expected first argument to be of type array or string, but found ${le(Sn(l))} instead.`);if(this.endIndex){const m=this.endIndex.evaluate(r);return l.slice(d,m)}return l.slice(d)}eachChild(r){r(this.input),r(this.beginIndex),this.endIndex&&r(this.endIndex)}outputDefined(){return!1}}function Yf(o,r){return o==="=="||o==="!="?r.kind==="boolean"||r.kind==="string"||r.kind==="number"||r.kind==="null"||r.kind==="value":r.kind==="string"||r.kind==="number"||r.kind==="value"}function Jf(o,r,l,d){return d.compare(r,l)===0}function xa(o,r,l){const d=o!=="=="&&o!=="!=";return class $D{constructor(v,x,S){this.type=kt,this.lhs=v,this.rhs=x,this.collator=S,this.hasUntypedArgument=v.type.kind==="value"||x.type.kind==="value"}static parse(v,x){if(v.length!==3&&v.length!==4)return x.error("Expected two or three arguments.");const S=v[0];let E=x.parse(v[1],1,Dt);if(!E)return null;if(!Yf(S,E.type))return x.concat(1).error(`"${S}" comparisons are not supported for type '${le(E.type)}'.`);let I=x.parse(v[2],2,Dt);if(!I)return null;if(!Yf(S,I.type))return x.concat(2).error(`"${S}" comparisons are not supported for type '${le(I.type)}'.`);if(E.type.kind!==I.type.kind&&E.type.kind!=="value"&&I.type.kind!=="value")return x.error(`Cannot compare types '${le(E.type)}' and '${le(I.type)}'.`);d&&(E.type.kind==="value"&&I.type.kind!=="value"?E=new Di(I.type,[E]):E.type.kind!=="value"&&I.type.kind==="value"&&(I=new Di(E.type,[I])));let D=null;if(v.length===4){if(E.type.kind!=="string"&&I.type.kind!=="string"&&E.type.kind!=="value"&&I.type.kind!=="value")return x.error("Cannot use collator to compare non-string types.");if(D=x.parse(v[3],3,Ds),!D)return null}return new $D(E,I,D)}evaluate(v){const x=this.lhs.evaluate(v),S=this.rhs.evaluate(v);if(d&&this.hasUntypedArgument){const E=Sn(x),I=Sn(S);if(E.kind!==I.kind||E.kind!=="string"&&E.kind!=="number")throw new kn(`Expected arguments for "${o}" to be (string, string) or (number, number), but found (${E.kind}, ${I.kind}) instead.`)}if(this.collator&&!d&&this.hasUntypedArgument){const E=Sn(x),I=Sn(S);if(E.kind!=="string"||I.kind!=="string")return r(v,x,S)}return this.collator?l(v,x,S,this.collator.evaluate(v)):r(v,x,S)}eachChild(v){v(this.lhs),v(this.rhs),this.collator&&v(this.collator)}outputDefined(){return!0}}}const sv=xa("==",function(o,r,l){return r===l},Jf),ov=xa("!=",function(o,r,l){return r!==l},function(o,r,l,d){return!Jf(0,r,l,d)}),av=xa("<",function(o,r,l){return r<l},function(o,r,l,d){return d.compare(r,l)<0}),lv=xa(">",function(o,r,l){return r>l},function(o,r,l,d){return d.compare(r,l)>0}),uv=xa("<=",function(o,r,l){return r<=l},function(o,r,l,d){return d.compare(r,l)<=0}),cv=xa(">=",function(o,r,l){return r>=l},function(o,r,l,d){return d.compare(r,l)>=0});class Sh{constructor(r,l,d,m,v){this.type=Ft,this.number=r,this.locale=l,this.currency=d,this.minFractionDigits=m,this.maxFractionDigits=v}static parse(r,l){if(r.length!==3)return l.error("Expected two arguments.");const d=l.parse(r[1],1,Qe);if(!d)return null;const m=r[2];if(typeof m!="object"||Array.isArray(m))return l.error("NumberFormat options argument must be an object.");let v=null;if(m.locale&&(v=l.parse(m.locale,1,Ft),!v))return null;let x=null;if(m.currency&&(x=l.parse(m.currency,1,Ft),!x))return null;let S=null;if(m["min-fraction-digits"]&&(S=l.parse(m["min-fraction-digits"],1,Qe),!S))return null;let E=null;return m["max-fraction-digits"]&&(E=l.parse(m["max-fraction-digits"],1,Qe),!E)?null:new Sh(d,v,x,S,E)}evaluate(r){return new Intl.NumberFormat(this.locale?this.locale.evaluate(r):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(r):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(r):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(r):void 0}).format(this.number.evaluate(r))}eachChild(r){r(this.number),this.locale&&r(this.locale),this.currency&&r(this.currency),this.minFractionDigits&&r(this.minFractionDigits),this.maxFractionDigits&&r(this.maxFractionDigits)}outputDefined(){return!1}}class Fu{constructor(r){this.type=re,this.sections=r}static parse(r,l){if(r.length<2)return l.error("Expected at least one argument.");const d=r[1];if(!Array.isArray(d)&&typeof d=="object")return l.error("First argument must be an image or text section.");const m=[];let v=!1;for(let x=1;x<=r.length-1;++x){const S=r[x];if(v&&typeof S=="object"&&!Array.isArray(S)){v=!1;let E=null;if(S["font-scale"]&&(E=l.parse(S["font-scale"],1,Qe),!E))return null;let I=null;if(S["text-font"]&&(I=l.parse(S["text-font"],1,se(Ft)),!I))return null;let D=null;if(S["text-color"]&&(D=l.parse(S["text-color"],1,Rr),!D))return null;const O=m[m.length-1];O.scale=E,O.font=I,O.textColor=D}else{const E=l.parse(r[x],1,Dt);if(!E)return null;const I=E.type.kind;if(I!=="string"&&I!=="value"&&I!=="null"&&I!=="resolvedImage")return l.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");v=!0,m.push({content:E,scale:null,font:null,textColor:null})}}return new Fu(m)}evaluate(r){return new Cr(this.sections.map(l=>{const d=l.content.evaluate(r);return Sn(d)===q?new bu("",d,null,null,null):new bu(Yt(d),null,l.scale?l.scale.evaluate(r):null,l.font?l.font.evaluate(r).join(","):null,l.textColor?l.textColor.evaluate(r):null)}))}eachChild(r){for(const l of this.sections)r(l.content),l.scale&&r(l.scale),l.font&&r(l.font),l.textColor&&r(l.textColor)}outputDefined(){return!1}}class Ch{constructor(r){this.type=q,this.input=r}static parse(r,l){if(r.length!==2)return l.error("Expected two arguments.");const d=l.parse(r[1],1,Ft);return d?new Ch(d):l.error("No image name provided.")}evaluate(r){const l=this.input.evaluate(r),d=mr.fromString(l);return d&&r.availableImages&&(d.available=r.availableImages.indexOf(l)>-1),d}eachChild(r){r(this.input)}outputDefined(){return!1}}class Th{constructor(r){this.type=Qe,this.input=r}static parse(r,l){if(r.length!==2)return l.error(`Expected 1 argument, but found ${r.length-1} instead.`);const d=l.parse(r[1],1);return d?d.type.kind!=="array"&&d.type.kind!=="string"&&d.type.kind!=="value"?l.error(`Expected argument of type string or array, but found ${le(d.type)} instead.`):new Th(d):null}evaluate(r){const l=this.input.evaluate(r);if(typeof l=="string"||Array.isArray(l))return l.length;throw new kn(`Expected value to be of type string or array, but found ${le(Sn(l))} instead.`)}eachChild(r){r(this.input)}outputDefined(){return!1}}const wa={"==":sv,"!=":ov,">":lv,"<":av,">=":cv,"<=":uv,array:Di,at:_h,boolean:Di,case:bh,coalesce:Du,collator:Eu,format:Fu,image:Ch,in:xh,"index-of":Lu,interpolate:fi,"interpolate-hcl":fi,"interpolate-lab":fi,length:Th,let:zu,literal:ko,match:wh,number:Di,"number-format":Sh,object:Di,slice:Ou,step:ao,string:Di,"to-boolean":so,"to-color":so,"to-number":so,"to-string":so,var:Au,within:Io};function ep(o,[r,l,d,m]){r=r.evaluate(o),l=l.evaluate(o),d=d.evaluate(o);const v=m?m.evaluate(o):1,x=Su(r,l,d,v);if(x)throw new kn(x);return new sn(r/255,l/255,d/255,v,!1)}function tp(o,r){return o in r}function Eh(o,r){const l=r[o];return l===void 0?null:l}function Mo(o){return{type:o}}function np(o){return{result:"success",value:o}}function lo(o){return{result:"error",value:o}}function ba(o){return o["property-type"]==="data-driven"||o["property-type"]==="cross-faded-data-driven"}function rp(o){return!!o.expression&&o.expression.parameters.indexOf("zoom")>-1}function Ph(o){return!!o.expression&&o.expression.interpolated}function Jt(o){return o instanceof Number?"number":o instanceof String?"string":o instanceof Boolean?"boolean":Array.isArray(o)?"array":o===null?"null":typeof o}function Cn(o){return typeof o=="object"&&o!==null&&!Array.isArray(o)}function hv(o){return o}function Gt(o,r){const l=r.type==="color",d=o.stops&&typeof o.stops[0][0]=="object",m=d||!(d||o.property!==void 0),v=o.type||(Ph(r)?"exponential":"interval");if(l||r.type==="padding"){const D=l?sn.parse:hi.parse;(o=ci({},o)).stops&&(o.stops=o.stops.map(O=>[O[0],D(O[1])])),o.default=D(o.default?o.default:r.default)}if(o.colorSpace&&(x=o.colorSpace)!=="rgb"&&x!=="hcl"&&x!=="lab")throw new Error(`Unknown color space: "${o.colorSpace}"`);var x;let S,E,I;if(v==="exponential")S=El;else if(v==="interval")S=wn;else if(v==="categorical"){S=Tn,E=Object.create(null);for(const D of o.stops)E[D[0]]=D[1];I=typeof o.stops[0][0]}else{if(v!=="identity")throw new Error(`Unknown function type "${v}"`);S=ip}if(d){const D={},O=[];for(let H=0;H<o.stops.length;H++){const J=o.stops[H],oe=J[0].zoom;D[oe]===void 0&&(D[oe]={zoom:oe,type:o.type,property:o.property,default:o.default,stops:[]},O.push(oe)),D[oe].stops.push([J[0].value,J[1]])}const U=[];for(const H of O)U.push([D[H].zoom,Gt(D[H],r)]);const Z={name:"linear"};return{kind:"composite",interpolationType:Z,interpolationFactor:fi.interpolationFactor.bind(void 0,Z),zoomStops:U.map(H=>H[0]),evaluate:({zoom:H},J)=>El({stops:U,base:o.base},r,H).evaluate(H,J)}}if(m){const D=v==="exponential"?{name:"exponential",base:o.base!==void 0?o.base:1}:null;return{kind:"camera",interpolationType:D,interpolationFactor:fi.interpolationFactor.bind(void 0,D),zoomStops:o.stops.map(O=>O[0]),evaluate:({zoom:O})=>S(o,r,O,E,I)}}return{kind:"source",evaluate(D,O){const U=O&&O.properties?O.properties[o.property]:void 0;return U===void 0?Ro(o.default,r.default):S(o,r,U,E,I)}}}function Ro(o,r,l){return o!==void 0?o:r!==void 0?r:l!==void 0?l:void 0}function Tn(o,r,l,d,m){return Ro(typeof l===m?d[l]:void 0,o.default,r.default)}function wn(o,r,l){if(Jt(l)!=="number")return Ro(o.default,r.default);const d=o.stops.length;if(d===1||l<=o.stops[0][0])return o.stops[0][1];if(l>=o.stops[d-1][0])return o.stops[d-1][1];const m=_a(o.stops.map(v=>v[0]),l);return o.stops[m][1]}function El(o,r,l){const d=o.base!==void 0?o.base:1;if(Jt(l)!=="number")return Ro(o.default,r.default);const m=o.stops.length;if(m===1||l<=o.stops[0][0])return o.stops[0][1];if(l>=o.stops[m-1][0])return o.stops[m-1][1];const v=_a(o.stops.map(D=>D[0]),l),x=function(D,O,U,Z){const H=Z-U,J=D-U;return H===0?0:O===1?J/H:(Math.pow(O,J)-1)/(Math.pow(O,H)-1)}(l,d,o.stops[v][0],o.stops[v+1][0]),S=o.stops[v][1],E=o.stops[v+1][1],I=di[r.type]||hv;return typeof S.evaluate=="function"?{evaluate(...D){const O=S.evaluate.apply(void 0,D),U=E.evaluate.apply(void 0,D);if(O!==void 0&&U!==void 0)return I(O,U,x,o.colorSpace)}}:I(S,E,x,o.colorSpace)}function ip(o,r,l){switch(r.type){case"color":l=sn.parse(l);break;case"formatted":l=Cr.fromString(l.toString());break;case"resolvedImage":l=mr.fromString(l.toString());break;case"padding":l=hi.parse(l);break;default:Jt(l)===r.type||r.type==="enum"&&r.values[l]||(l=void 0)}return Ro(l,o.default,r.default)}zi.register(wa,{error:[{kind:"error"},[Ft],(o,[r])=>{throw new kn(r.evaluate(o))}],typeof:[Ft,[Dt],(o,[r])=>le(Sn(r.evaluate(o)))],"to-rgba":[se(Qe,4),[Rr],(o,[r])=>{const[l,d,m,v]=r.evaluate(o).rgb;return[255*l,255*d,255*m,v]}],rgb:[Rr,[Qe,Qe,Qe],ep],rgba:[Rr,[Qe,Qe,Qe,Qe],ep],has:{type:kt,overloads:[[[Ft],(o,[r])=>tp(r.evaluate(o),o.properties())],[[Ft,us],(o,[r,l])=>tp(r.evaluate(o),l.evaluate(o))]]},get:{type:Dt,overloads:[[[Ft],(o,[r])=>Eh(r.evaluate(o),o.properties())],[[Ft,us],(o,[r,l])=>Eh(r.evaluate(o),l.evaluate(o))]]},"feature-state":[Dt,[Ft],(o,[r])=>Eh(r.evaluate(o),o.featureState||{})],properties:[us,[],o=>o.properties()],"geometry-type":[Ft,[],o=>o.geometryType()],id:[Dt,[],o=>o.id()],zoom:[Qe,[],o=>o.globals.zoom],"heatmap-density":[Qe,[],o=>o.globals.heatmapDensity||0],"line-progress":[Qe,[],o=>o.globals.lineProgress||0],accumulated:[Dt,[],o=>o.globals.accumulated===void 0?null:o.globals.accumulated],"+":[Qe,Mo(Qe),(o,r)=>{let l=0;for(const d of r)l+=d.evaluate(o);return l}],"*":[Qe,Mo(Qe),(o,r)=>{let l=1;for(const d of r)l*=d.evaluate(o);return l}],"-":{type:Qe,overloads:[[[Qe,Qe],(o,[r,l])=>r.evaluate(o)-l.evaluate(o)],[[Qe],(o,[r])=>-r.evaluate(o)]]},"/":[Qe,[Qe,Qe],(o,[r,l])=>r.evaluate(o)/l.evaluate(o)],"%":[Qe,[Qe,Qe],(o,[r,l])=>r.evaluate(o)%l.evaluate(o)],ln2:[Qe,[],()=>Math.LN2],pi:[Qe,[],()=>Math.PI],e:[Qe,[],()=>Math.E],"^":[Qe,[Qe,Qe],(o,[r,l])=>Math.pow(r.evaluate(o),l.evaluate(o))],sqrt:[Qe,[Qe],(o,[r])=>Math.sqrt(r.evaluate(o))],log10:[Qe,[Qe],(o,[r])=>Math.log(r.evaluate(o))/Math.LN10],ln:[Qe,[Qe],(o,[r])=>Math.log(r.evaluate(o))],log2:[Qe,[Qe],(o,[r])=>Math.log(r.evaluate(o))/Math.LN2],sin:[Qe,[Qe],(o,[r])=>Math.sin(r.evaluate(o))],cos:[Qe,[Qe],(o,[r])=>Math.cos(r.evaluate(o))],tan:[Qe,[Qe],(o,[r])=>Math.tan(r.evaluate(o))],asin:[Qe,[Qe],(o,[r])=>Math.asin(r.evaluate(o))],acos:[Qe,[Qe],(o,[r])=>Math.acos(r.evaluate(o))],atan:[Qe,[Qe],(o,[r])=>Math.atan(r.evaluate(o))],min:[Qe,Mo(Qe),(o,r)=>Math.min(...r.map(l=>l.evaluate(o)))],max:[Qe,Mo(Qe),(o,r)=>Math.max(...r.map(l=>l.evaluate(o)))],abs:[Qe,[Qe],(o,[r])=>Math.abs(r.evaluate(o))],round:[Qe,[Qe],(o,[r])=>{const l=r.evaluate(o);return l<0?-Math.round(-l):Math.round(l)}],floor:[Qe,[Qe],(o,[r])=>Math.floor(r.evaluate(o))],ceil:[Qe,[Qe],(o,[r])=>Math.ceil(r.evaluate(o))],"filter-==":[kt,[Ft,Dt],(o,[r,l])=>o.properties()[r.value]===l.value],"filter-id-==":[kt,[Dt],(o,[r])=>o.id()===r.value],"filter-type-==":[kt,[Ft],(o,[r])=>o.geometryType()===r.value],"filter-<":[kt,[Ft,Dt],(o,[r,l])=>{const d=o.properties()[r.value],m=l.value;return typeof d==typeof m&&d<m}],"filter-id-<":[kt,[Dt],(o,[r])=>{const l=o.id(),d=r.value;return typeof l==typeof d&&l<d}],"filter->":[kt,[Ft,Dt],(o,[r,l])=>{const d=o.properties()[r.value],m=l.value;return typeof d==typeof m&&d>m}],"filter-id->":[kt,[Dt],(o,[r])=>{const l=o.id(),d=r.value;return typeof l==typeof d&&l>d}],"filter-<=":[kt,[Ft,Dt],(o,[r,l])=>{const d=o.properties()[r.value],m=l.value;return typeof d==typeof m&&d<=m}],"filter-id-<=":[kt,[Dt],(o,[r])=>{const l=o.id(),d=r.value;return typeof l==typeof d&&l<=d}],"filter->=":[kt,[Ft,Dt],(o,[r,l])=>{const d=o.properties()[r.value],m=l.value;return typeof d==typeof m&&d>=m}],"filter-id->=":[kt,[Dt],(o,[r])=>{const l=o.id(),d=r.value;return typeof l==typeof d&&l>=d}],"filter-has":[kt,[Dt],(o,[r])=>r.value in o.properties()],"filter-has-id":[kt,[],o=>o.id()!==null&&o.id()!==void 0],"filter-type-in":[kt,[se(Ft)],(o,[r])=>r.value.indexOf(o.geometryType())>=0],"filter-id-in":[kt,[se(Dt)],(o,[r])=>r.value.indexOf(o.id())>=0],"filter-in-small":[kt,[Ft,se(Dt)],(o,[r,l])=>l.value.indexOf(o.properties()[r.value])>=0],"filter-in-large":[kt,[Ft,se(Dt)],(o,[r,l])=>function(d,m,v,x){for(;v<=x;){const S=v+x>>1;if(m[S]===d)return!0;m[S]>d?x=S-1:v=S+1}return!1}(o.properties()[r.value],l.value,0,l.value.length-1)],all:{type:kt,overloads:[[[kt,kt],(o,[r,l])=>r.evaluate(o)&&l.evaluate(o)],[Mo(kt),(o,r)=>{for(const l of r)if(!l.evaluate(o))return!1;return!0}]]},any:{type:kt,overloads:[[[kt,kt],(o,[r,l])=>r.evaluate(o)||l.evaluate(o)],[Mo(kt),(o,r)=>{for(const l of r)if(l.evaluate(o))return!0;return!1}]]},"!":[kt,[kt],(o,[r])=>!r.evaluate(o)],"is-supported-script":[kt,[Ft],(o,[r])=>{const l=o.globals&&o.globals.isSupportedScript;return!l||l(r.evaluate(o))}],upcase:[Ft,[Ft],(o,[r])=>r.evaluate(o).toUpperCase()],downcase:[Ft,[Ft],(o,[r])=>r.evaluate(o).toLowerCase()],concat:[Ft,Mo(Dt),(o,r)=>r.map(l=>Yt(l.evaluate(o))).join("")],"resolved-locale":[Ft,[Ds],(o,[r])=>r.evaluate(o).resolvedLocale()]});class Ah{constructor(r,l){var d;this.expression=r,this._warningHistory={},this._evaluator=new dh,this._defaultValue=l?(d=l).type==="color"&&Cn(d.default)?new sn(0,0,0,0):d.type==="color"?sn.parse(d.default)||null:d.type==="padding"?hi.parse(d.default)||null:d.type==="variableAnchorOffsetCollection"?Ri.parse(d.default)||null:d.default===void 0?null:d.default:null,this._enumValues=l&&l.type==="enum"?l.values:null}evaluateWithoutErrorHandling(r,l,d,m,v,x){return this._evaluator.globals=r,this._evaluator.feature=l,this._evaluator.featureState=d,this._evaluator.canonical=m,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=x,this.expression.evaluate(this._evaluator)}evaluate(r,l,d,m,v,x){this._evaluator.globals=r,this._evaluator.feature=l||null,this._evaluator.featureState=d||null,this._evaluator.canonical=m,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=x||null;try{const S=this.expression.evaluate(this._evaluator);if(S==null||typeof S=="number"&&S!=S)return this._defaultValue;if(this._enumValues&&!(S in this._enumValues))throw new kn(`Expected value to be one of ${Object.keys(this._enumValues).map(E=>JSON.stringify(E)).join(", ")}, but found ${JSON.stringify(S)} instead.`);return S}catch(S){return this._warningHistory[S.message]||(this._warningHistory[S.message]=!0,typeof console<"u"&&console.warn(S.message)),this._defaultValue}}}function Nu(o){return Array.isArray(o)&&o.length>0&&typeof o[0]=="string"&&o[0]in wa}function Bu(o,r){const l=new Tu(wa,ku,[],r?function(m){const v={color:Rr,string:Ft,number:Qe,enum:Ft,boolean:kt,formatted:re,padding:$,resolvedImage:q,variableAnchorOffsetCollection:Q};return m.type==="array"?se(v[m.value]||Dt,m.length):v[m.type]}(r):void 0),d=l.parse(o,void 0,void 0,void 0,r&&r.type==="string"?{typeAnnotation:"coerce"}:void 0);return d?np(new Ah(d,r)):lo(l.errors)}class kh{constructor(r,l){this.kind=r,this._styleExpression=l,this.isStateDependent=r!=="constant"&&!Tl(l.expression)}evaluateWithoutErrorHandling(r,l,d,m,v,x){return this._styleExpression.evaluateWithoutErrorHandling(r,l,d,m,v,x)}evaluate(r,l,d,m,v,x){return this._styleExpression.evaluate(r,l,d,m,v,x)}}class Vu{constructor(r,l,d,m){this.kind=r,this.zoomStops=d,this._styleExpression=l,this.isStateDependent=r!=="camera"&&!Tl(l.expression),this.interpolationType=m}evaluateWithoutErrorHandling(r,l,d,m,v,x){return this._styleExpression.evaluateWithoutErrorHandling(r,l,d,m,v,x)}evaluate(r,l,d,m,v,x){return this._styleExpression.evaluate(r,l,d,m,v,x)}interpolationFactor(r,l,d){return this.interpolationType?fi.interpolationFactor(this.interpolationType,r,l,d):0}}function Ih(o,r){const l=Bu(o,r);if(l.result==="error")return l;const d=l.value.expression,m=Iu(d);if(!m&&!ba(r))return lo([new xn("","data expressions not supported")]);const v=Mu(d,["zoom"]);if(!v&&!rp(r))return lo([new xn("","zoom expressions not supported")]);const x=Al(d);return x||v?x instanceof xn?lo([x]):x instanceof fi&&!Ph(r)?lo([new xn("",'"interpolate" expressions cannot be used with this property')]):np(x?new Vu(m?"camera":"composite",l.value,x.labels,x instanceof fi?x.interpolation:void 0):new kh(m?"constant":"source",l.value)):lo([new xn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Pl{constructor(r,l){this._parameters=r,this._specification=l,ci(this,Gt(this._parameters,this._specification))}static deserialize(r){return new Pl(r._parameters,r._specification)}static serialize(r){return{_parameters:r._parameters,_specification:r._specification}}}function Al(o){let r=null;if(o instanceof zu)r=Al(o.result);else if(o instanceof Du){for(const l of o.args)if(r=Al(l),r)break}else(o instanceof ao||o instanceof fi)&&o.input instanceof zi&&o.input.name==="zoom"&&(r=o);return r instanceof xn||o.eachChild(l=>{const d=Al(l);d instanceof xn?r=d:!r&&d?r=new xn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):r&&d&&r!==d&&(r=new xn("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),r}function kl(o){if(o===!0||o===!1)return!0;if(!Array.isArray(o)||o.length===0)return!1;switch(o[0]){case"has":return o.length>=2&&o[1]!=="$id"&&o[1]!=="$type";case"in":return o.length>=3&&(typeof o[1]!="string"||Array.isArray(o[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return o.length!==3||Array.isArray(o[1])||Array.isArray(o[2]);case"any":case"all":for(const r of o.slice(1))if(!kl(r)&&typeof r!="boolean")return!1;return!0;default:return!0}}const dv={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Mh(o){if(o==null)return{filter:()=>!0,needGeometry:!1};kl(o)||(o=$u(o));const r=Bu(o,dv);if(r.result==="error")throw new Error(r.value.map(l=>`${l.key}: ${l.message}`).join(", "));return{filter:(l,d,m)=>r.value.evaluate(l,d,{},m),needGeometry:sp(o)}}function fv(o,r){return o<r?-1:o>r?1:0}function sp(o){if(!Array.isArray(o))return!1;if(o[0]==="within")return!0;for(let r=1;r<o.length;r++)if(sp(o[r]))return!0;return!1}function $u(o){if(!o)return!0;const r=o[0];return o.length<=1?r!=="any":r==="=="?Rh(o[1],o[2],"=="):r==="!="?Il(Rh(o[1],o[2],"==")):r==="<"||r===">"||r==="<="||r===">="?Rh(o[1],o[2],r):r==="any"?(l=o.slice(1),["any"].concat(l.map($u))):r==="all"?["all"].concat(o.slice(1).map($u)):r==="none"?["all"].concat(o.slice(1).map($u).map(Il)):r==="in"?op(o[1],o.slice(2)):r==="!in"?Il(op(o[1],o.slice(2))):r==="has"?ap(o[1]):r==="!has"?Il(ap(o[1])):r!=="within"||o;var l}function Rh(o,r,l){switch(o){case"$type":return[`filter-type-${l}`,r];case"$id":return[`filter-id-${l}`,r];default:return[`filter-${l}`,o,r]}}function op(o,r){if(r.length===0)return!1;switch(o){case"$type":return["filter-type-in",["literal",r]];case"$id":return["filter-id-in",["literal",r]];default:return r.length>200&&!r.some(l=>typeof l!=typeof r[0])?["filter-in-large",o,["literal",r.sort(fv)]]:["filter-in-small",o,["literal",r]]}}function ap(o){switch(o){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",o]}}function Il(o){return["!",o]}function ju(o){const r=typeof o;if(r==="number"||r==="boolean"||r==="string"||o==null)return JSON.stringify(o);if(Array.isArray(o)){let m="[";for(const v of o)m+=`${ju(v)},`;return`${m}]`}const l=Object.keys(o).sort();let d="{";for(let m=0;m<l.length;m++)d+=`${JSON.stringify(l[m])}:${ju(o[l[m]])},`;return`${d}}`}function Uu(o){let r="";for(const l of tt)r+=`/${ju(o[l])}`;return r}function lp(o){const r=o.value;return r?[new Ze(o.key,r,"constants have been deprecated as of v8")]:[]}function In(o){return o instanceof Number||o instanceof String||o instanceof Boolean?o.valueOf():o}function Do(o){if(Array.isArray(o))return o.map(Do);if(o instanceof Object&&!(o instanceof Number||o instanceof String||o instanceof Boolean)){const r={};for(const l in o)r[l]=Do(o[l]);return r}return In(o)}function Hr(o){const r=o.key,l=o.value,d=o.valueSpec||{},m=o.objectElementValidators||{},v=o.style,x=o.styleSpec,S=o.validateSpec;let E=[];const I=Jt(l);if(I!=="object")return[new Ze(r,l,`object expected, ${I} found`)];for(const D in l){const O=D.split(".")[0],U=d[O]||d["*"];let Z;if(m[O])Z=m[O];else if(d[O])Z=S;else if(m["*"])Z=m["*"];else{if(!d["*"]){E.push(new Ze(r,l[D],`unknown property "${D}"`));continue}Z=S}E=E.concat(Z({key:(r&&`${r}.`)+D,value:l[D],valueSpec:U,style:v,styleSpec:x,object:l,objectKey:D,validateSpec:S},l))}for(const D in d)m[D]||d[D].required&&d[D].default===void 0&&l[D]===void 0&&E.push(new Ze(r,l,`missing required property "${D}"`));return E}function Sa(o){const r=o.value,l=o.valueSpec,d=o.style,m=o.styleSpec,v=o.key,x=o.arrayElementValidator||o.validateSpec;if(Jt(r)!=="array")return[new Ze(v,r,`array expected, ${Jt(r)} found`)];if(l.length&&r.length!==l.length)return[new Ze(v,r,`array length ${l.length} expected, length ${r.length} found`)];if(l["min-length"]&&r.length<l["min-length"])return[new Ze(v,r,`array length at least ${l["min-length"]} expected, length ${r.length} found`)];let S={type:l.value,values:l.values};m.$version<7&&(S.function=l.function),Jt(l.value)==="object"&&(S=l.value);let E=[];for(let I=0;I<r.length;I++)E=E.concat(x({array:r,arrayIndex:I,value:r[I],valueSpec:S,validateSpec:o.validateSpec,style:d,styleSpec:m,key:`${v}[${I}]`}));return E}function Ml(o){const r=o.key,l=o.value,d=o.valueSpec;let m=Jt(l);return m==="number"&&l!=l&&(m="NaN"),m!=="number"?[new Ze(r,l,`number expected, ${m} found`)]:"minimum"in d&&l<d.minimum?[new Ze(r,l,`${l} is less than the minimum value ${d.minimum}`)]:"maximum"in d&&l>d.maximum?[new Ze(r,l,`${l} is greater than the maximum value ${d.maximum}`)]:[]}function qu(o){const r=o.valueSpec,l=In(o.value.type);let d,m,v,x={};const S=l!=="categorical"&&o.value.property===void 0,E=!S,I=Jt(o.value.stops)==="array"&&Jt(o.value.stops[0])==="array"&&Jt(o.value.stops[0][0])==="object",D=Hr({key:o.key,value:o.value,valueSpec:o.styleSpec.function,validateSpec:o.validateSpec,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{stops:function(Z){if(l==="identity")return[new Ze(Z.key,Z.value,'identity function may not have a "stops" property')];let H=[];const J=Z.value;return H=H.concat(Sa({key:Z.key,value:J,valueSpec:Z.valueSpec,validateSpec:Z.validateSpec,style:Z.style,styleSpec:Z.styleSpec,arrayElementValidator:O})),Jt(J)==="array"&&J.length===0&&H.push(new Ze(Z.key,J,"array must have at least one stop")),H},default:function(Z){return Z.validateSpec({key:Z.key,value:Z.value,valueSpec:r,validateSpec:Z.validateSpec,style:Z.style,styleSpec:Z.styleSpec})}}});return l==="identity"&&S&&D.push(new Ze(o.key,o.value,'missing required property "property"')),l==="identity"||o.value.stops||D.push(new Ze(o.key,o.value,'missing required property "stops"')),l==="exponential"&&o.valueSpec.expression&&!Ph(o.valueSpec)&&D.push(new Ze(o.key,o.value,"exponential functions not supported")),o.styleSpec.$version>=8&&(E&&!ba(o.valueSpec)?D.push(new Ze(o.key,o.value,"property functions not supported")):S&&!rp(o.valueSpec)&&D.push(new Ze(o.key,o.value,"zoom functions not supported"))),l!=="categorical"&&!I||o.value.property!==void 0||D.push(new Ze(o.key,o.value,'"property" property is required')),D;function O(Z){let H=[];const J=Z.value,oe=Z.key;if(Jt(J)!=="array")return[new Ze(oe,J,`array expected, ${Jt(J)} found`)];if(J.length!==2)return[new Ze(oe,J,`array length 2 expected, length ${J.length} found`)];if(I){if(Jt(J[0])!=="object")return[new Ze(oe,J,`object expected, ${Jt(J[0])} found`)];if(J[0].zoom===void 0)return[new Ze(oe,J,"object stop key must have zoom")];if(J[0].value===void 0)return[new Ze(oe,J,"object stop key must have value")];if(v&&v>In(J[0].zoom))return[new Ze(oe,J[0].zoom,"stop zoom values must appear in ascending order")];In(J[0].zoom)!==v&&(v=In(J[0].zoom),m=void 0,x={}),H=H.concat(Hr({key:`${oe}[0]`,value:J[0],valueSpec:{zoom:{}},validateSpec:Z.validateSpec,style:Z.style,styleSpec:Z.styleSpec,objectElementValidators:{zoom:Ml,value:U}}))}else H=H.concat(U({key:`${oe}[0]`,value:J[0],valueSpec:{},validateSpec:Z.validateSpec,style:Z.style,styleSpec:Z.styleSpec},J));return Nu(Do(J[1]))?H.concat([new Ze(`${oe}[1]`,J[1],"expressions are not allowed in function stops.")]):H.concat(Z.validateSpec({key:`${oe}[1]`,value:J[1],valueSpec:r,validateSpec:Z.validateSpec,style:Z.style,styleSpec:Z.styleSpec}))}function U(Z,H){const J=Jt(Z.value),oe=In(Z.value),he=Z.value!==null?Z.value:H;if(d){if(J!==d)return[new Ze(Z.key,he,`${J} stop domain type must match previous stop domain type ${d}`)]}else d=J;if(J!=="number"&&J!=="string"&&J!=="boolean")return[new Ze(Z.key,he,"stop domain value must be a number, string, or boolean")];if(J!=="number"&&l!=="categorical"){let xe=`number expected, ${J} found`;return ba(r)&&l===void 0&&(xe+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Ze(Z.key,he,xe)]}return l!=="categorical"||J!=="number"||isFinite(oe)&&Math.floor(oe)===oe?l!=="categorical"&&J==="number"&&m!==void 0&&oe<m?[new Ze(Z.key,he,"stop domain values must appear in ascending order")]:(m=oe,l==="categorical"&&oe in x?[new Ze(Z.key,he,"stop domain values must be unique")]:(x[oe]=!0,[])):[new Ze(Z.key,he,`integer expected, found ${oe}`)]}}function zo(o){const r=(o.expressionContext==="property"?Ih:Bu)(Do(o.value),o.valueSpec);if(r.result==="error")return r.value.map(d=>new Ze(`${o.key}${d.key}`,o.value,d.message));const l=r.value.expression||r.value._styleExpression.expression;if(o.expressionContext==="property"&&o.propertyKey==="text-font"&&!l.outputDefined())return[new Ze(o.key,o.value,`Invalid data expression for "${o.propertyKey}". Output values must be contained as literals within the expression.`)];if(o.expressionContext==="property"&&o.propertyType==="layout"&&!Tl(l))return[new Ze(o.key,o.value,'"feature-state" data expressions are not supported with layout properties.')];if(o.expressionContext==="filter"&&!Tl(l))return[new Ze(o.key,o.value,'"feature-state" data expressions are not supported with filters.')];if(o.expressionContext&&o.expressionContext.indexOf("cluster")===0){if(!Mu(l,["zoom","feature-state"]))return[new Ze(o.key,o.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(o.expressionContext==="cluster-initial"&&!Iu(l))return[new Ze(o.key,o.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Rl(o){const r=o.key,l=o.value,d=o.valueSpec,m=[];return Array.isArray(d.values)?d.values.indexOf(In(l))===-1&&m.push(new Ze(r,l,`expected one of [${d.values.join(", ")}], ${JSON.stringify(l)} found`)):Object.keys(d.values).indexOf(In(l))===-1&&m.push(new Ze(r,l,`expected one of [${Object.keys(d.values).join(", ")}], ${JSON.stringify(l)} found`)),m}function Ca(o){return kl(Do(o.value))?zo(ci({},o,{expressionContext:"filter",valueSpec:{value:"boolean"}})):up(o)}function up(o){const r=o.value,l=o.key;if(Jt(r)!=="array")return[new Ze(l,r,`array expected, ${Jt(r)} found`)];const d=o.styleSpec;let m,v=[];if(r.length<1)return[new Ze(l,r,"filter array must have at least 1 element")];switch(v=v.concat(Rl({key:`${l}[0]`,value:r[0],valueSpec:d.filter_operator,style:o.style,styleSpec:o.styleSpec})),In(r[0])){case"<":case"<=":case">":case">=":r.length>=2&&In(r[1])==="$type"&&v.push(new Ze(l,r,`"$type" cannot be use with operator "${r[0]}"`));case"==":case"!=":r.length!==3&&v.push(new Ze(l,r,`filter array for operator "${r[0]}" must have 3 elements`));case"in":case"!in":r.length>=2&&(m=Jt(r[1]),m!=="string"&&v.push(new Ze(`${l}[1]`,r[1],`string expected, ${m} found`)));for(let x=2;x<r.length;x++)m=Jt(r[x]),In(r[1])==="$type"?v=v.concat(Rl({key:`${l}[${x}]`,value:r[x],valueSpec:d.geometry_type,style:o.style,styleSpec:o.styleSpec})):m!=="string"&&m!=="number"&&m!=="boolean"&&v.push(new Ze(`${l}[${x}]`,r[x],`string, number, or boolean expected, ${m} found`));break;case"any":case"all":case"none":for(let x=1;x<r.length;x++)v=v.concat(up({key:`${l}[${x}]`,value:r[x],style:o.style,styleSpec:o.styleSpec}));break;case"has":case"!has":m=Jt(r[1]),r.length!==2?v.push(new Ze(l,r,`filter array for "${r[0]}" operator must have 2 elements`)):m!=="string"&&v.push(new Ze(`${l}[1]`,r[1],`string expected, ${m} found`));break;case"within":m=Jt(r[1]),r.length!==2?v.push(new Ze(l,r,`filter array for "${r[0]}" operator must have 2 elements`)):m!=="object"&&v.push(new Ze(`${l}[1]`,r[1],`object expected, ${m} found`))}return v}function cp(o,r){const l=o.key,d=o.validateSpec,m=o.style,v=o.styleSpec,x=o.value,S=o.objectKey,E=v[`${r}_${o.layerType}`];if(!E)return[];const I=S.match(/^(.*)-transition$/);if(r==="paint"&&I&&E[I[1]]&&E[I[1]].transition)return d({key:l,value:x,valueSpec:v.transition,style:m,styleSpec:v});const D=o.valueSpec||E[S];if(!D)return[new Ze(l,x,`unknown property "${S}"`)];let O;if(Jt(x)==="string"&&ba(D)&&!D.tokens&&(O=/^{([^}]+)}$/.exec(x)))return[new Ze(l,x,`"${S}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(O[1])} }\`.`)];const U=[];return o.layerType==="symbol"&&(S==="text-field"&&m&&!m.glyphs&&U.push(new Ze(l,x,'use of "text-field" requires a style "glyphs" property')),S==="text-font"&&Cn(Do(x))&&In(x.type)==="identity"&&U.push(new Ze(l,x,'"text-font" does not support identity functions'))),U.concat(d({key:o.key,value:x,valueSpec:D,style:m,styleSpec:v,expressionContext:"property",propertyType:r,propertyKey:S}))}function hp(o){return cp(o,"paint")}function dp(o){return cp(o,"layout")}function fp(o){let r=[];const l=o.value,d=o.key,m=o.style,v=o.styleSpec;l.type||l.ref||r.push(new Ze(d,l,'either "type" or "ref" is required'));let x=In(l.type);const S=In(l.ref);if(l.id){const E=In(l.id);for(let I=0;I<o.arrayIndex;I++){const D=m.layers[I];In(D.id)===E&&r.push(new Ze(d,l.id,`duplicate layer id "${l.id}", previously used at line ${D.id.__line__}`))}}if("ref"in l){let E;["type","source","source-layer","filter","layout"].forEach(I=>{I in l&&r.push(new Ze(d,l[I],`"${I}" is prohibited for ref layers`))}),m.layers.forEach(I=>{In(I.id)===S&&(E=I)}),E?E.ref?r.push(new Ze(d,l.ref,"ref cannot reference another ref layer")):x=In(E.type):r.push(new Ze(d,l.ref,`ref layer "${S}" not found`))}else if(x!=="background")if(l.source){const E=m.sources&&m.sources[l.source],I=E&&In(E.type);E?I==="vector"&&x==="raster"?r.push(new Ze(d,l.source,`layer "${l.id}" requires a raster source`)):I!=="raster-dem"&&x==="hillshade"?r.push(new Ze(d,l.source,`layer "${l.id}" requires a raster-dem source`)):I==="raster"&&x!=="raster"?r.push(new Ze(d,l.source,`layer "${l.id}" requires a vector source`)):I!=="vector"||l["source-layer"]?I==="raster-dem"&&x!=="hillshade"?r.push(new Ze(d,l.source,"raster-dem source can only be used with layer type 'hillshade'.")):x!=="line"||!l.paint||!l.paint["line-gradient"]||I==="geojson"&&E.lineMetrics||r.push(new Ze(d,l,`layer "${l.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):r.push(new Ze(d,l,`layer "${l.id}" must specify a "source-layer"`)):r.push(new Ze(d,l.source,`source "${l.source}" not found`))}else r.push(new Ze(d,l,'missing required property "source"'));return r=r.concat(Hr({key:d,value:l,valueSpec:v.layer,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,objectElementValidators:{"*":()=>[],type:()=>o.validateSpec({key:`${d}.type`,value:l.type,valueSpec:v.layer.type,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,object:l,objectKey:"type"}),filter:Ca,layout:E=>Hr({layer:l,key:E.key,value:E.value,style:E.style,styleSpec:E.styleSpec,validateSpec:E.validateSpec,objectElementValidators:{"*":I=>dp(ci({layerType:x},I))}}),paint:E=>Hr({layer:l,key:E.key,value:E.value,style:E.style,styleSpec:E.styleSpec,validateSpec:E.validateSpec,objectElementValidators:{"*":I=>hp(ci({layerType:x},I))}})}})),r}function cs(o){const r=o.value,l=o.key,d=Jt(r);return d!=="string"?[new Ze(l,r,`string expected, ${d} found`)]:[]}const Dl={promoteId:function({key:o,value:r}){if(Jt(r)==="string")return cs({key:o,value:r});{const l=[];for(const d in r)l.push(...cs({key:`${o}.${d}`,value:r[d]}));return l}}};function pi(o){const r=o.value,l=o.key,d=o.styleSpec,m=o.style,v=o.validateSpec;if(!r.type)return[new Ze(l,r,'"type" is required')];const x=In(r.type);let S;switch(x){case"vector":case"raster":return S=Hr({key:l,value:r,valueSpec:d[`source_${x.replace("-","_")}`],style:o.style,styleSpec:d,objectElementValidators:Dl,validateSpec:v}),S;case"raster-dem":return S=function(E){var I;const D=(I=E.sourceName)!==null&&I!==void 0?I:"",O=E.value,U=E.styleSpec,Z=U.source_raster_dem,H=E.style;let J=[];const oe=Jt(O);if(O===void 0)return J;if(oe!=="object")return J.push(new Ze("source_raster_dem",O,`object expected, ${oe} found`)),J;const he=In(O.encoding)==="custom",xe=["redFactor","greenFactor","blueFactor","baseShift"],fe=E.value.encoding?`"${E.value.encoding}"`:"Default";for(const be in O)!he&&xe.includes(be)?J.push(new Ze(be,O[be],`In "${D}": "${be}" is only valid when "encoding" is set to "custom". ${fe} encoding found`)):Z[be]?J=J.concat(E.validateSpec({key:be,value:O[be],valueSpec:Z[be],validateSpec:E.validateSpec,style:H,styleSpec:U})):J.push(new Ze(be,O[be],`unknown property "${be}"`));return J}({sourceName:l,value:r,style:o.style,styleSpec:d,validateSpec:v}),S;case"geojson":if(S=Hr({key:l,value:r,valueSpec:d.source_geojson,style:m,styleSpec:d,validateSpec:v,objectElementValidators:Dl}),r.cluster)for(const E in r.clusterProperties){const[I,D]=r.clusterProperties[E],O=typeof I=="string"?[I,["accumulated"],["get",E]]:I;S.push(...zo({key:`${l}.${E}.map`,value:D,validateSpec:v,expressionContext:"cluster-map"})),S.push(...zo({key:`${l}.${E}.reduce`,value:O,validateSpec:v,expressionContext:"cluster-reduce"}))}return S;case"video":return Hr({key:l,value:r,valueSpec:d.source_video,style:m,validateSpec:v,styleSpec:d});case"image":return Hr({key:l,value:r,valueSpec:d.source_image,style:m,validateSpec:v,styleSpec:d});case"canvas":return[new Ze(l,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Rl({key:`${l}.type`,value:r.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:m,validateSpec:v,styleSpec:d})}}function zl(o){const r=o.value,l=o.styleSpec,d=l.light,m=o.style;let v=[];const x=Jt(r);if(r===void 0)return v;if(x!=="object")return v=v.concat([new Ze("light",r,`object expected, ${x} found`)]),v;for(const S in r){const E=S.match(/^(.*)-transition$/);v=v.concat(E&&d[E[1]]&&d[E[1]].transition?o.validateSpec({key:S,value:r[S],valueSpec:l.transition,validateSpec:o.validateSpec,style:m,styleSpec:l}):d[S]?o.validateSpec({key:S,value:r[S],valueSpec:d[S],validateSpec:o.validateSpec,style:m,styleSpec:l}):[new Ze(S,r[S],`unknown property "${S}"`)])}return v}function pp(o){const r=o.value,l=o.styleSpec,d=l.terrain,m=o.style;let v=[];const x=Jt(r);if(r===void 0)return v;if(x!=="object")return v=v.concat([new Ze("terrain",r,`object expected, ${x} found`)]),v;for(const S in r)v=v.concat(d[S]?o.validateSpec({key:S,value:r[S],valueSpec:d[S],validateSpec:o.validateSpec,style:m,styleSpec:l}):[new Ze(S,r[S],`unknown property "${S}"`)]);return v}function mp(o){let r=[];const l=o.value,d=o.key;if(Array.isArray(l)){const m=[],v=[];for(const x in l)l[x].id&&m.includes(l[x].id)&&r.push(new Ze(d,l,`all the sprites' ids must be unique, but ${l[x].id} is duplicated`)),m.push(l[x].id),l[x].url&&v.includes(l[x].url)&&r.push(new Ze(d,l,`all the sprites' URLs must be unique, but ${l[x].url} is duplicated`)),v.push(l[x].url),r=r.concat(Hr({key:`${d}[${x}]`,value:l[x],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:o.validateSpec}));return r}return cs({key:d,value:l})}const gp={"*":()=>[],array:Sa,boolean:function(o){const r=o.value,l=o.key,d=Jt(r);return d!=="boolean"?[new Ze(l,r,`boolean expected, ${d} found`)]:[]},number:Ml,color:function(o){const r=o.key,l=o.value,d=Jt(l);return d!=="string"?[new Ze(r,l,`color expected, ${d} found`)]:sn.parse(String(l))?[]:[new Ze(r,l,`color expected, "${l}" found`)]},constants:lp,enum:Rl,filter:Ca,function:qu,layer:fp,object:Hr,source:pi,light:zl,terrain:pp,string:cs,formatted:function(o){return cs(o).length===0?[]:zo(o)},resolvedImage:function(o){return cs(o).length===0?[]:zo(o)},padding:function(o){const r=o.key,l=o.value;if(Jt(l)==="array"){if(l.length<1||l.length>4)return[new Ze(r,l,`padding requires 1 to 4 values; ${l.length} values found`)];const d={type:"number"};let m=[];for(let v=0;v<l.length;v++)m=m.concat(o.validateSpec({key:`${r}[${v}]`,value:l[v],validateSpec:o.validateSpec,valueSpec:d}));return m}return Ml({key:r,value:l,valueSpec:{}})},variableAnchorOffsetCollection:function(o){const r=o.key,l=o.value,d=Jt(l),m=o.styleSpec;if(d!=="array"||l.length<1||l.length%2!=0)return[new Ze(r,l,"variableAnchorOffsetCollection requires a non-empty array of even length")];let v=[];for(let x=0;x<l.length;x+=2)v=v.concat(Rl({key:`${r}[${x}]`,value:l[x],valueSpec:m.layout_symbol["text-anchor"]})),v=v.concat(Sa({key:`${r}[${x+1}]`,value:l[x+1],valueSpec:{length:2,value:"number"},validateSpec:o.validateSpec,style:o.style,styleSpec:m}));return v},sprite:mp};function zs(o){const r=o.value,l=o.valueSpec,d=o.styleSpec;return o.validateSpec=zs,l.expression&&Cn(In(r))?qu(o):l.expression&&Nu(Do(r))?zo(o):l.type&&gp[l.type]?gp[l.type](o):Hr(ci({},o,{valueSpec:l.type?d[l.type]:l}))}function yp(o){const r=o.value,l=o.key,d=cs(o);return d.length||(r.indexOf("{fontstack}")===-1&&d.push(new Ze(l,r,'"glyphs" url must include a "{fontstack}" token')),r.indexOf("{range}")===-1&&d.push(new Ze(l,r,'"glyphs" url must include a "{range}" token'))),d}function Li(o,r=ue){let l=[];return l=l.concat(zs({key:"",value:o,valueSpec:r.$root,styleSpec:r,style:o,validateSpec:zs,objectElementValidators:{glyphs:yp,"*":()=>[]}})),o.constants&&(l=l.concat(lp({key:"constants",value:o.constants,style:o,styleSpec:r,validateSpec:zs}))),Gu(l)}function Ls(o){return function(r){return o({...r,validateSpec:zs})}}function Gu(o){return[].concat(o).sort((r,l)=>r.line-l.line)}function Os(o){return function(...r){return Gu(o.apply(this,r))}}Li.source=Os(Ls(pi)),Li.sprite=Os(Ls(mp)),Li.glyphs=Os(Ls(yp)),Li.light=Os(Ls(zl)),Li.terrain=Os(Ls(pp)),Li.layer=Os(Ls(fp)),Li.filter=Os(Ls(Ca)),Li.paintProperty=Os(Ls(hp)),Li.layoutProperty=Os(Ls(dp));const Fs=Li,pv=Fs.light,Dh=Fs.paintProperty,vp=Fs.layoutProperty;function Zu(o,r){let l=!1;if(r&&r.length)for(const d of r)o.fire(new ge(new Error(d.message))),l=!0;return l}class Ta{constructor(r,l,d){const m=this.cells=[];if(r instanceof ArrayBuffer){this.arrayBuffer=r;const x=new Int32Array(this.arrayBuffer);r=x[0],this.d=(l=x[1])+2*(d=x[2]);for(let E=0;E<this.d*this.d;E++){const I=x[3+E],D=x[3+E+1];m.push(I===D?null:x.subarray(I,D))}const S=x[3+m.length+1];this.keys=x.subarray(x[3+m.length],S),this.bboxes=x.subarray(S),this.insert=this._insertReadonly}else{this.d=l+2*d;for(let x=0;x<this.d*this.d;x++)m.push([]);this.keys=[],this.bboxes=[]}this.n=l,this.extent=r,this.padding=d,this.scale=l/r,this.uid=0;const v=d/l*r;this.min=-v,this.max=r+v}insert(r,l,d,m,v){this._forEachCell(l,d,m,v,this._insertCell,this.uid++,void 0,void 0),this.keys.push(r),this.bboxes.push(l),this.bboxes.push(d),this.bboxes.push(m),this.bboxes.push(v)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(r,l,d,m,v,x){this.cells[v].push(x)}query(r,l,d,m,v){const x=this.min,S=this.max;if(r<=x&&l<=x&&S<=d&&S<=m&&!v)return Array.prototype.slice.call(this.keys);{const E=[];return this._forEachCell(r,l,d,m,this._queryCell,E,{},v),E}}_queryCell(r,l,d,m,v,x,S,E){const I=this.cells[v];if(I!==null){const D=this.keys,O=this.bboxes;for(let U=0;U<I.length;U++){const Z=I[U];if(S[Z]===void 0){const H=4*Z;(E?E(O[H+0],O[H+1],O[H+2],O[H+3]):r<=O[H+2]&&l<=O[H+3]&&d>=O[H+0]&&m>=O[H+1])?(S[Z]=!0,x.push(D[Z])):S[Z]=!1}}}}_forEachCell(r,l,d,m,v,x,S,E){const I=this._convertToCellCoord(r),D=this._convertToCellCoord(l),O=this._convertToCellCoord(d),U=this._convertToCellCoord(m);for(let Z=I;Z<=O;Z++)for(let H=D;H<=U;H++){const J=this.d*H+Z;if((!E||E(this._convertFromCellCoord(Z),this._convertFromCellCoord(H),this._convertFromCellCoord(Z+1),this._convertFromCellCoord(H+1)))&&v.call(this,r,l,d,m,J,x,S,E))return}}_convertFromCellCoord(r){return(r-this.padding)/this.scale}_convertToCellCoord(r){return Math.max(0,Math.min(this.d-1,Math.floor(r*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const r=this.cells,l=3+this.cells.length+1+1;let d=0;for(let x=0;x<this.cells.length;x++)d+=this.cells[x].length;const m=new Int32Array(l+d+this.keys.length+this.bboxes.length);m[0]=this.extent,m[1]=this.n,m[2]=this.padding;let v=l;for(let x=0;x<r.length;x++){const S=r[x];m[3+x]=v,m.set(S,v),v+=S.length}return m[3+r.length]=v,m.set(this.keys,v),v+=this.keys.length,m[3+r.length+1]=v,m.set(this.bboxes,v),v+=this.bboxes.length,m.buffer}static serialize(r,l){const d=r.toArrayBuffer();return l&&l.push(d),{buffer:d}}static deserialize(r){return new Ta(r.buffer)}}const Ns={};function st(o,r,l={}){if(Ns[o])throw new Error(`${o} is already registered.`);Object.defineProperty(r,"_classRegistryKey",{value:o,writeable:!1}),Ns[o]={klass:r,omit:l.omit||[],shallow:l.shallow||[]}}st("Object",Object),st("TransferableGridIndex",Ta),st("Color",sn),st("Error",Error),st("AJAXError",Ai),st("ResolvedImage",mr),st("StylePropertyFunction",Pl),st("StyleExpression",Ah,{omit:["_evaluator"]}),st("ZoomDependentExpression",Vu),st("ZoomConstantExpression",kh),st("CompoundExpression",zi,{omit:["_evaluate"]});for(const o in wa)wa[o]._classRegistryKey||st(`Expression_${o}`,wa[o]);function Wu(o){return o&&typeof ArrayBuffer<"u"&&(o instanceof ArrayBuffer||o.constructor&&o.constructor.name==="ArrayBuffer")}function uo(o,r){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob)return o;if(Wu(o)||ct(o))return r&&r.push(o),o;if(ArrayBuffer.isView(o)){const l=o;return r&&r.push(l.buffer),l}if(o instanceof ImageData)return r&&r.push(o.data.buffer),o;if(Array.isArray(o)){const l=[];for(const d of o)l.push(uo(d,r));return l}if(typeof o=="object"){const l=o.constructor,d=l._classRegistryKey;if(!d)throw new Error("can't serialize object of unregistered class");if(!Ns[d])throw new Error(`${d} is not registered.`);const m=l.serialize?l.serialize(o,r):{};if(l.serialize){if(r&&m===r[r.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const v in o){if(!o.hasOwnProperty(v)||Ns[d].omit.indexOf(v)>=0)continue;const x=o[v];m[v]=Ns[d].shallow.indexOf(v)>=0?x:uo(x,r)}o instanceof Error&&(m.message=o.message)}if(m.$name)throw new Error("$name property is reserved for worker serialization logic.");return d!=="Object"&&(m.$name=d),m}throw new Error("can't serialize object of type "+typeof o)}function Ea(o){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob||Wu(o)||ct(o)||ArrayBuffer.isView(o)||o instanceof ImageData)return o;if(Array.isArray(o))return o.map(Ea);if(typeof o=="object"){const r=o.$name||"Object";if(!Ns[r])throw new Error(`can't deserialize unregistered class ${r}`);const{klass:l}=Ns[r];if(!l)throw new Error(`can't deserialize unregistered class ${r}`);if(l.deserialize)return l.deserialize(o);const d=Object.create(l.prototype);for(const m of Object.keys(o)){if(m==="$name")continue;const v=o[m];d[m]=Ns[r].shallow.indexOf(m)>=0?v:Ea(v)}return d}throw new Error("can't deserialize object of type "+typeof o)}class _p{constructor(){this.first=!0}update(r,l){const d=Math.floor(r);return this.first?(this.first=!1,this.lastIntegerZoom=d,this.lastIntegerZoomTime=0,this.lastZoom=r,this.lastFloorZoom=d,!0):(this.lastFloorZoom>d?(this.lastIntegerZoom=d+1,this.lastIntegerZoomTime=l):this.lastFloorZoom<d&&(this.lastIntegerZoom=d,this.lastIntegerZoomTime=l),r!==this.lastZoom&&(this.lastZoom=r,this.lastFloorZoom=d,!0))}}const rt={"Latin-1 Supplement":o=>o>=128&&o<=255,Arabic:o=>o>=1536&&o<=1791,"Arabic Supplement":o=>o>=1872&&o<=1919,"Arabic Extended-A":o=>o>=2208&&o<=2303,"Hangul Jamo":o=>o>=4352&&o<=4607,"Unified Canadian Aboriginal Syllabics":o=>o>=5120&&o<=5759,Khmer:o=>o>=6016&&o<=6143,"Unified Canadian Aboriginal Syllabics Extended":o=>o>=6320&&o<=6399,"General Punctuation":o=>o>=8192&&o<=8303,"Letterlike Symbols":o=>o>=8448&&o<=8527,"Number Forms":o=>o>=8528&&o<=8591,"Miscellaneous Technical":o=>o>=8960&&o<=9215,"Control Pictures":o=>o>=9216&&o<=9279,"Optical Character Recognition":o=>o>=9280&&o<=9311,"Enclosed Alphanumerics":o=>o>=9312&&o<=9471,"Geometric Shapes":o=>o>=9632&&o<=9727,"Miscellaneous Symbols":o=>o>=9728&&o<=9983,"Miscellaneous Symbols and Arrows":o=>o>=11008&&o<=11263,"CJK Radicals Supplement":o=>o>=11904&&o<=12031,"Kangxi Radicals":o=>o>=12032&&o<=12255,"Ideographic Description Characters":o=>o>=12272&&o<=12287,"CJK Symbols and Punctuation":o=>o>=12288&&o<=12351,Hiragana:o=>o>=12352&&o<=12447,Katakana:o=>o>=12448&&o<=12543,Bopomofo:o=>o>=12544&&o<=12591,"Hangul Compatibility Jamo":o=>o>=12592&&o<=12687,Kanbun:o=>o>=12688&&o<=12703,"Bopomofo Extended":o=>o>=12704&&o<=12735,"CJK Strokes":o=>o>=12736&&o<=12783,"Katakana Phonetic Extensions":o=>o>=12784&&o<=12799,"Enclosed CJK Letters and Months":o=>o>=12800&&o<=13055,"CJK Compatibility":o=>o>=13056&&o<=13311,"CJK Unified Ideographs Extension A":o=>o>=13312&&o<=19903,"Yijing Hexagram Symbols":o=>o>=19904&&o<=19967,"CJK Unified Ideographs":o=>o>=19968&&o<=40959,"Yi Syllables":o=>o>=40960&&o<=42127,"Yi Radicals":o=>o>=42128&&o<=42191,"Hangul Jamo Extended-A":o=>o>=43360&&o<=43391,"Hangul Syllables":o=>o>=44032&&o<=55215,"Hangul Jamo Extended-B":o=>o>=55216&&o<=55295,"Private Use Area":o=>o>=57344&&o<=63743,"CJK Compatibility Ideographs":o=>o>=63744&&o<=64255,"Arabic Presentation Forms-A":o=>o>=64336&&o<=65023,"Vertical Forms":o=>o>=65040&&o<=65055,"CJK Compatibility Forms":o=>o>=65072&&o<=65103,"Small Form Variants":o=>o>=65104&&o<=65135,"Arabic Presentation Forms-B":o=>o>=65136&&o<=65279,"Halfwidth and Fullwidth Forms":o=>o>=65280&&o<=65519};function zh(o){for(const r of o)if(Oh(r.charCodeAt(0)))return!0;return!1}function Lh(o){for(const r of o)if(!mv(r.charCodeAt(0)))return!1;return!0}function mv(o){return!(rt.Arabic(o)||rt["Arabic Supplement"](o)||rt["Arabic Extended-A"](o)||rt["Arabic Presentation Forms-A"](o)||rt["Arabic Presentation Forms-B"](o))}function Oh(o){return!(o!==746&&o!==747&&(o<4352||!(rt["Bopomofo Extended"](o)||rt.Bopomofo(o)||rt["CJK Compatibility Forms"](o)&&!(o>=65097&&o<=65103)||rt["CJK Compatibility Ideographs"](o)||rt["CJK Compatibility"](o)||rt["CJK Radicals Supplement"](o)||rt["CJK Strokes"](o)||!(!rt["CJK Symbols and Punctuation"](o)||o>=12296&&o<=12305||o>=12308&&o<=12319||o===12336)||rt["CJK Unified Ideographs Extension A"](o)||rt["CJK Unified Ideographs"](o)||rt["Enclosed CJK Letters and Months"](o)||rt["Hangul Compatibility Jamo"](o)||rt["Hangul Jamo Extended-A"](o)||rt["Hangul Jamo Extended-B"](o)||rt["Hangul Jamo"](o)||rt["Hangul Syllables"](o)||rt.Hiragana(o)||rt["Ideographic Description Characters"](o)||rt.Kanbun(o)||rt["Kangxi Radicals"](o)||rt["Katakana Phonetic Extensions"](o)||rt.Katakana(o)&&o!==12540||!(!rt["Halfwidth and Fullwidth Forms"](o)||o===65288||o===65289||o===65293||o>=65306&&o<=65310||o===65339||o===65341||o===65343||o>=65371&&o<=65503||o===65507||o>=65512&&o<=65519)||!(!rt["Small Form Variants"](o)||o>=65112&&o<=65118||o>=65123&&o<=65126)||rt["Unified Canadian Aboriginal Syllabics"](o)||rt["Unified Canadian Aboriginal Syllabics Extended"](o)||rt["Vertical Forms"](o)||rt["Yijing Hexagram Symbols"](o)||rt["Yi Syllables"](o)||rt["Yi Radicals"](o))))}function xp(o){return!(Oh(o)||function(r){return!!(rt["Latin-1 Supplement"](r)&&(r===167||r===169||r===174||r===177||r===188||r===189||r===190||r===215||r===247)||rt["General Punctuation"](r)&&(r===8214||r===8224||r===8225||r===8240||r===8241||r===8251||r===8252||r===8258||r===8263||r===8264||r===8265||r===8273)||rt["Letterlike Symbols"](r)||rt["Number Forms"](r)||rt["Miscellaneous Technical"](r)&&(r>=8960&&r<=8967||r>=8972&&r<=8991||r>=8996&&r<=9e3||r===9003||r>=9085&&r<=9114||r>=9150&&r<=9165||r===9167||r>=9169&&r<=9179||r>=9186&&r<=9215)||rt["Control Pictures"](r)&&r!==9251||rt["Optical Character Recognition"](r)||rt["Enclosed Alphanumerics"](r)||rt["Geometric Shapes"](r)||rt["Miscellaneous Symbols"](r)&&!(r>=9754&&r<=9759)||rt["Miscellaneous Symbols and Arrows"](r)&&(r>=11026&&r<=11055||r>=11088&&r<=11097||r>=11192&&r<=11243)||rt["CJK Symbols and Punctuation"](r)||rt.Katakana(r)||rt["Private Use Area"](r)||rt["CJK Compatibility Forms"](r)||rt["Small Form Variants"](r)||rt["Halfwidth and Fullwidth Forms"](r)||r===8734||r===8756||r===8757||r>=9984&&r<=10087||r>=10102&&r<=10131||r===65532||r===65533)}(o))}function wp(o){return o>=1424&&o<=2303||rt["Arabic Presentation Forms-A"](o)||rt["Arabic Presentation Forms-B"](o)}function bp(o,r){return!(!r&&wp(o)||o>=2304&&o<=3583||o>=3840&&o<=4255||rt.Khmer(o))}function gv(o){for(const r of o)if(wp(r.charCodeAt(0)))return!0;return!1}const Fh="deferred",Nh="loading",Bh="loaded";let Vh=null,Kr="unavailable",co=null;const Ll=function(o){o&&typeof o=="string"&&o.indexOf("NetworkError")>-1&&(Kr="error"),Vh&&Vh(o)};function $h(){Ol.fire(new Ms("pluginStateChange",{pluginStatus:Kr,pluginURL:co}))}const Ol=new ke,jh=function(){return Kr},Sp=function(){if(Kr!==Fh||!co)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Kr=Nh,$h(),co&&no({url:co},o=>{o?Ll(o):(Kr=Bh,$h())})},mi={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Kr===Bh||mi.applyArabicShaping!=null,isLoading:()=>Kr===Nh,setState(o){if(!St())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");Kr=o.pluginStatus,co=o.pluginURL},isParsed(){if(!St())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return mi.applyArabicShaping!=null&&mi.processBidirectionalText!=null&&mi.processStyledBidirectionalText!=null},getPluginURL(){if(!St())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return co}};class fn{constructor(r,l){this.zoom=r,l?(this.now=l.now,this.fadeDuration=l.fadeDuration,this.zoomHistory=l.zoomHistory,this.transition=l.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new _p,this.transition={})}isSupportedScript(r){return function(l,d){for(const m of l)if(!bp(m.charCodeAt(0),d))return!1;return!0}(r,mi.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const r=this.zoom,l=r-Math.floor(r),d=this.crossFadingFactor();return r>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:l+(1-l)*d}:{fromScale:.5,toScale:1,t:1-(1-d)*l}}}class Hu{constructor(r,l){this.property=r,this.value=l,this.expression=function(d,m){if(Cn(d))return new Pl(d,m);if(Nu(d)){const v=Ih(d,m);if(v.result==="error")throw new Error(v.value.map(x=>`${x.key}: ${x.message}`).join(", "));return v.value}{let v=d;return m.type==="color"&&typeof d=="string"?v=sn.parse(d):m.type!=="padding"||typeof d!="number"&&!Array.isArray(d)?m.type==="variableAnchorOffsetCollection"&&Array.isArray(d)&&(v=Ri.parse(d)):v=hi.parse(d),{kind:"constant",evaluate:()=>v}}}(l===void 0?r.specification.default:l,r.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(r,l,d){return this.property.possiblyEvaluate(this,r,l,d)}}class Uh{constructor(r){this.property=r,this.value=new Hu(r,void 0)}transitioned(r,l){return new Tp(this.property,this.value,l,Se({},r.transition,this.transition),r.now)}untransitioned(){return new Tp(this.property,this.value,null,{},0)}}class Cp{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitionablePropertyValues)}getValue(r){return Ge(this._values[r].value.value)}setValue(r,l){Object.prototype.hasOwnProperty.call(this._values,r)||(this._values[r]=new Uh(this._values[r].property)),this._values[r].value=new Hu(this._values[r].property,l===null?void 0:Ge(l))}getTransition(r){return Ge(this._values[r].transition)}setTransition(r,l){Object.prototype.hasOwnProperty.call(this._values,r)||(this._values[r]=new Uh(this._values[r].property)),this._values[r].transition=Ge(l)||void 0}serialize(){const r={};for(const l of Object.keys(this._values)){const d=this.getValue(l);d!==void 0&&(r[l]=d);const m=this.getTransition(l);m!==void 0&&(r[`${l}-transition`]=m)}return r}transitioned(r,l){const d=new Ep(this._properties);for(const m of Object.keys(this._values))d._values[m]=this._values[m].transitioned(r,l._values[m]);return d}untransitioned(){const r=new Ep(this._properties);for(const l of Object.keys(this._values))r._values[l]=this._values[l].untransitioned();return r}}class Tp{constructor(r,l,d,m,v){this.property=r,this.value=l,this.begin=v+m.delay||0,this.end=this.begin+m.duration||0,r.specification.transition&&(m.delay||m.duration)&&(this.prior=d)}possiblyEvaluate(r,l,d){const m=r.now||0,v=this.value.possiblyEvaluate(r,l,d),x=this.prior;if(x){if(m>this.end)return this.prior=null,v;if(this.value.isDataDriven())return this.prior=null,v;if(m<this.begin)return x.possiblyEvaluate(r,l,d);{const S=(m-this.begin)/(this.end-this.begin);return this.property.interpolate(x.possiblyEvaluate(r,l,d),v,function(E){if(E<=0)return 0;if(E>=1)return 1;const I=E*E,D=I*E;return 4*(E<.5?D:3*(E-I)+D-.75)}(S))}}return v}}class Ep{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitioningPropertyValues)}possiblyEvaluate(r,l,d){const m=new Ku(this._properties);for(const v of Object.keys(this._values))m._values[v]=this._values[v].possiblyEvaluate(r,l,d);return m}hasTransition(){for(const r of Object.keys(this._values))if(this._values[r].prior)return!0;return!1}}class yv{constructor(r){this._properties=r,this._values=Object.create(r.defaultPropertyValues)}hasValue(r){return this._values[r].value!==void 0}getValue(r){return Ge(this._values[r].value)}setValue(r,l){this._values[r]=new Hu(this._values[r].property,l===null?void 0:Ge(l))}serialize(){const r={};for(const l of Object.keys(this._values)){const d=this.getValue(l);d!==void 0&&(r[l]=d)}return r}possiblyEvaluate(r,l,d){const m=new Ku(this._properties);for(const v of Object.keys(this._values))m._values[v]=this._values[v].possiblyEvaluate(r,l,d);return m}}class Dr{constructor(r,l,d){this.property=r,this.value=l,this.parameters=d}isConstant(){return this.value.kind==="constant"}constantOr(r){return this.value.kind==="constant"?this.value.value:r}evaluate(r,l,d,m){return this.property.evaluate(this.value,this.parameters,r,l,d,m)}}class Ku{constructor(r){this._properties=r,this._values=Object.create(r.defaultPossiblyEvaluatedValues)}get(r){return this._values[r]}}class pt{constructor(r){this.specification=r}possiblyEvaluate(r,l){if(r.isDataDriven())throw new Error("Value should not be data driven");return r.expression.evaluate(l)}interpolate(r,l,d){const m=di[this.specification.type];return m?m(r,l,d):r}}class Ct{constructor(r,l){this.specification=r,this.overrides=l}possiblyEvaluate(r,l,d,m){return new Dr(this,r.expression.kind==="constant"||r.expression.kind==="camera"?{kind:"constant",value:r.expression.evaluate(l,null,{},d,m)}:r.expression,l)}interpolate(r,l,d){if(r.value.kind!=="constant"||l.value.kind!=="constant")return r;if(r.value.value===void 0||l.value.value===void 0)return new Dr(this,{kind:"constant",value:void 0},r.parameters);const m=di[this.specification.type];if(m){const v=m(r.value.value,l.value.value,d);return new Dr(this,{kind:"constant",value:v},r.parameters)}return r}evaluate(r,l,d,m,v,x){return r.kind==="constant"?r.value:r.evaluate(l,d,m,v,x)}}class Fl extends Ct{possiblyEvaluate(r,l,d,m){if(r.value===void 0)return new Dr(this,{kind:"constant",value:void 0},l);if(r.expression.kind==="constant"){const v=r.expression.evaluate(l,null,{},d,m),x=r.property.specification.type==="resolvedImage"&&typeof v!="string"?v.name:v,S=this._calculate(x,x,x,l);return new Dr(this,{kind:"constant",value:S},l)}if(r.expression.kind==="camera"){const v=this._calculate(r.expression.evaluate({zoom:l.zoom-1}),r.expression.evaluate({zoom:l.zoom}),r.expression.evaluate({zoom:l.zoom+1}),l);return new Dr(this,{kind:"constant",value:v},l)}return new Dr(this,r.expression,l)}evaluate(r,l,d,m,v,x){if(r.kind==="source"){const S=r.evaluate(l,d,m,v,x);return this._calculate(S,S,S,l)}return r.kind==="composite"?this._calculate(r.evaluate({zoom:Math.floor(l.zoom)-1},d,m),r.evaluate({zoom:Math.floor(l.zoom)},d,m),r.evaluate({zoom:Math.floor(l.zoom)+1},d,m),l):r.value}_calculate(r,l,d,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:r,to:l}:{from:d,to:l}}interpolate(r){return r}}class qh{constructor(r){this.specification=r}possiblyEvaluate(r,l,d,m){if(r.value!==void 0){if(r.expression.kind==="constant"){const v=r.expression.evaluate(l,null,{},d,m);return this._calculate(v,v,v,l)}return this._calculate(r.expression.evaluate(new fn(Math.floor(l.zoom-1),l)),r.expression.evaluate(new fn(Math.floor(l.zoom),l)),r.expression.evaluate(new fn(Math.floor(l.zoom+1),l)),l)}}_calculate(r,l,d,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:r,to:l}:{from:d,to:l}}interpolate(r){return r}}class Gh{constructor(r){this.specification=r}possiblyEvaluate(r,l,d,m){return!!r.expression.evaluate(l,null,{},d,m)}interpolate(){return!1}}class $n{constructor(r){this.properties=r,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const l in r){const d=r[l];d.specification.overridable&&this.overridableProperties.push(l);const m=this.defaultPropertyValues[l]=new Hu(d,void 0),v=this.defaultTransitionablePropertyValues[l]=new Uh(d);this.defaultTransitioningPropertyValues[l]=v.untransitioned(),this.defaultPossiblyEvaluatedValues[l]=m.possiblyEvaluate({})}}}st("DataDrivenProperty",Ct),st("DataConstantProperty",pt),st("CrossFadedDataDrivenProperty",Fl),st("CrossFadedProperty",qh),st("ColorRampProperty",Gh);const Zh="-transition";class Oi extends ke{constructor(r,l){if(super(),this.id=r.id,this.type=r.type,this._featureFilter={filter:()=>!0,needGeometry:!1},r.type!=="custom"&&(this.metadata=r.metadata,this.minzoom=r.minzoom,this.maxzoom=r.maxzoom,r.type!=="background"&&(this.source=r.source,this.sourceLayer=r["source-layer"],this.filter=r.filter),l.layout&&(this._unevaluatedLayout=new yv(l.layout)),l.paint)){this._transitionablePaint=new Cp(l.paint);for(const d in r.paint)this.setPaintProperty(d,r.paint[d],{validate:!1});for(const d in r.layout)this.setLayoutProperty(d,r.layout[d],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Ku(l.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(r){return r==="visibility"?this.visibility:this._unevaluatedLayout.getValue(r)}setLayoutProperty(r,l,d={}){l!=null&&this._validate(vp,`layers.${this.id}.layout.${r}`,r,l,d)||(r!=="visibility"?this._unevaluatedLayout.setValue(r,l):this.visibility=l)}getPaintProperty(r){return r.endsWith(Zh)?this._transitionablePaint.getTransition(r.slice(0,-11)):this._transitionablePaint.getValue(r)}setPaintProperty(r,l,d={}){if(l!=null&&this._validate(Dh,`layers.${this.id}.paint.${r}`,r,l,d))return!1;if(r.endsWith(Zh))return this._transitionablePaint.setTransition(r.slice(0,-11),l||void 0),!1;{const m=this._transitionablePaint._values[r],v=m.property.specification["property-type"]==="cross-faded-data-driven",x=m.value.isDataDriven(),S=m.value;this._transitionablePaint.setValue(r,l),this._handleSpecialPaintPropertyUpdate(r);const E=this._transitionablePaint._values[r].value;return E.isDataDriven()||x||v||this._handleOverridablePaintPropertyUpdate(r,S,E)}}_handleSpecialPaintPropertyUpdate(r){}_handleOverridablePaintPropertyUpdate(r,l,d){return!1}isHidden(r){return!!(this.minzoom&&r<this.minzoom)||!!(this.maxzoom&&r>=this.maxzoom)||this.visibility==="none"}updateTransitions(r){this._transitioningPaint=this._transitionablePaint.transitioned(r,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(r,l){r.getCrossfadeParameters&&(this._crossfadeParameters=r.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(r,void 0,l)),this.paint=this._transitioningPaint.possiblyEvaluate(r,void 0,l)}serialize(){const r={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(r.layout=r.layout||{},r.layout.visibility=this.visibility),Et(r,(l,d)=>!(l===void 0||d==="layout"&&!Object.keys(l).length||d==="paint"&&!Object.keys(l).length))}_validate(r,l,d,m,v={}){return(!v||v.validate!==!1)&&Zu(this,r.call(Fs,{key:l,layerType:this.type,objectKey:d,value:m,styleSpec:ue,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const r in this.paint._values){const l=this.paint.get(r);if(l instanceof Dr&&ba(l.property.specification)&&(l.value.kind==="source"||l.value.kind==="composite")&&l.value.isStateDependent)return!0}return!1}}const Pp={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Lo{constructor(r,l){this._structArray=r,this._pos1=l*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Mn{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(r,l){return r._trim(),l&&(r.isTransferred=!0,l.push(r.arrayBuffer)),{length:r.length,arrayBuffer:r.arrayBuffer}}static deserialize(r){const l=Object.create(this.prototype);return l.arrayBuffer=r.arrayBuffer,l.length=r.length,l.capacity=r.arrayBuffer.byteLength/l.bytesPerElement,l._refreshViews(),l}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(r){this.reserve(r),this.length=r}reserve(r){if(r>this.capacity){this.capacity=Math.max(r,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const l=this.uint8;this._refreshViews(),l&&this.uint8.set(l)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function En(o,r=1){let l=0,d=0;return{members:o.map(m=>{const v=Pp[m.type].BYTES_PER_ELEMENT,x=l=Pa(l,Math.max(r,v)),S=m.components||1;return d=Math.max(d,v),l+=v*S,{name:m.name,type:m.type,components:S,offset:x}}),size:Pa(l,Math.max(d,r)),alignment:r}}function Pa(o,r){return Math.ceil(o/r)*r}class Nl extends Mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,l){const d=this.length;return this.resize(d+1),this.emplace(d,r,l)}emplace(r,l,d){const m=2*r;return this.int16[m+0]=l,this.int16[m+1]=d,r}}Nl.prototype.bytesPerElement=4,st("StructArrayLayout2i4",Nl);class Bl extends Mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,l,d){const m=this.length;return this.resize(m+1),this.emplace(m,r,l,d)}emplace(r,l,d,m){const v=3*r;return this.int16[v+0]=l,this.int16[v+1]=d,this.int16[v+2]=m,r}}Bl.prototype.bytesPerElement=6,st("StructArrayLayout3i6",Bl);class Oo extends Mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,l,d,m){const v=this.length;return this.resize(v+1),this.emplace(v,r,l,d,m)}emplace(r,l,d,m,v){const x=4*r;return this.int16[x+0]=l,this.int16[x+1]=d,this.int16[x+2]=m,this.int16[x+3]=v,r}}Oo.prototype.bytesPerElement=8,st("StructArrayLayout4i8",Oo);class Wh extends Mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,l,d,m,v,x){const S=this.length;return this.resize(S+1),this.emplace(S,r,l,d,m,v,x)}emplace(r,l,d,m,v,x,S){const E=6*r;return this.int16[E+0]=l,this.int16[E+1]=d,this.int16[E+2]=m,this.int16[E+3]=v,this.int16[E+4]=x,this.int16[E+5]=S,r}}Wh.prototype.bytesPerElement=12,st("StructArrayLayout2i4i12",Wh);class Hh extends Mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,l,d,m,v,x){const S=this.length;return this.resize(S+1),this.emplace(S,r,l,d,m,v,x)}emplace(r,l,d,m,v,x,S){const E=4*r,I=8*r;return this.int16[E+0]=l,this.int16[E+1]=d,this.uint8[I+4]=m,this.uint8[I+5]=v,this.uint8[I+6]=x,this.uint8[I+7]=S,r}}Hh.prototype.bytesPerElement=8,st("StructArrayLayout2i4ub8",Hh);class Aa extends Mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,l){const d=this.length;return this.resize(d+1),this.emplace(d,r,l)}emplace(r,l,d){const m=2*r;return this.float32[m+0]=l,this.float32[m+1]=d,r}}Aa.prototype.bytesPerElement=8,st("StructArrayLayout2f8",Aa);class Kh extends Mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,l,d,m,v,x,S,E,I,D){const O=this.length;return this.resize(O+1),this.emplace(O,r,l,d,m,v,x,S,E,I,D)}emplace(r,l,d,m,v,x,S,E,I,D,O){const U=10*r;return this.uint16[U+0]=l,this.uint16[U+1]=d,this.uint16[U+2]=m,this.uint16[U+3]=v,this.uint16[U+4]=x,this.uint16[U+5]=S,this.uint16[U+6]=E,this.uint16[U+7]=I,this.uint16[U+8]=D,this.uint16[U+9]=O,r}}Kh.prototype.bytesPerElement=20,st("StructArrayLayout10ui20",Kh);class Xh extends Mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,l,d,m,v,x,S,E,I,D,O,U){const Z=this.length;return this.resize(Z+1),this.emplace(Z,r,l,d,m,v,x,S,E,I,D,O,U)}emplace(r,l,d,m,v,x,S,E,I,D,O,U,Z){const H=12*r;return this.int16[H+0]=l,this.int16[H+1]=d,this.int16[H+2]=m,this.int16[H+3]=v,this.uint16[H+4]=x,this.uint16[H+5]=S,this.uint16[H+6]=E,this.uint16[H+7]=I,this.int16[H+8]=D,this.int16[H+9]=O,this.int16[H+10]=U,this.int16[H+11]=Z,r}}Xh.prototype.bytesPerElement=24,st("StructArrayLayout4i4ui4i24",Xh);class en extends Mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,l,d){const m=this.length;return this.resize(m+1),this.emplace(m,r,l,d)}emplace(r,l,d,m){const v=3*r;return this.float32[v+0]=l,this.float32[v+1]=d,this.float32[v+2]=m,r}}en.prototype.bytesPerElement=12,st("StructArrayLayout3f12",en);class y extends Mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(r){const l=this.length;return this.resize(l+1),this.emplace(l,r)}emplace(r,l){return this.uint32[1*r+0]=l,r}}y.prototype.bytesPerElement=4,st("StructArrayLayout1ul4",y);class i extends Mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,l,d,m,v,x,S,E,I){const D=this.length;return this.resize(D+1),this.emplace(D,r,l,d,m,v,x,S,E,I)}emplace(r,l,d,m,v,x,S,E,I,D){const O=10*r,U=5*r;return this.int16[O+0]=l,this.int16[O+1]=d,this.int16[O+2]=m,this.int16[O+3]=v,this.int16[O+4]=x,this.int16[O+5]=S,this.uint32[U+3]=E,this.uint16[O+8]=I,this.uint16[O+9]=D,r}}i.prototype.bytesPerElement=20,st("StructArrayLayout6i1ul2ui20",i);class c extends Mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,l,d,m,v,x){const S=this.length;return this.resize(S+1),this.emplace(S,r,l,d,m,v,x)}emplace(r,l,d,m,v,x,S){const E=6*r;return this.int16[E+0]=l,this.int16[E+1]=d,this.int16[E+2]=m,this.int16[E+3]=v,this.int16[E+4]=x,this.int16[E+5]=S,r}}c.prototype.bytesPerElement=12,st("StructArrayLayout2i2i2i12",c);class p extends Mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,l,d,m,v){const x=this.length;return this.resize(x+1),this.emplace(x,r,l,d,m,v)}emplace(r,l,d,m,v,x){const S=4*r,E=8*r;return this.float32[S+0]=l,this.float32[S+1]=d,this.float32[S+2]=m,this.int16[E+6]=v,this.int16[E+7]=x,r}}p.prototype.bytesPerElement=16,st("StructArrayLayout2f1f2i16",p);class g extends Mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,l,d,m){const v=this.length;return this.resize(v+1),this.emplace(v,r,l,d,m)}emplace(r,l,d,m,v){const x=12*r,S=3*r;return this.uint8[x+0]=l,this.uint8[x+1]=d,this.float32[S+1]=m,this.float32[S+2]=v,r}}g.prototype.bytesPerElement=12,st("StructArrayLayout2ub2f12",g);class _ extends Mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,l,d){const m=this.length;return this.resize(m+1),this.emplace(m,r,l,d)}emplace(r,l,d,m){const v=3*r;return this.uint16[v+0]=l,this.uint16[v+1]=d,this.uint16[v+2]=m,r}}_.prototype.bytesPerElement=6,st("StructArrayLayout3ui6",_);class C extends Mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,l,d,m,v,x,S,E,I,D,O,U,Z,H,J,oe,he){const xe=this.length;return this.resize(xe+1),this.emplace(xe,r,l,d,m,v,x,S,E,I,D,O,U,Z,H,J,oe,he)}emplace(r,l,d,m,v,x,S,E,I,D,O,U,Z,H,J,oe,he,xe){const fe=24*r,be=12*r,Ee=48*r;return this.int16[fe+0]=l,this.int16[fe+1]=d,this.uint16[fe+2]=m,this.uint16[fe+3]=v,this.uint32[be+2]=x,this.uint32[be+3]=S,this.uint32[be+4]=E,this.uint16[fe+10]=I,this.uint16[fe+11]=D,this.uint16[fe+12]=O,this.float32[be+7]=U,this.float32[be+8]=Z,this.uint8[Ee+36]=H,this.uint8[Ee+37]=J,this.uint8[Ee+38]=oe,this.uint32[be+10]=he,this.int16[fe+22]=xe,r}}C.prototype.bytesPerElement=48,st("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",C);class T extends Mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,l,d,m,v,x,S,E,I,D,O,U,Z,H,J,oe,he,xe,fe,be,Ee,Le,it,ut,nt,et,We,ot){const Ke=this.length;return this.resize(Ke+1),this.emplace(Ke,r,l,d,m,v,x,S,E,I,D,O,U,Z,H,J,oe,he,xe,fe,be,Ee,Le,it,ut,nt,et,We,ot)}emplace(r,l,d,m,v,x,S,E,I,D,O,U,Z,H,J,oe,he,xe,fe,be,Ee,Le,it,ut,nt,et,We,ot,Ke){const $e=32*r,_t=16*r;return this.int16[$e+0]=l,this.int16[$e+1]=d,this.int16[$e+2]=m,this.int16[$e+3]=v,this.int16[$e+4]=x,this.int16[$e+5]=S,this.int16[$e+6]=E,this.int16[$e+7]=I,this.uint16[$e+8]=D,this.uint16[$e+9]=O,this.uint16[$e+10]=U,this.uint16[$e+11]=Z,this.uint16[$e+12]=H,this.uint16[$e+13]=J,this.uint16[$e+14]=oe,this.uint16[$e+15]=he,this.uint16[$e+16]=xe,this.uint16[$e+17]=fe,this.uint16[$e+18]=be,this.uint16[$e+19]=Ee,this.uint16[$e+20]=Le,this.uint16[$e+21]=it,this.uint16[$e+22]=ut,this.uint32[_t+12]=nt,this.float32[_t+13]=et,this.float32[_t+14]=We,this.uint16[$e+30]=ot,this.uint16[$e+31]=Ke,r}}T.prototype.bytesPerElement=64,st("StructArrayLayout8i15ui1ul2f2ui64",T);class k extends Mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r){const l=this.length;return this.resize(l+1),this.emplace(l,r)}emplace(r,l){return this.float32[1*r+0]=l,r}}k.prototype.bytesPerElement=4,st("StructArrayLayout1f4",k);class R extends Mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,l,d){const m=this.length;return this.resize(m+1),this.emplace(m,r,l,d)}emplace(r,l,d,m){const v=3*r;return this.uint16[6*r+0]=l,this.float32[v+1]=d,this.float32[v+2]=m,r}}R.prototype.bytesPerElement=12,st("StructArrayLayout1ui2f12",R);class z extends Mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,l,d){const m=this.length;return this.resize(m+1),this.emplace(m,r,l,d)}emplace(r,l,d,m){const v=4*r;return this.uint32[2*r+0]=l,this.uint16[v+2]=d,this.uint16[v+3]=m,r}}z.prototype.bytesPerElement=8,st("StructArrayLayout1ul2ui8",z);class L extends Mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,l){const d=this.length;return this.resize(d+1),this.emplace(d,r,l)}emplace(r,l,d){const m=2*r;return this.uint16[m+0]=l,this.uint16[m+1]=d,r}}L.prototype.bytesPerElement=4,st("StructArrayLayout2ui4",L);class G extends Mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r){const l=this.length;return this.resize(l+1),this.emplace(l,r)}emplace(r,l){return this.uint16[1*r+0]=l,r}}G.prototype.bytesPerElement=2,st("StructArrayLayout1ui2",G);class te extends Mn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,l,d,m){const v=this.length;return this.resize(v+1),this.emplace(v,r,l,d,m)}emplace(r,l,d,m,v){const x=4*r;return this.float32[x+0]=l,this.float32[x+1]=d,this.float32[x+2]=m,this.float32[x+3]=v,r}}te.prototype.bytesPerElement=16,st("StructArrayLayout4f16",te);class ee extends Lo{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new M(this.anchorPointX,this.anchorPointY)}}ee.prototype.size=20;class ie extends i{get(r){return new ee(this,r)}}st("CollisionBoxArray",ie);class Y extends Lo{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(r){this._structArray.uint8[this._pos1+37]=r}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(r){this._structArray.uint8[this._pos1+38]=r}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(r){this._structArray.uint32[this._pos4+10]=r}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Y.prototype.size=48;class ye extends C{get(r){return new Y(this,r)}}st("PlacedSymbolArray",ye);class Te extends Lo{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(r){this._structArray.uint32[this._pos4+12]=r}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}Te.prototype.size=64;class ce extends T{get(r){return new Te(this,r)}}st("SymbolInstanceArray",ce);class ve extends k{getoffsetX(r){return this.float32[1*r+0]}}st("GlyphOffsetArray",ve);class Pe extends Bl{getx(r){return this.int16[3*r+0]}gety(r){return this.int16[3*r+1]}gettileUnitDistanceFromAnchor(r){return this.int16[3*r+2]}}st("SymbolLineVertexArray",Pe);class Ae extends Lo{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Ae.prototype.size=12;class De extends R{get(r){return new Ae(this,r)}}st("TextAnchorOffsetArray",De);class Ve extends Lo{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Ve.prototype.size=8;class Fe extends z{get(r){return new Ve(this,r)}}st("FeatureIndexArray",Fe);class Ue extends Nl{}class lt extends Nl{}class $t extends Nl{}class Je extends Wh{}class Tt extends Hh{}class ht extends Aa{}class on extends Kh{}class Bt extends Xh{}class Lt extends en{}class jt extends y{}class On extends c{}class cn extends g{}class gr extends _{}class Jn extends L{}const jn=En([{name:"a_pos",components:2,type:"Int16"}],4),{members:gi}=jn;class pn{constructor(r=[]){this.segments=r}prepareSegment(r,l,d,m){let v=this.segments[this.segments.length-1];return r>pn.MAX_VERTEX_ARRAY_LENGTH&&xt(`Max vertices per segment is ${pn.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${r}`),(!v||v.vertexLength+r>pn.MAX_VERTEX_ARRAY_LENGTH||v.sortKey!==m)&&(v={vertexOffset:l.length,primitiveOffset:d.length,vertexLength:0,primitiveLength:0},m!==void 0&&(v.sortKey=m),this.segments.push(v)),v}get(){return this.segments}destroy(){for(const r of this.segments)for(const l in r.vaos)r.vaos[l].destroy()}static simpleSegment(r,l,d,m){return new pn([{vertexOffset:r,primitiveOffset:l,vertexLength:d,primitiveLength:m,vaos:{},sortKey:0}])}}function hs(o,r){return 256*(o=Ce(Math.floor(o),0,255))+Ce(Math.floor(r),0,255)}pn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,st("SegmentVector",pn);const ds=En([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var ho={exports:{}},Fo={exports:{}};Fo.exports=function(o,r){var l,d,m,v,x,S,E,I;for(d=o.length-(l=3&o.length),m=r,x=3432918353,S=461845907,I=0;I<d;)E=255&o.charCodeAt(I)|(255&o.charCodeAt(++I))<<8|(255&o.charCodeAt(++I))<<16|(255&o.charCodeAt(++I))<<24,++I,m=27492+(65535&(v=5*(65535&(m=(m^=E=(65535&(E=(E=(65535&E)*x+(((E>>>16)*x&65535)<<16)&4294967295)<<15|E>>>17))*S+(((E>>>16)*S&65535)<<16)&4294967295)<<13|m>>>19))+((5*(m>>>16)&65535)<<16)&4294967295))+((58964+(v>>>16)&65535)<<16);switch(E=0,l){case 3:E^=(255&o.charCodeAt(I+2))<<16;case 2:E^=(255&o.charCodeAt(I+1))<<8;case 1:m^=E=(65535&(E=(E=(65535&(E^=255&o.charCodeAt(I)))*x+(((E>>>16)*x&65535)<<16)&4294967295)<<15|E>>>17))*S+(((E>>>16)*S&65535)<<16)&4294967295}return m^=o.length,m=2246822507*(65535&(m^=m>>>16))+((2246822507*(m>>>16)&65535)<<16)&4294967295,m=3266489909*(65535&(m^=m>>>13))+((3266489909*(m>>>16)&65535)<<16)&4294967295,(m^=m>>>16)>>>0};var ka=Fo.exports,Tr={exports:{}};Tr.exports=function(o,r){for(var l,d=o.length,m=r^d,v=0;d>=4;)l=1540483477*(65535&(l=255&o.charCodeAt(v)|(255&o.charCodeAt(++v))<<8|(255&o.charCodeAt(++v))<<16|(255&o.charCodeAt(++v))<<24))+((1540483477*(l>>>16)&65535)<<16),m=1540483477*(65535&m)+((1540483477*(m>>>16)&65535)<<16)^(l=1540483477*(65535&(l^=l>>>24))+((1540483477*(l>>>16)&65535)<<16)),d-=4,++v;switch(d){case 3:m^=(255&o.charCodeAt(v+2))<<16;case 2:m^=(255&o.charCodeAt(v+1))<<8;case 1:m=1540483477*(65535&(m^=255&o.charCodeAt(v)))+((1540483477*(m>>>16)&65535)<<16)}return m=1540483477*(65535&(m^=m>>>13))+((1540483477*(m>>>16)&65535)<<16),(m^=m>>>15)>>>0};var yr=ka,zr=Tr.exports;ho.exports=yr,ho.exports.murmur3=yr,ho.exports.murmur2=zr;var No=b(ho.exports);class Fn{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(r,l,d,m){this.ids.push(er(r)),this.positions.push(l,d,m)}getPositions(r){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const l=er(r);let d=0,m=this.ids.length-1;for(;d<m;){const x=d+m>>1;this.ids[x]>=l?m=x:d=x+1}const v=[];for(;this.ids[d]===l;)v.push({index:this.positions[3*d],start:this.positions[3*d+1],end:this.positions[3*d+2]}),d++;return v}static serialize(r,l){const d=new Float64Array(r.ids),m=new Uint32Array(r.positions);return Xr(d,m,0,d.length-1),l&&l.push(d.buffer,m.buffer),{ids:d,positions:m}}static deserialize(r){const l=new Fn;return l.ids=r.ids,l.positions=r.positions,l.indexed=!0,l}}function er(o){const r=+o;return!isNaN(r)&&r<=Number.MAX_SAFE_INTEGER?r:No(String(o))}function Xr(o,r,l,d){for(;l<d;){const m=o[l+d>>1];let v=l-1,x=d+1;for(;;){do v++;while(o[v]<m);do x--;while(o[x]>m);if(v>=x)break;Nn(o,v,x),Nn(r,3*v,3*x),Nn(r,3*v+1,3*x+1),Nn(r,3*v+2,3*x+2)}x-l<d-x?(Xr(o,r,l,x),l=x+1):(Xr(o,r,x+1,d),d=x)}}function Nn(o,r,l){const d=o[r];o[r]=o[l],o[l]=d}st("FeaturePositionMap",Fn);class Bo{constructor(r,l){this.gl=r.gl,this.location=l}}class Xu extends Bo{constructor(r,l){super(r,l),this.current=0}set(r){this.current!==r&&(this.current=r,this.gl.uniform1f(this.location,r))}}class Ap extends Bo{constructor(r,l){super(r,l),this.current=[0,0,0,0]}set(r){r[0]===this.current[0]&&r[1]===this.current[1]&&r[2]===this.current[2]&&r[3]===this.current[3]||(this.current=r,this.gl.uniform4f(this.location,r[0],r[1],r[2],r[3]))}}class kp extends Bo{constructor(r,l){super(r,l),this.current=sn.transparent}set(r){r.r===this.current.r&&r.g===this.current.g&&r.b===this.current.b&&r.a===this.current.a||(this.current=r,this.gl.uniform4f(this.location,r.r,r.g,r.b,r.a))}}const vv=new Float32Array(16);function Qh(o){return[hs(255*o.r,255*o.g),hs(255*o.b,255*o.a)]}class fs{constructor(r,l,d){this.value=r,this.uniformNames=l.map(m=>`u_${m}`),this.type=d}setUniform(r,l,d){r.set(d.constantOr(this.value))}getBinding(r,l,d){return this.type==="color"?new kp(r,l):new Xu(r,l)}}class Vo{constructor(r,l){this.uniformNames=l.map(d=>`u_${d}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(r,l){this.pixelRatioFrom=l.pixelRatio,this.pixelRatioTo=r.pixelRatio,this.patternFrom=l.tlbr,this.patternTo=r.tlbr}setUniform(r,l,d,m){const v=m==="u_pattern_to"?this.patternTo:m==="u_pattern_from"?this.patternFrom:m==="u_pixel_ratio_to"?this.pixelRatioTo:m==="u_pixel_ratio_from"?this.pixelRatioFrom:null;v&&r.set(v)}getBinding(r,l,d){return d.substr(0,9)==="u_pattern"?new Ap(r,l):new Xu(r,l)}}class ps{constructor(r,l,d,m){this.expression=r,this.type=d,this.maxValue=0,this.paintVertexAttributes=l.map(v=>({name:`a_${v}`,type:"Float32",components:d==="color"?2:1,offset:0})),this.paintVertexArray=new m}populatePaintArray(r,l,d,m,v){const x=this.paintVertexArray.length,S=this.expression.evaluate(new fn(0),l,{},m,[],v);this.paintVertexArray.resize(r),this._setPaintValue(x,r,S)}updatePaintArray(r,l,d,m){const v=this.expression.evaluate({zoom:0},d,m);this._setPaintValue(r,l,v)}_setPaintValue(r,l,d){if(this.type==="color"){const m=Qh(d);for(let v=r;v<l;v++)this.paintVertexArray.emplace(v,m[0],m[1])}else{for(let m=r;m<l;m++)this.paintVertexArray.emplace(m,d);this.maxValue=Math.max(this.maxValue,Math.abs(d))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Fi{constructor(r,l,d,m,v,x){this.expression=r,this.uniformNames=l.map(S=>`u_${S}_t`),this.type=d,this.useIntegerZoom=m,this.zoom=v,this.maxValue=0,this.paintVertexAttributes=l.map(S=>({name:`a_${S}`,type:"Float32",components:d==="color"?4:2,offset:0})),this.paintVertexArray=new x}populatePaintArray(r,l,d,m,v){const x=this.expression.evaluate(new fn(this.zoom),l,{},m,[],v),S=this.expression.evaluate(new fn(this.zoom+1),l,{},m,[],v),E=this.paintVertexArray.length;this.paintVertexArray.resize(r),this._setPaintValue(E,r,x,S)}updatePaintArray(r,l,d,m){const v=this.expression.evaluate({zoom:this.zoom},d,m),x=this.expression.evaluate({zoom:this.zoom+1},d,m);this._setPaintValue(r,l,v,x)}_setPaintValue(r,l,d,m){if(this.type==="color"){const v=Qh(d),x=Qh(m);for(let S=r;S<l;S++)this.paintVertexArray.emplace(S,v[0],v[1],x[0],x[1])}else{for(let v=r;v<l;v++)this.paintVertexArray.emplace(v,d,m);this.maxValue=Math.max(this.maxValue,Math.abs(d),Math.abs(m))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(r,l){const d=this.useIntegerZoom?Math.floor(l.zoom):l.zoom,m=Ce(this.expression.interpolationFactor(d,this.zoom,this.zoom+1),0,1);r.set(m)}getBinding(r,l,d){return new Xu(r,l)}}class ms{constructor(r,l,d,m,v,x){this.expression=r,this.type=l,this.useIntegerZoom=d,this.zoom=m,this.layerId=x,this.zoomInPaintVertexArray=new v,this.zoomOutPaintVertexArray=new v}populatePaintArray(r,l,d){const m=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(r),this.zoomOutPaintVertexArray.resize(r),this._setPaintValues(m,r,l.patterns&&l.patterns[this.layerId],d)}updatePaintArray(r,l,d,m,v){this._setPaintValues(r,l,d.patterns&&d.patterns[this.layerId],v)}_setPaintValues(r,l,d,m){if(!m||!d)return;const{min:v,mid:x,max:S}=d,E=m[v],I=m[x],D=m[S];if(E&&I&&D)for(let O=r;O<l;O++)this.zoomInPaintVertexArray.emplace(O,I.tl[0],I.tl[1],I.br[0],I.br[1],E.tl[0],E.tl[1],E.br[0],E.br[1],I.pixelRatio,E.pixelRatio),this.zoomOutPaintVertexArray.emplace(O,I.tl[0],I.tl[1],I.br[0],I.br[1],D.tl[0],D.tl[1],D.br[0],D.br[1],I.pixelRatio,D.pixelRatio)}upload(r){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=r.createVertexBuffer(this.zoomInPaintVertexArray,ds.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=r.createVertexBuffer(this.zoomOutPaintVertexArray,ds.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Yh{constructor(r,l,d){this.binders={},this._buffers=[];const m=[];for(const v in r.paint._values){if(!d(v))continue;const x=r.paint.get(v);if(!(x instanceof Dr&&ba(x.property.specification)))continue;const S=rz(v,r.type),E=x.value,I=x.property.specification.type,D=x.property.useIntegerZoom,O=x.property.specification["property-type"],U=O==="cross-faded"||O==="cross-faded-data-driven";if(E.kind==="constant")this.binders[v]=U?new Vo(E.value,S):new fs(E.value,S,I),m.push(`/u_${v}`);else if(E.kind==="source"||U){const Z=Rb(v,I,"source");this.binders[v]=U?new ms(E,I,D,l,Z,r.id):new ps(E,S,I,Z),m.push(`/a_${v}`)}else{const Z=Rb(v,I,"composite");this.binders[v]=new Fi(E,S,I,D,l,Z),m.push(`/z_${v}`)}}this.cacheKey=m.sort().join("")}getMaxValue(r){const l=this.binders[r];return l instanceof ps||l instanceof Fi?l.maxValue:0}populatePaintArrays(r,l,d,m,v){for(const x in this.binders){const S=this.binders[x];(S instanceof ps||S instanceof Fi||S instanceof ms)&&S.populatePaintArray(r,l,d,m,v)}}setConstantPatternPositions(r,l){for(const d in this.binders){const m=this.binders[d];m instanceof Vo&&m.setConstantPatternPositions(r,l)}}updatePaintArrays(r,l,d,m,v){let x=!1;for(const S in r){const E=l.getPositions(S);for(const I of E){const D=d.feature(I.index);for(const O in this.binders){const U=this.binders[O];if((U instanceof ps||U instanceof Fi||U instanceof ms)&&U.expression.isStateDependent===!0){const Z=m.paint.get(O);U.expression=Z.value,U.updatePaintArray(I.start,I.end,D,r[S],v),x=!0}}}}return x}defines(){const r=[];for(const l in this.binders){const d=this.binders[l];(d instanceof fs||d instanceof Vo)&&r.push(...d.uniformNames.map(m=>`#define HAS_UNIFORM_${m}`))}return r}getBinderAttributes(){const r=[];for(const l in this.binders){const d=this.binders[l];if(d instanceof ps||d instanceof Fi)for(let m=0;m<d.paintVertexAttributes.length;m++)r.push(d.paintVertexAttributes[m].name);else if(d instanceof ms)for(let m=0;m<ds.members.length;m++)r.push(ds.members[m].name)}return r}getBinderUniforms(){const r=[];for(const l in this.binders){const d=this.binders[l];if(d instanceof fs||d instanceof Vo||d instanceof Fi)for(const m of d.uniformNames)r.push(m)}return r}getPaintVertexBuffers(){return this._buffers}getUniforms(r,l){const d=[];for(const m in this.binders){const v=this.binders[m];if(v instanceof fs||v instanceof Vo||v instanceof Fi){for(const x of v.uniformNames)if(l[x]){const S=v.getBinding(r,l[x],x);d.push({name:x,property:m,binding:S})}}}return d}setUniforms(r,l,d,m){for(const{name:v,property:x,binding:S}of l)this.binders[x].setUniform(S,m,d.get(x),v)}updatePaintBuffers(r){this._buffers=[];for(const l in this.binders){const d=this.binders[l];if(r&&d instanceof ms){const m=r.fromScale===2?d.zoomInPaintVertexBuffer:d.zoomOutPaintVertexBuffer;m&&this._buffers.push(m)}else(d instanceof ps||d instanceof Fi)&&d.paintVertexBuffer&&this._buffers.push(d.paintVertexBuffer)}}upload(r){for(const l in this.binders){const d=this.binders[l];(d instanceof ps||d instanceof Fi||d instanceof ms)&&d.upload(r)}this.updatePaintBuffers()}destroy(){for(const r in this.binders){const l=this.binders[r];(l instanceof ps||l instanceof Fi||l instanceof ms)&&l.destroy()}}}class Bs{constructor(r,l,d=()=>!0){this.programConfigurations={};for(const m of r)this.programConfigurations[m.id]=new Yh(m,l,d);this.needsUpload=!1,this._featureMap=new Fn,this._bufferOffset=0}populatePaintArrays(r,l,d,m,v,x){for(const S in this.programConfigurations)this.programConfigurations[S].populatePaintArrays(r,l,m,v,x);l.id!==void 0&&this._featureMap.add(l.id,d,this._bufferOffset,r),this._bufferOffset=r,this.needsUpload=!0}updatePaintArrays(r,l,d,m){for(const v of d)this.needsUpload=this.programConfigurations[v.id].updatePaintArrays(r,this._featureMap,l,v,m)||this.needsUpload}get(r){return this.programConfigurations[r]}upload(r){if(this.needsUpload){for(const l in this.programConfigurations)this.programConfigurations[l].upload(r);this.needsUpload=!1}}destroy(){for(const r in this.programConfigurations)this.programConfigurations[r].destroy()}}function rz(o,r){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[o]||[o.replace(`${r}-`,"").replace(/-/g,"_")]}function Rb(o,r,l){const d={color:{source:Aa,composite:te},number:{source:k,composite:Aa}},m=function(v){return{"line-pattern":{source:on,composite:on},"fill-pattern":{source:on,composite:on},"fill-extrusion-pattern":{source:on,composite:on}}[v]}(o);return m&&m[l]||d[r][l]}st("ConstantBinder",fs),st("CrossFadedConstantBinder",Vo),st("SourceExpressionBinder",ps),st("CrossFadedCompositeBinder",ms),st("CompositeExpressionBinder",Fi),st("ProgramConfiguration",Yh,{omit:["_buffers"]}),st("ProgramConfigurationSet",Bs);const Xn=8192,_v=Math.pow(2,14)-1,Db=-_v-1;function Vl(o){const r=Xn/o.extent,l=o.loadGeometry();for(let d=0;d<l.length;d++){const m=l[d];for(let v=0;v<m.length;v++){const x=m[v],S=Math.round(x.x*r),E=Math.round(x.y*r);x.x=Ce(S,Db,_v),x.y=Ce(E,Db,_v),(S<x.x||S>x.x+1||E<x.y||E>x.y+1)&&xt("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return l}function $l(o,r){return{type:o.type,id:o.id,properties:o.properties,geometry:r?Vl(o):[]}}function Ip(o,r,l,d,m){o.emplaceBack(2*r+(d+1)/2,2*l+(m+1)/2)}class xv{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(l=>l.id),this.index=r.index,this.hasPattern=!1,this.layoutVertexArray=new lt,this.indexArray=new gr,this.segments=new pn,this.programConfigurations=new Bs(r.layers,r.zoom),this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(r,l,d){const m=this.layers[0],v=[];let x=null,S=!1;m.type==="circle"&&(x=m.layout.get("circle-sort-key"),S=!x.isConstant());for(const{feature:E,id:I,index:D,sourceLayerIndex:O}of r){const U=this.layers[0]._featureFilter.needGeometry,Z=$l(E,U);if(!this.layers[0]._featureFilter.filter(new fn(this.zoom),Z,d))continue;const H=S?x.evaluate(Z,{},d):void 0,J={id:I,properties:E.properties,type:E.type,sourceLayerIndex:O,index:D,geometry:U?Z.geometry:Vl(E),patterns:{},sortKey:H};v.push(J)}S&&v.sort((E,I)=>E.sortKey-I.sortKey);for(const E of v){const{geometry:I,index:D,sourceLayerIndex:O}=E,U=r[D].feature;this.addFeature(E,I,D,d),l.featureIndex.insert(U,I,D,O,this.index)}}update(r,l,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,l,this.stateDependentLayers,d)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,gi),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(r,l,d,m){for(const v of l)for(const x of v){const S=x.x,E=x.y;if(S<0||S>=Xn||E<0||E>=Xn)continue;const I=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,r.sortKey),D=I.vertexLength;Ip(this.layoutVertexArray,S,E,-1,-1),Ip(this.layoutVertexArray,S,E,1,-1),Ip(this.layoutVertexArray,S,E,1,1),Ip(this.layoutVertexArray,S,E,-1,1),this.indexArray.emplaceBack(D,D+1,D+2),this.indexArray.emplaceBack(D,D+3,D+2),I.vertexLength+=4,I.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,d,{},m)}}function zb(o,r){for(let l=0;l<o.length;l++)if(Qu(r,o[l]))return!0;for(let l=0;l<r.length;l++)if(Qu(o,r[l]))return!0;return!!wv(o,r)}function iz(o,r,l){return!!Qu(o,r)||!!bv(r,o,l)}function Lb(o,r){if(o.length===1)return Fb(r,o[0]);for(let l=0;l<r.length;l++){const d=r[l];for(let m=0;m<d.length;m++)if(Qu(o,d[m]))return!0}for(let l=0;l<o.length;l++)if(Fb(r,o[l]))return!0;for(let l=0;l<r.length;l++)if(wv(o,r[l]))return!0;return!1}function sz(o,r,l){if(o.length>1){if(wv(o,r))return!0;for(let d=0;d<r.length;d++)if(bv(r[d],o,l))return!0}for(let d=0;d<o.length;d++)if(bv(o[d],r,l))return!0;return!1}function wv(o,r){if(o.length===0||r.length===0)return!1;for(let l=0;l<o.length-1;l++){const d=o[l],m=o[l+1];for(let v=0;v<r.length-1;v++)if(oz(d,m,r[v],r[v+1]))return!0}return!1}function oz(o,r,l,d){return Ot(o,l,d)!==Ot(r,l,d)&&Ot(o,r,l)!==Ot(o,r,d)}function bv(o,r,l){const d=l*l;if(r.length===1)return o.distSqr(r[0])<d;for(let m=1;m<r.length;m++)if(Ob(o,r[m-1],r[m])<d)return!0;return!1}function Ob(o,r,l){const d=r.distSqr(l);if(d===0)return o.distSqr(r);const m=((o.x-r.x)*(l.x-r.x)+(o.y-r.y)*(l.y-r.y))/d;return o.distSqr(m<0?r:m>1?l:l.sub(r)._mult(m)._add(r))}function Fb(o,r){let l,d,m,v=!1;for(let x=0;x<o.length;x++){l=o[x];for(let S=0,E=l.length-1;S<l.length;E=S++)d=l[S],m=l[E],d.y>r.y!=m.y>r.y&&r.x<(m.x-d.x)*(r.y-d.y)/(m.y-d.y)+d.x&&(v=!v)}return v}function Qu(o,r){let l=!1;for(let d=0,m=o.length-1;d<o.length;m=d++){const v=o[d],x=o[m];v.y>r.y!=x.y>r.y&&r.x<(x.x-v.x)*(r.y-v.y)/(x.y-v.y)+v.x&&(l=!l)}return l}function az(o,r,l){const d=l[0],m=l[2];if(o.x<d.x&&r.x<d.x||o.x>m.x&&r.x>m.x||o.y<d.y&&r.y<d.y||o.y>m.y&&r.y>m.y)return!1;const v=Ot(o,r,l[0]);return v!==Ot(o,r,l[1])||v!==Ot(o,r,l[2])||v!==Ot(o,r,l[3])}function Jh(o,r,l){const d=r.paint.get(o).value;return d.kind==="constant"?d.value:l.programConfigurations.get(r.id).getMaxValue(o)}function Mp(o){return Math.sqrt(o[0]*o[0]+o[1]*o[1])}function Rp(o,r,l,d,m){if(!r[0]&&!r[1])return o;const v=M.convert(r)._mult(m);l==="viewport"&&v._rotate(-d);const x=[];for(let S=0;S<o.length;S++)x.push(o[S].sub(v));return x}let Nb,Bb;st("CircleBucket",xv,{omit:["layers"]});var lz={get paint(){return Bb=Bb||new $n({"circle-radius":new Ct(ue.paint_circle["circle-radius"]),"circle-color":new Ct(ue.paint_circle["circle-color"]),"circle-blur":new Ct(ue.paint_circle["circle-blur"]),"circle-opacity":new Ct(ue.paint_circle["circle-opacity"]),"circle-translate":new pt(ue.paint_circle["circle-translate"]),"circle-translate-anchor":new pt(ue.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new pt(ue.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new pt(ue.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Ct(ue.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Ct(ue.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Ct(ue.paint_circle["circle-stroke-opacity"])})},get layout(){return Nb=Nb||new $n({"circle-sort-key":new Ct(ue.layout_circle["circle-sort-key"])})}},Qr=1e-6,Yu=typeof Float32Array<"u"?Float32Array:Array;function Sv(o){return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}function Vb(o,r,l){var d=r[0],m=r[1],v=r[2],x=r[3],S=r[4],E=r[5],I=r[6],D=r[7],O=r[8],U=r[9],Z=r[10],H=r[11],J=r[12],oe=r[13],he=r[14],xe=r[15],fe=l[0],be=l[1],Ee=l[2],Le=l[3];return o[0]=fe*d+be*S+Ee*O+Le*J,o[1]=fe*m+be*E+Ee*U+Le*oe,o[2]=fe*v+be*I+Ee*Z+Le*he,o[3]=fe*x+be*D+Ee*H+Le*xe,o[4]=(fe=l[4])*d+(be=l[5])*S+(Ee=l[6])*O+(Le=l[7])*J,o[5]=fe*m+be*E+Ee*U+Le*oe,o[6]=fe*v+be*I+Ee*Z+Le*he,o[7]=fe*x+be*D+Ee*H+Le*xe,o[8]=(fe=l[8])*d+(be=l[9])*S+(Ee=l[10])*O+(Le=l[11])*J,o[9]=fe*m+be*E+Ee*U+Le*oe,o[10]=fe*v+be*I+Ee*Z+Le*he,o[11]=fe*x+be*D+Ee*H+Le*xe,o[12]=(fe=l[12])*d+(be=l[13])*S+(Ee=l[14])*O+(Le=l[15])*J,o[13]=fe*m+be*E+Ee*U+Le*oe,o[14]=fe*v+be*I+Ee*Z+Le*he,o[15]=fe*x+be*D+Ee*H+Le*xe,o}Math.hypot||(Math.hypot=function(){for(var o=0,r=arguments.length;r--;)o+=arguments[r]*arguments[r];return Math.sqrt(o)});var ed,uz=Vb;function Dp(o,r,l){var d=r[0],m=r[1],v=r[2],x=r[3];return o[0]=l[0]*d+l[4]*m+l[8]*v+l[12]*x,o[1]=l[1]*d+l[5]*m+l[9]*v+l[13]*x,o[2]=l[2]*d+l[6]*m+l[10]*v+l[14]*x,o[3]=l[3]*d+l[7]*m+l[11]*v+l[15]*x,o}ed=new Yu(4),Yu!=Float32Array&&(ed[0]=0,ed[1]=0,ed[2]=0,ed[3]=0);class cz extends Oi{constructor(r){super(r,lz)}createBucket(r){return new xv(r)}queryRadius(r){const l=r;return Jh("circle-radius",this,l)+Jh("circle-stroke-width",this,l)+Mp(this.paint.get("circle-translate"))}queryIntersectsFeature(r,l,d,m,v,x,S,E){const I=Rp(r,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),x.angle,S),D=this.paint.get("circle-radius").evaluate(l,d)+this.paint.get("circle-stroke-width").evaluate(l,d),O=this.paint.get("circle-pitch-alignment")==="map",U=O?I:function(H,J){return H.map(oe=>$b(oe,J))}(I,E),Z=O?D*S:D;for(const H of m)for(const J of H){const oe=O?J:$b(J,E);let he=Z;const xe=Dp([],[J.x,J.y,0,1],E);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?he*=xe[3]/x.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(he*=x.cameraToCenterDistance/xe[3]),iz(U,oe,he))return!0}return!1}}function $b(o,r){const l=Dp([],[o.x,o.y,0,1],r);return new M(l[0]/l[3],l[1]/l[3])}class jb extends xv{}let Ub;st("HeatmapBucket",jb,{omit:["layers"]});var hz={get paint(){return Ub=Ub||new $n({"heatmap-radius":new Ct(ue.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Ct(ue.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new pt(ue.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Gh(ue.paint_heatmap["heatmap-color"]),"heatmap-opacity":new pt(ue.paint_heatmap["heatmap-opacity"])})}};function Cv(o,{width:r,height:l},d,m){if(m){if(m instanceof Uint8ClampedArray)m=new Uint8Array(m.buffer);else if(m.length!==r*l*d)throw new RangeError(`mismatched image size. expected: ${m.length} but got: ${r*l*d}`)}else m=new Uint8Array(r*l*d);return o.width=r,o.height=l,o.data=m,o}function qb(o,{width:r,height:l},d){if(r===o.width&&l===o.height)return;const m=Cv({},{width:r,height:l},d);Tv(o,m,{x:0,y:0},{x:0,y:0},{width:Math.min(o.width,r),height:Math.min(o.height,l)},d),o.width=r,o.height=l,o.data=m.data}function Tv(o,r,l,d,m,v){if(m.width===0||m.height===0)return r;if(m.width>o.width||m.height>o.height||l.x>o.width-m.width||l.y>o.height-m.height)throw new RangeError("out of range source coordinates for image copy");if(m.width>r.width||m.height>r.height||d.x>r.width-m.width||d.y>r.height-m.height)throw new RangeError("out of range destination coordinates for image copy");const x=o.data,S=r.data;if(x===S)throw new Error("srcData equals dstData, so image is already copied");for(let E=0;E<m.height;E++){const I=((l.y+E)*o.width+l.x)*v,D=((d.y+E)*r.width+d.x)*v;for(let O=0;O<m.width*v;O++)S[D+O]=x[I+O]}return r}class td{constructor(r,l){Cv(this,r,1,l)}resize(r){qb(this,r,1)}clone(){return new td({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,l,d,m,v){Tv(r,l,d,m,v,1)}}class Zi{constructor(r,l){Cv(this,r,4,l)}resize(r){qb(this,r,4)}replace(r,l){l?this.data.set(r):this.data=r instanceof Uint8ClampedArray?new Uint8Array(r.buffer):r}clone(){return new Zi({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,l,d,m,v){Tv(r,l,d,m,v,4)}}function Gb(o){const r={},l=o.resolution||256,d=o.clips?o.clips.length:1,m=o.image||new Zi({width:l,height:d});if(Math.log(l)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${l}`);const v=(x,S,E)=>{r[o.evaluationKey]=E;const I=o.expression.evaluate(r);m.data[x+S+0]=Math.floor(255*I.r/I.a),m.data[x+S+1]=Math.floor(255*I.g/I.a),m.data[x+S+2]=Math.floor(255*I.b/I.a),m.data[x+S+3]=Math.floor(255*I.a)};if(o.clips)for(let x=0,S=0;x<d;++x,S+=4*l)for(let E=0,I=0;E<l;E++,I+=4){const D=E/(l-1),{start:O,end:U}=o.clips[x];v(S,I,O*(1-D)+U*D)}else for(let x=0,S=0;x<l;x++,S+=4)v(0,S,x/(l-1));return m}st("AlphaImage",td),st("RGBAImage",Zi);class dz extends Oi{createBucket(r){return new jb(r)}constructor(r){super(r,hz),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(r){r==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Gb({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let Zb;var fz={get paint(){return Zb=Zb||new $n({"hillshade-illumination-direction":new pt(ue.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new pt(ue.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new pt(ue.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new pt(ue.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new pt(ue.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new pt(ue.paint_hillshade["hillshade-accent-color"])})}};class pz extends Oi{constructor(r){super(r,fz)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const mz=En([{name:"a_pos",components:2,type:"Int16"}],4),{members:gz}=mz;var Ev={exports:{}};function zp(o,r,l){l=l||2;var d,m,v,x,S,E,I,D=r&&r.length,O=D?r[0]*l:o.length,U=Wb(o,0,O,l,!0),Z=[];if(!U||U.next===U.prev)return Z;if(D&&(U=function(J,oe,he,xe){var fe,be,Ee,Le=[];for(fe=0,be=oe.length;fe<be;fe++)(Ee=Wb(J,oe[fe]*xe,fe<be-1?oe[fe+1]*xe:J.length,xe,!1))===Ee.next&&(Ee.steiner=!0),Le.push(Cz(Ee));for(Le.sort(wz),fe=0;fe<Le.length;fe++)he=bz(Le[fe],he);return he}(o,r,U,l)),o.length>80*l){d=v=o[0],m=x=o[1];for(var H=l;H<O;H+=l)(S=o[H])<d&&(d=S),(E=o[H+1])<m&&(m=E),S>v&&(v=S),E>x&&(x=E);I=(I=Math.max(v-d,x-m))!==0?32767/I:0}return nd(U,Z,l,d,m,I,0),Z}function Wb(o,r,l,d,m){var v,x;if(m===kv(o,r,l,d)>0)for(v=r;v<l;v+=d)x=Xb(v,o[v],o[v+1],x);else for(v=l-d;v>=r;v-=d)x=Xb(v,o[v],o[v+1],x);return x&&Lp(x,x.next)&&(id(x),x=x.next),x}function jl(o,r){if(!o)return o;r||(r=o);var l,d=o;do if(l=!1,d.steiner||!Lp(d,d.next)&&Un(d.prev,d,d.next)!==0)d=d.next;else{if(id(d),(d=r=d.prev)===d.next)break;l=!0}while(l||d!==r);return r}function nd(o,r,l,d,m,v,x){if(o){!x&&v&&function(D,O,U,Z){var H=D;do H.z===0&&(H.z=Pv(H.x,H.y,O,U,Z)),H.prevZ=H.prev,H.nextZ=H.next,H=H.next;while(H!==D);H.prevZ.nextZ=null,H.prevZ=null,function(J){var oe,he,xe,fe,be,Ee,Le,it,ut=1;do{for(he=J,J=null,be=null,Ee=0;he;){for(Ee++,xe=he,Le=0,oe=0;oe<ut&&(Le++,xe=xe.nextZ);oe++);for(it=ut;Le>0||it>0&&xe;)Le!==0&&(it===0||!xe||he.z<=xe.z)?(fe=he,he=he.nextZ,Le--):(fe=xe,xe=xe.nextZ,it--),be?be.nextZ=fe:J=fe,fe.prevZ=be,be=fe;he=xe}be.nextZ=null,ut*=2}while(Ee>1)}(H)}(o,d,m,v);for(var S,E,I=o;o.prev!==o.next;)if(S=o.prev,E=o.next,v?vz(o,d,m,v):yz(o))r.push(S.i/l|0),r.push(o.i/l|0),r.push(E.i/l|0),id(o),o=E.next,I=E.next;else if((o=E)===I){x?x===1?nd(o=_z(jl(o),r,l),r,l,d,m,v,2):x===2&&xz(o,r,l,d,m,v):nd(jl(o),r,l,d,m,v,1);break}}}function yz(o){var r=o.prev,l=o,d=o.next;if(Un(r,l,d)>=0)return!1;for(var m=r.x,v=l.x,x=d.x,S=r.y,E=l.y,I=d.y,D=m<v?m<x?m:x:v<x?v:x,O=S<E?S<I?S:I:E<I?E:I,U=m>v?m>x?m:x:v>x?v:x,Z=S>E?S>I?S:I:E>I?E:I,H=d.next;H!==r;){if(H.x>=D&&H.x<=U&&H.y>=O&&H.y<=Z&&Ju(m,S,v,E,x,I,H.x,H.y)&&Un(H.prev,H,H.next)>=0)return!1;H=H.next}return!0}function vz(o,r,l,d){var m=o.prev,v=o,x=o.next;if(Un(m,v,x)>=0)return!1;for(var S=m.x,E=v.x,I=x.x,D=m.y,O=v.y,U=x.y,Z=S<E?S<I?S:I:E<I?E:I,H=D<O?D<U?D:U:O<U?O:U,J=S>E?S>I?S:I:E>I?E:I,oe=D>O?D>U?D:U:O>U?O:U,he=Pv(Z,H,r,l,d),xe=Pv(J,oe,r,l,d),fe=o.prevZ,be=o.nextZ;fe&&fe.z>=he&&be&&be.z<=xe;){if(fe.x>=Z&&fe.x<=J&&fe.y>=H&&fe.y<=oe&&fe!==m&&fe!==x&&Ju(S,D,E,O,I,U,fe.x,fe.y)&&Un(fe.prev,fe,fe.next)>=0||(fe=fe.prevZ,be.x>=Z&&be.x<=J&&be.y>=H&&be.y<=oe&&be!==m&&be!==x&&Ju(S,D,E,O,I,U,be.x,be.y)&&Un(be.prev,be,be.next)>=0))return!1;be=be.nextZ}for(;fe&&fe.z>=he;){if(fe.x>=Z&&fe.x<=J&&fe.y>=H&&fe.y<=oe&&fe!==m&&fe!==x&&Ju(S,D,E,O,I,U,fe.x,fe.y)&&Un(fe.prev,fe,fe.next)>=0)return!1;fe=fe.prevZ}for(;be&&be.z<=xe;){if(be.x>=Z&&be.x<=J&&be.y>=H&&be.y<=oe&&be!==m&&be!==x&&Ju(S,D,E,O,I,U,be.x,be.y)&&Un(be.prev,be,be.next)>=0)return!1;be=be.nextZ}return!0}function _z(o,r,l){var d=o;do{var m=d.prev,v=d.next.next;!Lp(m,v)&&Hb(m,d,d.next,v)&&rd(m,v)&&rd(v,m)&&(r.push(m.i/l|0),r.push(d.i/l|0),r.push(v.i/l|0),id(d),id(d.next),d=o=v),d=d.next}while(d!==o);return jl(d)}function xz(o,r,l,d,m,v){var x=o;do{for(var S=x.next.next;S!==x.prev;){if(x.i!==S.i&&Tz(x,S)){var E=Kb(x,S);return x=jl(x,x.next),E=jl(E,E.next),nd(x,r,l,d,m,v,0),void nd(E,r,l,d,m,v,0)}S=S.next}x=x.next}while(x!==o)}function wz(o,r){return o.x-r.x}function bz(o,r){var l=function(m,v){var x,S=v,E=m.x,I=m.y,D=-1/0;do{if(I<=S.y&&I>=S.next.y&&S.next.y!==S.y){var O=S.x+(I-S.y)*(S.next.x-S.x)/(S.next.y-S.y);if(O<=E&&O>D&&(D=O,x=S.x<S.next.x?S:S.next,O===E))return x}S=S.next}while(S!==v);if(!x)return null;var U,Z=x,H=x.x,J=x.y,oe=1/0;S=x;do E>=S.x&&S.x>=H&&E!==S.x&&Ju(I<J?E:D,I,H,J,I<J?D:E,I,S.x,S.y)&&(U=Math.abs(I-S.y)/(E-S.x),rd(S,m)&&(U<oe||U===oe&&(S.x>x.x||S.x===x.x&&Sz(x,S)))&&(x=S,oe=U)),S=S.next;while(S!==Z);return x}(o,r);if(!l)return r;var d=Kb(l,o);return jl(d,d.next),jl(l,l.next)}function Sz(o,r){return Un(o.prev,o,r.prev)<0&&Un(r.next,o,o.next)<0}function Pv(o,r,l,d,m){return(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-l)*m|0)|o<<8))|o<<4))|o<<2))|o<<1))|(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=(r-d)*m|0)|r<<8))|r<<4))|r<<2))|r<<1))<<1}function Cz(o){var r=o,l=o;do(r.x<l.x||r.x===l.x&&r.y<l.y)&&(l=r),r=r.next;while(r!==o);return l}function Ju(o,r,l,d,m,v,x,S){return(m-x)*(r-S)>=(o-x)*(v-S)&&(o-x)*(d-S)>=(l-x)*(r-S)&&(l-x)*(v-S)>=(m-x)*(d-S)}function Tz(o,r){return o.next.i!==r.i&&o.prev.i!==r.i&&!function(l,d){var m=l;do{if(m.i!==l.i&&m.next.i!==l.i&&m.i!==d.i&&m.next.i!==d.i&&Hb(m,m.next,l,d))return!0;m=m.next}while(m!==l);return!1}(o,r)&&(rd(o,r)&&rd(r,o)&&function(l,d){var m=l,v=!1,x=(l.x+d.x)/2,S=(l.y+d.y)/2;do m.y>S!=m.next.y>S&&m.next.y!==m.y&&x<(m.next.x-m.x)*(S-m.y)/(m.next.y-m.y)+m.x&&(v=!v),m=m.next;while(m!==l);return v}(o,r)&&(Un(o.prev,o,r.prev)||Un(o,r.prev,r))||Lp(o,r)&&Un(o.prev,o,o.next)>0&&Un(r.prev,r,r.next)>0)}function Un(o,r,l){return(r.y-o.y)*(l.x-r.x)-(r.x-o.x)*(l.y-r.y)}function Lp(o,r){return o.x===r.x&&o.y===r.y}function Hb(o,r,l,d){var m=Fp(Un(o,r,l)),v=Fp(Un(o,r,d)),x=Fp(Un(l,d,o)),S=Fp(Un(l,d,r));return m!==v&&x!==S||!(m!==0||!Op(o,l,r))||!(v!==0||!Op(o,d,r))||!(x!==0||!Op(l,o,d))||!(S!==0||!Op(l,r,d))}function Op(o,r,l){return r.x<=Math.max(o.x,l.x)&&r.x>=Math.min(o.x,l.x)&&r.y<=Math.max(o.y,l.y)&&r.y>=Math.min(o.y,l.y)}function Fp(o){return o>0?1:o<0?-1:0}function rd(o,r){return Un(o.prev,o,o.next)<0?Un(o,r,o.next)>=0&&Un(o,o.prev,r)>=0:Un(o,r,o.prev)<0||Un(o,o.next,r)<0}function Kb(o,r){var l=new Av(o.i,o.x,o.y),d=new Av(r.i,r.x,r.y),m=o.next,v=r.prev;return o.next=r,r.prev=o,l.next=m,m.prev=l,d.next=l,l.prev=d,v.next=d,d.prev=v,d}function Xb(o,r,l,d){var m=new Av(o,r,l);return d?(m.next=d.next,m.prev=d,d.next.prev=m,d.next=m):(m.prev=m,m.next=m),m}function id(o){o.next.prev=o.prev,o.prev.next=o.next,o.prevZ&&(o.prevZ.nextZ=o.nextZ),o.nextZ&&(o.nextZ.prevZ=o.prevZ)}function Av(o,r,l){this.i=o,this.x=r,this.y=l,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function kv(o,r,l,d){for(var m=0,v=r,x=l-d;v<l;v+=d)m+=(o[x]-o[v])*(o[v+1]+o[x+1]),x=v;return m}Ev.exports=zp,Ev.exports.default=zp,zp.deviation=function(o,r,l,d){var m=r&&r.length,v=Math.abs(kv(o,0,m?r[0]*l:o.length,l));if(m)for(var x=0,S=r.length;x<S;x++)v-=Math.abs(kv(o,r[x]*l,x<S-1?r[x+1]*l:o.length,l));var E=0;for(x=0;x<d.length;x+=3){var I=d[x]*l,D=d[x+1]*l,O=d[x+2]*l;E+=Math.abs((o[I]-o[O])*(o[D+1]-o[I+1])-(o[I]-o[D])*(o[O+1]-o[I+1]))}return v===0&&E===0?0:Math.abs((E-v)/v)},zp.flatten=function(o){for(var r=o[0][0].length,l={vertices:[],holes:[],dimensions:r},d=0,m=0;m<o.length;m++){for(var v=0;v<o[m].length;v++)for(var x=0;x<r;x++)l.vertices.push(o[m][v][x]);m>0&&l.holes.push(d+=o[m-1].length)}return l};var Qb=b(Ev.exports);function Ez(o,r,l,d,m){Yb(o,r,l||0,d||o.length-1,m||Pz)}function Yb(o,r,l,d,m){for(;d>l;){if(d-l>600){var v=d-l+1,x=r-l+1,S=Math.log(v),E=.5*Math.exp(2*S/3),I=.5*Math.sqrt(S*E*(v-E)/v)*(x-v/2<0?-1:1);Yb(o,r,Math.max(l,Math.floor(r-x*E/v+I)),Math.min(d,Math.floor(r+(v-x)*E/v+I)),m)}var D=o[r],O=l,U=d;for(sd(o,l,r),m(o[d],D)>0&&sd(o,l,d);O<U;){for(sd(o,O,U),O++,U--;m(o[O],D)<0;)O++;for(;m(o[U],D)>0;)U--}m(o[l],D)===0?sd(o,l,U):sd(o,++U,d),U<=r&&(l=U+1),r<=U&&(d=U-1)}}function sd(o,r,l){var d=o[r];o[r]=o[l],o[l]=d}function Pz(o,r){return o<r?-1:o>r?1:0}function Iv(o,r){const l=o.length;if(l<=1)return[o];const d=[];let m,v;for(let x=0;x<l;x++){const S=zt(o[x]);S!==0&&(o[x].area=Math.abs(S),v===void 0&&(v=S<0),v===S<0?(m&&d.push(m),m=[o[x]]):m.push(o[x]))}if(m&&d.push(m),r>1)for(let x=0;x<d.length;x++)d[x].length<=r||(Ez(d[x],r,1,d[x].length-1,Az),d[x]=d[x].slice(0,r));return d}function Az(o,r){return r.area-o.area}function Mv(o,r,l){const d=l.patternDependencies;let m=!1;for(const v of r){const x=v.paint.get(`${o}-pattern`);x.isConstant()||(m=!0);const S=x.constantOr(null);S&&(m=!0,d[S.to]=!0,d[S.from]=!0)}return m}function Rv(o,r,l,d,m){const v=m.patternDependencies;for(const x of r){const S=x.paint.get(`${o}-pattern`).value;if(S.kind!=="constant"){let E=S.evaluate({zoom:d-1},l,{},m.availableImages),I=S.evaluate({zoom:d},l,{},m.availableImages),D=S.evaluate({zoom:d+1},l,{},m.availableImages);E=E&&E.name?E.name:E,I=I&&I.name?I.name:I,D=D&&D.name?D.name:D,v[E]=!0,v[I]=!0,v[D]=!0,l.patterns[x.id]={min:E,mid:I,max:D}}}return l}class Dv{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(l=>l.id),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new $t,this.indexArray=new gr,this.indexArray2=new Jn,this.programConfigurations=new Bs(r.layers,r.zoom),this.segments=new pn,this.segments2=new pn,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(r,l,d){this.hasPattern=Mv("fill",this.layers,l);const m=this.layers[0].layout.get("fill-sort-key"),v=!m.isConstant(),x=[];for(const{feature:S,id:E,index:I,sourceLayerIndex:D}of r){const O=this.layers[0]._featureFilter.needGeometry,U=$l(S,O);if(!this.layers[0]._featureFilter.filter(new fn(this.zoom),U,d))continue;const Z=v?m.evaluate(U,{},d,l.availableImages):void 0,H={id:E,properties:S.properties,type:S.type,sourceLayerIndex:D,index:I,geometry:O?U.geometry:Vl(S),patterns:{},sortKey:Z};x.push(H)}v&&x.sort((S,E)=>S.sortKey-E.sortKey);for(const S of x){const{geometry:E,index:I,sourceLayerIndex:D}=S;if(this.hasPattern){const O=Rv("fill",this.layers,S,this.zoom,l);this.patternFeatures.push(O)}else this.addFeature(S,E,I,d,{});l.featureIndex.insert(r[I].feature,E,I,D,this.index)}}update(r,l,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,l,this.stateDependentLayers,d)}addFeatures(r,l,d){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,l,d)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,gz),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.indexBuffer2=r.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(r,l,d,m,v){for(const x of Iv(l,500)){let S=0;for(const Z of x)S+=Z.length;const E=this.segments.prepareSegment(S,this.layoutVertexArray,this.indexArray),I=E.vertexLength,D=[],O=[];for(const Z of x){if(Z.length===0)continue;Z!==x[0]&&O.push(D.length/2);const H=this.segments2.prepareSegment(Z.length,this.layoutVertexArray,this.indexArray2),J=H.vertexLength;this.layoutVertexArray.emplaceBack(Z[0].x,Z[0].y),this.indexArray2.emplaceBack(J+Z.length-1,J),D.push(Z[0].x),D.push(Z[0].y);for(let oe=1;oe<Z.length;oe++)this.layoutVertexArray.emplaceBack(Z[oe].x,Z[oe].y),this.indexArray2.emplaceBack(J+oe-1,J+oe),D.push(Z[oe].x),D.push(Z[oe].y);H.vertexLength+=Z.length,H.primitiveLength+=Z.length}const U=Qb(D,O);for(let Z=0;Z<U.length;Z+=3)this.indexArray.emplaceBack(I+U[Z],I+U[Z+1],I+U[Z+2]);E.vertexLength+=S,E.primitiveLength+=U.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,d,v,m)}}let Jb,eS;st("FillBucket",Dv,{omit:["layers","patternFeatures"]});var kz={get paint(){return eS=eS||new $n({"fill-antialias":new pt(ue.paint_fill["fill-antialias"]),"fill-opacity":new Ct(ue.paint_fill["fill-opacity"]),"fill-color":new Ct(ue.paint_fill["fill-color"]),"fill-outline-color":new Ct(ue.paint_fill["fill-outline-color"]),"fill-translate":new pt(ue.paint_fill["fill-translate"]),"fill-translate-anchor":new pt(ue.paint_fill["fill-translate-anchor"]),"fill-pattern":new Fl(ue.paint_fill["fill-pattern"])})},get layout(){return Jb=Jb||new $n({"fill-sort-key":new Ct(ue.layout_fill["fill-sort-key"])})}};class Iz extends Oi{constructor(r){super(r,kz)}recalculate(r,l){super.recalculate(r,l);const d=this.paint._values["fill-outline-color"];d.value.kind==="constant"&&d.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(r){return new Dv(r)}queryRadius(){return Mp(this.paint.get("fill-translate"))}queryIntersectsFeature(r,l,d,m,v,x,S){return Lb(Rp(r,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),x.angle,S),m)}isTileClipped(){return!0}}const Mz=En([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Rz=En([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Dz}=Mz;var Ia={},zz=P,tS=ec;function ec(o,r,l,d,m){this.properties={},this.extent=l,this.type=0,this._pbf=o,this._geometry=-1,this._keys=d,this._values=m,o.readFields(Lz,this,r)}function Lz(o,r,l){o==1?r.id=l.readVarint():o==2?function(d,m){for(var v=d.readVarint()+d.pos;d.pos<v;){var x=m._keys[d.readVarint()],S=m._values[d.readVarint()];m.properties[x]=S}}(l,r):o==3?r.type=l.readVarint():o==4&&(r._geometry=l.pos)}function Oz(o){for(var r,l,d=0,m=0,v=o.length,x=v-1;m<v;x=m++)d+=((l=o[x]).x-(r=o[m]).x)*(r.y+l.y);return d}ec.types=["Unknown","Point","LineString","Polygon"],ec.prototype.loadGeometry=function(){var o=this._pbf;o.pos=this._geometry;for(var r,l=o.readVarint()+o.pos,d=1,m=0,v=0,x=0,S=[];o.pos<l;){if(m<=0){var E=o.readVarint();d=7&E,m=E>>3}if(m--,d===1||d===2)v+=o.readSVarint(),x+=o.readSVarint(),d===1&&(r&&S.push(r),r=[]),r.push(new zz(v,x));else{if(d!==7)throw new Error("unknown command "+d);r&&r.push(r[0].clone())}}return r&&S.push(r),S},ec.prototype.bbox=function(){var o=this._pbf;o.pos=this._geometry;for(var r=o.readVarint()+o.pos,l=1,d=0,m=0,v=0,x=1/0,S=-1/0,E=1/0,I=-1/0;o.pos<r;){if(d<=0){var D=o.readVarint();l=7&D,d=D>>3}if(d--,l===1||l===2)(m+=o.readSVarint())<x&&(x=m),m>S&&(S=m),(v+=o.readSVarint())<E&&(E=v),v>I&&(I=v);else if(l!==7)throw new Error("unknown command "+l)}return[x,E,S,I]},ec.prototype.toGeoJSON=function(o,r,l){var d,m,v=this.extent*Math.pow(2,l),x=this.extent*o,S=this.extent*r,E=this.loadGeometry(),I=ec.types[this.type];function D(Z){for(var H=0;H<Z.length;H++){var J=Z[H];Z[H]=[360*(J.x+x)/v-180,360/Math.PI*Math.atan(Math.exp((180-360*(J.y+S)/v)*Math.PI/180))-90]}}switch(this.type){case 1:var O=[];for(d=0;d<E.length;d++)O[d]=E[d][0];D(E=O);break;case 2:for(d=0;d<E.length;d++)D(E[d]);break;case 3:for(E=function(Z){var H=Z.length;if(H<=1)return[Z];for(var J,oe,he=[],xe=0;xe<H;xe++){var fe=Oz(Z[xe]);fe!==0&&(oe===void 0&&(oe=fe<0),oe===fe<0?(J&&he.push(J),J=[Z[xe]]):J.push(Z[xe]))}return J&&he.push(J),he}(E),d=0;d<E.length;d++)for(m=0;m<E[d].length;m++)D(E[d][m])}E.length===1?E=E[0]:I="Multi"+I;var U={type:"Feature",geometry:{type:I,coordinates:E},properties:this.properties};return"id"in this&&(U.id=this.id),U};var Fz=tS,nS=rS;function rS(o,r){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=o,this._keys=[],this._values=[],this._features=[],o.readFields(Nz,this,r),this.length=this._features.length}function Nz(o,r,l){o===15?r.version=l.readVarint():o===1?r.name=l.readString():o===5?r.extent=l.readVarint():o===2?r._features.push(l.pos):o===3?r._keys.push(l.readString()):o===4&&r._values.push(function(d){for(var m=null,v=d.readVarint()+d.pos;d.pos<v;){var x=d.readVarint()>>3;m=x===1?d.readString():x===2?d.readFloat():x===3?d.readDouble():x===4?d.readVarint64():x===5?d.readVarint():x===6?d.readSVarint():x===7?d.readBoolean():null}return m}(l))}rS.prototype.feature=function(o){if(o<0||o>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[o];var r=this._pbf.readVarint()+this._pbf.pos;return new Fz(this._pbf,r,this.extent,this._keys,this._values)};var Bz=nS;function Vz(o,r,l){if(o===3){var d=new Bz(l,l.readVarint()+l.pos);d.length&&(r[d.name]=d)}}Ia.VectorTile=function(o,r){this.layers=o.readFields(Vz,{},r)},Ia.VectorTileFeature=tS,Ia.VectorTileLayer=nS;const $z=Ia.VectorTileFeature.types,zv=Math.pow(2,13);function od(o,r,l,d,m,v,x,S){o.emplaceBack(r,l,2*Math.floor(d*zv)+x,m*zv*2,v*zv*2,Math.round(S))}class Lv{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(l=>l.id),this.index=r.index,this.hasPattern=!1,this.layoutVertexArray=new Je,this.centroidVertexArray=new Ue,this.indexArray=new gr,this.programConfigurations=new Bs(r.layers,r.zoom),this.segments=new pn,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(r,l,d){this.features=[],this.hasPattern=Mv("fill-extrusion",this.layers,l);for(const{feature:m,id:v,index:x,sourceLayerIndex:S}of r){const E=this.layers[0]._featureFilter.needGeometry,I=$l(m,E);if(!this.layers[0]._featureFilter.filter(new fn(this.zoom),I,d))continue;const D={id:v,sourceLayerIndex:S,index:x,geometry:E?I.geometry:Vl(m),properties:m.properties,type:m.type,patterns:{}};this.hasPattern?this.features.push(Rv("fill-extrusion",this.layers,D,this.zoom,l)):this.addFeature(D,D.geometry,x,d,{}),l.featureIndex.insert(m,D.geometry,x,S,this.index,!0)}}addFeatures(r,l,d){for(const m of this.features){const{geometry:v}=m;this.addFeature(m,v,m.index,l,d)}}update(r,l,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,l,this.stateDependentLayers,d)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,Dz),this.centroidVertexBuffer=r.createVertexBuffer(this.centroidVertexArray,Rz.members,!0),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(r,l,d,m,v){const x={x:0,y:0,vertexCount:0};for(const S of Iv(l,500)){let E=0;for(const H of S)E+=H.length;let I=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const H of S){if(H.length===0||Uz(H))continue;let J=0;for(let oe=0;oe<H.length;oe++){const he=H[oe];if(oe>=1){const xe=H[oe-1];if(!jz(he,xe)){I.vertexLength+4>pn.MAX_VERTEX_ARRAY_LENGTH&&(I=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const fe=he.sub(xe)._perp()._unit(),be=xe.dist(he);J+be>32768&&(J=0),od(this.layoutVertexArray,he.x,he.y,fe.x,fe.y,0,0,J),od(this.layoutVertexArray,he.x,he.y,fe.x,fe.y,0,1,J),x.x+=2*he.x,x.y+=2*he.y,x.vertexCount+=2,J+=be,od(this.layoutVertexArray,xe.x,xe.y,fe.x,fe.y,0,0,J),od(this.layoutVertexArray,xe.x,xe.y,fe.x,fe.y,0,1,J),x.x+=2*xe.x,x.y+=2*xe.y,x.vertexCount+=2;const Ee=I.vertexLength;this.indexArray.emplaceBack(Ee,Ee+2,Ee+1),this.indexArray.emplaceBack(Ee+1,Ee+2,Ee+3),I.vertexLength+=4,I.primitiveLength+=2}}}}if(I.vertexLength+E>pn.MAX_VERTEX_ARRAY_LENGTH&&(I=this.segments.prepareSegment(E,this.layoutVertexArray,this.indexArray)),$z[r.type]!=="Polygon")continue;const D=[],O=[],U=I.vertexLength;for(const H of S)if(H.length!==0){H!==S[0]&&O.push(D.length/2);for(let J=0;J<H.length;J++){const oe=H[J];od(this.layoutVertexArray,oe.x,oe.y,0,0,1,1,0),x.x+=oe.x,x.y+=oe.y,x.vertexCount+=1,D.push(oe.x),D.push(oe.y)}}const Z=Qb(D,O);for(let H=0;H<Z.length;H+=3)this.indexArray.emplaceBack(U+Z[H],U+Z[H+2],U+Z[H+1]);I.primitiveLength+=Z.length/3,I.vertexLength+=E}for(let S=0;S<x.vertexCount;S++)this.centroidVertexArray.emplaceBack(Math.floor(x.x/x.vertexCount),Math.floor(x.y/x.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,d,v,m)}}function jz(o,r){return o.x===r.x&&(o.x<0||o.x>Xn)||o.y===r.y&&(o.y<0||o.y>Xn)}function Uz(o){return o.every(r=>r.x<0)||o.every(r=>r.x>Xn)||o.every(r=>r.y<0)||o.every(r=>r.y>Xn)}let iS;st("FillExtrusionBucket",Lv,{omit:["layers","features"]});var qz={get paint(){return iS=iS||new $n({"fill-extrusion-opacity":new pt(ue["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Ct(ue["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new pt(ue["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new pt(ue["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Fl(ue["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Ct(ue["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Ct(ue["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new pt(ue["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class Gz extends Oi{constructor(r){super(r,qz)}createBucket(r){return new Lv(r)}queryRadius(){return Mp(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(r,l,d,m,v,x,S,E){const I=Rp(r,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),x.angle,S),D=this.paint.get("fill-extrusion-height").evaluate(l,d),O=this.paint.get("fill-extrusion-base").evaluate(l,d),U=function(H,J,oe,he){const xe=[];for(const fe of H){const be=[fe.x,fe.y,0,1];Dp(be,be,J),xe.push(new M(be[0]/be[3],be[1]/be[3]))}return xe}(I,E),Z=function(H,J,oe,he){const xe=[],fe=[],be=he[8]*J,Ee=he[9]*J,Le=he[10]*J,it=he[11]*J,ut=he[8]*oe,nt=he[9]*oe,et=he[10]*oe,We=he[11]*oe;for(const ot of H){const Ke=[],$e=[];for(const _t of ot){const dt=_t.x,Nt=_t.y,mn=he[0]*dt+he[4]*Nt+he[12],bn=he[1]*dt+he[5]*Nt+he[13],nr=he[2]*dt+he[6]*Nt+he[14],Ni=he[3]*dt+he[7]*Nt+he[15],Yr=nr+Le,Qn=Ni+it,vr=mn+ut,Pr=bn+nt,Jr=nr+et,ei=Ni+We,rr=new M((mn+be)/Qn,(bn+Ee)/Qn);rr.z=Yr/Qn,Ke.push(rr);const ir=new M(vr/ei,Pr/ei);ir.z=Jr/ei,$e.push(ir)}xe.push(Ke),fe.push($e)}return[xe,fe]}(m,O,D,E);return function(H,J,oe){let he=1/0;Lb(oe,J)&&(he=sS(oe,J[0]));for(let xe=0;xe<J.length;xe++){const fe=J[xe],be=H[xe];for(let Ee=0;Ee<fe.length-1;Ee++){const Le=fe[Ee],it=[Le,fe[Ee+1],be[Ee+1],be[Ee],Le];zb(oe,it)&&(he=Math.min(he,sS(oe,it)))}}return he!==1/0&&he}(Z[0],Z[1],U)}}function ad(o,r){return o.x*r.x+o.y*r.y}function sS(o,r){if(o.length===1){let l=0;const d=r[l++];let m;for(;!m||d.equals(m);)if(m=r[l++],!m)return 1/0;for(;l<r.length;l++){const v=r[l],x=o[0],S=m.sub(d),E=v.sub(d),I=x.sub(d),D=ad(S,S),O=ad(S,E),U=ad(E,E),Z=ad(I,S),H=ad(I,E),J=D*U-O*O,oe=(U*Z-O*H)/J,he=(D*H-O*Z)/J,xe=d.z*(1-oe-he)+m.z*oe+v.z*he;if(isFinite(xe))return xe}return 1/0}{let l=1/0;for(const d of r)l=Math.min(l,d.z);return l}}const Zz=En([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:Wz}=Zz,Hz=En([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Kz}=Hz,Xz=Ia.VectorTileFeature.types,Qz=Math.cos(Math.PI/180*37.5),oS=Math.pow(2,14)/.5;class Ov{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(l=>l.id),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(l=>{this.gradients[l.id]={}}),this.layoutVertexArray=new Tt,this.layoutVertexArray2=new ht,this.indexArray=new gr,this.programConfigurations=new Bs(r.layers,r.zoom),this.segments=new pn,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(r,l,d){this.hasPattern=Mv("line",this.layers,l);const m=this.layers[0].layout.get("line-sort-key"),v=!m.isConstant(),x=[];for(const{feature:S,id:E,index:I,sourceLayerIndex:D}of r){const O=this.layers[0]._featureFilter.needGeometry,U=$l(S,O);if(!this.layers[0]._featureFilter.filter(new fn(this.zoom),U,d))continue;const Z=v?m.evaluate(U,{},d):void 0,H={id:E,properties:S.properties,type:S.type,sourceLayerIndex:D,index:I,geometry:O?U.geometry:Vl(S),patterns:{},sortKey:Z};x.push(H)}v&&x.sort((S,E)=>S.sortKey-E.sortKey);for(const S of x){const{geometry:E,index:I,sourceLayerIndex:D}=S;if(this.hasPattern){const O=Rv("line",this.layers,S,this.zoom,l);this.patternFeatures.push(O)}else this.addFeature(S,E,I,d,{});l.featureIndex.insert(r[I].feature,E,I,D,this.index)}}update(r,l,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,l,this.stateDependentLayers,d)}addFeatures(r,l,d){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,l,d)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=r.createVertexBuffer(this.layoutVertexArray2,Kz)),this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,Wz),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(r){if(r.properties&&Object.prototype.hasOwnProperty.call(r.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(r.properties,"mapbox_clip_end"))return{start:+r.properties.mapbox_clip_start,end:+r.properties.mapbox_clip_end}}addFeature(r,l,d,m,v){const x=this.layers[0].layout,S=x.get("line-join").evaluate(r,{}),E=x.get("line-cap"),I=x.get("line-miter-limit"),D=x.get("line-round-limit");this.lineClips=this.lineFeatureClips(r);for(const O of l)this.addLine(O,r,S,E,I,D);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,d,v,m)}addLine(r,l,d,m,v,x){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let he=0;he<r.length-1;he++)this.totalDistance+=r[he].dist(r[he+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const S=Xz[l.type]==="Polygon";let E=r.length;for(;E>=2&&r[E-1].equals(r[E-2]);)E--;let I=0;for(;I<E-1&&r[I].equals(r[I+1]);)I++;if(E<(S?3:2))return;d==="bevel"&&(v=1.05);const D=this.overscaling<=16?15*Xn/(512*this.overscaling):0,O=this.segments.prepareSegment(10*E,this.layoutVertexArray,this.indexArray);let U,Z,H,J,oe;this.e1=this.e2=-1,S&&(U=r[E-2],oe=r[I].sub(U)._unit()._perp());for(let he=I;he<E;he++){if(H=he===E-1?S?r[I+1]:void 0:r[he+1],H&&r[he].equals(H))continue;oe&&(J=oe),U&&(Z=U),U=r[he],oe=H?H.sub(U)._unit()._perp():J,J=J||oe;let xe=J.add(oe);xe.x===0&&xe.y===0||xe._unit();const fe=J.x*oe.x+J.y*oe.y,be=xe.x*oe.x+xe.y*oe.y,Ee=be!==0?1/be:1/0,Le=2*Math.sqrt(2-2*be),it=be<Qz&&Z&&H,ut=J.x*oe.y-J.y*oe.x>0;if(it&&he>I){const We=U.dist(Z);if(We>2*D){const ot=U.sub(U.sub(Z)._mult(D/We)._round());this.updateDistance(Z,ot),this.addCurrentVertex(ot,J,0,0,O),Z=ot}}const nt=Z&&H;let et=nt?d:S?"butt":m;if(nt&&et==="round"&&(Ee<x?et="miter":Ee<=2&&(et="fakeround")),et==="miter"&&Ee>v&&(et="bevel"),et==="bevel"&&(Ee>2&&(et="flipbevel"),Ee<v&&(et="miter")),Z&&this.updateDistance(Z,U),et==="miter")xe._mult(Ee),this.addCurrentVertex(U,xe,0,0,O);else if(et==="flipbevel"){if(Ee>100)xe=oe.mult(-1);else{const We=Ee*J.add(oe).mag()/J.sub(oe).mag();xe._perp()._mult(We*(ut?-1:1))}this.addCurrentVertex(U,xe,0,0,O),this.addCurrentVertex(U,xe.mult(-1),0,0,O)}else if(et==="bevel"||et==="fakeround"){const We=-Math.sqrt(Ee*Ee-1),ot=ut?We:0,Ke=ut?0:We;if(Z&&this.addCurrentVertex(U,J,ot,Ke,O),et==="fakeround"){const $e=Math.round(180*Le/Math.PI/20);for(let _t=1;_t<$e;_t++){let dt=_t/$e;if(dt!==.5){const mn=dt-.5;dt+=dt*mn*(dt-1)*((1.0904+fe*(fe*(3.55645-1.43519*fe)-3.2452))*mn*mn+(.848013+fe*(.215638*fe-1.06021)))}const Nt=oe.sub(J)._mult(dt)._add(J)._unit()._mult(ut?-1:1);this.addHalfVertex(U,Nt.x,Nt.y,!1,ut,0,O)}}H&&this.addCurrentVertex(U,oe,-ot,-Ke,O)}else if(et==="butt")this.addCurrentVertex(U,xe,0,0,O);else if(et==="square"){const We=Z?1:-1;this.addCurrentVertex(U,xe,We,We,O)}else et==="round"&&(Z&&(this.addCurrentVertex(U,J,0,0,O),this.addCurrentVertex(U,J,1,1,O,!0)),H&&(this.addCurrentVertex(U,oe,-1,-1,O,!0),this.addCurrentVertex(U,oe,0,0,O)));if(it&&he<E-1){const We=U.dist(H);if(We>2*D){const ot=U.add(H.sub(U)._mult(D/We)._round());this.updateDistance(U,ot),this.addCurrentVertex(ot,oe,0,0,O),U=ot}}}}addCurrentVertex(r,l,d,m,v,x=!1){const S=l.y*m-l.x,E=-l.y-l.x*m;this.addHalfVertex(r,l.x+l.y*d,l.y-l.x*d,x,!1,d,v),this.addHalfVertex(r,S,E,x,!0,-m,v),this.distance>oS/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(r,l,d,m,v,x))}addHalfVertex({x:r,y:l},d,m,v,x,S,E){const I=.5*(this.lineClips?this.scaledDistance*(oS-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((r<<1)+(v?1:0),(l<<1)+(x?1:0),Math.round(63*d)+128,Math.round(63*m)+128,1+(S===0?0:S<0?-1:1)|(63&I)<<2,I>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const D=E.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,D),E.primitiveLength++),x?this.e2=D:this.e1=D}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(r,l){this.distance+=r.dist(l),this.updateScaledDistance()}}let aS,lS;st("LineBucket",Ov,{omit:["layers","patternFeatures"]});var uS={get paint(){return lS=lS||new $n({"line-opacity":new Ct(ue.paint_line["line-opacity"]),"line-color":new Ct(ue.paint_line["line-color"]),"line-translate":new pt(ue.paint_line["line-translate"]),"line-translate-anchor":new pt(ue.paint_line["line-translate-anchor"]),"line-width":new Ct(ue.paint_line["line-width"]),"line-gap-width":new Ct(ue.paint_line["line-gap-width"]),"line-offset":new Ct(ue.paint_line["line-offset"]),"line-blur":new Ct(ue.paint_line["line-blur"]),"line-dasharray":new qh(ue.paint_line["line-dasharray"]),"line-pattern":new Fl(ue.paint_line["line-pattern"]),"line-gradient":new Gh(ue.paint_line["line-gradient"])})},get layout(){return aS=aS||new $n({"line-cap":new pt(ue.layout_line["line-cap"]),"line-join":new Ct(ue.layout_line["line-join"]),"line-miter-limit":new pt(ue.layout_line["line-miter-limit"]),"line-round-limit":new pt(ue.layout_line["line-round-limit"]),"line-sort-key":new Ct(ue.layout_line["line-sort-key"])})}};class Yz extends Ct{possiblyEvaluate(r,l){return l=new fn(Math.floor(l.zoom),{now:l.now,fadeDuration:l.fadeDuration,zoomHistory:l.zoomHistory,transition:l.transition}),super.possiblyEvaluate(r,l)}evaluate(r,l,d,m){return l=Se({},l,{zoom:Math.floor(l.zoom)}),super.evaluate(r,l,d,m)}}let Np;class Jz extends Oi{constructor(r){super(r,uS),this.gradientVersion=0,Np||(Np=new Yz(uS.paint.properties["line-width"].specification),Np.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(r){if(r==="line-gradient"){const l=this.gradientExpression();this.stepInterpolant=!!function(d){return d._styleExpression!==void 0}(l)&&l._styleExpression.expression instanceof ao,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(r,l){super.recalculate(r,l),this.paint._values["line-floorwidth"]=Np.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,r)}createBucket(r){return new Ov(r)}queryRadius(r){const l=r,d=cS(Jh("line-width",this,l),Jh("line-gap-width",this,l)),m=Jh("line-offset",this,l);return d/2+Math.abs(m)+Mp(this.paint.get("line-translate"))}queryIntersectsFeature(r,l,d,m,v,x,S){const E=Rp(r,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),x.angle,S),I=S/2*cS(this.paint.get("line-width").evaluate(l,d),this.paint.get("line-gap-width").evaluate(l,d)),D=this.paint.get("line-offset").evaluate(l,d);return D&&(m=function(O,U){const Z=[];for(let H=0;H<O.length;H++){const J=O[H],oe=[];for(let he=0;he<J.length;he++){const xe=J[he-1],fe=J[he],be=J[he+1],Ee=he===0?new M(0,0):fe.sub(xe)._unit()._perp(),Le=he===J.length-1?new M(0,0):be.sub(fe)._unit()._perp(),it=Ee._add(Le)._unit(),ut=it.x*Le.x+it.y*Le.y;ut!==0&&it._mult(1/ut),oe.push(it._mult(U)._add(fe))}Z.push(oe)}return Z}(m,D*S)),function(O,U,Z){for(let H=0;H<U.length;H++){const J=U[H];if(O.length>=3){for(let oe=0;oe<J.length;oe++)if(Qu(O,J[oe]))return!0}if(sz(O,J,Z))return!0}return!1}(E,m,I)}isTileClipped(){return!0}}function cS(o,r){return r>0?r+2*o:o}const eL=En([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),tL=En([{name:"a_projected_pos",components:3,type:"Float32"}],4);En([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const nL=En([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);En([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const hS=En([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),rL=En([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function iL(o,r,l){return o.sections.forEach(d=>{d.text=function(m,v,x){const S=v.layout.get("text-transform").evaluate(x,{});return S==="uppercase"?m=m.toLocaleUpperCase():S==="lowercase"&&(m=m.toLocaleLowerCase()),mi.applyArabicShaping&&(m=mi.applyArabicShaping(m)),m}(d.text,r,l)}),o}En([{name:"triangle",components:3,type:"Uint16"}]),En([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),En([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),En([{type:"Float32",name:"offsetX"}]),En([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),En([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const ld={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var tr=24,dS=ln,fS=function(o,r,l,d,m){var v,x,S=8*m-d-1,E=(1<<S)-1,I=E>>1,D=-7,O=l?m-1:0,U=l?-1:1,Z=o[r+O];for(O+=U,v=Z&(1<<-D)-1,Z>>=-D,D+=S;D>0;v=256*v+o[r+O],O+=U,D-=8);for(x=v&(1<<-D)-1,v>>=-D,D+=d;D>0;x=256*x+o[r+O],O+=U,D-=8);if(v===0)v=1-I;else{if(v===E)return x?NaN:1/0*(Z?-1:1);x+=Math.pow(2,d),v-=I}return(Z?-1:1)*x*Math.pow(2,v-d)},pS=function(o,r,l,d,m,v){var x,S,E,I=8*v-m-1,D=(1<<I)-1,O=D>>1,U=m===23?Math.pow(2,-24)-Math.pow(2,-77):0,Z=d?0:v-1,H=d?1:-1,J=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(S=isNaN(r)?1:0,x=D):(x=Math.floor(Math.log(r)/Math.LN2),r*(E=Math.pow(2,-x))<1&&(x--,E*=2),(r+=x+O>=1?U/E:U*Math.pow(2,1-O))*E>=2&&(x++,E/=2),x+O>=D?(S=0,x=D):x+O>=1?(S=(r*E-1)*Math.pow(2,m),x+=O):(S=r*Math.pow(2,O-1)*Math.pow(2,m),x=0));m>=8;o[l+Z]=255&S,Z+=H,S/=256,m-=8);for(x=x<<m|S,I+=m;I>0;o[l+Z]=255&x,Z+=H,x/=256,I-=8);o[l+Z-H]|=128*J};function ln(o){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(o)?o:new Uint8Array(o||0),this.pos=0,this.type=0,this.length=this.buf.length}ln.Varint=0,ln.Fixed64=1,ln.Bytes=2,ln.Fixed32=5;var Fv=4294967296,mS=1/Fv,gS=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function $o(o){return o.type===ln.Bytes?o.readVarint()+o.pos:o.pos+1}function tc(o,r,l){return l?4294967296*r+(o>>>0):4294967296*(r>>>0)+(o>>>0)}function yS(o,r,l){var d=r<=16383?1:r<=2097151?2:r<=268435455?3:Math.floor(Math.log(r)/(7*Math.LN2));l.realloc(d);for(var m=l.pos-1;m>=o;m--)l.buf[m+d]=l.buf[m]}function sL(o,r){for(var l=0;l<o.length;l++)r.writeVarint(o[l])}function oL(o,r){for(var l=0;l<o.length;l++)r.writeSVarint(o[l])}function aL(o,r){for(var l=0;l<o.length;l++)r.writeFloat(o[l])}function lL(o,r){for(var l=0;l<o.length;l++)r.writeDouble(o[l])}function uL(o,r){for(var l=0;l<o.length;l++)r.writeBoolean(o[l])}function cL(o,r){for(var l=0;l<o.length;l++)r.writeFixed32(o[l])}function hL(o,r){for(var l=0;l<o.length;l++)r.writeSFixed32(o[l])}function dL(o,r){for(var l=0;l<o.length;l++)r.writeFixed64(o[l])}function fL(o,r){for(var l=0;l<o.length;l++)r.writeSFixed64(o[l])}function Bp(o,r){return(o[r]|o[r+1]<<8|o[r+2]<<16)+16777216*o[r+3]}function nc(o,r,l){o[l]=r,o[l+1]=r>>>8,o[l+2]=r>>>16,o[l+3]=r>>>24}function vS(o,r){return(o[r]|o[r+1]<<8|o[r+2]<<16)+(o[r+3]<<24)}ln.prototype={destroy:function(){this.buf=null},readFields:function(o,r,l){for(l=l||this.length;this.pos<l;){var d=this.readVarint(),m=d>>3,v=this.pos;this.type=7&d,o(m,r,this),this.pos===v&&this.skip(d)}return r},readMessage:function(o,r){return this.readFields(o,r,this.readVarint()+this.pos)},readFixed32:function(){var o=Bp(this.buf,this.pos);return this.pos+=4,o},readSFixed32:function(){var o=vS(this.buf,this.pos);return this.pos+=4,o},readFixed64:function(){var o=Bp(this.buf,this.pos)+Bp(this.buf,this.pos+4)*Fv;return this.pos+=8,o},readSFixed64:function(){var o=Bp(this.buf,this.pos)+vS(this.buf,this.pos+4)*Fv;return this.pos+=8,o},readFloat:function(){var o=fS(this.buf,this.pos,!0,23,4);return this.pos+=4,o},readDouble:function(){var o=fS(this.buf,this.pos,!0,52,8);return this.pos+=8,o},readVarint:function(o){var r,l,d=this.buf;return r=127&(l=d[this.pos++]),l<128?r:(r|=(127&(l=d[this.pos++]))<<7,l<128?r:(r|=(127&(l=d[this.pos++]))<<14,l<128?r:(r|=(127&(l=d[this.pos++]))<<21,l<128?r:function(m,v,x){var S,E,I=x.buf;if(S=(112&(E=I[x.pos++]))>>4,E<128||(S|=(127&(E=I[x.pos++]))<<3,E<128)||(S|=(127&(E=I[x.pos++]))<<10,E<128)||(S|=(127&(E=I[x.pos++]))<<17,E<128)||(S|=(127&(E=I[x.pos++]))<<24,E<128)||(S|=(1&(E=I[x.pos++]))<<31,E<128))return tc(m,S,v);throw new Error("Expected varint not more than 10 bytes")}(r|=(15&(l=d[this.pos]))<<28,o,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var o=this.readVarint();return o%2==1?(o+1)/-2:o/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var o=this.readVarint()+this.pos,r=this.pos;return this.pos=o,o-r>=12&&gS?function(l,d,m){return gS.decode(l.subarray(d,m))}(this.buf,r,o):function(l,d,m){for(var v="",x=d;x<m;){var S,E,I,D=l[x],O=null,U=D>239?4:D>223?3:D>191?2:1;if(x+U>m)break;U===1?D<128&&(O=D):U===2?(192&(S=l[x+1]))==128&&(O=(31&D)<<6|63&S)<=127&&(O=null):U===3?(E=l[x+2],(192&(S=l[x+1]))==128&&(192&E)==128&&((O=(15&D)<<12|(63&S)<<6|63&E)<=2047||O>=55296&&O<=57343)&&(O=null)):U===4&&(E=l[x+2],I=l[x+3],(192&(S=l[x+1]))==128&&(192&E)==128&&(192&I)==128&&((O=(15&D)<<18|(63&S)<<12|(63&E)<<6|63&I)<=65535||O>=1114112)&&(O=null)),O===null?(O=65533,U=1):O>65535&&(O-=65536,v+=String.fromCharCode(O>>>10&1023|55296),O=56320|1023&O),v+=String.fromCharCode(O),x+=U}return v}(this.buf,r,o)},readBytes:function(){var o=this.readVarint()+this.pos,r=this.buf.subarray(this.pos,o);return this.pos=o,r},readPackedVarint:function(o,r){if(this.type!==ln.Bytes)return o.push(this.readVarint(r));var l=$o(this);for(o=o||[];this.pos<l;)o.push(this.readVarint(r));return o},readPackedSVarint:function(o){if(this.type!==ln.Bytes)return o.push(this.readSVarint());var r=$o(this);for(o=o||[];this.pos<r;)o.push(this.readSVarint());return o},readPackedBoolean:function(o){if(this.type!==ln.Bytes)return o.push(this.readBoolean());var r=$o(this);for(o=o||[];this.pos<r;)o.push(this.readBoolean());return o},readPackedFloat:function(o){if(this.type!==ln.Bytes)return o.push(this.readFloat());var r=$o(this);for(o=o||[];this.pos<r;)o.push(this.readFloat());return o},readPackedDouble:function(o){if(this.type!==ln.Bytes)return o.push(this.readDouble());var r=$o(this);for(o=o||[];this.pos<r;)o.push(this.readDouble());return o},readPackedFixed32:function(o){if(this.type!==ln.Bytes)return o.push(this.readFixed32());var r=$o(this);for(o=o||[];this.pos<r;)o.push(this.readFixed32());return o},readPackedSFixed32:function(o){if(this.type!==ln.Bytes)return o.push(this.readSFixed32());var r=$o(this);for(o=o||[];this.pos<r;)o.push(this.readSFixed32());return o},readPackedFixed64:function(o){if(this.type!==ln.Bytes)return o.push(this.readFixed64());var r=$o(this);for(o=o||[];this.pos<r;)o.push(this.readFixed64());return o},readPackedSFixed64:function(o){if(this.type!==ln.Bytes)return o.push(this.readSFixed64());var r=$o(this);for(o=o||[];this.pos<r;)o.push(this.readSFixed64());return o},skip:function(o){var r=7&o;if(r===ln.Varint)for(;this.buf[this.pos++]>127;);else if(r===ln.Bytes)this.pos=this.readVarint()+this.pos;else if(r===ln.Fixed32)this.pos+=4;else{if(r!==ln.Fixed64)throw new Error("Unimplemented type: "+r);this.pos+=8}},writeTag:function(o,r){this.writeVarint(o<<3|r)},realloc:function(o){for(var r=this.length||16;r<this.pos+o;)r*=2;if(r!==this.length){var l=new Uint8Array(r);l.set(this.buf),this.buf=l,this.length=r}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(o){this.realloc(4),nc(this.buf,o,this.pos),this.pos+=4},writeSFixed32:function(o){this.realloc(4),nc(this.buf,o,this.pos),this.pos+=4},writeFixed64:function(o){this.realloc(8),nc(this.buf,-1&o,this.pos),nc(this.buf,Math.floor(o*mS),this.pos+4),this.pos+=8},writeSFixed64:function(o){this.realloc(8),nc(this.buf,-1&o,this.pos),nc(this.buf,Math.floor(o*mS),this.pos+4),this.pos+=8},writeVarint:function(o){(o=+o||0)>268435455||o<0?function(r,l){var d,m;if(r>=0?(d=r%4294967296|0,m=r/4294967296|0):(m=~(-r/4294967296),4294967295^(d=~(-r%4294967296))?d=d+1|0:(d=0,m=m+1|0)),r>=18446744073709552e3||r<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");l.realloc(10),function(v,x,S){S.buf[S.pos++]=127&v|128,v>>>=7,S.buf[S.pos++]=127&v|128,v>>>=7,S.buf[S.pos++]=127&v|128,v>>>=7,S.buf[S.pos++]=127&v|128,S.buf[S.pos]=127&(v>>>=7)}(d,0,l),function(v,x){var S=(7&v)<<4;x.buf[x.pos++]|=S|((v>>>=3)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v)))))}(m,l)}(o,this):(this.realloc(4),this.buf[this.pos++]=127&o|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=o>>>7&127))))},writeSVarint:function(o){this.writeVarint(o<0?2*-o-1:2*o)},writeBoolean:function(o){this.writeVarint(!!o)},writeString:function(o){o=String(o),this.realloc(4*o.length),this.pos++;var r=this.pos;this.pos=function(d,m,v){for(var x,S,E=0;E<m.length;E++){if((x=m.charCodeAt(E))>55295&&x<57344){if(!S){x>56319||E+1===m.length?(d[v++]=239,d[v++]=191,d[v++]=189):S=x;continue}if(x<56320){d[v++]=239,d[v++]=191,d[v++]=189,S=x;continue}x=S-55296<<10|x-56320|65536,S=null}else S&&(d[v++]=239,d[v++]=191,d[v++]=189,S=null);x<128?d[v++]=x:(x<2048?d[v++]=x>>6|192:(x<65536?d[v++]=x>>12|224:(d[v++]=x>>18|240,d[v++]=x>>12&63|128),d[v++]=x>>6&63|128),d[v++]=63&x|128)}return v}(this.buf,o,this.pos);var l=this.pos-r;l>=128&&yS(r,l,this),this.pos=r-1,this.writeVarint(l),this.pos+=l},writeFloat:function(o){this.realloc(4),pS(this.buf,o,this.pos,!0,23,4),this.pos+=4},writeDouble:function(o){this.realloc(8),pS(this.buf,o,this.pos,!0,52,8),this.pos+=8},writeBytes:function(o){var r=o.length;this.writeVarint(r),this.realloc(r);for(var l=0;l<r;l++)this.buf[this.pos++]=o[l]},writeRawMessage:function(o,r){this.pos++;var l=this.pos;o(r,this);var d=this.pos-l;d>=128&&yS(l,d,this),this.pos=l-1,this.writeVarint(d),this.pos+=d},writeMessage:function(o,r,l){this.writeTag(o,ln.Bytes),this.writeRawMessage(r,l)},writePackedVarint:function(o,r){r.length&&this.writeMessage(o,sL,r)},writePackedSVarint:function(o,r){r.length&&this.writeMessage(o,oL,r)},writePackedBoolean:function(o,r){r.length&&this.writeMessage(o,uL,r)},writePackedFloat:function(o,r){r.length&&this.writeMessage(o,aL,r)},writePackedDouble:function(o,r){r.length&&this.writeMessage(o,lL,r)},writePackedFixed32:function(o,r){r.length&&this.writeMessage(o,cL,r)},writePackedSFixed32:function(o,r){r.length&&this.writeMessage(o,hL,r)},writePackedFixed64:function(o,r){r.length&&this.writeMessage(o,dL,r)},writePackedSFixed64:function(o,r){r.length&&this.writeMessage(o,fL,r)},writeBytesField:function(o,r){this.writeTag(o,ln.Bytes),this.writeBytes(r)},writeFixed32Field:function(o,r){this.writeTag(o,ln.Fixed32),this.writeFixed32(r)},writeSFixed32Field:function(o,r){this.writeTag(o,ln.Fixed32),this.writeSFixed32(r)},writeFixed64Field:function(o,r){this.writeTag(o,ln.Fixed64),this.writeFixed64(r)},writeSFixed64Field:function(o,r){this.writeTag(o,ln.Fixed64),this.writeSFixed64(r)},writeVarintField:function(o,r){this.writeTag(o,ln.Varint),this.writeVarint(r)},writeSVarintField:function(o,r){this.writeTag(o,ln.Varint),this.writeSVarint(r)},writeStringField:function(o,r){this.writeTag(o,ln.Bytes),this.writeString(r)},writeFloatField:function(o,r){this.writeTag(o,ln.Fixed32),this.writeFloat(r)},writeDoubleField:function(o,r){this.writeTag(o,ln.Fixed64),this.writeDouble(r)},writeBooleanField:function(o,r){this.writeVarintField(o,!!r)}};var Nv=b(dS);const Bv=3;function pL(o,r,l){o===1&&l.readMessage(mL,r)}function mL(o,r,l){if(o===3){const{id:d,bitmap:m,width:v,height:x,left:S,top:E,advance:I}=l.readMessage(gL,{});r.push({id:d,bitmap:new td({width:v+2*Bv,height:x+2*Bv},m),metrics:{width:v,height:x,left:S,top:E,advance:I}})}}function gL(o,r,l){o===1?r.id=l.readVarint():o===2?r.bitmap=l.readBytes():o===3?r.width=l.readVarint():o===4?r.height=l.readVarint():o===5?r.left=l.readSVarint():o===6?r.top=l.readSVarint():o===7&&(r.advance=l.readVarint())}const _S=Bv;function xS(o){let r=0,l=0;for(const x of o)r+=x.w*x.h,l=Math.max(l,x.w);o.sort((x,S)=>S.h-x.h);const d=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(r/.95)),l),h:1/0}];let m=0,v=0;for(const x of o)for(let S=d.length-1;S>=0;S--){const E=d[S];if(!(x.w>E.w||x.h>E.h)){if(x.x=E.x,x.y=E.y,v=Math.max(v,x.y+x.h),m=Math.max(m,x.x+x.w),x.w===E.w&&x.h===E.h){const I=d.pop();S<d.length&&(d[S]=I)}else x.h===E.h?(E.x+=x.w,E.w-=x.w):x.w===E.w?(E.y+=x.h,E.h-=x.h):(d.push({x:E.x+x.w,y:E.y,w:E.w-x.w,h:x.h}),E.y+=x.h,E.h-=x.h);break}}return{w:m,h:v,fill:r/(m*v)||0}}const yi=1;class Vv{constructor(r,{pixelRatio:l,version:d,stretchX:m,stretchY:v,content:x}){this.paddedRect=r,this.pixelRatio=l,this.stretchX=m,this.stretchY=v,this.content=x,this.version=d}get tl(){return[this.paddedRect.x+yi,this.paddedRect.y+yi]}get br(){return[this.paddedRect.x+this.paddedRect.w-yi,this.paddedRect.y+this.paddedRect.h-yi]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*yi)/this.pixelRatio,(this.paddedRect.h-2*yi)/this.pixelRatio]}}class wS{constructor(r,l){const d={},m={};this.haveRenderCallbacks=[];const v=[];this.addImages(r,d,v),this.addImages(l,m,v);const{w:x,h:S}=xS(v),E=new Zi({width:x||1,height:S||1});for(const I in r){const D=r[I],O=d[I].paddedRect;Zi.copy(D.data,E,{x:0,y:0},{x:O.x+yi,y:O.y+yi},D.data)}for(const I in l){const D=l[I],O=m[I].paddedRect,U=O.x+yi,Z=O.y+yi,H=D.data.width,J=D.data.height;Zi.copy(D.data,E,{x:0,y:0},{x:U,y:Z},D.data),Zi.copy(D.data,E,{x:0,y:J-1},{x:U,y:Z-1},{width:H,height:1}),Zi.copy(D.data,E,{x:0,y:0},{x:U,y:Z+J},{width:H,height:1}),Zi.copy(D.data,E,{x:H-1,y:0},{x:U-1,y:Z},{width:1,height:J}),Zi.copy(D.data,E,{x:0,y:0},{x:U+H,y:Z},{width:1,height:J})}this.image=E,this.iconPositions=d,this.patternPositions=m}addImages(r,l,d){for(const m in r){const v=r[m],x={x:0,y:0,w:v.data.width+2*yi,h:v.data.height+2*yi};d.push(x),l[m]=new Vv(x,v),v.hasRenderCallback&&this.haveRenderCallbacks.push(m)}}patchUpdatedImages(r,l){r.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const d in r.updatedImages)this.patchUpdatedImage(this.iconPositions[d],r.getImage(d),l),this.patchUpdatedImage(this.patternPositions[d],r.getImage(d),l)}patchUpdatedImage(r,l,d){if(!r||!l||r.version===l.version)return;r.version=l.version;const[m,v]=r.tl;d.update(l.data,void 0,{x:m,y:v})}}var Ma;st("ImagePosition",Vv),st("ImageAtlas",wS),a.ai=void 0,(Ma=a.ai||(a.ai={}))[Ma.none=0]="none",Ma[Ma.horizontal=1]="horizontal",Ma[Ma.vertical=2]="vertical",Ma[Ma.horizontalOnly=3]="horizontalOnly";const ud=-17;class cd{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(r,l){const d=new cd;return d.scale=r||1,d.fontStack=l,d}static forImage(r){const l=new cd;return l.imageName=r,l}}class rc{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(r,l){const d=new rc;for(let m=0;m<r.sections.length;m++){const v=r.sections[m];v.image?d.addImageSection(v):d.addTextSection(v,l)}return d}length(){return this.text.length}getSection(r){return this.sections[this.sectionIndex[r]]}getSectionIndex(r){return this.sectionIndex[r]}getCharCode(r){return this.text.charCodeAt(r)}verticalizePunctuation(){this.text=function(r){let l="";for(let d=0;d<r.length;d++){const m=r.charCodeAt(d+1)||null,v=r.charCodeAt(d-1)||null;l+=m&&xp(m)&&!ld[r[d+1]]||v&&xp(v)&&!ld[r[d-1]]||!ld[r[d]]?r[d]:ld[r[d]]}return l}(this.text)}trim(){let r=0;for(let d=0;d<this.text.length&&$p[this.text.charCodeAt(d)];d++)r++;let l=this.text.length;for(let d=this.text.length-1;d>=0&&d>=r&&$p[this.text.charCodeAt(d)];d--)l--;this.text=this.text.substring(r,l),this.sectionIndex=this.sectionIndex.slice(r,l)}substring(r,l){const d=new rc;return d.text=this.text.substring(r,l),d.sectionIndex=this.sectionIndex.slice(r,l),d.sections=this.sections,d}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((r,l)=>Math.max(r,this.sections[l].scale),0)}addTextSection(r,l){this.text+=r.text,this.sections.push(cd.forText(r.scale,r.fontStack||l));const d=this.sections.length-1;for(let m=0;m<r.text.length;++m)this.sectionIndex.push(d)}addImageSection(r){const l=r.image?r.image.name:"";if(l.length===0)return void xt("Can't add FormattedSection with an empty image.");const d=this.getNextImageSectionCharCode();d?(this.text+=String.fromCharCode(d),this.sections.push(cd.forImage(l)),this.sectionIndex.push(this.sections.length-1)):xt("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Vp(o,r,l,d,m,v,x,S,E,I,D,O,U,Z,H,J){const oe=rc.fromFeature(o,m);let he;O===a.ai.vertical&&oe.verticalizePunctuation();const{processBidirectionalText:xe,processStyledBidirectionalText:fe}=mi;if(xe&&oe.sections.length===1){he=[];const Le=xe(oe.toString(),$v(oe,I,v,r,d,Z,H));for(const it of Le){const ut=new rc;ut.text=it,ut.sections=oe.sections;for(let nt=0;nt<it.length;nt++)ut.sectionIndex.push(0);he.push(ut)}}else if(fe){he=[];const Le=fe(oe.text,oe.sectionIndex,$v(oe,I,v,r,d,Z,H));for(const it of Le){const ut=new rc;ut.text=it[0],ut.sectionIndex=it[1],ut.sections=oe.sections,he.push(ut)}}else he=function(Le,it){const ut=[],nt=Le.text;let et=0;for(const We of it)ut.push(Le.substring(et,We)),et=We;return et<nt.length&&ut.push(Le.substring(et,nt.length)),ut}(oe,$v(oe,I,v,r,d,Z,H));const be=[],Ee={positionedLines:be,text:oe.toString(),top:D[1],bottom:D[1],left:D[0],right:D[0],writingMode:O,iconsInText:!1,verticalizable:!1};return function(Le,it,ut,nt,et,We,ot,Ke,$e,_t,dt,Nt){let mn=0,bn=ud,nr=0,Ni=0;const Yr=Ke==="right"?1:Ke==="left"?0:.5;let Qn=0;for(const rr of et){rr.trim();const ir=rr.getMaxScale(),Lr=(ir-1)*tr,ti={positionedGlyphs:[],lineOffset:0};Le.positionedLines[Qn]=ti;const Or=ti.positionedGlyphs;let vi=0;if(!rr.length()){bn+=We,++Qn;continue}for(let sr=0;sr<rr.length();sr++){const Ut=rr.getSection(sr),Fr=rr.getSectionIndex(sr),Ar=rr.getCharCode(sr);let or=0,gs=null,Vs=null,$s=null,jo=tr;const ys=!($e===a.ai.horizontal||!dt&&!Oh(Ar)||dt&&($p[Ar]||(vr=Ar,rt.Arabic(vr)||rt["Arabic Supplement"](vr)||rt["Arabic Extended-A"](vr)||rt["Arabic Presentation Forms-A"](vr)||rt["Arabic Presentation Forms-B"](vr))));if(Ut.imageName){const Hi=nt[Ut.imageName];if(!Hi)continue;$s=Ut.imageName,Le.iconsInText=Le.iconsInText||!0,Vs=Hi.paddedRect;const xi=Hi.displaySize;Ut.scale=Ut.scale*tr/Nt,gs={width:xi[0],height:xi[1],left:yi,top:-_S,advance:ys?xi[1]:xi[0]},or=Lr+(tr-xi[1]*Ut.scale),jo=gs.advance;const Uo=ys?xi[0]*Ut.scale-tr*ir:xi[1]*Ut.scale-tr*ir;Uo>0&&Uo>vi&&(vi=Uo)}else{const Hi=ut[Ut.fontStack],xi=Hi&&Hi[Ar];if(xi&&xi.rect)Vs=xi.rect,gs=xi.metrics;else{const Uo=it[Ut.fontStack],md=Uo&&Uo[Ar];if(!md)continue;gs=md.metrics}or=(ir-Ut.scale)*tr}ys?(Le.verticalizable=!0,Or.push({glyph:Ar,imageName:$s,x:mn,y:bn+or,vertical:ys,scale:Ut.scale,fontStack:Ut.fontStack,sectionIndex:Fr,metrics:gs,rect:Vs}),mn+=jo*Ut.scale+_t):(Or.push({glyph:Ar,imageName:$s,x:mn,y:bn+or,vertical:ys,scale:Ut.scale,fontStack:Ut.fontStack,sectionIndex:Fr,metrics:gs,rect:Vs}),mn+=gs.advance*Ut.scale+_t)}Or.length!==0&&(nr=Math.max(mn-_t,nr),_L(Or,0,Or.length-1,Yr,vi)),mn=0;const _i=We*ir+vi;ti.lineOffset=Math.max(vi,Lr),bn+=_i,Ni=Math.max(_i,Ni),++Qn}var vr;const Pr=bn-ud,{horizontalAlign:Jr,verticalAlign:ei}=jv(ot);(function(rr,ir,Lr,ti,Or,vi,_i,sr,Ut){const Fr=(ir-Lr)*Or;let Ar=0;Ar=vi!==_i?-sr*ti-ud:(-ti*Ut+.5)*_i;for(const or of rr)for(const gs of or.positionedGlyphs)gs.x+=Fr,gs.y+=Ar})(Le.positionedLines,Yr,Jr,ei,nr,Ni,We,Pr,et.length),Le.top+=-ei*Pr,Le.bottom=Le.top+Pr,Le.left+=-Jr*nr,Le.right=Le.left+nr}(Ee,r,l,d,he,x,S,E,O,I,U,J),!function(Le){for(const it of Le)if(it.positionedGlyphs.length!==0)return!1;return!0}(be)&&Ee}const $p={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},yL={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function bS(o,r,l,d,m,v){if(r.imageName){const x=d[r.imageName];return x?x.displaySize[0]*r.scale*tr/v+m:0}{const x=l[r.fontStack],S=x&&x[o];return S?S.metrics.advance*r.scale+m:0}}function SS(o,r,l,d){const m=Math.pow(o-r,2);return d?o<r?m/2:2*m:m+Math.abs(l)*l}function vL(o,r,l){let d=0;return o===10&&(d-=1e4),l&&(d+=150),o!==40&&o!==65288||(d+=50),r!==41&&r!==65289||(d+=50),d}function CS(o,r,l,d,m,v){let x=null,S=SS(r,l,m,v);for(const E of d){const I=SS(r-E.x,l,m,v)+E.badness;I<=S&&(x=E,S=I)}return{index:o,x:r,priorBreak:x,badness:S}}function TS(o){return o?TS(o.priorBreak).concat(o.index):[]}function $v(o,r,l,d,m,v,x){if(v!=="point")return[];if(!o)return[];const S=[],E=function(U,Z,H,J,oe,he){let xe=0;for(let fe=0;fe<U.length();fe++){const be=U.getSection(fe);xe+=bS(U.getCharCode(fe),be,J,oe,Z,he)}return xe/Math.max(1,Math.ceil(xe/H))}(o,r,l,d,m,x),I=o.text.indexOf("​")>=0;let D=0;for(let U=0;U<o.length();U++){const Z=o.getSection(U),H=o.getCharCode(U);if($p[H]||(D+=bS(H,Z,d,m,r,x)),U<o.length()-1){const J=!((O=H)<11904||!(rt["Bopomofo Extended"](O)||rt.Bopomofo(O)||rt["CJK Compatibility Forms"](O)||rt["CJK Compatibility Ideographs"](O)||rt["CJK Compatibility"](O)||rt["CJK Radicals Supplement"](O)||rt["CJK Strokes"](O)||rt["CJK Symbols and Punctuation"](O)||rt["CJK Unified Ideographs Extension A"](O)||rt["CJK Unified Ideographs"](O)||rt["Enclosed CJK Letters and Months"](O)||rt["Halfwidth and Fullwidth Forms"](O)||rt.Hiragana(O)||rt["Ideographic Description Characters"](O)||rt["Kangxi Radicals"](O)||rt["Katakana Phonetic Extensions"](O)||rt.Katakana(O)||rt["Vertical Forms"](O)||rt["Yi Radicals"](O)||rt["Yi Syllables"](O)));(yL[H]||J||Z.imageName)&&S.push(CS(U+1,D,E,S,vL(H,o.getCharCode(U+1),J&&I),!1))}}var O;return TS(CS(o.length(),D,E,S,0,!0))}function jv(o){let r=.5,l=.5;switch(o){case"right":case"top-right":case"bottom-right":r=1;break;case"left":case"top-left":case"bottom-left":r=0}switch(o){case"bottom":case"bottom-right":case"bottom-left":l=1;break;case"top":case"top-right":case"top-left":l=0}return{horizontalAlign:r,verticalAlign:l}}function _L(o,r,l,d,m){if(!d&&!m)return;const v=o[l],x=(o[l].x+v.metrics.advance*v.scale)*d;for(let S=r;S<=l;S++)o[S].x-=x,o[S].y+=m}function xL(o,r,l){const{horizontalAlign:d,verticalAlign:m}=jv(l),v=r[0]-o.displaySize[0]*d,x=r[1]-o.displaySize[1]*m;return{image:o,top:x,bottom:x+o.displaySize[1],left:v,right:v+o.displaySize[0]}}function ES(o,r,l,d,m,v){const x=o.image;let S;if(x.content){const oe=x.content,he=x.pixelRatio||1;S=[oe[0]/he,oe[1]/he,x.displaySize[0]-oe[2]/he,x.displaySize[1]-oe[3]/he]}const E=r.left*v,I=r.right*v;let D,O,U,Z;l==="width"||l==="both"?(Z=m[0]+E-d[3],O=m[0]+I+d[1]):(Z=m[0]+(E+I-x.displaySize[0])/2,O=Z+x.displaySize[0]);const H=r.top*v,J=r.bottom*v;return l==="height"||l==="both"?(D=m[1]+H-d[0],U=m[1]+J+d[2]):(D=m[1]+(H+J-x.displaySize[1])/2,U=D+x.displaySize[1]),{image:x,top:D,right:O,bottom:U,left:Z,collisionPadding:S}}const hd=255,fo=128,Ra=hd*fo;function PS(o,r){const{expression:l}=r;if(l.kind==="constant")return{kind:"constant",layoutSize:l.evaluate(new fn(o+1))};if(l.kind==="source")return{kind:"source"};{const{zoomStops:d,interpolationType:m}=l;let v=0;for(;v<d.length&&d[v]<=o;)v++;v=Math.max(0,v-1);let x=v;for(;x<d.length&&d[x]<o+1;)x++;x=Math.min(d.length-1,x);const S=d[v],E=d[x];return l.kind==="composite"?{kind:"composite",minZoom:S,maxZoom:E,interpolationType:m}:{kind:"camera",minZoom:S,maxZoom:E,minSize:l.evaluate(new fn(S)),maxSize:l.evaluate(new fn(E)),interpolationType:m}}}function Uv(o,r,l){let d="never";const m=o.get(r);return m?d=m:o.get(l)&&(d="always"),d}const wL=Ia.VectorTileFeature.types,bL=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function jp(o,r,l,d,m,v,x,S,E,I,D,O,U){const Z=S?Math.min(Ra,Math.round(S[0])):0,H=S?Math.min(Ra,Math.round(S[1])):0;o.emplaceBack(r,l,Math.round(32*d),Math.round(32*m),v,x,(Z<<1)+(E?1:0),H,16*I,16*D,256*O,256*U)}function qv(o,r,l){o.emplaceBack(r.x,r.y,l),o.emplaceBack(r.x,r.y,l),o.emplaceBack(r.x,r.y,l),o.emplaceBack(r.x,r.y,l)}function SL(o){for(const r of o.sections)if(gv(r.text))return!0;return!1}class Gv{constructor(r){this.layoutVertexArray=new Bt,this.indexArray=new gr,this.programConfigurations=r,this.segments=new pn,this.dynamicLayoutVertexArray=new Lt,this.opacityVertexArray=new jt,this.hasVisibleVertices=!1,this.placedSymbolArray=new ye}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(r,l,d,m){this.isEmpty()||(d&&(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,eL.members),this.indexBuffer=r.createIndexBuffer(this.indexArray,l),this.dynamicLayoutVertexBuffer=r.createVertexBuffer(this.dynamicLayoutVertexArray,tL.members,!0),this.opacityVertexBuffer=r.createVertexBuffer(this.opacityVertexArray,bL,!0),this.opacityVertexBuffer.itemSize=1),(d||m)&&this.programConfigurations.upload(r))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}st("SymbolBuffers",Gv);class Zv{constructor(r,l,d){this.layoutVertexArray=new r,this.layoutAttributes=l,this.indexArray=new d,this.segments=new pn,this.collisionVertexArray=new cn}upload(r){this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=r.createVertexBuffer(this.collisionVertexArray,nL.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}st("CollisionBuffers",Zv);class ic{constructor(r){this.collisionBoxArray=r.collisionBoxArray,this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(x=>x.id),this.index=r.index,this.pixelRatio=r.pixelRatio,this.sourceLayerIndex=r.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Sv([]),this.placementViewportMatrix=Sv([]);const l=this.layers[0]._unevaluatedLayout._values;this.textSizeData=PS(this.zoom,l["text-size"]),this.iconSizeData=PS(this.zoom,l["icon-size"]);const d=this.layers[0].layout,m=d.get("symbol-sort-key"),v=d.get("symbol-z-order");this.canOverlap=Uv(d,"text-overlap","text-allow-overlap")!=="never"||Uv(d,"icon-overlap","icon-allow-overlap")!=="never"||d.get("text-ignore-placement")||d.get("icon-ignore-placement"),this.sortFeaturesByKey=v!=="viewport-y"&&!m.isConstant(),this.sortFeaturesByY=(v==="viewport-y"||v==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,d.get("symbol-placement")==="point"&&(this.writingModes=d.get("text-writing-mode").map(x=>a.ai[x])),this.stateDependentLayerIds=this.layers.filter(x=>x.isStateDependent()).map(x=>x.id),this.sourceID=r.sourceID}createArrays(){this.text=new Gv(new Bs(this.layers,this.zoom,r=>/^text/.test(r))),this.icon=new Gv(new Bs(this.layers,this.zoom,r=>/^icon/.test(r))),this.glyphOffsetArray=new ve,this.lineVertexArray=new Pe,this.symbolInstances=new ce,this.textAnchorOffsets=new De}calculateGlyphDependencies(r,l,d,m,v){for(let x=0;x<r.length;x++)if(l[r.charCodeAt(x)]=!0,(d||m)&&v){const S=ld[r.charAt(x)];S&&(l[S.charCodeAt(0)]=!0)}}populate(r,l,d){const m=this.layers[0],v=m.layout,x=v.get("text-font"),S=v.get("text-field"),E=v.get("icon-image"),I=(S.value.kind!=="constant"||S.value.value instanceof Cr&&!S.value.value.isEmpty()||S.value.value.toString().length>0)&&(x.value.kind!=="constant"||x.value.value.length>0),D=E.value.kind!=="constant"||!!E.value.value||Object.keys(E.parameters).length>0,O=v.get("symbol-sort-key");if(this.features=[],!I&&!D)return;const U=l.iconDependencies,Z=l.glyphDependencies,H=l.availableImages,J=new fn(this.zoom);for(const{feature:oe,id:he,index:xe,sourceLayerIndex:fe}of r){const be=m._featureFilter.needGeometry,Ee=$l(oe,be);if(!m._featureFilter.filter(J,Ee,d))continue;let Le,it;if(be||(Ee.geometry=Vl(oe)),I){const nt=m.getValueAndResolveTokens("text-field",Ee,d,H),et=Cr.factory(nt);SL(et)&&(this.hasRTLText=!0),(!this.hasRTLText||jh()==="unavailable"||this.hasRTLText&&mi.isParsed())&&(Le=iL(et,m,Ee))}if(D){const nt=m.getValueAndResolveTokens("icon-image",Ee,d,H);it=nt instanceof mr?nt:mr.fromString(nt)}if(!Le&&!it)continue;const ut=this.sortFeaturesByKey?O.evaluate(Ee,{},d):void 0;if(this.features.push({id:he,text:Le,icon:it,index:xe,sourceLayerIndex:fe,geometry:Ee.geometry,properties:oe.properties,type:wL[oe.type],sortKey:ut}),it&&(U[it.name]=!0),Le){const nt=x.evaluate(Ee,{},d).join(","),et=v.get("text-rotation-alignment")!=="viewport"&&v.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(a.ai.vertical)>=0;for(const We of Le.sections)if(We.image)U[We.image.name]=!0;else{const ot=zh(Le.toString()),Ke=We.fontStack||nt,$e=Z[Ke]=Z[Ke]||{};this.calculateGlyphDependencies(We.text,$e,et,this.allowVerticalPlacement,ot)}}}v.get("symbol-placement")==="line"&&(this.features=function(oe){const he={},xe={},fe=[];let be=0;function Ee(nt){fe.push(oe[nt]),be++}function Le(nt,et,We){const ot=xe[nt];return delete xe[nt],xe[et]=ot,fe[ot].geometry[0].pop(),fe[ot].geometry[0]=fe[ot].geometry[0].concat(We[0]),ot}function it(nt,et,We){const ot=he[et];return delete he[et],he[nt]=ot,fe[ot].geometry[0].shift(),fe[ot].geometry[0]=We[0].concat(fe[ot].geometry[0]),ot}function ut(nt,et,We){const ot=We?et[0][et[0].length-1]:et[0][0];return`${nt}:${ot.x}:${ot.y}`}for(let nt=0;nt<oe.length;nt++){const et=oe[nt],We=et.geometry,ot=et.text?et.text.toString():null;if(!ot){Ee(nt);continue}const Ke=ut(ot,We),$e=ut(ot,We,!0);if(Ke in xe&&$e in he&&xe[Ke]!==he[$e]){const _t=it(Ke,$e,We),dt=Le(Ke,$e,fe[_t].geometry);delete he[Ke],delete xe[$e],xe[ut(ot,fe[dt].geometry,!0)]=dt,fe[_t].geometry=null}else Ke in xe?Le(Ke,$e,We):$e in he?it(Ke,$e,We):(Ee(nt),he[Ke]=be-1,xe[$e]=be-1)}return fe.filter(nt=>nt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((oe,he)=>oe.sortKey-he.sortKey)}update(r,l,d){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(r,l,this.layers,d),this.icon.programConfigurations.updatePaintArrays(r,l,this.layers,d))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(r){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(r),this.iconCollisionBox.upload(r)),this.text.upload(r,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(r,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(r,l){const d=this.lineVertexArray.length;if(r.segment!==void 0){let m=r.dist(l[r.segment+1]),v=r.dist(l[r.segment]);const x={};for(let S=r.segment+1;S<l.length;S++)x[S]={x:l[S].x,y:l[S].y,tileUnitDistanceFromAnchor:m},S<l.length-1&&(m+=l[S+1].dist(l[S]));for(let S=r.segment||0;S>=0;S--)x[S]={x:l[S].x,y:l[S].y,tileUnitDistanceFromAnchor:v},S>0&&(v+=l[S-1].dist(l[S]));for(let S=0;S<l.length;S++){const E=x[S];this.lineVertexArray.emplaceBack(E.x,E.y,E.tileUnitDistanceFromAnchor)}}return{lineStartIndex:d,lineLength:this.lineVertexArray.length-d}}addSymbols(r,l,d,m,v,x,S,E,I,D,O,U){const Z=r.indexArray,H=r.layoutVertexArray,J=r.segments.prepareSegment(4*l.length,H,Z,this.canOverlap?x.sortKey:void 0),oe=this.glyphOffsetArray.length,he=J.vertexLength,xe=this.allowVerticalPlacement&&S===a.ai.vertical?Math.PI/2:0,fe=x.text&&x.text.sections;for(let be=0;be<l.length;be++){const{tl:Ee,tr:Le,bl:it,br:ut,tex:nt,pixelOffsetTL:et,pixelOffsetBR:We,minFontScaleX:ot,minFontScaleY:Ke,glyphOffset:$e,isSDF:_t,sectionIndex:dt}=l[be],Nt=J.vertexLength,mn=$e[1];jp(H,E.x,E.y,Ee.x,mn+Ee.y,nt.x,nt.y,d,_t,et.x,et.y,ot,Ke),jp(H,E.x,E.y,Le.x,mn+Le.y,nt.x+nt.w,nt.y,d,_t,We.x,et.y,ot,Ke),jp(H,E.x,E.y,it.x,mn+it.y,nt.x,nt.y+nt.h,d,_t,et.x,We.y,ot,Ke),jp(H,E.x,E.y,ut.x,mn+ut.y,nt.x+nt.w,nt.y+nt.h,d,_t,We.x,We.y,ot,Ke),qv(r.dynamicLayoutVertexArray,E,xe),Z.emplaceBack(Nt,Nt+1,Nt+2),Z.emplaceBack(Nt+1,Nt+2,Nt+3),J.vertexLength+=4,J.primitiveLength+=2,this.glyphOffsetArray.emplaceBack($e[0]),be!==l.length-1&&dt===l[be+1].sectionIndex||r.programConfigurations.populatePaintArrays(H.length,x,x.index,{},U,fe&&fe[dt])}r.placedSymbolArray.emplaceBack(E.x,E.y,oe,this.glyphOffsetArray.length-oe,he,I,D,E.segment,d?d[0]:0,d?d[1]:0,m[0],m[1],S,0,!1,0,O)}_addCollisionDebugVertex(r,l,d,m,v,x){return l.emplaceBack(0,0),r.emplaceBack(d.x,d.y,m,v,Math.round(x.x),Math.round(x.y))}addCollisionDebugVertices(r,l,d,m,v,x,S){const E=v.segments.prepareSegment(4,v.layoutVertexArray,v.indexArray),I=E.vertexLength,D=v.layoutVertexArray,O=v.collisionVertexArray,U=S.anchorX,Z=S.anchorY;this._addCollisionDebugVertex(D,O,x,U,Z,new M(r,l)),this._addCollisionDebugVertex(D,O,x,U,Z,new M(d,l)),this._addCollisionDebugVertex(D,O,x,U,Z,new M(d,m)),this._addCollisionDebugVertex(D,O,x,U,Z,new M(r,m)),E.vertexLength+=4;const H=v.indexArray;H.emplaceBack(I,I+1),H.emplaceBack(I+1,I+2),H.emplaceBack(I+2,I+3),H.emplaceBack(I+3,I),E.primitiveLength+=4}addDebugCollisionBoxes(r,l,d,m){for(let v=r;v<l;v++){const x=this.collisionBoxArray.get(v);this.addCollisionDebugVertices(x.x1,x.y1,x.x2,x.y2,m?this.textCollisionBox:this.iconCollisionBox,x.anchorPoint,d)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Zv(On,hS.members,Jn),this.iconCollisionBox=new Zv(On,hS.members,Jn);for(let r=0;r<this.symbolInstances.length;r++){const l=this.symbolInstances.get(r);this.addDebugCollisionBoxes(l.textBoxStartIndex,l.textBoxEndIndex,l,!0),this.addDebugCollisionBoxes(l.verticalTextBoxStartIndex,l.verticalTextBoxEndIndex,l,!0),this.addDebugCollisionBoxes(l.iconBoxStartIndex,l.iconBoxEndIndex,l,!1),this.addDebugCollisionBoxes(l.verticalIconBoxStartIndex,l.verticalIconBoxEndIndex,l,!1)}}_deserializeCollisionBoxesForSymbol(r,l,d,m,v,x,S,E,I){const D={};for(let O=l;O<d;O++){const U=r.get(O);D.textBox={x1:U.x1,y1:U.y1,x2:U.x2,y2:U.y2,anchorPointX:U.anchorPointX,anchorPointY:U.anchorPointY},D.textFeatureIndex=U.featureIndex;break}for(let O=m;O<v;O++){const U=r.get(O);D.verticalTextBox={x1:U.x1,y1:U.y1,x2:U.x2,y2:U.y2,anchorPointX:U.anchorPointX,anchorPointY:U.anchorPointY},D.verticalTextFeatureIndex=U.featureIndex;break}for(let O=x;O<S;O++){const U=r.get(O);D.iconBox={x1:U.x1,y1:U.y1,x2:U.x2,y2:U.y2,anchorPointX:U.anchorPointX,anchorPointY:U.anchorPointY},D.iconFeatureIndex=U.featureIndex;break}for(let O=E;O<I;O++){const U=r.get(O);D.verticalIconBox={x1:U.x1,y1:U.y1,x2:U.x2,y2:U.y2,anchorPointX:U.anchorPointX,anchorPointY:U.anchorPointY},D.verticalIconFeatureIndex=U.featureIndex;break}return D}deserializeCollisionBoxes(r){this.collisionArrays=[];for(let l=0;l<this.symbolInstances.length;l++){const d=this.symbolInstances.get(l);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(r,d.textBoxStartIndex,d.textBoxEndIndex,d.verticalTextBoxStartIndex,d.verticalTextBoxEndIndex,d.iconBoxStartIndex,d.iconBoxEndIndex,d.verticalIconBoxStartIndex,d.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(r,l){const d=r.placedSymbolArray.get(l),m=d.vertexStartIndex+4*d.numGlyphs;for(let v=d.vertexStartIndex;v<m;v+=4)r.indexArray.emplaceBack(v,v+1,v+2),r.indexArray.emplaceBack(v+1,v+2,v+3)}getSortedSymbolIndexes(r){if(this.sortedAngle===r&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const l=Math.sin(r),d=Math.cos(r),m=[],v=[],x=[];for(let S=0;S<this.symbolInstances.length;++S){x.push(S);const E=this.symbolInstances.get(S);m.push(0|Math.round(l*E.anchorX+d*E.anchorY)),v.push(E.featureIndex)}return x.sort((S,E)=>m[S]-m[E]||v[E]-v[S]),x}addToSortKeyRanges(r,l){const d=this.sortKeyRanges[this.sortKeyRanges.length-1];d&&d.sortKey===l?d.symbolInstanceEnd=r+1:this.sortKeyRanges.push({sortKey:l,symbolInstanceStart:r,symbolInstanceEnd:r+1})}sortFeatures(r){if(this.sortFeaturesByY&&this.sortedAngle!==r&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(r),this.sortedAngle=r,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const l of this.symbolInstanceIndexes){const d=this.symbolInstances.get(l);this.featureSortOrder.push(d.featureIndex),[d.rightJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.leftJustifiedTextSymbolIndex].forEach((m,v,x)=>{m>=0&&x.indexOf(m)===v&&this.addIndicesForPlacedSymbol(this.text,m)}),d.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,d.verticalPlacedTextSymbolIndex),d.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,d.placedIconSymbolIndex),d.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,d.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let AS,kS;st("SymbolBucket",ic,{omit:["layers","collisionBoxArray","features","compareText"]}),ic.MAX_GLYPHS=65535,ic.addDynamicAttributes=qv;var Wv={get paint(){return kS=kS||new $n({"icon-opacity":new Ct(ue.paint_symbol["icon-opacity"]),"icon-color":new Ct(ue.paint_symbol["icon-color"]),"icon-halo-color":new Ct(ue.paint_symbol["icon-halo-color"]),"icon-halo-width":new Ct(ue.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Ct(ue.paint_symbol["icon-halo-blur"]),"icon-translate":new pt(ue.paint_symbol["icon-translate"]),"icon-translate-anchor":new pt(ue.paint_symbol["icon-translate-anchor"]),"text-opacity":new Ct(ue.paint_symbol["text-opacity"]),"text-color":new Ct(ue.paint_symbol["text-color"],{runtimeType:Rr,getOverride:o=>o.textColor,hasOverride:o=>!!o.textColor}),"text-halo-color":new Ct(ue.paint_symbol["text-halo-color"]),"text-halo-width":new Ct(ue.paint_symbol["text-halo-width"]),"text-halo-blur":new Ct(ue.paint_symbol["text-halo-blur"]),"text-translate":new pt(ue.paint_symbol["text-translate"]),"text-translate-anchor":new pt(ue.paint_symbol["text-translate-anchor"])})},get layout(){return AS=AS||new $n({"symbol-placement":new pt(ue.layout_symbol["symbol-placement"]),"symbol-spacing":new pt(ue.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new pt(ue.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Ct(ue.layout_symbol["symbol-sort-key"]),"symbol-z-order":new pt(ue.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new pt(ue.layout_symbol["icon-allow-overlap"]),"icon-overlap":new pt(ue.layout_symbol["icon-overlap"]),"icon-ignore-placement":new pt(ue.layout_symbol["icon-ignore-placement"]),"icon-optional":new pt(ue.layout_symbol["icon-optional"]),"icon-rotation-alignment":new pt(ue.layout_symbol["icon-rotation-alignment"]),"icon-size":new Ct(ue.layout_symbol["icon-size"]),"icon-text-fit":new pt(ue.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new pt(ue.layout_symbol["icon-text-fit-padding"]),"icon-image":new Ct(ue.layout_symbol["icon-image"]),"icon-rotate":new Ct(ue.layout_symbol["icon-rotate"]),"icon-padding":new Ct(ue.layout_symbol["icon-padding"]),"icon-keep-upright":new pt(ue.layout_symbol["icon-keep-upright"]),"icon-offset":new Ct(ue.layout_symbol["icon-offset"]),"icon-anchor":new Ct(ue.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new pt(ue.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new pt(ue.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new pt(ue.layout_symbol["text-rotation-alignment"]),"text-field":new Ct(ue.layout_symbol["text-field"]),"text-font":new Ct(ue.layout_symbol["text-font"]),"text-size":new Ct(ue.layout_symbol["text-size"]),"text-max-width":new Ct(ue.layout_symbol["text-max-width"]),"text-line-height":new pt(ue.layout_symbol["text-line-height"]),"text-letter-spacing":new Ct(ue.layout_symbol["text-letter-spacing"]),"text-justify":new Ct(ue.layout_symbol["text-justify"]),"text-radial-offset":new Ct(ue.layout_symbol["text-radial-offset"]),"text-variable-anchor":new pt(ue.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Ct(ue.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Ct(ue.layout_symbol["text-anchor"]),"text-max-angle":new pt(ue.layout_symbol["text-max-angle"]),"text-writing-mode":new pt(ue.layout_symbol["text-writing-mode"]),"text-rotate":new Ct(ue.layout_symbol["text-rotate"]),"text-padding":new pt(ue.layout_symbol["text-padding"]),"text-keep-upright":new pt(ue.layout_symbol["text-keep-upright"]),"text-transform":new Ct(ue.layout_symbol["text-transform"]),"text-offset":new Ct(ue.layout_symbol["text-offset"]),"text-allow-overlap":new pt(ue.layout_symbol["text-allow-overlap"]),"text-overlap":new pt(ue.layout_symbol["text-overlap"]),"text-ignore-placement":new pt(ue.layout_symbol["text-ignore-placement"]),"text-optional":new pt(ue.layout_symbol["text-optional"])})}};class IS{constructor(r){if(r.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=r.property.overrides?r.property.overrides.runtimeType:Rs,this.defaultValue=r}evaluate(r){if(r.formattedSection){const l=this.defaultValue.property.overrides;if(l&&l.hasOverride(r.formattedSection))return l.getOverride(r.formattedSection)}return r.feature&&r.featureState?this.defaultValue.evaluate(r.feature,r.featureState):this.defaultValue.property.specification.default}eachChild(r){this.defaultValue.isConstant()||r(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}st("FormatSectionOverride",IS,{omit:["defaultValue"]});class Up extends Oi{constructor(r){super(r,Wv)}recalculate(r,l){if(super.recalculate(r,l),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const d=this.layout.get("text-writing-mode");if(d){const m=[];for(const v of d)m.indexOf(v)<0&&m.push(v);this.layout._values["text-writing-mode"]=m}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(r,l,d,m){const v=this.layout.get(r).evaluate(l,{},d,m),x=this._unevaluatedLayout._values[r];return x.isDataDriven()||Nu(x.value)||!v?v:function(S,E){return E.replace(/{([^{}]+)}/g,(I,D)=>S&&D in S?String(S[D]):"")}(l.properties,v)}createBucket(r){return new ic(r)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const r of Wv.paint.overridableProperties){if(!Up.hasPaintOverride(this.layout,r))continue;const l=this.paint.get(r),d=new IS(l),m=new Ah(d,l.property.specification);let v=null;v=l.value.kind==="constant"||l.value.kind==="source"?new kh("source",m):new Vu("composite",m,l.value.zoomStops),this.paint._values[r]=new Dr(l.property,v,l.parameters)}}_handleOverridablePaintPropertyUpdate(r,l,d){return!(!this.layout||l.isDataDriven()||d.isDataDriven())&&Up.hasPaintOverride(this.layout,r)}static hasPaintOverride(r,l){const d=r.get("text-field"),m=Wv.paint.properties[l];let v=!1;const x=S=>{for(const E of S)if(m.overrides&&m.overrides.hasOverride(E))return void(v=!0)};if(d.value.kind==="constant"&&d.value.value instanceof Cr)x(d.value.value.sections);else if(d.value.kind==="source"){const S=I=>{v||(I instanceof ko&&Sn(I.value)===re?x(I.value.sections):I instanceof Fu?x(I.sections):I.eachChild(S))},E=d.value;E._styleExpression&&S(E._styleExpression.expression)}return v}}let MS;var CL={get paint(){return MS=MS||new $n({"background-color":new pt(ue.paint_background["background-color"]),"background-pattern":new qh(ue.paint_background["background-pattern"]),"background-opacity":new pt(ue.paint_background["background-opacity"])})}};class TL extends Oi{constructor(r){super(r,CL)}}let RS;var EL={get paint(){return RS=RS||new $n({"raster-opacity":new pt(ue.paint_raster["raster-opacity"]),"raster-hue-rotate":new pt(ue.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new pt(ue.paint_raster["raster-brightness-min"]),"raster-brightness-max":new pt(ue.paint_raster["raster-brightness-max"]),"raster-saturation":new pt(ue.paint_raster["raster-saturation"]),"raster-contrast":new pt(ue.paint_raster["raster-contrast"]),"raster-resampling":new pt(ue.paint_raster["raster-resampling"]),"raster-fade-duration":new pt(ue.paint_raster["raster-fade-duration"])})}};class PL extends Oi{constructor(r){super(r,EL)}}class AL extends Oi{constructor(r){super(r,{}),this.onAdd=l=>{this.implementation.onAdd&&this.implementation.onAdd(l,l.painter.context.gl)},this.onRemove=l=>{this.implementation.onRemove&&this.implementation.onRemove(l,l.painter.context.gl)},this.implementation=r}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class kL{constructor(r){this._callback=r,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const Hv=63710088e-1;class Da{constructor(r,l){if(isNaN(r)||isNaN(l))throw new Error(`Invalid LngLat object: (${r}, ${l})`);if(this.lng=+r,this.lat=+l,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Da(Ie(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(r){const l=Math.PI/180,d=this.lat*l,m=r.lat*l,v=Math.sin(d)*Math.sin(m)+Math.cos(d)*Math.cos(m)*Math.cos((r.lng-this.lng)*l);return Hv*Math.acos(Math.min(v,1))}static convert(r){if(r instanceof Da)return r;if(Array.isArray(r)&&(r.length===2||r.length===3))return new Da(Number(r[0]),Number(r[1]));if(!Array.isArray(r)&&typeof r=="object"&&r!==null)return new Da(Number("lng"in r?r.lng:r.lon),Number(r.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const DS=2*Math.PI*Hv;function zS(o){return DS*Math.cos(o*Math.PI/180)}function LS(o){return(180+o)/360}function OS(o){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o*Math.PI/360)))/360}function FS(o,r){return o/zS(r)}function NS(o){return 360*o-180}function Kv(o){return 360/Math.PI*Math.atan(Math.exp((180-360*o)*Math.PI/180))-90}class qp{constructor(r,l,d=0){this.x=+r,this.y=+l,this.z=+d}static fromLngLat(r,l=0){const d=Da.convert(r);return new qp(LS(d.lng),OS(d.lat),FS(l,d.lat))}toLngLat(){return new Da(NS(this.x),Kv(this.y))}toAltitude(){return this.z*zS(Kv(this.y))}meterInMercatorCoordinateUnits(){return 1/DS*(r=Kv(this.y),1/Math.cos(r*Math.PI/180));var r}}function BS(o,r,l){var d=2*Math.PI*6378137/256/Math.pow(2,l);return[o*d-2*Math.PI*6378137/2,r*d-2*Math.PI*6378137/2]}class Xv{constructor(r,l,d){if(r<0||r>25||d<0||d>=Math.pow(2,r)||l<0||l>=Math.pow(2,r))throw new Error(`x=${l}, y=${d}, z=${r} outside of bounds. 0<=x<${Math.pow(2,r)}, 0<=y<${Math.pow(2,r)} 0<=z<=25 `);this.z=r,this.x=l,this.y=d,this.key=dd(0,r,r,l,d)}equals(r){return this.z===r.z&&this.x===r.x&&this.y===r.y}url(r,l,d){const m=(x=this.y,S=this.z,E=BS(256*(v=this.x),256*(x=Math.pow(2,S)-x-1),S),I=BS(256*(v+1),256*(x+1),S),E[0]+","+E[1]+","+I[0]+","+I[1]);var v,x,S,E,I;const D=function(O,U,Z){let H,J="";for(let oe=O;oe>0;oe--)H=1<<oe-1,J+=(U&H?1:0)+(Z&H?2:0);return J}(this.z,this.x,this.y);return r[(this.x+this.y)%r.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(d==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,l>1?"@2x":"").replace(/{quadkey}/g,D).replace(/{bbox-epsg-3857}/g,m)}isChildOf(r){const l=this.z-r.z;return l>0&&r.x===this.x>>l&&r.y===this.y>>l}getTilePoint(r){const l=Math.pow(2,this.z);return new M((r.x*l-this.x)*Xn,(r.y*l-this.y)*Xn)}toString(){return`${this.z}/${this.x}/${this.y}`}}class VS{constructor(r,l){this.wrap=r,this.canonical=l,this.key=dd(r,l.z,l.z,l.x,l.y)}}class Wi{constructor(r,l,d,m,v){if(r<d)throw new Error(`overscaledZ should be >= z; overscaledZ = ${r}; z = ${d}`);this.overscaledZ=r,this.wrap=l,this.canonical=new Xv(d,+m,+v),this.key=dd(l,r,d,m,v)}clone(){return new Wi(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(r){return this.overscaledZ===r.overscaledZ&&this.wrap===r.wrap&&this.canonical.equals(r.canonical)}scaledTo(r){if(r>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${r}; overscaledZ = ${this.overscaledZ}`);const l=this.canonical.z-r;return r>this.canonical.z?new Wi(r,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Wi(r,this.wrap,r,this.canonical.x>>l,this.canonical.y>>l)}calculateScaledKey(r,l){if(r>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${r}; overscaledZ = ${this.overscaledZ}`);const d=this.canonical.z-r;return r>this.canonical.z?dd(this.wrap*+l,r,this.canonical.z,this.canonical.x,this.canonical.y):dd(this.wrap*+l,r,r,this.canonical.x>>d,this.canonical.y>>d)}isChildOf(r){if(r.wrap!==this.wrap)return!1;const l=this.canonical.z-r.canonical.z;return r.overscaledZ===0||r.overscaledZ<this.overscaledZ&&r.canonical.x===this.canonical.x>>l&&r.canonical.y===this.canonical.y>>l}children(r){if(this.overscaledZ>=r)return[new Wi(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const l=this.canonical.z+1,d=2*this.canonical.x,m=2*this.canonical.y;return[new Wi(l,this.wrap,l,d,m),new Wi(l,this.wrap,l,d+1,m),new Wi(l,this.wrap,l,d,m+1),new Wi(l,this.wrap,l,d+1,m+1)]}isLessThan(r){return this.wrap<r.wrap||!(this.wrap>r.wrap)&&(this.overscaledZ<r.overscaledZ||!(this.overscaledZ>r.overscaledZ)&&(this.canonical.x<r.canonical.x||!(this.canonical.x>r.canonical.x)&&this.canonical.y<r.canonical.y))}wrapped(){return new Wi(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(r){return new Wi(this.overscaledZ,r,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new VS(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(r){return this.canonical.getTilePoint(new qp(r.x-this.wrap,r.y))}}function dd(o,r,l,d,m){(o*=2)<0&&(o=-1*o-1);const v=1<<l;return(v*v*o+v*m+d).toString(36)+l.toString(36)+r.toString(36)}st("CanonicalTileID",Xv),st("OverscaledTileID",Wi,{omit:["posMatrix"]});class $S{constructor(r,l,d,m=1,v=1,x=1,S=0){if(this.uid=r,l.height!==l.width)throw new RangeError("DEM tiles must be square");if(d&&!["mapbox","terrarium","custom"].includes(d))return void xt(`"${d}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=l.height;const E=this.dim=l.height-2;switch(this.data=new Uint32Array(l.data.buffer),d){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=m,this.greenFactor=v,this.blueFactor=x,this.baseShift=S;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let I=0;I<E;I++)this.data[this._idx(-1,I)]=this.data[this._idx(0,I)],this.data[this._idx(E,I)]=this.data[this._idx(E-1,I)],this.data[this._idx(I,-1)]=this.data[this._idx(I,0)],this.data[this._idx(I,E)]=this.data[this._idx(I,E-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(E,-1)]=this.data[this._idx(E-1,0)],this.data[this._idx(-1,E)]=this.data[this._idx(0,E-1)],this.data[this._idx(E,E)]=this.data[this._idx(E-1,E-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let I=0;I<E;I++)for(let D=0;D<E;D++){const O=this.get(I,D);O>this.max&&(this.max=O),O<this.min&&(this.min=O)}}get(r,l){const d=new Uint8Array(this.data.buffer),m=4*this._idx(r,l);return this.unpack(d[m],d[m+1],d[m+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(r,l){if(r<-1||r>=this.dim+1||l<-1||l>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(l+1)*this.stride+(r+1)}unpack(r,l,d){return r*this.redFactor+l*this.greenFactor+d*this.blueFactor-this.baseShift}getPixels(){return new Zi({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(r,l,d){if(this.dim!==r.dim)throw new Error("dem dimension mismatch");let m=l*this.dim,v=l*this.dim+this.dim,x=d*this.dim,S=d*this.dim+this.dim;switch(l){case-1:m=v-1;break;case 1:v=m+1}switch(d){case-1:x=S-1;break;case 1:S=x+1}const E=-l*this.dim,I=-d*this.dim;for(let D=x;D<S;D++)for(let O=m;O<v;O++)this.data[this._idx(O,D)]=r.data[this._idx(O+E,D+I)]}}st("DEMData",$S);class jS{constructor(r){this._stringToNumber={},this._numberToString=[];for(let l=0;l<r.length;l++){const d=r[l];this._stringToNumber[d]=l,this._numberToString[l]=d}}encode(r){return this._stringToNumber[r]}decode(r){if(r>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${r} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[r]}}class US{constructor(r,l,d,m,v){this.type="Feature",this._vectorTileFeature=r,r._z=l,r._x=d,r._y=m,this.properties=r.properties,this.id=v}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(r){this._geometry=r}toJSON(){const r={geometry:this.geometry};for(const l in this)l!=="_geometry"&&l!=="_vectorTileFeature"&&(r[l]=this[l]);return r}}class qS{constructor(r,l){this.tileID=r,this.x=r.canonical.x,this.y=r.canonical.y,this.z=r.canonical.z,this.grid=new Ta(Xn,16,0),this.grid3D=new Ta(Xn,16,0),this.featureIndexArray=new Fe,this.promoteId=l}insert(r,l,d,m,v,x){const S=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(d,m,v);const E=x?this.grid3D:this.grid;for(let I=0;I<l.length;I++){const D=l[I],O=[1/0,1/0,-1/0,-1/0];for(let U=0;U<D.length;U++){const Z=D[U];O[0]=Math.min(O[0],Z.x),O[1]=Math.min(O[1],Z.y),O[2]=Math.max(O[2],Z.x),O[3]=Math.max(O[3],Z.y)}O[0]<Xn&&O[1]<Xn&&O[2]>=0&&O[3]>=0&&E.insert(S,O[0],O[1],O[2],O[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Ia.VectorTile(new Nv(this.rawTileData)).layers,this.sourceLayerCoder=new jS(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(r,l,d,m){this.loadVTLayers();const v=r.params||{},x=Xn/r.tileSize/r.scale,S=Mh(v.filter),E=r.queryGeometry,I=r.queryPadding*x,D=ZS(E),O=this.grid.query(D.minX-I,D.minY-I,D.maxX+I,D.maxY+I),U=ZS(r.cameraQueryGeometry),Z=this.grid3D.query(U.minX-I,U.minY-I,U.maxX+I,U.maxY+I,(oe,he,xe,fe)=>function(be,Ee,Le,it,ut){for(const et of be)if(Ee<=et.x&&Le<=et.y&&it>=et.x&&ut>=et.y)return!0;const nt=[new M(Ee,Le),new M(Ee,ut),new M(it,ut),new M(it,Le)];if(be.length>2){for(const et of nt)if(Qu(be,et))return!0}for(let et=0;et<be.length-1;et++)if(az(be[et],be[et+1],nt))return!0;return!1}(r.cameraQueryGeometry,oe-I,he-I,xe+I,fe+I));for(const oe of Z)O.push(oe);O.sort(IL);const H={};let J;for(let oe=0;oe<O.length;oe++){const he=O[oe];if(he===J)continue;J=he;const xe=this.featureIndexArray.get(he);let fe=null;this.loadMatchingFeature(H,xe.bucketIndex,xe.sourceLayerIndex,xe.featureIndex,S,v.layers,v.availableImages,l,d,m,(be,Ee,Le)=>(fe||(fe=Vl(be)),Ee.queryIntersectsFeature(E,be,Le,fe,this.z,r.transform,x,r.pixelPosMatrix)))}return H}loadMatchingFeature(r,l,d,m,v,x,S,E,I,D,O){const U=this.bucketLayerIDs[l];if(x&&!function(oe,he){for(let xe=0;xe<oe.length;xe++)if(he.indexOf(oe[xe])>=0)return!0;return!1}(x,U))return;const Z=this.sourceLayerCoder.decode(d),H=this.vtLayers[Z].feature(m);if(v.needGeometry){const oe=$l(H,!0);if(!v.filter(new fn(this.tileID.overscaledZ),oe,this.tileID.canonical))return}else if(!v.filter(new fn(this.tileID.overscaledZ),H))return;const J=this.getId(H,Z);for(let oe=0;oe<U.length;oe++){const he=U[oe];if(x&&x.indexOf(he)<0)continue;const xe=E[he];if(!xe)continue;let fe={};J&&D&&(fe=D.getState(xe.sourceLayer||"_geojsonTileLayer",J));const be=Se({},I[he]);be.paint=GS(be.paint,xe.paint,H,fe,S),be.layout=GS(be.layout,xe.layout,H,fe,S);const Ee=!O||O(H,xe,fe);if(!Ee)continue;const Le=new US(H,this.z,this.x,this.y,J);Le.layer=be;let it=r[he];it===void 0&&(it=r[he]=[]),it.push({featureIndex:m,feature:Le,intersectionZ:Ee})}}lookupSymbolFeatures(r,l,d,m,v,x,S,E){const I={};this.loadVTLayers();const D=Mh(v);for(const O of r)this.loadMatchingFeature(I,d,m,O,D,x,S,E,l);return I}hasLayer(r){for(const l of this.bucketLayerIDs)for(const d of l)if(r===d)return!0;return!1}getId(r,l){let d=r.id;return this.promoteId&&(d=r.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[l]],typeof d=="boolean"&&(d=Number(d))),d}}function GS(o,r,l,d,m){return ze(o,(v,x)=>{const S=r instanceof Ku?r.get(x):null;return S&&S.evaluate?S.evaluate(l,d,m):S})}function ZS(o){let r=1/0,l=1/0,d=-1/0,m=-1/0;for(const v of o)r=Math.min(r,v.x),l=Math.min(l,v.y),d=Math.max(d,v.x),m=Math.max(m,v.y);return{minX:r,minY:l,maxX:d,maxY:m}}function IL(o,r){return r-o}function WS(o,r,l,d,m){const v=[];for(let x=0;x<o.length;x++){const S=o[x];let E;for(let I=0;I<S.length-1;I++){let D=S[I],O=S[I+1];D.x<r&&O.x<r||(D.x<r?D=new M(r,D.y+(r-D.x)/(O.x-D.x)*(O.y-D.y))._round():O.x<r&&(O=new M(r,D.y+(r-D.x)/(O.x-D.x)*(O.y-D.y))._round()),D.y<l&&O.y<l||(D.y<l?D=new M(D.x+(l-D.y)/(O.y-D.y)*(O.x-D.x),l)._round():O.y<l&&(O=new M(D.x+(l-D.y)/(O.y-D.y)*(O.x-D.x),l)._round()),D.x>=d&&O.x>=d||(D.x>=d?D=new M(d,D.y+(d-D.x)/(O.x-D.x)*(O.y-D.y))._round():O.x>=d&&(O=new M(d,D.y+(d-D.x)/(O.x-D.x)*(O.y-D.y))._round()),D.y>=m&&O.y>=m||(D.y>=m?D=new M(D.x+(m-D.y)/(O.y-D.y)*(O.x-D.x),m)._round():O.y>=m&&(O=new M(D.x+(m-D.y)/(O.y-D.y)*(O.x-D.x),m)._round()),E&&D.equals(E[E.length-1])||(E=[D],v.push(E)),E.push(O)))))}}return v}st("FeatureIndex",qS,{omit:["rawTileData","sourceLayerCoder"]});class za extends M{constructor(r,l,d,m){super(r,l),this.angle=d,m!==void 0&&(this.segment=m)}clone(){return new za(this.x,this.y,this.angle,this.segment)}}function HS(o,r,l,d,m){if(r.segment===void 0||l===0)return!0;let v=r,x=r.segment+1,S=0;for(;S>-l/2;){if(x--,x<0)return!1;S-=o[x].dist(v),v=o[x]}S+=o[x].dist(o[x+1]),x++;const E=[];let I=0;for(;S<l/2;){const D=o[x],O=o[x+1];if(!O)return!1;let U=o[x-1].angleTo(D)-D.angleTo(O);for(U=Math.abs((U+3*Math.PI)%(2*Math.PI)-Math.PI),E.push({distance:S,angleDelta:U}),I+=U;S-E[0].distance>d;)I-=E.shift().angleDelta;if(I>m)return!1;x++,S+=D.dist(O)}return!0}function KS(o){let r=0;for(let l=0;l<o.length-1;l++)r+=o[l].dist(o[l+1]);return r}function XS(o,r,l){return o?.6*r*l:0}function QS(o,r){return Math.max(o?o.right-o.left:0,r?r.right-r.left:0)}function ML(o,r,l,d,m,v){const x=XS(l,m,v),S=QS(l,d)*v;let E=0;const I=KS(o)/2;for(let D=0;D<o.length-1;D++){const O=o[D],U=o[D+1],Z=O.dist(U);if(E+Z>I){const H=(I-E)/Z,J=di.number(O.x,U.x,H),oe=di.number(O.y,U.y,H),he=new za(J,oe,U.angleTo(O),D);return he._round(),!x||HS(o,he,S,x,r)?he:void 0}E+=Z}}function RL(o,r,l,d,m,v,x,S,E){const I=XS(d,v,x),D=QS(d,m),O=D*x,U=o[0].x===0||o[0].x===E||o[0].y===0||o[0].y===E;return r-O<r/4&&(r=O+r/4),YS(o,U?r/2*S%r:(D/2+2*v)*x*S%r,r,I,l,O,U,!1,E)}function YS(o,r,l,d,m,v,x,S,E){const I=v/2,D=KS(o);let O=0,U=r-l,Z=[];for(let H=0;H<o.length-1;H++){const J=o[H],oe=o[H+1],he=J.dist(oe),xe=oe.angleTo(J);for(;U+l<O+he;){U+=l;const fe=(U-O)/he,be=di.number(J.x,oe.x,fe),Ee=di.number(J.y,oe.y,fe);if(be>=0&&be<E&&Ee>=0&&Ee<E&&U-I>=0&&U+I<=D){const Le=new za(be,Ee,xe,H);Le._round(),d&&!HS(o,Le,v,d,m)||Z.push(Le)}}O+=he}return S||Z.length||x||(Z=YS(o,O/2,l,d,m,v,x,!0,E)),Z}st("Anchor",za);const sc=yi;function JS(o,r,l,d){const m=[],v=o.image,x=v.pixelRatio,S=v.paddedRect.w-2*sc,E=v.paddedRect.h-2*sc,I=o.right-o.left,D=o.bottom-o.top,O=v.stretchX||[[0,S]],U=v.stretchY||[[0,E]],Z=(We,ot)=>We+ot[1]-ot[0],H=O.reduce(Z,0),J=U.reduce(Z,0),oe=S-H,he=E-J;let xe=0,fe=H,be=0,Ee=J,Le=0,it=oe,ut=0,nt=he;if(v.content&&d){const We=v.content;xe=Gp(O,0,We[0]),be=Gp(U,0,We[1]),fe=Gp(O,We[0],We[2]),Ee=Gp(U,We[1],We[3]),Le=We[0]-xe,ut=We[1]-be,it=We[2]-We[0]-fe,nt=We[3]-We[1]-Ee}const et=(We,ot,Ke,$e)=>{const _t=Zp(We.stretch-xe,fe,I,o.left),dt=Wp(We.fixed-Le,it,We.stretch,H),Nt=Zp(ot.stretch-be,Ee,D,o.top),mn=Wp(ot.fixed-ut,nt,ot.stretch,J),bn=Zp(Ke.stretch-xe,fe,I,o.left),nr=Wp(Ke.fixed-Le,it,Ke.stretch,H),Ni=Zp($e.stretch-be,Ee,D,o.top),Yr=Wp($e.fixed-ut,nt,$e.stretch,J),Qn=new M(_t,Nt),vr=new M(bn,Nt),Pr=new M(bn,Ni),Jr=new M(_t,Ni),ei=new M(dt/x,mn/x),rr=new M(nr/x,Yr/x),ir=r*Math.PI/180;if(ir){const Or=Math.sin(ir),vi=Math.cos(ir),_i=[vi,-Or,Or,vi];Qn._matMult(_i),vr._matMult(_i),Jr._matMult(_i),Pr._matMult(_i)}const Lr=We.stretch+We.fixed,ti=ot.stretch+ot.fixed;return{tl:Qn,tr:vr,bl:Jr,br:Pr,tex:{x:v.paddedRect.x+sc+Lr,y:v.paddedRect.y+sc+ti,w:Ke.stretch+Ke.fixed-Lr,h:$e.stretch+$e.fixed-ti},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:ei,pixelOffsetBR:rr,minFontScaleX:it/x/I,minFontScaleY:nt/x/D,isSDF:l}};if(d&&(v.stretchX||v.stretchY)){const We=e2(O,oe,H),ot=e2(U,he,J);for(let Ke=0;Ke<We.length-1;Ke++){const $e=We[Ke],_t=We[Ke+1];for(let dt=0;dt<ot.length-1;dt++)m.push(et($e,ot[dt],_t,ot[dt+1]))}}else m.push(et({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:S+1},{fixed:0,stretch:E+1}));return m}function Gp(o,r,l){let d=0;for(const m of o)d+=Math.max(r,Math.min(l,m[1]))-Math.max(r,Math.min(l,m[0]));return d}function e2(o,r,l){const d=[{fixed:-sc,stretch:0}];for(const[m,v]of o){const x=d[d.length-1];d.push({fixed:m-x.stretch,stretch:x.stretch}),d.push({fixed:m-x.stretch,stretch:x.stretch+(v-m)})}return d.push({fixed:r+sc,stretch:l}),d}function Zp(o,r,l,d){return o/r*l+d}function Wp(o,r,l,d){return o-r*l/d}class Hp{constructor(r,l,d,m,v,x,S,E,I,D){if(this.boxStartIndex=r.length,I){let O=x.top,U=x.bottom;const Z=x.collisionPadding;Z&&(O-=Z[1],U+=Z[3]);let H=U-O;H>0&&(H=Math.max(10,H),this.circleDiameter=H)}else{let O=x.top*S-E[0],U=x.bottom*S+E[2],Z=x.left*S-E[3],H=x.right*S+E[1];const J=x.collisionPadding;if(J&&(Z-=J[0]*S,O-=J[1]*S,H+=J[2]*S,U+=J[3]*S),D){const oe=new M(Z,O),he=new M(H,O),xe=new M(Z,U),fe=new M(H,U),be=D*Math.PI/180;oe._rotate(be),he._rotate(be),xe._rotate(be),fe._rotate(be),Z=Math.min(oe.x,he.x,xe.x,fe.x),H=Math.max(oe.x,he.x,xe.x,fe.x),O=Math.min(oe.y,he.y,xe.y,fe.y),U=Math.max(oe.y,he.y,xe.y,fe.y)}r.emplaceBack(l.x,l.y,Z,O,H,U,d,m,v)}this.boxEndIndex=r.length}}class DL{constructor(r=[],l=zL){if(this.data=r,this.length=this.data.length,this.compare=l,this.length>0)for(let d=(this.length>>1)-1;d>=0;d--)this._down(d)}push(r){this.data.push(r),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const r=this.data[0],l=this.data.pop();return this.length--,this.length>0&&(this.data[0]=l,this._down(0)),r}peek(){return this.data[0]}_up(r){const{data:l,compare:d}=this,m=l[r];for(;r>0;){const v=r-1>>1,x=l[v];if(d(m,x)>=0)break;l[r]=x,r=v}l[r]=m}_down(r){const{data:l,compare:d}=this,m=this.length>>1,v=l[r];for(;r<m;){let x=1+(r<<1),S=l[x];const E=x+1;if(E<this.length&&d(l[E],S)<0&&(x=E,S=l[E]),d(S,v)>=0)break;l[r]=S,r=x}l[r]=v}}function zL(o,r){return o<r?-1:o>r?1:0}function LL(o,r=1,l=!1){let d=1/0,m=1/0,v=-1/0,x=-1/0;const S=o[0];for(let Z=0;Z<S.length;Z++){const H=S[Z];(!Z||H.x<d)&&(d=H.x),(!Z||H.y<m)&&(m=H.y),(!Z||H.x>v)&&(v=H.x),(!Z||H.y>x)&&(x=H.y)}const E=Math.min(v-d,x-m);let I=E/2;const D=new DL([],OL);if(E===0)return new M(d,m);for(let Z=d;Z<v;Z+=E)for(let H=m;H<x;H+=E)D.push(new oc(Z+I,H+I,I,o));let O=function(Z){let H=0,J=0,oe=0;const he=Z[0];for(let xe=0,fe=he.length,be=fe-1;xe<fe;be=xe++){const Ee=he[xe],Le=he[be],it=Ee.x*Le.y-Le.x*Ee.y;J+=(Ee.x+Le.x)*it,oe+=(Ee.y+Le.y)*it,H+=3*it}return new oc(J/H,oe/H,0,Z)}(o),U=D.length;for(;D.length;){const Z=D.pop();(Z.d>O.d||!O.d)&&(O=Z,l&&console.log("found best %d after %d probes",Math.round(1e4*Z.d)/1e4,U)),Z.max-O.d<=r||(I=Z.h/2,D.push(new oc(Z.p.x-I,Z.p.y-I,I,o)),D.push(new oc(Z.p.x+I,Z.p.y-I,I,o)),D.push(new oc(Z.p.x-I,Z.p.y+I,I,o)),D.push(new oc(Z.p.x+I,Z.p.y+I,I,o)),U+=4)}return l&&(console.log(`num probes: ${U}`),console.log(`best distance: ${O.d}`)),O.p}function OL(o,r){return r.max-o.max}function oc(o,r,l,d){this.p=new M(o,r),this.h=l,this.d=function(m,v){let x=!1,S=1/0;for(let E=0;E<v.length;E++){const I=v[E];for(let D=0,O=I.length,U=O-1;D<O;U=D++){const Z=I[D],H=I[U];Z.y>m.y!=H.y>m.y&&m.x<(H.x-Z.x)*(m.y-Z.y)/(H.y-Z.y)+Z.x&&(x=!x),S=Math.min(S,Ob(m,Z,H))}}return(x?1:-1)*Math.sqrt(S)}(this.p,d),this.max=this.d+this.h*Math.SQRT2}var Er;a.aq=void 0,(Er=a.aq||(a.aq={}))[Er.center=1]="center",Er[Er.left=2]="left",Er[Er.right=3]="right",Er[Er.top=4]="top",Er[Er.bottom=5]="bottom",Er[Er["top-left"]=6]="top-left",Er[Er["top-right"]=7]="top-right",Er[Er["bottom-left"]=8]="bottom-left",Er[Er["bottom-right"]=9]="bottom-right";const La=7,Qv=Number.POSITIVE_INFINITY;function t2(o,r){return r[1]!==Qv?function(l,d,m){let v=0,x=0;switch(d=Math.abs(d),m=Math.abs(m),l){case"top-right":case"top-left":case"top":x=m-La;break;case"bottom-right":case"bottom-left":case"bottom":x=-m+La}switch(l){case"top-right":case"bottom-right":case"right":v=-d;break;case"top-left":case"bottom-left":case"left":v=d}return[v,x]}(o,r[0],r[1]):function(l,d){let m=0,v=0;d<0&&(d=0);const x=d/Math.SQRT2;switch(l){case"top-right":case"top-left":v=x-La;break;case"bottom-right":case"bottom-left":v=-x+La;break;case"bottom":v=-d+La;break;case"top":v=d-La}switch(l){case"top-right":case"bottom-right":m=-x;break;case"top-left":case"bottom-left":m=x;break;case"left":m=d;break;case"right":m=-d}return[m,v]}(o,r[0])}function n2(o,r,l){var d;const m=o.layout,v=(d=m.get("text-variable-anchor-offset"))===null||d===void 0?void 0:d.evaluate(r,{},l);if(v){const S=v.values,E=[];for(let I=0;I<S.length;I+=2){const D=E[I]=S[I],O=S[I+1].map(U=>U*tr);D.startsWith("top")?O[1]-=La:D.startsWith("bottom")&&(O[1]+=La),E[I+1]=O}return new Ri(E)}const x=m.get("text-variable-anchor");if(x){let S;S=o._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[m.get("text-radial-offset").evaluate(r,{},l)*tr,Qv]:m.get("text-offset").evaluate(r,{},l).map(I=>I*tr);const E=[];for(const I of x)E.push(I,t2(I,S));return new Ri(E)}return null}function Yv(o){switch(o){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function FL(o,r,l,d,m,v,x,S,E,I,D){let O=v.textMaxSize.evaluate(r,{});O===void 0&&(O=x);const U=o.layers[0].layout,Z=U.get("icon-offset").evaluate(r,{},D),H=i2(l.horizontal),J=x/24,oe=o.tilePixelRatio*J,he=o.tilePixelRatio*O/24,xe=o.tilePixelRatio*S,fe=o.tilePixelRatio*U.get("symbol-spacing"),be=U.get("text-padding")*o.tilePixelRatio,Ee=function($e,_t,dt,Nt=1){const mn=$e.get("icon-padding").evaluate(_t,{},dt),bn=mn&&mn.values;return[bn[0]*Nt,bn[1]*Nt,bn[2]*Nt,bn[3]*Nt]}(U,r,D,o.tilePixelRatio),Le=U.get("text-max-angle")/180*Math.PI,it=U.get("text-rotation-alignment")!=="viewport"&&U.get("symbol-placement")!=="point",ut=U.get("icon-rotation-alignment")==="map"&&U.get("symbol-placement")!=="point",nt=U.get("symbol-placement"),et=fe/2,We=U.get("icon-text-fit");let ot;d&&We!=="none"&&(o.allowVerticalPlacement&&l.vertical&&(ot=ES(d,l.vertical,We,U.get("icon-text-fit-padding"),Z,J)),H&&(d=ES(d,H,We,U.get("icon-text-fit-padding"),Z,J)));const Ke=($e,_t)=>{_t.x<0||_t.x>=Xn||_t.y<0||_t.y>=Xn||function(dt,Nt,mn,bn,nr,Ni,Yr,Qn,vr,Pr,Jr,ei,rr,ir,Lr,ti,Or,vi,_i,sr,Ut,Fr,Ar,or,gs){const Vs=dt.addToLineVertexArray(Nt,mn);let $s,jo,ys,Hi,xi=0,Uo=0,md=0,l2=0,o_=-1,a_=-1;const qo={};let u2=No("");if(dt.allowVerticalPlacement&&bn.vertical){const Nr=Qn.layout.get("text-rotate").evaluate(Ut,{},or)+90;ys=new Hp(vr,Nt,Pr,Jr,ei,bn.vertical,rr,ir,Lr,Nr),Yr&&(Hi=new Hp(vr,Nt,Pr,Jr,ei,Yr,Or,vi,Lr,Nr))}if(nr){const Nr=Qn.layout.get("icon-rotate").evaluate(Ut,{}),Ki=Qn.layout.get("icon-text-fit")!=="none",Ul=JS(nr,Nr,Ar,Ki),Us=Yr?JS(Yr,Nr,Ar,Ki):void 0;jo=new Hp(vr,Nt,Pr,Jr,ei,nr,Or,vi,!1,Nr),xi=4*Ul.length;const ql=dt.iconSizeData;let po=null;ql.kind==="source"?(po=[fo*Qn.layout.get("icon-size").evaluate(Ut,{})],po[0]>Ra&&xt(`${dt.layerIds[0]}: Value for "icon-size" is >= ${hd}. Reduce your "icon-size".`)):ql.kind==="composite"&&(po=[fo*Fr.compositeIconSizes[0].evaluate(Ut,{},or),fo*Fr.compositeIconSizes[1].evaluate(Ut,{},or)],(po[0]>Ra||po[1]>Ra)&&xt(`${dt.layerIds[0]}: Value for "icon-size" is >= ${hd}. Reduce your "icon-size".`)),dt.addSymbols(dt.icon,Ul,po,sr,_i,Ut,a.ai.none,Nt,Vs.lineStartIndex,Vs.lineLength,-1,or),o_=dt.icon.placedSymbolArray.length-1,Us&&(Uo=4*Us.length,dt.addSymbols(dt.icon,Us,po,sr,_i,Ut,a.ai.vertical,Nt,Vs.lineStartIndex,Vs.lineLength,-1,or),a_=dt.icon.placedSymbolArray.length-1)}const c2=Object.keys(bn.horizontal);for(const Nr of c2){const Ki=bn.horizontal[Nr];if(!$s){u2=No(Ki.text);const Us=Qn.layout.get("text-rotate").evaluate(Ut,{},or);$s=new Hp(vr,Nt,Pr,Jr,ei,Ki,rr,ir,Lr,Us)}const Ul=Ki.positionedLines.length===1;if(md+=r2(dt,Nt,Ki,Ni,Qn,Lr,Ut,ti,Vs,bn.vertical?a.ai.horizontal:a.ai.horizontalOnly,Ul?c2:[Nr],qo,o_,Fr,or),Ul)break}bn.vertical&&(l2+=r2(dt,Nt,bn.vertical,Ni,Qn,Lr,Ut,ti,Vs,a.ai.vertical,["vertical"],qo,a_,Fr,or));const VL=$s?$s.boxStartIndex:dt.collisionBoxArray.length,$L=$s?$s.boxEndIndex:dt.collisionBoxArray.length,jL=ys?ys.boxStartIndex:dt.collisionBoxArray.length,UL=ys?ys.boxEndIndex:dt.collisionBoxArray.length,qL=jo?jo.boxStartIndex:dt.collisionBoxArray.length,GL=jo?jo.boxEndIndex:dt.collisionBoxArray.length,ZL=Hi?Hi.boxStartIndex:dt.collisionBoxArray.length,WL=Hi?Hi.boxEndIndex:dt.collisionBoxArray.length;let js=-1;const Xp=(Nr,Ki)=>Nr&&Nr.circleDiameter?Math.max(Nr.circleDiameter,Ki):Ki;js=Xp($s,js),js=Xp(ys,js),js=Xp(jo,js),js=Xp(Hi,js);const h2=js>-1?1:0;h2&&(js*=gs/tr),dt.glyphOffsetArray.length>=ic.MAX_GLYPHS&&xt("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Ut.sortKey!==void 0&&dt.addToSortKeyRanges(dt.symbolInstances.length,Ut.sortKey);const HL=n2(Qn,Ut,or),[KL,XL]=function(Nr,Ki){const Ul=Nr.length,Us=Ki==null?void 0:Ki.values;if((Us==null?void 0:Us.length)>0)for(let ql=0;ql<Us.length;ql+=2){const po=Us[ql+1];Nr.emplaceBack(a.aq[Us[ql]],po[0],po[1])}return[Ul,Nr.length]}(dt.textAnchorOffsets,HL);dt.symbolInstances.emplaceBack(Nt.x,Nt.y,qo.right>=0?qo.right:-1,qo.center>=0?qo.center:-1,qo.left>=0?qo.left:-1,qo.vertical||-1,o_,a_,u2,VL,$L,jL,UL,qL,GL,ZL,WL,Pr,md,l2,xi,Uo,h2,0,rr,js,KL,XL)}(o,_t,$e,l,d,m,ot,o.layers[0],o.collisionBoxArray,r.index,r.sourceLayerIndex,o.index,oe,[be,be,be,be],it,E,xe,Ee,ut,Z,r,v,I,D,x)};if(nt==="line")for(const $e of WS(r.geometry,0,0,Xn,Xn)){const _t=RL($e,fe,Le,l.vertical||H,d,24,he,o.overscaling,Xn);for(const dt of _t)H&&NL(o,H.text,et,dt)||Ke($e,dt)}else if(nt==="line-center"){for(const $e of r.geometry)if($e.length>1){const _t=ML($e,Le,l.vertical||H,d,24,he);_t&&Ke($e,_t)}}else if(r.type==="Polygon")for(const $e of Iv(r.geometry,0)){const _t=LL($e,16);Ke($e[0],new za(_t.x,_t.y,0))}else if(r.type==="LineString")for(const $e of r.geometry)Ke($e,new za($e[0].x,$e[0].y,0));else if(r.type==="Point")for(const $e of r.geometry)for(const _t of $e)Ke([_t],new za(_t.x,_t.y,0))}function r2(o,r,l,d,m,v,x,S,E,I,D,O,U,Z,H){const J=function(xe,fe,be,Ee,Le,it,ut,nt){const et=Ee.layout.get("text-rotate").evaluate(it,{})*Math.PI/180,We=[];for(const ot of fe.positionedLines)for(const Ke of ot.positionedGlyphs){if(!Ke.rect)continue;const $e=Ke.rect||{};let _t=_S+1,dt=!0,Nt=1,mn=0;const bn=(Le||nt)&&Ke.vertical,nr=Ke.metrics.advance*Ke.scale/2;if(nt&&fe.verticalizable&&(mn=ot.lineOffset/2-(Ke.imageName?-(tr-Ke.metrics.width*Ke.scale)/2:(Ke.scale-1)*tr)),Ke.imageName){const sr=ut[Ke.imageName];dt=sr.sdf,Nt=sr.pixelRatio,_t=yi/Nt}const Ni=Le?[Ke.x+nr,Ke.y]:[0,0];let Yr=Le?[0,0]:[Ke.x+nr+be[0],Ke.y+be[1]-mn],Qn=[0,0];bn&&(Qn=Yr,Yr=[0,0]);const vr=Ke.metrics.isDoubleResolution?2:1,Pr=(Ke.metrics.left-_t)*Ke.scale-nr+Yr[0],Jr=(-Ke.metrics.top-_t)*Ke.scale+Yr[1],ei=Pr+$e.w/vr*Ke.scale/Nt,rr=Jr+$e.h/vr*Ke.scale/Nt,ir=new M(Pr,Jr),Lr=new M(ei,Jr),ti=new M(Pr,rr),Or=new M(ei,rr);if(bn){const sr=new M(-nr,nr-ud),Ut=-Math.PI/2,Fr=tr/2-nr,Ar=new M(5-ud-Fr,-(Ke.imageName?Fr:0)),or=new M(...Qn);ir._rotateAround(Ut,sr)._add(Ar)._add(or),Lr._rotateAround(Ut,sr)._add(Ar)._add(or),ti._rotateAround(Ut,sr)._add(Ar)._add(or),Or._rotateAround(Ut,sr)._add(Ar)._add(or)}if(et){const sr=Math.sin(et),Ut=Math.cos(et),Fr=[Ut,-sr,sr,Ut];ir._matMult(Fr),Lr._matMult(Fr),ti._matMult(Fr),Or._matMult(Fr)}const vi=new M(0,0),_i=new M(0,0);We.push({tl:ir,tr:Lr,bl:ti,br:Or,tex:$e,writingMode:fe.writingMode,glyphOffset:Ni,sectionIndex:Ke.sectionIndex,isSDF:dt,pixelOffsetTL:vi,pixelOffsetBR:_i,minFontScaleX:0,minFontScaleY:0})}return We}(0,l,S,m,v,x,d,o.allowVerticalPlacement),oe=o.textSizeData;let he=null;oe.kind==="source"?(he=[fo*m.layout.get("text-size").evaluate(x,{})],he[0]>Ra&&xt(`${o.layerIds[0]}: Value for "text-size" is >= ${hd}. Reduce your "text-size".`)):oe.kind==="composite"&&(he=[fo*Z.compositeTextSizes[0].evaluate(x,{},H),fo*Z.compositeTextSizes[1].evaluate(x,{},H)],(he[0]>Ra||he[1]>Ra)&&xt(`${o.layerIds[0]}: Value for "text-size" is >= ${hd}. Reduce your "text-size".`)),o.addSymbols(o.text,J,he,S,v,x,I,r,E.lineStartIndex,E.lineLength,U,H);for(const xe of D)O[xe]=o.text.placedSymbolArray.length-1;return 4*J.length}function i2(o){for(const r in o)return o[r];return null}function NL(o,r,l,d){const m=o.compareText;if(r in m){const v=m[r];for(let x=v.length-1;x>=0;x--)if(d.dist(v[x])<l)return!0}else m[r]=[];return m[r].push(d),!1}const s2=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Jv{static from(r){if(!(r instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[l,d]=new Uint8Array(r,0,2);if(l!==219)throw new Error("Data does not appear to be in a KDBush format.");const m=d>>4;if(m!==1)throw new Error(`Got v${m} data when expected v1.`);const v=s2[15&d];if(!v)throw new Error("Unrecognized array type.");const[x]=new Uint16Array(r,2,1),[S]=new Uint32Array(r,4,1);return new Jv(S,x,v,r)}constructor(r,l=64,d=Float64Array,m){if(isNaN(r)||r<0)throw new Error(`Unpexpected numItems value: ${r}.`);this.numItems=+r,this.nodeSize=Math.min(Math.max(+l,2),65535),this.ArrayType=d,this.IndexArrayType=r<65536?Uint16Array:Uint32Array;const v=s2.indexOf(this.ArrayType),x=2*r*this.ArrayType.BYTES_PER_ELEMENT,S=r*this.IndexArrayType.BYTES_PER_ELEMENT,E=(8-S%8)%8;if(v<0)throw new Error(`Unexpected typed array class: ${d}.`);m&&m instanceof ArrayBuffer?(this.data=m,this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+S+E,2*r),this._pos=2*r,this._finished=!0):(this.data=new ArrayBuffer(8+x+S+E),this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+S+E,2*r),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+v]),new Uint16Array(this.data,2,1)[0]=l,new Uint32Array(this.data,4,1)[0]=r)}add(r,l){const d=this._pos>>1;return this.ids[d]=d,this.coords[this._pos++]=r,this.coords[this._pos++]=l,d}finish(){const r=this._pos>>1;if(r!==this.numItems)throw new Error(`Added ${r} items when expected ${this.numItems}.`);return e_(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(r,l,d,m){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:v,coords:x,nodeSize:S}=this,E=[0,v.length-1,0],I=[];for(;E.length;){const D=E.pop()||0,O=E.pop()||0,U=E.pop()||0;if(O-U<=S){for(let oe=U;oe<=O;oe++){const he=x[2*oe],xe=x[2*oe+1];he>=r&&he<=d&&xe>=l&&xe<=m&&I.push(v[oe])}continue}const Z=U+O>>1,H=x[2*Z],J=x[2*Z+1];H>=r&&H<=d&&J>=l&&J<=m&&I.push(v[Z]),(D===0?r<=H:l<=J)&&(E.push(U),E.push(Z-1),E.push(1-D)),(D===0?d>=H:m>=J)&&(E.push(Z+1),E.push(O),E.push(1-D))}return I}within(r,l,d){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:m,coords:v,nodeSize:x}=this,S=[0,m.length-1,0],E=[],I=d*d;for(;S.length;){const D=S.pop()||0,O=S.pop()||0,U=S.pop()||0;if(O-U<=x){for(let oe=U;oe<=O;oe++)a2(v[2*oe],v[2*oe+1],r,l)<=I&&E.push(m[oe]);continue}const Z=U+O>>1,H=v[2*Z],J=v[2*Z+1];a2(H,J,r,l)<=I&&E.push(m[Z]),(D===0?r-d<=H:l-d<=J)&&(S.push(U),S.push(Z-1),S.push(1-D)),(D===0?r+d>=H:l+d>=J)&&(S.push(Z+1),S.push(O),S.push(1-D))}return E}}function e_(o,r,l,d,m,v){if(m-d<=l)return;const x=d+m>>1;o2(o,r,x,d,m,v),e_(o,r,l,d,x-1,1-v),e_(o,r,l,x+1,m,1-v)}function o2(o,r,l,d,m,v){for(;m>d;){if(m-d>600){const I=m-d+1,D=l-d+1,O=Math.log(I),U=.5*Math.exp(2*O/3),Z=.5*Math.sqrt(O*U*(I-U)/I)*(D-I/2<0?-1:1);o2(o,r,l,Math.max(d,Math.floor(l-D*U/I+Z)),Math.min(m,Math.floor(l+(I-D)*U/I+Z)),v)}const x=r[2*l+v];let S=d,E=m;for(fd(o,r,d,l),r[2*m+v]>x&&fd(o,r,d,m);S<E;){for(fd(o,r,S,E),S++,E--;r[2*S+v]<x;)S++;for(;r[2*E+v]>x;)E--}r[2*d+v]===x?fd(o,r,d,E):(E++,fd(o,r,E,m)),E<=l&&(d=E+1),l<=E&&(m=E-1)}}function fd(o,r,l,d){t_(o,l,d),t_(r,2*l,2*d),t_(r,2*l+1,2*d+1)}function t_(o,r,l){const d=o[r];o[r]=o[l],o[l]=d}function a2(o,r,l,d){const m=o-l,v=r-d;return m*m+v*v}var n_;a.bh=void 0,(n_=a.bh||(a.bh={})).create="create",n_.load="load",n_.fullLoad="fullLoad";let Kp=null,pd=[];const r_=1e3/60,i_="loadTime",s_="fullLoadTime",BL={mark(o){performance.mark(o)},frame(o){const r=o;Kp!=null&&pd.push(r-Kp),Kp=r},clearMetrics(){Kp=null,pd=[],performance.clearMeasures(i_),performance.clearMeasures(s_);for(const o in a.bh)performance.clearMarks(a.bh[o])},getPerformanceMetrics(){performance.measure(i_,a.bh.create,a.bh.load),performance.measure(s_,a.bh.create,a.bh.fullLoad);const o=performance.getEntriesByName(i_)[0].duration,r=performance.getEntriesByName(s_)[0].duration,l=pd.length,d=1/(pd.reduce((v,x)=>v+x,0)/l/1e3),m=pd.filter(v=>v>r_).reduce((v,x)=>v+(x-r_)/r_,0);return{loadTime:o,fullLoadTime:r,fps:d,percentDroppedFrames:m/(l+m)*100,totalFrames:l}}};a.$=function(o,r,l){var d,m,v,x,S,E,I,D,O,U,Z,H,J=l[0],oe=l[1],he=l[2];return r===o?(o[12]=r[0]*J+r[4]*oe+r[8]*he+r[12],o[13]=r[1]*J+r[5]*oe+r[9]*he+r[13],o[14]=r[2]*J+r[6]*oe+r[10]*he+r[14],o[15]=r[3]*J+r[7]*oe+r[11]*he+r[15]):(m=r[1],v=r[2],x=r[3],S=r[4],E=r[5],I=r[6],D=r[7],O=r[8],U=r[9],Z=r[10],H=r[11],o[0]=d=r[0],o[1]=m,o[2]=v,o[3]=x,o[4]=S,o[5]=E,o[6]=I,o[7]=D,o[8]=O,o[9]=U,o[10]=Z,o[11]=H,o[12]=d*J+S*oe+O*he+r[12],o[13]=m*J+E*oe+U*he+r[13],o[14]=v*J+I*oe+Z*he+r[14],o[15]=x*J+D*oe+H*he+r[15]),o},a.A=Yu,a.B=di,a.C=class{constructor(o,r,l){this.receive=d=>{const m=d.data,v=m.id;if(v&&(!m.targetMapId||this.mapId===m.targetMapId))if(m.type==="<cancel>"){delete this.tasks[v];const x=this.cancelCallbacks[v];delete this.cancelCallbacks[v],x&&x()}else St()||m.mustQueue?(this.tasks[v]=m,this.taskQueue.push(v),this.invoker.trigger()):this.processTask(v,m)},this.process=()=>{if(!this.taskQueue.length)return;const d=this.taskQueue.shift(),m=this.tasks[d];delete this.tasks[d],this.taskQueue.length&&this.invoker.trigger(),m&&this.processTask(d,m)},this.target=o,this.parent=r,this.mapId=l,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},this.invoker=new kL(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=St()?o:window}send(o,r,l,d,m=!1){const v=Math.round(1e18*Math.random()).toString(36).substring(0,10);l&&(this.callbacks[v]=l);const x=[],S={id:v,type:o,hasCallback:!!l,targetMapId:d,mustQueue:m,sourceMapId:this.mapId,data:uo(r,x)};return this.target.postMessage(S,{transfer:x}),{cancel:()=>{l&&delete this.callbacks[v],this.target.postMessage({id:v,type:"<cancel>",targetMapId:d,sourceMapId:this.mapId})}}}processTask(o,r){if(r.type==="<response>"){const l=this.callbacks[o];delete this.callbacks[o],l&&(r.error?l(Ea(r.error)):l(null,Ea(r.data)))}else{let l=!1;const d=[],m=r.hasCallback?(S,E)=>{l=!0,delete this.cancelCallbacks[o];const I={id:o,type:"<response>",sourceMapId:this.mapId,error:S?uo(S):null,data:uo(E,d)};this.target.postMessage(I,{transfer:d})}:S=>{l=!0};let v=null;const x=Ea(r.data);if(this.parent[r.type])v=this.parent[r.type](r.sourceMapId,x,m);else if("getWorkerSource"in this.parent){const S=r.type.split(".");v=this.parent.getWorkerSource(r.sourceMapId,S[0],x.source)[S[1]](x,m)}else m(new Error(`Could not find function ${r.type}`));!l&&v&&v.cancel&&(this.cancelCallbacks[o]=v.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},a.D=pt,a.E=ke,a.F=function(o,r){const l={};for(let d=0;d<r.length;d++){const m=r[d];m in o&&(l[m]=o[m])}return l},a.G=LS,a.H=OS,a.I=Vv,a.J=N,a.K=W,a.L=Da,a.M=Ht,a.N=Xn,a.O=Wi,a.P=M,a.Q=En,a.R=Zi,a.S=pn,a.T=Cp,a.U=qp,a.V=class extends Oo{},a.W=Xv,a.X=function(o,r){const l=window.document.createElement("video");l.muted=!0,l.onloadstart=function(){r(null,l)};for(let d=0;d<o.length;d++){const m=window.document.createElement("source");ki(o[d])||(l.crossOrigin="Anonymous"),m.src=o[d],l.appendChild(m)}return{cancel:()=>{}}},a.Y=Ze,a.Z=function(){var o=new Yu(16);return Yu!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=0,o[12]=0,o[13]=0,o[14]=0),o[0]=1,o[5]=1,o[10]=1,o[15]=1,o},a._=w,a.a=ct,a.a$=class extends G{},a.a0=function(o,r,l){var d=l[0],m=l[1],v=l[2];return o[0]=r[0]*d,o[1]=r[1]*d,o[2]=r[2]*d,o[3]=r[3]*d,o[4]=r[4]*m,o[5]=r[5]*m,o[6]=r[6]*m,o[7]=r[7]*m,o[8]=r[8]*v,o[9]=r[9]*v,o[10]=r[10]*v,o[11]=r[11]*v,o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15],o},a.a1=Vb,a.a2=function(){return qe++},a.a3=ie,a.a4=ic,a.a5=function(){mi.isLoading()||mi.isLoaded()||jh()!=="deferred"||Sp()},a.a6=Mh,a.a7=$l,a.a8=fn,a.a9=US,a.aA=Ll,a.aB=function(o){o=o.slice();const r=Object.create(null);for(let l=0;l<o.length;l++)r[o[l].id]=o[l];for(let l=0;l<o.length;l++)"ref"in o[l]&&(o[l]=Ye(o[l],r[o[l].ref]));return o},a.aC=function(o){if(o.type==="custom")return new AL(o);switch(o.type){case"background":return new TL(o);case"circle":return new cz(o);case"fill":return new Iz(o);case"fill-extrusion":return new Gz(o);case"heatmap":return new dz(o);case"hillshade":return new pz(o);case"line":return new Jz(o);case"raster":return new PL(o);case"symbol":return new Up(o)}},a.aD=Ge,a.aE=function(o,r){if(!o)return[{command:Xe.setStyle,args:[r]}];let l=[];try{if(!Ne(o.version,r.version))return[{command:Xe.setStyle,args:[r]}];Ne(o.center,r.center)||l.push({command:Xe.setCenter,args:[r.center]}),Ne(o.zoom,r.zoom)||l.push({command:Xe.setZoom,args:[r.zoom]}),Ne(o.bearing,r.bearing)||l.push({command:Xe.setBearing,args:[r.bearing]}),Ne(o.pitch,r.pitch)||l.push({command:Xe.setPitch,args:[r.pitch]}),Ne(o.sprite,r.sprite)||l.push({command:Xe.setSprite,args:[r.sprite]}),Ne(o.glyphs,r.glyphs)||l.push({command:Xe.setGlyphs,args:[r.glyphs]}),Ne(o.transition,r.transition)||l.push({command:Xe.setTransition,args:[r.transition]}),Ne(o.light,r.light)||l.push({command:Xe.setLight,args:[r.light]});const d={},m=[];(function(x,S,E,I){let D;for(D in S=S||{},x=x||{})Object.prototype.hasOwnProperty.call(x,D)&&(Object.prototype.hasOwnProperty.call(S,D)||_n(D,E,I));for(D in S)Object.prototype.hasOwnProperty.call(S,D)&&(Object.prototype.hasOwnProperty.call(x,D)?Ne(x[D],S[D])||(x[D].type==="geojson"&&S[D].type==="geojson"&&qi(x,S,D)?E.push({command:Xe.setGeoJSONSourceData,args:[D,S[D].data]}):An(D,S,E,I)):Vt(D,S,E))})(o.sources,r.sources,m,d);const v=[];o.layers&&o.layers.forEach(x=>{d[x.source]?l.push({command:Xe.removeLayer,args:[x.id]}):v.push(x)}),l=l.concat(m),function(x,S,E){S=S||[];const I=(x=x||[]).map(Ii),D=S.map(Ii),O=x.reduce(Gi,{}),U=S.reduce(Gi,{}),Z=I.slice(),H=Object.create(null);let J,oe,he,xe,fe,be,Ee;for(J=0,oe=0;J<I.length;J++)he=I[J],Object.prototype.hasOwnProperty.call(U,he)?oe++:(E.push({command:Xe.removeLayer,args:[he]}),Z.splice(Z.indexOf(he,oe),1));for(J=0,oe=0;J<D.length;J++)he=D[D.length-1-J],Z[Z.length-1-J]!==he&&(Object.prototype.hasOwnProperty.call(O,he)?(E.push({command:Xe.removeLayer,args:[he]}),Z.splice(Z.lastIndexOf(he,Z.length-oe),1)):oe++,be=Z[Z.length-J],E.push({command:Xe.addLayer,args:[U[he],be]}),Z.splice(Z.length-J,0,he),H[he]=!0);for(J=0;J<D.length;J++)if(he=D[J],xe=O[he],fe=U[he],!H[he]&&!Ne(xe,fe))if(Ne(xe.source,fe.source)&&Ne(xe["source-layer"],fe["source-layer"])&&Ne(xe.type,fe.type)){for(Ee in io(xe.layout,fe.layout,E,he,null,Xe.setLayoutProperty),io(xe.paint,fe.paint,E,he,null,Xe.setPaintProperty),Ne(xe.filter,fe.filter)||E.push({command:Xe.setFilter,args:[he,fe.filter]}),Ne(xe.minzoom,fe.minzoom)&&Ne(xe.maxzoom,fe.maxzoom)||E.push({command:Xe.setLayerZoomRange,args:[he,fe.minzoom,fe.maxzoom]}),xe)Object.prototype.hasOwnProperty.call(xe,Ee)&&Ee!=="layout"&&Ee!=="paint"&&Ee!=="filter"&&Ee!=="metadata"&&Ee!=="minzoom"&&Ee!=="maxzoom"&&(Ee.indexOf("paint.")===0?io(xe[Ee],fe[Ee],E,he,Ee.slice(6),Xe.setPaintProperty):Ne(xe[Ee],fe[Ee])||E.push({command:Xe.setLayerProperty,args:[he,Ee,fe[Ee]]}));for(Ee in fe)Object.prototype.hasOwnProperty.call(fe,Ee)&&!Object.prototype.hasOwnProperty.call(xe,Ee)&&Ee!=="layout"&&Ee!=="paint"&&Ee!=="filter"&&Ee!=="metadata"&&Ee!=="minzoom"&&Ee!=="maxzoom"&&(Ee.indexOf("paint.")===0?io(xe[Ee],fe[Ee],E,he,Ee.slice(6),Xe.setPaintProperty):Ne(xe[Ee],fe[Ee])||E.push({command:Xe.setLayerProperty,args:[he,Ee,fe[Ee]]}))}else E.push({command:Xe.removeLayer,args:[he]}),be=Z[Z.lastIndexOf(he)+1],E.push({command:Xe.addLayer,args:[fe,be]})}(v,r.layers,l)}catch(d){console.warn("Unable to compute style diff:",d),l=[{command:Xe.setStyle,args:[r]}]}return l},a.aF=function(o){const r=[],l=o.id;return l===void 0&&r.push({message:`layers.${l}: missing required property "id"`}),o.render===void 0&&r.push({message:`layers.${l}: missing required method "render"`}),o.renderingMode&&o.renderingMode!=="2d"&&o.renderingMode!=="3d"&&r.push({message:`layers.${l}: property "renderingMode" must be either "2d" or "3d"`}),r},a.aG=function o(r,l){if(Array.isArray(r)){if(!Array.isArray(l)||r.length!==l.length)return!1;for(let d=0;d<r.length;d++)if(!o(r[d],l[d]))return!1;return!0}if(typeof r=="object"&&r!==null&&l!==null){if(typeof l!="object"||Object.keys(r).length!==Object.keys(l).length)return!1;for(const d in r)if(!o(r[d],l[d]))return!1;return!0}return r===l},a.aH=ze,a.aI=Et,a.aJ=Ol,a.aK=function(o){return o({pluginStatus:Kr,pluginURL:co}),Ol.on("pluginStateChange",o),o},a.aL=class extends Bo{constructor(o,r){super(o,r),this.current=0}set(o){this.current!==o&&(this.current=o,this.gl.uniform1i(this.location,o))}},a.aM=Xu,a.aN=class extends Bo{constructor(o,r){super(o,r),this.current=vv}set(o){if(o[12]!==this.current[12]||o[0]!==this.current[0])return this.current=o,void this.gl.uniformMatrix4fv(this.location,!1,o);for(let r=1;r<16;r++)if(o[r]!==this.current[r]){this.current=o,this.gl.uniformMatrix4fv(this.location,!1,o);break}}},a.aO=Ap,a.aP=class extends Bo{constructor(o,r){super(o,r),this.current=[0,0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]&&o[2]===this.current[2]||(this.current=o,this.gl.uniform3f(this.location,o[0],o[1],o[2]))}},a.aQ=class extends Bo{constructor(o,r){super(o,r),this.current=[0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]||(this.current=o,this.gl.uniform2f(this.location,o[0],o[1]))}},a.aR=kp,a.aS=function(o,r,l,d,m,v,x){var S=1/(r-l),E=1/(d-m),I=1/(v-x);return o[0]=-2*S,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*E,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*I,o[11]=0,o[12]=(r+l)*S,o[13]=(m+d)*E,o[14]=(x+v)*I,o[15]=1,o},a.aT=sn,a.aU=uz,a.aV=class extends p{},a.aW=rL,a.aX=class extends _{},a.aY=function(o){return o<=1?1:Math.pow(2,Math.ceil(Math.log(o)/Math.LN2))},a.aZ=Gb,a.a_=Ue,a.aa=function(o){const r={};if(o.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(l,d,m,v)=>{const x=m||v;return r[d]=!x||x.toLowerCase(),""}),r["max-age"]){const l=parseInt(r["max-age"],10);isNaN(l)?delete r["max-age"]:r["max-age"]=l}return r},a.ab=function(o,r){const l=[];for(const d in o)d in r||l.push(d);return l},a.ac=function(o){if(je==null){const r=o.navigator?o.navigator.userAgent:null;je=!!o.safari||!(!r||!(/\b(iPad|iPhone|iPod)\b/.test(r)||r.match("Safari")&&!r.match("Chrome")))}return je},a.ad=Ce,a.ae=function(o,r,l){var d=Math.sin(l),m=Math.cos(l),v=r[0],x=r[1],S=r[2],E=r[3],I=r[4],D=r[5],O=r[6],U=r[7];return r!==o&&(o[8]=r[8],o[9]=r[9],o[10]=r[10],o[11]=r[11],o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15]),o[0]=v*m+I*d,o[1]=x*m+D*d,o[2]=S*m+O*d,o[3]=E*m+U*d,o[4]=I*m-v*d,o[5]=D*m-x*d,o[6]=O*m-S*d,o[7]=U*m-E*d,o},a.af=function(o){var r=new Yu(16);return r[0]=o[0],r[1]=o[1],r[2]=o[2],r[3]=o[3],r[4]=o[4],r[5]=o[5],r[6]=o[6],r[7]=o[7],r[8]=o[8],r[9]=o[9],r[10]=o[10],r[11]=o[11],r[12]=o[12],r[13]=o[13],r[14]=o[14],r[15]=o[15],r},a.ag=Dp,a.ah=function(o,r){let l=0,d=0;if(o.kind==="constant")d=o.layoutSize;else if(o.kind!=="source"){const{interpolationType:m,minZoom:v,maxZoom:x}=o,S=m?Ce(fi.interpolationFactor(m,r,v,x),0,1):0;o.kind==="camera"?d=di.number(o.minSize,o.maxSize,S):l=S}return{uSizeT:l,uSize:d}},a.aj=function(o,{uSize:r,uSizeT:l},{lowerSize:d,upperSize:m}){return o.kind==="source"?d/fo:o.kind==="composite"?di.number(d/fo,m/fo,l):r},a.ak=qv,a.al=function(o,r,l,d){const m=r.y-o.y,v=r.x-o.x,x=d.y-l.y,S=d.x-l.x,E=x*v-S*m;if(E===0)return null;const I=(S*(o.y-l.y)-x*(o.x-l.x))/E;return new M(o.x+I*v,o.y+I*m)},a.am=WS,a.an=zb,a.ao=Sv,a.ap=tr,a.ar=Uv,a.as=function(o,r){var l=r[0],d=r[1],m=r[2],v=r[3],x=r[4],S=r[5],E=r[6],I=r[7],D=r[8],O=r[9],U=r[10],Z=r[11],H=r[12],J=r[13],oe=r[14],he=r[15],xe=l*S-d*x,fe=l*E-m*x,be=l*I-v*x,Ee=d*E-m*S,Le=d*I-v*S,it=m*I-v*E,ut=D*J-O*H,nt=D*oe-U*H,et=D*he-Z*H,We=O*oe-U*J,ot=O*he-Z*J,Ke=U*he-Z*oe,$e=xe*Ke-fe*ot+be*We+Ee*et-Le*nt+it*ut;return $e?(o[0]=(S*Ke-E*ot+I*We)*($e=1/$e),o[1]=(m*ot-d*Ke-v*We)*$e,o[2]=(J*it-oe*Le+he*Ee)*$e,o[3]=(U*Le-O*it-Z*Ee)*$e,o[4]=(E*et-x*Ke-I*nt)*$e,o[5]=(l*Ke-m*et+v*nt)*$e,o[6]=(oe*be-H*it-he*fe)*$e,o[7]=(D*it-U*be+Z*fe)*$e,o[8]=(x*ot-S*et+I*ut)*$e,o[9]=(d*et-l*ot-v*ut)*$e,o[10]=(H*Le-J*be+he*xe)*$e,o[11]=(O*be-D*Le-Z*xe)*$e,o[12]=(S*nt-x*We-E*ut)*$e,o[13]=(l*We-d*nt+m*ut)*$e,o[14]=(J*fe-H*Ee-oe*xe)*$e,o[15]=(D*Ee-O*fe+U*xe)*$e,o):null},a.at=Yv,a.au=jv,a.av=Jv,a.aw=function(){const o={},r=ue.$version;for(const l in ue.$root){const d=ue.$root[l];if(d.required){let m=null;m=l==="version"?r:d.type==="array"?[]:{},m!=null&&(o[l]=m)}}return o},a.ax=Xe,a.ay=_p,a.az=Zr,a.b=function(o,r){const l=new Blob([new Uint8Array(o)],{type:"image/png"});createImageBitmap(l).then(d=>{r(null,d)}).catch(d=>{r(new Error(`Could not load image because of ${d.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})},a.b0=gr,a.b1=function(o,r){var l=o[0],d=o[1],m=o[2],v=o[3],x=o[4],S=o[5],E=o[6],I=o[7],D=o[8],O=o[9],U=o[10],Z=o[11],H=o[12],J=o[13],oe=o[14],he=o[15],xe=r[0],fe=r[1],be=r[2],Ee=r[3],Le=r[4],it=r[5],ut=r[6],nt=r[7],et=r[8],We=r[9],ot=r[10],Ke=r[11],$e=r[12],_t=r[13],dt=r[14],Nt=r[15];return Math.abs(l-xe)<=Qr*Math.max(1,Math.abs(l),Math.abs(xe))&&Math.abs(d-fe)<=Qr*Math.max(1,Math.abs(d),Math.abs(fe))&&Math.abs(m-be)<=Qr*Math.max(1,Math.abs(m),Math.abs(be))&&Math.abs(v-Ee)<=Qr*Math.max(1,Math.abs(v),Math.abs(Ee))&&Math.abs(x-Le)<=Qr*Math.max(1,Math.abs(x),Math.abs(Le))&&Math.abs(S-it)<=Qr*Math.max(1,Math.abs(S),Math.abs(it))&&Math.abs(E-ut)<=Qr*Math.max(1,Math.abs(E),Math.abs(ut))&&Math.abs(I-nt)<=Qr*Math.max(1,Math.abs(I),Math.abs(nt))&&Math.abs(D-et)<=Qr*Math.max(1,Math.abs(D),Math.abs(et))&&Math.abs(O-We)<=Qr*Math.max(1,Math.abs(O),Math.abs(We))&&Math.abs(U-ot)<=Qr*Math.max(1,Math.abs(U),Math.abs(ot))&&Math.abs(Z-Ke)<=Qr*Math.max(1,Math.abs(Z),Math.abs(Ke))&&Math.abs(H-$e)<=Qr*Math.max(1,Math.abs(H),Math.abs($e))&&Math.abs(J-_t)<=Qr*Math.max(1,Math.abs(J),Math.abs(_t))&&Math.abs(oe-dt)<=Qr*Math.max(1,Math.abs(oe),Math.abs(dt))&&Math.abs(he-Nt)<=Qr*Math.max(1,Math.abs(he),Math.abs(Nt))},a.b2=function(o,r){return o[0]=r[0],o[1]=r[1],o[2]=r[2],o[3]=r[3],o[4]=r[4],o[5]=r[5],o[6]=r[6],o[7]=r[7],o[8]=r[8],o[9]=r[9],o[10]=r[10],o[11]=r[11],o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15],o},a.b3=function(o,r,l){return o[0]=r[0]*l[0],o[1]=r[1]*l[1],o[2]=r[2]*l[2],o[3]=r[3]*l[3],o},a.b4=function(o,r){return o[0]*r[0]+o[1]*r[1]+o[2]*r[2]+o[3]*r[3]},a.b5=Ie,a.b6=VS,a.b7=FS,a.b8=function(o,r,l,d,m){var v,x=1/Math.tan(r/2);return o[0]=x/l,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=x,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=-1,o[12]=0,o[13]=0,o[15]=0,m!=null&&m!==1/0?(o[10]=(m+d)*(v=1/(d-m)),o[14]=2*m*d*v):(o[10]=-1,o[14]=-2*d),o},a.b9=function(o,r,l){var d=Math.sin(l),m=Math.cos(l),v=r[4],x=r[5],S=r[6],E=r[7],I=r[8],D=r[9],O=r[10],U=r[11];return r!==o&&(o[0]=r[0],o[1]=r[1],o[2]=r[2],o[3]=r[3],o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15]),o[4]=v*m+I*d,o[5]=x*m+D*d,o[6]=S*m+O*d,o[7]=E*m+U*d,o[8]=I*m-v*d,o[9]=D*m-x*d,o[10]=O*m-S*d,o[11]=U*m-E*d,o},a.bA=P,a.bB=dS,a.bC=Bu,a.bD=mi,a.ba=ne,a.bb=pe,a.bc=function(o,r){return o[0]=r[0],o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=r[1],o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=r[2],o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o},a.bd=class extends Bl{},a.be=Hv,a.bf=NS,a.bg=BL,a.bi=Ai,a.bj=function(o,r,l=!1){if(Kr===Fh||Kr===Nh||Kr===Bh)throw new Error("setRTLTextPlugin cannot be called multiple times.");co=cr.resolveURL(o),Kr=Fh,Vh=r,$h(),l||Sp()},a.bk=jh,a.bl=function(o,r){const l={};for(let m=0;m<o.length;m++){const v=r&&r[o[m].id]||Uu(o[m]);r&&(r[o[m].id]=v);let x=l[v];x||(x=l[v]=[]),x.push(o[m])}const d=[];for(const m in l)d.push(l[m]);return d},a.bm=st,a.bn=jS,a.bo=qS,a.bp=wS,a.bq=function(o){o.bucket.createArrays(),o.bucket.tilePixelRatio=Xn/(512*o.bucket.overscaling),o.bucket.compareText={},o.bucket.iconsNeedLinear=!1;const r=o.bucket.layers[0],l=r.layout,d=r._unevaluatedLayout._values,m={layoutIconSize:d["icon-size"].possiblyEvaluate(new fn(o.bucket.zoom+1),o.canonical),layoutTextSize:d["text-size"].possiblyEvaluate(new fn(o.bucket.zoom+1),o.canonical),textMaxSize:d["text-size"].possiblyEvaluate(new fn(18))};if(o.bucket.textSizeData.kind==="composite"){const{minZoom:I,maxZoom:D}=o.bucket.textSizeData;m.compositeTextSizes=[d["text-size"].possiblyEvaluate(new fn(I),o.canonical),d["text-size"].possiblyEvaluate(new fn(D),o.canonical)]}if(o.bucket.iconSizeData.kind==="composite"){const{minZoom:I,maxZoom:D}=o.bucket.iconSizeData;m.compositeIconSizes=[d["icon-size"].possiblyEvaluate(new fn(I),o.canonical),d["icon-size"].possiblyEvaluate(new fn(D),o.canonical)]}const v=l.get("text-line-height")*tr,x=l.get("text-rotation-alignment")!=="viewport"&&l.get("symbol-placement")!=="point",S=l.get("text-keep-upright"),E=l.get("text-size");for(const I of o.bucket.features){const D=l.get("text-font").evaluate(I,{},o.canonical).join(","),O=E.evaluate(I,{},o.canonical),U=m.layoutTextSize.evaluate(I,{},o.canonical),Z=m.layoutIconSize.evaluate(I,{},o.canonical),H={horizontal:{},vertical:void 0},J=I.text;let oe,he=[0,0];if(J){const be=J.toString(),Ee=l.get("text-letter-spacing").evaluate(I,{},o.canonical)*tr,Le=Lh(be)?Ee:0,it=l.get("text-anchor").evaluate(I,{},o.canonical),ut=n2(r,I,o.canonical);if(!ut){const Ke=l.get("text-radial-offset").evaluate(I,{},o.canonical);he=Ke?t2(it,[Ke*tr,Qv]):l.get("text-offset").evaluate(I,{},o.canonical).map($e=>$e*tr)}let nt=x?"center":l.get("text-justify").evaluate(I,{},o.canonical);const et=l.get("symbol-placement"),We=et==="point"?l.get("text-max-width").evaluate(I,{},o.canonical)*tr:0,ot=()=>{o.bucket.allowVerticalPlacement&&zh(be)&&(H.vertical=Vp(J,o.glyphMap,o.glyphPositions,o.imagePositions,D,We,v,it,"left",Le,he,a.ai.vertical,!0,et,U,O))};if(!x&&ut){const Ke=new Set;if(nt==="auto")for(let _t=0;_t<ut.values.length;_t+=2)Ke.add(Yv(ut.values[_t]));else Ke.add(nt);let $e=!1;for(const _t of Ke)if(!H.horizontal[_t])if($e)H.horizontal[_t]=H.horizontal[0];else{const dt=Vp(J,o.glyphMap,o.glyphPositions,o.imagePositions,D,We,v,"center",_t,Le,he,a.ai.horizontal,!1,et,U,O);dt&&(H.horizontal[_t]=dt,$e=dt.positionedLines.length===1)}ot()}else{nt==="auto"&&(nt=Yv(it));const Ke=Vp(J,o.glyphMap,o.glyphPositions,o.imagePositions,D,We,v,it,nt,Le,he,a.ai.horizontal,!1,et,U,O);Ke&&(H.horizontal[nt]=Ke),ot(),zh(be)&&x&&S&&(H.vertical=Vp(J,o.glyphMap,o.glyphPositions,o.imagePositions,D,We,v,it,nt,Le,he,a.ai.vertical,!1,et,U,O))}}let xe=!1;if(I.icon&&I.icon.name){const be=o.imageMap[I.icon.name];be&&(oe=xL(o.imagePositions[I.icon.name],l.get("icon-offset").evaluate(I,{},o.canonical),l.get("icon-anchor").evaluate(I,{},o.canonical)),xe=!!be.sdf,o.bucket.sdfIcons===void 0?o.bucket.sdfIcons=xe:o.bucket.sdfIcons!==xe&&xt("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(be.pixelRatio!==o.bucket.pixelRatio||l.get("icon-rotate").constantOr(1)!==0)&&(o.bucket.iconsNeedLinear=!0))}const fe=i2(H.horizontal)||H.vertical;o.bucket.iconsInText=!!fe&&fe.iconsInText,(fe||oe)&&FL(o.bucket,I,H,oe,o.imageMap,m,U,Z,he,xe,o.canonical)}o.showCollisionBoxes&&o.bucket.generateCollisionDebugBuffers()},a.br=Ov,a.bs=Dv,a.bt=Lv,a.bu=class{constructor(o){this._marks={start:[o.url,"start"].join("#"),end:[o.url,"end"].join("#"),measure:o.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let o=performance.getEntriesByName(this._marks.measure);return o.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),o=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),o}},a.bv=Nv,a.bw=Ia,a.bx=function(o,r,l,d,m){return w(this,void 0,void 0,function*(){if(W())try{return yield Ht(o,r,l,d,m)}catch{}return function(v,x,S,E,I){const D=v.width,O=v.height;Zt&&Rt||(Zt=new OffscreenCanvas(D,O),Rt=Zt.getContext("2d",{willReadFrequently:!0})),Zt.width=D,Zt.height=O,Rt.drawImage(v,0,0,D,O);const U=Rt.getImageData(x,S,E,I);return Rt.clearRect(0,0,D,O),U.data}(o,r,l,d,m)})},a.by=$S,a.bz=b,a.c=Gr,a.d=function(o,r){const l=new Image;l.onload=()=>{r(null,l),URL.revokeObjectURL(l.src),l.onload=null,window.requestAnimationFrame(()=>{l.src=Pt})},l.onerror=()=>r(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const d=new Blob([new Uint8Array(o)],{type:"image/png"});l.src=o.byteLength?URL.createObjectURL(d):Pt},a.e=Se,a.f=function(o,r){return as(Se(o,{type:"json"}),r)},a.g=Wr,a.h=cr,a.i=St,a.j=ge,a.k=Ms,a.l=no,a.m=as,a.n=function(o){return new Nv(o).readFields(pL,[])},a.o=function(o,r,l){if(!o.length)return l(null,[]);let d=o.length;const m=new Array(o.length);let v=null;o.forEach((x,S)=>{r(x,(E,I)=>{E&&(v=E),m[S]=I,--d==0&&l(v,m)})})},a.p=xS,a.q=td,a.r=$n,a.s=ki,a.t=pv,a.u=rt,a.v=ue,a.w=xt,a.x=Zu,a.y=Fs,a.z=function([o,r,l]){return r+=90,r*=Math.PI/180,l*=Math.PI/180,{x:o*Math.cos(r)*Math.sin(l),y:o*Math.sin(r)*Math.sin(l),z:o*Math.cos(l)}}}),h(["./shared"],function(a){class w{constructor($){this.keyCache={},$&&this.replace($)}replace($){this._layerConfigs={},this._layers={},this.update($,[])}update($,q){for(const se of $){this._layerConfigs[se.id]=se;const le=this._layers[se.id]=a.aC(se);le._featureFilter=a.a6(le.filter),this.keyCache[se.id]&&delete this.keyCache[se.id]}for(const se of q)delete this.keyCache[se],delete this._layerConfigs[se],delete this._layers[se];this.familiesBySource={};const Q=a.bl(Object.values(this._layerConfigs),this.keyCache);for(const se of Q){const le=se.map(Re=>this._layers[Re.id]),we=le[0];if(we.visibility==="none")continue;const me=we.source||"";let de=this.familiesBySource[me];de||(de=this.familiesBySource[me]={});const _e=we.sourceLayer||"_geojsonTileLayer";let Me=de[_e];Me||(Me=de[_e]=[]),Me.push(le)}}}class b{constructor($){const q={},Q=[];for(const me in $){const de=$[me],_e=q[me]={};for(const Me in de){const Re=de[+Me];if(!Re||Re.bitmap.width===0||Re.bitmap.height===0)continue;const Oe={x:0,y:0,w:Re.bitmap.width+2,h:Re.bitmap.height+2};Q.push(Oe),_e[Me]={rect:Oe,metrics:Re.metrics}}}const{w:se,h:le}=a.p(Q),we=new a.q({width:se||1,height:le||1});for(const me in $){const de=$[me];for(const _e in de){const Me=de[+_e];if(!Me||Me.bitmap.width===0||Me.bitmap.height===0)continue;const Re=q[me][_e].rect;a.q.copy(Me.bitmap,we,{x:0,y:0},{x:Re.x+1,y:Re.y+1},Me.bitmap)}}this.image=we,this.positions=q}}a.bm("GlyphAtlas",b);class P{constructor($){this.tileID=new a.O($.tileID.overscaledZ,$.tileID.wrap,$.tileID.canonical.z,$.tileID.canonical.x,$.tileID.canonical.y),this.uid=$.uid,this.zoom=$.zoom,this.pixelRatio=$.pixelRatio,this.tileSize=$.tileSize,this.source=$.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=$.showCollisionBoxes,this.collectResourceTiming=!!$.collectResourceTiming,this.returnDependencies=!!$.returnDependencies,this.promoteId=$.promoteId,this.inFlightDependencies=[],this.dependencySentinel=-1}parse($,q,Q,se,le){this.status="parsing",this.data=$,this.collisionBoxArray=new a.a3;const we=new a.bn(Object.keys($.layers).sort()),me=new a.bo(this.tileID,this.promoteId);me.bucketLayerIDs=[];const de={},_e={featureIndex:me,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Q},Me=q.familiesBySource[this.source];for(const Kt in Me){const Wt=$.layers[Kt];if(!Wt)continue;Wt.version===1&&a.w(`Vector tile source "${this.source}" layer "${Kt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Sr=we.encode(Kt),un=[];for(let Kn=0;Kn<Wt.length;Kn++){const pr=Wt.feature(Kn),Mi=me.getId(pr,Kt);un.push({feature:pr,id:Mi,index:Kn,sourceLayerIndex:Sr})}for(const Kn of Me[Kt]){const pr=Kn[0];pr.source!==this.source&&a.w(`layer.source = ${pr.source} does not equal this.source = ${this.source}`),pr.minzoom&&this.zoom<Math.floor(pr.minzoom)||pr.maxzoom&&this.zoom>=pr.maxzoom||pr.visibility!=="none"&&(A(Kn,this.zoom,Q),(de[pr.id]=pr.createBucket({index:me.bucketLayerIDs.length,layers:Kn,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Sr,sourceID:this.source})).populate(un,_e,this.tileID.canonical),me.bucketLayerIDs.push(Kn.map(Mi=>Mi.id)))}}let Re,Oe,vt,At;const at=a.aH(_e.glyphDependencies,Kt=>Object.keys(Kt).map(Number));this.inFlightDependencies.forEach(Kt=>Kt==null?void 0:Kt.cancel()),this.inFlightDependencies=[];const wt=++this.dependencySentinel;Object.keys(at).length?this.inFlightDependencies.push(se.send("getGlyphs",{uid:this.uid,stacks:at,source:this.source,tileID:this.tileID,type:"glyphs"},(Kt,Wt)=>{wt===this.dependencySentinel&&(Re||(Re=Kt,Oe=Wt,an.call(this)))})):Oe={};const It=Object.keys(_e.iconDependencies);It.length?this.inFlightDependencies.push(se.send("getImages",{icons:It,source:this.source,tileID:this.tileID,type:"icons"},(Kt,Wt)=>{wt===this.dependencySentinel&&(Re||(Re=Kt,vt=Wt,an.call(this)))})):vt={};const tn=Object.keys(_e.patternDependencies);function an(){if(Re)return le(Re);if(Oe&&vt&&At){const Kt=new b(Oe),Wt=new a.bp(vt,At);for(const Sr in de){const un=de[Sr];un instanceof a.a4?(A(un.layers,this.zoom,Q),a.bq({bucket:un,glyphMap:Oe,glyphPositions:Kt.positions,imageMap:vt,imagePositions:Wt.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):un.hasPattern&&(un instanceof a.br||un instanceof a.bs||un instanceof a.bt)&&(A(un.layers,this.zoom,Q),un.addFeatures(_e,this.tileID.canonical,Wt.patternPositions))}this.status="done",le(null,{buckets:Object.values(de).filter(Sr=>!Sr.isEmpty()),featureIndex:me,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Kt.image,imageAtlas:Wt,glyphMap:this.returnDependencies?Oe:null,iconMap:this.returnDependencies?vt:null,glyphPositions:this.returnDependencies?Kt.positions:null})}}tn.length?this.inFlightDependencies.push(se.send("getImages",{icons:tn,source:this.source,tileID:this.tileID,type:"patterns"},(Kt,Wt)=>{wt===this.dependencySentinel&&(Re||(Re=Kt,At=Wt,an.call(this)))})):At={},an.call(this)}}function A(re,$,q){const Q=new a.a8($);for(const se of re)se.recalculate(Q,q)}function M(re,$){const q=a.l(re.request,(Q,se,le,we)=>{if(Q)$(Q);else if(se)try{const me=new a.bw.VectorTile(new a.bv(se));$(null,{vectorTile:me,rawData:se,cacheControl:le,expires:we})}catch(me){const de=new Uint8Array(se);let _e=`Unable to parse the tile at ${re.request.url}, `;_e+=de[0]===31&&de[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${me.messge}`,$(new Error(_e))}});return()=>{q.cancel(),$()}}class B{constructor($,q,Q,se){this.actor=$,this.layerIndex=q,this.availableImages=Q,this.loadVectorData=se||M,this.fetching={},this.loading={},this.loaded={}}loadTile($,q){const Q=$.uid;this.loading||(this.loading={});const se=!!($&&$.request&&$.request.collectResourceTiming)&&new a.bu($.request),le=this.loading[Q]=new P($);le.abort=this.loadVectorData($,(we,me)=>{if(delete this.loading[Q],we||!me)return le.status="done",this.loaded[Q]=le,q(we);const de=me.rawData,_e={};me.expires&&(_e.expires=me.expires),me.cacheControl&&(_e.cacheControl=me.cacheControl);const Me={};if(se){const Re=se.finish();Re&&(Me.resourceTiming=JSON.parse(JSON.stringify(Re)))}le.vectorTile=me.vectorTile,le.parse(me.vectorTile,this.layerIndex,this.availableImages,this.actor,(Re,Oe)=>{if(delete this.fetching[Q],Re||!Oe)return q(Re);q(null,a.e({rawTileData:de.slice(0)},Oe,_e,Me))}),this.loaded=this.loaded||{},this.loaded[Q]=le,this.fetching[Q]={rawTileData:de,cacheControl:_e,resourceTiming:Me}})}reloadTile($,q){const Q=this.loaded,se=$.uid;if(Q&&Q[se]){const le=Q[se];le.showCollisionBoxes=$.showCollisionBoxes,le.status==="parsing"?le.parse(le.vectorTile,this.layerIndex,this.availableImages,this.actor,(we,me)=>{if(we||!me)return q(we,me);let de;if(this.fetching[se]){const{rawTileData:_e,cacheControl:Me,resourceTiming:Re}=this.fetching[se];delete this.fetching[se],de=a.e({rawTileData:_e.slice(0)},me,Me,Re)}else de=me;q(null,de)}):le.status==="done"&&(le.vectorTile?le.parse(le.vectorTile,this.layerIndex,this.availableImages,this.actor,q):q())}}abortTile($,q){const Q=this.loading,se=$.uid;Q&&Q[se]&&Q[se].abort&&(Q[se].abort(),delete Q[se]),q()}removeTile($,q){const Q=this.loaded,se=$.uid;Q&&Q[se]&&delete Q[se],q()}}class V{constructor(){this.loaded={}}loadTile($,q){return a._(this,void 0,void 0,function*(){const{uid:Q,encoding:se,rawImageData:le,redFactor:we,greenFactor:me,blueFactor:de,baseShift:_e}=$,Me=le.width+2,Re=le.height+2,Oe=a.a(le)?new a.R({width:Me,height:Re},yield a.bx(le,-1,-1,Me,Re)):le,vt=new a.by(Q,Oe,se,we,me,de,_e);this.loaded=this.loaded||{},this.loaded[Q]=vt,q(null,vt)})}removeTile($){const q=this.loaded,Q=$.uid;q&&q[Q]&&delete q[Q]}}function j(re,$){if(re.length!==0){K(re[0],$);for(var q=1;q<re.length;q++)K(re[q],!$)}}function K(re,$){for(var q=0,Q=0,se=0,le=re.length,we=le-1;se<le;we=se++){var me=(re[se][0]-re[we][0])*(re[we][1]+re[se][1]),de=q+me;Q+=Math.abs(q)>=Math.abs(me)?q-de+me:me-de+q,q=de}q+Q>=0!=!!$&&re.reverse()}var F=a.bz(function re($,q){var Q,se=$&&$.type;if(se==="FeatureCollection")for(Q=0;Q<$.features.length;Q++)re($.features[Q],q);else if(se==="GeometryCollection")for(Q=0;Q<$.geometries.length;Q++)re($.geometries[Q],q);else if(se==="Feature")re($.geometry,q);else if(se==="Polygon")j($.coordinates,q);else if(se==="MultiPolygon")for(Q=0;Q<$.coordinates.length;Q++)j($.coordinates[Q],q);return $});const N=a.bw.VectorTileFeature.prototype.toGeoJSON;var W={exports:{}},ne=a.bA,pe=a.bw.VectorTileFeature,Ce=Ie;function Ie(re,$){this.options=$||{},this.features=re,this.length=re.length}function Se(re,$){this.id=typeof re.id=="number"?re.id:void 0,this.type=re.type,this.rawGeometry=re.type===1?[re.geometry]:re.geometry,this.properties=re.tags,this.extent=$||4096}Ie.prototype.feature=function(re){return new Se(this.features[re],this.options.extent)},Se.prototype.loadGeometry=function(){var re=this.rawGeometry;this.geometry=[];for(var $=0;$<re.length;$++){for(var q=re[$],Q=[],se=0;se<q.length;se++)Q.push(new ne(q[se][0],q[se][1]));this.geometry.push(Q)}return this.geometry},Se.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var re=this.geometry,$=1/0,q=-1/0,Q=1/0,se=-1/0,le=0;le<re.length;le++)for(var we=re[le],me=0;me<we.length;me++){var de=we[me];$=Math.min($,de.x),q=Math.max(q,de.x),Q=Math.min(Q,de.y),se=Math.max(se,de.y)}return[$,Q,q,se]},Se.prototype.toGeoJSON=pe.prototype.toGeoJSON;var qe=a.bB,ze=Ce;function Et(re){var $=new qe;return function(q,Q){for(var se in q.layers)Q.writeMessage(3,Ge,q.layers[se])}(re,$),$.finish()}function Ge(re,$){var q;$.writeVarintField(15,re.version||1),$.writeStringField(1,re.name||""),$.writeVarintField(5,re.extent||4096);var Q={keys:[],values:[],keycache:{},valuecache:{}};for(q=0;q<re.length;q++)Q.feature=re.feature(q),$.writeMessage(2,yt,Q);var se=Q.keys;for(q=0;q<se.length;q++)$.writeStringField(3,se[q]);var le=Q.values;for(q=0;q<le.length;q++)$.writeMessage(4,je,le[q])}function yt(re,$){var q=re.feature;q.id!==void 0&&$.writeVarintField(1,q.id),$.writeMessage(2,xt,re),$.writeVarintField(3,q.type),$.writeMessage(4,St,q)}function xt(re,$){var q=re.feature,Q=re.keys,se=re.values,le=re.keycache,we=re.valuecache;for(var me in q.properties){var de=q.properties[me],_e=le[me];if(de!==null){_e===void 0&&(Q.push(me),le[me]=_e=Q.length-1),$.writeVarint(_e);var Me=typeof de;Me!=="string"&&Me!=="boolean"&&Me!=="number"&&(de=JSON.stringify(de));var Re=Me+":"+de,Oe=we[Re];Oe===void 0&&(se.push(de),we[Re]=Oe=se.length-1),$.writeVarint(Oe)}}}function Ot(re,$){return($<<3)+(7&re)}function zt(re){return re<<1^re>>31}function St(re,$){for(var q=re.loadGeometry(),Q=re.type,se=0,le=0,we=q.length,me=0;me<we;me++){var de=q[me],_e=1;Q===1&&(_e=de.length),$.writeVarint(Ot(1,_e));for(var Me=Q===3?de.length-1:de.length,Re=0;Re<Me;Re++){Re===1&&Q!==1&&$.writeVarint(Ot(2,Me-1));var Oe=de[Re].x-se,vt=de[Re].y-le;$.writeVarint(zt(Oe)),$.writeVarint(zt(vt)),se+=Oe,le+=vt}Q===3&&$.writeVarint(Ot(7,1))}}function je(re,$){var q=typeof re;q==="string"?$.writeStringField(1,re):q==="boolean"?$.writeBooleanField(7,re):q==="number"&&(re%1!=0?$.writeDoubleField(3,re):re<0?$.writeSVarintField(6,re):$.writeVarintField(5,re))}W.exports=Et,W.exports.fromVectorTileJs=Et,W.exports.fromGeojsonVt=function(re,$){$=$||{};var q={};for(var Q in re)q[Q]=new ze(re[Q].features,$),q[Q].name=Q,q[Q].version=$.version,q[Q].extent=$.extent;return Et({layers:q})},W.exports.GeoJSONWrapper=ze;var ct=a.bz(W.exports);const Pt={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:re=>re},Ht=Math.fround||(Zt=new Float32Array(1),re=>(Zt[0]=+re,Zt[0]));var Zt;const Rt=3,vn=5,ui=6;class cr{constructor($){this.options=Object.assign(Object.create(Pt),$),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load($){const{log:q,minZoom:Q,maxZoom:se}=this.options;q&&console.time("total time");const le=`prepare ${$.length} points`;q&&console.time(le),this.points=$;const we=[];for(let de=0;de<$.length;de++){const _e=$[de];if(!_e.geometry)continue;const[Me,Re]=_e.geometry.coordinates,Oe=Ht(Zr(Me)),vt=Ht(Wr(Re));we.push(Oe,vt,1/0,de,-1,1),this.options.reduce&&we.push(0)}let me=this.trees[se+1]=this._createTree(we);q&&console.timeEnd(le);for(let de=se;de>=Q;de--){const _e=+Date.now();me=this.trees[de]=this._createTree(this._cluster(me,de)),q&&console.log("z%d: %d clusters in %dms",de,me.numItems,+Date.now()-_e)}return q&&console.timeEnd("total time"),this}getClusters($,q){let Q=(($[0]+180)%360+360)%360-180;const se=Math.max(-90,Math.min(90,$[1]));let le=$[2]===180?180:(($[2]+180)%360+360)%360-180;const we=Math.max(-90,Math.min(90,$[3]));if($[2]-$[0]>=360)Q=-180,le=180;else if(Q>le){const Re=this.getClusters([Q,se,180,we],q),Oe=this.getClusters([-180,se,le,we],q);return Re.concat(Oe)}const me=this.trees[this._limitZoom(q)],de=me.range(Zr(Q),Wr(we),Zr(le),Wr(se)),_e=me.data,Me=[];for(const Re of de){const Oe=this.stride*Re;Me.push(_e[Oe+vn]>1?Gr(_e,Oe,this.clusterProps):this.points[_e[Oe+Rt]])}return Me}getChildren($){const q=this._getOriginId($),Q=this._getOriginZoom($),se="No cluster with the specified id.",le=this.trees[Q];if(!le)throw new Error(se);const we=le.data;if(q*this.stride>=we.length)throw new Error(se);const me=this.options.radius/(this.options.extent*Math.pow(2,Q-1)),de=le.within(we[q*this.stride],we[q*this.stride+1],me),_e=[];for(const Me of de){const Re=Me*this.stride;we[Re+4]===$&&_e.push(we[Re+vn]>1?Gr(we,Re,this.clusterProps):this.points[we[Re+Rt]])}if(_e.length===0)throw new Error(se);return _e}getLeaves($,q,Q){const se=[];return this._appendLeaves(se,$,q=q||10,Q=Q||0,0),se}getTile($,q,Q){const se=this.trees[this._limitZoom($)],le=Math.pow(2,$),{extent:we,radius:me}=this.options,de=me/we,_e=(Q-de)/le,Me=(Q+1+de)/le,Re={features:[]};return this._addTileFeatures(se.range((q-de)/le,_e,(q+1+de)/le,Me),se.data,q,Q,le,Re),q===0&&this._addTileFeatures(se.range(1-de/le,_e,1,Me),se.data,le,Q,le,Re),q===le-1&&this._addTileFeatures(se.range(0,_e,de/le,Me),se.data,-1,Q,le,Re),Re.features.length?Re:null}getClusterExpansionZoom($){let q=this._getOriginZoom($)-1;for(;q<=this.options.maxZoom;){const Q=this.getChildren($);if(q++,Q.length!==1)break;$=Q[0].properties.cluster_id}return q}_appendLeaves($,q,Q,se,le){const we=this.getChildren(q);for(const me of we){const de=me.properties;if(de&&de.cluster?le+de.point_count<=se?le+=de.point_count:le=this._appendLeaves($,de.cluster_id,Q,se,le):le<se?le++:$.push(me),$.length===Q)break}return le}_createTree($){const q=new a.av($.length/this.stride|0,this.options.nodeSize,Float32Array);for(let Q=0;Q<$.length;Q+=this.stride)q.add($[Q],$[Q+1]);return q.finish(),q.data=$,q}_addTileFeatures($,q,Q,se,le,we){for(const me of $){const de=me*this.stride,_e=q[de+vn]>1;let Me,Re,Oe;if(_e)Me=Ai(q,de,this.clusterProps),Re=q[de],Oe=q[de+1];else{const at=this.points[q[de+Rt]];Me=at.properties;const[wt,It]=at.geometry.coordinates;Re=Zr(wt),Oe=Wr(It)}const vt={type:1,geometry:[[Math.round(this.options.extent*(Re*le-Q)),Math.round(this.options.extent*(Oe*le-se))]],tags:Me};let At;At=_e||this.options.generateId?q[de+Rt]:this.points[q[de+Rt]].id,At!==void 0&&(vt.id=At),we.features.push(vt)}}_limitZoom($){return Math.max(this.options.minZoom,Math.min(Math.floor(+$),this.options.maxZoom+1))}_cluster($,q){const{radius:Q,extent:se,reduce:le,minPoints:we}=this.options,me=Q/(se*Math.pow(2,q)),de=$.data,_e=[],Me=this.stride;for(let Re=0;Re<de.length;Re+=Me){if(de[Re+2]<=q)continue;de[Re+2]=q;const Oe=de[Re],vt=de[Re+1],At=$.within(de[Re],de[Re+1],me),at=de[Re+vn];let wt=at;for(const It of At){const tn=It*Me;de[tn+2]>q&&(wt+=de[tn+vn])}if(wt>at&&wt>=we){let It,tn=Oe*at,an=vt*at,Kt=-1;const Wt=((Re/Me|0)<<5)+(q+1)+this.points.length;for(const Sr of At){const un=Sr*Me;if(de[un+2]<=q)continue;de[un+2]=q;const Kn=de[un+vn];tn+=de[un]*Kn,an+=de[un+1]*Kn,de[un+4]=Wt,le&&(It||(It=this._map(de,Re,!0),Kt=this.clusterProps.length,this.clusterProps.push(It)),le(It,this._map(de,un)))}de[Re+4]=Wt,_e.push(tn/wt,an/wt,1/0,Wt,-1,wt),le&&_e.push(Kt)}else{for(let It=0;It<Me;It++)_e.push(de[Re+It]);if(wt>1)for(const It of At){const tn=It*Me;if(!(de[tn+2]<=q)){de[tn+2]=q;for(let an=0;an<Me;an++)_e.push(de[tn+an])}}}}return _e}_getOriginId($){return $-this.points.length>>5}_getOriginZoom($){return($-this.points.length)%32}_map($,q,Q){if($[q+vn]>1){const we=this.clusterProps[$[q+ui]];return Q?Object.assign({},we):we}const se=this.points[$[q+Rt]].properties,le=this.options.map(se);return Q&&le===se?Object.assign({},le):le}}function Gr(re,$,q){return{type:"Feature",id:re[$+Rt],properties:Ai(re,$,q),geometry:{type:"Point",coordinates:[(Q=re[$],360*(Q-.5)),to(re[$+1])]}};var Q}function Ai(re,$,q){const Q=re[$+vn],se=Q>=1e4?`${Math.round(Q/1e3)}k`:Q>=1e3?Math.round(Q/100)/10+"k":Q,le=re[$+ui],we=le===-1?{}:Object.assign({},q[le]);return Object.assign(we,{cluster:!0,cluster_id:re[$+Rt],point_count:Q,point_count_abbreviated:se})}function Zr(re){return re/360+.5}function Wr(re){const $=Math.sin(re*Math.PI/180),q=.5-.25*Math.log((1+$)/(1-$))/Math.PI;return q<0?0:q>1?1:q}function to(re){const $=(180-360*re)*Math.PI/180;return 360*Math.atan(Math.exp($))/Math.PI-90}function as(re,$,q,Q){for(var se,le=Q,we=q-$>>1,me=q-$,de=re[$],_e=re[$+1],Me=re[q],Re=re[q+1],Oe=$+3;Oe<q;Oe+=3){var vt=no(re[Oe],re[Oe+1],de,_e,Me,Re);if(vt>le)se=Oe,le=vt;else if(vt===le){var At=Math.abs(Oe-we);At<me&&(se=Oe,me=At)}}le>Q&&(se-$>3&&as(re,$,se,Q),re[se+2]=le,q-se>3&&as(re,se,q,Q))}function no(re,$,q,Q,se,le){var we=se-q,me=le-Q;if(we!==0||me!==0){var de=((re-q)*we+($-Q)*me)/(we*we+me*me);de>1?(q=se,Q=le):de>0&&(q+=we*de,Q+=me*de)}return(we=re-q)*we+(me=$-Q)*me}function ki(re,$,q,Q){var se={id:re===void 0?null:re,type:$,geometry:q,tags:Q,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(le){var we=le.geometry,me=le.type;if(me==="Point"||me==="MultiPoint"||me==="LineString")Ao(le,we);else if(me==="Polygon"||me==="MultiLineString")for(var de=0;de<we.length;de++)Ao(le,we[de]);else if(me==="MultiPolygon")for(de=0;de<we.length;de++)for(var _e=0;_e<we[de].length;_e++)Ao(le,we[de][_e])}(se),se}function Ao(re,$){for(var q=0;q<$.length;q+=3)re.minX=Math.min(re.minX,$[q]),re.minY=Math.min(re.minY,$[q+1]),re.maxX=Math.max(re.maxX,$[q]),re.maxY=Math.max(re.maxY,$[q+1])}function ro(re,$,q,Q){if($.geometry){var se=$.geometry.coordinates,le=$.geometry.type,we=Math.pow(q.tolerance/((1<<q.maxZoom)*q.extent),2),me=[],de=$.id;if(q.promoteId?de=$.properties[q.promoteId]:q.generateId&&(de=Q||0),le==="Point")Ms(se,me);else if(le==="MultiPoint")for(var _e=0;_e<se.length;_e++)Ms(se[_e],me);else if(le==="LineString")ge(se,me,we,!1);else if(le==="MultiLineString"){if(q.lineMetrics){for(_e=0;_e<se.length;_e++)ge(se[_e],me=[],we,!1),re.push(ki(de,"LineString",me,$.properties));return}ke(se,me,we,!1)}else if(le==="Polygon")ke(se,me,we,!0);else{if(le!=="MultiPolygon"){if(le==="GeometryCollection"){for(_e=0;_e<$.geometry.geometries.length;_e++)ro(re,{id:de,geometry:$.geometry.geometries[_e],properties:$.properties},q,Q);return}throw new Error("Input data is not a valid GeoJSON object.")}for(_e=0;_e<se.length;_e++){var Me=[];ke(se[_e],Me,we,!0),me.push(Me)}}re.push(ki(de,le,me,$.properties))}}function Ms(re,$){$.push(ue(re[0])),$.push(tt(re[1])),$.push(0)}function ge(re,$,q,Q){for(var se,le,we=0,me=0;me<re.length;me++){var de=ue(re[me][0]),_e=tt(re[me][1]);$.push(de),$.push(_e),$.push(0),me>0&&(we+=Q?(se*_e-de*le)/2:Math.sqrt(Math.pow(de-se,2)+Math.pow(_e-le,2))),se=de,le=_e}var Me=$.length-3;$[2]=1,as($,0,Me,q),$[Me+2]=1,$.size=Math.abs(we),$.start=0,$.end=$.size}function ke(re,$,q,Q){for(var se=0;se<re.length;se++){var le=[];ge(re[se],le,q,Q),$.push(le)}}function ue(re){return re/360+.5}function tt(re){var $=Math.sin(re*Math.PI/180),q=.5-.25*Math.log((1+$)/(1-$))/Math.PI;return q<0?0:q>1?1:q}function Ye(re,$,q,Q,se,le,we,me){if(Q/=$,le>=(q/=$)&&we<Q)return re;if(we<q||le>=Q)return null;for(var de=[],_e=0;_e<re.length;_e++){var Me=re[_e],Re=Me.geometry,Oe=Me.type,vt=se===0?Me.minX:Me.minY,At=se===0?Me.maxX:Me.maxY;if(vt>=q&&At<Q)de.push(Me);else if(!(At<q||vt>=Q)){var at=[];if(Oe==="Point"||Oe==="MultiPoint")Ne(Re,at,q,Q,se);else if(Oe==="LineString")Xe(Re,at,q,Q,se,!1,me.lineMetrics);else if(Oe==="MultiLineString")_n(Re,at,q,Q,se,!1);else if(Oe==="Polygon")_n(Re,at,q,Q,se,!0);else if(Oe==="MultiPolygon")for(var wt=0;wt<Re.length;wt++){var It=[];_n(Re[wt],It,q,Q,se,!0),It.length&&at.push(It)}if(at.length){if(me.lineMetrics&&Oe==="LineString"){for(wt=0;wt<at.length;wt++)de.push(ki(Me.id,Oe,at[wt],Me.tags));continue}Oe!=="LineString"&&Oe!=="MultiLineString"||(at.length===1?(Oe="LineString",at=at[0]):Oe="MultiLineString"),Oe!=="Point"&&Oe!=="MultiPoint"||(Oe=at.length===3?"Point":"MultiPoint"),de.push(ki(Me.id,Oe,at,Me.tags))}}}return de.length?de:null}function Ne(re,$,q,Q,se){for(var le=0;le<re.length;le+=3){var we=re[le+se];we>=q&&we<=Q&&($.push(re[le]),$.push(re[le+1]),$.push(re[le+2]))}}function Xe(re,$,q,Q,se,le,we){for(var me,de,_e=Vt(re),Me=se===0?qi:io,Re=re.start,Oe=0;Oe<re.length-3;Oe+=3){var vt=re[Oe],At=re[Oe+1],at=re[Oe+2],wt=re[Oe+3],It=re[Oe+4],tn=se===0?vt:At,an=se===0?wt:It,Kt=!1;we&&(me=Math.sqrt(Math.pow(vt-wt,2)+Math.pow(At-It,2))),tn<q?an>q&&(de=Me(_e,vt,At,wt,It,q),we&&(_e.start=Re+me*de)):tn>Q?an<Q&&(de=Me(_e,vt,At,wt,It,Q),we&&(_e.start=Re+me*de)):An(_e,vt,At,at),an<q&&tn>=q&&(de=Me(_e,vt,At,wt,It,q),Kt=!0),an>Q&&tn<=Q&&(de=Me(_e,vt,At,wt,It,Q),Kt=!0),!le&&Kt&&(we&&(_e.end=Re+me*de),$.push(_e),_e=Vt(re)),we&&(Re+=me)}var Wt=re.length-3;vt=re[Wt],At=re[Wt+1],at=re[Wt+2],(tn=se===0?vt:At)>=q&&tn<=Q&&An(_e,vt,At,at),Wt=_e.length-3,le&&Wt>=3&&(_e[Wt]!==_e[0]||_e[Wt+1]!==_e[1])&&An(_e,_e[0],_e[1],_e[2]),_e.length&&$.push(_e)}function Vt(re){var $=[];return $.size=re.size,$.start=re.start,$.end=re.end,$}function _n(re,$,q,Q,se,le){for(var we=0;we<re.length;we++)Xe(re[we],$,q,Q,se,le,!1)}function An(re,$,q,Q){re.push($),re.push(q),re.push(Q)}function qi(re,$,q,Q,se,le){var we=(le-$)/(Q-$);return re.push(le),re.push(q+(se-q)*we),re.push(1),we}function io(re,$,q,Q,se,le){var we=(le-q)/(se-q);return re.push($+(Q-$)*we),re.push(le),re.push(1),we}function Ii(re,$){for(var q=[],Q=0;Q<re.length;Q++){var se,le=re[Q],we=le.type;if(we==="Point"||we==="MultiPoint"||we==="LineString")se=Gi(le.geometry,$);else if(we==="MultiLineString"||we==="Polygon"){se=[];for(var me=0;me<le.geometry.length;me++)se.push(Gi(le.geometry[me],$))}else if(we==="MultiPolygon")for(se=[],me=0;me<le.geometry.length;me++){for(var de=[],_e=0;_e<le.geometry[me].length;_e++)de.push(Gi(le.geometry[me][_e],$));se.push(de)}q.push(ki(le.id,we,se,le.tags))}return q}function Gi(re,$){var q=[];q.size=re.size,re.start!==void 0&&(q.start=re.start,q.end=re.end);for(var Q=0;Q<re.length;Q+=3)q.push(re[Q]+$,re[Q+1],re[Q+2]);return q}function Ze(re,$){if(re.transformed)return re;var q,Q,se,le=1<<re.z,we=re.x,me=re.y;for(q=0;q<re.features.length;q++){var de=re.features[q],_e=de.geometry,Me=de.type;if(de.geometry=[],Me===1)for(Q=0;Q<_e.length;Q+=2)de.geometry.push(ci(_e[Q],_e[Q+1],$,le,we,me));else for(Q=0;Q<_e.length;Q++){var Re=[];for(se=0;se<_e[Q].length;se+=2)Re.push(ci(_e[Q][se],_e[Q][se+1],$,le,we,me));de.geometry.push(Re)}}return re.transformed=!0,re}function ci(re,$,q,Q,se,le){return[Math.round(q*(re*Q-se)),Math.round(q*($*Q-le))]}function xn(re,$,q,Q,se){for(var le=$===se.maxZoom?0:se.tolerance/((1<<$)*se.extent),we={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:q,y:Q,z:$,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},me=0;me<re.length;me++){we.numFeatures++,ls(we,re[me],le,se);var de=re[me].minX,_e=re[me].minY,Me=re[me].maxX,Re=re[me].maxY;de<we.minX&&(we.minX=de),_e<we.minY&&(we.minY=_e),Me>we.maxX&&(we.maxX=Me),Re>we.maxY&&(we.maxY=Re)}return we}function ls(re,$,q,Q){var se=$.geometry,le=$.type,we=[];if(le==="Point"||le==="MultiPoint")for(var me=0;me<se.length;me+=3)we.push(se[me]),we.push(se[me+1]),re.numPoints++,re.numSimplified++;else if(le==="LineString")Rs(we,se,re,q,!1,!1);else if(le==="MultiLineString"||le==="Polygon")for(me=0;me<se.length;me++)Rs(we,se[me],re,q,le==="Polygon",me===0);else if(le==="MultiPolygon")for(var de=0;de<se.length;de++){var _e=se[de];for(me=0;me<_e.length;me++)Rs(we,_e[me],re,q,!0,me===0)}if(we.length){var Me=$.tags||null;if(le==="LineString"&&Q.lineMetrics){for(var Re in Me={},$.tags)Me[Re]=$.tags[Re];Me.mapbox_clip_start=se.start/se.size,Me.mapbox_clip_end=se.end/se.size}var Oe={geometry:we,type:le==="Polygon"||le==="MultiPolygon"?3:le==="LineString"||le==="MultiLineString"?2:1,tags:Me};$.id!==null&&(Oe.id=$.id),re.features.push(Oe)}}function Rs(re,$,q,Q,se,le){var we=Q*Q;if(Q>0&&$.size<(se?we:Q))q.numPoints+=$.length/3;else{for(var me=[],de=0;de<$.length;de+=3)(Q===0||$[de+2]>we)&&(q.numSimplified++,me.push($[de]),me.push($[de+1])),q.numPoints++;se&&function(_e,Me){for(var Re=0,Oe=0,vt=_e.length,At=vt-2;Oe<vt;At=Oe,Oe+=2)Re+=(_e[Oe]-_e[At])*(_e[Oe+1]+_e[At+1]);if(Re>0===Me)for(Oe=0,vt=_e.length;Oe<vt/2;Oe+=2){var at=_e[Oe],wt=_e[Oe+1];_e[Oe]=_e[vt-2-Oe],_e[Oe+1]=_e[vt-1-Oe],_e[vt-2-Oe]=at,_e[vt-1-Oe]=wt}}(me,le),re.push(me)}}function Qe(re,$){var q=($=this.options=function(se,le){for(var we in le)se[we]=le[we];return se}(Object.create(this.options),$)).debug;if(q&&console.time("preprocess data"),$.maxZoom<0||$.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if($.promoteId&&$.generateId)throw new Error("promoteId and generateId cannot be used together.");var Q=function(se,le){var we=[];if(se.type==="FeatureCollection")for(var me=0;me<se.features.length;me++)ro(we,se.features[me],le,me);else ro(we,se.type==="Feature"?se:{geometry:se},le);return we}(re,$);this.tiles={},this.tileCoords=[],q&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",$.indexMaxZoom,$.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Q=function(se,le){var we=le.buffer/le.extent,me=se,de=Ye(se,1,-1-we,we,0,-1,2,le),_e=Ye(se,1,1-we,2+we,0,-1,2,le);return(de||_e)&&(me=Ye(se,1,-we,1+we,0,-1,2,le)||[],de&&(me=Ii(de,1).concat(me)),_e&&(me=me.concat(Ii(_e,-1)))),me}(Q,$),Q.length&&this.splitTile(Q,0,0,0),q&&(Q.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Ft(re,$,q){return 32*((1<<re)*q+$)+re}function kt(re,$){return $?re.properties[$]:re.id}function Rr(re,$){if(re==null)return!0;if(re.type==="Feature")return kt(re,$)!=null;if(re.type==="FeatureCollection"){const q=new Set;for(const Q of re.features){const se=kt(Q,$);if(se==null||q.has(se))return!1;q.add(se)}return!0}return!1}function us(re,$){const q=new Map;if(re!=null)if(re.type==="Feature")q.set(kt(re,$),re);else for(const Q of re.features)q.set(kt(Q,$),Q);return q}Qe.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Qe.prototype.splitTile=function(re,$,q,Q,se,le,we){for(var me=[re,$,q,Q],de=this.options,_e=de.debug;me.length;){Q=me.pop(),q=me.pop(),$=me.pop(),re=me.pop();var Me=1<<$,Re=Ft($,q,Q),Oe=this.tiles[Re];if(!Oe&&(_e>1&&console.time("creation"),Oe=this.tiles[Re]=xn(re,$,q,Q,de),this.tileCoords.push({z:$,x:q,y:Q}),_e)){_e>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",$,q,Q,Oe.numFeatures,Oe.numPoints,Oe.numSimplified),console.timeEnd("creation"));var vt="z"+$;this.stats[vt]=(this.stats[vt]||0)+1,this.total++}if(Oe.source=re,se){if($===de.maxZoom||$===se)continue;var At=1<<se-$;if(q!==Math.floor(le/At)||Q!==Math.floor(we/At))continue}else if($===de.indexMaxZoom||Oe.numPoints<=de.indexMaxPoints)continue;if(Oe.source=null,re.length!==0){_e>1&&console.time("clipping");var at,wt,It,tn,an,Kt,Wt=.5*de.buffer/de.extent,Sr=.5-Wt,un=.5+Wt,Kn=1+Wt;at=wt=It=tn=null,an=Ye(re,Me,q-Wt,q+un,0,Oe.minX,Oe.maxX,de),Kt=Ye(re,Me,q+Sr,q+Kn,0,Oe.minX,Oe.maxX,de),re=null,an&&(at=Ye(an,Me,Q-Wt,Q+un,1,Oe.minY,Oe.maxY,de),wt=Ye(an,Me,Q+Sr,Q+Kn,1,Oe.minY,Oe.maxY,de),an=null),Kt&&(It=Ye(Kt,Me,Q-Wt,Q+un,1,Oe.minY,Oe.maxY,de),tn=Ye(Kt,Me,Q+Sr,Q+Kn,1,Oe.minY,Oe.maxY,de),Kt=null),_e>1&&console.timeEnd("clipping"),me.push(at||[],$+1,2*q,2*Q),me.push(wt||[],$+1,2*q,2*Q+1),me.push(It||[],$+1,2*q+1,2*Q),me.push(tn||[],$+1,2*q+1,2*Q+1)}}},Qe.prototype.getTile=function(re,$,q){var Q=this.options,se=Q.extent,le=Q.debug;if(re<0||re>24)return null;var we=1<<re,me=Ft(re,$=($%we+we)%we,q);if(this.tiles[me])return Ze(this.tiles[me],se);le>1&&console.log("drilling down to z%d-%d-%d",re,$,q);for(var de,_e=re,Me=$,Re=q;!de&&_e>0;)_e--,Me=Math.floor(Me/2),Re=Math.floor(Re/2),de=this.tiles[Ft(_e,Me,Re)];return de&&de.source?(le>1&&console.log("found parent tile z%d-%d-%d",_e,Me,Re),le>1&&console.time("drilling down"),this.splitTile(de.source,_e,Me,Re,re,$,q),le>1&&console.timeEnd("drilling down"),this.tiles[me]?Ze(this.tiles[me],se):null):null};class Dt extends B{constructor($,q,Q,se){super($,q,Q),this._dataUpdateable=new Map,this.loadGeoJSON=(le,we)=>{const{promoteId:me}=le;if(le.request)return a.f(le.request,(de,_e,Me,Re)=>{this._dataUpdateable=Rr(_e,me)?us(_e,me):void 0,we(de,_e,Me,Re)});if(typeof le.data=="string")try{const de=JSON.parse(le.data);this._dataUpdateable=Rr(de,me)?us(de,me):void 0,we(null,de)}catch{we(new Error(`Input data given to '${le.source}' is not a valid GeoJSON object.`))}else le.dataDiff?this._dataUpdateable?(function(de,_e,Me){var Re,Oe,vt,At;if(_e.removeAll&&de.clear(),_e.remove)for(const at of _e.remove)de.delete(at);if(_e.add)for(const at of _e.add){const wt=kt(at,Me);wt!=null&&de.set(wt,at)}if(_e.update)for(const at of _e.update){let wt=de.get(at.id);if(wt==null)continue;const It=!at.removeAllProperties&&(((Re=at.removeProperties)===null||Re===void 0?void 0:Re.length)>0||((Oe=at.addOrUpdateProperties)===null||Oe===void 0?void 0:Oe.length)>0);if((at.newGeometry||at.removeAllProperties||It)&&(wt=Object.assign({},wt),de.set(at.id,wt),It&&(wt.properties=Object.assign({},wt.properties))),at.newGeometry&&(wt.geometry=at.newGeometry),at.removeAllProperties)wt.properties={};else if(((vt=at.removeProperties)===null||vt===void 0?void 0:vt.length)>0)for(const tn of at.removeProperties)Object.prototype.hasOwnProperty.call(wt.properties,tn)&&delete wt.properties[tn];if(((At=at.addOrUpdateProperties)===null||At===void 0?void 0:At.length)>0)for(const{key:tn,value:an}of at.addOrUpdateProperties)wt.properties[tn]=an}}(this._dataUpdateable,le.dataDiff,me),we(null,{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())})):we(new Error(`Cannot update existing geojson data in ${le.source}`)):we(new Error(`Input data given to '${le.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}},this.loadVectorData=this.loadGeoJSONTile,se&&(this.loadGeoJSON=se)}loadGeoJSONTile($,q){const Q=$.tileID.canonical;if(!this._geoJSONIndex)return q(null,null);const se=this._geoJSONIndex.getTile(Q.z,Q.x,Q.y);if(!se)return q(null,null);const le=new class{constructor(me){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=a.N,this.length=me.length,this._features=me}feature(me){return new class{constructor(de){this._feature=de,this.extent=a.N,this.type=de.type,this.properties=de.tags,"id"in de&&!isNaN(de.id)&&(this.id=parseInt(de.id,10))}loadGeometry(){if(this._feature.type===1){const de=[];for(const _e of this._feature.geometry)de.push([new a.P(_e[0],_e[1])]);return de}{const de=[];for(const _e of this._feature.geometry){const Me=[];for(const Re of _e)Me.push(new a.P(Re[0],Re[1]));de.push(Me)}return de}}toGeoJSON(de,_e,Me){return N.call(this,de,_e,Me)}}(this._features[me])}}(se.features);let we=ct(le);we.byteOffset===0&&we.byteLength===we.buffer.byteLength||(we=new Uint8Array(we)),q(null,{vectorTile:le,rawData:we.buffer})}loadData($,q){var Q;(Q=this._pendingRequest)===null||Q===void 0||Q.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const se=!!($&&$.request&&$.request.collectResourceTiming)&&new a.bu($.request);this._pendingCallback=q,this._pendingRequest=this.loadGeoJSON($,(le,we)=>{if(delete this._pendingCallback,delete this._pendingRequest,le||!we)return q(le);if(typeof we!="object")return q(new Error(`Input data given to '${$.source}' is not a valid GeoJSON object.`));{F(we,!0);try{if($.filter){const de=a.bC($.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(de.result==="error")throw new Error(de.value.map(Me=>`${Me.key}: ${Me.message}`).join(", "));we={type:"FeatureCollection",features:we.features.filter(Me=>de.value.evaluate({zoom:0},Me))}}this._geoJSONIndex=$.cluster?new cr(function({superclusterOptions:de,clusterProperties:_e}){if(!_e||!de)return de;const Me={},Re={},Oe={accumulated:null,zoom:0},vt={properties:null},At=Object.keys(_e);for(const at of At){const[wt,It]=_e[at],tn=a.bC(It),an=a.bC(typeof wt=="string"?[wt,["accumulated"],["get",at]]:wt);Me[at]=tn.value,Re[at]=an.value}return de.map=at=>{vt.properties=at;const wt={};for(const It of At)wt[It]=Me[It].evaluate(Oe,vt);return wt},de.reduce=(at,wt)=>{vt.properties=wt;for(const It of At)Oe.accumulated=at[It],at[It]=Re[It].evaluate(Oe,vt)},de}($)).load(we.features):function(de,_e){return new Qe(de,_e)}(we,$.geojsonVtOptions)}catch(de){return q(de)}this.loaded={};const me={};if(se){const de=se.finish();de&&(me.resourceTiming={},me.resourceTiming[$.source]=JSON.parse(JSON.stringify(de)))}q(null,me)}})}reloadTile($,q){const Q=this.loaded;return Q&&Q[$.uid]?super.reloadTile($,q):this.loadTile($,q)}removeSource($,q){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),q()}getClusterExpansionZoom($,q){try{q(null,this._geoJSONIndex.getClusterExpansionZoom($.clusterId))}catch(Q){q(Q)}}getClusterChildren($,q){try{q(null,this._geoJSONIndex.getChildren($.clusterId))}catch(Q){q(Q)}}getClusterLeaves($,q){try{q(null,this._geoJSONIndex.getLeaves($.clusterId,$.limit,$.offset))}catch(Q){q(Q)}}}class Ds{constructor($){this.self=$,this.actor=new a.C($,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:B,geojson:Dt},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(q,Q)=>{if(this.workerSourceTypes[q])throw new Error(`Worker source with name "${q}" already registered.`);this.workerSourceTypes[q]=Q},this.self.registerRTLTextPlugin=q=>{if(a.bD.isParsed())throw new Error("RTL text plugin already registered.");a.bD.applyArabicShaping=q.applyArabicShaping,a.bD.processBidirectionalText=q.processBidirectionalText,a.bD.processStyledBidirectionalText=q.processStyledBidirectionalText}}setReferrer($,q){this.referrer=q}setImages($,q,Q){this.availableImages[$]=q;for(const se in this.workerSources[$]){const le=this.workerSources[$][se];for(const we in le)le[we].availableImages=q}Q()}setLayers($,q,Q){this.getLayerIndex($).replace(q),Q()}updateLayers($,q,Q){this.getLayerIndex($).update(q.layers,q.removedIds),Q()}loadTile($,q,Q){this.getWorkerSource($,q.type,q.source).loadTile(q,Q)}loadDEMTile($,q,Q){this.getDEMWorkerSource($,q.source).loadTile(q,Q)}reloadTile($,q,Q){this.getWorkerSource($,q.type,q.source).reloadTile(q,Q)}abortTile($,q,Q){this.getWorkerSource($,q.type,q.source).abortTile(q,Q)}removeTile($,q,Q){this.getWorkerSource($,q.type,q.source).removeTile(q,Q)}removeDEMTile($,q){this.getDEMWorkerSource($,q.source).removeTile(q)}removeSource($,q,Q){if(!this.workerSources[$]||!this.workerSources[$][q.type]||!this.workerSources[$][q.type][q.source])return;const se=this.workerSources[$][q.type][q.source];delete this.workerSources[$][q.type][q.source],se.removeSource!==void 0?se.removeSource(q,Q):Q()}loadWorkerSource($,q,Q){try{this.self.importScripts(q.url),Q()}catch(se){Q(se.toString())}}syncRTLPluginState($,q,Q){try{a.bD.setState(q);const se=a.bD.getPluginURL();if(a.bD.isLoaded()&&!a.bD.isParsed()&&se!=null){this.self.importScripts(se);const le=a.bD.isParsed();Q(le?void 0:new Error(`RTL Text Plugin failed to import scripts from ${se}`),le)}}catch(se){Q(se.toString())}}getAvailableImages($){let q=this.availableImages[$];return q||(q=[]),q}getLayerIndex($){let q=this.layerIndexes[$];return q||(q=this.layerIndexes[$]=new w),q}getWorkerSource($,q,Q){return this.workerSources[$]||(this.workerSources[$]={}),this.workerSources[$][q]||(this.workerSources[$][q]={}),this.workerSources[$][q][Q]||(this.workerSources[$][q][Q]=new this.workerSourceTypes[q]({send:(se,le,we)=>{this.actor.send(se,le,we,$)}},this.getLayerIndex($),this.getAvailableImages($))),this.workerSources[$][q][Q]}getDEMWorkerSource($,q){return this.demWorkerSources[$]||(this.demWorkerSources[$]={}),this.demWorkerSources[$][q]||(this.demWorkerSources[$][q]=new V),this.demWorkerSources[$][q]}}return a.i()&&(self.worker=new Ds(self)),Ds}),h(["./shared"],function(a){var w="3.6.2";class b{static testProp(i){if(!b.docStyle)return i[0];for(let c=0;c<i.length;c++)if(i[c]in b.docStyle)return i[c];return i[0]}static create(i,c,p){const g=window.document.createElement(i);return c!==void 0&&(g.className=c),p&&p.appendChild(g),g}static createNS(i,c){return window.document.createElementNS(i,c)}static disableDrag(){b.docStyle&&b.selectProp&&(b.userSelect=b.docStyle[b.selectProp],b.docStyle[b.selectProp]="none")}static enableDrag(){b.docStyle&&b.selectProp&&(b.docStyle[b.selectProp]=b.userSelect)}static setTransform(i,c){i.style[b.transformProp]=c}static addEventListener(i,c,p,g={}){i.addEventListener(c,p,"passive"in g?g:g.capture)}static removeEventListener(i,c,p,g={}){i.removeEventListener(c,p,"passive"in g?g:g.capture)}static suppressClickInternal(i){i.preventDefault(),i.stopPropagation(),window.removeEventListener("click",b.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",b.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",b.suppressClickInternal,!0)},0)}static mousePos(i,c){const p=i.getBoundingClientRect();return new a.P(c.clientX-p.left-i.clientLeft,c.clientY-p.top-i.clientTop)}static touchPos(i,c){const p=i.getBoundingClientRect(),g=[];for(let _=0;_<c.length;_++)g.push(new a.P(c[_].clientX-p.left-i.clientLeft,c[_].clientY-p.top-i.clientTop));return g}static mouseButton(i){return i.button}static remove(i){i.parentNode&&i.parentNode.removeChild(i)}}b.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,b.selectProp=b.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),b.transformProp=b.testProp(["transform","WebkitTransform"]);const P={supported:!1,testSupport:function(y){!B&&M&&(V?j(y):A=y)}};let A,M,B=!1,V=!1;function j(y){const i=y.createTexture();y.bindTexture(y.TEXTURE_2D,i);try{if(y.texImage2D(y.TEXTURE_2D,0,y.RGBA,y.RGBA,y.UNSIGNED_BYTE,M),y.isContextLost())return;P.supported=!0}catch{}y.deleteTexture(i),B=!0}var K,F;typeof document<"u"&&(M=document.createElement("img"),M.onload=function(){A&&j(A),A=null,V=!0},M.onerror=function(){B=!0,A=null},M.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(y){let i,c,p,g;y.resetRequestQueue=()=>{i=[],c=0,p=0,g={}},y.addThrottleControl=R=>{const z=p++;return g[z]=R,z},y.removeThrottleControl=R=>{delete g[R],T()},y.getImage=(R,z,L=!0)=>{P.supported&&(R.headers||(R.headers={}),R.headers.accept="image/webp,*/*");const G={requestParameters:R,supportImageRefresh:L,callback:z,cancelled:!1,completed:!1,cancel:()=>{G.completed||G.cancelled||(G.cancelled=!0,G.innerRequest&&(G.innerRequest.cancel(),c--),T())}};return i.push(G),T(),G};const _=R=>{const{requestParameters:z,supportImageRefresh:L,callback:G}=R;return a.e(z,{type:"image"}),(L!==!1||a.i()||a.g(z.url)||z.headers&&!Object.keys(z.headers).reduce((te,ee)=>te&&ee==="accept",!0)?a.m:k)(z,(te,ee,ie,Y)=>{C(R,G,te,ee,ie,Y)})},C=(R,z,L,G,te,ee)=>{L?z(L):G instanceof HTMLImageElement||a.a(G)?z(null,G):G&&((ie,Y)=>{typeof createImageBitmap=="function"?a.b(ie,Y):a.d(ie,Y)})(G,(ie,Y)=>{ie!=null?z(ie):Y!=null&&z(null,Y,{cacheControl:te,expires:ee})}),R.cancelled||(R.completed=!0,c--,T())},T=()=>{const R=(()=>{const z=Object.keys(g);let L=!1;if(z.length>0){for(const G of z)if(L=g[G](),L)break}return L})()?a.c.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:a.c.MAX_PARALLEL_IMAGE_REQUESTS;for(let z=c;z<R&&i.length>0;z++){const L=i.shift();if(L.cancelled){z--;continue}const G=_(L);c++,L.innerRequest=G}},k=(R,z)=>{const L=new Image,G=R.url;let te=!1;const ee=R.credentials;return ee&&ee==="include"?L.crossOrigin="use-credentials":(ee&&ee==="same-origin"||!a.s(G))&&(L.crossOrigin="anonymous"),L.fetchPriority="high",L.onload=()=>{z(null,L),L.onerror=L.onload=null},L.onerror=()=>{te||z(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")),L.onerror=L.onload=null},L.src=G,{cancel:()=>{te=!0,L.src=""}}}}(K||(K={})),K.resetRequestQueue(),function(y){y.Glyphs="Glyphs",y.Image="Image",y.Source="Source",y.SpriteImage="SpriteImage",y.SpriteJSON="SpriteJSON",y.Style="Style",y.Tile="Tile",y.Unknown="Unknown"}(F||(F={}));class N{constructor(i){this._transformRequestFn=i}transformRequest(i,c){return this._transformRequestFn&&this._transformRequestFn(i,c)||{url:i}}normalizeSpriteURL(i,c,p){const g=function(_){const C=_.match(W);if(!C)throw new Error(`Unable to parse URL "${_}"`);return{protocol:C[1],authority:C[2],path:C[3]||"/",params:C[4]?C[4].split("&"):[]}}(i);return g.path+=`${c}${p}`,function(_){const C=_.params.length?`?${_.params.join("&")}`:"";return`${_.protocol}://${_.authority}${_.path}${C}`}(g)}setTransformRequest(i){this._transformRequestFn=i}}const W=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function ne(y){var i=new a.A(3);return i[0]=y[0],i[1]=y[1],i[2]=y[2],i}var pe,Ce=function(y,i,c){return y[0]=i[0]-c[0],y[1]=i[1]-c[1],y[2]=i[2]-c[2],y};pe=new a.A(3),a.A!=Float32Array&&(pe[0]=0,pe[1]=0,pe[2]=0);var Ie=function(y){var i=y[0],c=y[1];return i*i+c*c};function Se(y){const i=[];if(typeof y=="string")i.push({id:"default",url:y});else if(y&&y.length>0){const c=[];for(const{id:p,url:g}of y){const _=`${p}${g}`;c.indexOf(_)===-1&&(c.push(_),i.push({id:p,url:g}))}}return i}function qe(y,i,c,p,g){if(p)return void y(p);if(g!==Object.values(i).length||g!==Object.values(c).length)return;const _={};for(const C in i){_[C]={};const T=a.h.getImageCanvasContext(c[C]),k=i[C];for(const R in k){const{width:z,height:L,x:G,y:te,sdf:ee,pixelRatio:ie,stretchX:Y,stretchY:ye,content:Te}=k[R];_[C][R]={data:null,pixelRatio:ie,sdf:ee,stretchX:Y,stretchY:ye,content:Te,spriteData:{width:z,height:L,x:G,y:te,context:T}}}}y(null,_)}(function(){var y=new a.A(2);a.A!=Float32Array&&(y[0]=0,y[1]=0)})();class ze{constructor(i,c,p,g){this.context=i,this.format=p,this.texture=i.gl.createTexture(),this.update(c,g)}update(i,c,p){const{width:g,height:_}=i,C=!(this.size&&this.size[0]===g&&this.size[1]===_||p),{context:T}=this,{gl:k}=T;if(this.useMipmap=!!(c&&c.useMipmap),k.bindTexture(k.TEXTURE_2D,this.texture),T.pixelStoreUnpackFlipY.set(!1),T.pixelStoreUnpack.set(1),T.pixelStoreUnpackPremultiplyAlpha.set(this.format===k.RGBA&&(!c||c.premultiply!==!1)),C)this.size=[g,_],i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||a.a(i)?k.texImage2D(k.TEXTURE_2D,0,this.format,this.format,k.UNSIGNED_BYTE,i):k.texImage2D(k.TEXTURE_2D,0,this.format,g,_,0,this.format,k.UNSIGNED_BYTE,i.data);else{const{x:R,y:z}=p||{x:0,y:0};i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||a.a(i)?k.texSubImage2D(k.TEXTURE_2D,0,R,z,k.RGBA,k.UNSIGNED_BYTE,i):k.texSubImage2D(k.TEXTURE_2D,0,R,z,g,_,k.RGBA,k.UNSIGNED_BYTE,i.data)}this.useMipmap&&this.isSizePowerOfTwo()&&k.generateMipmap(k.TEXTURE_2D)}bind(i,c,p){const{context:g}=this,{gl:_}=g;_.bindTexture(_.TEXTURE_2D,this.texture),p!==_.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(p=_.LINEAR),i!==this.filter&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,i),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,p||i),this.filter=i),c!==this.wrap&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,c),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,c),this.wrap=c)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:i}=this.context;i.deleteTexture(this.texture),this.texture=null}}function Et(y){const{userImage:i}=y;return!!(i&&i.render&&i.render())&&(y.data.replace(new Uint8Array(i.data.buffer)),!0)}class Ge extends a.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new a.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(i){if(this.loaded!==i&&(this.loaded=i,i)){for(const{ids:c,callback:p}of this.requestors)this._notify(c,p);this.requestors=[]}}getImage(i){const c=this.images[i];if(c&&!c.data&&c.spriteData){const p=c.spriteData;c.data=new a.R({width:p.width,height:p.height},p.context.getImageData(p.x,p.y,p.width,p.height).data),c.spriteData=null}return c}addImage(i,c){if(this.images[i])throw new Error(`Image id ${i} already exist, use updateImage instead`);this._validate(i,c)&&(this.images[i]=c)}_validate(i,c){let p=!0;const g=c.data||c.spriteData;return this._validateStretch(c.stretchX,g&&g.width)||(this.fire(new a.j(new Error(`Image "${i}" has invalid "stretchX" value`))),p=!1),this._validateStretch(c.stretchY,g&&g.height)||(this.fire(new a.j(new Error(`Image "${i}" has invalid "stretchY" value`))),p=!1),this._validateContent(c.content,c)||(this.fire(new a.j(new Error(`Image "${i}" has invalid "content" value`))),p=!1),p}_validateStretch(i,c){if(!i)return!0;let p=0;for(const g of i){if(g[0]<p||g[1]<g[0]||c<g[1])return!1;p=g[1]}return!0}_validateContent(i,c){if(!i)return!0;if(i.length!==4)return!1;const p=c.spriteData,g=p&&p.width||c.data.width,_=p&&p.height||c.data.height;return!(i[0]<0||g<i[0]||i[1]<0||_<i[1]||i[2]<0||g<i[2]||i[3]<0||_<i[3]||i[2]<i[0]||i[3]<i[1])}updateImage(i,c,p=!0){const g=this.getImage(i);if(p&&(g.data.width!==c.data.width||g.data.height!==c.data.height))throw new Error(`size mismatch between old image (${g.data.width}x${g.data.height}) and new image (${c.data.width}x${c.data.height}).`);c.version=g.version+1,this.images[i]=c,this.updatedImages[i]=!0}removeImage(i){const c=this.images[i];delete this.images[i],delete this.patterns[i],c.userImage&&c.userImage.onRemove&&c.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(i,c){let p=!0;if(!this.isLoaded())for(const g of i)this.images[g]||(p=!1);this.isLoaded()||p?this._notify(i,c):this.requestors.push({ids:i,callback:c})}_notify(i,c){const p={};for(const g of i){let _=this.getImage(g);_||(this.fire(new a.k("styleimagemissing",{id:g})),_=this.getImage(g)),_?p[g]={data:_.data.clone(),pixelRatio:_.pixelRatio,sdf:_.sdf,version:_.version,stretchX:_.stretchX,stretchY:_.stretchY,content:_.content,hasRenderCallback:!!(_.userImage&&_.userImage.render)}:a.w(`Image "${g}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}c(null,p)}getPixelSize(){const{width:i,height:c}=this.atlasImage;return{width:i,height:c}}getPattern(i){const c=this.patterns[i],p=this.getImage(i);if(!p)return null;if(c&&c.position.version===p.version)return c.position;if(c)c.position.version=p.version;else{const g={w:p.data.width+2,h:p.data.height+2,x:0,y:0},_=new a.I(g,p);this.patterns[i]={bin:g,position:_}}return this._updatePatternAtlas(),this.patterns[i].position}bind(i){const c=i.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new ze(i,this.atlasImage,c.RGBA),this.atlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE)}_updatePatternAtlas(){const i=[];for(const _ in this.patterns)i.push(this.patterns[_].bin);const{w:c,h:p}=a.p(i),g=this.atlasImage;g.resize({width:c||1,height:p||1});for(const _ in this.patterns){const{bin:C}=this.patterns[_],T=C.x+1,k=C.y+1,R=this.getImage(_).data,z=R.width,L=R.height;a.R.copy(R,g,{x:0,y:0},{x:T,y:k},{width:z,height:L}),a.R.copy(R,g,{x:0,y:L-1},{x:T,y:k-1},{width:z,height:1}),a.R.copy(R,g,{x:0,y:0},{x:T,y:k+L},{width:z,height:1}),a.R.copy(R,g,{x:z-1,y:0},{x:T-1,y:k},{width:1,height:L}),a.R.copy(R,g,{x:0,y:0},{x:T+z,y:k},{width:1,height:L})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(i){for(const c of i){if(this.callbackDispatchedThisFrame[c])continue;this.callbackDispatchedThisFrame[c]=!0;const p=this.getImage(c);p||a.w(`Image with ID: "${c}" was not found`),Et(p)&&this.updateImage(c,p)}}}const yt=1e20;function xt(y,i,c,p,g,_,C,T,k){for(let R=i;R<i+p;R++)Ot(y,c*_+R,_,g,C,T,k);for(let R=c;R<c+g;R++)Ot(y,R*_+i,1,p,C,T,k)}function Ot(y,i,c,p,g,_,C){_[0]=0,C[0]=-yt,C[1]=yt,g[0]=y[i];for(let T=1,k=0,R=0;T<p;T++){g[T]=y[i+T*c];const z=T*T;do{const L=_[k];R=(g[T]-g[L]+z-L*L)/(T-L)/2}while(R<=C[k]&&--k>-1);k++,_[k]=T,C[k]=R,C[k+1]=yt}for(let T=0,k=0;T<p;T++){for(;C[k+1]<T;)k++;const R=_[k],z=T-R;y[i+T*c]=g[R]+z*z}}class zt{constructor(i,c){this.requestManager=i,this.localIdeographFontFamily=c,this.entries={}}setURL(i){this.url=i}getGlyphs(i,c){const p=[];for(const g in i)for(const _ of i[g])p.push({stack:g,id:_});a.o(p,({stack:g,id:_},C)=>{let T=this.entries[g];T||(T=this.entries[g]={glyphs:{},requests:{},ranges:{}});let k=T.glyphs[_];if(k!==void 0)return void C(null,{stack:g,id:_,glyph:k});if(k=this._tinySDF(T,g,_),k)return T.glyphs[_]=k,void C(null,{stack:g,id:_,glyph:k});const R=Math.floor(_/256);if(256*R>65535)return void C(new Error("glyphs > 65535 not supported"));if(T.ranges[R])return void C(null,{stack:g,id:_,glyph:k});if(!this.url)return void C(new Error("glyphsUrl is not set"));let z=T.requests[R];z||(z=T.requests[R]=[],zt.loadGlyphRange(g,R,this.url,this.requestManager,(L,G)=>{if(G){for(const te in G)this._doesCharSupportLocalGlyph(+te)||(T.glyphs[+te]=G[+te]);T.ranges[R]=!0}for(const te of z)te(L,G);delete T.requests[R]})),z.push((L,G)=>{L?C(L):G&&C(null,{stack:g,id:_,glyph:G[_]||null})})},(g,_)=>{if(g)c(g);else if(_){const C={};for(const{stack:T,id:k,glyph:R}of _)(C[T]||(C[T]={}))[k]=R&&{id:R.id,bitmap:R.bitmap.clone(),metrics:R.metrics};c(null,C)}})}_doesCharSupportLocalGlyph(i){return!!this.localIdeographFontFamily&&(a.u["CJK Unified Ideographs"](i)||a.u["Hangul Syllables"](i)||a.u.Hiragana(i)||a.u.Katakana(i))}_tinySDF(i,c,p){const g=this.localIdeographFontFamily;if(!g||!this._doesCharSupportLocalGlyph(p))return;let _=i.tinySDF;if(!_){let T="400";/bold/i.test(c)?T="900":/medium/i.test(c)?T="500":/light/i.test(c)&&(T="200"),_=i.tinySDF=new zt.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:g,fontWeight:T})}const C=_.draw(String.fromCharCode(p));return{id:p,bitmap:new a.q({width:C.width||60,height:C.height||60},C.data),metrics:{width:C.glyphWidth/2||24,height:C.glyphHeight/2||24,left:C.glyphLeft/2+.5||0,top:C.glyphTop/2-27.5||-8,advance:C.glyphAdvance/2||24,isDoubleResolution:!0}}}}zt.loadGlyphRange=function(y,i,c,p,g){const _=256*i,C=_+255,T=p.transformRequest(c.replace("{fontstack}",y).replace("{range}",`${_}-${C}`),F.Glyphs);a.l(T,(k,R)=>{if(k)g(k);else if(R){const z={};for(const L of a.n(R))z[L.id]=L;g(null,z)}})},zt.TinySDF=class{constructor({fontSize:y=24,buffer:i=3,radius:c=8,cutoff:p=.25,fontFamily:g="sans-serif",fontWeight:_="normal",fontStyle:C="normal"}={}){this.buffer=i,this.cutoff=p,this.radius=c;const T=this.size=y+4*i,k=this._createCanvas(T),R=this.ctx=k.getContext("2d",{willReadFrequently:!0});R.font=`${C} ${_} ${y}px ${g}`,R.textBaseline="alphabetic",R.textAlign="left",R.fillStyle="black",this.gridOuter=new Float64Array(T*T),this.gridInner=new Float64Array(T*T),this.f=new Float64Array(T),this.z=new Float64Array(T+1),this.v=new Uint16Array(T)}_createCanvas(y){const i=document.createElement("canvas");return i.width=i.height=y,i}draw(y){const{width:i,actualBoundingBoxAscent:c,actualBoundingBoxDescent:p,actualBoundingBoxLeft:g,actualBoundingBoxRight:_}=this.ctx.measureText(y),C=Math.ceil(c),T=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(_-g))),k=Math.min(this.size-this.buffer,C+Math.ceil(p)),R=T+2*this.buffer,z=k+2*this.buffer,L=Math.max(R*z,0),G=new Uint8ClampedArray(L),te={data:G,width:R,height:z,glyphWidth:T,glyphHeight:k,glyphTop:C,glyphLeft:0,glyphAdvance:i};if(T===0||k===0)return te;const{ctx:ee,buffer:ie,gridInner:Y,gridOuter:ye}=this;ee.clearRect(ie,ie,T,k),ee.fillText(y,ie,ie+C);const Te=ee.getImageData(ie,ie,T,k);ye.fill(yt,0,L),Y.fill(0,0,L);for(let ce=0;ce<k;ce++)for(let ve=0;ve<T;ve++){const Pe=Te.data[4*(ce*T+ve)+3]/255;if(Pe===0)continue;const Ae=(ce+ie)*R+ve+ie;if(Pe===1)ye[Ae]=0,Y[Ae]=yt;else{const De=.5-Pe;ye[Ae]=De>0?De*De:0,Y[Ae]=De<0?De*De:0}}xt(ye,0,0,R,z,R,this.f,this.v,this.z),xt(Y,ie,ie,T,k,R,this.f,this.v,this.z);for(let ce=0;ce<L;ce++){const ve=Math.sqrt(ye[ce])-Math.sqrt(Y[ce]);G[ce]=Math.round(255-255*(ve/this.radius+this.cutoff))}return te}};class St{constructor(){this.specification=a.v.light.position}possiblyEvaluate(i,c){return a.z(i.expression.evaluate(c))}interpolate(i,c,p){return{x:a.B.number(i.x,c.x,p),y:a.B.number(i.y,c.y,p),z:a.B.number(i.z,c.z,p)}}}let je;class ct extends a.E{constructor(i){super(),je=je||new a.r({anchor:new a.D(a.v.light.anchor),position:new St,color:new a.D(a.v.light.color),intensity:new a.D(a.v.light.intensity)}),this._transitionable=new a.T(je),this.setLight(i),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(i,c={}){if(!this._validate(a.t,i,c))for(const p in i){const g=i[p];p.endsWith("-transition")?this._transitionable.setTransition(p.slice(0,-11),g):this._transitionable.setValue(p,g)}}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,c,p){return(!p||p.validate!==!1)&&a.x(this,i.call(a.y,a.e({value:c,style:{glyphs:!0,sprite:!0},styleSpec:a.v})))}}class Pt{constructor(i,c){this.width=i,this.height=c,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(i,c){const p=i.join(",")+String(c);return this.dashEntry[p]||(this.dashEntry[p]=this.addDash(i,c)),this.dashEntry[p]}getDashRanges(i,c,p){const g=[];let _=i.length%2==1?-i[i.length-1]*p:0,C=i[0]*p,T=!0;g.push({left:_,right:C,isDash:T,zeroLength:i[0]===0});let k=i[0];for(let R=1;R<i.length;R++){T=!T;const z=i[R];_=k*p,k+=z,C=k*p,g.push({left:_,right:C,isDash:T,zeroLength:z===0})}return g}addRoundDash(i,c,p){const g=c/2;for(let _=-p;_<=p;_++){const C=this.width*(this.nextRow+p+_);let T=0,k=i[T];for(let R=0;R<this.width;R++){R/k.right>1&&(k=i[++T]);const z=Math.abs(R-k.left),L=Math.abs(R-k.right),G=Math.min(z,L);let te;const ee=_/p*(g+1);if(k.isDash){const ie=g-Math.abs(ee);te=Math.sqrt(G*G+ie*ie)}else te=g-Math.sqrt(G*G+ee*ee);this.data[C+R]=Math.max(0,Math.min(255,te+128))}}}addRegularDash(i){for(let T=i.length-1;T>=0;--T){const k=i[T],R=i[T+1];k.zeroLength?i.splice(T,1):R&&R.isDash===k.isDash&&(R.left=k.left,i.splice(T,1))}const c=i[0],p=i[i.length-1];c.isDash===p.isDash&&(c.left=p.left-this.width,p.right=c.right+this.width);const g=this.width*this.nextRow;let _=0,C=i[_];for(let T=0;T<this.width;T++){T/C.right>1&&(C=i[++_]);const k=Math.abs(T-C.left),R=Math.abs(T-C.right),z=Math.min(k,R);this.data[g+T]=Math.max(0,Math.min(255,(C.isDash?z:-z)+128))}}addDash(i,c){const p=c?7:0,g=2*p+1;if(this.nextRow+g>this.height)return a.w("LineAtlas out of space"),null;let _=0;for(let T=0;T<i.length;T++)_+=i[T];if(_!==0){const T=this.width/_,k=this.getDashRanges(i,this.width,T);c?this.addRoundDash(k,T,p):this.addRegularDash(k)}const C={y:(this.nextRow+p+.5)/this.height,height:2*p/this.height,width:_};return this.nextRow+=g,this.dirty=!0,C}bind(i){const c=i.gl;this.texture?(c.bindTexture(c.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,c.texSubImage2D(c.TEXTURE_2D,0,0,0,this.width,this.height,c.ALPHA,c.UNSIGNED_BYTE,this.data))):(this.texture=c.createTexture(),c.bindTexture(c.TEXTURE_2D,this.texture),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texImage2D(c.TEXTURE_2D,0,c.ALPHA,this.width,this.height,0,c.ALPHA,c.UNSIGNED_BYTE,this.data))}}class Ht{constructor(i,c,p){this.workerPool=i,this.actors=[],this.currentActor=0,this.id=p;const g=this.workerPool.acquire(p);for(let _=0;_<g.length;_++){const C=new a.C(g[_],c,p);C.name=`Worker ${_}`,this.actors.push(C)}if(!this.actors.length)throw new Error("No actors found")}broadcast(i,c,p){a.o(this.actors,(g,_)=>{g.send(i,c,_)},p=p||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(i=!0){this.actors.forEach(c=>{c.remove()}),this.actors=[],i&&this.workerPool.release(this.id)}}function Zt(y,i,c){const p=function(g,_){if(g)return c(g);if(_){const C=a.F(a.e(_,y),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);_.vector_layers&&(C.vectorLayers=_.vector_layers,C.vectorLayerIds=C.vectorLayers.map(T=>T.id)),c(null,C)}};return y.url?a.f(i.transformRequest(y.url,F.Source),p):a.h.frame(()=>p(null,y))}class Rt{constructor(i,c){i&&(c?this.setSouthWest(i).setNorthEast(c):Array.isArray(i)&&(i.length===4?this.setSouthWest([i[0],i[1]]).setNorthEast([i[2],i[3]]):this.setSouthWest(i[0]).setNorthEast(i[1])))}setNorthEast(i){return this._ne=i instanceof a.L?new a.L(i.lng,i.lat):a.L.convert(i),this}setSouthWest(i){return this._sw=i instanceof a.L?new a.L(i.lng,i.lat):a.L.convert(i),this}extend(i){const c=this._sw,p=this._ne;let g,_;if(i instanceof a.L)g=i,_=i;else{if(!(i instanceof Rt))return Array.isArray(i)?i.length===4||i.every(Array.isArray)?this.extend(Rt.convert(i)):this.extend(a.L.convert(i)):i&&("lng"in i||"lon"in i)&&"lat"in i?this.extend(a.L.convert(i)):this;if(g=i._sw,_=i._ne,!g||!_)return this}return c||p?(c.lng=Math.min(g.lng,c.lng),c.lat=Math.min(g.lat,c.lat),p.lng=Math.max(_.lng,p.lng),p.lat=Math.max(_.lat,p.lat)):(this._sw=new a.L(g.lng,g.lat),this._ne=new a.L(_.lng,_.lat)),this}getCenter(){return new a.L((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new a.L(this.getWest(),this.getNorth())}getSouthEast(){return new a.L(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(i){const{lng:c,lat:p}=a.L.convert(i);let g=this._sw.lng<=c&&c<=this._ne.lng;return this._sw.lng>this._ne.lng&&(g=this._sw.lng>=c&&c>=this._ne.lng),this._sw.lat<=p&&p<=this._ne.lat&&g}static convert(i){return i instanceof Rt?i:i&&new Rt(i)}static fromLngLat(i,c=0){const p=360*c/40075017,g=p/Math.cos(Math.PI/180*i.lat);return new Rt(new a.L(i.lng-g,i.lat-p),new a.L(i.lng+g,i.lat+p))}}class vn{constructor(i,c,p){this.bounds=Rt.convert(this.validateBounds(i)),this.minzoom=c||0,this.maxzoom=p||24}validateBounds(i){return Array.isArray(i)&&i.length===4?[Math.max(-180,i[0]),Math.max(-90,i[1]),Math.min(180,i[2]),Math.min(90,i[3])]:[-180,-90,180,90]}contains(i){const c=Math.pow(2,i.z),p=Math.floor(a.G(this.bounds.getWest())*c),g=Math.floor(a.H(this.bounds.getNorth())*c),_=Math.ceil(a.G(this.bounds.getEast())*c),C=Math.ceil(a.H(this.bounds.getSouth())*c);return i.x>=p&&i.x<_&&i.y>=g&&i.y<C}}class ui extends a.E{constructor(i,c,p,g){if(super(),this.load=()=>{this._loaded=!1,this.fire(new a.k("dataloading",{dataType:"source"})),this._tileJSONRequest=Zt(this._options,this.map._requestManager,(_,C)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),_?this.fire(new a.j(_)):C&&(a.e(this,C),C.bounds&&(this.tileBounds=new vn(C.bounds,this.minzoom,this.maxzoom)),this.fire(new a.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.k("data",{dataType:"source",sourceDataType:"content"})))})},this.serialize=()=>a.e({},this._options),this.id=i,this.dispatcher=p,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.e(this,a.F(c,["url","scheme","tileSize","promoteId"])),this._options=a.e({type:"vector"},c),this._collectResourceTiming=c.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(g)}loaded(){return this._loaded}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}onAdd(i){this.map=i,this.load()}setSourceProperty(i){this._tileJSONRequest&&this._tileJSONRequest.cancel(),i(),this.load()}setTiles(i){return this.setSourceProperty(()=>{this._options.tiles=i}),this}setUrl(i){return this.setSourceProperty(()=>{this.url=i,this._options.url=i}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}loadTile(i,c){const p=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),g={request:this.map._requestManager.transformRequest(p,F.Tile),uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,tileSize:this.tileSize*i.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function _(C,T){return delete i.request,i.aborted?c(null):C&&C.status!==404?c(C):(T&&T.resourceTiming&&(i.resourceTiming=T.resourceTiming),this.map._refreshExpiredTiles&&T&&i.setExpiryData(T),i.loadVectorData(T,this.map.painter),c(null),void(i.reloadCallback&&(this.loadTile(i,i.reloadCallback),i.reloadCallback=null)))}g.request.collectResourceTiming=this._collectResourceTiming,i.actor&&i.state!=="expired"?i.state==="loading"?i.reloadCallback=c:i.request=i.actor.send("reloadTile",g,_.bind(this)):(i.actor=this.dispatcher.getActor(),i.request=i.actor.send("loadTile",g,_.bind(this)))}abortTile(i){i.request&&(i.request.cancel(),delete i.request),i.actor&&i.actor.send("abortTile",{uid:i.uid,type:this.type,source:this.id},void 0)}unloadTile(i){i.unloadVectorData(),i.actor&&i.actor.send("removeTile",{uid:i.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class cr extends a.E{constructor(i,c,p,g){super(),this.id=i,this.dispatcher=p,this.setEventedParent(g),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=a.e({type:"raster"},c),a.e(this,a.F(c,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new a.k("dataloading",{dataType:"source"})),this._tileJSONRequest=Zt(this._options,this.map._requestManager,(i,c)=>{this._tileJSONRequest=null,this._loaded=!0,i?this.fire(new a.j(i)):c&&(a.e(this,c),c.bounds&&(this.tileBounds=new vn(c.bounds,this.minzoom,this.maxzoom)),this.fire(new a.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.k("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(i){this.map=i,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}setSourceProperty(i){this._tileJSONRequest&&this._tileJSONRequest.cancel(),i(),this.load()}setTiles(i){return this.setSourceProperty(()=>{this._options.tiles=i}),this}serialize(){return a.e({},this._options)}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}loadTile(i,c){const p=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);i.request=K.getImage(this.map._requestManager.transformRequest(p,F.Tile),(g,_,C)=>{if(delete i.request,i.aborted)i.state="unloaded",c(null);else if(g)i.state="errored",c(g);else if(_){this.map._refreshExpiredTiles&&C&&i.setExpiryData(C);const T=this.map.painter.context,k=T.gl;i.texture=this.map.painter.getTileTexture(_.width),i.texture?i.texture.update(_,{useMipmap:!0}):(i.texture=new ze(T,_,k.RGBA,{useMipmap:!0}),i.texture.bind(k.LINEAR,k.CLAMP_TO_EDGE,k.LINEAR_MIPMAP_NEAREST),T.extTextureFilterAnisotropic&&k.texParameterf(k.TEXTURE_2D,T.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,T.extTextureFilterAnisotropicMax)),i.state="loaded",c(null)}},this.map._refreshExpiredTiles)}abortTile(i,c){i.request&&(i.request.cancel(),delete i.request),c()}unloadTile(i,c){i.texture&&this.map.painter.saveTileTexture(i.texture),c()}hasTransition(){return!1}}class Gr extends cr{constructor(i,c,p,g){super(i,c,p,g),this.type="raster-dem",this.maxzoom=22,this._options=a.e({type:"raster-dem"},c),this.encoding=c.encoding||"mapbox",this.redFactor=c.redFactor,this.greenFactor=c.greenFactor,this.blueFactor=c.blueFactor,this.baseShift=c.baseShift}loadTile(i,c){const p=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),g=this.map._requestManager.transformRequest(p,F.Tile);function _(C,T){C&&(i.state="errored",c(C)),T&&(i.dem=T,i.needsHillshadePrepare=!0,i.needsTerrainPrepare=!0,i.state="loaded",c(null))}i.neighboringTiles=this._getNeighboringTiles(i.tileID),i.request=K.getImage(g,(C,T,k)=>a._(this,void 0,void 0,function*(){if(delete i.request,i.aborted)i.state="unloaded",c(null);else if(C)i.state="errored",c(C);else if(T){this.map._refreshExpiredTiles&&i.setExpiryData(k);const R=a.a(T)&&a.J()?T:yield function(L){return a._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&a.K()){const G=L.width+2,te=L.height+2;try{return new a.R({width:G,height:te},yield a.M(L,-1,-1,G,te))}catch{}}return a.h.getImageData(L,1)})}(T),z={uid:i.uid,coord:i.tileID,source:this.id,rawImageData:R,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};i.actor&&i.state!=="expired"||(i.actor=this.dispatcher.getActor(),i.actor.send("loadDEMTile",z,_))}}),this.map._refreshExpiredTiles)}_getNeighboringTiles(i){const c=i.canonical,p=Math.pow(2,c.z),g=(c.x-1+p)%p,_=c.x===0?i.wrap-1:i.wrap,C=(c.x+1+p)%p,T=c.x+1===p?i.wrap+1:i.wrap,k={};return k[new a.O(i.overscaledZ,_,c.z,g,c.y).key]={backfilled:!1},k[new a.O(i.overscaledZ,T,c.z,C,c.y).key]={backfilled:!1},c.y>0&&(k[new a.O(i.overscaledZ,_,c.z,g,c.y-1).key]={backfilled:!1},k[new a.O(i.overscaledZ,i.wrap,c.z,c.x,c.y-1).key]={backfilled:!1},k[new a.O(i.overscaledZ,T,c.z,C,c.y-1).key]={backfilled:!1}),c.y+1<p&&(k[new a.O(i.overscaledZ,_,c.z,g,c.y+1).key]={backfilled:!1},k[new a.O(i.overscaledZ,i.wrap,c.z,c.x,c.y+1).key]={backfilled:!1},k[new a.O(i.overscaledZ,T,c.z,C,c.y+1).key]={backfilled:!1}),k}unloadTile(i){i.demTexture&&this.map.painter.saveTileTexture(i.demTexture),i.fbo&&(i.fbo.destroy(),delete i.fbo),i.dem&&delete i.dem,delete i.neighboringTiles,i.state="unloaded",i.actor&&i.actor.send("removeDEMTile",{uid:i.uid,source:this.id})}}class Ai extends a.E{constructor(i,c,p,g){super(),this.load=()=>{this._updateWorkerData()},this.serialize=()=>a.e({},this._options,{type:this.type,data:this._data}),this.id=i,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=p.getActor(),this.setEventedParent(g),this._data=c.data,this._options=a.e({},c),this._collectResourceTiming=c.collectResourceTiming,c.maxzoom!==void 0&&(this.maxzoom=c.maxzoom),c.type&&(this.type=c.type),c.attribution&&(this.attribution=c.attribution),this.promoteId=c.promoteId;const _=a.N/this.tileSize;this.workerOptions=a.e({source:this.id,cluster:c.cluster||!1,geojsonVtOptions:{buffer:(c.buffer!==void 0?c.buffer:128)*_,tolerance:(c.tolerance!==void 0?c.tolerance:.375)*_,extent:a.N,maxZoom:this.maxzoom,lineMetrics:c.lineMetrics||!1,generateId:c.generateId||!1},superclusterOptions:{maxZoom:c.clusterMaxZoom!==void 0?c.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,c.clusterMinPoints||2),extent:a.N,radius:(c.clusterRadius||50)*_,log:!1,generateId:c.generateId||!1},clusterProperties:c.clusterProperties,filter:c.filter},c.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}onAdd(i){this.map=i,this.load()}setData(i){return this._data=i,this._updateWorkerData(),this}updateData(i){return this._updateWorkerData(i),this}setClusterOptions(i){return this.workerOptions.cluster=i.cluster,i&&(i.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=i.clusterRadius),i.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=i.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(i,c){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:i,source:this.id},c),this}getClusterChildren(i,c){return this.actor.send("geojson.getClusterChildren",{clusterId:i,source:this.id},c),this}getClusterLeaves(i,c,p,g){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:i,limit:c,offset:p},g),this}_updateWorkerData(i){const c=a.e({},this.workerOptions);i?c.dataDiff=i:typeof this._data=="string"?(c.request=this.map._requestManager.transformRequest(a.h.resolveURL(this._data),F.Source),c.request.collectResourceTiming=this._collectResourceTiming):c.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new a.k("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,c,(p,g)=>{if(this._pendingLoads--,this._removed||g&&g.abandoned)return void this.fire(new a.k("dataabort",{dataType:"source"}));let _=null;if(g&&g.resourceTiming&&g.resourceTiming[this.id]&&(_=g.resourceTiming[this.id].slice(0)),p)return void this.fire(new a.j(p));const C={dataType:"source"};this._collectResourceTiming&&_&&_.length>0&&a.e(C,{resourceTiming:_}),this.fire(new a.k("data",Object.assign(Object.assign({},C),{sourceDataType:"metadata"}))),this.fire(new a.k("data",Object.assign(Object.assign({},C),{sourceDataType:"content"})))})}loaded(){return this._pendingLoads===0}loadTile(i,c){const p=i.actor?"reloadTile":"loadTile";i.actor=this.actor;const g={type:this.type,uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};i.request=this.actor.send(p,g,(_,C)=>(delete i.request,i.unloadVectorData(),i.aborted?c(null):_?c(_):(i.loadVectorData(C,this.map.painter,p==="reloadTile"),c(null))))}abortTile(i){i.request&&(i.request.cancel(),delete i.request),i.aborted=!0}unloadTile(i){i.unloadVectorData(),this.actor.send("removeTile",{uid:i.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}hasTransition(){return!1}}var Zr=a.Q([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Wr extends a.E{constructor(i,c,p,g){super(),this.load=(_,C)=>{this._loaded=!1,this.fire(new a.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=K.getImage(this.map._requestManager.transformRequest(this.url,F.Image),(T,k)=>{this._request=null,this._loaded=!0,T?this.fire(new a.j(T)):k&&(this.image=k,_&&(this.coordinates=_),C&&C(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||!this.image)return;const _=this.map.painter.context,C=_.gl;this.boundsBuffer||(this.boundsBuffer=_.createVertexBuffer(this._boundsArray,Zr.members)),this.boundsSegments||(this.boundsSegments=a.S.simpleSegment(0,0,4,2)),this.texture||(this.texture=new ze(_,this.image,C.RGBA),this.texture.bind(C.LINEAR,C.CLAMP_TO_EDGE));let T=!1;for(const k in this.tiles){const R=this.tiles[k];R.state!=="loaded"&&(R.state="loaded",R.texture=this.texture,T=!0)}T&&this.fire(new a.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"image",url:this.options.url,coordinates:this.coordinates}),this.id=i,this.dispatcher=p,this.coordinates=c.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(g),this.options=c}loaded(){return this._loaded}updateImage(i){return i.url?(this._request&&(this._request.cancel(),this._request=null),this.options.url=i.url,this.load(i.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(i){this.map=i,this.load()}onRemove(){this._request&&(this._request.cancel(),this._request=null)}setCoordinates(i){this.coordinates=i;const c=i.map(a.U.fromLngLat);this.tileID=function(g){let _=1/0,C=1/0,T=-1/0,k=-1/0;for(const G of g)_=Math.min(_,G.x),C=Math.min(C,G.y),T=Math.max(T,G.x),k=Math.max(k,G.y);const R=Math.max(T-_,k-C),z=Math.max(0,Math.floor(-Math.log(R)/Math.LN2)),L=Math.pow(2,z);return new a.W(z,Math.floor((_+T)/2*L),Math.floor((C+k)/2*L))}(c),this.minzoom=this.maxzoom=this.tileID.z;const p=c.map(g=>this.tileID.getTilePoint(g)._round());return this._boundsArray=new a.V,this._boundsArray.emplaceBack(p[0].x,p[0].y,0,0),this._boundsArray.emplaceBack(p[1].x,p[1].y,a.N,0),this._boundsArray.emplaceBack(p[3].x,p[3].y,0,a.N),this._boundsArray.emplaceBack(p[2].x,p[2].y,a.N,a.N),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new a.k("data",{dataType:"source",sourceDataType:"content"})),this}loadTile(i,c){this.tileID&&this.tileID.equals(i.tileID.canonical)?(this.tiles[String(i.tileID.wrap)]=i,i.buckets={},c(null)):(i.state="errored",c(null))}hasTransition(){return!1}}class to extends Wr{constructor(i,c,p,g){super(i,c,p,g),this.load=()=>{this._loaded=!1;const _=this.options;this.urls=[];for(const C of _.urls)this.urls.push(this.map._requestManager.transformRequest(C,F.Source).url);a.X(this.urls,(C,T)=>{this._loaded=!0,C?this.fire(new a.j(C)):T&&(this.video=T,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const _=this.map.painter.context,C=_.gl;this.boundsBuffer||(this.boundsBuffer=_.createVertexBuffer(this._boundsArray,Zr.members)),this.boundsSegments||(this.boundsSegments=a.S.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(C.LINEAR,C.CLAMP_TO_EDGE),C.texSubImage2D(C.TEXTURE_2D,0,0,0,C.RGBA,C.UNSIGNED_BYTE,this.video)):(this.texture=new ze(_,this.video,C.RGBA),this.texture.bind(C.LINEAR,C.CLAMP_TO_EDGE));let T=!1;for(const k in this.tiles){const R=this.tiles[k];R.state!=="loaded"&&(R.state="loaded",R.texture=this.texture,T=!0)}T&&this.fire(new a.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"video",urls:this.urls,coordinates:this.coordinates}),this.roundZoom=!0,this.type="video",this.options=c}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(i){if(this.video){const c=this.video.seekable;i<c.start(0)||i>c.end(0)?this.fire(new a.j(new a.Y(`sources.${this.id}`,null,`Playback for this video can be set only between the ${c.start(0)} and ${c.end(0)}-second mark.`))):this.video.currentTime=i}}getVideo(){return this.video}onAdd(i){this.map||(this.map=i,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}hasTransition(){return this.video&&!this.video.paused}}class as extends Wr{constructor(i,c,p,g){super(i,c,p,g),this.load=()=>{this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new a.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},this.prepare=()=>{let _=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,_=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,_=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const C=this.map.painter.context,T=C.gl;this.boundsBuffer||(this.boundsBuffer=C.createVertexBuffer(this._boundsArray,Zr.members)),this.boundsSegments||(this.boundsSegments=a.S.simpleSegment(0,0,4,2)),this.texture?(_||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new ze(C,this.canvas,T.RGBA,{premultiply:!0});let k=!1;for(const R in this.tiles){const z=this.tiles[R];z.state!=="loaded"&&(z.state="loaded",z.texture=this.texture,k=!0)}k&&this.fire(new a.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"canvas",coordinates:this.coordinates}),c.coordinates?Array.isArray(c.coordinates)&&c.coordinates.length===4&&!c.coordinates.some(_=>!Array.isArray(_)||_.length!==2||_.some(C=>typeof C!="number"))||this.fire(new a.j(new a.Y(`sources.${i}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.j(new a.Y(`sources.${i}`,null,'missing required property "coordinates"'))),c.animate&&typeof c.animate!="boolean"&&this.fire(new a.j(new a.Y(`sources.${i}`,null,'optional "animate" property must be a boolean value'))),c.canvas?typeof c.canvas=="string"||c.canvas instanceof HTMLCanvasElement||this.fire(new a.j(new a.Y(`sources.${i}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.j(new a.Y(`sources.${i}`,null,'missing required property "canvas"'))),this.options=c,this.animate=c.animate===void 0||c.animate}getCanvas(){return this.canvas}onAdd(i){this.map=i,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const i of[this.canvas.width,this.canvas.height])if(isNaN(i)||i<=0)return!0;return!1}}const no={},ki=y=>{switch(y){case"geojson":return Ai;case"image":return Wr;case"raster":return cr;case"raster-dem":return Gr;case"vector":return ui;case"video":return to;case"canvas":return as}return no[y]};function Ao(y,i){const c=a.Z();return a.$(c,c,[1,1,0]),a.a0(c,c,[.5*y.width,.5*y.height,1]),a.a1(c,c,y.calculatePosMatrix(i.toUnwrapped()))}function ro(y,i,c,p,g,_){const C=function(L,G,te){if(L)for(const ee of L){const ie=G[ee];if(ie&&ie.source===te&&ie.type==="fill-extrusion")return!0}else for(const ee in G){const ie=G[ee];if(ie.source===te&&ie.type==="fill-extrusion")return!0}return!1}(g&&g.layers,i,y.id),T=_.maxPitchScaleFactor(),k=y.tilesIn(p,T,C);k.sort(Ms);const R=[];for(const L of k)R.push({wrappedTileID:L.tileID.wrapped().key,queryResults:L.tile.queryRenderedFeatures(i,c,y._state,L.queryGeometry,L.cameraQueryGeometry,L.scale,g,_,T,Ao(y.transform,L.tileID))});const z=function(L){const G={},te={};for(const ee of L){const ie=ee.queryResults,Y=ee.wrappedTileID,ye=te[Y]=te[Y]||{};for(const Te in ie){const ce=ie[Te],ve=ye[Te]=ye[Te]||{},Pe=G[Te]=G[Te]||[];for(const Ae of ce)ve[Ae.featureIndex]||(ve[Ae.featureIndex]=!0,Pe.push(Ae))}}return G}(R);for(const L in z)z[L].forEach(G=>{const te=G.feature,ee=y.getFeatureState(te.layer["source-layer"],te.id);te.source=te.layer.source,te.layer["source-layer"]&&(te.sourceLayer=te.layer["source-layer"]),te.state=ee});return z}function Ms(y,i){const c=y.tileID,p=i.tileID;return c.overscaledZ-p.overscaledZ||c.canonical.y-p.canonical.y||c.wrap-p.wrap||c.canonical.x-p.canonical.x}class ge{constructor(i,c){this.timeAdded=0,this.fadeEndTime=0,this.tileID=i,this.uid=a.a2(),this.uses=0,this.tileSize=c,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(i){const c=i+this.timeAdded;c<this.fadeEndTime||(this.fadeEndTime=c)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(i){this.demTexture&&i.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(i,c,p){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",i){i.featureIndex&&(this.latestFeatureIndex=i.featureIndex,i.rawTileData?(this.latestRawTileData=i.rawTileData,this.latestFeatureIndex.rawTileData=i.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=i.collisionBoxArray,this.buckets=function(g,_){const C={};if(!_)return C;for(const T of g){const k=T.layerIds.map(R=>_.getLayer(R)).filter(Boolean);if(k.length!==0){T.layers=k,T.stateDependentLayerIds&&(T.stateDependentLayers=T.stateDependentLayerIds.map(R=>k.filter(z=>z.id===R)[0]));for(const R of k)C[R.id]=T}}return C}(i.buckets,c.style),this.hasSymbolBuckets=!1;for(const g in this.buckets){const _=this.buckets[g];if(_ instanceof a.a4){if(this.hasSymbolBuckets=!0,!p)break;_.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const g in this.buckets){const _=this.buckets[g];if(_ instanceof a.a4&&_.hasRTLText){this.hasRTLText=!0,a.a5();break}}this.queryPadding=0;for(const g in this.buckets){const _=this.buckets[g];this.queryPadding=Math.max(this.queryPadding,c.style.getLayer(g).queryRadius(_))}i.imageAtlas&&(this.imageAtlas=i.imageAtlas),i.glyphAtlasImage&&(this.glyphAtlasImage=i.glyphAtlasImage)}else this.collisionBoxArray=new a.a3}unloadVectorData(){for(const i in this.buckets)this.buckets[i].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(i){return this.buckets[i.id]}upload(i){for(const p in this.buckets){const g=this.buckets[p];g.uploadPending()&&g.upload(i)}const c=i.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new ze(i,this.imageAtlas.image,c.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new ze(i,this.glyphAtlasImage,c.ALPHA),this.glyphAtlasImage=null)}prepare(i){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(i,this.imageAtlasTexture)}queryRenderedFeatures(i,c,p,g,_,C,T,k,R,z){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:g,cameraQueryGeometry:_,scale:C,tileSize:this.tileSize,pixelPosMatrix:z,transform:k,params:T,queryPadding:this.queryPadding*R},i,c,p):{}}querySourceFeatures(i,c){const p=this.latestFeatureIndex;if(!p||!p.rawTileData)return;const g=p.loadVTLayers(),_=c&&c.sourceLayer?c.sourceLayer:"",C=g._geojsonTileLayer||g[_];if(!C)return;const T=a.a6(c&&c.filter),{z:k,x:R,y:z}=this.tileID.canonical,L={z:k,x:R,y:z};for(let G=0;G<C.length;G++){const te=C.feature(G);if(T.needGeometry){const Y=a.a7(te,!0);if(!T.filter(new a.a8(this.tileID.overscaledZ),Y,this.tileID.canonical))continue}else if(!T.filter(new a.a8(this.tileID.overscaledZ),te))continue;const ee=p.getId(te,_),ie=new a.a9(te,k,R,z,ee);ie.tile=L,i.push(ie)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(i){const c=this.expirationTime;if(i.cacheControl){const p=a.aa(i.cacheControl);p["max-age"]&&(this.expirationTime=Date.now()+1e3*p["max-age"])}else i.expires&&(this.expirationTime=new Date(i.expires).getTime());if(this.expirationTime){const p=Date.now();let g=!1;if(this.expirationTime>p)g=!1;else if(c)if(this.expirationTime<c)g=!0;else{const _=this.expirationTime-c;_?this.expirationTime=p+Math.max(_,3e4):g=!0}else g=!0;g?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(i,c){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(i).length===0)return;const p=this.latestFeatureIndex.loadVTLayers();for(const g in this.buckets){if(!c.style.hasLayer(g))continue;const _=this.buckets[g],C=_.layers[0].sourceLayer||"_geojsonTileLayer",T=p[C],k=i[C];if(!T||!k||Object.keys(k).length===0)continue;_.update(k,T,this.imageAtlas&&this.imageAtlas.patternPositions||{});const R=c&&c.style&&c.style.getLayer(g);R&&(this.queryPadding=Math.max(this.queryPadding,R.queryRadius(_)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<a.h.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(i){this.symbolFadeHoldUntil=a.h.now()+i}setDependencies(i,c){const p={};for(const g of c)p[g]=!0;this.dependencies[i]=p}hasDependency(i,c){for(const p of i){const g=this.dependencies[p];if(g){for(const _ of c)if(g[_])return!0}}return!1}}class ke{constructor(i,c){this.max=i,this.onRemove=c,this.reset()}reset(){for(const i in this.data)for(const c of this.data[i])c.timeout&&clearTimeout(c.timeout),this.onRemove(c.value);return this.data={},this.order=[],this}add(i,c,p){const g=i.wrapped().key;this.data[g]===void 0&&(this.data[g]=[]);const _={value:c,timeout:void 0};if(p!==void 0&&(_.timeout=setTimeout(()=>{this.remove(i,_)},p)),this.data[g].push(_),this.order.push(g),this.order.length>this.max){const C=this._getAndRemoveByKey(this.order[0]);C&&this.onRemove(C)}return this}has(i){return i.wrapped().key in this.data}getAndRemove(i){return this.has(i)?this._getAndRemoveByKey(i.wrapped().key):null}_getAndRemoveByKey(i){const c=this.data[i].shift();return c.timeout&&clearTimeout(c.timeout),this.data[i].length===0&&delete this.data[i],this.order.splice(this.order.indexOf(i),1),c.value}getByKey(i){const c=this.data[i];return c?c[0].value:null}get(i){return this.has(i)?this.data[i.wrapped().key][0].value:null}remove(i,c){if(!this.has(i))return this;const p=i.wrapped().key,g=c===void 0?0:this.data[p].indexOf(c),_=this.data[p][g];return this.data[p].splice(g,1),_.timeout&&clearTimeout(_.timeout),this.data[p].length===0&&delete this.data[p],this.onRemove(_.value),this.order.splice(this.order.indexOf(p),1),this}setMaxSize(i){for(this.max=i;this.order.length>this.max;){const c=this._getAndRemoveByKey(this.order[0]);c&&this.onRemove(c)}return this}filter(i){const c=[];for(const p in this.data)for(const g of this.data[p])i(g.value)||c.push(g);for(const p of c)this.remove(p.value.tileID,p)}}class ue{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(i,c,p){const g=String(c);if(this.stateChanges[i]=this.stateChanges[i]||{},this.stateChanges[i][g]=this.stateChanges[i][g]||{},a.e(this.stateChanges[i][g],p),this.deletedStates[i]===null){this.deletedStates[i]={};for(const _ in this.state[i])_!==g&&(this.deletedStates[i][_]=null)}else if(this.deletedStates[i]&&this.deletedStates[i][g]===null){this.deletedStates[i][g]={};for(const _ in this.state[i][g])p[_]||(this.deletedStates[i][g][_]=null)}else for(const _ in p)this.deletedStates[i]&&this.deletedStates[i][g]&&this.deletedStates[i][g][_]===null&&delete this.deletedStates[i][g][_]}removeFeatureState(i,c,p){if(this.deletedStates[i]===null)return;const g=String(c);if(this.deletedStates[i]=this.deletedStates[i]||{},p&&c!==void 0)this.deletedStates[i][g]!==null&&(this.deletedStates[i][g]=this.deletedStates[i][g]||{},this.deletedStates[i][g][p]=null);else if(c!==void 0)if(this.stateChanges[i]&&this.stateChanges[i][g])for(p in this.deletedStates[i][g]={},this.stateChanges[i][g])this.deletedStates[i][g][p]=null;else this.deletedStates[i][g]=null;else this.deletedStates[i]=null}getState(i,c){const p=String(c),g=a.e({},(this.state[i]||{})[p],(this.stateChanges[i]||{})[p]);if(this.deletedStates[i]===null)return{};if(this.deletedStates[i]){const _=this.deletedStates[i][c];if(_===null)return{};for(const C in _)delete g[C]}return g}initializeTileState(i,c){i.setFeatureState(this.state,c)}coalesceChanges(i,c){const p={};for(const g in this.stateChanges){this.state[g]=this.state[g]||{};const _={};for(const C in this.stateChanges[g])this.state[g][C]||(this.state[g][C]={}),a.e(this.state[g][C],this.stateChanges[g][C]),_[C]=this.state[g][C];p[g]=_}for(const g in this.deletedStates){this.state[g]=this.state[g]||{};const _={};if(this.deletedStates[g]===null)for(const C in this.state[g])_[C]={},this.state[g][C]={};else for(const C in this.deletedStates[g]){if(this.deletedStates[g][C]===null)this.state[g][C]={};else for(const T of Object.keys(this.deletedStates[g][C]))delete this.state[g][C][T];_[C]=this.state[g][C]}p[g]=p[g]||{},a.e(p[g],_)}if(this.stateChanges={},this.deletedStates={},Object.keys(p).length!==0)for(const g in i)i[g].setFeatureState(p,c)}}class tt extends a.E{constructor(i,c,p){super(),this.id=i,this.dispatcher=p,this.on("data",g=>{g.dataType==="source"&&g.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&g.dataType==="source"&&g.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((g,_,C,T)=>{const k=new(ki(_.type))(g,_,C,T);if(k.id!==g)throw new Error(`Expected Source id to be ${g} instead of ${k.id}`);return k})(i,c,p,this),this._tiles={},this._cache=new ke(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new ue,this._didEmitContent=!1,this._updated=!1}onAdd(i){this.map=i,this._maxTileCacheSize=i?i._maxTileCacheSize:null,this._maxTileCacheZoomLevels=i?i._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(i)}onRemove(i){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(i)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const i in this._tiles){const c=this._tiles[i];if(c.state!=="loaded"&&c.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const i=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,i&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(i,c){return this._source.loadTile(i,c)}_unloadTile(i){if(this._source.unloadTile)return this._source.unloadTile(i,()=>{})}_abortTile(i){this._source.abortTile&&this._source.abortTile(i,()=>{}),this._source.fire(new a.k("dataabort",{tile:i,coord:i.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(i){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const c in this._tiles){const p=this._tiles[c];p.upload(i),p.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(i=>i.tileID).sort(Ye).map(i=>i.key)}getRenderableIds(i){const c=[];for(const p in this._tiles)this._isIdRenderable(p,i)&&c.push(this._tiles[p]);return i?c.sort((p,g)=>{const _=p.tileID,C=g.tileID,T=new a.P(_.canonical.x,_.canonical.y)._rotate(this.transform.angle),k=new a.P(C.canonical.x,C.canonical.y)._rotate(this.transform.angle);return _.overscaledZ-C.overscaledZ||k.y-T.y||k.x-T.x}).map(p=>p.tileID.key):c.map(p=>p.tileID).sort(Ye).map(p=>p.key)}hasRenderableParent(i){const c=this.findLoadedParent(i,0);return!!c&&this._isIdRenderable(c.tileID.key)}_isIdRenderable(i,c){return this._tiles[i]&&this._tiles[i].hasData()&&!this._coveredTiles[i]&&(c||!this._tiles[i].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const i in this._tiles)this._tiles[i].state!=="errored"&&this._reloadTile(i,"reloading")}}_reloadTile(i,c){const p=this._tiles[i];p&&(p.state!=="loading"&&(p.state=c),this._loadTile(p,this._tileLoaded.bind(this,p,i,c)))}_tileLoaded(i,c,p,g){if(g)return i.state="errored",void(g.status!==404?this._source.fire(new a.j(g,{tile:i})):this.update(this.transform,this.terrain));i.timeAdded=a.h.now(),p==="expired"&&(i.refreshedUponExpiration=!0),this._setTileReloadTimer(c,i),this.getSource().type==="raster-dem"&&i.dem&&this._backfillDEM(i),this._state.initializeTileState(i,this.map?this.map.painter:null),i.aborted||this._source.fire(new a.k("data",{dataType:"source",tile:i,coord:i.tileID}))}_backfillDEM(i){const c=this.getRenderableIds();for(let g=0;g<c.length;g++){const _=c[g];if(i.neighboringTiles&&i.neighboringTiles[_]){const C=this.getTileByID(_);p(i,C),p(C,i)}}function p(g,_){g.needsHillshadePrepare=!0,g.needsTerrainPrepare=!0;let C=_.tileID.canonical.x-g.tileID.canonical.x;const T=_.tileID.canonical.y-g.tileID.canonical.y,k=Math.pow(2,g.tileID.canonical.z),R=_.tileID.key;C===0&&T===0||Math.abs(T)>1||(Math.abs(C)>1&&(Math.abs(C+k)===1?C+=k:Math.abs(C-k)===1&&(C-=k)),_.dem&&g.dem&&(g.dem.backfillBorder(_.dem,C,T),g.neighboringTiles&&g.neighboringTiles[R]&&(g.neighboringTiles[R].backfilled=!0)))}}getTile(i){return this.getTileByID(i.key)}getTileByID(i){return this._tiles[i]}_retainLoadedChildren(i,c,p,g){for(const _ in this._tiles){let C=this._tiles[_];if(g[_]||!C.hasData()||C.tileID.overscaledZ<=c||C.tileID.overscaledZ>p)continue;let T=C.tileID;for(;C&&C.tileID.overscaledZ>c+1;){const R=C.tileID.scaledTo(C.tileID.overscaledZ-1);C=this._tiles[R.key],C&&C.hasData()&&(T=R)}let k=T;for(;k.overscaledZ>c;)if(k=k.scaledTo(k.overscaledZ-1),i[k.key]){g[T.key]=T;break}}}findLoadedParent(i,c){if(i.key in this._loadedParentTiles){const p=this._loadedParentTiles[i.key];return p&&p.tileID.overscaledZ>=c?p:null}for(let p=i.overscaledZ-1;p>=c;p--){const g=i.scaledTo(p),_=this._getLoadedTile(g);if(_)return _}}_getLoadedTile(i){const c=this._tiles[i.key];return c&&c.hasData()?c:this._cache.getByKey(i.wrapped().key)}updateCacheSize(i){const c=Math.ceil(i.width/this._source.tileSize)+1,p=Math.ceil(i.height/this._source.tileSize)+1,g=Math.floor(c*p*(this._maxTileCacheZoomLevels===null?a.c.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),_=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,g):g;this._cache.setMaxSize(_)}handleWrapJump(i){const c=Math.round((i-(this._prevLng===void 0?i:this._prevLng))/360);if(this._prevLng=i,c){const p={};for(const g in this._tiles){const _=this._tiles[g];_.tileID=_.tileID.unwrapTo(_.tileID.wrap+c),p[_.tileID.key]=_}this._tiles=p;for(const g in this._timers)clearTimeout(this._timers[g]),delete this._timers[g];for(const g in this._tiles)this._setTileReloadTimer(g,this._tiles[g])}}update(i,c){if(this.transform=i,this.terrain=c,!this._sourceLoaded||this._paused)return;let p;this.updateCacheSize(i),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?p=i.getVisibleUnwrappedCoordinates(this._source.tileID).map(z=>new a.O(z.canonical.z,z.wrap,z.canonical.z,z.canonical.x,z.canonical.y)):(p=i.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:c}),this._source.hasTile&&(p=p.filter(z=>this._source.hasTile(z)))):p=[];const g=i.coveringZoomLevel(this._source),_=Math.max(g-tt.maxOverzooming,this._source.minzoom),C=Math.max(g+tt.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const z={};for(const L of p)if(L.canonical.z>this._source.minzoom){const G=L.scaledTo(L.canonical.z-1);z[G.key]=G;const te=L.scaledTo(Math.max(this._source.minzoom,Math.min(L.canonical.z,5)));z[te.key]=te}p=p.concat(Object.values(z))}const T=p.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,T&&this.fire(new a.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const k=this._updateRetainedTiles(p,g);if(Ne(this._source.type)){const z={},L={},G=Object.keys(k),te=a.h.now();for(const ee of G){const ie=k[ee],Y=this._tiles[ee];if(!Y||Y.fadeEndTime!==0&&Y.fadeEndTime<=te)continue;const ye=this.findLoadedParent(ie,_);ye&&(this._addTile(ye.tileID),z[ye.tileID.key]=ye.tileID),L[ee]=ie}this._retainLoadedChildren(L,g,C,k);for(const ee in z)k[ee]||(this._coveredTiles[ee]=!0,k[ee]=z[ee]);if(c){const ee={},ie={};for(const Y of p)this._tiles[Y.key].hasData()?ee[Y.key]=Y:ie[Y.key]=Y;for(const Y in ie){const ye=ie[Y].children(this._source.maxzoom);this._tiles[ye[0].key]&&this._tiles[ye[1].key]&&this._tiles[ye[2].key]&&this._tiles[ye[3].key]&&(ee[ye[0].key]=k[ye[0].key]=ye[0],ee[ye[1].key]=k[ye[1].key]=ye[1],ee[ye[2].key]=k[ye[2].key]=ye[2],ee[ye[3].key]=k[ye[3].key]=ye[3],delete ie[Y])}for(const Y in ie){const ye=this.findLoadedParent(ie[Y],this._source.minzoom);if(ye){ee[ye.tileID.key]=k[ye.tileID.key]=ye.tileID;for(const Te in ee)ee[Te].isChildOf(ye.tileID)&&delete ee[Te]}}for(const Y in this._tiles)ee[Y]||(this._coveredTiles[Y]=!0)}}for(const z in k)this._tiles[z].clearFadeHold();const R=a.ab(this._tiles,k);for(const z of R){const L=this._tiles[z];L.hasSymbolBuckets&&!L.holdingForFade()?L.setHoldDuration(this.map._fadeDuration):L.hasSymbolBuckets&&!L.symbolFadeFinished()||this._removeTile(z)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const i in this._tiles)this._tiles[i].holdingForFade()&&this._removeTile(i)}_updateRetainedTiles(i,c){const p={},g={},_=Math.max(c-tt.maxOverzooming,this._source.minzoom),C=Math.max(c+tt.maxUnderzooming,this._source.minzoom),T={};for(const k of i){const R=this._addTile(k);p[k.key]=k,R.hasData()||c<this._source.maxzoom&&(T[k.key]=k)}this._retainLoadedChildren(T,c,C,p);for(const k of i){let R=this._tiles[k.key];if(R.hasData())continue;if(c+1>this._source.maxzoom){const L=k.children(this._source.maxzoom)[0],G=this.getTile(L);if(G&&G.hasData()){p[L.key]=L;continue}}else{const L=k.children(this._source.maxzoom);if(p[L[0].key]&&p[L[1].key]&&p[L[2].key]&&p[L[3].key])continue}let z=R.wasRequested();for(let L=k.overscaledZ-1;L>=_;--L){const G=k.scaledTo(L);if(g[G.key])break;if(g[G.key]=!0,R=this.getTile(G),!R&&z&&(R=this._addTile(G)),R){const te=R.hasData();if((z||te)&&(p[G.key]=G),z=R.wasRequested(),te)break}}}return p}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const i in this._tiles){const c=[];let p,g=this._tiles[i].tileID;for(;g.overscaledZ>0;){if(g.key in this._loadedParentTiles){p=this._loadedParentTiles[g.key];break}c.push(g.key);const _=g.scaledTo(g.overscaledZ-1);if(p=this._getLoadedTile(_),p)break;g=_}for(const _ of c)this._loadedParentTiles[_]=p}}_addTile(i){let c=this._tiles[i.key];if(c)return c;c=this._cache.getAndRemove(i),c&&(this._setTileReloadTimer(i.key,c),c.tileID=i,this._state.initializeTileState(c,this.map?this.map.painter:null),this._cacheTimers[i.key]&&(clearTimeout(this._cacheTimers[i.key]),delete this._cacheTimers[i.key],this._setTileReloadTimer(i.key,c)));const p=c;return c||(c=new ge(i,this._source.tileSize*i.overscaleFactor()),this._loadTile(c,this._tileLoaded.bind(this,c,i.key,c.state))),c.uses++,this._tiles[i.key]=c,p||this._source.fire(new a.k("dataloading",{tile:c,coord:c.tileID,dataType:"source"})),c}_setTileReloadTimer(i,c){i in this._timers&&(clearTimeout(this._timers[i]),delete this._timers[i]);const p=c.getExpiryTimeout();p&&(this._timers[i]=setTimeout(()=>{this._reloadTile(i,"expired"),delete this._timers[i]},p))}_removeTile(i){const c=this._tiles[i];c&&(c.uses--,delete this._tiles[i],this._timers[i]&&(clearTimeout(this._timers[i]),delete this._timers[i]),c.uses>0||(c.hasData()&&c.state!=="reloading"?this._cache.add(c.tileID,c,c.getExpiryTimeout()):(c.aborted=!0,this._abortTile(c),this._unloadTile(c))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const i in this._tiles)this._removeTile(i);this._cache.reset()}tilesIn(i,c,p){const g=[],_=this.transform;if(!_)return g;const C=p?_.getCameraQueryGeometry(i):i,T=i.map(ee=>_.pointCoordinate(ee,this.terrain)),k=C.map(ee=>_.pointCoordinate(ee,this.terrain)),R=this.getIds();let z=1/0,L=1/0,G=-1/0,te=-1/0;for(const ee of k)z=Math.min(z,ee.x),L=Math.min(L,ee.y),G=Math.max(G,ee.x),te=Math.max(te,ee.y);for(let ee=0;ee<R.length;ee++){const ie=this._tiles[R[ee]];if(ie.holdingForFade())continue;const Y=ie.tileID,ye=Math.pow(2,_.zoom-ie.tileID.overscaledZ),Te=c*ie.queryPadding*a.N/ie.tileSize/ye,ce=[Y.getTilePoint(new a.U(z,L)),Y.getTilePoint(new a.U(G,te))];if(ce[0].x-Te<a.N&&ce[0].y-Te<a.N&&ce[1].x+Te>=0&&ce[1].y+Te>=0){const ve=T.map(Ae=>Y.getTilePoint(Ae)),Pe=k.map(Ae=>Y.getTilePoint(Ae));g.push({tile:ie,tileID:Y,queryGeometry:ve,cameraQueryGeometry:Pe,scale:ye})}}return g}getVisibleCoordinates(i){const c=this.getRenderableIds(i).map(p=>this._tiles[p].tileID);for(const p of c)p.posMatrix=this.transform.calculatePosMatrix(p.toUnwrapped());return c}hasTransition(){if(this._source.hasTransition())return!0;if(Ne(this._source.type)){const i=a.h.now();for(const c in this._tiles)if(this._tiles[c].fadeEndTime>=i)return!0}return!1}setFeatureState(i,c,p){this._state.updateState(i=i||"_geojsonTileLayer",c,p)}removeFeatureState(i,c,p){this._state.removeFeatureState(i=i||"_geojsonTileLayer",c,p)}getFeatureState(i,c){return this._state.getState(i=i||"_geojsonTileLayer",c)}setDependencies(i,c,p){const g=this._tiles[i];g&&g.setDependencies(c,p)}reloadTilesForDependencies(i,c){for(const p in this._tiles)this._tiles[p].hasDependency(i,c)&&this._reloadTile(p,"reloading");this._cache.filter(p=>!p.hasDependency(i,c))}}function Ye(y,i){const c=Math.abs(2*y.wrap)-+(y.wrap<0),p=Math.abs(2*i.wrap)-+(i.wrap<0);return y.overscaledZ-i.overscaledZ||p-c||i.canonical.y-y.canonical.y||i.canonical.x-y.canonical.x}function Ne(y){return y==="raster"||y==="image"||y==="video"}tt.maxOverzooming=10,tt.maxUnderzooming=3;const Xe="mapboxgl_preloaded_worker_pool";class Vt{constructor(){this.active={}}acquire(i){if(!this.workers)for(this.workers=[];this.workers.length<Vt.workerCount;)this.workers.push(new Worker(a.c.WORKER_URL));return this.active[i]=!0,this.workers.slice()}release(i){delete this.active[i],this.numActive()===0&&(this.workers.forEach(c=>{c.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Xe]}numActive(){return Object.keys(this.active).length}}const _n=Math.floor(a.h.hardwareConcurrency/2);let An;function qi(){return An||(An=new Vt),An}Vt.workerCount=a.ac(globalThis)?Math.max(Math.min(_n,3),1):1;class io{constructor(i,c){this.reset(i,c)}reset(i,c){this.points=i||[],this._distances=[0];for(let p=1;p<this.points.length;p++)this._distances[p]=this._distances[p-1]+this.points[p].dist(this.points[p-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(c||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(i){if(this.points.length===1)return this.points[0];i=a.ad(i,0,1);let c=1,p=this._distances[c];const g=i*this.paddedLength+this.padding;for(;p<g&&c<this._distances.length;)p=this._distances[++c];const _=c-1,C=this._distances[_],T=p-C,k=T>0?(g-C)/T:0;return this.points[_].mult(1-k).add(this.points[c].mult(k))}}function Ii(y,i){let c=!0;return y==="always"||y!=="never"&&i!=="never"||(c=!1),c}class Gi{constructor(i,c,p){const g=this.boxCells=[],_=this.circleCells=[];this.xCellCount=Math.ceil(i/p),this.yCellCount=Math.ceil(c/p);for(let C=0;C<this.xCellCount*this.yCellCount;C++)g.push([]),_.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=i,this.height=c,this.xScale=this.xCellCount/i,this.yScale=this.yCellCount/c,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(i,c,p,g,_){this._forEachCell(c,p,g,_,this._insertBoxCell,this.boxUid++),this.boxKeys.push(i),this.bboxes.push(c),this.bboxes.push(p),this.bboxes.push(g),this.bboxes.push(_)}insertCircle(i,c,p,g){this._forEachCell(c-g,p-g,c+g,p+g,this._insertCircleCell,this.circleUid++),this.circleKeys.push(i),this.circles.push(c),this.circles.push(p),this.circles.push(g)}_insertBoxCell(i,c,p,g,_,C){this.boxCells[_].push(C)}_insertCircleCell(i,c,p,g,_,C){this.circleCells[_].push(C)}_query(i,c,p,g,_,C,T){if(p<0||i>this.width||g<0||c>this.height)return[];const k=[];if(i<=0&&c<=0&&this.width<=p&&this.height<=g){if(_)return[{key:null,x1:i,y1:c,x2:p,y2:g}];for(let R=0;R<this.boxKeys.length;R++)k.push({key:this.boxKeys[R],x1:this.bboxes[4*R],y1:this.bboxes[4*R+1],x2:this.bboxes[4*R+2],y2:this.bboxes[4*R+3]});for(let R=0;R<this.circleKeys.length;R++){const z=this.circles[3*R],L=this.circles[3*R+1],G=this.circles[3*R+2];k.push({key:this.circleKeys[R],x1:z-G,y1:L-G,x2:z+G,y2:L+G})}}else this._forEachCell(i,c,p,g,this._queryCell,k,{hitTest:_,overlapMode:C,seenUids:{box:{},circle:{}}},T);return k}query(i,c,p,g){return this._query(i,c,p,g,!1,null)}hitTest(i,c,p,g,_,C){return this._query(i,c,p,g,!0,_,C).length>0}hitTestCircle(i,c,p,g,_){const C=i-p,T=i+p,k=c-p,R=c+p;if(T<0||C>this.width||R<0||k>this.height)return!1;const z=[];return this._forEachCell(C,k,T,R,this._queryCellCircle,z,{hitTest:!0,overlapMode:g,circle:{x:i,y:c,radius:p},seenUids:{box:{},circle:{}}},_),z.length>0}_queryCell(i,c,p,g,_,C,T,k){const{seenUids:R,hitTest:z,overlapMode:L}=T,G=this.boxCells[_];if(G!==null){const ee=this.bboxes;for(const ie of G)if(!R.box[ie]){R.box[ie]=!0;const Y=4*ie,ye=this.boxKeys[ie];if(i<=ee[Y+2]&&c<=ee[Y+3]&&p>=ee[Y+0]&&g>=ee[Y+1]&&(!k||k(ye))&&(!z||!Ii(L,ye.overlapMode))&&(C.push({key:ye,x1:ee[Y],y1:ee[Y+1],x2:ee[Y+2],y2:ee[Y+3]}),z))return!0}}const te=this.circleCells[_];if(te!==null){const ee=this.circles;for(const ie of te)if(!R.circle[ie]){R.circle[ie]=!0;const Y=3*ie,ye=this.circleKeys[ie];if(this._circleAndRectCollide(ee[Y],ee[Y+1],ee[Y+2],i,c,p,g)&&(!k||k(ye))&&(!z||!Ii(L,ye.overlapMode))){const Te=ee[Y],ce=ee[Y+1],ve=ee[Y+2];if(C.push({key:ye,x1:Te-ve,y1:ce-ve,x2:Te+ve,y2:ce+ve}),z)return!0}}}return!1}_queryCellCircle(i,c,p,g,_,C,T,k){const{circle:R,seenUids:z,overlapMode:L}=T,G=this.boxCells[_];if(G!==null){const ee=this.bboxes;for(const ie of G)if(!z.box[ie]){z.box[ie]=!0;const Y=4*ie,ye=this.boxKeys[ie];if(this._circleAndRectCollide(R.x,R.y,R.radius,ee[Y+0],ee[Y+1],ee[Y+2],ee[Y+3])&&(!k||k(ye))&&!Ii(L,ye.overlapMode))return C.push(!0),!0}}const te=this.circleCells[_];if(te!==null){const ee=this.circles;for(const ie of te)if(!z.circle[ie]){z.circle[ie]=!0;const Y=3*ie,ye=this.circleKeys[ie];if(this._circlesCollide(ee[Y],ee[Y+1],ee[Y+2],R.x,R.y,R.radius)&&(!k||k(ye))&&!Ii(L,ye.overlapMode))return C.push(!0),!0}}}_forEachCell(i,c,p,g,_,C,T,k){const R=this._convertToXCellCoord(i),z=this._convertToYCellCoord(c),L=this._convertToXCellCoord(p),G=this._convertToYCellCoord(g);for(let te=R;te<=L;te++)for(let ee=z;ee<=G;ee++)if(_.call(this,i,c,p,g,this.xCellCount*ee+te,C,T,k))return}_convertToXCellCoord(i){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(i*this.xScale)))}_convertToYCellCoord(i){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(i*this.yScale)))}_circlesCollide(i,c,p,g,_,C){const T=g-i,k=_-c,R=p+C;return R*R>T*T+k*k}_circleAndRectCollide(i,c,p,g,_,C,T){const k=(C-g)/2,R=Math.abs(i-(g+k));if(R>k+p)return!1;const z=(T-_)/2,L=Math.abs(c-(_+z));if(L>z+p)return!1;if(R<=k||L<=z)return!0;const G=R-k,te=L-z;return G*G+te*te<=p*p}}function Ze(y,i,c,p,g){const _=a.Z();return i?(a.a0(_,_,[1/g,1/g,1]),c||a.ae(_,_,p.angle)):a.a1(_,p.labelPlaneMatrix,y),_}function ci(y,i,c,p,g){if(i){const _=a.af(y);return a.a0(_,_,[g,g,1]),c||a.ae(_,_,-p.angle),_}return p.glCoordMatrix}function xn(y,i,c){let p;c?(p=[y.x,y.y,c(y.x,y.y),1],a.ag(p,p,i)):(p=[y.x,y.y,0,1],se(p,p,i));const g=p[3];return{point:new a.P(p[0]/g,p[1]/g),signedDistanceFromCamera:g}}function ls(y,i){return .5+y/i*.5}function Rs(y,i){const c=y[0]/y[3],p=y[1]/y[3];return c>=-i[0]&&c<=i[0]&&p>=-i[1]&&p<=i[1]}function Qe(y,i,c,p,g,_,C,T,k,R){const z=p?y.textSizeData:y.iconSizeData,L=a.ah(z,c.transform.zoom),G=[256/c.width*2+1,256/c.height*2+1],te=p?y.text.dynamicLayoutVertexArray:y.icon.dynamicLayoutVertexArray;te.clear();const ee=y.lineVertexArray,ie=p?y.text.placedSymbolArray:y.icon.placedSymbolArray,Y=c.transform.width/c.transform.height;let ye=!1;for(let Te=0;Te<ie.length;Te++){const ce=ie.get(Te);if(ce.hidden||ce.writingMode===a.ai.vertical&&!ye){Q(ce.numGlyphs,te);continue}let ve;if(ye=!1,R?(ve=[ce.anchorX,ce.anchorY,R(ce.anchorX,ce.anchorY),1],a.ag(ve,ve,i)):(ve=[ce.anchorX,ce.anchorY,0,1],se(ve,ve,i)),!Rs(ve,G)){Q(ce.numGlyphs,te);continue}const Pe=ls(c.transform.cameraToCenterDistance,ve[3]),Ae=a.aj(z,L,ce),De=C?Ae/Pe:Ae*Pe,Ve=new a.P(ce.anchorX,ce.anchorY),Fe=xn(Ve,g,R).point,Ue={projections:{},offsets:{}},lt=Rr(ce,De,!1,T,i,g,_,y.glyphOffsetArray,ee,te,Fe,Ve,Ue,Y,k,R);ye=lt.useVertical,(lt.notEnoughRoom||ye||lt.needsFlipping&&Rr(ce,De,!0,T,i,g,_,y.glyphOffsetArray,ee,te,Fe,Ve,Ue,Y,k,R).notEnoughRoom)&&Q(ce.numGlyphs,te)}p?y.text.dynamicLayoutVertexBuffer.updateData(te):y.icon.dynamicLayoutVertexBuffer.updateData(te)}function Ft(y,i,c,p,g,_,C,T,k,R,z,L,G){const te=T.glyphStartIndex+T.numGlyphs,ee=T.lineStartIndex,ie=T.lineStartIndex+T.lineLength,Y=i.getoffsetX(T.glyphStartIndex),ye=i.getoffsetX(te-1),Te=$(y*Y,c,p,g,_,C,T.segment,ee,ie,k,R,z,L,G);if(!Te)return null;const ce=$(y*ye,c,p,g,_,C,T.segment,ee,ie,k,R,z,L,G);return ce?{first:Te,last:ce}:null}function kt(y,i,c,p){return y===a.ai.horizontal&&Math.abs(c.y-i.y)>Math.abs(c.x-i.x)*p?{useVertical:!0}:(y===a.ai.vertical?i.y<c.y:i.x>c.x)?{needsFlipping:!0}:null}function Rr(y,i,c,p,g,_,C,T,k,R,z,L,G,te,ee,ie){const Y=i/24,ye=y.lineOffsetX*Y,Te=y.lineOffsetY*Y;let ce;if(y.numGlyphs>1){const ve=y.glyphStartIndex+y.numGlyphs,Pe=y.lineStartIndex,Ae=y.lineStartIndex+y.lineLength,De=Ft(Y,T,ye,Te,c,z,L,y,k,_,G,ee,ie);if(!De)return{notEnoughRoom:!0};const Ve=xn(De.first.point,C,ie).point,Fe=xn(De.last.point,C,ie).point;if(p&&!c){const Ue=kt(y.writingMode,Ve,Fe,te);if(Ue)return Ue}ce=[De.first];for(let Ue=y.glyphStartIndex+1;Ue<ve-1;Ue++)ce.push($(Y*T.getoffsetX(Ue),ye,Te,c,z,L,y.segment,Pe,Ae,k,_,G,ee,ie));ce.push(De.last)}else{if(p&&!c){const Pe=xn(L,g,ie).point,Ae=y.lineStartIndex+y.segment+1,De=new a.P(k.getx(Ae),k.gety(Ae)),Ve=xn(De,g,ie),Fe=Ve.signedDistanceFromCamera>0?Ve.point:us(L,De,Pe,1,g,ie),Ue=kt(y.writingMode,Pe,Fe,te);if(Ue)return Ue}const ve=$(Y*T.getoffsetX(y.glyphStartIndex),ye,Te,c,z,L,y.segment,y.lineStartIndex,y.lineStartIndex+y.lineLength,k,_,G,ee,ie);if(!ve)return{notEnoughRoom:!0};ce=[ve]}for(const ve of ce)a.ak(R,ve.point,ve.angle);return{}}function us(y,i,c,p,g,_){const C=xn(y.add(y.sub(i)._unit()),g,_).point,T=c.sub(C);return c.add(T._mult(p/T.mag()))}function Dt(y,i){const{projectionCache:c,lineVertexArray:p,labelPlaneMatrix:g,tileAnchorPoint:_,distanceFromAnchor:C,getElevation:T,previousVertex:k,direction:R,absOffsetX:z}=i;if(c.projections[y])return c.projections[y];const L=new a.P(p.getx(y),p.gety(y)),G=xn(L,g,T);if(G.signedDistanceFromCamera>0)return c.projections[y]=G.point,G.point;const te=y-R;return us(C===0?_:new a.P(p.getx(te),p.gety(te)),L,k,z-C+1,g,T)}function Ds(y,i,c){return y._unit()._perp()._mult(i*c)}function re(y,i,c,p,g,_,C,T){const{projectionCache:k,direction:R}=T;if(k.offsets[y])return k.offsets[y];const z=c.add(i);if(y+R<p||y+R>=g)return k.offsets[y]=z,z;const L=Dt(y+R,T),G=Ds(L.sub(c),C,R),te=c.add(G),ee=L.add(G);return k.offsets[y]=a.al(_,z,te,ee)||z,k.offsets[y]}function $(y,i,c,p,g,_,C,T,k,R,z,L,G,te){const ee=p?y-i:y+i;let ie=ee>0?1:-1,Y=0;p&&(ie*=-1,Y=Math.PI),ie<0&&(Y+=Math.PI);let ye,Te,ce=ie>0?T+C:T+C+1,ve=g,Pe=g,Ae=0,De=0;const Ve=Math.abs(ee),Fe=[];let Ue;for(;Ae+De<=Ve;){if(ce+=ie,ce<T||ce>=k)return null;Ae+=De,Pe=ve,Te=ye;const Je={projectionCache:L,lineVertexArray:R,labelPlaneMatrix:z,tileAnchorPoint:_,distanceFromAnchor:Ae,getElevation:te,previousVertex:Pe,direction:ie,absOffsetX:Ve};if(ve=Dt(ce,Je),c===0)Fe.push(Pe),Ue=ve.sub(Pe);else{let Tt;const ht=ve.sub(Pe);Tt=ht.mag()===0?Ds(Dt(ce+ie,Je).sub(ve),c,ie):Ds(ht,c,ie),Te||(Te=Pe.add(Tt)),ye=re(ce,Tt,ve,T,k,Te,c,Je),Fe.push(Te),Ue=ye.sub(Te)}De=Ue.mag()}const lt=Ue._mult((Ve-Ae)/De)._add(Te||Pe),$t=Y+Math.atan2(ve.y-Pe.y,ve.x-Pe.x);return Fe.push(lt),{point:lt,angle:G?$t:0,path:Fe}}const q=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Q(y,i){for(let c=0;c<y;c++){const p=i.length;i.resize(p+4),i.float32.set(q,3*p)}}function se(y,i,c){const p=i[0],g=i[1];return y[0]=c[0]*p+c[4]*g+c[12],y[1]=c[1]*p+c[5]*g+c[13],y[3]=c[3]*p+c[7]*g+c[15],y}const le=100;class we{constructor(i,c=new Gi(i.width+200,i.height+200,25),p=new Gi(i.width+200,i.height+200,25)){this.transform=i,this.grid=c,this.ignoredGrid=p,this.pitchfactor=Math.cos(i._pitch)*i.cameraToCenterDistance,this.screenRightBoundary=i.width+le,this.screenBottomBoundary=i.height+le,this.gridRightBoundary=i.width+200,this.gridBottomBoundary=i.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(i,c,p,g,_,C){const T=this.projectAndGetPerspectiveRatio(g,i.anchorPointX,i.anchorPointY,C),k=p*T.perspectiveRatio,R=i.x1*k+T.point.x,z=i.y1*k+T.point.y,L=i.x2*k+T.point.x,G=i.y2*k+T.point.y;return!this.isInsideGrid(R,z,L,G)||c!=="always"&&this.grid.hitTest(R,z,L,G,c,_)||T.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[R,z,L,G],offscreen:this.isOffscreen(R,z,L,G)}}placeCollisionCircles(i,c,p,g,_,C,T,k,R,z,L,G,te,ee){const ie=[],Y=new a.P(c.anchorX,c.anchorY),ye=xn(Y,C,ee),Te=ls(this.transform.cameraToCenterDistance,ye.signedDistanceFromCamera),ce=(z?_/Te:_*Te)/a.ap,ve=xn(Y,T,ee).point,Pe=Ft(ce,g,c.lineOffsetX*ce,c.lineOffsetY*ce,!1,ve,Y,c,p,T,{projections:{},offsets:{}},!1,ee);let Ae=!1,De=!1,Ve=!0;if(Pe){const Fe=.5*G*Te+te,Ue=new a.P(-100,-100),lt=new a.P(this.screenRightBoundary,this.screenBottomBoundary),$t=new io,Je=Pe.first,Tt=Pe.last;let ht=[];for(let Lt=Je.path.length-1;Lt>=1;Lt--)ht.push(Je.path[Lt]);for(let Lt=1;Lt<Tt.path.length;Lt++)ht.push(Tt.path[Lt]);const on=2.5*Fe;if(k){const Lt=ht.map(jt=>xn(jt,k,ee));ht=Lt.some(jt=>jt.signedDistanceFromCamera<=0)?[]:Lt.map(jt=>jt.point)}let Bt=[];if(ht.length>0){const Lt=ht[0].clone(),jt=ht[0].clone();for(let On=1;On<ht.length;On++)Lt.x=Math.min(Lt.x,ht[On].x),Lt.y=Math.min(Lt.y,ht[On].y),jt.x=Math.max(jt.x,ht[On].x),jt.y=Math.max(jt.y,ht[On].y);Bt=Lt.x>=Ue.x&&jt.x<=lt.x&&Lt.y>=Ue.y&&jt.y<=lt.y?[ht]:jt.x<Ue.x||Lt.x>lt.x||jt.y<Ue.y||Lt.y>lt.y?[]:a.am([ht],Ue.x,Ue.y,lt.x,lt.y)}for(const Lt of Bt){$t.reset(Lt,.25*Fe);let jt=0;jt=$t.length<=.5*Fe?1:Math.ceil($t.paddedLength/on)+1;for(let On=0;On<jt;On++){const cn=On/Math.max(jt-1,1),gr=$t.lerp(cn),Jn=gr.x+le,jn=gr.y+le;ie.push(Jn,jn,Fe,0);const gi=Jn-Fe,pn=jn-Fe,hs=Jn+Fe,ds=jn+Fe;if(Ve=Ve&&this.isOffscreen(gi,pn,hs,ds),De=De||this.isInsideGrid(gi,pn,hs,ds),i!=="always"&&this.grid.hitTestCircle(Jn,jn,Fe,i,L)&&(Ae=!0,!R))return{circles:[],offscreen:!1,collisionDetected:Ae}}}}return{circles:!R&&Ae||!De||Te<this.perspectiveRatioCutoff?[]:ie,offscreen:Ve,collisionDetected:Ae}}queryRenderedSymbols(i){if(i.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const c=[];let p=1/0,g=1/0,_=-1/0,C=-1/0;for(const z of i){const L=new a.P(z.x+le,z.y+le);p=Math.min(p,L.x),g=Math.min(g,L.y),_=Math.max(_,L.x),C=Math.max(C,L.y),c.push(L)}const T=this.grid.query(p,g,_,C).concat(this.ignoredGrid.query(p,g,_,C)),k={},R={};for(const z of T){const L=z.key;if(k[L.bucketInstanceId]===void 0&&(k[L.bucketInstanceId]={}),k[L.bucketInstanceId][L.featureIndex])continue;const G=[new a.P(z.x1,z.y1),new a.P(z.x2,z.y1),new a.P(z.x2,z.y2),new a.P(z.x1,z.y2)];a.an(c,G)&&(k[L.bucketInstanceId][L.featureIndex]=!0,R[L.bucketInstanceId]===void 0&&(R[L.bucketInstanceId]=[]),R[L.bucketInstanceId].push(L.featureIndex))}return R}insertCollisionBox(i,c,p,g,_,C){(p?this.ignoredGrid:this.grid).insert({bucketInstanceId:g,featureIndex:_,collisionGroupID:C,overlapMode:c},i[0],i[1],i[2],i[3])}insertCollisionCircles(i,c,p,g,_,C){const T=p?this.ignoredGrid:this.grid,k={bucketInstanceId:g,featureIndex:_,collisionGroupID:C,overlapMode:c};for(let R=0;R<i.length;R+=4)T.insertCircle(k,i[R],i[R+1],i[R+2])}projectAndGetPerspectiveRatio(i,c,p,g){let _;return g?(_=[c,p,g(c,p),1],a.ag(_,_,i)):(_=[c,p,0,1],se(_,_,i)),{point:new a.P((_[0]/_[3]+1)/2*this.transform.width+le,(-_[1]/_[3]+1)/2*this.transform.height+le),perspectiveRatio:.5+this.transform.cameraToCenterDistance/_[3]*.5}}isOffscreen(i,c,p,g){return p<le||i>=this.screenRightBoundary||g<le||c>this.screenBottomBoundary}isInsideGrid(i,c,p,g){return p>=0&&i<this.gridRightBoundary&&g>=0&&c<this.gridBottomBoundary}getViewportMatrix(){const i=a.ao([]);return a.$(i,i,[-100,-100,0]),i}}function me(y,i,c){return i*(a.N/(y.tileSize*Math.pow(2,c-y.tileID.overscaledZ)))}class de{constructor(i,c,p,g){this.opacity=i?Math.max(0,Math.min(1,i.opacity+(i.placed?c:-c))):g&&p?1:0,this.placed=p}isHidden(){return this.opacity===0&&!this.placed}}class _e{constructor(i,c,p,g,_){this.text=new de(i?i.text:null,c,p,_),this.icon=new de(i?i.icon:null,c,g,_)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Me{constructor(i,c,p){this.text=i,this.icon=c,this.skipFade=p}}class Re{constructor(){this.invProjMatrix=a.Z(),this.viewportMatrix=a.Z(),this.circles=[]}}class Oe{constructor(i,c,p,g,_){this.bucketInstanceId=i,this.featureIndex=c,this.sourceLayerIndex=p,this.bucketIndex=g,this.tileID=_}}class vt{constructor(i){this.crossSourceCollisions=i,this.maxGroupID=0,this.collisionGroups={}}get(i){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[i]){const c=++this.maxGroupID;this.collisionGroups[i]={ID:c,predicate:p=>p.collisionGroupID===c}}return this.collisionGroups[i]}}function At(y,i,c,p,g){const{horizontalAlign:_,verticalAlign:C}=a.au(y);return new a.P(-(_-.5)*i+p[0]*g,-(C-.5)*c+p[1]*g)}function at(y,i,c,p,g,_){const{x1:C,x2:T,y1:k,y2:R,anchorPointX:z,anchorPointY:L}=y,G=new a.P(i,c);return p&&G._rotate(g?_:-_),{x1:C+G.x,y1:k+G.y,x2:T+G.x,y2:R+G.y,anchorPointX:z,anchorPointY:L}}class wt{constructor(i,c,p,g,_){this.transform=i.clone(),this.terrain=c,this.collisionIndex=new we(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=p,this.retainedQueryData={},this.collisionGroups=new vt(g),this.collisionCircleArrays={},this.prevPlacement=_,_&&(_.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(i,c,p,g){const _=p.getBucket(c),C=p.latestFeatureIndex;if(!_||!C||c.id!==_.layerIds[0])return;const T=p.collisionBoxArray,k=_.layers[0].layout,R=Math.pow(2,this.transform.zoom-p.tileID.overscaledZ),z=p.tileSize/a.N,L=this.transform.calculatePosMatrix(p.tileID.toUnwrapped()),G=k.get("text-pitch-alignment")==="map",te=k.get("text-rotation-alignment")==="map",ee=me(p,1,this.transform.zoom),ie=Ze(L,G,te,this.transform,ee);let Y=null;if(G){const Te=ci(L,G,te,this.transform,ee);Y=a.a1([],this.transform.labelPlaneMatrix,Te)}this.retainedQueryData[_.bucketInstanceId]=new Oe(_.bucketInstanceId,C,_.sourceLayerIndex,_.index,p.tileID);const ye={bucket:_,layout:k,posMatrix:L,textLabelPlaneMatrix:ie,labelToScreenMatrix:Y,scale:R,textPixelRatio:z,holdingForFade:p.holdingForFade(),collisionBoxArray:T,partiallyEvaluatedTextSize:a.ah(_.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(_.sourceID)};if(g)for(const Te of _.sortKeyRanges){const{sortKey:ce,symbolInstanceStart:ve,symbolInstanceEnd:Pe}=Te;i.push({sortKey:ce,symbolInstanceStart:ve,symbolInstanceEnd:Pe,parameters:ye})}else i.push({symbolInstanceStart:0,symbolInstanceEnd:_.symbolInstances.length,parameters:ye})}attemptAnchorPlacement(i,c,p,g,_,C,T,k,R,z,L,G,te,ee,ie,Y){const ye=a.aq[i.textAnchor],Te=[i.textOffset0,i.textOffset1],ce=At(ye,p,g,Te,_),ve=this.collisionIndex.placeCollisionBox(at(c,ce.x,ce.y,C,T,this.transform.angle),L,k,R,z.predicate,Y);if((!ie||this.collisionIndex.placeCollisionBox(at(ie,ce.x,ce.y,C,T,this.transform.angle),L,k,R,z.predicate,Y).box.length!==0)&&ve.box.length>0){let Pe;if(this.prevPlacement&&this.prevPlacement.variableOffsets[G.crossTileID]&&this.prevPlacement.placements[G.crossTileID]&&this.prevPlacement.placements[G.crossTileID].text&&(Pe=this.prevPlacement.variableOffsets[G.crossTileID].anchor),G.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[G.crossTileID]={textOffset:Te,width:p,height:g,anchor:ye,textBoxScale:_,prevAnchor:Pe},this.markUsedJustification(te,ye,G,ee),te.allowVerticalPlacement&&(this.markUsedOrientation(te,ee,G),this.placedOrientations[G.crossTileID]=ee),{shift:ce,placedGlyphBoxes:ve}}}placeLayerBucketPart(i,c,p){const{bucket:g,layout:_,posMatrix:C,textLabelPlaneMatrix:T,labelToScreenMatrix:k,textPixelRatio:R,holdingForFade:z,collisionBoxArray:L,partiallyEvaluatedTextSize:G,collisionGroup:te}=i.parameters,ee=_.get("text-optional"),ie=_.get("icon-optional"),Y=a.ar(_,"text-overlap","text-allow-overlap"),ye=Y==="always",Te=a.ar(_,"icon-overlap","icon-allow-overlap"),ce=Te==="always",ve=_.get("text-rotation-alignment")==="map",Pe=_.get("text-pitch-alignment")==="map",Ae=_.get("icon-text-fit")!=="none",De=_.get("symbol-z-order")==="viewport-y",Ve=ye&&(ce||!g.hasIconData()||ie),Fe=ce&&(ye||!g.hasTextData()||ee);!g.collisionArrays&&L&&g.deserializeCollisionBoxes(L);const Ue=this.retainedQueryData[g.bucketInstanceId].tileID,lt=this.terrain?(Je,Tt)=>this.terrain.getElevation(Ue,Je,Tt):null,$t=(Je,Tt)=>{var ht,on;if(c[Je.crossTileID])return;if(z)return void(this.placements[Je.crossTileID]=new Me(!1,!1,!1));let Bt=!1,Lt=!1,jt=!0,On=null,cn={box:null,offscreen:null},gr={box:null,offscreen:null},Jn=null,jn=null,gi=null,pn=0,hs=0,ds=0;Tt.textFeatureIndex?pn=Tt.textFeatureIndex:Je.useRuntimeCollisionCircles&&(pn=Je.featureIndex),Tt.verticalTextFeatureIndex&&(hs=Tt.verticalTextFeatureIndex);const ho=Tt.textBox;if(ho){const Tr=Fn=>{let er=a.ai.horizontal;if(g.allowVerticalPlacement&&!Fn&&this.prevPlacement){const Xr=this.prevPlacement.placedOrientations[Je.crossTileID];Xr&&(this.placedOrientations[Je.crossTileID]=Xr,er=Xr,this.markUsedOrientation(g,er,Je))}return er},yr=(Fn,er)=>{if(g.allowVerticalPlacement&&Je.numVerticalGlyphVertices>0&&Tt.verticalTextBox){for(const Xr of g.writingModes)if(Xr===a.ai.vertical?(cn=er(),gr=cn):cn=Fn(),cn&&cn.box&&cn.box.length)break}else cn=Fn()},zr=Je.textAnchorOffsetStartIndex,No=Je.textAnchorOffsetEndIndex;if(No===zr){const Fn=(er,Xr)=>{const Nn=this.collisionIndex.placeCollisionBox(er,Y,R,C,te.predicate,lt);return Nn&&Nn.box&&Nn.box.length&&(this.markUsedOrientation(g,Xr,Je),this.placedOrientations[Je.crossTileID]=Xr),Nn};yr(()=>Fn(ho,a.ai.horizontal),()=>{const er=Tt.verticalTextBox;return g.allowVerticalPlacement&&Je.numVerticalGlyphVertices>0&&er?Fn(er,a.ai.vertical):{box:null,offscreen:null}}),Tr(cn&&cn.box&&cn.box.length)}else{let Fn=a.aq[(on=(ht=this.prevPlacement)===null||ht===void 0?void 0:ht.variableOffsets[Je.crossTileID])===null||on===void 0?void 0:on.anchor];const er=(Nn,Bo,Xu)=>{const Ap=Nn.x2-Nn.x1,kp=Nn.y2-Nn.y1,vv=Je.textBoxScale,Qh=Ae&&Te==="never"?Bo:null;let fs={box:[],offscreen:!1},Vo=Y==="never"?1:2,ps="never";Fn&&Vo++;for(let Fi=0;Fi<Vo;Fi++){for(let ms=zr;ms<No;ms++){const Yh=g.textAnchorOffsets.get(ms);if(Fn&&Yh.textAnchor!==Fn)continue;const Bs=this.attemptAnchorPlacement(Yh,Nn,Ap,kp,vv,ve,Pe,R,C,te,ps,Je,g,Xu,Qh,lt);if(Bs&&(fs=Bs.placedGlyphBoxes,fs&&fs.box&&fs.box.length))return Bt=!0,On=Bs.shift,fs}Fn?Fn=null:ps=Y}return fs};yr(()=>er(ho,Tt.iconBox,a.ai.horizontal),()=>{const Nn=Tt.verticalTextBox;return g.allowVerticalPlacement&&!(cn&&cn.box&&cn.box.length)&&Je.numVerticalGlyphVertices>0&&Nn?er(Nn,Tt.verticalIconBox,a.ai.vertical):{box:null,offscreen:null}}),cn&&(Bt=cn.box,jt=cn.offscreen);const Xr=Tr(cn&&cn.box);if(!Bt&&this.prevPlacement){const Nn=this.prevPlacement.variableOffsets[Je.crossTileID];Nn&&(this.variableOffsets[Je.crossTileID]=Nn,this.markUsedJustification(g,Nn.anchor,Je,Xr))}}}if(Jn=cn,Bt=Jn&&Jn.box&&Jn.box.length>0,jt=Jn&&Jn.offscreen,Je.useRuntimeCollisionCircles){const Tr=g.text.placedSymbolArray.get(Je.centerJustifiedTextSymbolIndex),yr=a.aj(g.textSizeData,G,Tr),zr=_.get("text-padding");jn=this.collisionIndex.placeCollisionCircles(Y,Tr,g.lineVertexArray,g.glyphOffsetArray,yr,C,T,k,p,Pe,te.predicate,Je.collisionCircleDiameter,zr,lt),jn.circles.length&&jn.collisionDetected&&!p&&a.w("Collisions detected, but collision boxes are not shown"),Bt=ye||jn.circles.length>0&&!jn.collisionDetected,jt=jt&&jn.offscreen}if(Tt.iconFeatureIndex&&(ds=Tt.iconFeatureIndex),Tt.iconBox){const Tr=yr=>{const zr=Ae&&On?at(yr,On.x,On.y,ve,Pe,this.transform.angle):yr;return this.collisionIndex.placeCollisionBox(zr,Te,R,C,te.predicate,lt)};gr&&gr.box&&gr.box.length&&Tt.verticalIconBox?(gi=Tr(Tt.verticalIconBox),Lt=gi.box.length>0):(gi=Tr(Tt.iconBox),Lt=gi.box.length>0),jt=jt&&gi.offscreen}const Fo=ee||Je.numHorizontalGlyphVertices===0&&Je.numVerticalGlyphVertices===0,ka=ie||Je.numIconVertices===0;if(Fo||ka?ka?Fo||(Lt=Lt&&Bt):Bt=Lt&&Bt:Lt=Bt=Lt&&Bt,Bt&&Jn&&Jn.box&&this.collisionIndex.insertCollisionBox(Jn.box,Y,_.get("text-ignore-placement"),g.bucketInstanceId,gr&&gr.box&&hs?hs:pn,te.ID),Lt&&gi&&this.collisionIndex.insertCollisionBox(gi.box,Te,_.get("icon-ignore-placement"),g.bucketInstanceId,ds,te.ID),jn&&(Bt&&this.collisionIndex.insertCollisionCircles(jn.circles,Y,_.get("text-ignore-placement"),g.bucketInstanceId,pn,te.ID),p)){const Tr=g.bucketInstanceId;let yr=this.collisionCircleArrays[Tr];yr===void 0&&(yr=this.collisionCircleArrays[Tr]=new Re);for(let zr=0;zr<jn.circles.length;zr+=4)yr.circles.push(jn.circles[zr+0]),yr.circles.push(jn.circles[zr+1]),yr.circles.push(jn.circles[zr+2]),yr.circles.push(jn.collisionDetected?1:0)}if(Je.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(g.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Je.crossTileID]=new Me(Bt||Ve,Lt||Fe,jt||g.justReloaded),c[Je.crossTileID]=!0};if(De){if(i.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const Je=g.getSortedSymbolIndexes(this.transform.angle);for(let Tt=Je.length-1;Tt>=0;--Tt){const ht=Je[Tt];$t(g.symbolInstances.get(ht),g.collisionArrays[ht])}}else for(let Je=i.symbolInstanceStart;Je<i.symbolInstanceEnd;Je++)$t(g.symbolInstances.get(Je),g.collisionArrays[Je]);if(p&&g.bucketInstanceId in this.collisionCircleArrays){const Je=this.collisionCircleArrays[g.bucketInstanceId];a.as(Je.invProjMatrix,C),Je.viewportMatrix=this.collisionIndex.getViewportMatrix()}g.justReloaded=!1}markUsedJustification(i,c,p,g){let _;_=g===a.ai.vertical?p.verticalPlacedTextSymbolIndex:{left:p.leftJustifiedTextSymbolIndex,center:p.centerJustifiedTextSymbolIndex,right:p.rightJustifiedTextSymbolIndex}[a.at(c)];const C=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex,p.verticalPlacedTextSymbolIndex];for(const T of C)T>=0&&(i.text.placedSymbolArray.get(T).crossTileID=_>=0&&T!==_?0:p.crossTileID)}markUsedOrientation(i,c,p){const g=c===a.ai.horizontal||c===a.ai.horizontalOnly?c:0,_=c===a.ai.vertical?c:0,C=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex];for(const T of C)i.text.placedSymbolArray.get(T).placedOrientation=g;p.verticalPlacedTextSymbolIndex&&(i.text.placedSymbolArray.get(p.verticalPlacedTextSymbolIndex).placedOrientation=_)}commit(i){this.commitTime=i,this.zoomAtLastRecencyCheck=this.transform.zoom;const c=this.prevPlacement;let p=!1;this.prevZoomAdjustment=c?c.zoomAdjustment(this.transform.zoom):0;const g=c?c.symbolFadeChange(i):1,_=c?c.opacities:{},C=c?c.variableOffsets:{},T=c?c.placedOrientations:{};for(const k in this.placements){const R=this.placements[k],z=_[k];z?(this.opacities[k]=new _e(z,g,R.text,R.icon),p=p||R.text!==z.text.placed||R.icon!==z.icon.placed):(this.opacities[k]=new _e(null,g,R.text,R.icon,R.skipFade),p=p||R.text||R.icon)}for(const k in _){const R=_[k];if(!this.opacities[k]){const z=new _e(R,g,!1,!1);z.isHidden()||(this.opacities[k]=z,p=p||R.text.placed||R.icon.placed)}}for(const k in C)this.variableOffsets[k]||!this.opacities[k]||this.opacities[k].isHidden()||(this.variableOffsets[k]=C[k]);for(const k in T)this.placedOrientations[k]||!this.opacities[k]||this.opacities[k].isHidden()||(this.placedOrientations[k]=T[k]);if(c&&c.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");p?this.lastPlacementChangeTime=i:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=c?c.lastPlacementChangeTime:i)}updateLayerOpacities(i,c){const p={};for(const g of c){const _=g.getBucket(i);_&&g.latestFeatureIndex&&i.id===_.layerIds[0]&&this.updateBucketOpacities(_,p,g.collisionBoxArray)}}updateBucketOpacities(i,c,p){i.hasTextData()&&(i.text.opacityVertexArray.clear(),i.text.hasVisibleVertices=!1),i.hasIconData()&&(i.icon.opacityVertexArray.clear(),i.icon.hasVisibleVertices=!1),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexArray.clear(),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexArray.clear();const g=i.layers[0],_=g.layout,C=new _e(null,0,!1,!1,!0),T=_.get("text-allow-overlap"),k=_.get("icon-allow-overlap"),R=g._unevaluatedLayout.hasValue("text-variable-anchor")||g._unevaluatedLayout.hasValue("text-variable-anchor-offset"),z=_.get("text-rotation-alignment")==="map",L=_.get("text-pitch-alignment")==="map",G=_.get("icon-text-fit")!=="none",te=new _e(null,0,T&&(k||!i.hasIconData()||_.get("icon-optional")),k&&(T||!i.hasTextData()||_.get("text-optional")),!0);!i.collisionArrays&&p&&(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData())&&i.deserializeCollisionBoxes(p);const ee=(ie,Y,ye)=>{for(let Te=0;Te<Y/4;Te++)ie.opacityVertexArray.emplaceBack(ye);ie.hasVisibleVertices=ie.hasVisibleVertices||ye!==Mi};for(let ie=0;ie<i.symbolInstances.length;ie++){const Y=i.symbolInstances.get(ie),{numHorizontalGlyphVertices:ye,numVerticalGlyphVertices:Te,crossTileID:ce}=Y;let ve=this.opacities[ce];c[ce]?ve=C:ve||(ve=te,this.opacities[ce]=ve),c[ce]=!0;const Pe=Y.numIconVertices>0,Ae=this.placedOrientations[Y.crossTileID],De=Ae===a.ai.vertical,Ve=Ae===a.ai.horizontal||Ae===a.ai.horizontalOnly;if(ye>0||Te>0){const Fe=pr(ve.text);ee(i.text,ye,De?Mi:Fe),ee(i.text,Te,Ve?Mi:Fe);const Ue=ve.text.isHidden();[Y.rightJustifiedTextSymbolIndex,Y.centerJustifiedTextSymbolIndex,Y.leftJustifiedTextSymbolIndex].forEach(Je=>{Je>=0&&(i.text.placedSymbolArray.get(Je).hidden=Ue||De?1:0)}),Y.verticalPlacedTextSymbolIndex>=0&&(i.text.placedSymbolArray.get(Y.verticalPlacedTextSymbolIndex).hidden=Ue||Ve?1:0);const lt=this.variableOffsets[Y.crossTileID];lt&&this.markUsedJustification(i,lt.anchor,Y,Ae);const $t=this.placedOrientations[Y.crossTileID];$t&&(this.markUsedJustification(i,"left",Y,$t),this.markUsedOrientation(i,$t,Y))}if(Pe){const Fe=pr(ve.icon),Ue=!(G&&Y.verticalPlacedIconSymbolIndex&&De);Y.placedIconSymbolIndex>=0&&(ee(i.icon,Y.numIconVertices,Ue?Fe:Mi),i.icon.placedSymbolArray.get(Y.placedIconSymbolIndex).hidden=ve.icon.isHidden()),Y.verticalPlacedIconSymbolIndex>=0&&(ee(i.icon,Y.numVerticalIconVertices,Ue?Mi:Fe),i.icon.placedSymbolArray.get(Y.verticalPlacedIconSymbolIndex).hidden=ve.icon.isHidden())}if(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData()){const Fe=i.collisionArrays[ie];if(Fe){let Ue=new a.P(0,0);if(Fe.textBox||Fe.verticalTextBox){let $t=!0;if(R){const Je=this.variableOffsets[ce];Je?(Ue=At(Je.anchor,Je.width,Je.height,Je.textOffset,Je.textBoxScale),z&&Ue._rotate(L?this.transform.angle:-this.transform.angle)):$t=!1}Fe.textBox&&It(i.textCollisionBox.collisionVertexArray,ve.text.placed,!$t||De,Ue.x,Ue.y),Fe.verticalTextBox&&It(i.textCollisionBox.collisionVertexArray,ve.text.placed,!$t||Ve,Ue.x,Ue.y)}const lt=!!(!Ve&&Fe.verticalIconBox);Fe.iconBox&&It(i.iconCollisionBox.collisionVertexArray,ve.icon.placed,lt,G?Ue.x:0,G?Ue.y:0),Fe.verticalIconBox&&It(i.iconCollisionBox.collisionVertexArray,ve.icon.placed,!lt,G?Ue.x:0,G?Ue.y:0)}}}if(i.sortFeatures(this.transform.angle),this.retainedQueryData[i.bucketInstanceId]&&(this.retainedQueryData[i.bucketInstanceId].featureSortOrder=i.featureSortOrder),i.hasTextData()&&i.text.opacityVertexBuffer&&i.text.opacityVertexBuffer.updateData(i.text.opacityVertexArray),i.hasIconData()&&i.icon.opacityVertexBuffer&&i.icon.opacityVertexBuffer.updateData(i.icon.opacityVertexArray),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexBuffer&&i.iconCollisionBox.collisionVertexBuffer.updateData(i.iconCollisionBox.collisionVertexArray),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexBuffer&&i.textCollisionBox.collisionVertexBuffer.updateData(i.textCollisionBox.collisionVertexArray),i.text.opacityVertexArray.length!==i.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${i.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${i.text.layoutVertexArray.length}) / 4`);if(i.icon.opacityVertexArray.length!==i.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${i.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${i.icon.layoutVertexArray.length}) / 4`);if(i.bucketInstanceId in this.collisionCircleArrays){const ie=this.collisionCircleArrays[i.bucketInstanceId];i.placementInvProjMatrix=ie.invProjMatrix,i.placementViewportMatrix=ie.viewportMatrix,i.collisionCircleArray=ie.circles,delete this.collisionCircleArrays[i.bucketInstanceId]}}symbolFadeChange(i){return this.fadeDuration===0?1:(i-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(i){return Math.max(0,(this.transform.zoom-i)/1.5)}hasTransitions(i){return this.stale||i-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(i,c){const p=this.zoomAtLastRecencyCheck===c?1-this.zoomAdjustment(c):1;return this.zoomAtLastRecencyCheck=c,this.commitTime+this.fadeDuration*p>i}setStale(){this.stale=!0}}function It(y,i,c,p,g){y.emplaceBack(i?1:0,c?1:0,p||0,g||0),y.emplaceBack(i?1:0,c?1:0,p||0,g||0),y.emplaceBack(i?1:0,c?1:0,p||0,g||0),y.emplaceBack(i?1:0,c?1:0,p||0,g||0)}const tn=Math.pow(2,25),an=Math.pow(2,24),Kt=Math.pow(2,17),Wt=Math.pow(2,16),Sr=Math.pow(2,9),un=Math.pow(2,8),Kn=Math.pow(2,1);function pr(y){if(y.opacity===0&&!y.placed)return 0;if(y.opacity===1&&y.placed)return 4294967295;const i=y.placed?1:0,c=Math.floor(127*y.opacity);return c*tn+i*an+c*Kt+i*Wt+c*Sr+i*un+c*Kn+i}const Mi=0;class qf{constructor(i){this._sortAcrossTiles=i.layout.get("symbol-z-order")!=="viewport-y"&&!i.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(i,c,p,g,_){const C=this._bucketParts;for(;this._currentTileIndex<i.length;)if(c.getBucketParts(C,g,i[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,_())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,C.sort((T,k)=>T.sortKey-k.sortKey));this._currentPartIndex<C.length;)if(c.placeLayerBucketPart(C[this._currentPartIndex],this._seenCrossTileIDs,p),this._currentPartIndex++,_())return!0;return!1}}class ga{constructor(i,c,p,g,_,C,T,k){this.placement=new wt(i,c,C,T,k),this._currentPlacementIndex=p.length-1,this._forceFullPlacement=g,this._showCollisionBoxes=_,this._done=!1}isDone(){return this._done}continuePlacement(i,c,p){const g=a.h.now(),_=()=>!this._forceFullPlacement&&a.h.now()-g>2;for(;this._currentPlacementIndex>=0;){const C=c[i[this._currentPlacementIndex]],T=this.placement.collisionIndex.transform.zoom;if(C.type==="symbol"&&(!C.minzoom||C.minzoom<=T)&&(!C.maxzoom||C.maxzoom>T)){if(this._inProgressLayer||(this._inProgressLayer=new qf(C)),this._inProgressLayer.continuePlacement(p[C.source],this.placement,this._showCollisionBoxes,C,_))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(i){return this.placement.commit(i),this.placement}}const ya=512/a.N/2;class tv{constructor(i,c,p){this.tileID=i,this.bucketInstanceId=p,this._symbolsByKey={};const g=new Map;for(let _=0;_<c.length;_++){const C=c.get(_),T=C.key,k=g.get(T);k?k.push(C):g.set(T,[C])}for(const[_,C]of g){const T={positions:C.map(k=>({x:Math.floor(k.anchorX*ya),y:Math.floor(k.anchorY*ya)})),crossTileIDs:C.map(k=>k.crossTileID)};if(T.positions.length>128){const k=new a.av(T.positions.length,16,Uint16Array);for(const{x:R,y:z}of T.positions)k.add(R,z);k.finish(),delete T.positions,T.index=k}this._symbolsByKey[_]=T}}getScaledCoordinates(i,c){const{x:p,y:g,z:_}=this.tileID.canonical,{x:C,y:T,z:k}=c.canonical,R=ya/Math.pow(2,k-_),z=(T*a.N+i.anchorY)*R,L=g*a.N*ya;return{x:Math.floor((C*a.N+i.anchorX)*R-p*a.N*ya),y:Math.floor(z-L)}}findMatches(i,c,p){const g=this.tileID.canonical.z<c.canonical.z?1:Math.pow(2,this.tileID.canonical.z-c.canonical.z);for(let _=0;_<i.length;_++){const C=i.get(_);if(C.crossTileID)continue;const T=this._symbolsByKey[C.key];if(!T)continue;const k=this.getScaledCoordinates(C,c);if(T.index){const R=T.index.range(k.x-g,k.y-g,k.x+g,k.y+g).sort();for(const z of R){const L=T.crossTileIDs[z];if(!p[L]){p[L]=!0,C.crossTileID=L;break}}}else if(T.positions)for(let R=0;R<T.positions.length;R++){const z=T.positions[R],L=T.crossTileIDs[R];if(Math.abs(z.x-k.x)<=g&&Math.abs(z.y-k.y)<=g&&!p[L]){p[L]=!0,C.crossTileID=L;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:i})=>i)}}class sn{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class ch{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(i){const c=Math.round((i-this.lng)/360);if(c!==0)for(const p in this.indexes){const g=this.indexes[p],_={};for(const C in g){const T=g[C];T.tileID=T.tileID.unwrapTo(T.tileID.wrap+c),_[T.tileID.key]=T}this.indexes[p]=_}this.lng=i}addBucket(i,c,p){if(this.indexes[i.overscaledZ]&&this.indexes[i.overscaledZ][i.key]){if(this.indexes[i.overscaledZ][i.key].bucketInstanceId===c.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(i.overscaledZ,this.indexes[i.overscaledZ][i.key])}for(let _=0;_<c.symbolInstances.length;_++)c.symbolInstances.get(_).crossTileID=0;this.usedCrossTileIDs[i.overscaledZ]||(this.usedCrossTileIDs[i.overscaledZ]={});const g=this.usedCrossTileIDs[i.overscaledZ];for(const _ in this.indexes){const C=this.indexes[_];if(Number(_)>i.overscaledZ)for(const T in C){const k=C[T];k.tileID.isChildOf(i)&&k.findMatches(c.symbolInstances,i,g)}else{const T=C[i.scaledTo(Number(_)).key];T&&T.findMatches(c.symbolInstances,i,g)}}for(let _=0;_<c.symbolInstances.length;_++){const C=c.symbolInstances.get(_);C.crossTileID||(C.crossTileID=p.generate(),g[C.crossTileID]=!0)}return this.indexes[i.overscaledZ]===void 0&&(this.indexes[i.overscaledZ]={}),this.indexes[i.overscaledZ][i.key]=new tv(i,c.symbolInstances,c.bucketInstanceId),!0}removeBucketCrossTileIDs(i,c){for(const p of c.getCrossTileIDsLists())for(const g of p)delete this.usedCrossTileIDs[i][g]}removeStaleBuckets(i){let c=!1;for(const p in this.indexes){const g=this.indexes[p];for(const _ in g)i[g[_].bucketInstanceId]||(this.removeBucketCrossTileIDs(p,g[_]),delete g[_],c=!0)}return c}}class bu{constructor(){this.layerIndexes={},this.crossTileIDs=new sn,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(i,c,p){let g=this.layerIndexes[i.id];g===void 0&&(g=this.layerIndexes[i.id]=new ch);let _=!1;const C={};g.handleWrapJump(p);for(const T of c){const k=T.getBucket(i);k&&i.id===k.layerIds[0]&&(k.bucketInstanceId||(k.bucketInstanceId=++this.maxBucketInstanceId),g.addBucket(T.tileID,k,this.crossTileIDs)&&(_=!0),C[k.bucketInstanceId]=!0)}return g.removeStaleBuckets(C)&&(_=!0),_}pruneUnusedLayers(i){const c={};i.forEach(p=>{c[p]=!0});for(const p in this.layerIndexes)c[p]||delete this.layerIndexes[p]}}const Cr=(y,i)=>a.x(y,i&&i.filter(c=>c.identifier!=="source.canvas")),hi=a.F(a.ax,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setGlyphs","setSprite"]),nv=a.F(a.ax,["setCenter","setZoom","setBearing","setPitch"]),Ri=a.aw();class mr extends a.E{constructor(i,c={}){super(),this.map=i,this.dispatcher=new Ht(qi(),this,i._getMapId()),this.imageManager=new Ge,this.imageManager.setEventedParent(this),this.glyphManager=new zt(i._requestManager,c.localIdeographFontFamily),this.lineAtlas=new Pt(256,512),this.crossTileSymbolIndex=new bu,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new a.ay,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",a.az());const p=this;this._rtlTextPluginCallback=mr.registerForPluginStateChange(g=>{p.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:g.pluginStatus,pluginURL:g.pluginURL},(_,C)=>{if(a.aA(_),C&&C.every(T=>T))for(const T in p.sourceCaches){const k=p.sourceCaches[T].getSource().type;k!=="vector"&&k!=="geojson"||p.sourceCaches[T].reload()}})}),this.on("data",g=>{if(g.dataType!=="source"||g.sourceDataType!=="metadata")return;const _=this.sourceCaches[g.sourceId];if(!_)return;const C=_.getSource();if(C&&C.vectorLayerIds)for(const T in this._layers){const k=this._layers[T];k.source===C.id&&this._validateLayer(k)}})}loadURL(i,c={},p){this.fire(new a.k("dataloading",{dataType:"style"})),c.validate=typeof c.validate!="boolean"||c.validate;const g=this.map._requestManager.transformRequest(i,F.Style);this._request=a.f(g,(_,C)=>{this._request=null,_?this.fire(new a.j(_)):C&&this._load(C,c,p)})}loadJSON(i,c={},p){this.fire(new a.k("dataloading",{dataType:"style"})),this._request=a.h.frame(()=>{this._request=null,c.validate=c.validate!==!1,this._load(i,c,p)})}loadEmpty(){this.fire(new a.k("dataloading",{dataType:"style"})),this._load(Ri,{validate:!1})}_load(i,c,p){var g;const _=c.transformStyle?c.transformStyle(p,i):i;if(!c.validate||!Cr(this,a.y(_))){this._loaded=!0,this.stylesheet=_;for(const C in _.sources)this.addSource(C,_.sources[C],{validate:!1});_.sprite?this._loadSprite(_.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(_.glyphs),this._createLayers(),this.light=new ct(this.stylesheet.light),this.map.setTerrain((g=this.stylesheet.terrain)!==null&&g!==void 0?g:null),this.fire(new a.k("data",{dataType:"style"})),this.fire(new a.k("style.load"))}}_createLayers(){const i=a.aB(this.stylesheet.layers);this.dispatcher.broadcast("setLayers",i),this._order=i.map(c=>c.id),this._layers={},this._serializedLayers=null;for(const c of i){const p=a.aC(c);p.setEventedParent(this,{layer:{id:c.id}}),this._layers[c.id]=p}}_loadSprite(i,c=!1,p=void 0){this.imageManager.setLoaded(!1),this._spriteRequest=function(g,_,C,T){const k=Se(g),R=k.length,z=C>1?"@2x":"",L={},G={},te={};for(const{id:ee,url:ie}of k){const Y=_.transformRequest(_.normalizeSpriteURL(ie,z,".json"),F.SpriteJSON),ye=`${ee}_${Y.url}`;L[ye]=a.f(Y,(ve,Pe)=>{delete L[ye],G[ee]=Pe,qe(T,G,te,ve,R)});const Te=_.transformRequest(_.normalizeSpriteURL(ie,z,".png"),F.SpriteImage),ce=`${ee}_${Te.url}`;L[ce]=K.getImage(Te,(ve,Pe)=>{delete L[ce],te[ee]=Pe,qe(T,G,te,ve,R)})}return{cancel(){for(const ee of Object.values(L))ee.cancel()}}}(i,this.map._requestManager,this.map.getPixelRatio(),(g,_)=>{if(this._spriteRequest=null,g)this.fire(new a.j(g));else if(_)for(const C in _){this._spritesImagesIds[C]=[];const T=this._spritesImagesIds[C]?this._spritesImagesIds[C].filter(k=>!(k in _)):[];for(const k of T)this.imageManager.removeImage(k),this._changedImages[k]=!0;for(const k in _[C]){const R=C==="default"?k:`${C}:${k}`;this._spritesImagesIds[C].push(R),R in this.imageManager.images?this.imageManager.updateImage(R,_[C][k],!1):this.imageManager.addImage(R,_[C][k]),c&&(this._changedImages[R]=!0)}}this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),c&&(this._changed=!0),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new a.k("data",{dataType:"style"})),p&&p(g)})}_unloadSprite(){for(const i of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(i),this._changedImages[i]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new a.k("data",{dataType:"style"}))}_validateLayer(i){const c=this.sourceCaches[i.source];if(!c)return;const p=i.sourceLayer;if(!p)return;const g=c.getSource();(g.type==="geojson"||g.vectorLayerIds&&g.vectorLayerIds.indexOf(p)===-1)&&this.fire(new a.j(new Error(`Source layer "${p}" does not exist on source "${g.id}" as specified by style layer "${i.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const i in this.sourceCaches)if(!this.sourceCaches[i].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(i){const c=this._serializedAllLayers();if(!i||i.length===0)return Object.values(c);const p=[];for(const g of i)c[g]&&p.push(c[g]);return p}_serializedAllLayers(){let i=this._serializedLayers;if(i)return i;i=this._serializedLayers={};const c=Object.keys(this._layers);for(const p of c){const g=this._layers[p];g.type!=="custom"&&(i[p]=g.serialize())}return i}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const i in this.sourceCaches)if(this.sourceCaches[i].hasTransition())return!0;for(const i in this._layers)if(this._layers[i].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(i){if(!this._loaded)return;const c=this._changed;if(this._changed){const g=Object.keys(this._updatedLayers),_=Object.keys(this._removedLayers);(g.length||_.length)&&this._updateWorkerLayers(g,_);for(const C in this._updatedSources){const T=this._updatedSources[C];if(T==="reload")this._reloadSource(C);else{if(T!=="clear")throw new Error(`Invalid action ${T}`);this._clearSource(C)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const C in this._updatedPaintProps)this._layers[C].updateTransitions(i);this.light.updateTransitions(i),this._resetUpdates()}const p={};for(const g in this.sourceCaches){const _=this.sourceCaches[g];p[g]=_.used,_.used=!1}for(const g of this._order){const _=this._layers[g];_.recalculate(i,this._availableImages),!_.isHidden(i.zoom)&&_.source&&(this.sourceCaches[_.source].used=!0)}for(const g in p){const _=this.sourceCaches[g];p[g]!==_.used&&_.fire(new a.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:g}))}this.light.recalculate(i),this.z=i.zoom,c&&this.fire(new a.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const i=Object.keys(this._changedImages);if(i.length){for(const c in this.sourceCaches)this.sourceCaches[c].reloadTilesForDependencies(["icons","patterns"],i);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const i in this.sourceCaches)this.sourceCaches[i].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(i,c){this.dispatcher.broadcast("updateLayers",{layers:this._serializeByIds(i),removedIds:c})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(i,c={}){this._checkLoaded();const p=this.serialize();if(i=c.transformStyle?c.transformStyle(p,i):i,Cr(this,a.y(i)))return!1;(i=a.aD(i)).layers=a.aB(i.layers);const g=a.aE(p,i).filter(C=>!(C.command in nv));if(g.length===0)return!1;const _=g.filter(C=>!(C.command in hi));if(_.length>0)throw new Error(`Unimplemented: ${_.map(C=>C.command).join(", ")}.`);for(const C of g)C.command!=="setTransition"&&this[C.command].apply(this,C.args);return this.stylesheet=i,this._serializedLayers=null,!0}addImage(i,c){if(this.getImage(i))return this.fire(new a.j(new Error(`An image named "${i}" already exists.`)));this.imageManager.addImage(i,c),this._afterImageUpdated(i)}updateImage(i,c){this.imageManager.updateImage(i,c)}getImage(i){return this.imageManager.getImage(i)}removeImage(i){if(!this.getImage(i))return this.fire(new a.j(new Error(`An image named "${i}" does not exist.`)));this.imageManager.removeImage(i),this._afterImageUpdated(i)}_afterImageUpdated(i){this._availableImages=this.imageManager.listImages(),this._changedImages[i]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new a.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(i,c,p={}){if(this._checkLoaded(),this.sourceCaches[i]!==void 0)throw new Error(`Source "${i}" already exists.`);if(!c.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(c).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(c.type)>=0&&this._validate(a.y.source,`sources.${i}`,c,null,p))return;this.map&&this.map._collectResourceTiming&&(c.collectResourceTiming=!0);const g=this.sourceCaches[i]=new tt(i,c,this.dispatcher);g.style=this,g.setEventedParent(this,()=>({isSourceLoaded:g.loaded(),source:g.serialize(),sourceId:i})),g.onAdd(this.map),this._changed=!0}removeSource(i){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error("There is no source with this ID");for(const p in this._layers)if(this._layers[p].source===i)return this.fire(new a.j(new Error(`Source "${i}" cannot be removed while layer "${p}" is using it.`)));const c=this.sourceCaches[i];delete this.sourceCaches[i],delete this._updatedSources[i],c.fire(new a.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:i})),c.setEventedParent(null),c.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(i,c){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error(`There is no source with this ID=${i}`);const p=this.sourceCaches[i].getSource();if(p.type!=="geojson")throw new Error(`geojsonSource.type is ${p.type}, which is !== 'geojson`);p.setData(c),this._changed=!0}getSource(i){return this.sourceCaches[i]&&this.sourceCaches[i].getSource()}addLayer(i,c,p={}){this._checkLoaded();const g=i.id;if(this.getLayer(g))return void this.fire(new a.j(new Error(`Layer "${g}" already exists on this map.`)));let _;if(i.type==="custom"){if(Cr(this,a.aF(i)))return;_=a.aC(i)}else{if("source"in i&&typeof i.source=="object"&&(this.addSource(g,i.source),i=a.aD(i),i=a.e(i,{source:g})),this._validate(a.y.layer,`layers.${g}`,i,{arrayIndex:-1},p))return;_=a.aC(i),this._validateLayer(_),_.setEventedParent(this,{layer:{id:g}})}const C=c?this._order.indexOf(c):this._order.length;if(c&&C===-1)this.fire(new a.j(new Error(`Cannot add layer "${g}" before non-existing layer "${c}".`)));else{if(this._order.splice(C,0,g),this._layerOrderChanged=!0,this._layers[g]=_,this._removedLayers[g]&&_.source&&_.type!=="custom"){const T=this._removedLayers[g];delete this._removedLayers[g],T.type!==_.type?this._updatedSources[_.source]="clear":(this._updatedSources[_.source]="reload",this.sourceCaches[_.source].pause())}this._updateLayer(_),_.onAdd&&_.onAdd(this.map)}}moveLayer(i,c){if(this._checkLoaded(),this._changed=!0,!this._layers[i])return void this.fire(new a.j(new Error(`The layer '${i}' does not exist in the map's style and cannot be moved.`)));if(i===c)return;const p=this._order.indexOf(i);this._order.splice(p,1);const g=c?this._order.indexOf(c):this._order.length;c&&g===-1?this.fire(new a.j(new Error(`Cannot move layer "${i}" before non-existing layer "${c}".`))):(this._order.splice(g,0,i),this._layerOrderChanged=!0)}removeLayer(i){this._checkLoaded();const c=this._layers[i];if(!c)return void this.fire(new a.j(new Error(`Cannot remove non-existing layer "${i}".`)));c.setEventedParent(null);const p=this._order.indexOf(i);this._order.splice(p,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[i]=c,delete this._layers[i],this._serializedLayers&&delete this._serializedLayers[i],delete this._updatedLayers[i],delete this._updatedPaintProps[i],c.onRemove&&c.onRemove(this.map)}getLayer(i){return this._layers[i]}getLayersOrder(){return[...this._order]}hasLayer(i){return i in this._layers}setLayerZoomRange(i,c,p){this._checkLoaded();const g=this.getLayer(i);g?g.minzoom===c&&g.maxzoom===p||(c!=null&&(g.minzoom=c),p!=null&&(g.maxzoom=p),this._updateLayer(g)):this.fire(new a.j(new Error(`Cannot set the zoom range of non-existing layer "${i}".`)))}setFilter(i,c,p={}){this._checkLoaded();const g=this.getLayer(i);if(g){if(!a.aG(g.filter,c))return c==null?(g.filter=void 0,void this._updateLayer(g)):void(this._validate(a.y.filter,`layers.${g.id}.filter`,c,null,p)||(g.filter=a.aD(c),this._updateLayer(g)))}else this.fire(new a.j(new Error(`Cannot filter non-existing layer "${i}".`)))}getFilter(i){return a.aD(this.getLayer(i).filter)}setLayoutProperty(i,c,p,g={}){this._checkLoaded();const _=this.getLayer(i);_?a.aG(_.getLayoutProperty(c),p)||(_.setLayoutProperty(c,p,g),this._updateLayer(_)):this.fire(new a.j(new Error(`Cannot style non-existing layer "${i}".`)))}getLayoutProperty(i,c){const p=this.getLayer(i);if(p)return p.getLayoutProperty(c);this.fire(new a.j(new Error(`Cannot get style of non-existing layer "${i}".`)))}setPaintProperty(i,c,p,g={}){this._checkLoaded();const _=this.getLayer(i);_?a.aG(_.getPaintProperty(c),p)||(_.setPaintProperty(c,p,g)&&this._updateLayer(_),this._changed=!0,this._updatedPaintProps[i]=!0):this.fire(new a.j(new Error(`Cannot style non-existing layer "${i}".`)))}getPaintProperty(i,c){return this.getLayer(i).getPaintProperty(c)}setFeatureState(i,c){this._checkLoaded();const p=i.source,g=i.sourceLayer,_=this.sourceCaches[p];if(_===void 0)return void this.fire(new a.j(new Error(`The source '${p}' does not exist in the map's style.`)));const C=_.getSource().type;C==="geojson"&&g?this.fire(new a.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):C!=="vector"||g?(i.id===void 0&&this.fire(new a.j(new Error("The feature id parameter must be provided."))),_.setFeatureState(g,i.id,c)):this.fire(new a.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(i,c){this._checkLoaded();const p=i.source,g=this.sourceCaches[p];if(g===void 0)return void this.fire(new a.j(new Error(`The source '${p}' does not exist in the map's style.`)));const _=g.getSource().type,C=_==="vector"?i.sourceLayer:void 0;_!=="vector"||C?c&&typeof i.id!="string"&&typeof i.id!="number"?this.fire(new a.j(new Error("A feature id is required to remove its specific state property."))):g.removeFeatureState(C,i.id,c):this.fire(new a.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(i){this._checkLoaded();const c=i.source,p=i.sourceLayer,g=this.sourceCaches[c];if(g!==void 0)return g.getSource().type!=="vector"||p?(i.id===void 0&&this.fire(new a.j(new Error("The feature id parameter must be provided."))),g.getFeatureState(p,i.id)):void this.fire(new a.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new a.j(new Error(`The source '${c}' does not exist in the map's style.`)))}getTransition(){return a.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const i=a.aH(this.sourceCaches,_=>_.serialize()),c=this._serializeByIds(this._order),p=this.map.getTerrain()||void 0,g=this.stylesheet;return a.aI({version:g.version,name:g.name,metadata:g.metadata,light:g.light,center:g.center,zoom:g.zoom,bearing:g.bearing,pitch:g.pitch,sprite:g.sprite,glyphs:g.glyphs,transition:g.transition,sources:i,layers:c,terrain:p},_=>_!==void 0)}_updateLayer(i){this._updatedLayers[i.id]=!0,i.source&&!this._updatedSources[i.source]&&this.sourceCaches[i.source].getSource().type!=="raster"&&(this._updatedSources[i.source]="reload",this.sourceCaches[i.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(i){const c=C=>this._layers[C].type==="fill-extrusion",p={},g=[];for(let C=this._order.length-1;C>=0;C--){const T=this._order[C];if(c(T)){p[T]=C;for(const k of i){const R=k[T];if(R)for(const z of R)g.push(z)}}}g.sort((C,T)=>T.intersectionZ-C.intersectionZ);const _=[];for(let C=this._order.length-1;C>=0;C--){const T=this._order[C];if(c(T))for(let k=g.length-1;k>=0;k--){const R=g[k].feature;if(p[R.layer.id]<C)break;_.push(R),g.pop()}else for(const k of i){const R=k[T];if(R)for(const z of R)_.push(z.feature)}}return _}queryRenderedFeatures(i,c,p){c&&c.filter&&this._validate(a.y.filter,"queryRenderedFeatures.filter",c.filter,null,c);const g={};if(c&&c.layers){if(!Array.isArray(c.layers))return this.fire(new a.j(new Error("parameters.layers must be an Array."))),[];for(const T of c.layers){const k=this._layers[T];if(!k)return this.fire(new a.j(new Error(`The layer '${T}' does not exist in the map's style and cannot be queried for features.`))),[];g[k.source]=!0}}const _=[];c.availableImages=this._availableImages;const C=this._serializedAllLayers();for(const T in this.sourceCaches)c.layers&&!g[T]||_.push(ro(this.sourceCaches[T],this._layers,C,i,c,p));return this.placement&&_.push(function(T,k,R,z,L,G,te){const ee={},ie=G.queryRenderedSymbols(z),Y=[];for(const ye of Object.keys(ie).map(Number))Y.push(te[ye]);Y.sort(Ms);for(const ye of Y){const Te=ye.featureIndex.lookupSymbolFeatures(ie[ye.bucketInstanceId],k,ye.bucketIndex,ye.sourceLayerIndex,L.filter,L.layers,L.availableImages,T);for(const ce in Te){const ve=ee[ce]=ee[ce]||[],Pe=Te[ce];Pe.sort((Ae,De)=>{const Ve=ye.featureSortOrder;if(Ve){const Fe=Ve.indexOf(Ae.featureIndex);return Ve.indexOf(De.featureIndex)-Fe}return De.featureIndex-Ae.featureIndex});for(const Ae of Pe)ve.push(Ae)}}for(const ye in ee)ee[ye].forEach(Te=>{const ce=Te.feature,ve=R[T[ye].source].getFeatureState(ce.layer["source-layer"],ce.id);ce.source=ce.layer.source,ce.layer["source-layer"]&&(ce.sourceLayer=ce.layer["source-layer"]),ce.state=ve});return ee}(this._layers,C,this.sourceCaches,i,c,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(_)}querySourceFeatures(i,c){c&&c.filter&&this._validate(a.y.filter,"querySourceFeatures.filter",c.filter,null,c);const p=this.sourceCaches[i];return p?function(g,_){const C=g.getRenderableIds().map(R=>g.getTileByID(R)),T=[],k={};for(let R=0;R<C.length;R++){const z=C[R],L=z.tileID.canonical.key;k[L]||(k[L]=!0,z.querySourceFeatures(T,_))}return T}(p,c):[]}addSourceType(i,c,p){return ki(i)?p(new Error(`A source type called "${i}" already exists.`)):(((g,_)=>{no[g]=_})(i,c),c.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:i,url:c.workerSourceURL},p):p(null,null))}getLight(){return this.light.getLight()}setLight(i,c={}){this._checkLoaded();const p=this.light.getLight();let g=!1;for(const C in i)if(!a.aG(i[C],p[C])){g=!0;break}if(!g)return;const _={now:a.h.now(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(i,c),this.light.updateTransitions(_)}_validate(i,c,p,g,_={}){return(!_||_.validate!==!1)&&Cr(this,i.call(a.y,a.e({key:c,style:this.serialize(),value:p,styleSpec:a.v},g)))}_remove(i=!0){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),a.aJ.off("pluginStateChange",this._rtlTextPluginCallback);for(const c in this._layers)this._layers[c].setEventedParent(null);for(const c in this.sourceCaches){const p=this.sourceCaches[c];p.setEventedParent(null),p.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove(i)}_clearSource(i){this.sourceCaches[i].clearTiles()}_reloadSource(i){this.sourceCaches[i].resume(),this.sourceCaches[i].reload()}_updateSources(i){for(const c in this.sourceCaches)this.sourceCaches[c].update(i,this.map.terrain)}_generateCollisionBoxes(){for(const i in this.sourceCaches)this._reloadSource(i)}_updatePlacement(i,c,p,g,_=!1){let C=!1,T=!1;const k={};for(const R of this._order){const z=this._layers[R];if(z.type!=="symbol")continue;if(!k[z.source]){const G=this.sourceCaches[z.source];k[z.source]=G.getRenderableIds(!0).map(te=>G.getTileByID(te)).sort((te,ee)=>ee.tileID.overscaledZ-te.tileID.overscaledZ||(te.tileID.isLessThan(ee.tileID)?-1:1))}const L=this.crossTileSymbolIndex.addLayer(z,k[z.source],i.center.lng);C=C||L}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((_=_||this._layerOrderChanged||p===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(a.h.now(),i.zoom))&&(this.pauseablePlacement=new ga(i,this.map.terrain,this._order,_,c,p,g,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,k),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(a.h.now()),T=!0),C&&this.pauseablePlacement.placement.setStale()),T||C)for(const R of this._order){const z=this._layers[R];z.type==="symbol"&&this.placement.updateLayerOpacities(z,k[z.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(a.h.now())}_releaseSymbolFadeTiles(){for(const i in this.sourceCaches)this.sourceCaches[i].releaseSymbolFadeTiles()}getImages(i,c,p){this.imageManager.getImages(c.icons,p),this._updateTilesForChangedImages();const g=this.sourceCaches[c.source];g&&g.setDependencies(c.tileID.key,c.type,c.icons)}getGlyphs(i,c,p){this.glyphManager.getGlyphs(c.stacks,p);const g=this.sourceCaches[c.source];g&&g.setDependencies(c.tileID.key,c.type,[""])}getResource(i,c,p){return a.m(c,p)}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(i,c={}){this._checkLoaded(),i&&this._validate(a.y.glyphs,"glyphs",i,null,c)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=i,this.glyphManager.entries={},this.glyphManager.setURL(i))}addSprite(i,c,p={},g){this._checkLoaded();const _=[{id:i,url:c}],C=[...Se(this.stylesheet.sprite),..._];this._validate(a.y.sprite,"sprite",C,null,p)||(this.stylesheet.sprite=C,this._loadSprite(_,!0,g))}removeSprite(i){this._checkLoaded();const c=Se(this.stylesheet.sprite);if(c.find(p=>p.id===i)){if(this._spritesImagesIds[i])for(const p of this._spritesImagesIds[i])this.imageManager.removeImage(p),this._changedImages[p]=!0;c.splice(c.findIndex(p=>p.id===i),1),this.stylesheet.sprite=c.length>0?c:void 0,delete this._spritesImagesIds[i],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new a.k("data",{dataType:"style"}))}else this.fire(new a.j(new Error(`Sprite "${i}" doesn't exists on this map.`)))}getSprite(){return Se(this.stylesheet.sprite)}setSprite(i,c={},p){this._checkLoaded(),i&&this._validate(a.y.sprite,"sprite",i,null,c)||(this.stylesheet.sprite=i,i?this._loadSprite(i,!0,p):(this._unloadSprite(),p&&p(null)))}}mr.registerForPluginStateChange=a.aK;var Su=a.Q([{name:"a_pos",type:"Int16",components:2}]),va="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const Sn={prelude:Yt(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:Yt(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Yt(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Yt(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Yt("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Yt(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:Yt(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Yt("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Yt("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Yt("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:Yt(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:Yt(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:Yt(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:Yt(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Yt(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Yt(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Yt(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Yt(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Yt(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Yt(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Yt(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Yt(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Yt(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Yt(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Yt(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Yt(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Yt("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",va),terrainDepth:Yt("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",va),terrainCoords:Yt("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",va)};function Yt(y,i){const c=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,p=i.match(/attribute ([\w]+) ([\w]+)/g),g=y.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),_=i.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),C=_?_.concat(g):g,T={};return{fragmentSource:y=y.replace(c,(k,R,z,L,G)=>(T[G]=!0,R==="define"?`
#ifndef HAS_UNIFORM_u_${G}
varying ${z} ${L} ${G};
#else
uniform ${z} ${L} u_${G};
#endif
`:`
#ifdef HAS_UNIFORM_u_${G}
    ${z} ${L} ${G} = u_${G};
#endif
`)),vertexSource:i=i.replace(c,(k,R,z,L,G)=>{const te=L==="float"?"vec2":"vec4",ee=G.match(/color/)?"color":te;return T[G]?R==="define"?`
#ifndef HAS_UNIFORM_u_${G}
uniform lowp float u_${G}_t;
attribute ${z} ${te} a_${G};
varying ${z} ${L} ${G};
#else
uniform ${z} ${L} u_${G};
#endif
`:ee==="vec4"?`
#ifndef HAS_UNIFORM_u_${G}
    ${G} = a_${G};
#else
    ${z} ${L} ${G} = u_${G};
#endif
`:`
#ifndef HAS_UNIFORM_u_${G}
    ${G} = unpack_mix_${ee}(a_${G}, u_${G}_t);
#else
    ${z} ${L} ${G} = u_${G};
#endif
`:R==="define"?`
#ifndef HAS_UNIFORM_u_${G}
uniform lowp float u_${G}_t;
attribute ${z} ${te} a_${G};
#else
uniform ${z} ${L} u_${G};
#endif
`:ee==="vec4"?`
#ifndef HAS_UNIFORM_u_${G}
    ${z} ${L} ${G} = a_${G};
#else
    ${z} ${L} ${G} = u_${G};
#endif
`:`
#ifndef HAS_UNIFORM_u_${G}
    ${z} ${L} ${G} = unpack_mix_${ee}(a_${G}, u_${G}_t);
#else
    ${z} ${L} ${G} = u_${G};
#endif
`}),staticAttributes:p,staticUniforms:C}}class ko{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(i,c,p,g,_,C,T,k,R){this.context=i;let z=this.boundPaintVertexBuffers.length!==g.length;for(let L=0;!z&&L<g.length;L++)this.boundPaintVertexBuffers[L]!==g[L]&&(z=!0);!this.vao||this.boundProgram!==c||this.boundLayoutVertexBuffer!==p||z||this.boundIndexBuffer!==_||this.boundVertexOffset!==C||this.boundDynamicVertexBuffer!==T||this.boundDynamicVertexBuffer2!==k||this.boundDynamicVertexBuffer3!==R?this.freshBind(c,p,g,_,C,T,k,R):(i.bindVertexArray.set(this.vao),T&&T.bind(),_&&_.dynamicDraw&&_.bind(),k&&k.bind(),R&&R.bind())}freshBind(i,c,p,g,_,C,T,k){const R=i.numAttributes,z=this.context,L=z.gl;this.vao&&this.destroy(),this.vao=z.createVertexArray(),z.bindVertexArray.set(this.vao),this.boundProgram=i,this.boundLayoutVertexBuffer=c,this.boundPaintVertexBuffers=p,this.boundIndexBuffer=g,this.boundVertexOffset=_,this.boundDynamicVertexBuffer=C,this.boundDynamicVertexBuffer2=T,this.boundDynamicVertexBuffer3=k,c.enableAttributes(L,i);for(const G of p)G.enableAttributes(L,i);C&&C.enableAttributes(L,i),T&&T.enableAttributes(L,i),k&&k.enableAttributes(L,i),c.bind(),c.setVertexAttribPointers(L,i,_);for(const G of p)G.bind(),G.setVertexAttribPointers(L,i,_);C&&(C.bind(),C.setVertexAttribPointers(L,i,_)),g&&g.bind(),T&&(T.bind(),T.setVertexAttribPointers(L,i,_)),k&&(k.bind(),k.setVertexAttribPointers(L,i,_)),z.currentNumAttributes=R}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function kn(y){const i=[];for(let c=0;c<y.length;c++){if(y[c]===null)continue;const p=y[c].split(" ");i.push(p.pop())}return i}class Cu{constructor(i,c,p,g,_,C){const T=i.gl;this.program=T.createProgram();const k=kn(c.staticAttributes),R=p?p.getBinderAttributes():[],z=k.concat(R),L=Sn.prelude.staticUniforms?kn(Sn.prelude.staticUniforms):[],G=c.staticUniforms?kn(c.staticUniforms):[],te=p?p.getBinderUniforms():[],ee=L.concat(G).concat(te),ie=[];for(const Ae of ee)ie.indexOf(Ae)<0&&ie.push(Ae);const Y=p?p.defines():[];_&&Y.push("#define OVERDRAW_INSPECTOR;"),C&&Y.push("#define TERRAIN3D;");const ye=Y.concat(Sn.prelude.fragmentSource,c.fragmentSource).join(`
`),Te=Y.concat(Sn.prelude.vertexSource,c.vertexSource).join(`
`),ce=T.createShader(T.FRAGMENT_SHADER);if(T.isContextLost())return void(this.failedToCreate=!0);if(T.shaderSource(ce,ye),T.compileShader(ce),!T.getShaderParameter(ce,T.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${T.getShaderInfoLog(ce)}`);T.attachShader(this.program,ce);const ve=T.createShader(T.VERTEX_SHADER);if(T.isContextLost())return void(this.failedToCreate=!0);if(T.shaderSource(ve,Te),T.compileShader(ve),!T.getShaderParameter(ve,T.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${T.getShaderInfoLog(ve)}`);T.attachShader(this.program,ve),this.attributes={};const Pe={};this.numAttributes=z.length;for(let Ae=0;Ae<this.numAttributes;Ae++)z[Ae]&&(T.bindAttribLocation(this.program,Ae,z[Ae]),this.attributes[z[Ae]]=Ae);if(T.linkProgram(this.program),!T.getProgramParameter(this.program,T.LINK_STATUS))throw new Error(`Program failed to link: ${T.getProgramInfoLog(this.program)}`);T.deleteShader(ve),T.deleteShader(ce);for(let Ae=0;Ae<ie.length;Ae++){const De=ie[Ae];if(De&&!Pe[De]){const Ve=T.getUniformLocation(this.program,De);Ve&&(Pe[De]=Ve)}}this.fixedUniforms=g(i,Pe),this.terrainUniforms=((Ae,De)=>({u_depth:new a.aL(Ae,De.u_depth),u_terrain:new a.aL(Ae,De.u_terrain),u_terrain_dim:new a.aM(Ae,De.u_terrain_dim),u_terrain_matrix:new a.aN(Ae,De.u_terrain_matrix),u_terrain_unpack:new a.aO(Ae,De.u_terrain_unpack),u_terrain_exaggeration:new a.aM(Ae,De.u_terrain_exaggeration)}))(i,Pe),this.binderUniforms=p?p.getUniforms(i,Pe):[]}draw(i,c,p,g,_,C,T,k,R,z,L,G,te,ee,ie,Y,ye,Te){const ce=i.gl;if(this.failedToCreate)return;if(i.program.set(this.program),i.setDepthMode(p),i.setStencilMode(g),i.setColorMode(_),i.setCullFace(C),k){i.activeTexture.set(ce.TEXTURE2),ce.bindTexture(ce.TEXTURE_2D,k.depthTexture),i.activeTexture.set(ce.TEXTURE3),ce.bindTexture(ce.TEXTURE_2D,k.texture);for(const Pe in this.terrainUniforms)this.terrainUniforms[Pe].set(k[Pe])}for(const Pe in this.fixedUniforms)this.fixedUniforms[Pe].set(T[Pe]);ie&&ie.setUniforms(i,this.binderUniforms,te,{zoom:ee});let ve=0;switch(c){case ce.LINES:ve=2;break;case ce.TRIANGLES:ve=3;break;case ce.LINE_STRIP:ve=1}for(const Pe of G.get()){const Ae=Pe.vaos||(Pe.vaos={});(Ae[R]||(Ae[R]=new ko)).bind(i,this,z,ie?ie.getPaintVertexBuffers():[],L,Pe.vertexOffset,Y,ye,Te),ce.drawElements(c,Pe.primitiveLength*ve,ce.UNSIGNED_SHORT,Pe.primitiveOffset*ve*2)}}}function Di(y,i,c){const p=1/me(c,1,i.transform.tileZoom),g=Math.pow(2,c.tileID.overscaledZ),_=c.tileSize*Math.pow(2,i.transform.tileZoom)/g,C=_*(c.tileID.canonical.x+c.tileID.wrap*g),T=_*c.tileID.canonical.y;return{u_image:0,u_texsize:c.imageAtlasTexture.size,u_scale:[p,y.fromScale,y.toScale],u_fade:y.t,u_pixel_coord_upper:[C>>16,T>>16],u_pixel_coord_lower:[65535&C,65535&T]}}const hh=(y,i,c,p)=>{const g=i.style.light,_=g.properties.get("position"),C=[_.x,_.y,_.z],T=function(){var R=new a.A(9);return a.A!=Float32Array&&(R[1]=0,R[2]=0,R[3]=0,R[5]=0,R[6]=0,R[7]=0),R[0]=1,R[4]=1,R[8]=1,R}();g.properties.get("anchor")==="viewport"&&function(R,z){var L=Math.sin(z),G=Math.cos(z);R[0]=G,R[1]=L,R[2]=0,R[3]=-L,R[4]=G,R[5]=0,R[6]=0,R[7]=0,R[8]=1}(T,-i.transform.angle),function(R,z,L){var G=z[0],te=z[1],ee=z[2];R[0]=G*L[0]+te*L[3]+ee*L[6],R[1]=G*L[1]+te*L[4]+ee*L[7],R[2]=G*L[2]+te*L[5]+ee*L[8]}(C,C,T);const k=g.properties.get("color");return{u_matrix:y,u_lightpos:C,u_lightintensity:g.properties.get("intensity"),u_lightcolor:[k.r,k.g,k.b],u_vertical_gradient:+c,u_opacity:p}},so=(y,i,c,p,g,_,C)=>a.e(hh(y,i,c,p),Di(_,i,C),{u_height_factor:-Math.pow(2,g.overscaledZ)/C.tileSize/8}),Gf=y=>({u_matrix:y}),dh=(y,i,c,p)=>a.e(Gf(y),Di(c,i,p)),Tu=(y,i)=>({u_matrix:y,u_world:i}),Eu=(y,i,c,p,g)=>a.e(dh(y,i,c,p),{u_world:g}),oo=(y,i,c,p)=>{const g=y.transform;let _,C;if(p.paint.get("circle-pitch-alignment")==="map"){const T=me(c,1,g.zoom);_=!0,C=[T,T]}else _=!1,C=g.pixelsToGLUnits;return{u_camera_to_center_distance:g.cameraToCenterDistance,u_scale_with_map:+(p.paint.get("circle-pitch-scale")==="map"),u_matrix:y.translatePosMatrix(i.posMatrix,c,p.paint.get("circle-translate"),p.paint.get("circle-translate-anchor")),u_pitch_with_map:+_,u_device_pixel_ratio:y.pixelRatio,u_extrude_scale:C}},fh=(y,i,c)=>{const p=me(c,1,i.zoom),g=Math.pow(2,i.zoom-c.tileID.overscaledZ),_=c.tileID.overscaleFactor();return{u_matrix:y,u_camera_to_center_distance:i.cameraToCenterDistance,u_pixels_to_tile_units:p,u_extrude_scale:[i.pixelsToGLUnits[0]/(p*g),i.pixelsToGLUnits[1]/(p*g)],u_overscale_factor:_}},Cl=(y,i,c=1)=>({u_matrix:y,u_color:i,u_overlay:0,u_overlay_scale:c}),Zf=y=>({u_matrix:y}),rv=(y,i,c,p)=>({u_matrix:y,u_extrude_scale:me(i,1,c),u_intensity:p});function ph(y,i){const c=Math.pow(2,i.canonical.z),p=i.canonical.y;return[new a.U(0,p/c).toLngLat().lat,new a.U(0,(p+1)/c).toLngLat().lat]}const mh=(y,i,c,p)=>{const g=y.transform;return{u_matrix:Pu(y,i,c,p),u_ratio:1/me(i,1,g.zoom),u_device_pixel_ratio:y.pixelRatio,u_units_to_pixels:[1/g.pixelsToGLUnits[0],1/g.pixelsToGLUnits[1]]}},Wf=(y,i,c,p,g)=>a.e(mh(y,i,c,g),{u_image:0,u_image_height:p}),iv=(y,i,c,p,g)=>{const _=y.transform,C=Kf(i,_);return{u_matrix:Pu(y,i,c,g),u_texsize:i.imageAtlasTexture.size,u_ratio:1/me(i,1,_.zoom),u_device_pixel_ratio:y.pixelRatio,u_image:0,u_scale:[C,p.fromScale,p.toScale],u_fade:p.t,u_units_to_pixels:[1/_.pixelsToGLUnits[0],1/_.pixelsToGLUnits[1]]}},Hf=(y,i,c,p,g,_)=>{const C=y.lineAtlas,T=Kf(i,y.transform),k=c.layout.get("line-cap")==="round",R=C.getDash(p.from,k),z=C.getDash(p.to,k),L=R.width*g.fromScale,G=z.width*g.toScale;return a.e(mh(y,i,c,_),{u_patternscale_a:[T/L,-R.height/2],u_patternscale_b:[T/G,-z.height/2],u_sdfgamma:C.width/(256*Math.min(L,G)*y.pixelRatio)/2,u_image:0,u_tex_y_a:R.y,u_tex_y_b:z.y,u_mix:g.t})};function Kf(y,i){return 1/me(y,1,i.tileZoom)}function Pu(y,i,c,p){return y.translatePosMatrix(p?p.posMatrix:i.tileID.posMatrix,i,c.paint.get("line-translate"),c.paint.get("line-translate-anchor"))}const Xf=(y,i,c,p,g)=>{return{u_matrix:y,u_tl_parent:i,u_scale_parent:c,u_buffer_scale:1,u_fade_t:p.mix,u_opacity:p.opacity*g.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:g.paint.get("raster-brightness-min"),u_brightness_high:g.paint.get("raster-brightness-max"),u_saturation_factor:(C=g.paint.get("raster-saturation"),C>0?1-1/(1.001-C):-C),u_contrast_factor:(_=g.paint.get("raster-contrast"),_>0?1/(1-_):1+_),u_spin_weights:Qf(g.paint.get("raster-hue-rotate"))};var _,C};function Qf(y){y*=Math.PI/180;const i=Math.sin(y),c=Math.cos(y);return[(2*c+1)/3,(-Math.sqrt(3)*i-c+1)/3,(Math.sqrt(3)*i-c+1)/3]}const gh=(y,i,c,p,g,_,C,T,k,R)=>{const z=g.transform;return{u_is_size_zoom_constant:+(y==="constant"||y==="source"),u_is_size_feature_constant:+(y==="constant"||y==="camera"),u_size_t:i?i.uSizeT:0,u_size:i?i.uSize:0,u_camera_to_center_distance:z.cameraToCenterDistance,u_pitch:z.pitch/360*2*Math.PI,u_rotate_symbol:+c,u_aspect_ratio:z.width/z.height,u_fade_change:g.options.fadeDuration?g.symbolFadeChange:1,u_matrix:_,u_label_plane_matrix:C,u_coord_matrix:T,u_is_text:+k,u_pitch_with_map:+p,u_texsize:R,u_texture:0}},yh=(y,i,c,p,g,_,C,T,k,R,z)=>{const L=g.transform;return a.e(gh(y,i,c,p,g,_,C,T,k,R),{u_gamma_scale:p?Math.cos(L._pitch)*L.cameraToCenterDistance:1,u_device_pixel_ratio:g.pixelRatio,u_is_halo:+z})},Io=(y,i,c,p,g,_,C,T,k,R)=>a.e(yh(y,i,c,p,g,_,C,T,!0,k,!0),{u_texsize_icon:R,u_texture_icon:1}),Au=(y,i,c)=>({u_matrix:y,u_opacity:i,u_color:c}),zi=(y,i,c,p,g,_)=>a.e(function(C,T,k,R){const z=k.imageManager.getPattern(C.from.toString()),L=k.imageManager.getPattern(C.to.toString()),{width:G,height:te}=k.imageManager.getPixelSize(),ee=Math.pow(2,R.tileID.overscaledZ),ie=R.tileSize*Math.pow(2,k.transform.tileZoom)/ee,Y=ie*(R.tileID.canonical.x+R.tileID.wrap*ee),ye=ie*R.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:z.tl,u_pattern_br_a:z.br,u_pattern_tl_b:L.tl,u_pattern_br_b:L.br,u_texsize:[G,te],u_mix:T.t,u_pattern_size_a:z.displaySize,u_pattern_size_b:L.displaySize,u_scale_a:T.fromScale,u_scale_b:T.toScale,u_tile_units_to_pixels:1/me(R,1,k.transform.tileZoom),u_pixel_coord_upper:[Y>>16,ye>>16],u_pixel_coord_lower:[65535&Y,65535&ye]}}(p,_,c,g),{u_matrix:y,u_opacity:i}),ku={fillExtrusion:(y,i)=>({u_matrix:new a.aN(y,i.u_matrix),u_lightpos:new a.aP(y,i.u_lightpos),u_lightintensity:new a.aM(y,i.u_lightintensity),u_lightcolor:new a.aP(y,i.u_lightcolor),u_vertical_gradient:new a.aM(y,i.u_vertical_gradient),u_opacity:new a.aM(y,i.u_opacity)}),fillExtrusionPattern:(y,i)=>({u_matrix:new a.aN(y,i.u_matrix),u_lightpos:new a.aP(y,i.u_lightpos),u_lightintensity:new a.aM(y,i.u_lightintensity),u_lightcolor:new a.aP(y,i.u_lightcolor),u_vertical_gradient:new a.aM(y,i.u_vertical_gradient),u_height_factor:new a.aM(y,i.u_height_factor),u_image:new a.aL(y,i.u_image),u_texsize:new a.aQ(y,i.u_texsize),u_pixel_coord_upper:new a.aQ(y,i.u_pixel_coord_upper),u_pixel_coord_lower:new a.aQ(y,i.u_pixel_coord_lower),u_scale:new a.aP(y,i.u_scale),u_fade:new a.aM(y,i.u_fade),u_opacity:new a.aM(y,i.u_opacity)}),fill:(y,i)=>({u_matrix:new a.aN(y,i.u_matrix)}),fillPattern:(y,i)=>({u_matrix:new a.aN(y,i.u_matrix),u_image:new a.aL(y,i.u_image),u_texsize:new a.aQ(y,i.u_texsize),u_pixel_coord_upper:new a.aQ(y,i.u_pixel_coord_upper),u_pixel_coord_lower:new a.aQ(y,i.u_pixel_coord_lower),u_scale:new a.aP(y,i.u_scale),u_fade:new a.aM(y,i.u_fade)}),fillOutline:(y,i)=>({u_matrix:new a.aN(y,i.u_matrix),u_world:new a.aQ(y,i.u_world)}),fillOutlinePattern:(y,i)=>({u_matrix:new a.aN(y,i.u_matrix),u_world:new a.aQ(y,i.u_world),u_image:new a.aL(y,i.u_image),u_texsize:new a.aQ(y,i.u_texsize),u_pixel_coord_upper:new a.aQ(y,i.u_pixel_coord_upper),u_pixel_coord_lower:new a.aQ(y,i.u_pixel_coord_lower),u_scale:new a.aP(y,i.u_scale),u_fade:new a.aM(y,i.u_fade)}),circle:(y,i)=>({u_camera_to_center_distance:new a.aM(y,i.u_camera_to_center_distance),u_scale_with_map:new a.aL(y,i.u_scale_with_map),u_pitch_with_map:new a.aL(y,i.u_pitch_with_map),u_extrude_scale:new a.aQ(y,i.u_extrude_scale),u_device_pixel_ratio:new a.aM(y,i.u_device_pixel_ratio),u_matrix:new a.aN(y,i.u_matrix)}),collisionBox:(y,i)=>({u_matrix:new a.aN(y,i.u_matrix),u_camera_to_center_distance:new a.aM(y,i.u_camera_to_center_distance),u_pixels_to_tile_units:new a.aM(y,i.u_pixels_to_tile_units),u_extrude_scale:new a.aQ(y,i.u_extrude_scale),u_overscale_factor:new a.aM(y,i.u_overscale_factor)}),collisionCircle:(y,i)=>({u_matrix:new a.aN(y,i.u_matrix),u_inv_matrix:new a.aN(y,i.u_inv_matrix),u_camera_to_center_distance:new a.aM(y,i.u_camera_to_center_distance),u_viewport_size:new a.aQ(y,i.u_viewport_size)}),debug:(y,i)=>({u_color:new a.aR(y,i.u_color),u_matrix:new a.aN(y,i.u_matrix),u_overlay:new a.aL(y,i.u_overlay),u_overlay_scale:new a.aM(y,i.u_overlay_scale)}),clippingMask:(y,i)=>({u_matrix:new a.aN(y,i.u_matrix)}),heatmap:(y,i)=>({u_extrude_scale:new a.aM(y,i.u_extrude_scale),u_intensity:new a.aM(y,i.u_intensity),u_matrix:new a.aN(y,i.u_matrix)}),heatmapTexture:(y,i)=>({u_matrix:new a.aN(y,i.u_matrix),u_world:new a.aQ(y,i.u_world),u_image:new a.aL(y,i.u_image),u_color_ramp:new a.aL(y,i.u_color_ramp),u_opacity:new a.aM(y,i.u_opacity)}),hillshade:(y,i)=>({u_matrix:new a.aN(y,i.u_matrix),u_image:new a.aL(y,i.u_image),u_latrange:new a.aQ(y,i.u_latrange),u_light:new a.aQ(y,i.u_light),u_shadow:new a.aR(y,i.u_shadow),u_highlight:new a.aR(y,i.u_highlight),u_accent:new a.aR(y,i.u_accent)}),hillshadePrepare:(y,i)=>({u_matrix:new a.aN(y,i.u_matrix),u_image:new a.aL(y,i.u_image),u_dimension:new a.aQ(y,i.u_dimension),u_zoom:new a.aM(y,i.u_zoom),u_unpack:new a.aO(y,i.u_unpack)}),line:(y,i)=>({u_matrix:new a.aN(y,i.u_matrix),u_ratio:new a.aM(y,i.u_ratio),u_device_pixel_ratio:new a.aM(y,i.u_device_pixel_ratio),u_units_to_pixels:new a.aQ(y,i.u_units_to_pixels)}),lineGradient:(y,i)=>({u_matrix:new a.aN(y,i.u_matrix),u_ratio:new a.aM(y,i.u_ratio),u_device_pixel_ratio:new a.aM(y,i.u_device_pixel_ratio),u_units_to_pixels:new a.aQ(y,i.u_units_to_pixels),u_image:new a.aL(y,i.u_image),u_image_height:new a.aM(y,i.u_image_height)}),linePattern:(y,i)=>({u_matrix:new a.aN(y,i.u_matrix),u_texsize:new a.aQ(y,i.u_texsize),u_ratio:new a.aM(y,i.u_ratio),u_device_pixel_ratio:new a.aM(y,i.u_device_pixel_ratio),u_image:new a.aL(y,i.u_image),u_units_to_pixels:new a.aQ(y,i.u_units_to_pixels),u_scale:new a.aP(y,i.u_scale),u_fade:new a.aM(y,i.u_fade)}),lineSDF:(y,i)=>({u_matrix:new a.aN(y,i.u_matrix),u_ratio:new a.aM(y,i.u_ratio),u_device_pixel_ratio:new a.aM(y,i.u_device_pixel_ratio),u_units_to_pixels:new a.aQ(y,i.u_units_to_pixels),u_patternscale_a:new a.aQ(y,i.u_patternscale_a),u_patternscale_b:new a.aQ(y,i.u_patternscale_b),u_sdfgamma:new a.aM(y,i.u_sdfgamma),u_image:new a.aL(y,i.u_image),u_tex_y_a:new a.aM(y,i.u_tex_y_a),u_tex_y_b:new a.aM(y,i.u_tex_y_b),u_mix:new a.aM(y,i.u_mix)}),raster:(y,i)=>({u_matrix:new a.aN(y,i.u_matrix),u_tl_parent:new a.aQ(y,i.u_tl_parent),u_scale_parent:new a.aM(y,i.u_scale_parent),u_buffer_scale:new a.aM(y,i.u_buffer_scale),u_fade_t:new a.aM(y,i.u_fade_t),u_opacity:new a.aM(y,i.u_opacity),u_image0:new a.aL(y,i.u_image0),u_image1:new a.aL(y,i.u_image1),u_brightness_low:new a.aM(y,i.u_brightness_low),u_brightness_high:new a.aM(y,i.u_brightness_high),u_saturation_factor:new a.aM(y,i.u_saturation_factor),u_contrast_factor:new a.aM(y,i.u_contrast_factor),u_spin_weights:new a.aP(y,i.u_spin_weights)}),symbolIcon:(y,i)=>({u_is_size_zoom_constant:new a.aL(y,i.u_is_size_zoom_constant),u_is_size_feature_constant:new a.aL(y,i.u_is_size_feature_constant),u_size_t:new a.aM(y,i.u_size_t),u_size:new a.aM(y,i.u_size),u_camera_to_center_distance:new a.aM(y,i.u_camera_to_center_distance),u_pitch:new a.aM(y,i.u_pitch),u_rotate_symbol:new a.aL(y,i.u_rotate_symbol),u_aspect_ratio:new a.aM(y,i.u_aspect_ratio),u_fade_change:new a.aM(y,i.u_fade_change),u_matrix:new a.aN(y,i.u_matrix),u_label_plane_matrix:new a.aN(y,i.u_label_plane_matrix),u_coord_matrix:new a.aN(y,i.u_coord_matrix),u_is_text:new a.aL(y,i.u_is_text),u_pitch_with_map:new a.aL(y,i.u_pitch_with_map),u_texsize:new a.aQ(y,i.u_texsize),u_texture:new a.aL(y,i.u_texture)}),symbolSDF:(y,i)=>({u_is_size_zoom_constant:new a.aL(y,i.u_is_size_zoom_constant),u_is_size_feature_constant:new a.aL(y,i.u_is_size_feature_constant),u_size_t:new a.aM(y,i.u_size_t),u_size:new a.aM(y,i.u_size),u_camera_to_center_distance:new a.aM(y,i.u_camera_to_center_distance),u_pitch:new a.aM(y,i.u_pitch),u_rotate_symbol:new a.aL(y,i.u_rotate_symbol),u_aspect_ratio:new a.aM(y,i.u_aspect_ratio),u_fade_change:new a.aM(y,i.u_fade_change),u_matrix:new a.aN(y,i.u_matrix),u_label_plane_matrix:new a.aN(y,i.u_label_plane_matrix),u_coord_matrix:new a.aN(y,i.u_coord_matrix),u_is_text:new a.aL(y,i.u_is_text),u_pitch_with_map:new a.aL(y,i.u_pitch_with_map),u_texsize:new a.aQ(y,i.u_texsize),u_texture:new a.aL(y,i.u_texture),u_gamma_scale:new a.aM(y,i.u_gamma_scale),u_device_pixel_ratio:new a.aM(y,i.u_device_pixel_ratio),u_is_halo:new a.aL(y,i.u_is_halo)}),symbolTextAndIcon:(y,i)=>({u_is_size_zoom_constant:new a.aL(y,i.u_is_size_zoom_constant),u_is_size_feature_constant:new a.aL(y,i.u_is_size_feature_constant),u_size_t:new a.aM(y,i.u_size_t),u_size:new a.aM(y,i.u_size),u_camera_to_center_distance:new a.aM(y,i.u_camera_to_center_distance),u_pitch:new a.aM(y,i.u_pitch),u_rotate_symbol:new a.aL(y,i.u_rotate_symbol),u_aspect_ratio:new a.aM(y,i.u_aspect_ratio),u_fade_change:new a.aM(y,i.u_fade_change),u_matrix:new a.aN(y,i.u_matrix),u_label_plane_matrix:new a.aN(y,i.u_label_plane_matrix),u_coord_matrix:new a.aN(y,i.u_coord_matrix),u_is_text:new a.aL(y,i.u_is_text),u_pitch_with_map:new a.aL(y,i.u_pitch_with_map),u_texsize:new a.aQ(y,i.u_texsize),u_texsize_icon:new a.aQ(y,i.u_texsize_icon),u_texture:new a.aL(y,i.u_texture),u_texture_icon:new a.aL(y,i.u_texture_icon),u_gamma_scale:new a.aM(y,i.u_gamma_scale),u_device_pixel_ratio:new a.aM(y,i.u_device_pixel_ratio),u_is_halo:new a.aL(y,i.u_is_halo)}),background:(y,i)=>({u_matrix:new a.aN(y,i.u_matrix),u_opacity:new a.aM(y,i.u_opacity),u_color:new a.aR(y,i.u_color)}),backgroundPattern:(y,i)=>({u_matrix:new a.aN(y,i.u_matrix),u_opacity:new a.aM(y,i.u_opacity),u_image:new a.aL(y,i.u_image),u_pattern_tl_a:new a.aQ(y,i.u_pattern_tl_a),u_pattern_br_a:new a.aQ(y,i.u_pattern_br_a),u_pattern_tl_b:new a.aQ(y,i.u_pattern_tl_b),u_pattern_br_b:new a.aQ(y,i.u_pattern_br_b),u_texsize:new a.aQ(y,i.u_texsize),u_mix:new a.aM(y,i.u_mix),u_pattern_size_a:new a.aQ(y,i.u_pattern_size_a),u_pattern_size_b:new a.aQ(y,i.u_pattern_size_b),u_scale_a:new a.aM(y,i.u_scale_a),u_scale_b:new a.aM(y,i.u_scale_b),u_pixel_coord_upper:new a.aQ(y,i.u_pixel_coord_upper),u_pixel_coord_lower:new a.aQ(y,i.u_pixel_coord_lower),u_tile_units_to_pixels:new a.aM(y,i.u_tile_units_to_pixels)}),terrain:(y,i)=>({u_matrix:new a.aN(y,i.u_matrix),u_texture:new a.aL(y,i.u_texture),u_ele_delta:new a.aM(y,i.u_ele_delta)}),terrainDepth:(y,i)=>({u_matrix:new a.aN(y,i.u_matrix),u_ele_delta:new a.aM(y,i.u_ele_delta)}),terrainCoords:(y,i)=>({u_matrix:new a.aN(y,i.u_matrix),u_texture:new a.aL(y,i.u_texture),u_terrain_coords_id:new a.aM(y,i.u_terrain_coords_id),u_ele_delta:new a.aM(y,i.u_ele_delta)})};class Iu{constructor(i,c,p){this.context=i;const g=i.gl;this.buffer=g.createBuffer(),this.dynamicDraw=!!p,this.context.unbindVAO(),i.bindElementBuffer.set(this.buffer),g.bufferData(g.ELEMENT_ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?g.DYNAMIC_DRAW:g.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(i){const c=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),c.bufferSubData(c.ELEMENT_ARRAY_BUFFER,0,i.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Tl={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Mu{constructor(i,c,p,g){this.length=c.length,this.attributes=p,this.itemSize=c.bytesPerElement,this.dynamicDraw=g,this.context=i;const _=i.gl;this.buffer=_.createBuffer(),i.bindVertexBuffer.set(this.buffer),_.bufferData(_.ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?_.DYNAMIC_DRAW:_.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(i){if(i.length!==this.length)throw new Error(`Length of new data is ${i.length}, which doesn't match current length of ${this.length}`);const c=this.context.gl;this.bind(),c.bufferSubData(c.ARRAY_BUFFER,0,i.arrayBuffer)}enableAttributes(i,c){for(let p=0;p<this.attributes.length;p++){const g=c.attributes[this.attributes[p].name];g!==void 0&&i.enableVertexAttribArray(g)}}setVertexAttribPointers(i,c,p){for(let g=0;g<this.attributes.length;g++){const _=this.attributes[g],C=c.attributes[_.name];C!==void 0&&i.vertexAttribPointer(C,_.components,i[Tl[_.type]],!1,this.itemSize,_.offset+this.itemSize*(p||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const _a=new WeakMap;function ao(y){var i;if(_a.has(y))return _a.get(y);{const c=(i=y.getParameter(y.VERSION))===null||i===void 0?void 0:i.startsWith("WebGL 2.0");return _a.set(y,c),c}}class qt{constructor(i){this.gl=i.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(i){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Ru extends qt{getDefault(){return a.aT.transparent}set(i){const c=this.current;(i.r!==c.r||i.g!==c.g||i.b!==c.b||i.a!==c.a||this.dirty)&&(this.gl.clearColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class di extends qt{getDefault(){return 1}set(i){(i!==this.current||this.dirty)&&(this.gl.clearDepth(i),this.current=i,this.dirty=!1)}}class fi extends qt{getDefault(){return 0}set(i){(i!==this.current||this.dirty)&&(this.gl.clearStencil(i),this.current=i,this.dirty=!1)}}class vh extends qt{getDefault(){return[!0,!0,!0,!0]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||i[2]!==c[2]||i[3]!==c[3]||this.dirty)&&(this.gl.colorMask(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class Du extends qt{getDefault(){return!0}set(i){(i!==this.current||this.dirty)&&(this.gl.depthMask(i),this.current=i,this.dirty=!1)}}class zu extends qt{getDefault(){return 255}set(i){(i!==this.current||this.dirty)&&(this.gl.stencilMask(i),this.current=i,this.dirty=!1)}}class _h extends qt{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(i){const c=this.current;(i.func!==c.func||i.ref!==c.ref||i.mask!==c.mask||this.dirty)&&(this.gl.stencilFunc(i.func,i.ref,i.mask),this.current=i,this.dirty=!1)}}class xh extends qt{getDefault(){const i=this.gl;return[i.KEEP,i.KEEP,i.KEEP]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||i[2]!==c[2]||this.dirty)&&(this.gl.stencilOp(i[0],i[1],i[2]),this.current=i,this.dirty=!1)}}class Lu extends qt{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.STENCIL_TEST):c.disable(c.STENCIL_TEST),this.current=i,this.dirty=!1}}class wh extends qt{getDefault(){return[0,1]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||this.dirty)&&(this.gl.depthRange(i[0],i[1]),this.current=i,this.dirty=!1)}}class bh extends qt{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST),this.current=i,this.dirty=!1}}class Ou extends qt{getDefault(){return this.gl.LESS}set(i){(i!==this.current||this.dirty)&&(this.gl.depthFunc(i),this.current=i,this.dirty=!1)}}class Yf extends qt{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.BLEND):c.disable(c.BLEND),this.current=i,this.dirty=!1}}class Jf extends qt{getDefault(){const i=this.gl;return[i.ONE,i.ZERO]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||this.dirty)&&(this.gl.blendFunc(i[0],i[1]),this.current=i,this.dirty=!1)}}class xa extends qt{getDefault(){return a.aT.transparent}set(i){const c=this.current;(i.r!==c.r||i.g!==c.g||i.b!==c.b||i.a!==c.a||this.dirty)&&(this.gl.blendColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class sv extends qt{getDefault(){return this.gl.FUNC_ADD}set(i){(i!==this.current||this.dirty)&&(this.gl.blendEquation(i),this.current=i,this.dirty=!1)}}class ov extends qt{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE),this.current=i,this.dirty=!1}}class av extends qt{getDefault(){return this.gl.BACK}set(i){(i!==this.current||this.dirty)&&(this.gl.cullFace(i),this.current=i,this.dirty=!1)}}class lv extends qt{getDefault(){return this.gl.CCW}set(i){(i!==this.current||this.dirty)&&(this.gl.frontFace(i),this.current=i,this.dirty=!1)}}class uv extends qt{getDefault(){return null}set(i){(i!==this.current||this.dirty)&&(this.gl.useProgram(i),this.current=i,this.dirty=!1)}}class cv extends qt{getDefault(){return this.gl.TEXTURE0}set(i){(i!==this.current||this.dirty)&&(this.gl.activeTexture(i),this.current=i,this.dirty=!1)}}class Sh extends qt{getDefault(){const i=this.gl;return[0,0,i.drawingBufferWidth,i.drawingBufferHeight]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||i[2]!==c[2]||i[3]!==c[3]||this.dirty)&&(this.gl.viewport(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class Fu extends qt{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,i),this.current=i,this.dirty=!1}}class Ch extends qt{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindRenderbuffer(c.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class Th extends qt{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindTexture(c.TEXTURE_2D,i),this.current=i,this.dirty=!1}}class wa extends qt{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindBuffer(c.ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class ep extends qt{getDefault(){return null}set(i){const c=this.gl;c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class tp extends qt{getDefault(){return null}set(i){var c;if(i===this.current&&!this.dirty)return;const p=this.gl;ao(p)?p.bindVertexArray(i):(c=p.getExtension("OES_vertex_array_object"))===null||c===void 0||c.bindVertexArrayOES(i),this.current=i,this.dirty=!1}}class Eh extends qt{getDefault(){return 4}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_ALIGNMENT,i),this.current=i,this.dirty=!1}}class Mo extends qt{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i),this.current=i,this.dirty=!1}}class np extends qt{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,i),this.current=i,this.dirty=!1}}class lo extends qt{constructor(i,c){super(i),this.context=i,this.parent=c}getDefault(){return null}}class ba extends lo{setDirty(){this.dirty=!0}set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,i,0),this.current=i,this.dirty=!1}}class rp extends lo{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class Ph extends lo{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_STENCIL_ATTACHMENT,c.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class Jt{constructor(i,c,p,g,_){this.context=i,this.width=c,this.height=p;const C=i.gl,T=this.framebuffer=C.createFramebuffer();if(this.colorAttachment=new ba(i,T),g)this.depthAttachment=_?new Ph(i,T):new rp(i,T);else if(_)throw new Error("Stencil cannot be setted without depth");if(C.checkFramebufferStatus(C.FRAMEBUFFER)!==C.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const i=this.context.gl,c=this.colorAttachment.get();if(c&&i.deleteTexture(c),this.depthAttachment){const p=this.depthAttachment.get();p&&i.deleteRenderbuffer(p)}i.deleteFramebuffer(this.framebuffer)}}class Cn{constructor(i,c,p){this.blendFunction=i,this.blendColor=c,this.mask=p}}Cn.Replace=[1,0],Cn.disabled=new Cn(Cn.Replace,a.aT.transparent,[!1,!1,!1,!1]),Cn.unblended=new Cn(Cn.Replace,a.aT.transparent,[!0,!0,!0,!0]),Cn.alphaBlended=new Cn([1,771],a.aT.transparent,[!0,!0,!0,!0]);class hv{constructor(i){var c,p;if(this.gl=i,this.clearColor=new Ru(this),this.clearDepth=new di(this),this.clearStencil=new fi(this),this.colorMask=new vh(this),this.depthMask=new Du(this),this.stencilMask=new zu(this),this.stencilFunc=new _h(this),this.stencilOp=new xh(this),this.stencilTest=new Lu(this),this.depthRange=new wh(this),this.depthTest=new bh(this),this.depthFunc=new Ou(this),this.blend=new Yf(this),this.blendFunc=new Jf(this),this.blendColor=new xa(this),this.blendEquation=new sv(this),this.cullFace=new ov(this),this.cullFaceSide=new av(this),this.frontFace=new lv(this),this.program=new uv(this),this.activeTexture=new cv(this),this.viewport=new Sh(this),this.bindFramebuffer=new Fu(this),this.bindRenderbuffer=new Ch(this),this.bindTexture=new Th(this),this.bindVertexBuffer=new wa(this),this.bindElementBuffer=new ep(this),this.bindVertexArray=new tp(this),this.pixelStoreUnpack=new Eh(this),this.pixelStoreUnpackPremultiplyAlpha=new Mo(this),this.pixelStoreUnpackFlipY=new np(this),this.extTextureFilterAnisotropic=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=i.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),ao(i)){this.HALF_FLOAT=i.HALF_FLOAT;const g=i.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(c=i.RGBA16F)!==null&&c!==void 0?c:g==null?void 0:g.RGBA16F_EXT,this.RGB16F=(p=i.RGB16F)!==null&&p!==void 0?p:g==null?void 0:g.RGB16F_EXT,i.getExtension("EXT_color_buffer_float")}else{i.getExtension("EXT_color_buffer_half_float"),i.getExtension("OES_texture_half_float_linear");const g=i.getExtension("OES_texture_half_float");this.HALF_FLOAT=g==null?void 0:g.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(i,c){return new Iu(this,i,c)}createVertexBuffer(i,c,p){return new Mu(this,i,c,p)}createRenderbuffer(i,c,p){const g=this.gl,_=g.createRenderbuffer();return this.bindRenderbuffer.set(_),g.renderbufferStorage(g.RENDERBUFFER,i,c,p),this.bindRenderbuffer.set(null),_}createFramebuffer(i,c,p,g){return new Jt(this,i,c,p,g)}clear({color:i,depth:c,stencil:p}){const g=this.gl;let _=0;i&&(_|=g.COLOR_BUFFER_BIT,this.clearColor.set(i),this.colorMask.set([!0,!0,!0,!0])),c!==void 0&&(_|=g.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(c),this.depthMask.set(!0)),p!==void 0&&(_|=g.STENCIL_BUFFER_BIT,this.clearStencil.set(p),this.stencilMask.set(255)),g.clear(_)}setCullFace(i){i.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(i.mode),this.frontFace.set(i.frontFace))}setDepthMode(i){i.func!==this.gl.ALWAYS||i.mask?(this.depthTest.set(!0),this.depthFunc.set(i.func),this.depthMask.set(i.mask),this.depthRange.set(i.range)):this.depthTest.set(!1)}setStencilMode(i){i.test.func!==this.gl.ALWAYS||i.mask?(this.stencilTest.set(!0),this.stencilMask.set(i.mask),this.stencilOp.set([i.fail,i.depthFail,i.pass]),this.stencilFunc.set({func:i.test.func,ref:i.ref,mask:i.test.mask})):this.stencilTest.set(!1)}setColorMode(i){a.aG(i.blendFunction,Cn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(i.blendFunction),this.blendColor.set(i.blendColor)),this.colorMask.set(i.mask)}createVertexArray(){var i;return ao(this.gl)?this.gl.createVertexArray():(i=this.gl.getExtension("OES_vertex_array_object"))===null||i===void 0?void 0:i.createVertexArrayOES()}deleteVertexArray(i){var c;return ao(this.gl)?this.gl.deleteVertexArray(i):(c=this.gl.getExtension("OES_vertex_array_object"))===null||c===void 0?void 0:c.deleteVertexArrayOES(i)}unbindVAO(){this.bindVertexArray.set(null)}}class Gt{constructor(i,c,p){this.func=i,this.mask=c,this.range=p}}Gt.ReadOnly=!1,Gt.ReadWrite=!0,Gt.disabled=new Gt(519,Gt.ReadOnly,[0,1]);const Ro=7680;class Tn{constructor(i,c,p,g,_,C){this.test=i,this.ref=c,this.mask=p,this.fail=g,this.depthFail=_,this.pass=C}}Tn.disabled=new Tn({func:519,mask:0},0,0,Ro,Ro,Ro);class wn{constructor(i,c,p){this.enable=i,this.mode=c,this.frontFace=p}}let El;function ip(y,i,c,p,g,_,C){const T=y.context,k=T.gl,R=y.useProgram("collisionBox"),z=[];let L=0,G=0;for(let ce=0;ce<p.length;ce++){const ve=p[ce],Pe=i.getTile(ve),Ae=Pe.getBucket(c);if(!Ae)continue;let De=ve.posMatrix;g[0]===0&&g[1]===0||(De=y.translatePosMatrix(ve.posMatrix,Pe,g,_));const Ve=C?Ae.textCollisionBox:Ae.iconCollisionBox,Fe=Ae.collisionCircleArray;if(Fe.length>0){const Ue=a.Z(),lt=De;a.aU(Ue,Ae.placementInvProjMatrix,y.transform.glCoordMatrix),a.aU(Ue,Ue,Ae.placementViewportMatrix),z.push({circleArray:Fe,circleOffset:G,transform:lt,invTransform:Ue,coord:ve}),L+=Fe.length/4,G=L}Ve&&R.draw(T,k.LINES,Gt.disabled,Tn.disabled,y.colorModeForRenderPass(),wn.disabled,fh(De,y.transform,Pe),y.style.map.terrain&&y.style.map.terrain.getTerrainData(ve),c.id,Ve.layoutVertexBuffer,Ve.indexBuffer,Ve.segments,null,y.transform.zoom,null,null,Ve.collisionVertexBuffer)}if(!C||!z.length)return;const te=y.useProgram("collisionCircle"),ee=new a.aV;ee.resize(4*L),ee._trim();let ie=0;for(const ce of z)for(let ve=0;ve<ce.circleArray.length/4;ve++){const Pe=4*ve,Ae=ce.circleArray[Pe+0],De=ce.circleArray[Pe+1],Ve=ce.circleArray[Pe+2],Fe=ce.circleArray[Pe+3];ee.emplace(ie++,Ae,De,Ve,Fe,0),ee.emplace(ie++,Ae,De,Ve,Fe,1),ee.emplace(ie++,Ae,De,Ve,Fe,2),ee.emplace(ie++,Ae,De,Ve,Fe,3)}(!El||El.length<2*L)&&(El=function(ce){const ve=2*ce,Pe=new a.aX;Pe.resize(ve),Pe._trim();for(let Ae=0;Ae<ve;Ae++){const De=6*Ae;Pe.uint16[De+0]=4*Ae+0,Pe.uint16[De+1]=4*Ae+1,Pe.uint16[De+2]=4*Ae+2,Pe.uint16[De+3]=4*Ae+2,Pe.uint16[De+4]=4*Ae+3,Pe.uint16[De+5]=4*Ae+0}return Pe}(L));const Y=T.createIndexBuffer(El,!0),ye=T.createVertexBuffer(ee,a.aW.members,!0);for(const ce of z){const ve={u_matrix:ce.transform,u_inv_matrix:ce.invTransform,u_camera_to_center_distance:(Te=y.transform).cameraToCenterDistance,u_viewport_size:[Te.width,Te.height]};te.draw(T,k.TRIANGLES,Gt.disabled,Tn.disabled,y.colorModeForRenderPass(),wn.disabled,ve,y.style.map.terrain&&y.style.map.terrain.getTerrainData(ce.coord),c.id,ye,Y,a.S.simpleSegment(0,2*ce.circleOffset,ce.circleArray.length,ce.circleArray.length/2),null,y.transform.zoom,null,null,null)}var Te;ye.destroy(),Y.destroy()}wn.disabled=new wn(!1,1029,2305),wn.backCCW=new wn(!0,1029,2305);const Ah=a.ao(new Float32Array(16));function Nu(y,i,c,p,g,_){const{horizontalAlign:C,verticalAlign:T}=a.au(y);return new a.P((-(C-.5)*i/g+p[0])*_,(-(T-.5)*c/g+p[1])*_)}function Bu(y,i,c,p,g,_,C,T,k,R,z){const L=y.text.placedSymbolArray,G=y.text.dynamicLayoutVertexArray,te=y.icon.dynamicLayoutVertexArray,ee={};G.clear();for(let ie=0;ie<L.length;ie++){const Y=L.get(ie),ye=Y.hidden||!Y.crossTileID||y.allowVerticalPlacement&&!Y.placedOrientation?null:p[Y.crossTileID];if(ye){const Te=new a.P(Y.anchorX,Y.anchorY),ce=xn(Te,c?C:_,z),ve=ls(g.cameraToCenterDistance,ce.signedDistanceFromCamera);let Pe=a.aj(y.textSizeData,k,Y)*ve/a.ap;c&&(Pe*=y.tilePixelRatio/T);const{width:Ae,height:De,anchor:Ve,textOffset:Fe,textBoxScale:Ue}=ye,lt=Nu(Ve,Ae,De,Fe,Ue,Pe),$t=c?xn(Te.add(lt),_,z).point:ce.point.add(i?lt.rotate(-g.angle):lt),Je=y.allowVerticalPlacement&&Y.placedOrientation===a.ai.vertical?Math.PI/2:0;for(let Tt=0;Tt<Y.numGlyphs;Tt++)a.ak(G,$t,Je);R&&Y.associatedIconIndex>=0&&(ee[Y.associatedIconIndex]={shiftedAnchor:$t,angle:Je})}else Q(Y.numGlyphs,G)}if(R){te.clear();const ie=y.icon.placedSymbolArray;for(let Y=0;Y<ie.length;Y++){const ye=ie.get(Y);if(ye.hidden)Q(ye.numGlyphs,te);else{const Te=ee[Y];if(Te)for(let ce=0;ce<ye.numGlyphs;ce++)a.ak(te,Te.shiftedAnchor,Te.angle);else Q(ye.numGlyphs,te)}}y.icon.dynamicLayoutVertexBuffer.updateData(te)}y.text.dynamicLayoutVertexBuffer.updateData(G)}function kh(y,i,c){return c.iconsInText&&i?"symbolTextAndIcon":y?"symbolSDF":"symbolIcon"}function Vu(y,i,c,p,g,_,C,T,k,R,z,L){const G=y.context,te=G.gl,ee=y.transform,ie=T==="map",Y=k==="map",ye=T!=="viewport"&&c.layout.get("symbol-placement")!=="point",Te=ie&&!Y&&!ye,ce=!c.layout.get("symbol-sort-key").isConstant();let ve=!1;const Pe=y.depthModeForSublayer(0,Gt.ReadOnly),Ae=c._unevaluatedLayout.hasValue("text-variable-anchor")||c._unevaluatedLayout.hasValue("text-variable-anchor-offset"),De=[];for(const Ve of p){const Fe=i.getTile(Ve),Ue=Fe.getBucket(c);if(!Ue)continue;const lt=g?Ue.text:Ue.icon;if(!lt||!lt.segments.get().length||!lt.hasVisibleVertices)continue;const $t=lt.programConfigurations.get(c.id),Je=g||Ue.sdfIcons,Tt=g?Ue.textSizeData:Ue.iconSizeData,ht=Y||ee.pitch!==0,on=y.useProgram(kh(Je,g,Ue),$t),Bt=a.ah(Tt,ee.zoom),Lt=y.style.map.terrain&&y.style.map.terrain.getTerrainData(Ve);let jt,On,cn,gr,Jn=[0,0],jn=null;if(g)On=Fe.glyphAtlasTexture,cn=te.LINEAR,jt=Fe.glyphAtlasTexture.size,Ue.iconsInText&&(Jn=Fe.imageAtlasTexture.size,jn=Fe.imageAtlasTexture,gr=ht||y.options.rotating||y.options.zooming||Tt.kind==="composite"||Tt.kind==="camera"?te.LINEAR:te.NEAREST);else{const Fn=c.layout.get("icon-size").constantOr(0)!==1||Ue.iconsNeedLinear;On=Fe.imageAtlasTexture,cn=Je||y.options.rotating||y.options.zooming||Fn||ht?te.LINEAR:te.NEAREST,jt=Fe.imageAtlasTexture.size}const gi=me(Fe,1,y.transform.zoom),pn=Ze(Ve.posMatrix,Y,ie,y.transform,gi),hs=ci(Ve.posMatrix,Y,ie,y.transform,gi),ds=Ae&&Ue.hasTextData(),ho=c.layout.get("icon-text-fit")!=="none"&&ds&&Ue.hasIconData();if(ye){const Fn=y.style.map.terrain?(Xr,Nn)=>y.style.map.terrain.getElevation(Ve,Xr,Nn):null,er=c.layout.get("text-rotation-alignment")==="map";Qe(Ue,Ve.posMatrix,y,g,pn,hs,Y,R,er,Fn)}const Fo=y.translatePosMatrix(Ve.posMatrix,Fe,_,C),ka=ye||g&&Ae||ho?Ah:pn,Tr=y.translatePosMatrix(hs,Fe,_,C,!0),yr=Je&&c.paint.get(g?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let zr;zr=Je?Ue.iconsInText?Io(Tt.kind,Bt,Te,Y,y,Fo,ka,Tr,jt,Jn):yh(Tt.kind,Bt,Te,Y,y,Fo,ka,Tr,g,jt,!0):gh(Tt.kind,Bt,Te,Y,y,Fo,ka,Tr,g,jt);const No={program:on,buffers:lt,uniformValues:zr,atlasTexture:On,atlasTextureIcon:jn,atlasInterpolation:cn,atlasInterpolationIcon:gr,isSDF:Je,hasHalo:yr};if(ce&&Ue.canOverlap){ve=!0;const Fn=lt.segments.get();for(const er of Fn)De.push({segments:new a.S([er]),sortKey:er.sortKey,state:No,terrainData:Lt})}else De.push({segments:lt.segments,sortKey:0,state:No,terrainData:Lt})}ve&&De.sort((Ve,Fe)=>Ve.sortKey-Fe.sortKey);for(const Ve of De){const Fe=Ve.state;if(G.activeTexture.set(te.TEXTURE0),Fe.atlasTexture.bind(Fe.atlasInterpolation,te.CLAMP_TO_EDGE),Fe.atlasTextureIcon&&(G.activeTexture.set(te.TEXTURE1),Fe.atlasTextureIcon&&Fe.atlasTextureIcon.bind(Fe.atlasInterpolationIcon,te.CLAMP_TO_EDGE)),Fe.isSDF){const Ue=Fe.uniformValues;Fe.hasHalo&&(Ue.u_is_halo=1,Ih(Fe.buffers,Ve.segments,c,y,Fe.program,Pe,z,L,Ue,Ve.terrainData)),Ue.u_is_halo=0}Ih(Fe.buffers,Ve.segments,c,y,Fe.program,Pe,z,L,Fe.uniformValues,Ve.terrainData)}}function Ih(y,i,c,p,g,_,C,T,k,R){const z=p.context;g.draw(z,z.gl.TRIANGLES,_,C,T,wn.disabled,k,R,c.id,y.layoutVertexBuffer,y.indexBuffer,i,c.paint,p.transform.zoom,y.programConfigurations.get(c.id),y.dynamicLayoutVertexBuffer,y.opacityVertexBuffer)}function Pl(y,i,c,p,g){if(!c||!p||!p.imageAtlas)return;const _=p.imageAtlas.patternPositions;let C=_[c.to.toString()],T=_[c.from.toString()];if(!C&&T&&(C=T),!T&&C&&(T=C),!C||!T){const k=g.getPaintProperty(i);C=_[k],T=_[k]}C&&T&&y.setConstantPatternPositions(C,T)}function Al(y,i,c,p,g,_,C){const T=y.context.gl,k="fill-pattern",R=c.paint.get(k),z=R&&R.constantOr(1),L=c.getCrossfadeParameters();let G,te,ee,ie,Y;C?(te=z&&!c.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",G=T.LINES):(te=z?"fillPattern":"fill",G=T.TRIANGLES);const ye=R.constantOr(null);for(const Te of p){const ce=i.getTile(Te);if(z&&!ce.patternsLoaded())continue;const ve=ce.getBucket(c);if(!ve)continue;const Pe=ve.programConfigurations.get(c.id),Ae=y.useProgram(te,Pe),De=y.style.map.terrain&&y.style.map.terrain.getTerrainData(Te);z&&(y.context.activeTexture.set(T.TEXTURE0),ce.imageAtlasTexture.bind(T.LINEAR,T.CLAMP_TO_EDGE),Pe.updatePaintBuffers(L)),Pl(Pe,k,ye,ce,c);const Ve=De?Te:null,Fe=y.translatePosMatrix(Ve?Ve.posMatrix:Te.posMatrix,ce,c.paint.get("fill-translate"),c.paint.get("fill-translate-anchor"));if(C){ie=ve.indexBuffer2,Y=ve.segments2;const Ue=[T.drawingBufferWidth,T.drawingBufferHeight];ee=te==="fillOutlinePattern"&&z?Eu(Fe,y,L,ce,Ue):Tu(Fe,Ue)}else ie=ve.indexBuffer,Y=ve.segments,ee=z?dh(Fe,y,L,ce):Gf(Fe);Ae.draw(y.context,G,g,y.stencilModeForClipping(Te),_,wn.disabled,ee,De,c.id,ve.layoutVertexBuffer,ie,Y,c.paint,y.transform.zoom,Pe)}}function kl(y,i,c,p,g,_,C){const T=y.context,k=T.gl,R="fill-extrusion-pattern",z=c.paint.get(R),L=z.constantOr(1),G=c.getCrossfadeParameters(),te=c.paint.get("fill-extrusion-opacity"),ee=z.constantOr(null);for(const ie of p){const Y=i.getTile(ie),ye=Y.getBucket(c);if(!ye)continue;const Te=y.style.map.terrain&&y.style.map.terrain.getTerrainData(ie),ce=ye.programConfigurations.get(c.id),ve=y.useProgram(L?"fillExtrusionPattern":"fillExtrusion",ce);L&&(y.context.activeTexture.set(k.TEXTURE0),Y.imageAtlasTexture.bind(k.LINEAR,k.CLAMP_TO_EDGE),ce.updatePaintBuffers(G)),Pl(ce,R,ee,Y,c);const Pe=y.translatePosMatrix(ie.posMatrix,Y,c.paint.get("fill-extrusion-translate"),c.paint.get("fill-extrusion-translate-anchor")),Ae=c.paint.get("fill-extrusion-vertical-gradient"),De=L?so(Pe,y,Ae,te,ie,G,Y):hh(Pe,y,Ae,te);ve.draw(T,T.gl.TRIANGLES,g,_,C,wn.backCCW,De,Te,c.id,ye.layoutVertexBuffer,ye.indexBuffer,ye.segments,c.paint,y.transform.zoom,ce,y.style.map.terrain&&ye.centroidVertexBuffer)}}function dv(y,i,c,p,g,_,C){const T=y.context,k=T.gl,R=c.fbo;if(!R)return;const z=y.useProgram("hillshade"),L=y.style.map.terrain&&y.style.map.terrain.getTerrainData(i);T.activeTexture.set(k.TEXTURE0),k.bindTexture(k.TEXTURE_2D,R.colorAttachment.get()),z.draw(T,k.TRIANGLES,g,_,C,wn.disabled,((G,te,ee,ie)=>{const Y=ee.paint.get("hillshade-shadow-color"),ye=ee.paint.get("hillshade-highlight-color"),Te=ee.paint.get("hillshade-accent-color");let ce=ee.paint.get("hillshade-illumination-direction")*(Math.PI/180);ee.paint.get("hillshade-illumination-anchor")==="viewport"&&(ce-=G.transform.angle);const ve=!G.options.moving;return{u_matrix:ie?ie.posMatrix:G.transform.calculatePosMatrix(te.tileID.toUnwrapped(),ve),u_image:0,u_latrange:ph(0,te.tileID),u_light:[ee.paint.get("hillshade-exaggeration"),ce],u_shadow:Y,u_highlight:ye,u_accent:Te}})(y,c,p,L?i:null),L,p.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments)}function Mh(y,i,c,p,g,_){const C=y.context,T=C.gl,k=i.dem;if(k&&k.data){const R=k.dim,z=k.stride,L=k.getPixels();if(C.activeTexture.set(T.TEXTURE1),C.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||y.getTileTexture(z),i.demTexture){const te=i.demTexture;te.update(L,{premultiply:!1}),te.bind(T.NEAREST,T.CLAMP_TO_EDGE)}else i.demTexture=new ze(C,L,T.RGBA,{premultiply:!1}),i.demTexture.bind(T.NEAREST,T.CLAMP_TO_EDGE);C.activeTexture.set(T.TEXTURE0);let G=i.fbo;if(!G){const te=new ze(C,{width:R,height:R,data:null},T.RGBA);te.bind(T.LINEAR,T.CLAMP_TO_EDGE),G=i.fbo=C.createFramebuffer(R,R,!0,!1),G.colorAttachment.set(te.texture)}C.bindFramebuffer.set(G.framebuffer),C.viewport.set([0,0,R,R]),y.useProgram("hillshadePrepare").draw(C,T.TRIANGLES,p,g,_,wn.disabled,((te,ee)=>{const ie=ee.stride,Y=a.Z();return a.aS(Y,0,a.N,-a.N,0,0,1),a.$(Y,Y,[0,-a.N,0]),{u_matrix:Y,u_image:1,u_dimension:[ie,ie],u_zoom:te.overscaledZ,u_unpack:ee.getUnpackVector()}})(i.tileID,k),null,c.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments),i.needsHillshadePrepare=!1}}function fv(y,i,c,p,g,_){const C=p.paint.get("raster-fade-duration");if(!_&&C>0){const T=a.h.now(),k=(T-y.timeAdded)/C,R=i?(T-i.timeAdded)/C:-1,z=c.getSource(),L=g.coveringZoomLevel({tileSize:z.tileSize,roundZoom:z.roundZoom}),G=!i||Math.abs(i.tileID.overscaledZ-L)>Math.abs(y.tileID.overscaledZ-L),te=G&&y.refreshedUponExpiration?1:a.ad(G?k:1-R,0,1);return y.refreshedUponExpiration&&k>=1&&(y.refreshedUponExpiration=!1),i?{opacity:1,mix:1-te}:{opacity:te,mix:0}}return{opacity:1,mix:0}}const sp=new a.aT(1,0,0,1),$u=new a.aT(0,1,0,1),Rh=new a.aT(0,0,1,1),op=new a.aT(1,0,1,1),ap=new a.aT(0,1,1,1);function Il(y,i,c,p){Uu(y,0,i+c/2,y.transform.width,c,p)}function ju(y,i,c,p){Uu(y,i-c/2,0,c,y.transform.height,p)}function Uu(y,i,c,p,g,_){const C=y.context,T=C.gl;T.enable(T.SCISSOR_TEST),T.scissor(i*y.pixelRatio,c*y.pixelRatio,p*y.pixelRatio,g*y.pixelRatio),C.clear({color:_}),T.disable(T.SCISSOR_TEST)}function lp(y,i,c){const p=y.context,g=p.gl,_=c.posMatrix,C=y.useProgram("debug"),T=Gt.disabled,k=Tn.disabled,R=y.colorModeForRenderPass(),z="$debug",L=y.style.map.terrain&&y.style.map.terrain.getTerrainData(c);p.activeTexture.set(g.TEXTURE0);const G=i.getTileByID(c.key).latestRawTileData,te=Math.floor((G&&G.byteLength||0)/1024),ee=i.getTile(c).tileSize,ie=512/Math.min(ee,512)*(c.overscaledZ/y.transform.zoom)*.5;let Y=c.canonical.toString();c.overscaledZ!==c.canonical.z&&(Y+=` => ${c.overscaledZ}`),function(ye,Te){ye.initDebugOverlayCanvas();const ce=ye.debugOverlayCanvas,ve=ye.context.gl,Pe=ye.debugOverlayCanvas.getContext("2d");Pe.clearRect(0,0,ce.width,ce.height),Pe.shadowColor="white",Pe.shadowBlur=2,Pe.lineWidth=1.5,Pe.strokeStyle="white",Pe.textBaseline="top",Pe.font="bold 36px Open Sans, sans-serif",Pe.fillText(Te,5,5),Pe.strokeText(Te,5,5),ye.debugOverlayTexture.update(ce),ye.debugOverlayTexture.bind(ve.LINEAR,ve.CLAMP_TO_EDGE)}(y,`${Y} ${te}kB`),C.draw(p,g.TRIANGLES,T,k,Cn.alphaBlended,wn.disabled,Cl(_,a.aT.transparent,ie),null,z,y.debugBuffer,y.quadTriangleIndexBuffer,y.debugSegments),C.draw(p,g.LINE_STRIP,T,k,R,wn.disabled,Cl(_,a.aT.red),L,z,y.debugBuffer,y.tileBorderIndexBuffer,y.debugSegments)}function In(y,i,c){const p=y.context,g=p.gl,_=y.colorModeForRenderPass(),C=new Gt(g.LEQUAL,Gt.ReadWrite,y.depthRangeFor3D),T=y.useProgram("terrain"),k=i.getTerrainMesh();p.bindFramebuffer.set(null),p.viewport.set([0,0,y.width,y.height]);for(const R of c){const z=y.renderToTexture.getTexture(R),L=i.getTerrainData(R.tileID);p.activeTexture.set(g.TEXTURE0),g.bindTexture(g.TEXTURE_2D,z.texture);const G={u_matrix:y.transform.calculatePosMatrix(R.tileID.toUnwrapped()),u_texture:0,u_ele_delta:i.getMeshFrameDelta(y.transform.zoom)};T.draw(p,g.TRIANGLES,C,Tn.disabled,_,wn.backCCW,G,L,"terrain",k.vertexBuffer,k.indexBuffer,k.segments)}}class Do{constructor(i,c){this.context=new hv(i),this.transform=c,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:a.Z(),renderTime:0},this.setup(),this.numSublayers=tt.maxUnderzooming+tt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new bu}resize(i,c,p){if(this.width=Math.floor(i*p),this.height=Math.floor(c*p),this.pixelRatio=p,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const g of this.style._order)this.style._layers[g].resize()}setup(){const i=this.context,c=new a.a_;c.emplaceBack(0,0),c.emplaceBack(a.N,0),c.emplaceBack(0,a.N),c.emplaceBack(a.N,a.N),this.tileExtentBuffer=i.createVertexBuffer(c,Su.members),this.tileExtentSegments=a.S.simpleSegment(0,0,4,2);const p=new a.a_;p.emplaceBack(0,0),p.emplaceBack(a.N,0),p.emplaceBack(0,a.N),p.emplaceBack(a.N,a.N),this.debugBuffer=i.createVertexBuffer(p,Su.members),this.debugSegments=a.S.simpleSegment(0,0,4,5);const g=new a.V;g.emplaceBack(0,0,0,0),g.emplaceBack(a.N,0,a.N,0),g.emplaceBack(0,a.N,0,a.N),g.emplaceBack(a.N,a.N,a.N,a.N),this.rasterBoundsBuffer=i.createVertexBuffer(g,Zr.members),this.rasterBoundsSegments=a.S.simpleSegment(0,0,4,2);const _=new a.a_;_.emplaceBack(0,0),_.emplaceBack(1,0),_.emplaceBack(0,1),_.emplaceBack(1,1),this.viewportBuffer=i.createVertexBuffer(_,Su.members),this.viewportSegments=a.S.simpleSegment(0,0,4,2);const C=new a.a$;C.emplaceBack(0),C.emplaceBack(1),C.emplaceBack(3),C.emplaceBack(2),C.emplaceBack(0),this.tileBorderIndexBuffer=i.createIndexBuffer(C);const T=new a.b0;T.emplaceBack(0,1,2),T.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=i.createIndexBuffer(T);const k=this.context.gl;this.stencilClearMode=new Tn({func:k.ALWAYS,mask:0},0,255,k.ZERO,k.ZERO,k.ZERO)}clearStencil(){const i=this.context,c=i.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const p=a.Z();a.aS(p,0,this.width,this.height,0,0,1),a.a0(p,p,[c.drawingBufferWidth,c.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(i,c.TRIANGLES,Gt.disabled,this.stencilClearMode,Cn.disabled,wn.disabled,Zf(p),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(i,c){if(this.currentStencilSource===i.source||!i.isTileClipped()||!c||!c.length)return;this.currentStencilSource=i.source;const p=this.context,g=p.gl;this.nextStencilID+c.length>256&&this.clearStencil(),p.setColorMode(Cn.disabled),p.setDepthMode(Gt.disabled);const _=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const C of c){const T=this._tileClippingMaskIDs[C.key]=this.nextStencilID++,k=this.style.map.terrain&&this.style.map.terrain.getTerrainData(C);_.draw(p,g.TRIANGLES,Gt.disabled,new Tn({func:g.ALWAYS,mask:0},T,255,g.KEEP,g.KEEP,g.REPLACE),Cn.disabled,wn.disabled,Zf(C.posMatrix),k,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const i=this.nextStencilID++,c=this.context.gl;return new Tn({func:c.NOTEQUAL,mask:255},i,255,c.KEEP,c.KEEP,c.REPLACE)}stencilModeForClipping(i){const c=this.context.gl;return new Tn({func:c.EQUAL,mask:255},this._tileClippingMaskIDs[i.key],0,c.KEEP,c.KEEP,c.REPLACE)}stencilConfigForOverlap(i){const c=this.context.gl,p=i.sort((C,T)=>T.overscaledZ-C.overscaledZ),g=p[p.length-1].overscaledZ,_=p[0].overscaledZ-g+1;if(_>1){this.currentStencilSource=void 0,this.nextStencilID+_>256&&this.clearStencil();const C={};for(let T=0;T<_;T++)C[T+g]=new Tn({func:c.GEQUAL,mask:255},T+this.nextStencilID,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID+=_,[C,p]}return[{[g]:Tn.disabled},p]}colorModeForRenderPass(){const i=this.context.gl;return this._showOverdrawInspector?new Cn([i.CONSTANT_COLOR,i.ONE],new a.aT(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Cn.unblended:Cn.alphaBlended}depthModeForSublayer(i,c,p){if(!this.opaquePassEnabledForLayer())return Gt.disabled;const g=1-((1+this.currentLayer)*this.numSublayers+i)*this.depthEpsilon;return new Gt(p||this.context.gl.LEQUAL,c,[g,g])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(i,c){this.style=i,this.options=c,this.lineAtlas=i.lineAtlas,this.imageManager=i.imageManager,this.glyphManager=i.glyphManager,this.symbolFadeChange=i.placement.symbolFadeChange(a.h.now()),this.imageManager.beginFrame();const p=this.style._order,g=this.style.sourceCaches,_={},C={},T={};for(const k in g){const R=g[k];R.used&&R.prepare(this.context),_[k]=R.getVisibleCoordinates(),C[k]=_[k].slice().reverse(),T[k]=R.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let k=0;k<p.length;k++)if(this.style._layers[p[k]].is3D()){this.opaquePassCutoff=k;break}if(this.renderToTexture){this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0;const k=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!a.b1(this.terrainFacilitator.matrix,this.transform.projMatrix)||k.length)&&(a.b2(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(R,z){const L=R.context,G=L.gl,te=Cn.unblended,ee=new Gt(G.LEQUAL,Gt.ReadWrite,[0,1]),ie=z.getTerrainMesh(),Y=z.sourceCache.getRenderableTiles(),ye=R.useProgram("terrainDepth");L.bindFramebuffer.set(z.getFramebuffer("depth").framebuffer),L.viewport.set([0,0,R.width/devicePixelRatio,R.height/devicePixelRatio]),L.clear({color:a.aT.transparent,depth:1});for(const Te of Y){const ce=z.getTerrainData(Te.tileID),ve={u_matrix:R.transform.calculatePosMatrix(Te.tileID.toUnwrapped()),u_ele_delta:z.getMeshFrameDelta(R.transform.zoom)};ye.draw(L,G.TRIANGLES,ee,Tn.disabled,te,wn.backCCW,ve,ce,"terrain",ie.vertexBuffer,ie.indexBuffer,ie.segments)}L.bindFramebuffer.set(null),L.viewport.set([0,0,R.width,R.height])}(this,this.style.map.terrain),function(R,z){const L=R.context,G=L.gl,te=Cn.unblended,ee=new Gt(G.LEQUAL,Gt.ReadWrite,[0,1]),ie=z.getTerrainMesh(),Y=z.getCoordsTexture(),ye=z.sourceCache.getRenderableTiles(),Te=R.useProgram("terrainCoords");L.bindFramebuffer.set(z.getFramebuffer("coords").framebuffer),L.viewport.set([0,0,R.width/devicePixelRatio,R.height/devicePixelRatio]),L.clear({color:a.aT.transparent,depth:1}),z.coordsIndex=[];for(const ce of ye){const ve=z.getTerrainData(ce.tileID);L.activeTexture.set(G.TEXTURE0),G.bindTexture(G.TEXTURE_2D,Y.texture);const Pe={u_matrix:R.transform.calculatePosMatrix(ce.tileID.toUnwrapped()),u_terrain_coords_id:(255-z.coordsIndex.length)/255,u_texture:0,u_ele_delta:z.getMeshFrameDelta(R.transform.zoom)};Te.draw(L,G.TRIANGLES,ee,Tn.disabled,te,wn.backCCW,Pe,ve,"terrain",ie.vertexBuffer,ie.indexBuffer,ie.segments),z.coordsIndex.push(ce.tileID.key)}L.bindFramebuffer.set(null),L.viewport.set([0,0,R.width,R.height])}(this,this.style.map.terrain))}this.renderPass="offscreen";for(const k of p){const R=this.style._layers[k];if(!R.hasOffscreenPass()||R.isHidden(this.transform.zoom))continue;const z=C[R.source];(R.type==="custom"||z.length)&&this.renderLayer(this,g[R.source],R,z)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:c.showOverdrawInspector?a.aT.black:a.aT.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=c.showOverdrawInspector,this.depthRangeFor3D=[0,1-(i._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=p.length-1;this.currentLayer>=0;this.currentLayer--){const k=this.style._layers[p[this.currentLayer]],R=g[k.source],z=_[k.source];this._renderTileClippingMasks(k,z),this.renderLayer(this,R,k,z)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<p.length;this.currentLayer++){const k=this.style._layers[p[this.currentLayer]],R=g[k.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(k))continue;const z=(k.type==="symbol"?T:C)[k.source];this._renderTileClippingMasks(k,_[k.source]),this.renderLayer(this,R,k,z)}if(this.options.showTileBoundaries){const k=function(R,z){let L=null;const G=Object.values(R._layers).flatMap(Y=>Y.source&&!Y.isHidden(z)?[R.sourceCaches[Y.source]]:[]),te=G.filter(Y=>Y.getSource().type==="vector"),ee=G.filter(Y=>Y.getSource().type!=="vector"),ie=Y=>{(!L||L.getSource().maxzoom<Y.getSource().maxzoom)&&(L=Y)};return te.forEach(Y=>ie(Y)),L||ee.forEach(Y=>ie(Y)),L}(this.style,this.transform.zoom);k&&function(R,z,L){for(let G=0;G<L.length;G++)lp(R,z,L[G])}(this,k,k.getVisibleCoordinates())}this.options.showPadding&&function(k){const R=k.transform.padding;Il(k,k.transform.height-(R.top||0),3,sp),Il(k,R.bottom||0,3,$u),ju(k,R.left||0,3,Rh),ju(k,k.transform.width-(R.right||0),3,op);const z=k.transform.centerPoint;(function(L,G,te,ee){Uu(L,G-1,te-10,2,20,ee),Uu(L,G-10,te-1,20,2,ee)})(k,z.x,k.transform.height-z.y,ap)}(this),this.context.setDefault()}renderLayer(i,c,p,g){if(!p.isHidden(this.transform.zoom)&&(p.type==="background"||p.type==="custom"||(g||[]).length))switch(this.id=p.id,p.type){case"symbol":(function(_,C,T,k,R){if(_.renderPass!=="translucent")return;const z=Tn.disabled,L=_.colorModeForRenderPass();(T._unevaluatedLayout.hasValue("text-variable-anchor")||T._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(G,te,ee,ie,Y,ye,Te){const ce=te.transform,ve=Y==="map",Pe=ye==="map";for(const Ae of G){const De=ie.getTile(Ae),Ve=De.getBucket(ee);if(!Ve||!Ve.text||!Ve.text.segments.get().length)continue;const Fe=a.ah(Ve.textSizeData,ce.zoom),Ue=me(De,1,te.transform.zoom),lt=Ze(Ae.posMatrix,Pe,ve,te.transform,Ue),$t=ee.layout.get("icon-text-fit")!=="none"&&Ve.hasIconData();if(Fe){const Je=Math.pow(2,ce.zoom-De.tileID.overscaledZ);Bu(Ve,ve,Pe,Te,ce,lt,Ae.posMatrix,Je,Fe,$t,te.style.map.terrain?(Tt,ht)=>te.style.map.terrain.getElevation(Ae,Tt,ht):null)}}}(k,_,T,C,T.layout.get("text-rotation-alignment"),T.layout.get("text-pitch-alignment"),R),T.paint.get("icon-opacity").constantOr(1)!==0&&Vu(_,C,T,k,!1,T.paint.get("icon-translate"),T.paint.get("icon-translate-anchor"),T.layout.get("icon-rotation-alignment"),T.layout.get("icon-pitch-alignment"),T.layout.get("icon-keep-upright"),z,L),T.paint.get("text-opacity").constantOr(1)!==0&&Vu(_,C,T,k,!0,T.paint.get("text-translate"),T.paint.get("text-translate-anchor"),T.layout.get("text-rotation-alignment"),T.layout.get("text-pitch-alignment"),T.layout.get("text-keep-upright"),z,L),C.map.showCollisionBoxes&&(ip(_,C,T,k,T.paint.get("text-translate"),T.paint.get("text-translate-anchor"),!0),ip(_,C,T,k,T.paint.get("icon-translate"),T.paint.get("icon-translate-anchor"),!1))})(i,c,p,g,this.style.placement.variableOffsets);break;case"circle":(function(_,C,T,k){if(_.renderPass!=="translucent")return;const R=T.paint.get("circle-opacity"),z=T.paint.get("circle-stroke-width"),L=T.paint.get("circle-stroke-opacity"),G=!T.layout.get("circle-sort-key").isConstant();if(R.constantOr(1)===0&&(z.constantOr(1)===0||L.constantOr(1)===0))return;const te=_.context,ee=te.gl,ie=_.depthModeForSublayer(0,Gt.ReadOnly),Y=Tn.disabled,ye=_.colorModeForRenderPass(),Te=[];for(let ce=0;ce<k.length;ce++){const ve=k[ce],Pe=C.getTile(ve),Ae=Pe.getBucket(T);if(!Ae)continue;const De=Ae.programConfigurations.get(T.id),Ve=_.useProgram("circle",De),Fe=Ae.layoutVertexBuffer,Ue=Ae.indexBuffer,lt=_.style.map.terrain&&_.style.map.terrain.getTerrainData(ve),$t={programConfiguration:De,program:Ve,layoutVertexBuffer:Fe,indexBuffer:Ue,uniformValues:oo(_,ve,Pe,T),terrainData:lt};if(G){const Je=Ae.segments.get();for(const Tt of Je)Te.push({segments:new a.S([Tt]),sortKey:Tt.sortKey,state:$t})}else Te.push({segments:Ae.segments,sortKey:0,state:$t})}G&&Te.sort((ce,ve)=>ce.sortKey-ve.sortKey);for(const ce of Te){const{programConfiguration:ve,program:Pe,layoutVertexBuffer:Ae,indexBuffer:De,uniformValues:Ve,terrainData:Fe}=ce.state;Pe.draw(te,ee.TRIANGLES,ie,Y,ye,wn.disabled,Ve,Fe,T.id,Ae,De,ce.segments,T.paint,_.transform.zoom,ve)}})(i,c,p,g);break;case"heatmap":(function(_,C,T,k){if(T.paint.get("heatmap-opacity")!==0)if(_.renderPass==="offscreen"){const R=_.context,z=R.gl,L=Tn.disabled,G=new Cn([z.ONE,z.ONE],a.aT.transparent,[!0,!0,!0,!0]);(function(te,ee,ie){const Y=te.gl;te.activeTexture.set(Y.TEXTURE1),te.viewport.set([0,0,ee.width/4,ee.height/4]);let ye=ie.heatmapFbo;if(ye)Y.bindTexture(Y.TEXTURE_2D,ye.colorAttachment.get()),te.bindFramebuffer.set(ye.framebuffer);else{const Te=Y.createTexture();Y.bindTexture(Y.TEXTURE_2D,Te),Y.texParameteri(Y.TEXTURE_2D,Y.TEXTURE_WRAP_S,Y.CLAMP_TO_EDGE),Y.texParameteri(Y.TEXTURE_2D,Y.TEXTURE_WRAP_T,Y.CLAMP_TO_EDGE),Y.texParameteri(Y.TEXTURE_2D,Y.TEXTURE_MIN_FILTER,Y.LINEAR),Y.texParameteri(Y.TEXTURE_2D,Y.TEXTURE_MAG_FILTER,Y.LINEAR),ye=ie.heatmapFbo=te.createFramebuffer(ee.width/4,ee.height/4,!1,!1),function(ce,ve,Pe,Ae){var De,Ve;const Fe=ce.gl,Ue=(De=ce.HALF_FLOAT)!==null&&De!==void 0?De:Fe.UNSIGNED_BYTE,lt=(Ve=ce.RGBA16F)!==null&&Ve!==void 0?Ve:Fe.RGBA;Fe.texImage2D(Fe.TEXTURE_2D,0,lt,ve.width/4,ve.height/4,0,Fe.RGBA,Ue,null),Ae.colorAttachment.set(Pe)}(te,ee,Te,ye)}})(R,_,T),R.clear({color:a.aT.transparent});for(let te=0;te<k.length;te++){const ee=k[te];if(C.hasRenderableParent(ee))continue;const ie=C.getTile(ee),Y=ie.getBucket(T);if(!Y)continue;const ye=Y.programConfigurations.get(T.id),Te=_.useProgram("heatmap",ye),{zoom:ce}=_.transform;Te.draw(R,z.TRIANGLES,Gt.disabled,L,G,wn.disabled,rv(ee.posMatrix,ie,ce,T.paint.get("heatmap-intensity")),null,T.id,Y.layoutVertexBuffer,Y.indexBuffer,Y.segments,T.paint,_.transform.zoom,ye)}R.viewport.set([0,0,_.width,_.height])}else _.renderPass==="translucent"&&(_.context.setColorMode(_.colorModeForRenderPass()),function(R,z){const L=R.context,G=L.gl,te=z.heatmapFbo;if(!te)return;L.activeTexture.set(G.TEXTURE0),G.bindTexture(G.TEXTURE_2D,te.colorAttachment.get()),L.activeTexture.set(G.TEXTURE1);let ee=z.colorRampTexture;ee||(ee=z.colorRampTexture=new ze(L,z.colorRamp,G.RGBA)),ee.bind(G.LINEAR,G.CLAMP_TO_EDGE),R.useProgram("heatmapTexture").draw(L,G.TRIANGLES,Gt.disabled,Tn.disabled,R.colorModeForRenderPass(),wn.disabled,((ie,Y,ye,Te)=>{const ce=a.Z();a.aS(ce,0,ie.width,ie.height,0,0,1);const ve=ie.context.gl;return{u_matrix:ce,u_world:[ve.drawingBufferWidth,ve.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Y.paint.get("heatmap-opacity")}})(R,z),null,z.id,R.viewportBuffer,R.quadTriangleIndexBuffer,R.viewportSegments,z.paint,R.transform.zoom)}(_,T))})(i,c,p,g);break;case"line":(function(_,C,T,k){if(_.renderPass!=="translucent")return;const R=T.paint.get("line-opacity"),z=T.paint.get("line-width");if(R.constantOr(1)===0||z.constantOr(1)===0)return;const L=_.depthModeForSublayer(0,Gt.ReadOnly),G=_.colorModeForRenderPass(),te=T.paint.get("line-dasharray"),ee=T.paint.get("line-pattern"),ie=ee.constantOr(1),Y=T.paint.get("line-gradient"),ye=T.getCrossfadeParameters(),Te=ie?"linePattern":te?"lineSDF":Y?"lineGradient":"line",ce=_.context,ve=ce.gl;let Pe=!0;for(const Ae of k){const De=C.getTile(Ae);if(ie&&!De.patternsLoaded())continue;const Ve=De.getBucket(T);if(!Ve)continue;const Fe=Ve.programConfigurations.get(T.id),Ue=_.context.program.get(),lt=_.useProgram(Te,Fe),$t=Pe||lt.program!==Ue,Je=_.style.map.terrain&&_.style.map.terrain.getTerrainData(Ae),Tt=ee.constantOr(null);if(Tt&&De.imageAtlas){const Bt=De.imageAtlas,Lt=Bt.patternPositions[Tt.to.toString()],jt=Bt.patternPositions[Tt.from.toString()];Lt&&jt&&Fe.setConstantPatternPositions(Lt,jt)}const ht=Je?Ae:null,on=ie?iv(_,De,T,ye,ht):te?Hf(_,De,T,te,ye,ht):Y?Wf(_,De,T,Ve.lineClipsArray.length,ht):mh(_,De,T,ht);if(ie)ce.activeTexture.set(ve.TEXTURE0),De.imageAtlasTexture.bind(ve.LINEAR,ve.CLAMP_TO_EDGE),Fe.updatePaintBuffers(ye);else if(te&&($t||_.lineAtlas.dirty))ce.activeTexture.set(ve.TEXTURE0),_.lineAtlas.bind(ce);else if(Y){const Bt=Ve.gradients[T.id];let Lt=Bt.texture;if(T.gradientVersion!==Bt.version){let jt=256;if(T.stepInterpolant){const On=C.getSource().maxzoom,cn=Ae.canonical.z===On?Math.ceil(1<<_.transform.maxZoom-Ae.canonical.z):1;jt=a.ad(a.aY(Ve.maxLineLength/a.N*1024*cn),256,ce.maxTextureSize)}Bt.gradient=a.aZ({expression:T.gradientExpression(),evaluationKey:"lineProgress",resolution:jt,image:Bt.gradient||void 0,clips:Ve.lineClipsArray}),Bt.texture?Bt.texture.update(Bt.gradient):Bt.texture=new ze(ce,Bt.gradient,ve.RGBA),Bt.version=T.gradientVersion,Lt=Bt.texture}ce.activeTexture.set(ve.TEXTURE0),Lt.bind(T.stepInterpolant?ve.NEAREST:ve.LINEAR,ve.CLAMP_TO_EDGE)}lt.draw(ce,ve.TRIANGLES,L,_.stencilModeForClipping(Ae),G,wn.disabled,on,Je,T.id,Ve.layoutVertexBuffer,Ve.indexBuffer,Ve.segments,T.paint,_.transform.zoom,Fe,Ve.layoutVertexBuffer2),Pe=!1}})(i,c,p,g);break;case"fill":(function(_,C,T,k){const R=T.paint.get("fill-color"),z=T.paint.get("fill-opacity");if(z.constantOr(1)===0)return;const L=_.colorModeForRenderPass(),G=T.paint.get("fill-pattern"),te=_.opaquePassEnabledForLayer()&&!G.constantOr(1)&&R.constantOr(a.aT.transparent).a===1&&z.constantOr(0)===1?"opaque":"translucent";if(_.renderPass===te){const ee=_.depthModeForSublayer(1,_.renderPass==="opaque"?Gt.ReadWrite:Gt.ReadOnly);Al(_,C,T,k,ee,L,!1)}if(_.renderPass==="translucent"&&T.paint.get("fill-antialias")){const ee=_.depthModeForSublayer(T.getPaintProperty("fill-outline-color")?2:0,Gt.ReadOnly);Al(_,C,T,k,ee,L,!0)}})(i,c,p,g);break;case"fill-extrusion":(function(_,C,T,k){const R=T.paint.get("fill-extrusion-opacity");if(R!==0&&_.renderPass==="translucent"){const z=new Gt(_.context.gl.LEQUAL,Gt.ReadWrite,_.depthRangeFor3D);if(R!==1||T.paint.get("fill-extrusion-pattern").constantOr(1))kl(_,C,T,k,z,Tn.disabled,Cn.disabled),kl(_,C,T,k,z,_.stencilModeFor3D(),_.colorModeForRenderPass());else{const L=_.colorModeForRenderPass();kl(_,C,T,k,z,Tn.disabled,L)}}})(i,c,p,g);break;case"hillshade":(function(_,C,T,k){if(_.renderPass!=="offscreen"&&_.renderPass!=="translucent")return;const R=_.context,z=_.depthModeForSublayer(0,Gt.ReadOnly),L=_.colorModeForRenderPass(),[G,te]=_.renderPass==="translucent"?_.stencilConfigForOverlap(k):[{},k];for(const ee of te){const ie=C.getTile(ee);ie.needsHillshadePrepare!==void 0&&ie.needsHillshadePrepare&&_.renderPass==="offscreen"?Mh(_,ie,T,z,Tn.disabled,L):_.renderPass==="translucent"&&dv(_,ee,ie,T,z,G[ee.overscaledZ],L)}R.viewport.set([0,0,_.width,_.height])})(i,c,p,g);break;case"raster":(function(_,C,T,k){if(_.renderPass!=="translucent"||T.paint.get("raster-opacity")===0||!k.length)return;const R=_.context,z=R.gl,L=C.getSource(),G=_.useProgram("raster"),te=_.colorModeForRenderPass(),[ee,ie]=L instanceof Wr?[{},k]:_.stencilConfigForOverlap(k),Y=ie[ie.length-1].overscaledZ,ye=!_.options.moving;for(const Te of ie){const ce=_.depthModeForSublayer(Te.overscaledZ-Y,T.paint.get("raster-opacity")===1?Gt.ReadWrite:Gt.ReadOnly,z.LESS),ve=C.getTile(Te);ve.registerFadeDuration(T.paint.get("raster-fade-duration"));const Pe=C.findLoadedParent(Te,0),Ae=fv(ve,Pe,C,T,_.transform,_.style.map.terrain);let De,Ve;const Fe=T.paint.get("raster-resampling")==="nearest"?z.NEAREST:z.LINEAR;R.activeTexture.set(z.TEXTURE0),ve.texture.bind(Fe,z.CLAMP_TO_EDGE,z.LINEAR_MIPMAP_NEAREST),R.activeTexture.set(z.TEXTURE1),Pe?(Pe.texture.bind(Fe,z.CLAMP_TO_EDGE,z.LINEAR_MIPMAP_NEAREST),De=Math.pow(2,Pe.tileID.overscaledZ-ve.tileID.overscaledZ),Ve=[ve.tileID.canonical.x*De%1,ve.tileID.canonical.y*De%1]):ve.texture.bind(Fe,z.CLAMP_TO_EDGE,z.LINEAR_MIPMAP_NEAREST);const Ue=_.style.map.terrain&&_.style.map.terrain.getTerrainData(Te),lt=Ue?Te:null,$t=lt?lt.posMatrix:_.transform.calculatePosMatrix(Te.toUnwrapped(),ye),Je=Xf($t,Ve||[0,0],De||1,Ae,T);L instanceof Wr?G.draw(R,z.TRIANGLES,ce,Tn.disabled,te,wn.disabled,Je,Ue,T.id,L.boundsBuffer,_.quadTriangleIndexBuffer,L.boundsSegments):G.draw(R,z.TRIANGLES,ce,ee[Te.overscaledZ],te,wn.disabled,Je,Ue,T.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments)}})(i,c,p,g);break;case"background":(function(_,C,T,k){const R=T.paint.get("background-color"),z=T.paint.get("background-opacity");if(z===0)return;const L=_.context,G=L.gl,te=_.transform,ee=te.tileSize,ie=T.paint.get("background-pattern");if(_.isPatternMissing(ie))return;const Y=!ie&&R.a===1&&z===1&&_.opaquePassEnabledForLayer()?"opaque":"translucent";if(_.renderPass!==Y)return;const ye=Tn.disabled,Te=_.depthModeForSublayer(0,Y==="opaque"?Gt.ReadWrite:Gt.ReadOnly),ce=_.colorModeForRenderPass(),ve=_.useProgram(ie?"backgroundPattern":"background"),Pe=k||te.coveringTiles({tileSize:ee,terrain:_.style.map.terrain});ie&&(L.activeTexture.set(G.TEXTURE0),_.imageManager.bind(_.context));const Ae=T.getCrossfadeParameters();for(const De of Pe){const Ve=k?De.posMatrix:_.transform.calculatePosMatrix(De.toUnwrapped()),Fe=ie?zi(Ve,z,_,ie,{tileID:De,tileSize:ee},Ae):Au(Ve,z,R),Ue=_.style.map.terrain&&_.style.map.terrain.getTerrainData(De);ve.draw(L,G.TRIANGLES,Te,ye,ce,wn.disabled,Fe,Ue,T.id,_.tileExtentBuffer,_.quadTriangleIndexBuffer,_.tileExtentSegments)}})(i,0,p,g);break;case"custom":(function(_,C,T){const k=_.context,R=T.implementation;if(_.renderPass==="offscreen"){const z=R.prerender;z&&(_.setCustomLayerDefaults(),k.setColorMode(_.colorModeForRenderPass()),z.call(R,k.gl,_.transform.customLayerMatrix()),k.setDirty(),_.setBaseState())}else if(_.renderPass==="translucent"){_.setCustomLayerDefaults(),k.setColorMode(_.colorModeForRenderPass()),k.setStencilMode(Tn.disabled);const z=R.renderingMode==="3d"?new Gt(_.context.gl.LEQUAL,Gt.ReadWrite,_.depthRangeFor3D):_.depthModeForSublayer(0,Gt.ReadOnly);k.setDepthMode(z),R.render(k.gl,_.transform.customLayerMatrix()),k.setDirty(),_.setBaseState(),k.bindFramebuffer.set(null)}})(i,0,p)}}translatePosMatrix(i,c,p,g,_){if(!p[0]&&!p[1])return i;const C=_?g==="map"?this.transform.angle:0:g==="viewport"?-this.transform.angle:0;if(C){const R=Math.sin(C),z=Math.cos(C);p=[p[0]*z-p[1]*R,p[0]*R+p[1]*z]}const T=[_?p[0]:me(c,p[0],this.transform.zoom),_?p[1]:me(c,p[1],this.transform.zoom),0],k=new Float32Array(16);return a.$(k,i,T),k}saveTileTexture(i){const c=this._tileTextures[i.size[0]];c?c.push(i):this._tileTextures[i.size[0]]=[i]}getTileTexture(i){const c=this._tileTextures[i];return c&&c.length>0?c.pop():null}isPatternMissing(i){if(!i)return!1;if(!i.from||!i.to)return!0;const c=this.imageManager.getPattern(i.from.toString()),p=this.imageManager.getPattern(i.to.toString());return!c||!p}useProgram(i,c){this.cache=this.cache||{};const p=i+(c?c.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[p]||(this.cache[p]=new Cu(this.context,Sn[i],c,ku[i],this._showOverdrawInspector,this.style.map.terrain)),this.cache[p]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const i=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(i.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new ze(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:i,drawingBufferHeight:c}=this.context.gl;return this.width!==i||this.height!==c}}class Hr{constructor(i,c){this.points=i,this.planes=c}static fromInvProjectionMatrix(i,c,p){const g=Math.pow(2,p),_=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(T=>{const k=1/(T=a.ag([],T,i))[3]/c*g;return a.b3(T,T,[k,k,1/T[3],k])}),C=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(T=>{const k=function(G,te){var ee=te[0],ie=te[1],Y=te[2],ye=ee*ee+ie*ie+Y*Y;return ye>0&&(ye=1/Math.sqrt(ye)),G[0]=te[0]*ye,G[1]=te[1]*ye,G[2]=te[2]*ye,G}([],function(G,te,ee){var ie=te[0],Y=te[1],ye=te[2],Te=ee[0],ce=ee[1],ve=ee[2];return G[0]=Y*ve-ye*ce,G[1]=ye*Te-ie*ve,G[2]=ie*ce-Y*Te,G}([],Ce([],_[T[0]],_[T[1]]),Ce([],_[T[2]],_[T[1]]))),R=-((z=k)[0]*(L=_[T[1]])[0]+z[1]*L[1]+z[2]*L[2]);var z,L;return k.concat(R)});return new Hr(_,C)}}class Sa{constructor(i,c){this.min=i,this.max=c,this.center=function(p,g,_){return p[0]=.5*g[0],p[1]=.5*g[1],p[2]=.5*g[2],p}([],function(p,g,_){return p[0]=g[0]+_[0],p[1]=g[1]+_[1],p[2]=g[2]+_[2],p}([],this.min,this.max))}quadrant(i){const c=[i%2==0,i<2],p=ne(this.min),g=ne(this.max);for(let _=0;_<c.length;_++)p[_]=c[_]?this.min[_]:this.center[_],g[_]=c[_]?this.center[_]:this.max[_];return g[2]=this.max[2],new Sa(p,g)}distanceX(i){return Math.max(Math.min(this.max[0],i[0]),this.min[0])-i[0]}distanceY(i){return Math.max(Math.min(this.max[1],i[1]),this.min[1])-i[1]}intersects(i){const c=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let p=!0;for(let g=0;g<i.planes.length;g++){const _=i.planes[g];let C=0;for(let T=0;T<c.length;T++)a.b4(_,c[T])>=0&&C++;if(C===0)return 0;C!==c.length&&(p=!1)}if(p)return 2;for(let g=0;g<3;g++){let _=Number.MAX_VALUE,C=-Number.MAX_VALUE;for(let T=0;T<i.points.length;T++){const k=i.points[T][g]-this.min[g];_=Math.min(_,k),C=Math.max(C,k)}if(C<0||_>this.max[g]-this.min[g])return 0}return 1}}class Ml{constructor(i=0,c=0,p=0,g=0){if(isNaN(i)||i<0||isNaN(c)||c<0||isNaN(p)||p<0||isNaN(g)||g<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=i,this.bottom=c,this.left=p,this.right=g}interpolate(i,c,p){return c.top!=null&&i.top!=null&&(this.top=a.B.number(i.top,c.top,p)),c.bottom!=null&&i.bottom!=null&&(this.bottom=a.B.number(i.bottom,c.bottom,p)),c.left!=null&&i.left!=null&&(this.left=a.B.number(i.left,c.left,p)),c.right!=null&&i.right!=null&&(this.right=a.B.number(i.right,c.right,p)),this}getCenter(i,c){const p=a.ad((this.left+i-this.right)/2,0,i),g=a.ad((this.top+c-this.bottom)/2,0,c);return new a.P(p,g)}equals(i){return this.top===i.top&&this.bottom===i.bottom&&this.left===i.left&&this.right===i.right}clone(){return new Ml(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class qu{constructor(i,c,p,g,_){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=_===void 0||!!_,this._minZoom=i||0,this._maxZoom=c||22,this._minPitch=p??0,this._maxPitch=g??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new a.L(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Ml,this._posMatrixCache={},this._alignedPosMatrixCache={},this._minEleveationForCurrentTile=0}clone(){const i=new qu(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return i.apply(this),i}apply(i){this.tileSize=i.tileSize,this.latRange=i.latRange,this.width=i.width,this.height=i.height,this._center=i._center,this._elevation=i._elevation,this._minEleveationForCurrentTile=i._minEleveationForCurrentTile,this.zoom=i.zoom,this.angle=i.angle,this._fov=i._fov,this._pitch=i._pitch,this._unmodified=i._unmodified,this._edgeInsets=i._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(i){this._minZoom!==i&&(this._minZoom=i,this.zoom=Math.max(this.zoom,i))}get maxZoom(){return this._maxZoom}set maxZoom(i){this._maxZoom!==i&&(this._maxZoom=i,this.zoom=Math.min(this.zoom,i))}get minPitch(){return this._minPitch}set minPitch(i){this._minPitch!==i&&(this._minPitch=i,this.pitch=Math.max(this.pitch,i))}get maxPitch(){return this._maxPitch}set maxPitch(i){this._maxPitch!==i&&(this._maxPitch=i,this.pitch=Math.min(this.pitch,i))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(i){i===void 0?i=!0:i===null&&(i=!1),this._renderWorldCopies=i}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new a.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(i){const c=-a.b5(i,-180,180)*Math.PI/180;this.angle!==c&&(this._unmodified=!1,this.angle=c,this._calcMatrices(),this.rotationMatrix=function(){var p=new a.A(4);return a.A!=Float32Array&&(p[1]=0,p[2]=0),p[0]=1,p[3]=1,p}(),function(p,g,_){var C=g[0],T=g[1],k=g[2],R=g[3],z=Math.sin(_),L=Math.cos(_);p[0]=C*L+k*z,p[1]=T*L+R*z,p[2]=C*-z+k*L,p[3]=T*-z+R*L}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(i){const c=a.ad(i,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==c&&(this._unmodified=!1,this._pitch=c,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(i){i=Math.max(.01,Math.min(60,i)),this._fov!==i&&(this._unmodified=!1,this._fov=i/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(i){const c=Math.min(Math.max(i,this.minZoom),this.maxZoom);this._zoom!==c&&(this._unmodified=!1,this._zoom=c,this.tileZoom=Math.max(0,Math.floor(c)),this.scale=this.zoomScale(c),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(i){i.lat===this._center.lat&&i.lng===this._center.lng||(this._unmodified=!1,this._center=i,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(i){i!==this._elevation&&(this._elevation=i,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(i){this._edgeInsets.equals(i)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,i,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(i){return this._edgeInsets.equals(i)}interpolatePadding(i,c,p){this._unmodified=!1,this._edgeInsets.interpolate(i,c,p),this._constrain(),this._calcMatrices()}coveringZoomLevel(i){const c=(i.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/i.tileSize));return Math.max(0,c)}getVisibleUnwrappedCoordinates(i){const c=[new a.b6(0,i)];if(this._renderWorldCopies){const p=this.pointCoordinate(new a.P(0,0)),g=this.pointCoordinate(new a.P(this.width,0)),_=this.pointCoordinate(new a.P(this.width,this.height)),C=this.pointCoordinate(new a.P(0,this.height)),T=Math.floor(Math.min(p.x,g.x,_.x,C.x)),k=Math.floor(Math.max(p.x,g.x,_.x,C.x)),R=1;for(let z=T-R;z<=k+R;z++)z!==0&&c.push(new a.b6(z,i))}return c}coveringTiles(i){var c,p;let g=this.coveringZoomLevel(i);const _=g;if(i.minzoom!==void 0&&g<i.minzoom)return[];i.maxzoom!==void 0&&g>i.maxzoom&&(g=i.maxzoom);const C=this.pointCoordinate(this.getCameraPoint()),T=a.U.fromLngLat(this.center),k=Math.pow(2,g),R=[k*C.x,k*C.y,0],z=[k*T.x,k*T.y,0],L=Hr.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,g);let G=i.minzoom||0;!i.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(G=g);const te=i.terrain?2/Math.min(this.tileSize,i.tileSize)*this.tileSize:3,ee=ce=>({aabb:new Sa([ce*k,0,0],[(ce+1)*k,k,0]),zoom:0,x:0,y:0,wrap:ce,fullyVisible:!1}),ie=[],Y=[],ye=g,Te=i.reparseOverscaled?_:g;if(this._renderWorldCopies)for(let ce=1;ce<=3;ce++)ie.push(ee(-ce)),ie.push(ee(ce));for(ie.push(ee(0));ie.length>0;){const ce=ie.pop(),ve=ce.x,Pe=ce.y;let Ae=ce.fullyVisible;if(!Ae){const lt=ce.aabb.intersects(L);if(lt===0)continue;Ae=lt===2}const De=i.terrain?R:z,Ve=ce.aabb.distanceX(De),Fe=ce.aabb.distanceY(De),Ue=Math.max(Math.abs(Ve),Math.abs(Fe));if(ce.zoom===ye||Ue>te+(1<<ye-ce.zoom)-2&&ce.zoom>=G){const lt=ye-ce.zoom,$t=R[0]-.5-(ve<<lt),Je=R[1]-.5-(Pe<<lt);Y.push({tileID:new a.O(ce.zoom===ye?Te:ce.zoom,ce.wrap,ce.zoom,ve,Pe),distanceSq:Ie([z[0]-.5-ve,z[1]-.5-Pe]),tileDistanceToCamera:Math.sqrt($t*$t+Je*Je)})}else for(let lt=0;lt<4;lt++){const $t=(ve<<1)+lt%2,Je=(Pe<<1)+(lt>>1),Tt=ce.zoom+1;let ht=ce.aabb.quadrant(lt);if(i.terrain){const on=new a.O(Tt,ce.wrap,Tt,$t,Je),Bt=i.terrain.getMinMaxElevation(on),Lt=(c=Bt.minElevation)!==null&&c!==void 0?c:this.elevation,jt=(p=Bt.maxElevation)!==null&&p!==void 0?p:this.elevation;ht=new Sa([ht.min[0],ht.min[1],Lt],[ht.max[0],ht.max[1],jt])}ie.push({aabb:ht,zoom:Tt,x:$t,y:Je,wrap:ce.wrap,fullyVisible:Ae})}}return Y.sort((ce,ve)=>ce.distanceSq-ve.distanceSq).map(ce=>ce.tileID)}resize(i,c){this.width=i,this.height=c,this.pixelsToGLUnits=[2/i,-2/c],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(i){return Math.pow(2,i)}scaleZoom(i){return Math.log(i)/Math.LN2}project(i){const c=a.ad(i.lat,-this.maxValidLatitude,this.maxValidLatitude);return new a.P(a.G(i.lng)*this.worldSize,a.H(c)*this.worldSize)}unproject(i){return new a.U(i.x/this.worldSize,i.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(i){const c=this.pointLocation(this.centerPoint,i),p=i.getElevationForLngLatZoom(c,this.tileZoom);if(!(this.elevation-p))return;const g=this.getCameraPosition(),_=a.U.fromLngLat(g.lngLat,g.altitude),C=a.U.fromLngLat(c,p),T=_.x-C.x,k=_.y-C.y,R=_.z-C.z,z=Math.sqrt(T*T+k*k+R*R),L=this.scaleZoom(this.cameraToCenterDistance/z/this.tileSize);this._elevation=p,this._center=c,this.zoom=L}setLocationAtPoint(i,c){const p=this.pointCoordinate(c),g=this.pointCoordinate(this.centerPoint),_=this.locationCoordinate(i),C=new a.U(_.x-(p.x-g.x),_.y-(p.y-g.y));this.center=this.coordinateLocation(C),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(i,c){return c?this.coordinatePoint(this.locationCoordinate(i),c.getElevationForLngLatZoom(i,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(i))}pointLocation(i,c){return this.coordinateLocation(this.pointCoordinate(i,c))}locationCoordinate(i){return a.U.fromLngLat(i)}coordinateLocation(i){return i&&i.toLngLat()}pointCoordinate(i,c){if(c){const G=c.pointCoordinate(i);if(G!=null)return G}const p=[i.x,i.y,0,1],g=[i.x,i.y,1,1];a.ag(p,p,this.pixelMatrixInverse),a.ag(g,g,this.pixelMatrixInverse);const _=p[3],C=g[3],T=p[1]/_,k=g[1]/C,R=p[2]/_,z=g[2]/C,L=R===z?0:(0-R)/(z-R);return new a.U(a.B.number(p[0]/_,g[0]/C,L)/this.worldSize,a.B.number(T,k,L)/this.worldSize)}coordinatePoint(i,c=0,p=this.pixelMatrix){const g=[i.x*this.worldSize,i.y*this.worldSize,c,1];return a.ag(g,g,p),new a.P(g[0]/g[3],g[1]/g[3])}getBounds(){const i=Math.max(0,this.height/2-this.getHorizon());return new Rt().extend(this.pointLocation(new a.P(0,i))).extend(this.pointLocation(new a.P(this.width,i))).extend(this.pointLocation(new a.P(this.width,this.height))).extend(this.pointLocation(new a.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new Rt([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(i){i?(this.lngRange=[i.getWest(),i.getEast()],this.latRange=[i.getSouth(),i.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(i,c=!1){const p=i.key,g=c?this._alignedPosMatrixCache:this._posMatrixCache;if(g[p])return g[p];const _=i.canonical,C=this.worldSize/this.zoomScale(_.z),T=_.x+Math.pow(2,_.z)*i.wrap,k=a.ao(new Float64Array(16));return a.$(k,k,[T*C,_.y*C,0]),a.a0(k,k,[C/a.N,C/a.N,1]),a.a1(k,c?this.alignedProjMatrix:this.projMatrix,k),g[p]=new Float32Array(k),g[p]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let i,c,p,g,_=-90,C=90,T=-180,k=180;const R=this.size,z=this._unmodified;if(this.latRange){const te=this.latRange;_=a.H(te[1])*this.worldSize,C=a.H(te[0])*this.worldSize,i=C-_<R.y?R.y/(C-_):0}if(this.lngRange){const te=this.lngRange;T=a.b5(a.G(te[0])*this.worldSize,0,this.worldSize),k=a.b5(a.G(te[1])*this.worldSize,0,this.worldSize),k<T&&(k+=this.worldSize),c=k-T<R.x?R.x/(k-T):0}const L=this.point,G=Math.max(c||0,i||0);if(G)return this.center=this.unproject(new a.P(c?(k+T)/2:L.x,i?(C+_)/2:L.y)),this.zoom+=this.scaleZoom(G),this._unmodified=z,void(this._constraining=!1);if(this.latRange){const te=L.y,ee=R.y/2;te-ee<_&&(g=_+ee),te+ee>C&&(g=C-ee)}if(this.lngRange){const te=(T+k)/2,ee=a.b5(L.x,te-this.worldSize/2,te+this.worldSize/2),ie=R.x/2;ee-ie<T&&(p=T+ie),ee+ie>k&&(p=k-ie)}p===void 0&&g===void 0||(this.center=this.unproject(new a.P(p!==void 0?p:L.x,g!==void 0?g:L.y)).wrap()),this._unmodified=z,this._constraining=!1}_calcMatrices(){if(!this.height)return;const i=this.centerOffset,c=this.point.x,p=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=a.b7(1,this.center.lat)*this.worldSize;let g=a.ao(new Float64Array(16));a.a0(g,g,[this.width/2,-this.height/2,1]),a.$(g,g,[1,-1,0]),this.labelPlaneMatrix=g,g=a.ao(new Float64Array(16)),a.a0(g,g,[1,-1,1]),a.$(g,g,[-1,-1,0]),a.a0(g,g,[2/this.width,2/this.height,1]),this.glCoordMatrix=g;const _=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),C=Math.min(this.elevation,this._minEleveationForCurrentTile),T=_-C*this._pixelPerMeter/Math.cos(this._pitch),k=C<0?T:_,R=Math.PI/2+this._pitch,z=this._fov*(.5+i.y/this.height),L=Math.sin(z)*k/Math.sin(a.ad(Math.PI-R-z,.01,Math.PI-.01)),G=this.getHorizon(),te=2*Math.atan(G/this.cameraToCenterDistance)*(.5+i.y/(2*G)),ee=Math.sin(te)*k/Math.sin(a.ad(Math.PI-R-te,.01,Math.PI-.01)),ie=Math.min(L,ee),Y=1.01*(Math.cos(Math.PI/2-this._pitch)*ie+k),ye=this.height/50;g=new Float64Array(16),a.b8(g,this._fov,this.width/this.height,ye,Y),g[8]=2*-i.x/this.width,g[9]=2*i.y/this.height,a.a0(g,g,[1,-1,1]),a.$(g,g,[0,0,-this.cameraToCenterDistance]),a.b9(g,g,this._pitch),a.ae(g,g,this.angle),a.$(g,g,[-c,-p,0]),this.mercatorMatrix=a.a0([],g,[this.worldSize,this.worldSize,this.worldSize]),a.a0(g,g,[1,1,this._pixelPerMeter]),this.pixelMatrix=a.a1(new Float64Array(16),this.labelPlaneMatrix,g),a.$(g,g,[0,0,-this.elevation]),this.projMatrix=g,this.invProjMatrix=a.as([],g),this.pixelMatrix3D=a.a1(new Float64Array(16),this.labelPlaneMatrix,g);const Te=this.width%2/2,ce=this.height%2/2,ve=Math.cos(this.angle),Pe=Math.sin(this.angle),Ae=c-Math.round(c)+ve*Te+Pe*ce,De=p-Math.round(p)+ve*ce+Pe*Te,Ve=new Float64Array(g);if(a.$(Ve,Ve,[Ae>.5?Ae-1:Ae,De>.5?De-1:De,0]),this.alignedProjMatrix=Ve,g=a.as(new Float64Array(16),this.pixelMatrix),!g)throw new Error("failed to invert matrix");this.pixelMatrixInverse=g,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const i=this.pointCoordinate(new a.P(0,0)),c=[i.x*this.worldSize,i.y*this.worldSize,0,1];return a.ag(c,c,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const i=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.P(0,i))}getCameraQueryGeometry(i){const c=this.getCameraPoint();if(i.length===1)return[i[0],c];{let p=c.x,g=c.y,_=c.x,C=c.y;for(const T of i)p=Math.min(p,T.x),g=Math.min(g,T.y),_=Math.max(_,T.x),C=Math.max(C,T.y);return[new a.P(p,g),new a.P(_,g),new a.P(_,C),new a.P(p,C),new a.P(p,g)]}}}function zo(y,i){let c,p=!1,g=null,_=null;const C=()=>{g=null,p&&(y.apply(_,c),g=setTimeout(C,i),p=!1)};return(...T)=>(p=!0,_=this,c=T,g||C(),g)}class Rl{constructor(i){this._getCurrentHash=()=>{const c=window.location.hash.replace("#","");if(this._hashName){let p;return c.split("&").map(g=>g.split("=")).forEach(g=>{g[0]===this._hashName&&(p=g)}),(p&&p[1]||"").split("/")}return c.split("/")},this._onHashChange=()=>{const c=this._getCurrentHash();if(c.length>=3&&!c.some(p=>isNaN(p))){const p=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(c[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+c[2],+c[1]],zoom:+c[0],bearing:p,pitch:+(c[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const c=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,c)}catch{}},this._updateHash=zo(this._updateHashUnthrottled,300),this._hashName=i&&encodeURIComponent(i)}addTo(i){return this._map=i,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(i){const c=this._map.getCenter(),p=Math.round(100*this._map.getZoom())/100,g=Math.ceil((p*Math.LN2+Math.log(512/360/.5))/Math.LN10),_=Math.pow(10,g),C=Math.round(c.lng*_)/_,T=Math.round(c.lat*_)/_,k=this._map.getBearing(),R=this._map.getPitch();let z="";if(z+=i?`/${C}/${T}/${p}`:`${p}/${T}/${C}`,(k||R)&&(z+="/"+Math.round(10*k)/10),R&&(z+=`/${Math.round(R)}`),this._hashName){const L=this._hashName;let G=!1;const te=window.location.hash.slice(1).split("&").map(ee=>{const ie=ee.split("=")[0];return ie===L?(G=!0,`${ie}=${z}`):ee}).filter(ee=>ee);return G||te.push(`${L}=${z}`),`#${te.join("&")}`}return`#${z}`}}const Ca={linearity:.3,easing:a.ba(0,0,.3,1)},up=a.e({deceleration:2500,maxSpeed:1400},Ca),cp=a.e({deceleration:20,maxSpeed:1400},Ca),hp=a.e({deceleration:1e3,maxSpeed:360},Ca),dp=a.e({deceleration:1e3,maxSpeed:90},Ca);class fp{constructor(i){this._map=i,this.clear()}clear(){this._inertiaBuffer=[]}record(i){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:a.h.now(),settings:i})}_drainInertiaBuffer(){const i=this._inertiaBuffer,c=a.h.now();for(;i.length>0&&c-i[0].time>160;)i.shift()}_onMoveEnd(i){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const c={zoom:0,bearing:0,pitch:0,pan:new a.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:_}of this._inertiaBuffer)c.zoom+=_.zoomDelta||0,c.bearing+=_.bearingDelta||0,c.pitch+=_.pitchDelta||0,_.panDelta&&c.pan._add(_.panDelta),_.around&&(c.around=_.around),_.pinchAround&&(c.pinchAround=_.pinchAround);const p=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,g={};if(c.pan.mag()){const _=Dl(c.pan.mag(),p,a.e({},up,i||{}));g.offset=c.pan.mult(_.amount/c.pan.mag()),g.center=this._map.transform.center,cs(g,_)}if(c.zoom){const _=Dl(c.zoom,p,cp);g.zoom=this._map.transform.zoom+_.amount,cs(g,_)}if(c.bearing){const _=Dl(c.bearing,p,hp);g.bearing=this._map.transform.bearing+a.ad(_.amount,-179,179),cs(g,_)}if(c.pitch){const _=Dl(c.pitch,p,dp);g.pitch=this._map.transform.pitch+_.amount,cs(g,_)}if(g.zoom||g.bearing){const _=c.pinchAround===void 0?c.around:c.pinchAround;g.around=_?this._map.unproject(_):this._map.getCenter()}return this.clear(),a.e(g,{noMoveStart:!0})}}function cs(y,i){(!y.duration||y.duration<i.duration)&&(y.duration=i.duration,y.easing=i.easing)}function Dl(y,i,c){const{maxSpeed:p,linearity:g,deceleration:_}=c,C=a.ad(y*g/(i/1e3),-p,p),T=Math.abs(C)/(_*g);return{easing:c.easing,duration:1e3*T,amount:C*(T/2)}}class pi extends a.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,c,p,g={}){const _=b.mousePos(c.getCanvasContainer(),p),C=c.unproject(_);super(i,a.e({point:_,lngLat:C,originalEvent:p},g)),this._defaultPrevented=!1,this.target=c}}class zl extends a.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,c,p){const g=i==="touchend"?p.changedTouches:p.touches,_=b.touchPos(c.getCanvasContainer(),g),C=_.map(k=>c.unproject(k)),T=_.reduce((k,R,z,L)=>k.add(R.div(L.length)),new a.P(0,0));super(i,{points:_,point:T,lngLats:C,lngLat:c.unproject(T),originalEvent:p}),this._defaultPrevented=!1}}class pp extends a.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,c,p){super(i,{originalEvent:p}),this._defaultPrevented=!1}}class mp{constructor(i,c){this._map=i,this._clickTolerance=c.clickTolerance}reset(){delete this._mousedownPos}wheel(i){return this._firePreventable(new pp(i.type,this._map,i))}mousedown(i,c){return this._mousedownPos=c,this._firePreventable(new pi(i.type,this._map,i))}mouseup(i){this._map.fire(new pi(i.type,this._map,i))}click(i,c){this._mousedownPos&&this._mousedownPos.dist(c)>=this._clickTolerance||this._map.fire(new pi(i.type,this._map,i))}dblclick(i){return this._firePreventable(new pi(i.type,this._map,i))}mouseover(i){this._map.fire(new pi(i.type,this._map,i))}mouseout(i){this._map.fire(new pi(i.type,this._map,i))}touchstart(i){return this._firePreventable(new zl(i.type,this._map,i))}touchmove(i){this._map.fire(new zl(i.type,this._map,i))}touchend(i){this._map.fire(new zl(i.type,this._map,i))}touchcancel(i){this._map.fire(new zl(i.type,this._map,i))}_firePreventable(i){if(this._map.fire(i),i.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class gp{constructor(i){this._map=i}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(i){this._map.fire(new pi(i.type,this._map,i))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new pi("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(i){this._delayContextMenu?this._contextMenuEvent=i:this._ignoreContextMenu||this._map.fire(new pi(i.type,this._map,i)),this._map.listens("contextmenu")&&i.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class zs{constructor(i){this._map=i}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(i){return this.transform.pointLocation(a.P.convert(i),this._map.terrain)}}class yp{constructor(i,c){this._map=i,this._tr=new zs(i),this._el=i.getCanvasContainer(),this._container=i.getContainer(),this._clickTolerance=c.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(i,c){this.isEnabled()&&i.shiftKey&&i.button===0&&(b.disableDrag(),this._startPos=this._lastPos=c,this._active=!0)}mousemoveWindow(i,c){if(!this._active)return;const p=c;if(this._lastPos.equals(p)||!this._box&&p.dist(this._startPos)<this._clickTolerance)return;const g=this._startPos;this._lastPos=p,this._box||(this._box=b.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",i));const _=Math.min(g.x,p.x),C=Math.max(g.x,p.x),T=Math.min(g.y,p.y),k=Math.max(g.y,p.y);b.setTransform(this._box,`translate(${_}px,${T}px)`),this._box.style.width=C-_+"px",this._box.style.height=k-T+"px"}mouseupWindow(i,c){if(!this._active||i.button!==0)return;const p=this._startPos,g=c;if(this.reset(),b.suppressClick(),p.x!==g.x||p.y!==g.y)return this._map.fire(new a.k("boxzoomend",{originalEvent:i})),{cameraAnimation:_=>_.fitScreenCoordinates(p,g,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",i)}keydown(i){this._active&&i.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",i))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(b.remove(this._box),this._box=null),b.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(i,c){return this._map.fire(new a.k(i,{originalEvent:c}))}}function Li(y,i){if(y.length!==i.length)throw new Error(`The number of touches and points are not equal - touches ${y.length}, points ${i.length}`);const c={};for(let p=0;p<y.length;p++)c[y[p].identifier]=i[p];return c}class Ls{constructor(i){this.reset(),this.numTouches=i.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(i,c,p){(this.centroid||p.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=i.timeStamp),p.length===this.numTouches&&(this.centroid=function(g){const _=new a.P(0,0);for(const C of g)_._add(C);return _.div(g.length)}(c),this.touches=Li(p,c)))}touchmove(i,c,p){if(this.aborted||!this.centroid)return;const g=Li(p,c);for(const _ in this.touches){const C=g[_];(!C||C.dist(this.touches[_])>30)&&(this.aborted=!0)}}touchend(i,c,p){if((!this.centroid||i.timeStamp-this.startTime>500)&&(this.aborted=!0),p.length===0){const g=!this.aborted&&this.centroid;if(this.reset(),g)return g}}}class Gu{constructor(i){this.singleTap=new Ls(i),this.numTaps=i.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(i,c,p){this.singleTap.touchstart(i,c,p)}touchmove(i,c,p){this.singleTap.touchmove(i,c,p)}touchend(i,c,p){const g=this.singleTap.touchend(i,c,p);if(g){const _=i.timeStamp-this.lastTime<500,C=!this.lastTap||this.lastTap.dist(g)<30;if(_&&C||this.reset(),this.count++,this.lastTime=i.timeStamp,this.lastTap=g,this.count===this.numTaps)return this.reset(),g}}}class Os{constructor(i){this._tr=new zs(i),this._zoomIn=new Gu({numTouches:1,numTaps:2}),this._zoomOut=new Gu({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(i,c,p){this._zoomIn.touchstart(i,c,p),this._zoomOut.touchstart(i,c,p)}touchmove(i,c,p){this._zoomIn.touchmove(i,c,p),this._zoomOut.touchmove(i,c,p)}touchend(i,c,p){const g=this._zoomIn.touchend(i,c,p),_=this._zoomOut.touchend(i,c,p),C=this._tr;return g?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:T=>T.easeTo({duration:300,zoom:C.zoom+1,around:C.unproject(g)},{originalEvent:i})}):_?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:T=>T.easeTo({duration:300,zoom:C.zoom-1,around:C.unproject(_)},{originalEvent:i})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Fs{constructor(i){this._enabled=!!i.enable,this._moveStateManager=i.moveStateManager,this._clickTolerance=i.clickTolerance||1,this._moveFunction=i.move,this._activateOnStart=!!i.activateOnStart,i.assignEvents(this),this.reset()}reset(i){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(i)}_move(...i){const c=this._moveFunction(...i);if(c.bearingDelta||c.pitchDelta||c.around||c.panDelta)return this._active=!0,c}dragStart(i,c){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(i)&&(this._moveStateManager.startMove(i),this._lastPoint=c.length?c[0]:c,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(i,c){if(!this.isEnabled())return;const p=this._lastPoint;if(!p)return;if(i.preventDefault(),!this._moveStateManager.isValidMoveEvent(i))return void this.reset(i);const g=c.length?c[0]:c;return!this._moved&&g.dist(p)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=g,this._move(p,g))}dragEnd(i){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(i)&&(this._moved&&b.suppressClick(),this.reset(i))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const pv={0:1,2:2};class Dh{constructor(i){this._correctEvent=i.checkCorrectEvent}startMove(i){const c=b.mouseButton(i);this._eventButton=c}endMove(i){delete this._eventButton}isValidStartEvent(i){return this._correctEvent(i)}isValidMoveEvent(i){return!function(c,p){const g=pv[p];return c.buttons===void 0||(c.buttons&g)!==g}(i,this._eventButton)}isValidEndEvent(i){return b.mouseButton(i)===this._eventButton}}class vp{constructor(){this._firstTouch=void 0}_isOneFingerTouch(i){return i.targetTouches.length===1}_isSameTouchEvent(i){return i.targetTouches[0].identifier===this._firstTouch}startMove(i){this._firstTouch=i.targetTouches[0].identifier}endMove(i){delete this._firstTouch}isValidStartEvent(i){return this._isOneFingerTouch(i)}isValidMoveEvent(i){return this._isOneFingerTouch(i)&&this._isSameTouchEvent(i)}isValidEndEvent(i){return this._isOneFingerTouch(i)&&this._isSameTouchEvent(i)}}const Zu=y=>{y.mousedown=y.dragStart,y.mousemoveWindow=y.dragMove,y.mouseup=y.dragEnd,y.contextmenu=function(i){i.preventDefault()}},Ta=({enable:y,clickTolerance:i,bearingDegreesPerPixelMoved:c=.8})=>{const p=new Dh({checkCorrectEvent:g=>b.mouseButton(g)===0&&g.ctrlKey||b.mouseButton(g)===2});return new Fs({clickTolerance:i,move:(g,_)=>({bearingDelta:(_.x-g.x)*c}),moveStateManager:p,enable:y,assignEvents:Zu})},Ns=({enable:y,clickTolerance:i,pitchDegreesPerPixelMoved:c=-.5})=>{const p=new Dh({checkCorrectEvent:g=>b.mouseButton(g)===0&&g.ctrlKey||b.mouseButton(g)===2});return new Fs({clickTolerance:i,move:(g,_)=>({pitchDelta:(_.y-g.y)*c}),moveStateManager:p,enable:y,assignEvents:Zu})};class st{constructor(i,c){this._minTouches=i.cooperativeGestures?2:1,this._clickTolerance=i.clickTolerance||1,this._map=c,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new a.P(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(i,c,p){return this._calculateTransform(i,c,p)}touchmove(i,c,p){if(this._map._cooperativeGestures&&(this._minTouches===2&&p.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(i,!1,p.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(p.length<this._minTouches))return i.preventDefault(),this._calculateTransform(i,c,p)}touchend(i,c,p){this._calculateTransform(i,c,p),this._active&&p.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(i,c,p){p.length>0&&(this._active=!0);const g=Li(p,c),_=new a.P(0,0),C=new a.P(0,0);let T=0;for(const R in g){const z=g[R],L=this._touches[R];L&&(_._add(z),C._add(z.sub(L)),T++,g[R]=z)}if(this._touches=g,T<this._minTouches||!C.mag())return;const k=C.div(T);return this._sum._add(k),this._sum.mag()<this._clickTolerance?void 0:{around:_.div(T),panDelta:k}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Wu{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(i,c,p){this._firstTwoTouches||p.length<2||(this._firstTwoTouches=[p[0].identifier,p[1].identifier],this._start([c[0],c[1]]))}touchmove(i,c,p){if(!this._firstTwoTouches)return;i.preventDefault();const[g,_]=this._firstTwoTouches,C=uo(p,c,g),T=uo(p,c,_);if(!C||!T)return;const k=this._aroundCenter?null:C.add(T).div(2);return this._move([C,T],k,i)}touchend(i,c,p){if(!this._firstTwoTouches)return;const[g,_]=this._firstTwoTouches,C=uo(p,c,g),T=uo(p,c,_);C&&T||(this._active&&b.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(i){this._enabled=!0,this._aroundCenter=!!i&&i.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function uo(y,i,c){for(let p=0;p<y.length;p++)if(y[p].identifier===c)return i[p]}function Ea(y,i){return Math.log(y/i)/Math.LN2}class _p extends Wu{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(i){this._startDistance=this._distance=i[0].dist(i[1])}_move(i,c){const p=this._distance;if(this._distance=i[0].dist(i[1]),this._active||!(Math.abs(Ea(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Ea(this._distance,p),pinchAround:c}}}function rt(y,i){return 180*y.angleWith(i)/Math.PI}class zh extends Wu{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(i){this._startVector=this._vector=i[0].sub(i[1]),this._minDiameter=i[0].dist(i[1])}_move(i,c){const p=this._vector;if(this._vector=i[0].sub(i[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:rt(this._vector,p),pinchAround:c}}_isBelowThreshold(i){this._minDiameter=Math.min(this._minDiameter,i.mag());const c=25/(Math.PI*this._minDiameter)*360,p=rt(i,this._startVector);return Math.abs(p)<c}}function Lh(y){return Math.abs(y.y)>Math.abs(y.x)}class mv extends Wu{constructor(i){super(),this._map=i}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(i,c,p){super.touchstart(i,c,p),this._currentTouchCount=p.length}_start(i){this._lastPoints=i,Lh(i[0].sub(i[1]))&&(this._valid=!1)}_move(i,c,p){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const g=i[0].sub(this._lastPoints[0]),_=i[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(g,_,p.timeStamp),this._valid?(this._lastPoints=i,this._active=!0,{pitchDelta:(g.y+_.y)/2*-.5}):void 0}gestureBeginsVertically(i,c,p){if(this._valid!==void 0)return this._valid;const g=i.mag()>=2,_=c.mag()>=2;if(!g&&!_)return;if(!g||!_)return this._firstMove===void 0&&(this._firstMove=p),p-this._firstMove<100&&void 0;const C=i.y>0==c.y>0;return Lh(i)&&Lh(c)&&C}}const Oh={panStep:100,bearingStep:15,pitchStep:10};class xp{constructor(i){this._tr=new zs(i);const c=Oh;this._panStep=c.panStep,this._bearingStep=c.bearingStep,this._pitchStep=c.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(i){if(i.altKey||i.ctrlKey||i.metaKey)return;let c=0,p=0,g=0,_=0,C=0;switch(i.keyCode){case 61:case 107:case 171:case 187:c=1;break;case 189:case 109:case 173:c=-1;break;case 37:i.shiftKey?p=-1:(i.preventDefault(),_=-1);break;case 39:i.shiftKey?p=1:(i.preventDefault(),_=1);break;case 38:i.shiftKey?g=1:(i.preventDefault(),C=-1);break;case 40:i.shiftKey?g=-1:(i.preventDefault(),C=1);break;default:return}return this._rotationDisabled&&(p=0,g=0),{cameraAnimation:T=>{const k=this._tr;T.easeTo({duration:300,easeId:"keyboardHandler",easing:wp,zoom:c?Math.round(k.zoom)+c*(i.shiftKey?2:1):k.zoom,bearing:k.bearing+p*this._bearingStep,pitch:k.pitch+g*this._pitchStep,offset:[-_*this._panStep,-C*this._panStep],center:k.center},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function wp(y){return y*(2-y)}const bp=4.000244140625;class gv{constructor(i,c){this._onTimeout=p=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(p)},this._map=i,this._tr=new zs(i),this._el=i.getCanvasContainer(),this._triggerRenderFrame=c,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(i){this._defaultZoomRate=i}setWheelZoomRate(i){this._wheelZoomRate=i}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(i){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!i&&i.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(i){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!i[this._map._metaKey])return;i.preventDefault()}let c=i.deltaMode===WheelEvent.DOM_DELTA_LINE?40*i.deltaY:i.deltaY;const p=a.h.now(),g=p-(this._lastWheelEventTime||0);this._lastWheelEventTime=p,c!==0&&c%bp==0?this._type="wheel":c!==0&&Math.abs(c)<4?this._type="trackpad":g>400?(this._type=null,this._lastValue=c,this._timeout=setTimeout(this._onTimeout,40,i)):this._type||(this._type=Math.abs(g*c)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,c+=this._lastValue)),i.shiftKey&&c&&(c/=4),this._type&&(this._lastWheelEvent=i,this._delta-=c,this._active||this._start(i)),i.preventDefault()}_start(i){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const c=b.mousePos(this._el,i),p=this._tr;this._around=a.L.convert(this._aroundCenter?p.center:p.unproject(c)),this._aroundPoint=p.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const i=this._tr.transform;if(this._delta!==0){const T=this._type==="wheel"&&Math.abs(this._delta)>bp?this._wheelZoomRate:this._defaultZoomRate;let k=2/(1+Math.exp(-Math.abs(this._delta*T)));this._delta<0&&k!==0&&(k=1/k);const R=typeof this._targetZoom=="number"?i.zoomScale(this._targetZoom):i.scale;this._targetZoom=Math.min(i.maxZoom,Math.max(i.minZoom,i.scaleZoom(R*k))),this._type==="wheel"&&(this._startZoom=i.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const c=typeof this._targetZoom=="number"?this._targetZoom:i.zoom,p=this._startZoom,g=this._easing;let _,C=!1;if(this._type==="wheel"&&p&&g){const T=Math.min((a.h.now()-this._lastWheelEventTime)/200,1),k=g(T);_=a.B.number(p,c,k),T<1?this._frameId||(this._frameId=!0):C=!0}else _=c,C=!0;return this._active=!0,C&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!C,zoomDelta:_-i.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(i){let c=a.bb;if(this._prevEase){const p=this._prevEase,g=(a.h.now()-p.start)/p.duration,_=p.easing(g+.01)-p.easing(g),C=.27/Math.sqrt(_*_+1e-4)*.01,T=Math.sqrt(.0729-C*C);c=a.ba(C,T,.25,1)}return this._prevEase={start:a.h.now(),duration:i,easing:c},c}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Fh{constructor(i,c){this._clickZoom=i,this._tapZoom=c}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Nh{constructor(i){this._tr=new zs(i),this.reset()}reset(){this._active=!1}dblclick(i,c){return i.preventDefault(),{cameraAnimation:p=>{p.easeTo({duration:300,zoom:this._tr.zoom+(i.shiftKey?-1:1),around:this._tr.unproject(c)},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Bh{constructor(){this._tap=new Gu({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(i,c,p){if(!this._swipePoint)if(this._tapTime){const g=c[0],_=i.timeStamp-this._tapTime<500,C=this._tapPoint.dist(g)<30;_&&C?p.length>0&&(this._swipePoint=g,this._swipeTouch=p[0].identifier):this.reset()}else this._tap.touchstart(i,c,p)}touchmove(i,c,p){if(this._tapTime){if(this._swipePoint){if(p[0].identifier!==this._swipeTouch)return;const g=c[0],_=g.y-this._swipePoint.y;return this._swipePoint=g,i.preventDefault(),this._active=!0,{zoomDelta:_/128}}}else this._tap.touchmove(i,c,p)}touchend(i,c,p){if(this._tapTime)this._swipePoint&&p.length===0&&this.reset();else{const g=this._tap.touchend(i,c,p);g&&(this._tapTime=i.timeStamp,this._tapPoint=g)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Vh{constructor(i,c,p){this._el=i,this._mousePan=c,this._touchPan=p}enable(i){this._inertiaOptions=i||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Kr{constructor(i,c,p){this._pitchWithRotate=i.pitchWithRotate,this._mouseRotate=c,this._mousePitch=p}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class co{constructor(i,c,p,g){this._el=i,this._touchZoom=c,this._touchRotate=p,this._tapDragZoom=g,this._rotationDisabled=!1,this._enabled=!0}enable(i){this._touchZoom.enable(i),this._rotationDisabled||this._touchRotate.enable(i),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Ll=y=>y.zoom||y.drag||y.pitch||y.rotate;class $h extends a.k{}function Ol(y){return y.panDelta&&y.panDelta.mag()||y.zoomDelta||y.bearingDelta||y.pitchDelta}class jh{constructor(i,c){this.handleWindowEvent=g=>{this.handleEvent(g,`${g.type}Window`)},this.handleEvent=(g,_)=>{if(g.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const C=g.type==="renderFrame"?void 0:g,T={needsRenderFrame:!1},k={},R={},z=g.touches,L=z?this._getMapTouches(z):void 0,G=L?b.touchPos(this._el,L):b.mousePos(this._el,g);for(const{handlerName:ie,handler:Y,allowed:ye}of this._handlers){if(!Y.isEnabled())continue;let Te;this._blockedByActive(R,ye,ie)?Y.reset():Y[_||g.type]&&(Te=Y[_||g.type](g,G,L),this.mergeHandlerResult(T,k,Te,ie,C),Te&&Te.needsRenderFrame&&this._triggerRenderFrame()),(Te||Y.isActive())&&(R[ie]=Y)}const te={};for(const ie in this._previousActiveHandlers)R[ie]||(te[ie]=C);this._previousActiveHandlers=R,(Object.keys(te).length||Ol(T))&&(this._changes.push([T,k,te]),this._triggerRenderFrame()),(Object.keys(R).length||Ol(T))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:ee}=T;ee&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ee(this._map))},this._map=i,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new fp(i),this._bearingSnap=c.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(c);const p=this._el;this._listeners=[[p,"touchstart",{passive:!0}],[p,"touchmove",{passive:!1}],[p,"touchend",void 0],[p,"touchcancel",void 0],[p,"mousedown",void 0],[p,"mousemove",void 0],[p,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[p,"mouseover",void 0],[p,"mouseout",void 0],[p,"dblclick",void 0],[p,"click",void 0],[p,"keydown",{capture:!1}],[p,"keyup",void 0],[p,"wheel",{passive:!1}],[p,"contextmenu",void 0],[window,"blur",void 0]];for(const[g,_,C]of this._listeners)b.addEventListener(g,_,g===document?this.handleWindowEvent:this.handleEvent,C)}destroy(){for(const[i,c,p]of this._listeners)b.removeEventListener(i,c,i===document?this.handleWindowEvent:this.handleEvent,p)}_addDefaultHandlers(i){const c=this._map,p=c.getCanvasContainer();this._add("mapEvent",new mp(c,i));const g=c.boxZoom=new yp(c,i);this._add("boxZoom",g),i.interactive&&i.boxZoom&&g.enable();const _=new Os(c),C=new Nh(c);c.doubleClickZoom=new Fh(C,_),this._add("tapZoom",_),this._add("clickZoom",C),i.interactive&&i.doubleClickZoom&&c.doubleClickZoom.enable();const T=new Bh;this._add("tapDragZoom",T);const k=c.touchPitch=new mv(c);this._add("touchPitch",k),i.interactive&&i.touchPitch&&c.touchPitch.enable(i.touchPitch);const R=Ta(i),z=Ns(i);c.dragRotate=new Kr(i,R,z),this._add("mouseRotate",R,["mousePitch"]),this._add("mousePitch",z,["mouseRotate"]),i.interactive&&i.dragRotate&&c.dragRotate.enable();const L=(({enable:ye,clickTolerance:Te})=>{const ce=new Dh({checkCorrectEvent:ve=>b.mouseButton(ve)===0&&!ve.ctrlKey});return new Fs({clickTolerance:Te,move:(ve,Pe)=>({around:Pe,panDelta:Pe.sub(ve)}),activateOnStart:!0,moveStateManager:ce,enable:ye,assignEvents:Zu})})(i),G=new st(i,c);c.dragPan=new Vh(p,L,G),this._add("mousePan",L),this._add("touchPan",G,["touchZoom","touchRotate"]),i.interactive&&i.dragPan&&c.dragPan.enable(i.dragPan);const te=new zh,ee=new _p;c.touchZoomRotate=new co(p,ee,te,T),this._add("touchRotate",te,["touchPan","touchZoom"]),this._add("touchZoom",ee,["touchPan","touchRotate"]),i.interactive&&i.touchZoomRotate&&c.touchZoomRotate.enable(i.touchZoomRotate);const ie=c.scrollZoom=new gv(c,()=>this._triggerRenderFrame());this._add("scrollZoom",ie,["mousePan"]),i.interactive&&i.scrollZoom&&c.scrollZoom.enable(i.scrollZoom);const Y=c.keyboard=new xp(c);this._add("keyboard",Y),i.interactive&&i.keyboard&&c.keyboard.enable(),this._add("blockableMapEvent",new gp(c))}_add(i,c,p){this._handlers.push({handlerName:i,handler:c,allowed:p}),this._handlersById[i]=c}stop(i){if(!this._updatingCamera){for(const{handler:c}of this._handlers)c.reset();this._inertia.clear(),this._fireEvents({},{},i),this._changes=[]}}isActive(){for(const{handler:i}of this._handlers)if(i.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Ll(this._eventsInProgress)||this.isZooming()}_blockedByActive(i,c,p){for(const g in i)if(g!==p&&(!c||c.indexOf(g)<0))return!0;return!1}_getMapTouches(i){const c=[];for(const p of i)this._el.contains(p.target)&&c.push(p);return c}mergeHandlerResult(i,c,p,g,_){if(!p)return;a.e(i,p);const C={handlerName:g,originalEvent:p.originalEvent||_};p.zoomDelta!==void 0&&(c.zoom=C),p.panDelta!==void 0&&(c.drag=C),p.pitchDelta!==void 0&&(c.pitch=C),p.bearingDelta!==void 0&&(c.rotate=C)}_applyChanges(){const i={},c={},p={};for(const[g,_,C]of this._changes)g.panDelta&&(i.panDelta=(i.panDelta||new a.P(0,0))._add(g.panDelta)),g.zoomDelta&&(i.zoomDelta=(i.zoomDelta||0)+g.zoomDelta),g.bearingDelta&&(i.bearingDelta=(i.bearingDelta||0)+g.bearingDelta),g.pitchDelta&&(i.pitchDelta=(i.pitchDelta||0)+g.pitchDelta),g.around!==void 0&&(i.around=g.around),g.pinchAround!==void 0&&(i.pinchAround=g.pinchAround),g.noInertia&&(i.noInertia=g.noInertia),a.e(c,_),a.e(p,C);this._updateMapTransform(i,c,p),this._changes=[]}_updateMapTransform(i,c,p){const g=this._map,_=g._getTransformForUpdate(),C=g.terrain;if(!(Ol(i)||C&&this._terrainMovement))return this._fireEvents(c,p,!0);let{panDelta:T,zoomDelta:k,bearingDelta:R,pitchDelta:z,around:L,pinchAround:G}=i;G!==void 0&&(L=G),g._stop(!0),L=L||g.transform.centerPoint;const te=_.pointLocation(T?L.sub(T):L);R&&(_.bearing+=R),z&&(_.pitch+=z),k&&(_.zoom+=k),C?this._terrainMovement||!c.drag&&!c.zoom?c.drag&&this._terrainMovement?_.center=_.pointLocation(_.centerPoint.sub(T)):_.setLocationAtPoint(te,L):(this._terrainMovement=!0,this._map._elevationFreeze=!0,_.setLocationAtPoint(te,L),this._map.once("moveend",()=>{this._map._elevationFreeze=!1,this._terrainMovement=!1,_.recalculateZoom(g.terrain)})):_.setLocationAtPoint(te,L),g._applyUpdatedTransform(_),this._map._update(),i.noInertia||this._inertia.record(i),this._fireEvents(c,p,!0)}_fireEvents(i,c,p){const g=Ll(this._eventsInProgress),_=Ll(i),C={};for(const z in i){const{originalEvent:L}=i[z];this._eventsInProgress[z]||(C[`${z}start`]=L),this._eventsInProgress[z]=i[z]}!g&&_&&this._fireEvent("movestart",_.originalEvent);for(const z in C)this._fireEvent(z,C[z]);_&&this._fireEvent("move",_.originalEvent);for(const z in i){const{originalEvent:L}=i[z];this._fireEvent(z,L)}const T={};let k;for(const z in this._eventsInProgress){const{handlerName:L,originalEvent:G}=this._eventsInProgress[z];this._handlersById[L].isActive()||(delete this._eventsInProgress[z],k=c[L]||G,T[`${z}end`]=k)}for(const z in T)this._fireEvent(z,T[z]);const R=Ll(this._eventsInProgress);if(p&&(g||_)&&!R){this._updatingCamera=!0;const z=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),L=G=>G!==0&&-this._bearingSnap<G&&G<this._bearingSnap;!z||!z.essential&&a.h.prefersReducedMotion?(this._map.fire(new a.k("moveend",{originalEvent:k})),L(this._map.getBearing())&&this._map.resetNorth()):(L(z.bearing||this._map.getBearing())&&(z.bearing=0),z.freezeElevation=!0,this._map.easeTo(z,{originalEvent:k})),this._updatingCamera=!1}}_fireEvent(i,c){this._map.fire(new a.k(i,c?{originalEvent:c}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(i=>{delete this._frameId,this.handleEvent(new $h("renderFrame",{timeStamp:i})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Sp extends a.E{constructor(i,c){super(),this._renderFrameCallback=()=>{const p=Math.min((a.h.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(p)),p<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=i,this._bearingSnap=c.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new a.L(this.transform.center.lng,this.transform.center.lat)}setCenter(i,c){return this.jumpTo({center:i},c)}panBy(i,c,p){return i=a.P.convert(i).mult(-1),this.panTo(this.transform.center,a.e({offset:i},c),p)}panTo(i,c,p){return this.easeTo(a.e({center:i},c),p)}getZoom(){return this.transform.zoom}setZoom(i,c){return this.jumpTo({zoom:i},c),this}zoomTo(i,c,p){return this.easeTo(a.e({zoom:i},c),p)}zoomIn(i,c){return this.zoomTo(this.getZoom()+1,i,c),this}zoomOut(i,c){return this.zoomTo(this.getZoom()-1,i,c),this}getBearing(){return this.transform.bearing}setBearing(i,c){return this.jumpTo({bearing:i},c),this}getPadding(){return this.transform.padding}setPadding(i,c){return this.jumpTo({padding:i},c),this}rotateTo(i,c,p){return this.easeTo(a.e({bearing:i},c),p)}resetNorth(i,c){return this.rotateTo(0,a.e({duration:1e3},i),c),this}resetNorthPitch(i,c){return this.easeTo(a.e({bearing:0,pitch:0,duration:1e3},i),c),this}snapToNorth(i,c){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(i,c):this}getPitch(){return this.transform.pitch}setPitch(i,c){return this.jumpTo({pitch:i},c),this}cameraForBounds(i,c){i=Rt.convert(i);const p=c&&c.bearing||0;return this._cameraForBoxAndBearing(i.getNorthWest(),i.getSouthEast(),p,c)}_cameraForBoxAndBearing(i,c,p,g){const _={top:0,bottom:0,right:0,left:0};if(typeof(g=a.e({padding:_,offset:[0,0],maxZoom:this.transform.maxZoom},g)).padding=="number"){const Pe=g.padding;g.padding={top:Pe,bottom:Pe,right:Pe,left:Pe}}g.padding=a.e(_,g.padding);const C=this.transform,T=C.padding,k=C.project(a.L.convert(i)),R=C.project(a.L.convert(c)),z=k.rotate(-p*Math.PI/180),L=R.rotate(-p*Math.PI/180),G=new a.P(Math.max(z.x,L.x),Math.max(z.y,L.y)),te=new a.P(Math.min(z.x,L.x),Math.min(z.y,L.y)),ee=G.sub(te),ie=(C.width-(T.left+T.right+g.padding.left+g.padding.right))/ee.x,Y=(C.height-(T.top+T.bottom+g.padding.top+g.padding.bottom))/ee.y;if(Y<0||ie<0)return void a.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const ye=Math.min(C.scaleZoom(C.scale*Math.min(ie,Y)),g.maxZoom),Te=a.P.convert(g.offset),ce=new a.P((g.padding.left-g.padding.right)/2,(g.padding.top-g.padding.bottom)/2).rotate(p*Math.PI/180),ve=Te.add(ce).mult(C.scale/C.zoomScale(ye));return{center:C.unproject(k.add(R).div(2).sub(ve)),zoom:ye,bearing:p}}fitBounds(i,c,p){return this._fitInternal(this.cameraForBounds(i,c),c,p)}fitScreenCoordinates(i,c,p,g,_){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(a.P.convert(i)),this.transform.pointLocation(a.P.convert(c)),p,g),g,_)}_fitInternal(i,c,p){return i?(delete(c=a.e(i,c)).padding,c.linear?this.easeTo(c,p):this.flyTo(c,p)):this}jumpTo(i,c){this.stop();const p=this._getTransformForUpdate();let g=!1,_=!1,C=!1;return"zoom"in i&&p.zoom!==+i.zoom&&(g=!0,p.zoom=+i.zoom),i.center!==void 0&&(p.center=a.L.convert(i.center)),"bearing"in i&&p.bearing!==+i.bearing&&(_=!0,p.bearing=+i.bearing),"pitch"in i&&p.pitch!==+i.pitch&&(C=!0,p.pitch=+i.pitch),i.padding==null||p.isPaddingEqual(i.padding)||(p.padding=i.padding),this._applyUpdatedTransform(p),this.fire(new a.k("movestart",c)).fire(new a.k("move",c)),g&&this.fire(new a.k("zoomstart",c)).fire(new a.k("zoom",c)).fire(new a.k("zoomend",c)),_&&this.fire(new a.k("rotatestart",c)).fire(new a.k("rotate",c)).fire(new a.k("rotateend",c)),C&&this.fire(new a.k("pitchstart",c)).fire(new a.k("pitch",c)).fire(new a.k("pitchend",c)),this.fire(new a.k("moveend",c))}calculateCameraOptionsFromTo(i,c,p,g=0){const _=a.U.fromLngLat(i,c),C=a.U.fromLngLat(p,g),T=C.x-_.x,k=C.y-_.y,R=C.z-_.z,z=Math.hypot(T,k,R);if(z===0)throw new Error("Can't calculate camera options with same From and To");const L=Math.hypot(T,k),G=this.transform.scaleZoom(this.transform.cameraToCenterDistance/z/this.transform.tileSize),te=180*Math.atan2(T,-k)/Math.PI;let ee=180*Math.acos(L/z)/Math.PI;return ee=R<0?90-ee:90+ee,{center:C.toLngLat(),zoom:G,pitch:ee,bearing:te}}easeTo(i,c){this._stop(!1,i.easeId),((i=a.e({offset:[0,0],duration:500,easing:a.bb},i)).animate===!1||!i.essential&&a.h.prefersReducedMotion)&&(i.duration=0);const p=this._getTransformForUpdate(),g=this.getZoom(),_=this.getBearing(),C=this.getPitch(),T=this.getPadding(),k="zoom"in i?+i.zoom:g,R="bearing"in i?this._normalizeBearing(i.bearing,_):_,z="pitch"in i?+i.pitch:C,L="padding"in i?i.padding:p.padding,G=a.P.convert(i.offset);let te=p.centerPoint.add(G);const ee=p.pointLocation(te),ie=a.L.convert(i.center||ee);this._normalizeCenter(ie);const Y=p.project(ee),ye=p.project(ie).sub(Y),Te=p.zoomScale(k-g);let ce,ve;i.around&&(ce=a.L.convert(i.around),ve=p.locationPoint(ce));const Pe={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||k!==g,this._rotating=this._rotating||_!==R,this._pitching=this._pitching||z!==C,this._padding=!p.isPaddingEqual(L),this._easeId=i.easeId,this._prepareEase(c,i.noMoveStart,Pe),this.terrain&&this._prepareElevation(ie),this._ease(Ae=>{if(this._zooming&&(p.zoom=a.B.number(g,k,Ae)),this._rotating&&(p.bearing=a.B.number(_,R,Ae)),this._pitching&&(p.pitch=a.B.number(C,z,Ae)),this._padding&&(p.interpolatePadding(T,L,Ae),te=p.centerPoint.add(G)),this.terrain&&!i.freezeElevation&&this._updateElevation(Ae),ce)p.setLocationAtPoint(ce,ve);else{const De=p.zoomScale(p.zoom-g),Ve=k>g?Math.min(2,Te):Math.max(.5,Te),Fe=Math.pow(Ve,1-Ae),Ue=p.unproject(Y.add(ye.mult(Ae*Fe)).mult(De));p.setLocationAtPoint(p.renderWorldCopies?Ue.wrap():Ue,te)}this._applyUpdatedTransform(p),this._fireMoveEvents(c)},Ae=>{this.terrain&&this._finalizeElevation(),this._afterEase(c,Ae)},i),this}_prepareEase(i,c,p={}){this._moving=!0,c||p.moving||this.fire(new a.k("movestart",i)),this._zooming&&!p.zooming&&this.fire(new a.k("zoomstart",i)),this._rotating&&!p.rotating&&this.fire(new a.k("rotatestart",i)),this._pitching&&!p.pitching&&this.fire(new a.k("pitchstart",i))}_prepareElevation(i){this._elevationCenter=i,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(i,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(i){this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const c=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(i<1&&c!==this._elevationTarget){const p=this._elevationTarget-this._elevationStart;this._elevationStart+=i*(p-(c-(p*i+this._elevationStart))/(1-i)),this._elevationTarget=c}this.transform.elevation=a.B.number(this._elevationStart,this._elevationTarget,i)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(i){if(!this.transformCameraUpdate)return;const c=i.clone(),{center:p,zoom:g,pitch:_,bearing:C,elevation:T}=this.transformCameraUpdate(c);p&&(c.center=p),g!==void 0&&(c.zoom=g),_!==void 0&&(c.pitch=_),C!==void 0&&(c.bearing=C),T!==void 0&&(c.elevation=T),this.transform.apply(c)}_fireMoveEvents(i){this.fire(new a.k("move",i)),this._zooming&&this.fire(new a.k("zoom",i)),this._rotating&&this.fire(new a.k("rotate",i)),this._pitching&&this.fire(new a.k("pitch",i))}_afterEase(i,c){if(this._easeId&&c&&this._easeId===c)return;delete this._easeId;const p=this._zooming,g=this._rotating,_=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,p&&this.fire(new a.k("zoomend",i)),g&&this.fire(new a.k("rotateend",i)),_&&this.fire(new a.k("pitchend",i)),this.fire(new a.k("moveend",i))}flyTo(i,c){if(!i.essential&&a.h.prefersReducedMotion){const ht=a.F(i,["center","zoom","bearing","pitch","around"]);return this.jumpTo(ht,c)}this.stop(),i=a.e({offset:[0,0],speed:1.2,curve:1.42,easing:a.bb},i);const p=this._getTransformForUpdate(),g=this.getZoom(),_=this.getBearing(),C=this.getPitch(),T=this.getPadding(),k="zoom"in i?a.ad(+i.zoom,p.minZoom,p.maxZoom):g,R="bearing"in i?this._normalizeBearing(i.bearing,_):_,z="pitch"in i?+i.pitch:C,L="padding"in i?i.padding:p.padding,G=p.zoomScale(k-g),te=a.P.convert(i.offset);let ee=p.centerPoint.add(te);const ie=p.pointLocation(ee),Y=a.L.convert(i.center||ie);this._normalizeCenter(Y);const ye=p.project(ie),Te=p.project(Y).sub(ye);let ce=i.curve;const ve=Math.max(p.width,p.height),Pe=ve/G,Ae=Te.mag();if("minZoom"in i){const ht=a.ad(Math.min(i.minZoom,g,k),p.minZoom,p.maxZoom),on=ve/p.zoomScale(ht-g);ce=Math.sqrt(on/Ae*2)}const De=ce*ce;function Ve(ht){const on=(Pe*Pe-ve*ve+(ht?-1:1)*De*De*Ae*Ae)/(2*(ht?Pe:ve)*De*Ae);return Math.log(Math.sqrt(on*on+1)-on)}function Fe(ht){return(Math.exp(ht)-Math.exp(-ht))/2}function Ue(ht){return(Math.exp(ht)+Math.exp(-ht))/2}const lt=Ve(!1);let $t=function(ht){return Ue(lt)/Ue(lt+ce*ht)},Je=function(ht){return ve*((Ue(lt)*(Fe(on=lt+ce*ht)/Ue(on))-Fe(lt))/De)/Ae;var on},Tt=(Ve(!0)-lt)/ce;if(Math.abs(Ae)<1e-6||!isFinite(Tt)){if(Math.abs(ve-Pe)<1e-6)return this.easeTo(i,c);const ht=Pe<ve?-1:1;Tt=Math.abs(Math.log(Pe/ve))/ce,Je=function(){return 0},$t=function(on){return Math.exp(ht*ce*on)}}return i.duration="duration"in i?+i.duration:1e3*Tt/("screenSpeed"in i?+i.screenSpeed/ce:+i.speed),i.maxDuration&&i.duration>i.maxDuration&&(i.duration=0),this._zooming=!0,this._rotating=_!==R,this._pitching=z!==C,this._padding=!p.isPaddingEqual(L),this._prepareEase(c,!1),this.terrain&&this._prepareElevation(Y),this._ease(ht=>{const on=ht*Tt,Bt=1/$t(on);p.zoom=ht===1?k:g+p.scaleZoom(Bt),this._rotating&&(p.bearing=a.B.number(_,R,ht)),this._pitching&&(p.pitch=a.B.number(C,z,ht)),this._padding&&(p.interpolatePadding(T,L,ht),ee=p.centerPoint.add(te)),this.terrain&&!i.freezeElevation&&this._updateElevation(ht);const Lt=ht===1?Y:p.unproject(ye.add(Te.mult(Je(on))).mult(Bt));p.setLocationAtPoint(p.renderWorldCopies?Lt.wrap():Lt,ee),this._applyUpdatedTransform(p),this._fireMoveEvents(c)},()=>{this.terrain&&this._finalizeElevation(),this._afterEase(c)},i),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(i,c){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const p=this._onEaseEnd;delete this._onEaseEnd,p.call(this,c)}if(!i){const p=this.handlers;p&&p.stop(!1)}return this}_ease(i,c,p){p.animate===!1||p.duration===0?(i(1),c()):(this._easeStart=a.h.now(),this._easeOptions=p,this._onEaseFrame=i,this._onEaseEnd=c,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(i,c){i=a.b5(i,-180,180);const p=Math.abs(i-c);return Math.abs(i-360-c)<p&&(i-=360),Math.abs(i+360-c)<p&&(i+=360),i}_normalizeCenter(i){const c=this.transform;if(!c.renderWorldCopies||c.lngRange)return;const p=i.lng-c.center.lng;i.lng+=p>180?-360:p<-180?360:0}queryTerrainElevation(i){return this.terrain?this.terrain.getElevationForLngLatZoom(a.L.convert(i),this.transform.tileZoom)-this.transform.elevation:null}}class mi{constructor(i={}){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=c=>{!c||c.sourceDataType!=="metadata"&&c.sourceDataType!=="visibility"&&c.dataType!=="style"&&c.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=i}getDefaultPosition(){return"bottom-right"}onAdd(i){return this._map=i,this._compact=this.options&&this.options.compact,this._container=b.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=b.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=b.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){b.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(i,c){const p=this._map._getUIString(`AttributionControl.${c}`);i.title=p,i.setAttribute("aria-label",p)}_updateAttributions(){if(!this._map.style)return;let i=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?i=i.concat(this.options.customAttribution.map(g=>typeof g!="string"?"":g)):typeof this.options.customAttribution=="string"&&i.push(this.options.customAttribution)),this._map.style.stylesheet){const g=this._map.style.stylesheet;this.styleOwner=g.owner,this.styleId=g.id}const c=this._map.style.sourceCaches;for(const g in c){const _=c[g];if(_.used||_.usedForTerrain){const C=_.getSource();C.attribution&&i.indexOf(C.attribution)<0&&i.push(C.attribution)}}i=i.filter(g=>String(g).trim()),i.sort((g,_)=>g.length-_.length),i=i.filter((g,_)=>{for(let C=_+1;C<i.length;C++)if(i[C].indexOf(g)>=0)return!1;return!0});const p=i.join(" | ");p!==this._attribHTML&&(this._attribHTML=p,i.length?(this._innerContainer.innerHTML=p,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class fn{constructor(i={}){this._updateCompact=()=>{const c=this._container.children;if(c.length){const p=c[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&p.classList.add("maplibregl-compact"):p.classList.remove("maplibregl-compact")}},this.options=i}getDefaultPosition(){return"bottom-left"}onAdd(i){this._map=i,this._compact=this.options&&this.options.compact,this._container=b.create("div","maplibregl-ctrl");const c=b.create("a","maplibregl-ctrl-logo");return c.target="_blank",c.rel="noopener nofollow",c.href="https://maplibre.org/",c.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),c.setAttribute("rel","noopener nofollow"),this._container.appendChild(c),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){b.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Hu{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(i){const c=++this._id;return this._queue.push({callback:i,id:c,cancelled:!1}),c}remove(i){const c=this._currentlyRunning,p=c?this._queue.concat(c):this._queue;for(const g of p)if(g.id===i)return void(g.cancelled=!0)}run(i=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const c=this._currentlyRunning=this._queue;this._queue=[];for(const p of c)if(!p.cancelled&&(p.callback(i),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const Uh={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"};var Cp=a.Q([{name:"a_pos3d",type:"Int16",components:3}]);class Tp extends a.E{constructor(i){super(),this.sourceCache=i,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,i.usedForTerrain=!0,i.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(i,c){this.sourceCache.update(i,c),this._renderableTilesKeys=[];const p={};for(const g of i.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:c}))p[g.key]=!0,this._renderableTilesKeys.push(g.key),this._tiles[g.key]||(g.posMatrix=new Float64Array(16),a.aS(g.posMatrix,0,a.N,0,a.N,0,1),this._tiles[g.key]=new ge(g,this.tileSize));for(const g in this._tiles)p[g]||delete this._tiles[g]}freeRtt(i){for(const c in this._tiles){const p=this._tiles[c];(!i||p.tileID.equals(i)||p.tileID.isChildOf(i)||i.isChildOf(p.tileID))&&(p.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(i=>this.getTileByID(i))}getTileByID(i){return this._tiles[i]}getTerrainCoords(i){const c={};for(const p of this._renderableTilesKeys){const g=this._tiles[p].tileID;if(g.canonical.equals(i.canonical)){const _=i.clone();_.posMatrix=new Float64Array(16),a.aS(_.posMatrix,0,a.N,0,a.N,0,1),c[p]=_}else if(g.canonical.isChildOf(i.canonical)){const _=i.clone();_.posMatrix=new Float64Array(16);const C=g.canonical.z-i.canonical.z,T=g.canonical.x-(g.canonical.x>>C<<C),k=g.canonical.y-(g.canonical.y>>C<<C),R=a.N>>C;a.aS(_.posMatrix,0,R,0,R,0,1),a.$(_.posMatrix,_.posMatrix,[-T*R,-k*R,0]),c[p]=_}else if(i.canonical.isChildOf(g.canonical)){const _=i.clone();_.posMatrix=new Float64Array(16);const C=i.canonical.z-g.canonical.z,T=i.canonical.x-(i.canonical.x>>C<<C),k=i.canonical.y-(i.canonical.y>>C<<C),R=a.N>>C;a.aS(_.posMatrix,0,a.N,0,a.N,0,1),a.$(_.posMatrix,_.posMatrix,[T*R,k*R,0]),a.a0(_.posMatrix,_.posMatrix,[1/2**C,1/2**C,0]),c[p]=_}}return c}getSourceTile(i,c){const p=this.sourceCache._source;let g=i.overscaledZ-this.deltaZoom;if(g>p.maxzoom&&(g=p.maxzoom),g<p.minzoom)return null;this._sourceTileCache[i.key]||(this._sourceTileCache[i.key]=i.scaledTo(g).key);let _=this.sourceCache.getTileByID(this._sourceTileCache[i.key]);if((!_||!_.dem)&&c)for(;g>=p.minzoom&&(!_||!_.dem);)_=this.sourceCache.getTileByID(i.scaledTo(g--).key);return _}tilesAfterTime(i=Date.now()){return Object.values(this._tiles).filter(c=>c.timeAdded>=i)}}class Ep{constructor(i,c,p){this.painter=i,this.sourceCache=new Tp(c),this.options=p,this.exaggeration=typeof p.exaggeration=="number"?p.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(i,c,p,g=a.N){var _;if(!(c>=0&&c<g&&p>=0&&p<g))return 0;const C=this.getTerrainData(i),T=(_=C.tile)===null||_===void 0?void 0:_.dem;if(!T)return 0;const k=function(ee,ie,Y){var ye=ie[0],Te=ie[1];return ee[0]=Y[0]*ye+Y[4]*Te+Y[12],ee[1]=Y[1]*ye+Y[5]*Te+Y[13],ee}([],[c/g*a.N,p/g*a.N],C.u_terrain_matrix),R=[k[0]*T.dim,k[1]*T.dim],z=Math.floor(R[0]),L=Math.floor(R[1]),G=R[0]-z,te=R[1]-L;return T.get(z,L)*(1-G)*(1-te)+T.get(z+1,L)*G*(1-te)+T.get(z,L+1)*(1-G)*te+T.get(z+1,L+1)*G*te}getElevationForLngLatZoom(i,c){const{tileID:p,mercatorX:g,mercatorY:_}=this._getOverscaledTileIDFromLngLatZoom(i,c);return this.getElevation(p,g%a.N,_%a.N,a.N)}getElevation(i,c,p,g=a.N){return this.getDEMElevation(i,c,p,g)*this.exaggeration}getTerrainData(i){if(!this._emptyDemTexture){const g=this.painter.context,_=new a.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new ze(g,_,g.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new ze(g,new a.R({width:1,height:1}),g.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(g.gl.NEAREST,g.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=a.ao([])}const c=this.sourceCache.getSourceTile(i,!0);if(c&&c.dem&&(!c.demTexture||c.needsTerrainPrepare)){const g=this.painter.context;c.demTexture=this.painter.getTileTexture(c.dem.stride),c.demTexture?c.demTexture.update(c.dem.getPixels(),{premultiply:!1}):c.demTexture=new ze(g,c.dem.getPixels(),g.gl.RGBA,{premultiply:!1}),c.demTexture.bind(g.gl.NEAREST,g.gl.CLAMP_TO_EDGE),c.needsTerrainPrepare=!1}const p=c&&c+c.tileID.key+i.key;if(p&&!this._demMatrixCache[p]){const g=this.sourceCache.sourceCache._source.maxzoom;let _=i.canonical.z-c.tileID.canonical.z;i.overscaledZ>i.canonical.z&&(i.canonical.z>=g?_=i.canonical.z-g:a.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const C=i.canonical.x-(i.canonical.x>>_<<_),T=i.canonical.y-(i.canonical.y>>_<<_),k=a.bc(new Float64Array(16),[1/(a.N<<_),1/(a.N<<_),0]);a.$(k,k,[C*a.N,T*a.N,0]),this._demMatrixCache[i.key]={matrix:k,coord:i}}return{u_depth:2,u_terrain:3,u_terrain_dim:c&&c.dem&&c.dem.dim||1,u_terrain_matrix:p?this._demMatrixCache[i.key].matrix:this._emptyDemMatrix,u_terrain_unpack:c&&c.dem&&c.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(c&&c.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:c}}getFramebuffer(i){const c=this.painter,p=c.width/devicePixelRatio,g=c.height/devicePixelRatio;return!this._fbo||this._fbo.width===p&&this._fbo.height===g||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new ze(c.context,{width:p,height:g,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new ze(c.context,{width:p,height:g,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=c.context.createFramebuffer(p,g,!0,!1),this._fbo.depthAttachment.set(c.context.createRenderbuffer(c.context.gl.DEPTH_COMPONENT16,p,g))),this._fbo.colorAttachment.set(i==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const i=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const c=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let _=0,C=0;_<this._coordsTextureSize;_++)for(let T=0;T<this._coordsTextureSize;T++,C+=4)c[C+0]=255&T,c[C+1]=255&_,c[C+2]=T>>8<<4|_>>8,c[C+3]=0;const p=new a.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(c.buffer)),g=new ze(i,p,i.gl.RGBA,{premultiply:!1});return g.bind(i.gl.NEAREST,i.gl.CLAMP_TO_EDGE),this._coordsTexture=g,g}pointCoordinate(i){const c=new Uint8Array(4),p=this.painter.context,g=p.gl;p.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),g.readPixels(i.x,this.painter.height/devicePixelRatio-i.y-1,1,1,g.RGBA,g.UNSIGNED_BYTE,c),p.bindFramebuffer.set(null);const _=c[0]+(c[2]>>4<<8),C=c[1]+((15&c[2])<<8),T=this.coordsIndex[255-c[3]],k=T&&this.sourceCache.getTileByID(T);if(!k)return null;const R=this._coordsTextureSize,z=(1<<k.tileID.canonical.z)*R;return new a.U(this._allowMercatorOverflow(i,(k.tileID.canonical.x*R+_)/z),(k.tileID.canonical.y*R+C)/z,this.getElevation(k.tileID,_,C,R))}getTerrainMesh(){if(this._mesh)return this._mesh;const i=this.painter.context,c=new a.bd,p=new a.b0,g=this.meshSize,_=a.N/g,C=g*g;for(let L=0;L<=g;L++)for(let G=0;G<=g;G++)c.emplaceBack(G*_,L*_,0);for(let L=0;L<C;L+=g+1)for(let G=0;G<g;G++)p.emplaceBack(G+L,g+G+L+1,g+G+L+2),p.emplaceBack(G+L,g+G+L+2,G+L+1);const T=c.length,k=T+2*(g+1);for(const L of[0,1])for(let G=0;G<=g;G++)for(const te of[0,1])c.emplaceBack(G*_,L*a.N,te);for(let L=0;L<2*g;L+=2)p.emplaceBack(k+L,k+L+1,k+L+3),p.emplaceBack(k+L,k+L+3,k+L+2),p.emplaceBack(T+L,T+L+3,T+L+1),p.emplaceBack(T+L,T+L+2,T+L+3);const R=c.length,z=R+2*(g+1);for(const L of[0,1])for(let G=0;G<=g;G++)for(const te of[0,1])c.emplaceBack(L*a.N,G*_,te);for(let L=0;L<2*g;L+=2)p.emplaceBack(R+L,R+L+1,R+L+3),p.emplaceBack(R+L,R+L+3,R+L+2),p.emplaceBack(z+L,z+L+3,z+L+1),p.emplaceBack(z+L,z+L+2,z+L+3);return this._mesh={indexBuffer:i.createIndexBuffer(p),vertexBuffer:i.createVertexBuffer(c,Cp.members),segments:a.S.simpleSegment(0,0,c.length,p.length)},this._mesh}getMeshFrameDelta(i){return 2*Math.PI*a.be/Math.pow(2,i)/5}getMinTileElevationForLngLatZoom(i,c){var p;const{tileID:g}=this._getOverscaledTileIDFromLngLatZoom(i,c);return(p=this.getMinMaxElevation(g).minElevation)!==null&&p!==void 0?p:0}getMinMaxElevation(i){const c=this.getTerrainData(i).tile,p={minElevation:null,maxElevation:null};return c&&c.dem&&(p.minElevation=c.dem.min*this.exaggeration,p.maxElevation=c.dem.max*this.exaggeration),p}_getOverscaledTileIDFromLngLatZoom(i,c){const p=a.U.fromLngLat(i.wrap()),g=(1<<c)*a.N,_=p.x*g,C=p.y*g,T=Math.floor(_/a.N),k=Math.floor(C/a.N);return{tileID:new a.O(c,0,c,T,k),mercatorX:_,mercatorY:C}}_allowMercatorOverflow(i,c){const p=i.x<this.painter.width/2;let g=a.bf(c);const _=this.painter.transform.center.lng;return p&&Math.sign(g)>0&&Math.sign(_)<0||!p&&Math.sign(g)<0&&Math.sign(_)>0?(g=360*Math.sign(_)+g,a.G(g)):c}}class yv{constructor(i,c,p){this._context=i,this._size=c,this._tileSize=p,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const i of this._objects)i.texture.destroy(),i.fbo.destroy()}_createObject(i){const c=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),p=new ze(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return p.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),c.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),c.colorAttachment.set(p.texture),{id:i,fbo:c,texture:p,stamp:-1,inUse:!1}}getObjectForId(i){return this._objects[i]}useObject(i){i.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(c=>i.id!==c),this._recentlyUsed.push(i.id)}stampObject(i){i.stamp=++this._stamp}getOrCreateFreeObject(){for(const c of this._recentlyUsed)if(!this._objects[c].inUse)return this._objects[c];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const i=this._createObject(this._objects.length);return this._objects.push(i),i}freeObject(i){i.inUse=!1}freeAllObjects(){for(const i of this._objects)this.freeObject(i)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(i=>!i.inUse)===!1}}const Dr={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class Ku{constructor(i,c){this.painter=i,this.terrain=c,this.pool=new yv(i.context,30,c.sourceCache.tileSize*c.qualityFactor)}destruct(){this.pool.destruct()}getTexture(i){return this.pool.getObjectForId(i.rtt[this._stacks.length-1].id).texture}prepareForRender(i,c){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=i._order.filter(p=>!i._layers[p].isHidden(c)),this._coordsDescendingInv={};for(const p in i.sourceCaches){this._coordsDescendingInv[p]={};const g=i.sourceCaches[p].getVisibleCoordinates();for(const _ of g){const C=this.terrain.sourceCache.getTerrainCoords(_);for(const T in C)this._coordsDescendingInv[p][T]||(this._coordsDescendingInv[p][T]=[]),this._coordsDescendingInv[p][T].push(C[T])}}this._coordsDescendingInvStr={};for(const p of i._order){const g=i._layers[p],_=g.source;if(Dr[g.type]&&!this._coordsDescendingInvStr[_]){this._coordsDescendingInvStr[_]={};for(const C in this._coordsDescendingInv[_])this._coordsDescendingInvStr[_][C]=this._coordsDescendingInv[_][C].map(T=>T.key).sort().join()}}for(const p of this._renderableTiles)for(const g in this._coordsDescendingInvStr){const _=this._coordsDescendingInvStr[g][p.tileID.key];_&&_!==p.rttCoords[g]&&(p.rtt=[])}}renderLayer(i){if(i.isHidden(this.painter.transform.zoom))return!1;const c=i.type,p=this.painter,g=this._renderableLayerIds[this._renderableLayerIds.length-1]===i.id;if(Dr[c]&&(this._prevType&&Dr[this._prevType]||this._stacks.push([]),this._prevType=c,this._stacks[this._stacks.length-1].push(i.id),!g))return!0;if(Dr[this._prevType]||Dr[c]&&g){this._prevType=c;const _=this._stacks.length-1,C=this._stacks[_]||[];for(const T of this._renderableTiles){if(this.pool.isFull()&&(In(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(T),T.rtt[_]){const R=this.pool.getObjectForId(T.rtt[_].id);if(R.stamp===T.rtt[_].stamp){this.pool.useObject(R);continue}}const k=this.pool.getOrCreateFreeObject();this.pool.useObject(k),this.pool.stampObject(k),T.rtt[_]={id:k.id,stamp:k.stamp},p.context.bindFramebuffer.set(k.fbo.framebuffer),p.context.clear({color:a.aT.transparent,stencil:0}),p.currentStencilSource=void 0;for(let R=0;R<C.length;R++){const z=p.style._layers[C[R]],L=z.source?this._coordsDescendingInv[z.source][T.tileID.key]:[T.tileID];p.context.viewport.set([0,0,k.fbo.width,k.fbo.height]),p._renderTileClippingMasks(z,L),p.renderLayer(p,p.style.sourceCaches[z.source],z,L),z.source&&(T.rttCoords[z.source]=this._coordsDescendingInvStr[z.source][T.tileID.key])}}return In(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),Dr[c]}return!1}}const pt=w,Ct={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:a.c.MAX_TILE_CACHE_ZOOM_LEVELS,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0,maxCanvasSize:[4096,4096]},Fl=y=>{y.touchstart=y.dragStart,y.touchmoveWindow=y.dragMove,y.touchend=y.dragEnd},qh={showCompass:!0,showZoom:!0,visualizePitch:!1};class Gh{constructor(i,c,p=!1){this.mousedown=C=>{this.startMouse(a.e({},C,{ctrlKey:!0,preventDefault:()=>C.preventDefault()}),b.mousePos(this.element,C)),b.addEventListener(window,"mousemove",this.mousemove),b.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=C=>{this.moveMouse(C,b.mousePos(this.element,C))},this.mouseup=C=>{this.mouseRotate.dragEnd(C),this.mousePitch&&this.mousePitch.dragEnd(C),this.offTemp()},this.touchstart=C=>{C.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=b.touchPos(this.element,C.targetTouches)[0],this.startTouch(C,this._startPos),b.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),b.addEventListener(window,"touchend",this.touchend))},this.touchmove=C=>{C.targetTouches.length!==1?this.reset():(this._lastPos=b.touchPos(this.element,C.targetTouches)[0],this.moveTouch(C,this._lastPos))},this.touchend=C=>{C.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const g=i.dragRotate._mouseRotate.getClickTolerance(),_=i.dragRotate._mousePitch.getClickTolerance();this.element=c,this.mouseRotate=Ta({clickTolerance:g,enable:!0}),this.touchRotate=(({enable:C,clickTolerance:T,bearingDegreesPerPixelMoved:k=.8})=>{const R=new vp;return new Fs({clickTolerance:T,move:(z,L)=>({bearingDelta:(L.x-z.x)*k}),moveStateManager:R,enable:C,assignEvents:Fl})})({clickTolerance:g,enable:!0}),this.map=i,p&&(this.mousePitch=Ns({clickTolerance:_,enable:!0}),this.touchPitch=(({enable:C,clickTolerance:T,pitchDegreesPerPixelMoved:k=-.5})=>{const R=new vp;return new Fs({clickTolerance:T,move:(z,L)=>({pitchDelta:(L.y-z.y)*k}),moveStateManager:R,enable:C,assignEvents:Fl})})({clickTolerance:_,enable:!0})),b.addEventListener(c,"mousedown",this.mousedown),b.addEventListener(c,"touchstart",this.touchstart,{passive:!1}),b.addEventListener(c,"touchcancel",this.reset)}startMouse(i,c){this.mouseRotate.dragStart(i,c),this.mousePitch&&this.mousePitch.dragStart(i,c),b.disableDrag()}startTouch(i,c){this.touchRotate.dragStart(i,c),this.touchPitch&&this.touchPitch.dragStart(i,c),b.disableDrag()}moveMouse(i,c){const p=this.map,{bearingDelta:g}=this.mouseRotate.dragMove(i,c)||{};if(g&&p.setBearing(p.getBearing()+g),this.mousePitch){const{pitchDelta:_}=this.mousePitch.dragMove(i,c)||{};_&&p.setPitch(p.getPitch()+_)}}moveTouch(i,c){const p=this.map,{bearingDelta:g}=this.touchRotate.dragMove(i,c)||{};if(g&&p.setBearing(p.getBearing()+g),this.touchPitch){const{pitchDelta:_}=this.touchPitch.dragMove(i,c)||{};_&&p.setPitch(p.getPitch()+_)}}off(){const i=this.element;b.removeEventListener(i,"mousedown",this.mousedown),b.removeEventListener(i,"touchstart",this.touchstart,{passive:!1}),b.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),b.removeEventListener(window,"touchend",this.touchend),b.removeEventListener(i,"touchcancel",this.reset),this.offTemp()}offTemp(){b.enableDrag(),b.removeEventListener(window,"mousemove",this.mousemove),b.removeEventListener(window,"mouseup",this.mouseup),b.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),b.removeEventListener(window,"touchend",this.touchend)}}let $n;function Zh(y,i,c){if(y=new a.L(y.lng,y.lat),i){const p=new a.L(y.lng-360,y.lat),g=new a.L(y.lng+360,y.lat),_=c.locationPoint(y).distSqr(i);c.locationPoint(p).distSqr(i)<_?y=p:c.locationPoint(g).distSqr(i)<_&&(y=g)}for(;Math.abs(y.lng-c.center.lng)>180;){const p=c.locationPoint(y);if(p.x>=0&&p.y>=0&&p.x<=c.width&&p.y<=c.height)break;y.lng>c.center.lng?y.lng-=360:y.lng+=360}return y}const Oi={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Pp(y,i,c){const p=y.classList;for(const g in Oi)p.remove(`maplibregl-${c}-anchor-${g}`);p.add(`maplibregl-${c}-anchor-${i}`)}class Lo extends a.E{constructor(i){if(super(),this._onKeyPress=c=>{const p=c.code,g=c.charCode||c.keyCode;p!=="Space"&&p!=="Enter"&&g!==32&&g!==13||this.togglePopup()},this._onMapClick=c=>{const p=c.originalEvent.target,g=this._element;this._popup&&(p===g||g.contains(p))&&this.togglePopup()},this._update=c=>{if(!this._map)return;const p=this._map.loaded()&&!this._map.isMoving();((c==null?void 0:c.type)==="terrain"||(c==null?void 0:c.type)==="render"&&!p)&&this._map.once("render",this._update),this._map.transform.renderWorldCopies&&(this._lngLat=Zh(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let g="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?g=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(g=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let _="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?_="rotateX(0deg)":this._pitchAlignment==="map"&&(_=`rotateX(${this._map.getPitch()}deg)`),c&&c.type!=="moveend"||(this._pos=this._pos.round()),b.setTransform(this._element,`${Oi[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${_} ${g}`),this._map.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const C=this._map.unproject(this._pos),T=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=C.distanceTo(this._lngLat)>20*T?"0.2":"1.0",this._opacityTimeout=null},100))},this._onMove=c=>{if(!this._isDragging){const p=this._clickTolerance||this._map._clickTolerance;this._isDragging=c.point.dist(this._pointerdownPos)>=p}this._isDragging&&(this._pos=c.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.k("dragstart"))),this.fire(new a.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new a.k("dragend")),this._state="inactive"},this._addDragHandler=c=>{this._element.contains(c.originalEvent.target)&&(c.preventDefault(),this._positionDelta=c.point.sub(this._pos).add(this._offset),this._pointerdownPos=c.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=i&&i.anchor||"center",this._color=i&&i.color||"#3FB1CE",this._scale=i&&i.scale||1,this._draggable=i&&i.draggable||!1,this._clickTolerance=i&&i.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=i&&i.rotation||0,this._rotationAlignment=i&&i.rotationAlignment||"auto",this._pitchAlignment=i&&i.pitchAlignment&&i.pitchAlignment!=="auto"?i.pitchAlignment:this._rotationAlignment,i&&i.element)this._element=i.element,this._offset=a.P.convert(i&&i.offset||[0,0]);else{this._defaultMarker=!0,this._element=b.create("div"),this._element.setAttribute("aria-label","Map marker");const c=b.createNS("http://www.w3.org/2000/svg","svg"),p=41,g=27;c.setAttributeNS(null,"display","block"),c.setAttributeNS(null,"height",`${p}px`),c.setAttributeNS(null,"width",`${g}px`),c.setAttributeNS(null,"viewBox",`0 0 ${g} ${p}`);const _=b.createNS("http://www.w3.org/2000/svg","g");_.setAttributeNS(null,"stroke","none"),_.setAttributeNS(null,"stroke-width","1"),_.setAttributeNS(null,"fill","none"),_.setAttributeNS(null,"fill-rule","evenodd");const C=b.createNS("http://www.w3.org/2000/svg","g");C.setAttributeNS(null,"fill-rule","nonzero");const T=b.createNS("http://www.w3.org/2000/svg","g");T.setAttributeNS(null,"transform","translate(3.0, 29.0)"),T.setAttributeNS(null,"fill","#000000");const k=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const ye of k){const Te=b.createNS("http://www.w3.org/2000/svg","ellipse");Te.setAttributeNS(null,"opacity","0.04"),Te.setAttributeNS(null,"cx","10.5"),Te.setAttributeNS(null,"cy","5.80029008"),Te.setAttributeNS(null,"rx",ye.rx),Te.setAttributeNS(null,"ry",ye.ry),T.appendChild(Te)}const R=b.createNS("http://www.w3.org/2000/svg","g");R.setAttributeNS(null,"fill",this._color);const z=b.createNS("http://www.w3.org/2000/svg","path");z.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),R.appendChild(z);const L=b.createNS("http://www.w3.org/2000/svg","g");L.setAttributeNS(null,"opacity","0.25"),L.setAttributeNS(null,"fill","#000000");const G=b.createNS("http://www.w3.org/2000/svg","path");G.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),L.appendChild(G);const te=b.createNS("http://www.w3.org/2000/svg","g");te.setAttributeNS(null,"transform","translate(6.0, 7.0)"),te.setAttributeNS(null,"fill","#FFFFFF");const ee=b.createNS("http://www.w3.org/2000/svg","g");ee.setAttributeNS(null,"transform","translate(8.0, 8.0)");const ie=b.createNS("http://www.w3.org/2000/svg","circle");ie.setAttributeNS(null,"fill","#000000"),ie.setAttributeNS(null,"opacity","0.25"),ie.setAttributeNS(null,"cx","5.5"),ie.setAttributeNS(null,"cy","5.5"),ie.setAttributeNS(null,"r","5.4999962");const Y=b.createNS("http://www.w3.org/2000/svg","circle");Y.setAttributeNS(null,"fill","#FFFFFF"),Y.setAttributeNS(null,"cx","5.5"),Y.setAttributeNS(null,"cy","5.5"),Y.setAttributeNS(null,"r","5.4999962"),ee.appendChild(ie),ee.appendChild(Y),C.appendChild(T),C.appendChild(R),C.appendChild(L),C.appendChild(te),C.appendChild(ee),c.appendChild(C),c.setAttributeNS(null,"height",p*this._scale+"px"),c.setAttributeNS(null,"width",g*this._scale+"px"),this._element.appendChild(c),this._offset=a.P.convert(i&&i.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",c=>{c.preventDefault()}),this._element.addEventListener("mousedown",c=>{c.preventDefault()}),Pp(this._element,this._anchor,"marker"),i&&i.className)for(const c of i.className.split(" "))this._element.classList.add(c);this._popup=null}addTo(i){return this.remove(),this._map=i,i.getCanvasContainer().appendChild(this._element),i.on("move",this._update),i.on("moveend",this._update),i.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),b.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(i){return this._lngLat=a.L.convert(i),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(i){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),i){if(!("offset"in i.options)){const g=Math.abs(13.5)/Math.SQRT2;i.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[g,-1*(38.1-13.5+g)],"bottom-right":[-g,-1*(38.1-13.5+g)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=i,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){const i=this._popup;return i?(i.isOpen()?i.remove():i.addTo(this._map),this):this}getOffset(){return this._offset}setOffset(i){return this._offset=a.P.convert(i),this._update(),this}addClassName(i){this._element.classList.add(i)}removeClassName(i){this._element.classList.remove(i)}toggleClassName(i){return this._element.classList.toggle(i)}setDraggable(i){return this._draggable=!!i,this._map&&(i?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(i){return this._rotation=i||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(i){return this._rotationAlignment=i||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(i){return this._pitchAlignment=i&&i!=="auto"?i:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const Mn={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let En=0,Pa=!1;const Nl={maxWidth:100,unit:"metric"};function Bl(y,i,c){const p=c&&c.maxWidth||100,g=y._container.clientHeight/2,_=y.unproject([0,g]),C=y.unproject([p,g]),T=_.distanceTo(C);if(c&&c.unit==="imperial"){const k=3.2808*T;k>5280?Oo(i,p,k/5280,y._getUIString("ScaleControl.Miles")):Oo(i,p,k,y._getUIString("ScaleControl.Feet"))}else c&&c.unit==="nautical"?Oo(i,p,T/1852,y._getUIString("ScaleControl.NauticalMiles")):T>=1e3?Oo(i,p,T/1e3,y._getUIString("ScaleControl.Kilometers")):Oo(i,p,T,y._getUIString("ScaleControl.Meters"))}function Oo(y,i,c,p){const g=function(_){const C=Math.pow(10,`${Math.floor(_)}`.length-1);let T=_/C;return T=T>=10?10:T>=5?5:T>=3?3:T>=2?2:T>=1?1:function(k){const R=Math.pow(10,Math.ceil(-Math.log(k)/Math.LN10));return Math.round(k*R)/R}(T),C*T}(c);y.style.width=i*(g/c)+"px",y.innerHTML=`${g}&nbsp;${p}`}const Wh={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Hh=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Aa(y){if(y){if(typeof y=="number"){const i=Math.round(Math.abs(y)/Math.SQRT2);return{center:new a.P(0,0),top:new a.P(0,y),"top-left":new a.P(i,i),"top-right":new a.P(-i,i),bottom:new a.P(0,-y),"bottom-left":new a.P(i,-i),"bottom-right":new a.P(-i,-i),left:new a.P(y,0),right:new a.P(-y,0)}}if(y instanceof a.P||Array.isArray(y)){const i=a.P.convert(y);return{center:i,top:i,"top-left":i,"top-right":i,bottom:i,"bottom-left":i,"bottom-right":i,left:i,right:i}}return{center:a.P.convert(y.center||[0,0]),top:a.P.convert(y.top||[0,0]),"top-left":a.P.convert(y["top-left"]||[0,0]),"top-right":a.P.convert(y["top-right"]||[0,0]),bottom:a.P.convert(y.bottom||[0,0]),"bottom-left":a.P.convert(y["bottom-left"]||[0,0]),"bottom-right":a.P.convert(y["bottom-right"]||[0,0]),left:a.P.convert(y.left||[0,0]),right:a.P.convert(y.right||[0,0])}}return Aa(new a.P(0,0))}const Kh={extend:(y,...i)=>a.e(y,...i),run(y){y()},logToElement(y,i=!1,c="log"){const p=window.document.getElementById(c);p&&(i&&(p.innerHTML=""),p.innerHTML+=`<br>${y}`)}},Xh=w;class en{static get version(){return Xh}static get workerCount(){return Vt.workerCount}static set workerCount(i){Vt.workerCount=i}static get maxParallelImageRequests(){return a.c.MAX_PARALLEL_IMAGE_REQUESTS}static set maxParallelImageRequests(i){a.c.MAX_PARALLEL_IMAGE_REQUESTS=i}static get workerUrl(){return a.c.WORKER_URL}static set workerUrl(i){a.c.WORKER_URL=i}static addProtocol(i,c){a.c.REGISTERED_PROTOCOLS[i]=c}static removeProtocol(i){delete a.c.REGISTERED_PROTOCOLS[i]}}return en.Map=class extends Sp{constructor(y){if(a.bg.mark(a.bh.create),(y=a.e({},Ct,y)).minZoom!=null&&y.maxZoom!=null&&y.minZoom>y.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(y.minPitch!=null&&y.maxPitch!=null&&y.minPitch>y.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(y.minPitch!=null&&y.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(y.maxPitch!=null&&y.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new qu(y.minZoom,y.maxZoom,y.minPitch,y.maxPitch,y.renderWorldCopies),{bearingSnap:y.bearingSnap}),this._cooperativeGesturesOnWheel=i=>{this._onCooperativeGesture(i,i[this._metaKey],1)},this._contextLost=i=>{i.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new a.k("webglcontextlost",{originalEvent:i}))},this._contextRestored=i=>{this._setupPainter(),this.resize(),this._update(),this.fire(new a.k("webglcontextrestored",{originalEvent:i}))},this._onMapScroll=i=>{if(i.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=y.interactive,this._cooperativeGestures=y.cooperativeGestures,this._metaKey=navigator.platform.indexOf("Mac")===0?"metaKey":"ctrlKey",this._maxTileCacheSize=y.maxTileCacheSize,this._maxTileCacheZoomLevels=y.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=y.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=y.preserveDrawingBuffer,this._antialias=y.antialias,this._trackResize=y.trackResize,this._bearingSnap=y.bearingSnap,this._refreshExpiredTiles=y.refreshExpiredTiles,this._fadeDuration=y.fadeDuration,this._crossSourceCollisions=y.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=y.collectResourceTiming,this._renderTaskQueue=new Hu,this._controls=[],this._mapId=a.a2(),this._locale=a.e({},Uh,y.locale),this._clickTolerance=y.clickTolerance,this._overridePixelRatio=y.pixelRatio,this._maxCanvasSize=y.maxCanvasSize,this.transformCameraUpdate=y.transformCameraUpdate,this._imageQueueHandle=K.addThrottleControl(()=>this.isMoving()),this._requestManager=new N(y.transformRequest),typeof y.container=="string"){if(this._container=document.getElementById(y.container),!this._container)throw new Error(`Container '${y.container}' not found.`)}else{if(!(y.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=y.container}if(y.maxBounds&&this.setMaxBounds(y.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let i=!1;const c=zo(p=>{this._trackResize&&!this._removed&&this.resize(p)._update()},50);this._resizeObserver=new ResizeObserver(p=>{i?c(p):i=!0}),this._resizeObserver.observe(this._container)}this.handlers=new jh(this,y),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=y.hash&&new Rl(typeof y.hash=="string"&&y.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:y.center,zoom:y.zoom,bearing:y.bearing,pitch:y.pitch}),y.bounds&&(this.resize(),this.fitBounds(y.bounds,a.e({},y.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=y.localIdeographFontFamily,this._validateStyle=y.validateStyle,y.style&&this.setStyle(y.style,{localIdeographFontFamily:y.localIdeographFontFamily}),y.attributionControl&&this.addControl(new mi({customAttribution:y.customAttribution})),y.maplibreLogo&&this.addControl(new fn,y.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",i=>{this._update(i.dataType==="style"),this.fire(new a.k(`${i.dataType}data`,i))}),this.on("dataloading",i=>{this.fire(new a.k(`${i.dataType}dataloading`,i))}),this.on("dataabort",i=>{this.fire(new a.k("sourcedataabort",i))})}_getMapId(){return this._mapId}addControl(y,i){if(i===void 0&&(i=y.getDefaultPosition?y.getDefaultPosition():"top-right"),!y||!y.onAdd)return this.fire(new a.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const c=y.onAdd(this);this._controls.push(y);const p=this._controlPositions[i];return i.indexOf("bottom")!==-1?p.insertBefore(c,p.firstChild):p.appendChild(c),this}removeControl(y){if(!y||!y.onRemove)return this.fire(new a.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const i=this._controls.indexOf(y);return i>-1&&this._controls.splice(i,1),y.onRemove(this),this}hasControl(y){return this._controls.indexOf(y)>-1}calculateCameraOptionsFromTo(y,i,c,p){return p==null&&this.terrain&&(p=this.terrain.getElevationForLngLatZoom(c,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(y,i,c,p)}resize(y){var i;const c=this._containerDimensions(),p=c[0],g=c[1],_=this._getClampedPixelRatio(p,g);if(this._resizeCanvas(p,g,_),this.painter.resize(p,g,_),this.painter.overLimit()){const T=this.painter.context.gl;this._maxCanvasSize=[T.drawingBufferWidth,T.drawingBufferHeight];const k=this._getClampedPixelRatio(p,g);this._resizeCanvas(p,g,k),this.painter.resize(p,g,k)}this.transform.resize(p,g),(i=this._requestedCameraState)===null||i===void 0||i.resize(p,g);const C=!this._moving;return C&&(this.stop(),this.fire(new a.k("movestart",y)).fire(new a.k("move",y))),this.fire(new a.k("resize",y)),C&&this.fire(new a.k("moveend",y)),this}_getClampedPixelRatio(y,i){const{0:c,1:p}=this._maxCanvasSize,g=this.getPixelRatio(),_=y*g,C=i*g;return Math.min(_>c?c/_:1,C>p?p/C:1)*g}getPixelRatio(){var y;return(y=this._overridePixelRatio)!==null&&y!==void 0?y:devicePixelRatio}setPixelRatio(y){this._overridePixelRatio=y,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(y){return this.transform.setMaxBounds(Rt.convert(y)),this._update()}setMinZoom(y){if((y=y??-2)>=-2&&y<=this.transform.maxZoom)return this.transform.minZoom=y,this._update(),this.getZoom()<y&&this.setZoom(y),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(y){if((y=y??22)>=this.transform.minZoom)return this.transform.maxZoom=y,this._update(),this.getZoom()>y&&this.setZoom(y),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(y){if((y=y??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(y>=0&&y<=this.transform.maxPitch)return this.transform.minPitch=y,this._update(),this.getPitch()<y&&this.setPitch(y),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(y){if((y=y??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(y>=this.transform.minPitch)return this.transform.maxPitch=y,this._update(),this.getPitch()>y&&this.setPitch(y),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(y){return this.transform.renderWorldCopies=y,this._update()}getCooperativeGestures(){return this._cooperativeGestures}setCooperativeGestures(y){return this._cooperativeGestures=y,this._cooperativeGestures?this._setupCooperativeGestures():this._destroyCooperativeGestures(),this}project(y){return this.transform.locationPoint(a.L.convert(y),this.style&&this.terrain)}unproject(y){return this.transform.pointLocation(a.P.convert(y),this.terrain)}isMoving(){var y;return this._moving||((y=this.handlers)===null||y===void 0?void 0:y.isMoving())}isZooming(){var y;return this._zooming||((y=this.handlers)===null||y===void 0?void 0:y.isZooming())}isRotating(){var y;return this._rotating||((y=this.handlers)===null||y===void 0?void 0:y.isRotating())}_createDelegatedListener(y,i,c){if(y==="mouseenter"||y==="mouseover"){let p=!1;return{layer:i,listener:c,delegates:{mousemove:_=>{const C=this.getLayer(i)?this.queryRenderedFeatures(_.point,{layers:[i]}):[];C.length?p||(p=!0,c.call(this,new pi(y,this,_.originalEvent,{features:C}))):p=!1},mouseout:()=>{p=!1}}}}if(y==="mouseleave"||y==="mouseout"){let p=!1;return{layer:i,listener:c,delegates:{mousemove:C=>{(this.getLayer(i)?this.queryRenderedFeatures(C.point,{layers:[i]}):[]).length?p=!0:p&&(p=!1,c.call(this,new pi(y,this,C.originalEvent)))},mouseout:C=>{p&&(p=!1,c.call(this,new pi(y,this,C.originalEvent)))}}}}{const p=g=>{const _=this.getLayer(i)?this.queryRenderedFeatures(g.point,{layers:[i]}):[];_.length&&(g.features=_,c.call(this,g),delete g.features)};return{layer:i,listener:c,delegates:{[y]:p}}}}on(y,i,c){if(c===void 0)return super.on(y,i);const p=this._createDelegatedListener(y,i,c);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[y]=this._delegatedListeners[y]||[],this._delegatedListeners[y].push(p);for(const g in p.delegates)this.on(g,p.delegates[g]);return this}once(y,i,c){if(c===void 0)return super.once(y,i);const p=this._createDelegatedListener(y,i,c);for(const g in p.delegates)this.once(g,p.delegates[g]);return this}off(y,i,c){return c===void 0?super.off(y,i):(this._delegatedListeners&&this._delegatedListeners[y]&&(p=>{const g=this._delegatedListeners[y];for(let _=0;_<g.length;_++){const C=g[_];if(C.layer===i&&C.listener===c){for(const T in C.delegates)this.off(T,C.delegates[T]);return g.splice(_,1),this}}})(),this)}queryRenderedFeatures(y,i){if(!this.style)return[];let c;const p=y instanceof a.P||Array.isArray(y),g=p?y:[[0,0],[this.transform.width,this.transform.height]];if(i=i||(p?{}:y)||{},g instanceof a.P||typeof g[0]=="number")c=[a.P.convert(g)];else{const _=a.P.convert(g[0]),C=a.P.convert(g[1]);c=[_,new a.P(C.x,_.y),C,new a.P(_.x,C.y),_]}return this.style.queryRenderedFeatures(c,i,this.transform)}querySourceFeatures(y,i){return this.style.querySourceFeatures(y,i)}setStyle(y,i){return(i=a.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},i)).diff!==!1&&i.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&y?(this._diffStyle(y,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._updateStyle(y,i))}setTransformRequest(y){return this._requestManager.setTransformRequest(y),this}_getUIString(y){const i=this._locale[y];if(i==null)throw new Error(`Missing UI string '${y}'`);return i}_updateStyle(y,i){if(i.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(y,i));const c=this.style&&i.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!y)),y?(this.style=new mr(this,i||{}),this.style.setEventedParent(this,{style:this.style}),typeof y=="string"?this.style.loadURL(y,i,c):this.style.loadJSON(y,i,c),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new mr(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(y,i){if(typeof y=="string"){const c=this._requestManager.transformRequest(y,F.Style);a.f(c,(p,g)=>{p?this.fire(new a.j(p)):g&&this._updateDiff(g,i)})}else typeof y=="object"&&this._updateDiff(y,i)}_updateDiff(y,i){try{this.style.setState(y,i)&&this._update(!0)}catch(c){a.w(`Unable to perform style diff: ${c.message||c.error||c}.  Rebuilding the style from scratch.`),this._updateStyle(y,i)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():a.w("There is no style added to the map.")}addSource(y,i){return this._lazyInitEmptyStyle(),this.style.addSource(y,i),this._update(!0)}isSourceLoaded(y){const i=this.style&&this.style.sourceCaches[y];if(i!==void 0)return i.loaded();this.fire(new a.j(new Error(`There is no source with ID '${y}'`)))}setTerrain(y){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),y){const i=this.style.sourceCaches[y.source];if(!i)throw new Error(`cannot load terrain, because there exists no source with ID: ${y.source}`);for(const c in this.style._layers){const p=this.style._layers[c];p.type==="hillshade"&&p.source===y.source&&a.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Ep(this.painter,i,y),this.painter.renderToTexture=new Ku(this.painter,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=c=>{c.dataType==="style"?this.terrain.sourceCache.freeRtt():c.dataType==="source"&&c.tile&&(c.sourceId!==y.source||this._elevationFreeze||(this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(c.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0;return this.fire(new a.k("terrain",{terrain:y})),this}getTerrain(){var y,i;return(i=(y=this.terrain)===null||y===void 0?void 0:y.options)!==null&&i!==void 0?i:null}areTilesLoaded(){const y=this.style&&this.style.sourceCaches;for(const i in y){const c=y[i]._tiles;for(const p in c){const g=c[p];if(g.state!=="loaded"&&g.state!=="errored")return!1}}return!0}addSourceType(y,i,c){return this._lazyInitEmptyStyle(),this.style.addSourceType(y,i,c)}removeSource(y){return this.style.removeSource(y),this._update(!0)}getSource(y){return this.style.getSource(y)}addImage(y,i,c={}){const{pixelRatio:p=1,sdf:g=!1,stretchX:_,stretchY:C,content:T}=c;if(this._lazyInitEmptyStyle(),!(i instanceof HTMLImageElement||a.a(i))){if(i.width===void 0||i.height===void 0)return this.fire(new a.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:k,height:R,data:z}=i,L=i;return this.style.addImage(y,{data:new a.R({width:k,height:R},new Uint8Array(z)),pixelRatio:p,stretchX:_,stretchY:C,content:T,sdf:g,version:0,userImage:L}),L.onAdd&&L.onAdd(this,y),this}}{const{width:k,height:R,data:z}=a.h.getImageData(i);this.style.addImage(y,{data:new a.R({width:k,height:R},z),pixelRatio:p,stretchX:_,stretchY:C,content:T,sdf:g,version:0})}}updateImage(y,i){const c=this.style.getImage(y);if(!c)return this.fire(new a.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const p=i instanceof HTMLImageElement||a.a(i)?a.h.getImageData(i):i,{width:g,height:_,data:C}=p;if(g===void 0||_===void 0)return this.fire(new a.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(g!==c.data.width||_!==c.data.height)return this.fire(new a.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const T=!(i instanceof HTMLImageElement||a.a(i));return c.data.replace(C,T),this.style.updateImage(y,c),this}getImage(y){return this.style.getImage(y)}hasImage(y){return y?!!this.style.getImage(y):(this.fire(new a.j(new Error("Missing required image id"))),!1)}removeImage(y){this.style.removeImage(y)}loadImage(y,i){K.getImage(this._requestManager.transformRequest(y,F.Image),i)}listImages(){return this.style.listImages()}addLayer(y,i){return this._lazyInitEmptyStyle(),this.style.addLayer(y,i),this._update(!0)}moveLayer(y,i){return this.style.moveLayer(y,i),this._update(!0)}removeLayer(y){return this.style.removeLayer(y),this._update(!0)}getLayer(y){return this.style.getLayer(y)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(y,i,c){return this.style.setLayerZoomRange(y,i,c),this._update(!0)}setFilter(y,i,c={}){return this.style.setFilter(y,i,c),this._update(!0)}getFilter(y){return this.style.getFilter(y)}setPaintProperty(y,i,c,p={}){return this.style.setPaintProperty(y,i,c,p),this._update(!0)}getPaintProperty(y,i){return this.style.getPaintProperty(y,i)}setLayoutProperty(y,i,c,p={}){return this.style.setLayoutProperty(y,i,c,p),this._update(!0)}getLayoutProperty(y,i){return this.style.getLayoutProperty(y,i)}setGlyphs(y,i={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(y,i),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(y,i,c={}){return this._lazyInitEmptyStyle(),this.style.addSprite(y,i,c,p=>{p||this._update(!0)}),this}removeSprite(y){return this._lazyInitEmptyStyle(),this.style.removeSprite(y),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(y,i={}){return this._lazyInitEmptyStyle(),this.style.setSprite(y,i,c=>{c||this._update(!0)}),this}setLight(y,i={}){return this._lazyInitEmptyStyle(),this.style.setLight(y,i),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(y,i){return this.style.setFeatureState(y,i),this._update()}removeFeatureState(y,i){return this.style.removeFeatureState(y,i),this._update()}getFeatureState(y){return this.style.getFeatureState(y)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let y=0,i=0;return this._container&&(y=this._container.clientWidth||400,i=this._container.clientHeight||300),[y,i]}_setupContainer(){const y=this._container;y.classList.add("maplibregl-map");const i=this._canvasContainer=b.create("div","maplibregl-canvas-container",y);this._interactive&&i.classList.add("maplibregl-interactive"),this._canvas=b.create("canvas","maplibregl-canvas",i),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const c=this._containerDimensions(),p=this._getClampedPixelRatio(c[0],c[1]);this._resizeCanvas(c[0],c[1],p);const g=this._controlContainer=b.create("div","maplibregl-control-container",y),_=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(C=>{_[C]=b.create("div",`maplibregl-ctrl-${C} `,g)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){this._cooperativeGesturesScreen=b.create("div","maplibregl-cooperative-gesture-screen",this._container);let y=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(y=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use ⌘ + scroll to zoom the map"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${y}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,this._cooperativeGesturesScreen.setAttribute("aria-hidden","true"),this._canvasContainer.addEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.add("maplibregl-cooperative-gestures")}_destroyCooperativeGestures(){b.remove(this._cooperativeGesturesScreen),this._canvasContainer.removeEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.remove("maplibregl-cooperative-gestures")}_resizeCanvas(y,i,c){this._canvas.width=Math.floor(c*y),this._canvas.height=Math.floor(c*i),this._canvas.style.width=`${y}px`,this._canvas.style.height=`${i}px`}_setupPainter(){const y={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let i=null;this._canvas.addEventListener("webglcontextcreationerror",p=>{i={requestedAttributes:y},p&&(i.statusMessage=p.statusMessage,i.type=p.type)},{once:!0});const c=this._canvas.getContext("webgl2",y)||this._canvas.getContext("webgl",y);if(!c){const p="Failed to initialize WebGL";throw i?(i.message=p,new Error(JSON.stringify(i))):new Error(p)}this.painter=new Do(c,this.transform),P.testSupport(c)}_onCooperativeGesture(y,i,c){return!i&&c<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(y){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||y,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(y){return this._update(),this._renderTaskQueue.add(y)}_cancelRenderFrame(y){this._renderTaskQueue.remove(y)}_render(y){const i=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(y),this._removed)return;let c=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const g=this.transform.zoom,_=a.h.now();this.style.zoomHistory.update(g,_);const C=new a.a8(g,{now:_,fadeDuration:i,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),T=C.crossFadingFactor();T===1&&T===this._crossFadingFactor||(c=!0,this._crossFadingFactor=T),this.style.update(C)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,i,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:i,showPadding:this.showPadding}),this.fire(new a.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,a.bg.mark(a.bh.load),this.fire(new a.k("load"))),this.style&&(this.style.hasTransitions()||c)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const p=this._sourcesDirty||this._styleDirty||this._placementDirty;return p||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new a.k("idle")),!this._loaded||this._fullyLoaded||p||(this._fullyLoaded=!0,a.bg.mark(a.bh.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){var y;this._hash&&this._hash.remove();for(const c of this._controls)c.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),K.removeThrottleControl(this._imageQueueHandle),(y=this._resizeObserver)===null||y===void 0||y.disconnect();const i=this.painter.context.gl.getExtension("WEBGL_lose_context");i&&i.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),b.remove(this._canvasContainer),b.remove(this._controlContainer),this._cooperativeGestures&&this._destroyCooperativeGestures(),this._container.classList.remove("maplibregl-map"),a.bg.clearMetrics(),this._removed=!0,this.fire(new a.k("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=a.h.frame(y=>{a.bg.frame(y),this._frame=null,this._render(y)}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(y){this._showTileBoundaries!==y&&(this._showTileBoundaries=y,this._update())}get showPadding(){return!!this._showPadding}set showPadding(y){this._showPadding!==y&&(this._showPadding=y,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(y){this._showCollisionBoxes!==y&&(this._showCollisionBoxes=y,y?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(y){this._showOverdrawInspector!==y&&(this._showOverdrawInspector=y,this._update())}get repaint(){return!!this._repaint}set repaint(y){this._repaint!==y&&(this._repaint=y,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(y){this._vertices=y,this._update()}get version(){return pt}getCameraTargetElevation(){return this.transform.elevation}},en.NavigationControl=class{constructor(y){this._updateZoomButtons=()=>{const i=this._map.getZoom(),c=i===this._map.getMaxZoom(),p=i===this._map.getMinZoom();this._zoomInButton.disabled=c,this._zoomOutButton.disabled=p,this._zoomInButton.setAttribute("aria-disabled",c.toString()),this._zoomOutButton.setAttribute("aria-disabled",p.toString())},this._rotateCompassArrow=()=>{const i=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=i},this._setButtonTitle=(i,c)=>{const p=this._map._getUIString(`NavigationControl.${c}`);i.title=p,i.setAttribute("aria-label",p)},this.options=a.e({},qh,y),this._container=b.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",i=>i.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",i=>this._map.zoomIn({},{originalEvent:i})),b.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",i=>this._map.zoomOut({},{originalEvent:i})),b.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",i=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:i}):this._map.resetNorth({},{originalEvent:i})}),this._compassIcon=b.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(y){return this._map=y,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Gh(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){b.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(y,i){const c=b.create("button",y,this._container);return c.type="button",c.addEventListener("click",i),c}},en.GeolocateControl=class extends a.E{constructor(y){super(),this._onSuccess=i=>{if(this._map){if(this._isOutOfMapMaxBounds(i))return this._setErrorState(),this.fire(new a.k("outofmaxbounds",i)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=i,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(i),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(i),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new a.k("geolocate",i)),this._finish()}},this._updateCamera=i=>{const c=new a.L(i.coords.longitude,i.coords.latitude),p=i.coords.accuracy,g=this._map.getBearing(),_=a.e({bearing:g},this.options.fitBoundsOptions),C=Rt.fromLngLat(c,p);this._map.fitBounds(C,_,{geolocateSource:!0})},this._updateMarker=i=>{if(i){const c=new a.L(i.coords.longitude,i.coords.latitude);this._accuracyCircleMarker.setLngLat(c).addTo(this._map),this._userLocationDotMarker.setLngLat(c).addTo(this._map),this._accuracy=i.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=i=>{if(this._map){if(this.options.trackUserLocation)if(i.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(i.code===3&&Pa)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new a.k("error",i)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=i=>{if(this._map){if(this._container.addEventListener("contextmenu",c=>c.preventDefault()),this._geolocateButton=b.create("button","maplibregl-ctrl-geolocate",this._container),b.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",i===!1){a.w("Geolocation support is not available so the GeolocateControl will be disabled.");const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}else{const c=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=b.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Lo({element:this._dotElement}),this._circleElement=b.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Lo({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",c=>{c.geolocateSource||this._watchState!=="ACTIVE_LOCK"||c.originalEvent&&c.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new a.k("trackuserlocationend")))})}},this.options=a.e({},Mn,y)}onAdd(y){return this._map=y,this._container=b.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(i,c=!1){$n===void 0||c?window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(p=>{$n=p.state!=="denied",i($n)}).catch(()=>{$n=!!window.navigator.geolocation,i($n)}):($n=!!window.navigator.geolocation,i($n)):i($n)}(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),b.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,En=0,Pa=!1}_isOutOfMapMaxBounds(y){const i=this._map.getMaxBounds(),c=y.coords;return i&&(c.longitude<i.getWest()||c.longitude>i.getEast()||c.latitude<i.getSouth()||c.latitude>i.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const y=this._map.getBounds(),i=y.getSouthEast(),c=y.getNorthEast(),p=i.distanceTo(c),g=Math.ceil(this._accuracy/(p/this._map._container.clientHeight)*2);this._circleElement.style.width=`${g}px`,this._circleElement.style.height=`${g}px`}trigger(){if(!this._setup)return a.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":En--,Pa=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new a.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.k("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let y;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),En++,En>1?(y={maximumAge:6e5,timeout:0},Pa=!0):(y=this.options.positionOptions,Pa=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,y)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},en.AttributionControl=mi,en.LogoControl=fn,en.ScaleControl=class{constructor(y){this._onMove=()=>{Bl(this._map,this._container,this.options)},this.setUnit=i=>{this.options.unit=i,Bl(this._map,this._container,this.options)},this.options=a.e({},Nl,y)}getDefaultPosition(){return"bottom-left"}onAdd(y){return this._map=y,this._container=b.create("div","maplibregl-ctrl maplibregl-ctrl-scale",y.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){b.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},en.FullscreenControl=class extends a.E{constructor(y={}){super(),this._onFullscreenChange=()=>{(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,y&&y.container&&(y.container instanceof HTMLElement?this._container=y.container:a.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(y){return this._map=y,this._container||(this._container=this._map.getContainer()),this._controlContainer=b.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){b.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const y=this._fullscreenButton=b.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);b.create("span","maplibregl-ctrl-icon",y).setAttribute("aria-hidden","true"),y.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const y=this._getTitle();this._fullscreenButton.setAttribute("aria-label",y),this._fullscreenButton.title=y}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new a.k("fullscreenstart")),this._map._cooperativeGestures&&(this._prevCooperativeGestures=this._map._cooperativeGestures,this._map.setCooperativeGestures())):(this.fire(new a.k("fullscreenend")),this._prevCooperativeGestures&&(this._map.setCooperativeGestures(this._prevCooperativeGestures),delete this._prevCooperativeGestures))}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},en.TerrainControl=class{constructor(y){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))},this.options=y}onAdd(y){return this._map=y,this._container=b.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=b.create("button","maplibregl-ctrl-terrain",this._container),b.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){b.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},en.Popup=class extends a.E{constructor(y){super(),this.remove=()=>(this._content&&b.remove(this._content),this._container&&(b.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new a.k("close")),this),this._onMouseUp=i=>{this._update(i.point)},this._onMouseMove=i=>{this._update(i.point)},this._onDrag=i=>{this._update(i.point)},this._update=i=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=b.create("div","maplibregl-popup",this._map.getContainer()),this._tip=b.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const C of this.options.className.split(" "))this._container.classList.add(C);this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Zh(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!i)return;const c=this._pos=this._trackPointer&&i?i:this._map.project(this._lngLat);let p=this.options.anchor;const g=Aa(this.options.offset);if(!p){const C=this._container.offsetWidth,T=this._container.offsetHeight;let k;k=c.y+g.bottom.y<T?["top"]:c.y>this._map.transform.height-T?["bottom"]:[],c.x<C/2?k.push("left"):c.x>this._map.transform.width-C/2&&k.push("right"),p=k.length===0?"bottom":k.join("-")}const _=c.add(g[p]).round();b.setTransform(this._container,`${Oi[p]} translate(${_.x}px,${_.y}px)`),Pp(this._container,p,"popup")},this._onClose=()=>{this.remove()},this.options=a.e(Object.create(Wh),y)}addTo(y){return this._map&&this.remove(),this._map=y,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new a.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(y){return this._lngLat=a.L.convert(y),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(y){return this.setDOMContent(document.createTextNode(y))}setHTML(y){const i=document.createDocumentFragment(),c=document.createElement("body");let p;for(c.innerHTML=y;p=c.firstChild,p;)i.appendChild(p);return this.setDOMContent(i)}getMaxWidth(){var y;return(y=this._container)===null||y===void 0?void 0:y.style.maxWidth}setMaxWidth(y){return this.options.maxWidth=y,this._update(),this}setDOMContent(y){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=b.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(y),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(y){this._container&&this._container.classList.add(y)}removeClassName(y){this._container&&this._container.classList.remove(y)}setOffset(y){return this.options.offset=y,this._update(),this}toggleClassName(y){if(this._container)return this._container.classList.toggle(y)}_createCloseButton(){this.options.closeButton&&(this._closeButton=b.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const y=this._container.querySelector(Hh);y&&y.focus()}},en.Marker=Lo,en.Style=mr,en.LngLat=a.L,en.LngLatBounds=Rt,en.Point=a.P,en.MercatorCoordinate=a.U,en.Evented=a.E,en.AJAXError=a.bi,en.config=a.c,en.CanvasSource=as,en.GeoJSONSource=Ai,en.ImageSource=Wr,en.RasterDEMTileSource=Gr,en.RasterTileSource=cr,en.VectorTileSource=ui,en.VideoSource=to,en.setRTLTextPlugin=a.bj,en.getRTLTextPluginStatus=a.bk,en.prewarm=function(){qi().acquire(Xe)},en.clearPrewarmedResources=function(){const y=An;y&&(y.isPreloaded()&&y.numActive()===1?(y.release(Xe),An=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},Kh.extend(en,{isSafari:a.ac,getPerformanceMetrics:a.bg.getPerformanceMetrics}),en});var f=u;return f})})(VD);var TG=VD.exports;function EG({mapOptions:e,enable3D:t=!1,disableRotation:n=!1}){const[s,u]=X.useState(null),[h,f]=X.useState(!1);return X.useEffect(()=>{const a=new TG.Map({container:"maplibre-gl-map",style:{version:8,sources:{},layers:[]},center:[0,0],zoom:1,attributionControl:!1,...e});u(a)},[]),X.useEffect(()=>{s&&s.on("load",()=>{s.addSource("terrainSource",{type:"raster-dem",tiles:["https://vtc-cdn.maptoolkit.net/terrainrgb/{z}/{x}/{y}.webp"],encoding:"mapbox",maxzoom:14,minzoom:4}),f(!0)})},[s]),X.useEffect(()=>{!s||!h||(t?s.setTerrain({source:"terrainSource",exaggeration:.6}):s.setTerrain())},[s,h,t]),X.useEffect(()=>{!s||!n||(s.dragRotate.disable(),s.touchZoomRotate.disableRotation())},[s,n]),{map:s,isMapLoaded:h}}const PG={osm:{version:8,sources:{osm:{type:"raster",tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:'Map tiles by <a target="_top" rel="noopener" href="https://tile.openstreetmap.org/">OpenStreetMap tile servers</a>, under the <a target="_top" rel="noopener" href="https://operations.osmfoundation.org/policies/tiles/">tile usage policy</a>. Data by <a target="_top" rel="noopener" href="http://openstreetmap.org">OpenStreetMap</a>'}},layers:[{id:"osm",type:"raster",source:"osm"}]},"osm-light":{version:8,sources:{"osm-light":{type:"raster",tiles:["https://a.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png","https://b.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png","https://c.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png"],tileSize:256,attribution:"",maxzoom:18}},layers:[{id:"osm-light",type:"raster",source:"osm-light"}]},satellite:{version:8,sources:{satellite:{type:"raster",tiles:["https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}"],tileSize:256,attribution:"",maxzoom:18}},layers:[{id:"satellite",type:"raster",source:"satellite"}]},topo:{version:8,sources:{topo:{type:"raster",tiles:["https://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}"],maxZoom:18}},layers:[{id:"topo",type:"raster",source:"topo"}]},hybrid:{version:8,sources:{hybrid:{type:"raster",tiles:["https://mt1.google.com/vt/lyrs=p&x={x}&y={y}&z={z}"],maxZoom:18}},layers:[{id:"hybrid",type:"raster",source:"hybrid"}]}};let Ad={};function AG({map:e,baseLayers:t=PG,activeLayer:n="osm"}){const s=X.useCallback(()=>{if(!(e!=null&&e.isStyleLoaded)||!e.getStyle())return;const{sources:u,layers:h}=e.getStyle();n in u||!(n in t)||(Ad=u,h.forEach(f=>{Ad[f.id]&&(Ad[f.id].layer=f)}),e.setStyle(t[n]),Object.keys(Ad).forEach(f=>{const{type:a,data:w,layer:b}=Ad[f];!w||!b||(e.addSource(f,{type:a,data:w}),e.addLayer({id:f,...b}),e.off("style.load",s))}))},[e,t,n]);return X.useEffect(()=>e?(e.once("style.load",s),()=>e.off("style.load",s)):()=>{},[e,n,t,s]),X.useEffect(()=>{!e||!e.isStyleLoaded||s()},[e,n,s]),null}function kG(){const{map:e,isMapLoaded:t}=EG({mapOptions:{zoom:4,center:[80.0711,28.994],maxZoom:19}});return ae(CG,{map:e,isMapLoaded:t,style:{width:"100%",height:"560px"},children:ae(AG,{})})}function IG(){return ae("main",{className:"contact naxatw-w-full",children:gt("div",{className:"naxatw-flex naxatw-flex-col md:naxatw-flex-row naxatw-container naxatw-py-6 md:naxatw-py-14 naxatw-gap-8",children:[ae("div",{className:"naxatw-w-full md:naxatw-w-[55%]",children:ae(bG,{})}),ae("div",{className:"naxatw-w-full md:naxatw-w-[45%] naxatw-rounded-xl naxatw-overflow-hidden naxatw-border naxatw-border-primary",children:ae(kG,{})})]})})}function MG(){return ae(IG,{})}const RG=[{path:"/",name:"Home ",component:qq,authenticated:!1},{path:"/notes",name:"Notes ",component:Zq,authenticated:!1},{path:"/exam",name:"Exam ",component:wG,authenticated:!1},{path:"/contact",name:"Contact ",component:MG,authenticated:!1}];function tw(e,t){return tw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,u){return s.__proto__=u,s},tw(e,t)}function jD(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,tw(e,t)}function DG(e,t){return e.classList?!!t&&e.classList.contains(t):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")!==-1}function zG(e,t){e.classList?e.classList.add(t):DG(e,t)||(typeof e.className=="string"?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}function XE(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function LG(e,t){e.classList?e.classList.remove(t):typeof e.className=="string"?e.className=XE(e.className,t):e.setAttribute("class",XE(e.className&&e.className.baseVal||"",t))}const QE={disabled:!1},UD=ft.createContext(null);var qD=function(t){return t.scrollTop},Nd="unmounted",Ql="exited",Yl="entering",cc="entered",nw="exiting",ma=function(e){jD(t,e);function t(s,u){var h;h=e.call(this,s,u)||this;var f=u,a=f&&!f.isMounting?s.enter:s.appear,w;return h.appearStatus=null,s.in?a?(w=Ql,h.appearStatus=Yl):w=cc:s.unmountOnExit||s.mountOnEnter?w=Nd:w=Ql,h.state={status:w},h.nextCallback=null,h}t.getDerivedStateFromProps=function(u,h){var f=u.in;return f&&h.status===Nd?{status:Ql}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(u){var h=null;if(u!==this.props){var f=this.state.status;this.props.in?f!==Yl&&f!==cc&&(h=Yl):(f===Yl||f===cc)&&(h=nw)}this.updateStatus(!1,h)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var u=this.props.timeout,h,f,a;return h=f=a=u,u!=null&&typeof u!="number"&&(h=u.exit,f=u.enter,a=u.appear!==void 0?u.appear:f),{exit:h,enter:f,appear:a}},n.updateStatus=function(u,h){if(u===void 0&&(u=!1),h!==null)if(this.cancelNextCallback(),h===Yl){if(this.props.unmountOnExit||this.props.mountOnEnter){var f=this.props.nodeRef?this.props.nodeRef.current:pm.findDOMNode(this);f&&qD(f)}this.performEnter(u)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Ql&&this.setState({status:Nd})},n.performEnter=function(u){var h=this,f=this.props.enter,a=this.context?this.context.isMounting:u,w=this.props.nodeRef?[a]:[pm.findDOMNode(this),a],b=w[0],P=w[1],A=this.getTimeouts(),M=a?A.appear:A.enter;if(!u&&!f||QE.disabled){this.safeSetState({status:cc},function(){h.props.onEntered(b)});return}this.props.onEnter(b,P),this.safeSetState({status:Yl},function(){h.props.onEntering(b,P),h.onTransitionEnd(M,function(){h.safeSetState({status:cc},function(){h.props.onEntered(b,P)})})})},n.performExit=function(){var u=this,h=this.props.exit,f=this.getTimeouts(),a=this.props.nodeRef?void 0:pm.findDOMNode(this);if(!h||QE.disabled){this.safeSetState({status:Ql},function(){u.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:nw},function(){u.props.onExiting(a),u.onTransitionEnd(f.exit,function(){u.safeSetState({status:Ql},function(){u.props.onExited(a)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(u,h){h=this.setNextCallback(h),this.setState(u,h)},n.setNextCallback=function(u){var h=this,f=!0;return this.nextCallback=function(a){f&&(f=!1,h.nextCallback=null,u(a))},this.nextCallback.cancel=function(){f=!1},this.nextCallback},n.onTransitionEnd=function(u,h){this.setNextCallback(h);var f=this.props.nodeRef?this.props.nodeRef.current:pm.findDOMNode(this),a=u==null&&!this.props.addEndListener;if(!f||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var w=this.props.nodeRef?[this.nextCallback]:[f,this.nextCallback],b=w[0],P=w[1];this.props.addEndListener(b,P)}u!=null&&setTimeout(this.nextCallback,u)},n.render=function(){var u=this.state.status;if(u===Nd)return null;var h=this.props,f=h.children;h.in,h.mountOnEnter,h.unmountOnExit,h.appear,h.enter,h.exit,h.timeout,h.addEndListener,h.onEnter,h.onEntering,h.onEntered,h.onExit,h.onExiting,h.onExited,h.nodeRef;var a=n1(h,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return ft.createElement(UD.Provider,{value:null},typeof f=="function"?f(u,a):ft.cloneElement(ft.Children.only(f),a))},t}(ft.Component);ma.contextType=UD;ma.propTypes={};function lc(){}ma.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:lc,onEntering:lc,onEntered:lc,onExit:lc,onExiting:lc,onExited:lc};ma.UNMOUNTED=Nd;ma.EXITED=Ql;ma.ENTERING=Yl;ma.ENTERED=cc;ma.EXITING=nw;const OG=ma;var FG=function(t,n){return t&&n&&n.split(" ").forEach(function(s){return zG(t,s)})},dx=function(t,n){return t&&n&&n.split(" ").forEach(function(s){return LG(t,s)})},Pb=function(e){jD(t,e);function t(){for(var s,u=arguments.length,h=new Array(u),f=0;f<u;f++)h[f]=arguments[f];return s=e.call.apply(e,[this].concat(h))||this,s.appliedClasses={appear:{},enter:{},exit:{}},s.onEnter=function(a,w){var b=s.resolveArguments(a,w),P=b[0],A=b[1];s.removeClasses(P,"exit"),s.addClass(P,A?"appear":"enter","base"),s.props.onEnter&&s.props.onEnter(a,w)},s.onEntering=function(a,w){var b=s.resolveArguments(a,w),P=b[0],A=b[1],M=A?"appear":"enter";s.addClass(P,M,"active"),s.props.onEntering&&s.props.onEntering(a,w)},s.onEntered=function(a,w){var b=s.resolveArguments(a,w),P=b[0],A=b[1],M=A?"appear":"enter";s.removeClasses(P,M),s.addClass(P,M,"done"),s.props.onEntered&&s.props.onEntered(a,w)},s.onExit=function(a){var w=s.resolveArguments(a),b=w[0];s.removeClasses(b,"appear"),s.removeClasses(b,"enter"),s.addClass(b,"exit","base"),s.props.onExit&&s.props.onExit(a)},s.onExiting=function(a){var w=s.resolveArguments(a),b=w[0];s.addClass(b,"exit","active"),s.props.onExiting&&s.props.onExiting(a)},s.onExited=function(a){var w=s.resolveArguments(a),b=w[0];s.removeClasses(b,"exit"),s.addClass(b,"exit","done"),s.props.onExited&&s.props.onExited(a)},s.resolveArguments=function(a,w){return s.props.nodeRef?[s.props.nodeRef.current,a]:[a,w]},s.getClassNames=function(a){var w=s.props.classNames,b=typeof w=="string",P=b&&w?w+"-":"",A=b?""+P+a:w[a],M=b?A+"-active":w[a+"Active"],B=b?A+"-done":w[a+"Done"];return{baseClassName:A,activeClassName:M,doneClassName:B}},s}var n=t.prototype;return n.addClass=function(u,h,f){var a=this.getClassNames(h)[f+"ClassName"],w=this.getClassNames("enter"),b=w.doneClassName;h==="appear"&&f==="done"&&b&&(a+=" "+b),f==="active"&&u&&qD(u),a&&(this.appliedClasses[h][f]=a,FG(u,a))},n.removeClasses=function(u,h){var f=this.appliedClasses[h],a=f.base,w=f.active,b=f.done;this.appliedClasses[h]={},a&&dx(u,a),w&&dx(u,w),b&&dx(u,b)},n.render=function(){var u=this.props;u.classNames;var h=n1(u,["classNames"]);return ft.createElement(OG,yu({},h,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(ft.Component);Pb.defaultProps={classNames:""};Pb.propTypes={};const NG=Pb;function GD({title:e,subtitle:t,show:n,onClose:s,children:u,className:h,headerContent:f,zIndex:a=1111,hideCloseButton:w}){const b=X.useRef(null);return ae(NG,{nodeRef:b,in:n,timeout:150,unmountOnExit:!0,classNames:{enter:"naxatw-opacity-0 naxatw-scale-95",enterActive:"naxatw-opacity-100 naxatw-scale-100 naxatw-transition-all naxatw-ease-in naxatw-duration-150",enterDone:"naxatw-opacity-100 naxatw-scale-100",exit:"naxatw-opacity-50 naxatw-scale-75 naxatw-transition-all naxatw-ease-out naxatw-duration-150",exitActive:"naxatw-opacity-0 naxatw-scale-50"},children:ae("div",{tabIndex:-1,className:` naxatw-h-modal naxatw-fixed naxatw-inset-0 naxatw-z-[11111] naxatw-flex 
          naxatw-h-screen naxatw-w-screen naxatw-justify-center naxatw-overflow-y-auto naxatw-overflow-x-hidden
          naxatw-bg-black naxatw-bg-opacity-30 naxatw-p-4 md:naxatw-inset-0 md:naxatw-h-full
      `,style:{zIndex:a},children:ae("div",{ref:b,className:"naxatw-fixed naxatw-inset-0 naxatw-overflow-y-auto",children:ae("div",{className:`naxatw-flex naxatw-min-h-full naxatw-items-center 
            naxatw-justify-center naxatw-p-4`,children:ae("div",{className:`naxatw-relative naxatw-flex naxatw-h-full naxatw-w-full
              naxatw-max-w-2xl naxatw-flex-col naxatw-items-center naxatw-justify-center md:naxatw-h-auto`,children:gt("div",{className:`naxatw-relative naxatw-max-h-[calc(100vh-4rem)] naxatw-w-[42rem] naxatw-overflow-hidden
                   naxatw-rounded-[20px] naxatw-bg-white naxatw-shadow ${h}`,children:[gt("div",{className:`naxatw-flex naxatw-items-start naxatw-justify-between
                    naxatw-rounded-t-[20px] naxatw-px-7 naxatw-py-5`,children:[f||gt("div",{className:"naxatw-space-y-1",children:[ae("h3",{className:"naxatw-font-bold ",children:e}),ae("p",{className:"naxatw-text-body-lg",children:t})]}),!w&&gt("button",{type:"button",className:`naxatw-ml-auto naxatw-inline-flex naxatw-items-center 
                      naxatw-rounded-lg naxatw-bg-transparent naxatw-p-1.5 naxatw-text-sm
                      naxatw-text-grey-800 hover:naxatw-bg-grey-200 hover:naxatw-text-grey-900`,onClick:s,children:[ae("i",{className:"material-icons",children:"close"}),ae("span",{className:"naxatw-sr-only",children:"Close modal"})]})]}),ae("div",{className:"naxatw-flex",children:ae("div",{className:`scrollbar naxatw-max-h-[calc(100vh-10rem)] naxatw-grow naxatw-overflow-y-auto
                      naxatw-px-10 naxatw-pb-5`,children:u})})]})})})})})})}function BG({title:e="",show:t=!1,onClose:n=()=>{},children:s}){return ae(GD,{show:t,title:e,onClose:n,zIndex:111111,children:s})}const YE=[{label:"Home",path:"/"},{label:"Notes",path:"/notes"},{label:"Exams",path:"/exam"},{label:"Contact",path:"/contact"}];function VG(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function $G(...e){return t=>e.forEach(n=>VG(n,t))}const ZD=X.forwardRef((e,t)=>{const{children:n,...s}=e,u=X.Children.toArray(n),h=u.find(UG);if(h){const f=h.props.children,a=u.map(w=>w===h?X.Children.count(f)>1?X.Children.only(null):X.isValidElement(f)?f.props.children:null:w);return X.createElement(rw,yu({},s,{ref:t}),X.isValidElement(f)?X.cloneElement(f,void 0,a):null)}return X.createElement(rw,yu({},s,{ref:t}),n)});ZD.displayName="Slot";const rw=X.forwardRef((e,t)=>{const{children:n,...s}=e;return X.isValidElement(n)?X.cloneElement(n,{...qG(s,n.props),ref:t?$G(t,n.ref):n.ref}):X.Children.count(n)>1?X.Children.only(null):null});rw.displayName="SlotClone";const jG=({children:e})=>X.createElement(X.Fragment,null,e);function UG(e){return X.isValidElement(e)&&e.type===jG}function qG(e,t){const n={...t};for(const s in t){const u=e[s],h=t[s];/^on[A-Z]/.test(s)?u&&h?n[s]=(...a)=>{h(...a),u(...a)}:u&&(n[s]=u):s==="style"?n[s]={...u,...h}:s==="className"&&(n[s]=[u,h].filter(Boolean).join(" "))}return{...e,...n}}function WD(e){var t,n,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=WD(e[t]))&&(s&&(s+=" "),s+=n);else for(t in e)e[t]&&(s&&(s+=" "),s+=t);return s}function GG(){for(var e,t,n=0,s="";n<arguments.length;)(e=arguments[n++])&&(t=WD(e))&&(s&&(s+=" "),s+=t);return s}const JE=e=>typeof e=="boolean"?"".concat(e):e===0?"0":e,eP=GG,ZG=(e,t)=>n=>{var s;if((t==null?void 0:t.variants)==null)return eP(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:u,defaultVariants:h}=t,f=Object.keys(u).map(b=>{const P=n==null?void 0:n[b],A=h==null?void 0:h[b];if(P===null)return null;const M=JE(P)||JE(A);return u[b][M]}),a=n&&Object.entries(n).reduce((b,P)=>{let[A,M]=P;return M===void 0||(b[A]=M),b},{}),w=t==null||(s=t.compoundVariants)===null||s===void 0?void 0:s.reduce((b,P)=>{let{class:A,className:M,...B}=P;return Object.entries(B).every(V=>{let[j,K]=V;return Array.isArray(K)?K.includes({...h,...a}[j]):{...h,...a}[j]===K})?[...b,A,M]:b},[]);return eP(e,f,w,n==null?void 0:n.class,n==null?void 0:n.className)};function WG({className:e}){return ae("div",{role:"status",className:"naxatw-flex naxatw-items-center",children:gt("svg",{"aria-hidden":"true",className:`naxatw-h-[24px] naxatw-w-[24px] naxatw-animate-spin ${e}`,viewBox:"0 0 100 101",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[ae("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"currentColor"}),ae("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentFill"})]},e)})}const HG=ZG(`naxatw-inline-flex naxatw-items-center naxatw-justify-center naxatw-rounded-md naxatw-text-sm 
  naxatw-font-bold naxatw-transition-colors focus-visible:naxatw-outline-none focus-visible:naxatw-ring-2 
  focus-visible:ring-ring focus-visible:naxatw-ring-offset-2 disabled:naxatw-opacity-50 disabled:naxatw-pointer-events-none`,{variants:{variant:{default:"naxatw-bg-primary naxatw-text-white hover:naxatw-shadow-top hover:naxatw-shadow-primary",destructive:"naxatw-bg-red-500 naxatw-text-white hover:naxatw-shadow-top hover:naxatw-shadow-red-500",outline:`naxatw-border naxatw-text-primary naxatw-border- hover:naxatw-bg-primary hover:naxatw-text-white naxatw-border-input 
        hover:naxatw-shadow-top naxatw-bg-white`,secondary:"naxatw-bg-white naxatw-text-primary naxatw-border naxatw-border-primary hover:naxatw-shadow-top",ghost:"naxatw-text-primary naxatw-font-bold disabled:naxatw-text-grey-600 hover:naxatw-text-red-500",link:`naxatw-text-primary naxatw-font-bold naxatw-underline-offset-4 naxatw-underline hover:naxatw-no-underline
         naxatw-text-primarycolor hover:naxatw-shadow hover:naxatw-shadow-primary`},size:{default:"naxatw-h-9 naxatw-py-2 naxatw-px-3",sm:"naxatw-h-7 naxatw-px-2 naxatw-rounded-lg",lg:"naxatw-h-11 naxatw-px-8 naxatw-rounded-md"}},defaultVariants:{variant:"default",size:"default"}}),HD=X.forwardRef(({className:e,variant:t,size:n,asChild:s=!1,...u},h)=>ae(s?ZD:"button",{className:wl(HG({variant:t,size:n,className:e})),ref:h,...u}));HD.displayName="Button";function Ug({leftIcon:e,rightIcon:t,children:n,iconClassname:s,withLoader:u,isLoading:h,className:f,...a}){return gt(HD,{...a,className:`naxatw-flex naxatw-items-center naxatw-gap-1 ${f}`,children:[e&&ae(Ti,{className:`${s} !naxatw-text-icon-sm`,name:e}),n,t&&ae(Ti,{className:`${s} !naxatw-text-icon-sm`,name:t}),u&&h&&ae(WG,{className:"naxatw-fill-primary-500"})]})}const KG=({subLinks:e})=>{var s;const[t,n]=X.useState(!1);return gt("div",{className:"naxatw-border-b naxatw-border-solid naxatw-border-b-[#D9D9D9]",children:[gt("div",{className:"naxatw-flex naxatw-items-center naxatw-justify-between naxatw-gap-1",onClick:()=>n(!t),children:[ae("p",{className:"naxatw-py-3 naxatw-text-2xl naxatw-font-medium naxatw-capitalize",children:e.label}),ae(Ti,{name:t?"keyboard_arrow_up":"keyboard_arrow_down",className:"custom-btn-transition naxatw-h-4 !naxatw-text-2xl naxatw-text-[#131417]"})]}),ae("div",{className:`common-btn-transition naxatw-flex naxatw-flex-col naxatw-gap-4 naxatw-overflow-hidden naxatw-px-4  ${t?"naxatw-pointer-events-auto naxatw-h-[245px]  naxatw-pt-3":"naxatw-pointer-events-none naxatw-h-0"} `,children:(s=e==null?void 0:e.children)==null?void 0:s.map(u=>gt(h1,{to:u.link,className:"naxatw-flex naxatw-cursor-pointer naxatw-items-center naxatw-gap-5",children:[ae("div",{className:"icon-container naxatw-h-9 naxatw-w-9 naxatw-rounded-lg naxatw-bg-[#cde5fd80] naxatw-p-2",children:ae("img",{src:u.icon,alt:u.label})}),ae("p",{className:"naxatw-text-lg naxatw-font-medium naxatw-leading-6 naxatw-tracking-[-0.0225rem]",children:u.label})]},u.id))})]})},XG=({navItems:e,mobileViewNavRef:t})=>{const n=Bk(),s=Sc(h=>h.common.navbarToggled);return gt("div",{className:"mobile-view-navbar",children:[ae("button",{type:"button",onClick:()=>{var h,f,a,w;s?(document.body.style.overflow="auto",(f=(h=t==null?void 0:t.current)==null?void 0:h.classList)==null||f.remove("nav-open")):(document.body.style.overflow="hidden",(w=(a=t==null?void 0:t.current)==null?void 0:a.classList)==null||w.add("nav-open")),n(zE(!s))},className:"md:naxatw-hidden",children:s?ae("div",{className:"close-btn naxatw-mt-2 naxatw-flex naxatw-cursor-pointer naxatw-items-center",children:ae(Ti,{name:"close",className:"naxatw-text-white naxatw-text-2xl"})}):ae("div",{className:"naxatw-flex naxatw-mt-2 naxatw-cursor-pointer naxatw-items-center",children:ae(Ti,{name:"menu",className:"naxatw-text-white naxatw-text-2xl"})})}),s&&ae("nav",{className:"primary-navigation naxatw-fixed naxatw-inset-x-0 naxatw-bottom-0 naxatw-top-[70px] naxatw-z-[99] naxatw-block naxatw-bg-[#FBF8F3] md:naxatw-hidden",ref:t,children:gt("div",{className:"naxatw-flex naxatw-h-full naxatw-flex-col",children:[ae("div",{className:"naxatw-flex naxatw-flex-1 naxatw-flex-col naxatw-px-4 naxatw-pt-5",children:e==null?void 0:e.map(h=>h!=null&&h.children?ae(KG,{subLinks:h},h.id):ae(h1,{to:h.path,onClick:()=>n(zE(!1)),children:ae("p",{className:"naxatw-border-b naxatw-border-solid naxatw-border-b-[#D9D9D9] naxatw-py-3 naxatw-text-2xl naxatw-font-medium naxatw-capitalize",children:h.label})},h.path))}),gt("p",{className:"naxatw-border-t naxatw-border-solid naxatw-border-t-[#EDEDED] naxatw-py-6 naxatw-text-center naxatw-text-base naxatw-leading-[1.575rem] naxatw-tracking-[-0.00563rem] naxatw-text-[#000]",children:["© GeoSewa ",new Date().getFullYear(),". All Rights Reserved."]})]})})]})};function QG(){const e=L1(),t=c1(),n=X.useRef(null);return ae("nav",{className:"naxatw-bg-primary naxatw-sticky naxatw-top-0 naxatw-z-10",children:ae("nav",{className:"naxatw-container naxatw-py-3",children:gt(Ts,{className:"naxatw-items-center naxatw-justify-between",children:[gt(Ts,{className:"naxatw-text-white naxatw-items-center",gap:2,children:[ae(Ti,{name:"public"}),ae("div",{className:"naxatw-cursor-pointer",role:"presentation",onClick:()=>t("/"),children:ae("h3",{className:"naxatw-text-white naxatw-font-medium",children:"GeoSewa"})})]}),ae(Ts,{className:"naxatw-hidden md:naxatw-flex naxatw-gap-4 naxatw-mt-1 naxatw-text-white",children:YE.map(s=>ae(h1,{to:s.path,className:({isActive:u})=>`${u&&"naxatw-text-red-500"} naxatw-px-3 naxatw-py-2 naxatw-tracking-wide naxatw-text-[1rem] hover:naxatw-text-red-500`,children:s.label},s.path))}),gt(Ts,{className:"naxatw-hidden md:naxatw-flex naxatw-items-center",gap:2,children:[ae(Ug,{variant:"outline",className:"naxatw-w-24 naxatw-text-body-lg",onClick:()=>e(gD("login")),children:"Login"}),ae(Ug,{variant:"default",className:"naxatw-w-24 naxatw-border !naxatw-border-white naxatw-text-body-lg hover:naxatw-bg-white hover:naxatw-text-primary",children:"Sign Up"})]}),ae(XG,{navItems:YE,mobileViewNavRef:n})]})})})}const YG="/assets/person-91e21707.svg",JG="/assets/google-icon-c1d0def9.svg";var jf=e=>e.type==="checkbox",kc=e=>e instanceof Date,bi=e=>e==null;const KD=e=>typeof e=="object";var br=e=>!bi(e)&&!Array.isArray(e)&&KD(e)&&!kc(e),eZ=e=>br(e)&&e.target?jf(e.target)?e.target.checked:e.target.value:e,tZ=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,nZ=(e,t)=>e.has(tZ(t)),rZ=e=>{const t=e.constructor&&e.constructor.prototype;return br(t)&&t.hasOwnProperty("isPrototypeOf")},Ab=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function _s(e){let t;const n=Array.isArray(e);if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(!(Ab&&(e instanceof Blob||e instanceof FileList))&&(n||br(e)))if(t=n?[]:{},!n&&!rZ(e))t=e;else for(const s in e)e.hasOwnProperty(s)&&(t[s]=_s(e[s]));else return e;return t}var Uf=e=>Array.isArray(e)?e.filter(Boolean):[],lr=e=>e===void 0,bt=(e,t,n)=>{if(!t||!br(e))return n;const s=Uf(t.split(/[,[\].]+?/)).reduce((u,h)=>bi(u)?u:u[h],e);return lr(s)||s===e?lr(e[t])?n:e[t]:s},Ko=e=>typeof e=="boolean";const tP={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Xs={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Zo={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"};ft.createContext(null);var iZ=(e,t,n,s=!0)=>{const u={defaultValues:t._defaultValues};for(const h in e)Object.defineProperty(u,h,{get:()=>{const f=h;return t._proxyFormState[f]!==Xs.all&&(t._proxyFormState[f]=!s||Xs.all),n&&(n[f]=!0),e[f]}});return u},Xi=e=>br(e)&&!Object.keys(e).length,sZ=(e,t,n,s)=>{n(e);const{name:u,...h}=e;return Xi(h)||Object.keys(h).length>=Object.keys(t).length||Object.keys(h).find(f=>t[f]===(!s||Xs.all))},fx=e=>Array.isArray(e)?e:[e];function oZ(e){const t=ft.useRef(e);t.current=e,ft.useEffect(()=>{const n=!e.disabled&&t.current.subject&&t.current.subject.subscribe({next:t.current.next});return()=>{n&&n.unsubscribe()}},[e.disabled])}var _o=e=>typeof e=="string",aZ=(e,t,n,s,u)=>_o(e)?(s&&t.watch.add(e),bt(n,e,u)):Array.isArray(e)?e.map(h=>(s&&t.watch.add(h),bt(n,h))):(s&&(t.watchAll=!0),n),kb=e=>/^\w*$/.test(e),XD=e=>Uf(e.replace(/["|']|\]/g,"").split(/\.|\[/)),zn=(e,t,n)=>{let s=-1;const u=kb(t)?[t]:XD(t),h=u.length,f=h-1;for(;++s<h;){const a=u[s];let w=n;if(s!==f){const b=e[a];w=br(b)||Array.isArray(b)?b:isNaN(+u[s+1])?{}:[]}e[a]=w,e=e[a]}return e},lZ=(e,t,n,s,u)=>t?{...n[e],types:{...n[e]&&n[e].types?n[e].types:{},[s]:u||!0}}:{},nP=e=>({isOnSubmit:!e||e===Xs.onSubmit,isOnBlur:e===Xs.onBlur,isOnChange:e===Xs.onChange,isOnAll:e===Xs.all,isOnTouch:e===Xs.onTouched}),rP=(e,t,n)=>!n&&(t.watchAll||t.watch.has(e)||[...t.watch].some(s=>e.startsWith(s)&&/^\.\w+/.test(e.slice(s.length))));const Jd=(e,t,n,s)=>{for(const u of n||Object.keys(e)){const h=bt(e,u);if(h){const{_f:f,...a}=h;if(f){if(f.refs&&f.refs[0]&&t(f.refs[0],u)&&!s)break;if(f.ref&&t(f.ref,f.name)&&!s)break;Jd(a,t)}else br(a)&&Jd(a,t)}}};var uZ=(e,t,n)=>{const s=Uf(bt(e,n));return zn(s,"root",t[n]),zn(e,n,s),e},Ib=e=>e.type==="file",Ya=e=>typeof e=="function",qg=e=>{if(!Ab)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},Xm=e=>_o(e),Mb=e=>e.type==="radio",Gg=e=>e instanceof RegExp;const iP={value:!1,isValid:!1},sP={value:!0,isValid:!0};var QD=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!lr(e[0].attributes.value)?lr(e[0].value)||e[0].value===""?sP:{value:e[0].value,isValid:!0}:sP:iP}return iP};const oP={isValid:!1,value:null};var YD=e=>Array.isArray(e)?e.reduce((t,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:t,oP):oP;function aP(e,t,n="validate"){if(Xm(e)||Array.isArray(e)&&e.every(Xm)||Ko(e)&&!e)return{type:n,message:Xm(e)?e:"",ref:t}}var uc=e=>br(e)&&!Gg(e)?e:{value:e,message:""},lP=async(e,t,n,s,u)=>{const{ref:h,refs:f,required:a,maxLength:w,minLength:b,min:P,max:A,pattern:M,validate:B,name:V,valueAsNumber:j,mount:K,disabled:F}=e._f,N=bt(t,V);if(!K||F)return{};const W=f?f[0]:h,ne=Ge=>{s&&W.reportValidity&&(W.setCustomValidity(Ko(Ge)?"":Ge||""),W.reportValidity())},pe={},Ce=Mb(h),Ie=jf(h),Se=Ce||Ie,qe=(j||Ib(h))&&lr(h.value)&&lr(N)||qg(h)&&h.value===""||N===""||Array.isArray(N)&&!N.length,ze=lZ.bind(null,V,n,pe),Et=(Ge,yt,xt,Ot=Zo.maxLength,zt=Zo.minLength)=>{const St=Ge?yt:xt;pe[V]={type:Ge?Ot:zt,message:St,ref:h,...ze(Ge?Ot:zt,St)}};if(u?!Array.isArray(N)||!N.length:a&&(!Se&&(qe||bi(N))||Ko(N)&&!N||Ie&&!QD(f).isValid||Ce&&!YD(f).isValid)){const{value:Ge,message:yt}=Xm(a)?{value:!!a,message:a}:uc(a);if(Ge&&(pe[V]={type:Zo.required,message:yt,ref:W,...ze(Zo.required,yt)},!n))return ne(yt),pe}if(!qe&&(!bi(P)||!bi(A))){let Ge,yt;const xt=uc(A),Ot=uc(P);if(!bi(N)&&!isNaN(N)){const zt=h.valueAsNumber||N&&+N;bi(xt.value)||(Ge=zt>xt.value),bi(Ot.value)||(yt=zt<Ot.value)}else{const zt=h.valueAsDate||new Date(N),St=Pt=>new Date(new Date().toDateString()+" "+Pt),je=h.type=="time",ct=h.type=="week";_o(xt.value)&&N&&(Ge=je?St(N)>St(xt.value):ct?N>xt.value:zt>new Date(xt.value)),_o(Ot.value)&&N&&(yt=je?St(N)<St(Ot.value):ct?N<Ot.value:zt<new Date(Ot.value))}if((Ge||yt)&&(Et(!!Ge,xt.message,Ot.message,Zo.max,Zo.min),!n))return ne(pe[V].message),pe}if((w||b)&&!qe&&(_o(N)||u&&Array.isArray(N))){const Ge=uc(w),yt=uc(b),xt=!bi(Ge.value)&&N.length>+Ge.value,Ot=!bi(yt.value)&&N.length<+yt.value;if((xt||Ot)&&(Et(xt,Ge.message,yt.message),!n))return ne(pe[V].message),pe}if(M&&!qe&&_o(N)){const{value:Ge,message:yt}=uc(M);if(Gg(Ge)&&!N.match(Ge)&&(pe[V]={type:Zo.pattern,message:yt,ref:h,...ze(Zo.pattern,yt)},!n))return ne(yt),pe}if(B){if(Ya(B)){const Ge=await B(N,t),yt=aP(Ge,W);if(yt&&(pe[V]={...yt,...ze(Zo.validate,yt.message)},!n))return ne(yt.message),pe}else if(br(B)){let Ge={};for(const yt in B){if(!Xi(Ge)&&!n)break;const xt=aP(await B[yt](N,t),W,yt);xt&&(Ge={...xt,...ze(yt,xt.message)},ne(xt.message),n&&(pe[V]=Ge))}if(!Xi(Ge)&&(pe[V]={ref:W,...Ge},!n))return pe}}return ne(!0),pe};function cZ(e,t){const n=t.slice(0,-1).length;let s=0;for(;s<n;)e=lr(e)?s++:e[t[s++]];return e}function hZ(e){for(const t in e)if(e.hasOwnProperty(t)&&!lr(e[t]))return!1;return!0}function _r(e,t){const n=Array.isArray(t)?t:kb(t)?[t]:XD(t),s=n.length===1?e:cZ(e,n),u=n.length-1,h=n[u];return s&&delete s[h],u!==0&&(br(s)&&Xi(s)||Array.isArray(s)&&hZ(s))&&_r(e,n.slice(0,-1)),e}var px=()=>{let e=[];return{get observers(){return e},next:u=>{for(const h of e)h.next&&h.next(u)},subscribe:u=>(e.push(u),{unsubscribe:()=>{e=e.filter(h=>h!==u)}}),unsubscribe:()=>{e=[]}}},Zg=e=>bi(e)||!KD(e);function lu(e,t){if(Zg(e)||Zg(t))return e===t;if(kc(e)&&kc(t))return e.getTime()===t.getTime();const n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(const u of n){const h=e[u];if(!s.includes(u))return!1;if(u!=="ref"){const f=t[u];if(kc(h)&&kc(f)||br(h)&&br(f)||Array.isArray(h)&&Array.isArray(f)?!lu(h,f):h!==f)return!1}}return!0}var JD=e=>e.type==="select-multiple",dZ=e=>Mb(e)||jf(e),mx=e=>qg(e)&&e.isConnected,ez=e=>{for(const t in e)if(Ya(e[t]))return!0;return!1};function Wg(e,t={}){const n=Array.isArray(e);if(br(e)||n)for(const s in e)Array.isArray(e[s])||br(e[s])&&!ez(e[s])?(t[s]=Array.isArray(e[s])?[]:{},Wg(e[s],t[s])):bi(e[s])||(t[s]=!0);return t}function tz(e,t,n){const s=Array.isArray(e);if(br(e)||s)for(const u in e)Array.isArray(e[u])||br(e[u])&&!ez(e[u])?lr(t)||Zg(n[u])?n[u]=Array.isArray(e[u])?Wg(e[u],[]):{...Wg(e[u])}:tz(e[u],bi(t)?{}:t[u],n[u]):n[u]=!lu(e[u],t[u]);return n}var wm=(e,t)=>tz(e,t,Wg(t)),nz=(e,{valueAsNumber:t,valueAsDate:n,setValueAs:s})=>lr(e)?e:t?e===""?NaN:e&&+e:n&&_o(e)?new Date(e):s?s(e):e;function gx(e){const t=e.ref;if(!(e.refs?e.refs.every(n=>n.disabled):t.disabled))return Ib(t)?t.files:Mb(t)?YD(e.refs).value:JD(t)?[...t.selectedOptions].map(({value:n})=>n):jf(t)?QD(e.refs).value:nz(lr(t.value)?e.ref.value:t.value,e)}var fZ=(e,t,n,s)=>{const u={};for(const h of e){const f=bt(t,h);f&&zn(u,h,f._f)}return{criteriaMode:n,names:[...e],fields:u,shouldUseNativeValidation:s}},kd=e=>lr(e)?e:Gg(e)?e.source:br(e)?Gg(e.value)?e.value.source:e.value:e,pZ=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function uP(e,t,n){const s=bt(e,n);if(s||kb(n))return{error:s,name:n};const u=n.split(".");for(;u.length;){const h=u.join("."),f=bt(t,h),a=bt(e,h);if(f&&!Array.isArray(f)&&n!==h)return{name:n};if(a&&a.type)return{name:h,error:a};u.pop()}return{name:n}}var mZ=(e,t,n,s,u)=>u.isOnAll?!1:!n&&u.isOnTouch?!(t||e):(n?s.isOnBlur:u.isOnBlur)?!e:(n?s.isOnChange:u.isOnChange)?e:!0,gZ=(e,t)=>!Uf(bt(e,t)).length&&_r(e,t);const yZ={mode:Xs.onSubmit,reValidateMode:Xs.onChange,shouldFocusError:!0};function vZ(e={}){let t={...yZ,...e},n={submitCount:0,isDirty:!1,isLoading:Ya(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},s={},u=br(t.defaultValues)||br(t.values)?_s(t.defaultValues||t.values)||{}:{},h=t.shouldUnregister?{}:_s(u),f={action:!1,mount:!1,watch:!1},a={mount:new Set,unMount:new Set,array:new Set,watch:new Set},w,b=0;const P={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},A={values:px(),array:px(),state:px()},M=nP(t.mode),B=nP(t.reValidateMode),V=t.criteriaMode===Xs.all,j=ge=>ke=>{clearTimeout(b),b=setTimeout(ge,ke)},K=async ge=>{if(P.isValid||ge){const ke=t.resolver?Xi((await Se()).errors):await ze(s,!0);ke!==n.isValid&&A.state.next({isValid:ke})}},F=(ge,ke)=>{(P.isValidating||P.validatingFields)&&((ge||Array.from(a.mount)).forEach(ue=>{ue&&(ke?zn(n.validatingFields,ue,ke):_r(n.validatingFields,ue))}),A.state.next({validatingFields:n.validatingFields,isValidating:!Xi(n.validatingFields)}))},N=(ge,ke=[],ue,tt,Ye=!0,Ne=!0)=>{if(tt&&ue){if(f.action=!0,Ne&&Array.isArray(bt(s,ge))){const Xe=ue(bt(s,ge),tt.argA,tt.argB);Ye&&zn(s,ge,Xe)}if(Ne&&Array.isArray(bt(n.errors,ge))){const Xe=ue(bt(n.errors,ge),tt.argA,tt.argB);Ye&&zn(n.errors,ge,Xe),gZ(n.errors,ge)}if(P.touchedFields&&Ne&&Array.isArray(bt(n.touchedFields,ge))){const Xe=ue(bt(n.touchedFields,ge),tt.argA,tt.argB);Ye&&zn(n.touchedFields,ge,Xe)}P.dirtyFields&&(n.dirtyFields=wm(u,h)),A.state.next({name:ge,isDirty:Ge(ge,ke),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else zn(h,ge,ke)},W=(ge,ke)=>{zn(n.errors,ge,ke),A.state.next({errors:n.errors})},ne=ge=>{n.errors=ge,A.state.next({errors:n.errors,isValid:!1})},pe=(ge,ke,ue,tt)=>{const Ye=bt(s,ge);if(Ye){const Ne=bt(h,ge,lr(ue)?bt(u,ge):ue);lr(Ne)||tt&&tt.defaultChecked||ke?zn(h,ge,ke?Ne:gx(Ye._f)):Ot(ge,Ne),f.mount&&K()}},Ce=(ge,ke,ue,tt,Ye)=>{let Ne=!1,Xe=!1;const Vt={name:ge},_n=!!(bt(s,ge)&&bt(s,ge)._f.disabled);if(!ue||tt){P.isDirty&&(Xe=n.isDirty,n.isDirty=Vt.isDirty=Ge(),Ne=Xe!==Vt.isDirty);const An=_n||lu(bt(u,ge),ke);Xe=!!(!_n&&bt(n.dirtyFields,ge)),An||_n?_r(n.dirtyFields,ge):zn(n.dirtyFields,ge,!0),Vt.dirtyFields=n.dirtyFields,Ne=Ne||P.dirtyFields&&Xe!==!An}if(ue){const An=bt(n.touchedFields,ge);An||(zn(n.touchedFields,ge,ue),Vt.touchedFields=n.touchedFields,Ne=Ne||P.touchedFields&&An!==ue)}return Ne&&Ye&&A.state.next(Vt),Ne?Vt:{}},Ie=(ge,ke,ue,tt)=>{const Ye=bt(n.errors,ge),Ne=P.isValid&&Ko(ke)&&n.isValid!==ke;if(e.delayError&&ue?(w=j(()=>W(ge,ue)),w(e.delayError)):(clearTimeout(b),w=null,ue?zn(n.errors,ge,ue):_r(n.errors,ge)),(ue?!lu(Ye,ue):Ye)||!Xi(tt)||Ne){const Xe={...tt,...Ne&&Ko(ke)?{isValid:ke}:{},errors:n.errors,name:ge};n={...n,...Xe},A.state.next(Xe)}},Se=async ge=>{F(ge,!0);const ke=await t.resolver(h,t.context,fZ(ge||a.mount,s,t.criteriaMode,t.shouldUseNativeValidation));return F(ge),ke},qe=async ge=>{const{errors:ke}=await Se(ge);if(ge)for(const ue of ge){const tt=bt(ke,ue);tt?zn(n.errors,ue,tt):_r(n.errors,ue)}else n.errors=ke;return ke},ze=async(ge,ke,ue={valid:!0})=>{for(const tt in ge){const Ye=ge[tt];if(Ye){const{_f:Ne,...Xe}=Ye;if(Ne){const Vt=a.array.has(Ne.name);F([tt],!0);const _n=await lP(Ye,h,V,t.shouldUseNativeValidation&&!ke,Vt);if(F([tt]),_n[Ne.name]&&(ue.valid=!1,ke))break;!ke&&(bt(_n,Ne.name)?Vt?uZ(n.errors,_n,Ne.name):zn(n.errors,Ne.name,_n[Ne.name]):_r(n.errors,Ne.name))}Xe&&await ze(Xe,ke,ue)}}return ue.valid},Et=()=>{for(const ge of a.unMount){const ke=bt(s,ge);ke&&(ke._f.refs?ke._f.refs.every(ue=>!mx(ue)):!mx(ke._f.ref))&&cr(ge)}a.unMount=new Set},Ge=(ge,ke)=>(ge&&ke&&zn(h,ge,ke),!lu(Ht(),u)),yt=(ge,ke,ue)=>aZ(ge,a,{...f.mount?h:lr(ke)?u:_o(ge)?{[ge]:ke}:ke},ue,ke),xt=ge=>Uf(bt(f.mount?h:u,ge,e.shouldUnregister?bt(u,ge,[]):[])),Ot=(ge,ke,ue={})=>{const tt=bt(s,ge);let Ye=ke;if(tt){const Ne=tt._f;Ne&&(!Ne.disabled&&zn(h,ge,nz(ke,Ne)),Ye=qg(Ne.ref)&&bi(ke)?"":ke,JD(Ne.ref)?[...Ne.ref.options].forEach(Xe=>Xe.selected=Ye.includes(Xe.value)):Ne.refs?jf(Ne.ref)?Ne.refs.length>1?Ne.refs.forEach(Xe=>(!Xe.defaultChecked||!Xe.disabled)&&(Xe.checked=Array.isArray(Ye)?!!Ye.find(Vt=>Vt===Xe.value):Ye===Xe.value)):Ne.refs[0]&&(Ne.refs[0].checked=!!Ye):Ne.refs.forEach(Xe=>Xe.checked=Xe.value===Ye):Ib(Ne.ref)?Ne.ref.value="":(Ne.ref.value=Ye,Ne.ref.type||A.values.next({name:ge,values:{...h}})))}(ue.shouldDirty||ue.shouldTouch)&&Ce(ge,Ye,ue.shouldTouch,ue.shouldDirty,!0),ue.shouldValidate&&Pt(ge)},zt=(ge,ke,ue)=>{for(const tt in ke){const Ye=ke[tt],Ne=`${ge}.${tt}`,Xe=bt(s,Ne);(a.array.has(ge)||!Zg(Ye)||Xe&&!Xe._f)&&!kc(Ye)?zt(Ne,Ye,ue):Ot(Ne,Ye,ue)}},St=(ge,ke,ue={})=>{const tt=bt(s,ge),Ye=a.array.has(ge),Ne=_s(ke);zn(h,ge,Ne),Ye?(A.array.next({name:ge,values:{...h}}),(P.isDirty||P.dirtyFields)&&ue.shouldDirty&&A.state.next({name:ge,dirtyFields:wm(u,h),isDirty:Ge(ge,Ne)})):tt&&!tt._f&&!bi(Ne)?zt(ge,Ne,ue):Ot(ge,Ne,ue),rP(ge,a)&&A.state.next({...n}),A.values.next({name:f.mount?ge:void 0,values:{...h}})},je=async ge=>{const ke=ge.target;let ue=ke.name,tt=!0;const Ye=bt(s,ue),Ne=()=>ke.type?gx(Ye._f):eZ(ge),Xe=Vt=>{tt=Number.isNaN(Vt)||Vt===bt(h,ue,Vt)};if(Ye){let Vt,_n;const An=Ne(),qi=ge.type===tP.BLUR||ge.type===tP.FOCUS_OUT,io=!pZ(Ye._f)&&!t.resolver&&!bt(n.errors,ue)&&!Ye._f.deps||mZ(qi,bt(n.touchedFields,ue),n.isSubmitted,B,M),Ii=rP(ue,a,qi);zn(h,ue,An),qi?(Ye._f.onBlur&&Ye._f.onBlur(ge),w&&w(0)):Ye._f.onChange&&Ye._f.onChange(ge);const Gi=Ce(ue,An,qi,!1),Ze=!Xi(Gi)||Ii;if(!qi&&A.values.next({name:ue,type:ge.type,values:{...h}}),io)return P.isValid&&K(),Ze&&A.state.next({name:ue,...Ii?{}:Gi});if(!qi&&Ii&&A.state.next({...n}),t.resolver){const{errors:ci}=await Se([ue]);if(Xe(An),tt){const xn=uP(n.errors,s,ue),ls=uP(ci,s,xn.name||ue);Vt=ls.error,ue=ls.name,_n=Xi(ci)}}else F([ue],!0),Vt=(await lP(Ye,h,V,t.shouldUseNativeValidation))[ue],F([ue]),Xe(An),tt&&(Vt?_n=!1:P.isValid&&(_n=await ze(s,!0)));tt&&(Ye._f.deps&&Pt(Ye._f.deps),Ie(ue,_n,Vt,Gi))}},ct=(ge,ke)=>{if(bt(n.errors,ke)&&ge.focus)return ge.focus(),1},Pt=async(ge,ke={})=>{let ue,tt;const Ye=fx(ge);if(t.resolver){const Ne=await qe(lr(ge)?ge:Ye);ue=Xi(Ne),tt=ge?!Ye.some(Xe=>bt(Ne,Xe)):ue}else ge?(tt=(await Promise.all(Ye.map(async Ne=>{const Xe=bt(s,Ne);return await ze(Xe&&Xe._f?{[Ne]:Xe}:Xe)}))).every(Boolean),!(!tt&&!n.isValid)&&K()):tt=ue=await ze(s);return A.state.next({...!_o(ge)||P.isValid&&ue!==n.isValid?{}:{name:ge},...t.resolver||!ge?{isValid:ue}:{},errors:n.errors}),ke.shouldFocus&&!tt&&Jd(s,ct,ge?Ye:a.mount),tt},Ht=ge=>{const ke={...u,...f.mount?h:{}};return lr(ge)?ke:_o(ge)?bt(ke,ge):ge.map(ue=>bt(ke,ue))},Zt=(ge,ke)=>({invalid:!!bt((ke||n).errors,ge),isDirty:!!bt((ke||n).dirtyFields,ge),isTouched:!!bt((ke||n).touchedFields,ge),isValidating:!!bt((ke||n).validatingFields,ge),error:bt((ke||n).errors,ge)}),Rt=ge=>{ge&&fx(ge).forEach(ke=>_r(n.errors,ke)),A.state.next({errors:ge?n.errors:{}})},vn=(ge,ke,ue)=>{const tt=(bt(s,ge,{_f:{}})._f||{}).ref;zn(n.errors,ge,{...ke,ref:tt}),A.state.next({name:ge,errors:n.errors,isValid:!1}),ue&&ue.shouldFocus&&tt&&tt.focus&&tt.focus()},ui=(ge,ke)=>Ya(ge)?A.values.subscribe({next:ue=>ge(yt(void 0,ke),ue)}):yt(ge,ke,!0),cr=(ge,ke={})=>{for(const ue of ge?fx(ge):a.mount)a.mount.delete(ue),a.array.delete(ue),ke.keepValue||(_r(s,ue),_r(h,ue)),!ke.keepError&&_r(n.errors,ue),!ke.keepDirty&&_r(n.dirtyFields,ue),!ke.keepTouched&&_r(n.touchedFields,ue),!ke.keepIsValidating&&_r(n.validatingFields,ue),!t.shouldUnregister&&!ke.keepDefaultValue&&_r(u,ue);A.values.next({values:{...h}}),A.state.next({...n,...ke.keepDirty?{isDirty:Ge()}:{}}),!ke.keepIsValid&&K()},Gr=({disabled:ge,name:ke,field:ue,fields:tt,value:Ye})=>{if(Ko(ge)){const Ne=ge?void 0:lr(Ye)?gx(ue?ue._f:bt(tt,ke)._f):Ye;zn(h,ke,Ne),Ce(ke,Ne,!1,!1,!0)}},Ai=(ge,ke={})=>{let ue=bt(s,ge);const tt=Ko(ke.disabled);return zn(s,ge,{...ue||{},_f:{...ue&&ue._f?ue._f:{ref:{name:ge}},name:ge,mount:!0,...ke}}),a.mount.add(ge),ue?Gr({field:ue,disabled:ke.disabled,name:ge,value:ke.value}):pe(ge,!0,ke.value),{...tt?{disabled:ke.disabled}:{},...t.progressive?{required:!!ke.required,min:kd(ke.min),max:kd(ke.max),minLength:kd(ke.minLength),maxLength:kd(ke.maxLength),pattern:kd(ke.pattern)}:{},name:ge,onChange:je,onBlur:je,ref:Ye=>{if(Ye){Ai(ge,ke),ue=bt(s,ge);const Ne=lr(Ye.value)&&Ye.querySelectorAll&&Ye.querySelectorAll("input,select,textarea")[0]||Ye,Xe=dZ(Ne),Vt=ue._f.refs||[];if(Xe?Vt.find(_n=>_n===Ne):Ne===ue._f.ref)return;zn(s,ge,{_f:{...ue._f,...Xe?{refs:[...Vt.filter(mx),Ne,...Array.isArray(bt(u,ge))?[{}]:[]],ref:{type:Ne.type,name:ge}}:{ref:Ne}}}),pe(ge,!1,void 0,Ne)}else ue=bt(s,ge,{}),ue._f&&(ue._f.mount=!1),(t.shouldUnregister||ke.shouldUnregister)&&!(nZ(a.array,ge)&&f.action)&&a.unMount.add(ge)}}},Zr=()=>t.shouldFocusError&&Jd(s,ct,a.mount),Wr=ge=>{Ko(ge)&&(A.state.next({disabled:ge}),Jd(s,(ke,ue)=>{let tt=ge;const Ye=bt(s,ue);Ye&&Ko(Ye._f.disabled)&&(tt||(tt=Ye._f.disabled)),ke.disabled=tt},0,!1))},to=(ge,ke)=>async ue=>{let tt;ue&&(ue.preventDefault&&ue.preventDefault(),ue.persist&&ue.persist());let Ye=_s(h);if(A.state.next({isSubmitting:!0}),t.resolver){const{errors:Ne,values:Xe}=await Se();n.errors=Ne,Ye=Xe}else await ze(s);if(_r(n.errors,"root"),Xi(n.errors)){A.state.next({errors:{}});try{await ge(Ye,ue)}catch(Ne){tt=Ne}}else ke&&await ke({...n.errors},ue),Zr(),setTimeout(Zr);if(A.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Xi(n.errors)&&!tt,submitCount:n.submitCount+1,errors:n.errors}),tt)throw tt},as=(ge,ke={})=>{bt(s,ge)&&(lr(ke.defaultValue)?St(ge,_s(bt(u,ge))):(St(ge,ke.defaultValue),zn(u,ge,_s(ke.defaultValue))),ke.keepTouched||_r(n.touchedFields,ge),ke.keepDirty||(_r(n.dirtyFields,ge),n.isDirty=ke.defaultValue?Ge(ge,_s(bt(u,ge))):Ge()),ke.keepError||(_r(n.errors,ge),P.isValid&&K()),A.state.next({...n}))},no=(ge,ke={})=>{const ue=ge?_s(ge):u,tt=_s(ue),Ye=Xi(ge),Ne=Ye?u:tt;if(ke.keepDefaultValues||(u=ue),!ke.keepValues){if(ke.keepDirtyValues)for(const Xe of a.mount)bt(n.dirtyFields,Xe)?zn(Ne,Xe,bt(h,Xe)):St(Xe,bt(Ne,Xe));else{if(Ab&&lr(ge))for(const Xe of a.mount){const Vt=bt(s,Xe);if(Vt&&Vt._f){const _n=Array.isArray(Vt._f.refs)?Vt._f.refs[0]:Vt._f.ref;if(qg(_n)){const An=_n.closest("form");if(An){An.reset();break}}}}s={}}h=e.shouldUnregister?ke.keepDefaultValues?_s(u):{}:_s(Ne),A.array.next({values:{...Ne}}),A.values.next({values:{...Ne}})}a={mount:ke.keepDirtyValues?a.mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},f.mount=!P.isValid||!!ke.keepIsValid||!!ke.keepDirtyValues,f.watch=!!e.shouldUnregister,A.state.next({submitCount:ke.keepSubmitCount?n.submitCount:0,isDirty:Ye?!1:ke.keepDirty?n.isDirty:!!(ke.keepDefaultValues&&!lu(ge,u)),isSubmitted:ke.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:Ye?[]:ke.keepDirtyValues?ke.keepDefaultValues&&h?wm(u,h):n.dirtyFields:ke.keepDefaultValues&&ge?wm(u,ge):{},touchedFields:ke.keepTouched?n.touchedFields:{},errors:ke.keepErrors?n.errors:{},isSubmitSuccessful:ke.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},ki=(ge,ke)=>no(Ya(ge)?ge(h):ge,ke);return{control:{register:Ai,unregister:cr,getFieldState:Zt,handleSubmit:to,setError:vn,_executeSchema:Se,_getWatch:yt,_getDirty:Ge,_updateValid:K,_removeUnmounted:Et,_updateFieldArray:N,_updateDisabledField:Gr,_getFieldArray:xt,_reset:no,_resetDefaultValues:()=>Ya(t.defaultValues)&&t.defaultValues().then(ge=>{ki(ge,t.resetOptions),A.state.next({isLoading:!1})}),_updateFormState:ge=>{n={...n,...ge}},_disableForm:Wr,_subjects:A,_proxyFormState:P,_setErrors:ne,get _fields(){return s},get _formValues(){return h},get _state(){return f},set _state(ge){f=ge},get _defaultValues(){return u},get _names(){return a},set _names(ge){a=ge},get _formState(){return n},set _formState(ge){n=ge},get _options(){return t},set _options(ge){t={...t,...ge}}},trigger:Pt,register:Ai,handleSubmit:to,watch:ui,setValue:St,getValues:Ht,reset:ki,resetField:as,clearErrors:Rt,unregister:cr,setError:vn,setFocus:(ge,ke={})=>{const ue=bt(s,ge),tt=ue&&ue._f;if(tt){const Ye=tt.refs?tt.refs[0]:tt.ref;Ye.focus&&(Ye.focus(),ke.shouldSelect&&Ye.select())}},getFieldState:Zt}}function _Z(e={}){const t=ft.useRef(),n=ft.useRef(),[s,u]=ft.useState({isDirty:!1,isValidating:!1,isLoading:Ya(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,defaultValues:Ya(e.defaultValues)?void 0:e.defaultValues});t.current||(t.current={...vZ(e),formState:s});const h=t.current.control;return h._options=e,oZ({subject:h._subjects.state,next:f=>{sZ(f,h._proxyFormState,h._updateFormState,!0)&&u({...h._formState})}}),ft.useEffect(()=>h._disableForm(e.disabled),[h,e.disabled]),ft.useEffect(()=>{if(h._proxyFormState.isDirty){const f=h._getDirty();f!==s.isDirty&&h._subjects.state.next({isDirty:f})}},[h,s.isDirty]),ft.useEffect(()=>{e.values&&!lu(e.values,n.current)?(h._reset(e.values,h._options.resetOptions),n.current=e.values,u(f=>({...f}))):h._resetDefaultValues()},[e.values,h]),ft.useEffect(()=>{e.errors&&h._setErrors(e.errors)},[e.errors,h]),ft.useEffect(()=>{h._state.mount||(h._updateValid(),h._state.mount=!0),h._state.watch&&(h._state.watch=!1,h._subjects.state.next({...h._formState})),h._removeUnmounted()}),ft.useEffect(()=>{e.shouldUnregister&&h._subjects.values.next({values:h._getWatch()})},[e.shouldUnregister,h]),t.current.formState=iZ(s,h),t.current}const xZ={username:"",password:""};function wZ(){const[e,t]=X.useState(!1),n=()=>t(f=>!f),{register:s,handleSubmit:u}=_Z({defaultValues:xZ});return ae(Eo,{children:gt(sM,{gap:4,className:"naxatw-w-full naxatw-flex-col naxatw-items-center naxatw-justify-center naxatw-pb-4",children:[ae(Jo,{src:YG,width:60}),ae("h3",{children:"Login"}),gt("div",{className:"naxatw-flex naxatw-w-[60%] naxatw-cursor-pointer naxatw-items-center naxatw-justify-center naxatw-gap-2 naxatw-rounded-lg naxatw-border naxatw-border-grey-800 naxatw-px-5 naxatw-py-2 hover:naxatw-shadow-md",children:[ae(Jo,{src:JG}),ae("span",{className:"naxatw-text-body-btn",children:"Continue with Google"})]}),gt(Ts,{className:"naxatw-w-full naxatw-items-center naxatw-justify-center",gap:3,children:[ae("hr",{className:"naxatw-w-[26%]"}),ae("span",{children:"or"}),ae("hr",{className:"naxatw-w-[26%]"})]}),gt("form",{onSubmit:u(f=>{console.log(f)}),className:"naxatw-flex naxatw-w-full naxatw-flex-col naxatw-gap-4",children:[gt(WE,{children:[ae(hx,{htmlFor:"username",required:!0,children:"Email"}),ae(Qa,{id:"username",type:"text",placeholder:"Username",className:"naxatw-mt-1 !naxatw-rounded-lg !naxatw-border-grey-400 !naxatw-p-3",...s("username",{required:!0})})]}),gt(WE,{className:"naxatw-relative",children:[ae(hx,{htmlFor:"password",required:!0,children:"Password"}),ae(Qa,{id:"password",placeholder:"*******",className:"naxatw-mt-1 !naxatw-rounded-lg !naxatw-border-grey-400 !naxatw-p-3",type:e?"text":"password",...s("password",{required:!0})}),ae(Ti,{name:e?"visibility":"visibility_off",className:"naxatw-absolute naxatw-right-2 naxatw-top-[55%] naxatw-cursor-pointer naxatw-text-sm naxatw-text-grey-600",onClick:()=>n()})]}),gt(Ts,{className:"naxatw-items-center naxatw-justify-between",children:[gt(Ts,{className:"naxatw-items-center naxatw-gap-2 naxatw-pl-3",children:[ae(Qa,{type:"checkbox",id:"check"}),ae(hx,{htmlFor:"check",children:"Remember Me"})]}),ae(Ug,{variant:"ghost",className:"naxatw-text-body-btn !naxatw-text-red",onClick:()=>{},type:"button",children:"Forgot Your Password?"})]}),ae(Ug,{className:"!naxatw-bg-red naxatw-py-5",type:"submit",withLoader:!0,children:"Log In"})]})]})})}function bm(e){switch(e){case"login":return{title:"",content:ae(wZ,{}),className:"naxatw-w-[28rem]"};default:return{title:"",content:ae(Eo,{})}}}function cP(e){switch(e){case"delete-layer":return{title:"",content:ae(Eo,{})};default:return{title:"",content:ae(Eo,{})}}}const bZ=()=>{const[e,t]=X.useState(!1),n=()=>{document.documentElement.scrollTop>300?t(!0):t(!1)},s=()=>{window.scrollTo({top:0,behavior:"smooth"})};return X.useEffect(()=>{window.addEventListener("scroll",n)},[]),ae("div",{className:`scroll-to-top-wrapper naxatw-fixed naxatw-bottom-4 naxatw-right-4 ${e?"naxatw-opacity-full naxatw-pointer-events-auto":"naxatw-pointer-events-none naxatw-opacity-0"} common-btn-transition`,children:ae("button",{className:"naxatw-relative naxatw-cursor-pointer",type:"button",onClick:s,children:ae("div",{className:"naxatw-bg-primary hover:naxatw-bg-opacity-100 hover:naxatw-animate-none -naxatw-z-10 naxatw-bg-opacity-50 naxatw-w-12 naxatw-animate-pulse naxatw-h-12 naxatw-rounded-full naxatw-flex naxatw-items-center naxatw-justify-center",children:ae("div",{className:"button-circle naxatw-bg-primary naxatw-z-20 naxatw-bg-opacity-90 naxatw-rounded-full naxatw-relative naxatw-flex naxatw-h-10 naxatw-w-10 -naxatw-rotate-90 naxatw-items-center naxatw-justify-end naxatw-overflow-hidden before:naxatw-absolute before:naxatw-h-full before:naxatw-w-full before:naxatw-scale-100  before:naxatw-rounded-full before:naxatw-bg-main before:naxatw-transition-transform  before:naxatw-duration-500 before:naxatw-ease-out before:naxatw-content-[''] hover:before:naxatw-scale-[0.85]",children:gt("div",{className:"button-cirlce-svgs naxatw-absolute naxatw-z-[2] naxatw-inline-flex naxatw-w-[200%] naxatw-translate-x-0 naxatw-justify-center naxatw-overflow-hidden naxatw-transition-transform naxatw-duration-500 naxatw-ease-out hover:naxatw-translate-x-[50%]",children:[ae(Ti,{name:"east",className:"!naxatw-w-1/2 !naxatw-overflow-hidden naxatw-align-middle !naxatw-text-[1.25rem] !naxatw-text-[#fbf8f3] "}),ae(Ti,{name:"east",className:"!naxatw-w-1/2 !naxatw-overflow-hidden naxatw-align-middle !naxatw-text-[1.25rem] !naxatw-text-[#fbf8f3] "})]})})})})})};function SZ(){var a,w,b,P,A,M;const e=L1(),t=Sc(B=>B.common.showModal),n=Sc(B=>B.common.modalContent),s=Sc(B=>B.common.showPromptDialog),u=Sc(B=>B.common.promptDialogContent),h=()=>{e(gD()),setTimeout(()=>{e(Xq(null))},150)},f=()=>{e(Qq()),setTimeout(()=>{e(Yq(null))},150)};return gt(Eo,{children:[!1,gt("div",{className:"app-root naxatw-flex naxatw-flex-col",children:[ae(QG,{}),ae(P0,{}),ae(GD,{show:t,className:((a=bm(n))==null?void 0:a.className)||"",title:(w=bm(n))==null?void 0:w.title,onClose:h,hideCloseButton:!!((b=bm(n))!=null&&b.hideCloseButton),children:(P=bm(n))==null?void 0:P.content}),ae(BG,{show:s,title:(A=cP(u))==null?void 0:A.title,onClose:f,children:(M=cP(u))==null?void 0:M.content}),dV({routes:RG}),ae(bZ,{})]})]})}const CZ=new R4({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:!1,suspense:!1}}});yx.createRoot(document.getElementById("root")).render(ae(N4,{client:CZ,children:ae(c5,{store:XI,children:ae(oI,{loading:ae("h1",{children:"hello"}),persistor:nV,children:ae(h4,{children:ae(SZ,{})})})})}));
