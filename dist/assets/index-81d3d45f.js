var L_=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)};var ge=(e,t,n)=>(L_(e,t,"read from private field"),n?n.call(e):t.get(e)),kt=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},_t=(e,t,n,s)=>(L_(e,t,"write to private field"),s?s.call(e,n):t.set(e,n),n);var bg=(e,t,n,s)=>({set _(c){_t(e,t,c,n)},get _(){return ge(e,t,s)}}),Qt=(e,t,n)=>(L_(e,t,"access private method"),n);function B3(e,t){for(var n=0;n<t.length;n++){const s=t[n];if(typeof s!="string"&&!Array.isArray(s)){for(const c in s)if(c!=="default"&&!(c in e)){const h=Object.getOwnPropertyDescriptor(s,c);h&&Object.defineProperty(e,c,h.get?h:{enumerable:!0,get:()=>s[c]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))s(c);new MutationObserver(c=>{for(const h of c)if(h.type==="childList")for(const f of h.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function n(c){const h={};return c.integrity&&(h.integrity=c.integrity),c.referrerPolicy&&(h.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?h.credentials="include":c.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function s(c){if(c.ep)return;c.ep=!0;const h=n(c);fetch(c.href,h)}})();var V3=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function YA(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var JA={exports:{}},_v={},ek={exports:{}},tn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var em=Symbol.for("react.element"),j3=Symbol.for("react.portal"),$3=Symbol.for("react.fragment"),U3=Symbol.for("react.strict_mode"),q3=Symbol.for("react.profiler"),G3=Symbol.for("react.provider"),Z3=Symbol.for("react.context"),W3=Symbol.for("react.forward_ref"),H3=Symbol.for("react.suspense"),K3=Symbol.for("react.memo"),X3=Symbol.for("react.lazy"),qT=Symbol.iterator;function Q3(e){return e===null||typeof e!="object"?null:(e=qT&&e[qT]||e["@@iterator"],typeof e=="function"?e:null)}var tk={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},nk=Object.assign,rk={};function cd(e,t,n){this.props=e,this.context=t,this.refs=rk,this.updater=n||tk}cd.prototype.isReactComponent={};cd.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};cd.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function ik(){}ik.prototype=cd.prototype;function F1(e,t,n){this.props=e,this.context=t,this.refs=rk,this.updater=n||tk}var N1=F1.prototype=new ik;N1.constructor=F1;nk(N1,cd.prototype);N1.isPureReactComponent=!0;var GT=Array.isArray,sk=Object.prototype.hasOwnProperty,B1={current:null},ak={key:!0,ref:!0,__self:!0,__source:!0};function ok(e,t,n){var s,c={},h=null,f=null;if(t!=null)for(s in t.ref!==void 0&&(f=t.ref),t.key!==void 0&&(h=""+t.key),t)sk.call(t,s)&&!ak.hasOwnProperty(s)&&(c[s]=t[s]);var o=arguments.length-2;if(o===1)c.children=n;else if(1<o){for(var w=Array(o),b=0;b<o;b++)w[b]=arguments[b+2];c.children=w}if(e&&e.defaultProps)for(s in o=e.defaultProps,o)c[s]===void 0&&(c[s]=o[s]);return{$$typeof:em,type:e,key:h,ref:f,props:c,_owner:B1.current}}function Y3(e,t){return{$$typeof:em,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function V1(e){return typeof e=="object"&&e!==null&&e.$$typeof===em}function J3(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var ZT=/\/+/g;function z_(e,t){return typeof e=="object"&&e!==null&&e.key!=null?J3(""+e.key):t.toString(36)}function Xg(e,t,n,s,c){var h=typeof e;(h==="undefined"||h==="boolean")&&(e=null);var f=!1;if(e===null)f=!0;else switch(h){case"string":case"number":f=!0;break;case"object":switch(e.$$typeof){case em:case j3:f=!0}}if(f)return f=e,c=c(f),e=s===""?"."+z_(f,0):s,GT(c)?(n="",e!=null&&(n=e.replace(ZT,"$&/")+"/"),Xg(c,t,n,"",function(b){return b})):c!=null&&(V1(c)&&(c=Y3(c,n+(!c.key||f&&f.key===c.key?"":(""+c.key).replace(ZT,"$&/")+"/")+e)),t.push(c)),1;if(f=0,s=s===""?".":s+":",GT(e))for(var o=0;o<e.length;o++){h=e[o];var w=s+z_(h,o);f+=Xg(h,t,n,w,c)}else if(w=Q3(e),typeof w=="function")for(e=w.call(e),o=0;!(h=e.next()).done;)h=h.value,w=s+z_(h,o++),f+=Xg(h,t,n,w,c);else if(h==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return f}function Sg(e,t,n){if(e==null)return e;var s=[],c=0;return Xg(e,s,"","",function(h){return t.call(n,h,c++)}),s}function eF(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Fi={current:null},Qg={transition:null},tF={ReactCurrentDispatcher:Fi,ReactCurrentBatchConfig:Qg,ReactCurrentOwner:B1};tn.Children={map:Sg,forEach:function(e,t,n){Sg(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Sg(e,function(){t++}),t},toArray:function(e){return Sg(e,function(t){return t})||[]},only:function(e){if(!V1(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};tn.Component=cd;tn.Fragment=$3;tn.Profiler=q3;tn.PureComponent=F1;tn.StrictMode=U3;tn.Suspense=H3;tn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tF;tn.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=nk({},e.props),c=e.key,h=e.ref,f=e._owner;if(t!=null){if(t.ref!==void 0&&(h=t.ref,f=B1.current),t.key!==void 0&&(c=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(w in t)sk.call(t,w)&&!ak.hasOwnProperty(w)&&(s[w]=t[w]===void 0&&o!==void 0?o[w]:t[w])}var w=arguments.length-2;if(w===1)s.children=n;else if(1<w){o=Array(w);for(var b=0;b<w;b++)o[b]=arguments[b+2];s.children=o}return{$$typeof:em,type:e.type,key:c,ref:h,props:s,_owner:f}};tn.createContext=function(e){return e={$$typeof:Z3,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:G3,_context:e},e.Consumer=e};tn.createElement=ok;tn.createFactory=function(e){var t=ok.bind(null,e);return t.type=e,t};tn.createRef=function(){return{current:null}};tn.forwardRef=function(e){return{$$typeof:W3,render:e}};tn.isValidElement=V1;tn.lazy=function(e){return{$$typeof:X3,_payload:{_status:-1,_result:e},_init:eF}};tn.memo=function(e,t){return{$$typeof:K3,type:e,compare:t===void 0?null:t}};tn.startTransition=function(e){var t=Qg.transition;Qg.transition={};try{e()}finally{Qg.transition=t}};tn.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};tn.useCallback=function(e,t){return Fi.current.useCallback(e,t)};tn.useContext=function(e){return Fi.current.useContext(e)};tn.useDebugValue=function(){};tn.useDeferredValue=function(e){return Fi.current.useDeferredValue(e)};tn.useEffect=function(e,t){return Fi.current.useEffect(e,t)};tn.useId=function(){return Fi.current.useId()};tn.useImperativeHandle=function(e,t,n){return Fi.current.useImperativeHandle(e,t,n)};tn.useInsertionEffect=function(e,t){return Fi.current.useInsertionEffect(e,t)};tn.useLayoutEffect=function(e,t){return Fi.current.useLayoutEffect(e,t)};tn.useMemo=function(e,t){return Fi.current.useMemo(e,t)};tn.useReducer=function(e,t,n){return Fi.current.useReducer(e,t,n)};tn.useRef=function(e){return Fi.current.useRef(e)};tn.useState=function(e){return Fi.current.useState(e)};tn.useSyncExternalStore=function(e,t,n){return Fi.current.useSyncExternalStore(e,t,n)};tn.useTransition=function(){return Fi.current.useTransition()};tn.version="18.2.0";ek.exports=tn;var Y=ek.exports;const bt=YA(Y),lk=B3({__proto__:null,default:bt},[Y]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nF=Y,rF=Symbol.for("react.element"),iF=Symbol.for("react.fragment"),sF=Object.prototype.hasOwnProperty,aF=nF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,oF={key:!0,ref:!0,__self:!0,__source:!0};function ck(e,t,n){var s,c={},h=null,f=null;n!==void 0&&(h=""+n),t.key!==void 0&&(h=""+t.key),t.ref!==void 0&&(f=t.ref);for(s in t)sF.call(t,s)&&!oF.hasOwnProperty(s)&&(c[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)c[s]===void 0&&(c[s]=t[s]);return{$$typeof:rF,type:e,key:h,ref:f,props:c,_owner:aF.current}}_v.Fragment=iF;_v.jsx=ck;_v.jsxs=ck;JA.exports=_v;var j1=JA.exports;const ms=j1.Fragment,K=j1.jsx,Ve=j1.jsxs;var U0={},uk={exports:{}},xs={},hk={exports:{}},dk={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(De,Xe){var mt=De.length;De.push(Xe);e:for(;0<mt;){var zt=mt-1>>>1,$t=De[zt];if(0<c($t,Xe))De[zt]=Xe,De[mt]=$t,mt=zt;else break e}}function n(De){return De.length===0?null:De[0]}function s(De){if(De.length===0)return null;var Xe=De[0],mt=De.pop();if(mt!==Xe){De[0]=mt;e:for(var zt=0,$t=De.length,Dt=$t>>>1;zt<Dt;){var Sn=2*(zt+1)-1,vi=De[Sn],gr=Sn+1,Jr=De[gr];if(0>c(vi,mt))gr<$t&&0>c(Jr,vi)?(De[zt]=Jr,De[gr]=mt,zt=gr):(De[zt]=vi,De[Sn]=mt,zt=Sn);else if(gr<$t&&0>c(Jr,mt))De[zt]=Jr,De[gr]=mt,zt=gr;else break e}}return Xe}function c(De,Xe){var mt=De.sortIndex-Xe.sortIndex;return mt!==0?mt:De.id-Xe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var h=performance;e.unstable_now=function(){return h.now()}}else{var f=Date,o=f.now();e.unstable_now=function(){return f.now()-o}}var w=[],b=[],A=1,C=null,M=3,B=!1,V=!1,j=!1,Z=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,F=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function W(De){for(var Xe=n(b);Xe!==null;){if(Xe.callback===null)s(b);else if(Xe.startTime<=De)s(b),Xe.sortIndex=Xe.expirationTime,t(w,Xe);else break;Xe=n(b)}}function Q(De){if(j=!1,W(De),!V)if(n(w)!==null)V=!0,ht(fe);else{var Xe=n(b);Xe!==null&&Ue(Q,Xe.startTime-De)}}function fe(De,Xe){V=!1,j&&(j=!1,N(Te),Te=-1),B=!0;var mt=M;try{for(W(Xe),C=n(w);C!==null&&(!(C.expirationTime>Xe)||De&&!ft());){var zt=C.callback;if(typeof zt=="function"){C.callback=null,M=C.priorityLevel;var $t=zt(C.expirationTime<=Xe);Xe=e.unstable_now(),typeof $t=="function"?C.callback=$t:C===n(w)&&s(w),W(Xe)}else s(w);C=n(w)}if(C!==null)var Dt=!0;else{var Sn=n(b);Sn!==null&&Ue(Q,Sn.startTime-Xe),Dt=!1}return Dt}finally{C=null,M=mt,B=!1}}var Ee=!1,Re=null,Te=-1,Ne=5,ke=-1;function ft(){return!(e.unstable_now()-ke<Ne)}function je(){if(Re!==null){var De=e.unstable_now();ke=De;var Xe=!0;try{Xe=Re(!0,De)}finally{Xe?st():(Ee=!1,Re=null)}}else Ee=!1}var st;if(typeof F=="function")st=function(){F(je)};else if(typeof MessageChannel<"u"){var ut=new MessageChannel,Tt=ut.port2;ut.port1.onmessage=je,st=function(){Tt.postMessage(null)}}else st=function(){Z(je,0)};function ht(De){Re=De,Ee||(Ee=!0,st())}function Ue(De,Xe){Te=Z(function(){De(e.unstable_now())},Xe)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(De){De.callback=null},e.unstable_continueExecution=function(){V||B||(V=!0,ht(fe))},e.unstable_forceFrameRate=function(De){0>De||125<De?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ne=0<De?Math.floor(1e3/De):5},e.unstable_getCurrentPriorityLevel=function(){return M},e.unstable_getFirstCallbackNode=function(){return n(w)},e.unstable_next=function(De){switch(M){case 1:case 2:case 3:var Xe=3;break;default:Xe=M}var mt=M;M=Xe;try{return De()}finally{M=mt}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(De,Xe){switch(De){case 1:case 2:case 3:case 4:case 5:break;default:De=3}var mt=M;M=De;try{return Xe()}finally{M=mt}},e.unstable_scheduleCallback=function(De,Xe,mt){var zt=e.unstable_now();switch(typeof mt=="object"&&mt!==null?(mt=mt.delay,mt=typeof mt=="number"&&0<mt?zt+mt:zt):mt=zt,De){case 1:var $t=-1;break;case 2:$t=250;break;case 5:$t=1073741823;break;case 4:$t=1e4;break;default:$t=5e3}return $t=mt+$t,De={id:A++,callback:Xe,priorityLevel:De,startTime:mt,expirationTime:$t,sortIndex:-1},mt>zt?(De.sortIndex=mt,t(b,De),n(w)===null&&De===n(b)&&(j?(N(Te),Te=-1):j=!0,Ue(Q,mt-zt))):(De.sortIndex=$t,t(w,De),V||B||(V=!0,ht(fe))),De},e.unstable_shouldYield=ft,e.unstable_wrapCallback=function(De){var Xe=M;return function(){var mt=M;M=Xe;try{return De.apply(this,arguments)}finally{M=mt}}}})(dk);hk.exports=dk;var lF=hk.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fk=Y,gs=lF;function Ye(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var pk=new Set,hp={};function pu(e,t){Wh(e,t),Wh(e+"Capture",t)}function Wh(e,t){for(hp[e]=t,e=0;e<t.length;e++)pk.add(t[e])}var zo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),q0=Object.prototype.hasOwnProperty,cF=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,WT={},HT={};function uF(e){return q0.call(HT,e)?!0:q0.call(WT,e)?!1:cF.test(e)?HT[e]=!0:(WT[e]=!0,!1)}function hF(e,t,n,s){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function dF(e,t,n,s){if(t===null||typeof t>"u"||hF(e,t,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ni(e,t,n,s,c,h,f){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=c,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=h,this.removeEmptyString=f}var Qr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Qr[e]=new Ni(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Qr[t]=new Ni(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Qr[e]=new Ni(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Qr[e]=new Ni(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Qr[e]=new Ni(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Qr[e]=new Ni(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Qr[e]=new Ni(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Qr[e]=new Ni(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Qr[e]=new Ni(e,5,!1,e.toLowerCase(),null,!1,!1)});var $1=/[\-:]([a-z])/g;function U1(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace($1,U1);Qr[t]=new Ni(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace($1,U1);Qr[t]=new Ni(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace($1,U1);Qr[t]=new Ni(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Qr[e]=new Ni(e,1,!1,e.toLowerCase(),null,!1,!1)});Qr.xlinkHref=new Ni("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Qr[e]=new Ni(e,1,!1,e.toLowerCase(),null,!0,!0)});function q1(e,t,n,s){var c=Qr.hasOwnProperty(t)?Qr[t]:null;(c!==null?c.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(dF(t,n,c,s)&&(n=null),s||c===null?uF(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):c.mustUseProperty?e[c.propertyName]=n===null?c.type===3?!1:"":n:(t=c.attributeName,s=c.attributeNamespace,n===null?e.removeAttribute(t):(c=c.type,n=c===3||c===4&&n===!0?"":""+n,s?e.setAttributeNS(s,t,n):e.setAttribute(t,n))))}var Vo=fk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Tg=Symbol.for("react.element"),ah=Symbol.for("react.portal"),oh=Symbol.for("react.fragment"),G1=Symbol.for("react.strict_mode"),G0=Symbol.for("react.profiler"),mk=Symbol.for("react.provider"),gk=Symbol.for("react.context"),Z1=Symbol.for("react.forward_ref"),Z0=Symbol.for("react.suspense"),W0=Symbol.for("react.suspense_list"),W1=Symbol.for("react.memo"),yl=Symbol.for("react.lazy"),yk=Symbol.for("react.offscreen"),KT=Symbol.iterator;function Pf(e){return e===null||typeof e!="object"?null:(e=KT&&e[KT]||e["@@iterator"],typeof e=="function"?e:null)}var Jn=Object.assign,O_;function jf(e){if(O_===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);O_=t&&t[1]||""}return`
`+O_+e}var F_=!1;function N_(e,t){if(!e||F_)return"";F_=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(b){var s=b}Reflect.construct(e,[],t)}else{try{t.call()}catch(b){s=b}e.call(t.prototype)}else{try{throw Error()}catch(b){s=b}e()}}catch(b){if(b&&s&&typeof b.stack=="string"){for(var c=b.stack.split(`
`),h=s.stack.split(`
`),f=c.length-1,o=h.length-1;1<=f&&0<=o&&c[f]!==h[o];)o--;for(;1<=f&&0<=o;f--,o--)if(c[f]!==h[o]){if(f!==1||o!==1)do if(f--,o--,0>o||c[f]!==h[o]){var w=`
`+c[f].replace(" at new "," at ");return e.displayName&&w.includes("<anonymous>")&&(w=w.replace("<anonymous>",e.displayName)),w}while(1<=f&&0<=o);break}}}finally{F_=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?jf(e):""}function fF(e){switch(e.tag){case 5:return jf(e.type);case 16:return jf("Lazy");case 13:return jf("Suspense");case 19:return jf("SuspenseList");case 0:case 2:case 15:return e=N_(e.type,!1),e;case 11:return e=N_(e.type.render,!1),e;case 1:return e=N_(e.type,!0),e;default:return""}}function H0(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case oh:return"Fragment";case ah:return"Portal";case G0:return"Profiler";case G1:return"StrictMode";case Z0:return"Suspense";case W0:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case gk:return(e.displayName||"Context")+".Consumer";case mk:return(e._context.displayName||"Context")+".Provider";case Z1:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case W1:return t=e.displayName||null,t!==null?t:H0(e.type)||"Memo";case yl:t=e._payload,e=e._init;try{return H0(e(t))}catch{}}return null}function pF(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return H0(t);case 8:return t===G1?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Hl(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function vk(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function mF(e){var t=vk(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var c=n.get,h=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(f){s=""+f,h.call(this,f)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(f){s=""+f},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Eg(e){e._valueTracker||(e._valueTracker=mF(e))}function xk(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),s="";return e&&(s=vk(e)?e.checked?"true":"false":e.value),e=s,e!==n?(t.setValue(e),!0):!1}function Ty(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function K0(e,t){var n=t.checked;return Jn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function XT(e,t){var n=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;n=Hl(t.value!=null?t.value:n),e._wrapperState={initialChecked:s,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function _k(e,t){t=t.checked,t!=null&&q1(e,"checked",t,!1)}function X0(e,t){_k(e,t);var n=Hl(t.value),s=t.type;if(n!=null)s==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Q0(e,t.type,n):t.hasOwnProperty("defaultValue")&&Q0(e,t.type,Hl(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function QT(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Q0(e,t,n){(t!=="number"||Ty(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var $f=Array.isArray;function Th(e,t,n,s){if(e=e.options,t){t={};for(var c=0;c<n.length;c++)t["$"+n[c]]=!0;for(n=0;n<e.length;n++)c=t.hasOwnProperty("$"+e[n].value),e[n].selected!==c&&(e[n].selected=c),c&&s&&(e[n].defaultSelected=!0)}else{for(n=""+Hl(n),t=null,c=0;c<e.length;c++){if(e[c].value===n){e[c].selected=!0,s&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function Y0(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Ye(91));return Jn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function YT(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Ye(92));if($f(n)){if(1<n.length)throw Error(Ye(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Hl(n)}}function wk(e,t){var n=Hl(t.value),s=Hl(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),s!=null&&(e.defaultValue=""+s)}function JT(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function bk(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function J0(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?bk(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Cg,Sk=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,s,c){MSApp.execUnsafeLocalFunction(function(){return e(t,n,s,c)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Cg=Cg||document.createElement("div"),Cg.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Cg.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function dp(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Xf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},gF=["Webkit","ms","Moz","O"];Object.keys(Xf).forEach(function(e){gF.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Xf[t]=Xf[e]})});function Tk(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Xf.hasOwnProperty(e)&&Xf[e]?(""+t).trim():t+"px"}function Ek(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var s=n.indexOf("--")===0,c=Tk(n,t[n],s);n==="float"&&(n="cssFloat"),s?e.setProperty(n,c):e[n]=c}}var yF=Jn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ew(e,t){if(t){if(yF[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Ye(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Ye(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Ye(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Ye(62))}}function tw(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var nw=null;function H1(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var rw=null,Eh=null,Ch=null;function eE(e){if(e=rm(e)){if(typeof rw!="function")throw Error(Ye(280));var t=e.stateNode;t&&(t=Ev(t),rw(e.stateNode,e.type,t))}}function Ck(e){Eh?Ch?Ch.push(e):Ch=[e]:Eh=e}function Pk(){if(Eh){var e=Eh,t=Ch;if(Ch=Eh=null,eE(e),t)for(e=0;e<t.length;e++)eE(t[e])}}function Ak(e,t){return e(t)}function kk(){}var B_=!1;function Ik(e,t,n){if(B_)return e(t,n);B_=!0;try{return Ak(e,t,n)}finally{B_=!1,(Eh!==null||Ch!==null)&&(kk(),Pk())}}function fp(e,t){var n=e.stateNode;if(n===null)return null;var s=Ev(n);if(s===null)return null;n=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Ye(231,t,typeof n));return n}var iw=!1;if(zo)try{var Af={};Object.defineProperty(Af,"passive",{get:function(){iw=!0}}),window.addEventListener("test",Af,Af),window.removeEventListener("test",Af,Af)}catch{iw=!1}function vF(e,t,n,s,c,h,f,o,w){var b=Array.prototype.slice.call(arguments,3);try{t.apply(n,b)}catch(A){this.onError(A)}}var Qf=!1,Ey=null,Cy=!1,sw=null,xF={onError:function(e){Qf=!0,Ey=e}};function _F(e,t,n,s,c,h,f,o,w){Qf=!1,Ey=null,vF.apply(xF,arguments)}function wF(e,t,n,s,c,h,f,o,w){if(_F.apply(this,arguments),Qf){if(Qf){var b=Ey;Qf=!1,Ey=null}else throw Error(Ye(198));Cy||(Cy=!0,sw=b)}}function mu(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Mk(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function tE(e){if(mu(e)!==e)throw Error(Ye(188))}function bF(e){var t=e.alternate;if(!t){if(t=mu(e),t===null)throw Error(Ye(188));return t!==e?null:e}for(var n=e,s=t;;){var c=n.return;if(c===null)break;var h=c.alternate;if(h===null){if(s=c.return,s!==null){n=s;continue}break}if(c.child===h.child){for(h=c.child;h;){if(h===n)return tE(c),e;if(h===s)return tE(c),t;h=h.sibling}throw Error(Ye(188))}if(n.return!==s.return)n=c,s=h;else{for(var f=!1,o=c.child;o;){if(o===n){f=!0,n=c,s=h;break}if(o===s){f=!0,s=c,n=h;break}o=o.sibling}if(!f){for(o=h.child;o;){if(o===n){f=!0,n=h,s=c;break}if(o===s){f=!0,s=h,n=c;break}o=o.sibling}if(!f)throw Error(Ye(189))}}if(n.alternate!==s)throw Error(Ye(190))}if(n.tag!==3)throw Error(Ye(188));return n.stateNode.current===n?e:t}function Rk(e){return e=bF(e),e!==null?Dk(e):null}function Dk(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Dk(e);if(t!==null)return t;e=e.sibling}return null}var Lk=gs.unstable_scheduleCallback,nE=gs.unstable_cancelCallback,SF=gs.unstable_shouldYield,TF=gs.unstable_requestPaint,mr=gs.unstable_now,EF=gs.unstable_getCurrentPriorityLevel,K1=gs.unstable_ImmediatePriority,zk=gs.unstable_UserBlockingPriority,Py=gs.unstable_NormalPriority,CF=gs.unstable_LowPriority,Ok=gs.unstable_IdlePriority,wv=null,$a=null;function PF(e){if($a&&typeof $a.onCommitFiberRoot=="function")try{$a.onCommitFiberRoot(wv,e,void 0,(e.current.flags&128)===128)}catch{}}var ya=Math.clz32?Math.clz32:IF,AF=Math.log,kF=Math.LN2;function IF(e){return e>>>=0,e===0?32:31-(AF(e)/kF|0)|0}var Pg=64,Ag=4194304;function Uf(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ay(e,t){var n=e.pendingLanes;if(n===0)return 0;var s=0,c=e.suspendedLanes,h=e.pingedLanes,f=n&268435455;if(f!==0){var o=f&~c;o!==0?s=Uf(o):(h&=f,h!==0&&(s=Uf(h)))}else f=n&~c,f!==0?s=Uf(f):h!==0&&(s=Uf(h));if(s===0)return 0;if(t!==0&&t!==s&&!(t&c)&&(c=s&-s,h=t&-t,c>=h||c===16&&(h&4194240)!==0))return t;if(s&4&&(s|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)n=31-ya(t),c=1<<n,s|=e[n],t&=~c;return s}function MF(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function RF(e,t){for(var n=e.suspendedLanes,s=e.pingedLanes,c=e.expirationTimes,h=e.pendingLanes;0<h;){var f=31-ya(h),o=1<<f,w=c[f];w===-1?(!(o&n)||o&s)&&(c[f]=MF(o,t)):w<=t&&(e.expiredLanes|=o),h&=~o}}function aw(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Fk(){var e=Pg;return Pg<<=1,!(Pg&4194240)&&(Pg=64),e}function V_(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function tm(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ya(t),e[t]=n}function DF(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<n;){var c=31-ya(n),h=1<<c;t[c]=0,s[c]=-1,e[c]=-1,n&=~h}}function X1(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var s=31-ya(n),c=1<<s;c&t|e[s]&t&&(e[s]|=t),n&=~c}}var gn=0;function Nk(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Bk,Q1,Vk,jk,$k,ow=!1,kg=[],Ol=null,Fl=null,Nl=null,pp=new Map,mp=new Map,xl=[],LF="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function rE(e,t){switch(e){case"focusin":case"focusout":Ol=null;break;case"dragenter":case"dragleave":Fl=null;break;case"mouseover":case"mouseout":Nl=null;break;case"pointerover":case"pointerout":pp.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":mp.delete(t.pointerId)}}function kf(e,t,n,s,c,h){return e===null||e.nativeEvent!==h?(e={blockedOn:t,domEventName:n,eventSystemFlags:s,nativeEvent:h,targetContainers:[c]},t!==null&&(t=rm(t),t!==null&&Q1(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function zF(e,t,n,s,c){switch(t){case"focusin":return Ol=kf(Ol,e,t,n,s,c),!0;case"dragenter":return Fl=kf(Fl,e,t,n,s,c),!0;case"mouseover":return Nl=kf(Nl,e,t,n,s,c),!0;case"pointerover":var h=c.pointerId;return pp.set(h,kf(pp.get(h)||null,e,t,n,s,c)),!0;case"gotpointercapture":return h=c.pointerId,mp.set(h,kf(mp.get(h)||null,e,t,n,s,c)),!0}return!1}function Uk(e){var t=Bc(e.target);if(t!==null){var n=mu(t);if(n!==null){if(t=n.tag,t===13){if(t=Mk(n),t!==null){e.blockedOn=t,$k(e.priority,function(){Vk(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Yg(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=lw(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var s=new n.constructor(n.type,n);nw=s,n.target.dispatchEvent(s),nw=null}else return t=rm(n),t!==null&&Q1(t),e.blockedOn=n,!1;t.shift()}return!0}function iE(e,t,n){Yg(e)&&n.delete(t)}function OF(){ow=!1,Ol!==null&&Yg(Ol)&&(Ol=null),Fl!==null&&Yg(Fl)&&(Fl=null),Nl!==null&&Yg(Nl)&&(Nl=null),pp.forEach(iE),mp.forEach(iE)}function If(e,t){e.blockedOn===t&&(e.blockedOn=null,ow||(ow=!0,gs.unstable_scheduleCallback(gs.unstable_NormalPriority,OF)))}function gp(e){function t(c){return If(c,e)}if(0<kg.length){If(kg[0],e);for(var n=1;n<kg.length;n++){var s=kg[n];s.blockedOn===e&&(s.blockedOn=null)}}for(Ol!==null&&If(Ol,e),Fl!==null&&If(Fl,e),Nl!==null&&If(Nl,e),pp.forEach(t),mp.forEach(t),n=0;n<xl.length;n++)s=xl[n],s.blockedOn===e&&(s.blockedOn=null);for(;0<xl.length&&(n=xl[0],n.blockedOn===null);)Uk(n),n.blockedOn===null&&xl.shift()}var Ph=Vo.ReactCurrentBatchConfig,ky=!0;function FF(e,t,n,s){var c=gn,h=Ph.transition;Ph.transition=null;try{gn=1,Y1(e,t,n,s)}finally{gn=c,Ph.transition=h}}function NF(e,t,n,s){var c=gn,h=Ph.transition;Ph.transition=null;try{gn=4,Y1(e,t,n,s)}finally{gn=c,Ph.transition=h}}function Y1(e,t,n,s){if(ky){var c=lw(e,t,n,s);if(c===null)X_(e,t,s,Iy,n),rE(e,s);else if(zF(c,e,t,n,s))s.stopPropagation();else if(rE(e,s),t&4&&-1<LF.indexOf(e)){for(;c!==null;){var h=rm(c);if(h!==null&&Bk(h),h=lw(e,t,n,s),h===null&&X_(e,t,s,Iy,n),h===c)break;c=h}c!==null&&s.stopPropagation()}else X_(e,t,s,null,n)}}var Iy=null;function lw(e,t,n,s){if(Iy=null,e=H1(s),e=Bc(e),e!==null)if(t=mu(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Mk(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Iy=e,null}function qk(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(EF()){case K1:return 1;case zk:return 4;case Py:case CF:return 16;case Ok:return 536870912;default:return 16}default:return 16}}var Ml=null,J1=null,Jg=null;function Gk(){if(Jg)return Jg;var e,t=J1,n=t.length,s,c="value"in Ml?Ml.value:Ml.textContent,h=c.length;for(e=0;e<n&&t[e]===c[e];e++);var f=n-e;for(s=1;s<=f&&t[n-s]===c[h-s];s++);return Jg=c.slice(e,1<s?1-s:void 0)}function ey(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ig(){return!0}function sE(){return!1}function _s(e){function t(n,s,c,h,f){this._reactName=n,this._targetInst=c,this.type=s,this.nativeEvent=h,this.target=f,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(n=e[o],this[o]=n?n(h):h[o]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?Ig:sE,this.isPropagationStopped=sE,this}return Jn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ig)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ig)},persist:function(){},isPersistent:Ig}),t}var ud={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},eb=_s(ud),nm=Jn({},ud,{view:0,detail:0}),BF=_s(nm),j_,$_,Mf,bv=Jn({},nm,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:tb,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Mf&&(Mf&&e.type==="mousemove"?(j_=e.screenX-Mf.screenX,$_=e.screenY-Mf.screenY):$_=j_=0,Mf=e),j_)},movementY:function(e){return"movementY"in e?e.movementY:$_}}),aE=_s(bv),VF=Jn({},bv,{dataTransfer:0}),jF=_s(VF),$F=Jn({},nm,{relatedTarget:0}),U_=_s($F),UF=Jn({},ud,{animationName:0,elapsedTime:0,pseudoElement:0}),qF=_s(UF),GF=Jn({},ud,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ZF=_s(GF),WF=Jn({},ud,{data:0}),oE=_s(WF),HF={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},KF={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},XF={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function QF(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=XF[e])?!!t[e]:!1}function tb(){return QF}var YF=Jn({},nm,{key:function(e){if(e.key){var t=HF[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ey(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?KF[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:tb,charCode:function(e){return e.type==="keypress"?ey(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ey(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),JF=_s(YF),eN=Jn({},bv,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),lE=_s(eN),tN=Jn({},nm,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:tb}),nN=_s(tN),rN=Jn({},ud,{propertyName:0,elapsedTime:0,pseudoElement:0}),iN=_s(rN),sN=Jn({},bv,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),aN=_s(sN),oN=[9,13,27,32],nb=zo&&"CompositionEvent"in window,Yf=null;zo&&"documentMode"in document&&(Yf=document.documentMode);var lN=zo&&"TextEvent"in window&&!Yf,Zk=zo&&(!nb||Yf&&8<Yf&&11>=Yf),cE=String.fromCharCode(32),uE=!1;function Wk(e,t){switch(e){case"keyup":return oN.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hk(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var lh=!1;function cN(e,t){switch(e){case"compositionend":return Hk(t);case"keypress":return t.which!==32?null:(uE=!0,cE);case"textInput":return e=t.data,e===cE&&uE?null:e;default:return null}}function uN(e,t){if(lh)return e==="compositionend"||!nb&&Wk(e,t)?(e=Gk(),Jg=J1=Ml=null,lh=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Zk&&t.locale!=="ko"?null:t.data;default:return null}}var hN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hE(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!hN[e.type]:t==="textarea"}function Kk(e,t,n,s){Ck(s),t=My(t,"onChange"),0<t.length&&(n=new eb("onChange","change",null,n,s),e.push({event:n,listeners:t}))}var Jf=null,yp=null;function dN(e){aI(e,0)}function Sv(e){var t=hh(e);if(xk(t))return e}function fN(e,t){if(e==="change")return t}var Xk=!1;if(zo){var q_;if(zo){var G_="oninput"in document;if(!G_){var dE=document.createElement("div");dE.setAttribute("oninput","return;"),G_=typeof dE.oninput=="function"}q_=G_}else q_=!1;Xk=q_&&(!document.documentMode||9<document.documentMode)}function fE(){Jf&&(Jf.detachEvent("onpropertychange",Qk),yp=Jf=null)}function Qk(e){if(e.propertyName==="value"&&Sv(yp)){var t=[];Kk(t,yp,e,H1(e)),Ik(dN,t)}}function pN(e,t,n){e==="focusin"?(fE(),Jf=t,yp=n,Jf.attachEvent("onpropertychange",Qk)):e==="focusout"&&fE()}function mN(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Sv(yp)}function gN(e,t){if(e==="click")return Sv(t)}function yN(e,t){if(e==="input"||e==="change")return Sv(t)}function vN(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var xa=typeof Object.is=="function"?Object.is:vN;function vp(e,t){if(xa(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var c=n[s];if(!q0.call(t,c)||!xa(e[c],t[c]))return!1}return!0}function pE(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function mE(e,t){var n=pE(e);e=0;for(var s;n;){if(n.nodeType===3){if(s=e+n.textContent.length,e<=t&&s>=t)return{node:n,offset:t-e};e=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=pE(n)}}function Yk(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Yk(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Jk(){for(var e=window,t=Ty();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Ty(e.document)}return t}function rb(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function xN(e){var t=Jk(),n=e.focusedElem,s=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Yk(n.ownerDocument.documentElement,n)){if(s!==null&&rb(n)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var c=n.textContent.length,h=Math.min(s.start,c);s=s.end===void 0?h:Math.min(s.end,c),!e.extend&&h>s&&(c=s,s=h,h=c),c=mE(n,h);var f=mE(n,s);c&&f&&(e.rangeCount!==1||e.anchorNode!==c.node||e.anchorOffset!==c.offset||e.focusNode!==f.node||e.focusOffset!==f.offset)&&(t=t.createRange(),t.setStart(c.node,c.offset),e.removeAllRanges(),h>s?(e.addRange(t),e.extend(f.node,f.offset)):(t.setEnd(f.node,f.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var _N=zo&&"documentMode"in document&&11>=document.documentMode,ch=null,cw=null,ep=null,uw=!1;function gE(e,t,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;uw||ch==null||ch!==Ty(s)||(s=ch,"selectionStart"in s&&rb(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),ep&&vp(ep,s)||(ep=s,s=My(cw,"onSelect"),0<s.length&&(t=new eb("onSelect","select",null,t,n),e.push({event:t,listeners:s}),t.target=ch)))}function Mg(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var uh={animationend:Mg("Animation","AnimationEnd"),animationiteration:Mg("Animation","AnimationIteration"),animationstart:Mg("Animation","AnimationStart"),transitionend:Mg("Transition","TransitionEnd")},Z_={},eI={};zo&&(eI=document.createElement("div").style,"AnimationEvent"in window||(delete uh.animationend.animation,delete uh.animationiteration.animation,delete uh.animationstart.animation),"TransitionEvent"in window||delete uh.transitionend.transition);function Tv(e){if(Z_[e])return Z_[e];if(!uh[e])return e;var t=uh[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in eI)return Z_[e]=t[n];return e}var tI=Tv("animationend"),nI=Tv("animationiteration"),rI=Tv("animationstart"),iI=Tv("transitionend"),sI=new Map,yE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function nc(e,t){sI.set(e,t),pu(t,[e])}for(var W_=0;W_<yE.length;W_++){var H_=yE[W_],wN=H_.toLowerCase(),bN=H_[0].toUpperCase()+H_.slice(1);nc(wN,"on"+bN)}nc(tI,"onAnimationEnd");nc(nI,"onAnimationIteration");nc(rI,"onAnimationStart");nc("dblclick","onDoubleClick");nc("focusin","onFocus");nc("focusout","onBlur");nc(iI,"onTransitionEnd");Wh("onMouseEnter",["mouseout","mouseover"]);Wh("onMouseLeave",["mouseout","mouseover"]);Wh("onPointerEnter",["pointerout","pointerover"]);Wh("onPointerLeave",["pointerout","pointerover"]);pu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));pu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));pu("onBeforeInput",["compositionend","keypress","textInput","paste"]);pu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));pu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));pu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),SN=new Set("cancel close invalid load scroll toggle".split(" ").concat(qf));function vE(e,t,n){var s=e.type||"unknown-event";e.currentTarget=n,wF(s,t,void 0,e),e.currentTarget=null}function aI(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var s=e[n],c=s.event;s=s.listeners;e:{var h=void 0;if(t)for(var f=s.length-1;0<=f;f--){var o=s[f],w=o.instance,b=o.currentTarget;if(o=o.listener,w!==h&&c.isPropagationStopped())break e;vE(c,o,b),h=w}else for(f=0;f<s.length;f++){if(o=s[f],w=o.instance,b=o.currentTarget,o=o.listener,w!==h&&c.isPropagationStopped())break e;vE(c,o,b),h=w}}}if(Cy)throw e=sw,Cy=!1,sw=null,e}function Nn(e,t){var n=t[mw];n===void 0&&(n=t[mw]=new Set);var s=e+"__bubble";n.has(s)||(oI(t,e,2,!1),n.add(s))}function K_(e,t,n){var s=0;t&&(s|=4),oI(n,e,s,t)}var Rg="_reactListening"+Math.random().toString(36).slice(2);function xp(e){if(!e[Rg]){e[Rg]=!0,pk.forEach(function(n){n!=="selectionchange"&&(SN.has(n)||K_(n,!1,e),K_(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Rg]||(t[Rg]=!0,K_("selectionchange",!1,t))}}function oI(e,t,n,s){switch(qk(t)){case 1:var c=FF;break;case 4:c=NF;break;default:c=Y1}n=c.bind(null,t,n,e),c=void 0,!iw||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),s?c!==void 0?e.addEventListener(t,n,{capture:!0,passive:c}):e.addEventListener(t,n,!0):c!==void 0?e.addEventListener(t,n,{passive:c}):e.addEventListener(t,n,!1)}function X_(e,t,n,s,c){var h=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var f=s.tag;if(f===3||f===4){var o=s.stateNode.containerInfo;if(o===c||o.nodeType===8&&o.parentNode===c)break;if(f===4)for(f=s.return;f!==null;){var w=f.tag;if((w===3||w===4)&&(w=f.stateNode.containerInfo,w===c||w.nodeType===8&&w.parentNode===c))return;f=f.return}for(;o!==null;){if(f=Bc(o),f===null)return;if(w=f.tag,w===5||w===6){s=h=f;continue e}o=o.parentNode}}s=s.return}Ik(function(){var b=h,A=H1(n),C=[];e:{var M=sI.get(e);if(M!==void 0){var B=eb,V=e;switch(e){case"keypress":if(ey(n)===0)break e;case"keydown":case"keyup":B=JF;break;case"focusin":V="focus",B=U_;break;case"focusout":V="blur",B=U_;break;case"beforeblur":case"afterblur":B=U_;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":B=aE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":B=jF;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":B=nN;break;case tI:case nI:case rI:B=qF;break;case iI:B=iN;break;case"scroll":B=BF;break;case"wheel":B=aN;break;case"copy":case"cut":case"paste":B=ZF;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":B=lE}var j=(t&4)!==0,Z=!j&&e==="scroll",N=j?M!==null?M+"Capture":null:M;j=[];for(var F=b,W;F!==null;){W=F;var Q=W.stateNode;if(W.tag===5&&Q!==null&&(W=Q,N!==null&&(Q=fp(F,N),Q!=null&&j.push(_p(F,Q,W)))),Z)break;F=F.return}0<j.length&&(M=new B(M,V,null,n,A),C.push({event:M,listeners:j}))}}if(!(t&7)){e:{if(M=e==="mouseover"||e==="pointerover",B=e==="mouseout"||e==="pointerout",M&&n!==nw&&(V=n.relatedTarget||n.fromElement)&&(Bc(V)||V[Oo]))break e;if((B||M)&&(M=A.window===A?A:(M=A.ownerDocument)?M.defaultView||M.parentWindow:window,B?(V=n.relatedTarget||n.toElement,B=b,V=V?Bc(V):null,V!==null&&(Z=mu(V),V!==Z||V.tag!==5&&V.tag!==6)&&(V=null)):(B=null,V=b),B!==V)){if(j=aE,Q="onMouseLeave",N="onMouseEnter",F="mouse",(e==="pointerout"||e==="pointerover")&&(j=lE,Q="onPointerLeave",N="onPointerEnter",F="pointer"),Z=B==null?M:hh(B),W=V==null?M:hh(V),M=new j(Q,F+"leave",B,n,A),M.target=Z,M.relatedTarget=W,Q=null,Bc(A)===b&&(j=new j(N,F+"enter",V,n,A),j.target=W,j.relatedTarget=Z,Q=j),Z=Q,B&&V)t:{for(j=B,N=V,F=0,W=j;W;W=nh(W))F++;for(W=0,Q=N;Q;Q=nh(Q))W++;for(;0<F-W;)j=nh(j),F--;for(;0<W-F;)N=nh(N),W--;for(;F--;){if(j===N||N!==null&&j===N.alternate)break t;j=nh(j),N=nh(N)}j=null}else j=null;B!==null&&xE(C,M,B,j,!1),V!==null&&Z!==null&&xE(C,Z,V,j,!0)}}e:{if(M=b?hh(b):window,B=M.nodeName&&M.nodeName.toLowerCase(),B==="select"||B==="input"&&M.type==="file")var fe=fN;else if(hE(M))if(Xk)fe=yN;else{fe=mN;var Ee=pN}else(B=M.nodeName)&&B.toLowerCase()==="input"&&(M.type==="checkbox"||M.type==="radio")&&(fe=gN);if(fe&&(fe=fe(e,b))){Kk(C,fe,n,A);break e}Ee&&Ee(e,M,b),e==="focusout"&&(Ee=M._wrapperState)&&Ee.controlled&&M.type==="number"&&Q0(M,"number",M.value)}switch(Ee=b?hh(b):window,e){case"focusin":(hE(Ee)||Ee.contentEditable==="true")&&(ch=Ee,cw=b,ep=null);break;case"focusout":ep=cw=ch=null;break;case"mousedown":uw=!0;break;case"contextmenu":case"mouseup":case"dragend":uw=!1,gE(C,n,A);break;case"selectionchange":if(_N)break;case"keydown":case"keyup":gE(C,n,A)}var Re;if(nb)e:{switch(e){case"compositionstart":var Te="onCompositionStart";break e;case"compositionend":Te="onCompositionEnd";break e;case"compositionupdate":Te="onCompositionUpdate";break e}Te=void 0}else lh?Wk(e,n)&&(Te="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(Te="onCompositionStart");Te&&(Zk&&n.locale!=="ko"&&(lh||Te!=="onCompositionStart"?Te==="onCompositionEnd"&&lh&&(Re=Gk()):(Ml=A,J1="value"in Ml?Ml.value:Ml.textContent,lh=!0)),Ee=My(b,Te),0<Ee.length&&(Te=new oE(Te,e,null,n,A),C.push({event:Te,listeners:Ee}),Re?Te.data=Re:(Re=Hk(n),Re!==null&&(Te.data=Re)))),(Re=lN?cN(e,n):uN(e,n))&&(b=My(b,"onBeforeInput"),0<b.length&&(A=new oE("onBeforeInput","beforeinput",null,n,A),C.push({event:A,listeners:b}),A.data=Re))}aI(C,t)})}function _p(e,t,n){return{instance:e,listener:t,currentTarget:n}}function My(e,t){for(var n=t+"Capture",s=[];e!==null;){var c=e,h=c.stateNode;c.tag===5&&h!==null&&(c=h,h=fp(e,n),h!=null&&s.unshift(_p(e,h,c)),h=fp(e,t),h!=null&&s.push(_p(e,h,c))),e=e.return}return s}function nh(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function xE(e,t,n,s,c){for(var h=t._reactName,f=[];n!==null&&n!==s;){var o=n,w=o.alternate,b=o.stateNode;if(w!==null&&w===s)break;o.tag===5&&b!==null&&(o=b,c?(w=fp(n,h),w!=null&&f.unshift(_p(n,w,o))):c||(w=fp(n,h),w!=null&&f.push(_p(n,w,o)))),n=n.return}f.length!==0&&e.push({event:t,listeners:f})}var TN=/\r\n?/g,EN=/\u0000|\uFFFD/g;function _E(e){return(typeof e=="string"?e:""+e).replace(TN,`
`).replace(EN,"")}function Dg(e,t,n){if(t=_E(t),_E(e)!==t&&n)throw Error(Ye(425))}function Ry(){}var hw=null,dw=null;function fw(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var pw=typeof setTimeout=="function"?setTimeout:void 0,CN=typeof clearTimeout=="function"?clearTimeout:void 0,wE=typeof Promise=="function"?Promise:void 0,PN=typeof queueMicrotask=="function"?queueMicrotask:typeof wE<"u"?function(e){return wE.resolve(null).then(e).catch(AN)}:pw;function AN(e){setTimeout(function(){throw e})}function Q_(e,t){var n=t,s=0;do{var c=n.nextSibling;if(e.removeChild(n),c&&c.nodeType===8)if(n=c.data,n==="/$"){if(s===0){e.removeChild(c),gp(t);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=c}while(n);gp(t)}function Bl(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function bE(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var hd=Math.random().toString(36).slice(2),Ba="__reactFiber$"+hd,wp="__reactProps$"+hd,Oo="__reactContainer$"+hd,mw="__reactEvents$"+hd,kN="__reactListeners$"+hd,IN="__reactHandles$"+hd;function Bc(e){var t=e[Ba];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Oo]||n[Ba]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=bE(e);e!==null;){if(n=e[Ba])return n;e=bE(e)}return t}e=n,n=e.parentNode}return null}function rm(e){return e=e[Ba]||e[Oo],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function hh(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Ye(33))}function Ev(e){return e[wp]||null}var gw=[],dh=-1;function rc(e){return{current:e}}function Vn(e){0>dh||(e.current=gw[dh],gw[dh]=null,dh--)}function Rn(e,t){dh++,gw[dh]=e.current,e.current=t}var Kl={},yi=rc(Kl),es=rc(!1),su=Kl;function Hh(e,t){var n=e.type.contextTypes;if(!n)return Kl;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var c={},h;for(h in n)c[h]=t[h];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=c),c}function ts(e){return e=e.childContextTypes,e!=null}function Dy(){Vn(es),Vn(yi)}function SE(e,t,n){if(yi.current!==Kl)throw Error(Ye(168));Rn(yi,t),Rn(es,n)}function lI(e,t,n){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var c in s)if(!(c in t))throw Error(Ye(108,pF(e)||"Unknown",c));return Jn({},n,s)}function Ly(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Kl,su=yi.current,Rn(yi,e),Rn(es,es.current),!0}function TE(e,t,n){var s=e.stateNode;if(!s)throw Error(Ye(169));n?(e=lI(e,t,su),s.__reactInternalMemoizedMergedChildContext=e,Vn(es),Vn(yi),Rn(yi,e)):Vn(es),Rn(es,n)}var xo=null,Cv=!1,Y_=!1;function cI(e){xo===null?xo=[e]:xo.push(e)}function MN(e){Cv=!0,cI(e)}function ic(){if(!Y_&&xo!==null){Y_=!0;var e=0,t=gn;try{var n=xo;for(gn=1;e<n.length;e++){var s=n[e];do s=s(!0);while(s!==null)}xo=null,Cv=!1}catch(c){throw xo!==null&&(xo=xo.slice(e+1)),Lk(K1,ic),c}finally{gn=t,Y_=!1}}return null}var fh=[],ph=0,zy=null,Oy=0,Ns=[],Bs=0,au=null,Eo=1,Co="";function Mc(e,t){fh[ph++]=Oy,fh[ph++]=zy,zy=e,Oy=t}function uI(e,t,n){Ns[Bs++]=Eo,Ns[Bs++]=Co,Ns[Bs++]=au,au=e;var s=Eo;e=Co;var c=32-ya(s)-1;s&=~(1<<c),n+=1;var h=32-ya(t)+c;if(30<h){var f=c-c%5;h=(s&(1<<f)-1).toString(32),s>>=f,c-=f,Eo=1<<32-ya(t)+c|n<<c|s,Co=h+e}else Eo=1<<h|n<<c|s,Co=e}function ib(e){e.return!==null&&(Mc(e,1),uI(e,1,0))}function sb(e){for(;e===zy;)zy=fh[--ph],fh[ph]=null,Oy=fh[--ph],fh[ph]=null;for(;e===au;)au=Ns[--Bs],Ns[Bs]=null,Co=Ns[--Bs],Ns[Bs]=null,Eo=Ns[--Bs],Ns[Bs]=null}var ps=null,ds=null,Gn=!1,pa=null;function hI(e,t){var n=js(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function EE(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ps=e,ds=Bl(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ps=e,ds=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=au!==null?{id:Eo,overflow:Co}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=js(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,ps=e,ds=null,!0):!1;default:return!1}}function yw(e){return(e.mode&1)!==0&&(e.flags&128)===0}function vw(e){if(Gn){var t=ds;if(t){var n=t;if(!EE(e,t)){if(yw(e))throw Error(Ye(418));t=Bl(n.nextSibling);var s=ps;t&&EE(e,t)?hI(s,n):(e.flags=e.flags&-4097|2,Gn=!1,ps=e)}}else{if(yw(e))throw Error(Ye(418));e.flags=e.flags&-4097|2,Gn=!1,ps=e}}}function CE(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ps=e}function Lg(e){if(e!==ps)return!1;if(!Gn)return CE(e),Gn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!fw(e.type,e.memoizedProps)),t&&(t=ds)){if(yw(e))throw dI(),Error(Ye(418));for(;t;)hI(e,t),t=Bl(t.nextSibling)}if(CE(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Ye(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){ds=Bl(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}ds=null}}else ds=ps?Bl(e.stateNode.nextSibling):null;return!0}function dI(){for(var e=ds;e;)e=Bl(e.nextSibling)}function Kh(){ds=ps=null,Gn=!1}function ab(e){pa===null?pa=[e]:pa.push(e)}var RN=Vo.ReactCurrentBatchConfig;function la(e,t){if(e&&e.defaultProps){t=Jn({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var Fy=rc(null),Ny=null,mh=null,ob=null;function lb(){ob=mh=Ny=null}function cb(e){var t=Fy.current;Vn(Fy),e._currentValue=t}function xw(e,t,n){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===n)break;e=e.return}}function Ah(e,t){Ny=e,ob=mh=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ji=!0),e.firstContext=null)}function qs(e){var t=e._currentValue;if(ob!==e)if(e={context:e,memoizedValue:t,next:null},mh===null){if(Ny===null)throw Error(Ye(308));mh=e,Ny.dependencies={lanes:0,firstContext:e}}else mh=mh.next=e;return t}var Vc=null;function ub(e){Vc===null?Vc=[e]:Vc.push(e)}function fI(e,t,n,s){var c=t.interleaved;return c===null?(n.next=n,ub(t)):(n.next=c.next,c.next=n),t.interleaved=n,Fo(e,s)}function Fo(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var vl=!1;function hb(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function pI(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Io(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Vl(e,t,n){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,cn&2){var c=s.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),s.pending=t,Fo(e,n)}return c=s.interleaved,c===null?(t.next=t,ub(s)):(t.next=c.next,c.next=t),s.interleaved=t,Fo(e,n)}function ty(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,X1(e,n)}}function PE(e,t){var n=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var c=null,h=null;if(n=n.firstBaseUpdate,n!==null){do{var f={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};h===null?c=h=f:h=h.next=f,n=n.next}while(n!==null);h===null?c=h=t:h=h.next=t}else c=h=t;n={baseState:s.baseState,firstBaseUpdate:c,lastBaseUpdate:h,shared:s.shared,effects:s.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function By(e,t,n,s){var c=e.updateQueue;vl=!1;var h=c.firstBaseUpdate,f=c.lastBaseUpdate,o=c.shared.pending;if(o!==null){c.shared.pending=null;var w=o,b=w.next;w.next=null,f===null?h=b:f.next=b,f=w;var A=e.alternate;A!==null&&(A=A.updateQueue,o=A.lastBaseUpdate,o!==f&&(o===null?A.firstBaseUpdate=b:o.next=b,A.lastBaseUpdate=w))}if(h!==null){var C=c.baseState;f=0,A=b=w=null,o=h;do{var M=o.lane,B=o.eventTime;if((s&M)===M){A!==null&&(A=A.next={eventTime:B,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var V=e,j=o;switch(M=t,B=n,j.tag){case 1:if(V=j.payload,typeof V=="function"){C=V.call(B,C,M);break e}C=V;break e;case 3:V.flags=V.flags&-65537|128;case 0:if(V=j.payload,M=typeof V=="function"?V.call(B,C,M):V,M==null)break e;C=Jn({},C,M);break e;case 2:vl=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,M=c.effects,M===null?c.effects=[o]:M.push(o))}else B={eventTime:B,lane:M,tag:o.tag,payload:o.payload,callback:o.callback,next:null},A===null?(b=A=B,w=C):A=A.next=B,f|=M;if(o=o.next,o===null){if(o=c.shared.pending,o===null)break;M=o,o=M.next,M.next=null,c.lastBaseUpdate=M,c.shared.pending=null}}while(1);if(A===null&&(w=C),c.baseState=w,c.firstBaseUpdate=b,c.lastBaseUpdate=A,t=c.shared.interleaved,t!==null){c=t;do f|=c.lane,c=c.next;while(c!==t)}else h===null&&(c.shared.lanes=0);lu|=f,e.lanes=f,e.memoizedState=C}}function AE(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],c=s.callback;if(c!==null){if(s.callback=null,s=n,typeof c!="function")throw Error(Ye(191,c));c.call(s)}}}var mI=new fk.Component().refs;function _w(e,t,n,s){t=e.memoizedState,n=n(s,t),n=n==null?t:Jn({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Pv={isMounted:function(e){return(e=e._reactInternals)?mu(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var s=Oi(),c=$l(e),h=Io(s,c);h.payload=t,n!=null&&(h.callback=n),t=Vl(e,h,c),t!==null&&(va(t,e,c,s),ty(t,e,c))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var s=Oi(),c=$l(e),h=Io(s,c);h.tag=1,h.payload=t,n!=null&&(h.callback=n),t=Vl(e,h,c),t!==null&&(va(t,e,c,s),ty(t,e,c))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Oi(),s=$l(e),c=Io(n,s);c.tag=2,t!=null&&(c.callback=t),t=Vl(e,c,s),t!==null&&(va(t,e,s,n),ty(t,e,s))}};function kE(e,t,n,s,c,h,f){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,h,f):t.prototype&&t.prototype.isPureReactComponent?!vp(n,s)||!vp(c,h):!0}function gI(e,t,n){var s=!1,c=Kl,h=t.contextType;return typeof h=="object"&&h!==null?h=qs(h):(c=ts(t)?su:yi.current,s=t.contextTypes,h=(s=s!=null)?Hh(e,c):Kl),t=new t(n,h),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Pv,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=c,e.__reactInternalMemoizedMaskedChildContext=h),t}function IE(e,t,n,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,s),t.state!==e&&Pv.enqueueReplaceState(t,t.state,null)}function ww(e,t,n,s){var c=e.stateNode;c.props=n,c.state=e.memoizedState,c.refs=mI,hb(e);var h=t.contextType;typeof h=="object"&&h!==null?c.context=qs(h):(h=ts(t)?su:yi.current,c.context=Hh(e,h)),c.state=e.memoizedState,h=t.getDerivedStateFromProps,typeof h=="function"&&(_w(e,t,h,n),c.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(t=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),t!==c.state&&Pv.enqueueReplaceState(c,c.state,null),By(e,n,c,s),c.state=e.memoizedState),typeof c.componentDidMount=="function"&&(e.flags|=4194308)}function Rf(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ye(309));var s=n.stateNode}if(!s)throw Error(Ye(147,e));var c=s,h=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===h?t.ref:(t=function(f){var o=c.refs;o===mI&&(o=c.refs={}),f===null?delete o[h]:o[h]=f},t._stringRef=h,t)}if(typeof e!="string")throw Error(Ye(284));if(!n._owner)throw Error(Ye(290,e))}return e}function zg(e,t){throw e=Object.prototype.toString.call(t),Error(Ye(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ME(e){var t=e._init;return t(e._payload)}function yI(e){function t(N,F){if(e){var W=N.deletions;W===null?(N.deletions=[F],N.flags|=16):W.push(F)}}function n(N,F){if(!e)return null;for(;F!==null;)t(N,F),F=F.sibling;return null}function s(N,F){for(N=new Map;F!==null;)F.key!==null?N.set(F.key,F):N.set(F.index,F),F=F.sibling;return N}function c(N,F){return N=Ul(N,F),N.index=0,N.sibling=null,N}function h(N,F,W){return N.index=W,e?(W=N.alternate,W!==null?(W=W.index,W<F?(N.flags|=2,F):W):(N.flags|=2,F)):(N.flags|=1048576,F)}function f(N){return e&&N.alternate===null&&(N.flags|=2),N}function o(N,F,W,Q){return F===null||F.tag!==6?(F=s0(W,N.mode,Q),F.return=N,F):(F=c(F,W),F.return=N,F)}function w(N,F,W,Q){var fe=W.type;return fe===oh?A(N,F,W.props.children,Q,W.key):F!==null&&(F.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===yl&&ME(fe)===F.type)?(Q=c(F,W.props),Q.ref=Rf(N,F,W),Q.return=N,Q):(Q=oy(W.type,W.key,W.props,null,N.mode,Q),Q.ref=Rf(N,F,W),Q.return=N,Q)}function b(N,F,W,Q){return F===null||F.tag!==4||F.stateNode.containerInfo!==W.containerInfo||F.stateNode.implementation!==W.implementation?(F=a0(W,N.mode,Q),F.return=N,F):(F=c(F,W.children||[]),F.return=N,F)}function A(N,F,W,Q,fe){return F===null||F.tag!==7?(F=ru(W,N.mode,Q,fe),F.return=N,F):(F=c(F,W),F.return=N,F)}function C(N,F,W){if(typeof F=="string"&&F!==""||typeof F=="number")return F=s0(""+F,N.mode,W),F.return=N,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case Tg:return W=oy(F.type,F.key,F.props,null,N.mode,W),W.ref=Rf(N,null,F),W.return=N,W;case ah:return F=a0(F,N.mode,W),F.return=N,F;case yl:var Q=F._init;return C(N,Q(F._payload),W)}if($f(F)||Pf(F))return F=ru(F,N.mode,W,null),F.return=N,F;zg(N,F)}return null}function M(N,F,W,Q){var fe=F!==null?F.key:null;if(typeof W=="string"&&W!==""||typeof W=="number")return fe!==null?null:o(N,F,""+W,Q);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case Tg:return W.key===fe?w(N,F,W,Q):null;case ah:return W.key===fe?b(N,F,W,Q):null;case yl:return fe=W._init,M(N,F,fe(W._payload),Q)}if($f(W)||Pf(W))return fe!==null?null:A(N,F,W,Q,null);zg(N,W)}return null}function B(N,F,W,Q,fe){if(typeof Q=="string"&&Q!==""||typeof Q=="number")return N=N.get(W)||null,o(F,N,""+Q,fe);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case Tg:return N=N.get(Q.key===null?W:Q.key)||null,w(F,N,Q,fe);case ah:return N=N.get(Q.key===null?W:Q.key)||null,b(F,N,Q,fe);case yl:var Ee=Q._init;return B(N,F,W,Ee(Q._payload),fe)}if($f(Q)||Pf(Q))return N=N.get(W)||null,A(F,N,Q,fe,null);zg(F,Q)}return null}function V(N,F,W,Q){for(var fe=null,Ee=null,Re=F,Te=F=0,Ne=null;Re!==null&&Te<W.length;Te++){Re.index>Te?(Ne=Re,Re=null):Ne=Re.sibling;var ke=M(N,Re,W[Te],Q);if(ke===null){Re===null&&(Re=Ne);break}e&&Re&&ke.alternate===null&&t(N,Re),F=h(ke,F,Te),Ee===null?fe=ke:Ee.sibling=ke,Ee=ke,Re=Ne}if(Te===W.length)return n(N,Re),Gn&&Mc(N,Te),fe;if(Re===null){for(;Te<W.length;Te++)Re=C(N,W[Te],Q),Re!==null&&(F=h(Re,F,Te),Ee===null?fe=Re:Ee.sibling=Re,Ee=Re);return Gn&&Mc(N,Te),fe}for(Re=s(N,Re);Te<W.length;Te++)Ne=B(Re,N,Te,W[Te],Q),Ne!==null&&(e&&Ne.alternate!==null&&Re.delete(Ne.key===null?Te:Ne.key),F=h(Ne,F,Te),Ee===null?fe=Ne:Ee.sibling=Ne,Ee=Ne);return e&&Re.forEach(function(ft){return t(N,ft)}),Gn&&Mc(N,Te),fe}function j(N,F,W,Q){var fe=Pf(W);if(typeof fe!="function")throw Error(Ye(150));if(W=fe.call(W),W==null)throw Error(Ye(151));for(var Ee=fe=null,Re=F,Te=F=0,Ne=null,ke=W.next();Re!==null&&!ke.done;Te++,ke=W.next()){Re.index>Te?(Ne=Re,Re=null):Ne=Re.sibling;var ft=M(N,Re,ke.value,Q);if(ft===null){Re===null&&(Re=Ne);break}e&&Re&&ft.alternate===null&&t(N,Re),F=h(ft,F,Te),Ee===null?fe=ft:Ee.sibling=ft,Ee=ft,Re=Ne}if(ke.done)return n(N,Re),Gn&&Mc(N,Te),fe;if(Re===null){for(;!ke.done;Te++,ke=W.next())ke=C(N,ke.value,Q),ke!==null&&(F=h(ke,F,Te),Ee===null?fe=ke:Ee.sibling=ke,Ee=ke);return Gn&&Mc(N,Te),fe}for(Re=s(N,Re);!ke.done;Te++,ke=W.next())ke=B(Re,N,Te,ke.value,Q),ke!==null&&(e&&ke.alternate!==null&&Re.delete(ke.key===null?Te:ke.key),F=h(ke,F,Te),Ee===null?fe=ke:Ee.sibling=ke,Ee=ke);return e&&Re.forEach(function(je){return t(N,je)}),Gn&&Mc(N,Te),fe}function Z(N,F,W,Q){if(typeof W=="object"&&W!==null&&W.type===oh&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case Tg:e:{for(var fe=W.key,Ee=F;Ee!==null;){if(Ee.key===fe){if(fe=W.type,fe===oh){if(Ee.tag===7){n(N,Ee.sibling),F=c(Ee,W.props.children),F.return=N,N=F;break e}}else if(Ee.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===yl&&ME(fe)===Ee.type){n(N,Ee.sibling),F=c(Ee,W.props),F.ref=Rf(N,Ee,W),F.return=N,N=F;break e}n(N,Ee);break}else t(N,Ee);Ee=Ee.sibling}W.type===oh?(F=ru(W.props.children,N.mode,Q,W.key),F.return=N,N=F):(Q=oy(W.type,W.key,W.props,null,N.mode,Q),Q.ref=Rf(N,F,W),Q.return=N,N=Q)}return f(N);case ah:e:{for(Ee=W.key;F!==null;){if(F.key===Ee)if(F.tag===4&&F.stateNode.containerInfo===W.containerInfo&&F.stateNode.implementation===W.implementation){n(N,F.sibling),F=c(F,W.children||[]),F.return=N,N=F;break e}else{n(N,F);break}else t(N,F);F=F.sibling}F=a0(W,N.mode,Q),F.return=N,N=F}return f(N);case yl:return Ee=W._init,Z(N,F,Ee(W._payload),Q)}if($f(W))return V(N,F,W,Q);if(Pf(W))return j(N,F,W,Q);zg(N,W)}return typeof W=="string"&&W!==""||typeof W=="number"?(W=""+W,F!==null&&F.tag===6?(n(N,F.sibling),F=c(F,W),F.return=N,N=F):(n(N,F),F=s0(W,N.mode,Q),F.return=N,N=F),f(N)):n(N,F)}return Z}var Xh=yI(!0),vI=yI(!1),im={},Ua=rc(im),bp=rc(im),Sp=rc(im);function jc(e){if(e===im)throw Error(Ye(174));return e}function db(e,t){switch(Rn(Sp,t),Rn(bp,e),Rn(Ua,im),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:J0(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=J0(t,e)}Vn(Ua),Rn(Ua,t)}function Qh(){Vn(Ua),Vn(bp),Vn(Sp)}function xI(e){jc(Sp.current);var t=jc(Ua.current),n=J0(t,e.type);t!==n&&(Rn(bp,e),Rn(Ua,n))}function fb(e){bp.current===e&&(Vn(Ua),Vn(bp))}var Kn=rc(0);function Vy(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var J_=[];function pb(){for(var e=0;e<J_.length;e++)J_[e]._workInProgressVersionPrimary=null;J_.length=0}var ny=Vo.ReactCurrentDispatcher,e0=Vo.ReactCurrentBatchConfig,ou=0,Qn=null,Er=null,Or=null,jy=!1,tp=!1,Tp=0,DN=0;function ui(){throw Error(Ye(321))}function mb(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!xa(e[n],t[n]))return!1;return!0}function gb(e,t,n,s,c,h){if(ou=h,Qn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ny.current=e===null||e.memoizedState===null?FN:NN,e=n(s,c),tp){h=0;do{if(tp=!1,Tp=0,25<=h)throw Error(Ye(301));h+=1,Or=Er=null,t.updateQueue=null,ny.current=BN,e=n(s,c)}while(tp)}if(ny.current=$y,t=Er!==null&&Er.next!==null,ou=0,Or=Er=Qn=null,jy=!1,t)throw Error(Ye(300));return e}function yb(){var e=Tp!==0;return Tp=0,e}function za(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Or===null?Qn.memoizedState=Or=e:Or=Or.next=e,Or}function Gs(){if(Er===null){var e=Qn.alternate;e=e!==null?e.memoizedState:null}else e=Er.next;var t=Or===null?Qn.memoizedState:Or.next;if(t!==null)Or=t,Er=e;else{if(e===null)throw Error(Ye(310));Er=e,e={memoizedState:Er.memoizedState,baseState:Er.baseState,baseQueue:Er.baseQueue,queue:Er.queue,next:null},Or===null?Qn.memoizedState=Or=e:Or=Or.next=e}return Or}function Ep(e,t){return typeof t=="function"?t(e):t}function t0(e){var t=Gs(),n=t.queue;if(n===null)throw Error(Ye(311));n.lastRenderedReducer=e;var s=Er,c=s.baseQueue,h=n.pending;if(h!==null){if(c!==null){var f=c.next;c.next=h.next,h.next=f}s.baseQueue=c=h,n.pending=null}if(c!==null){h=c.next,s=s.baseState;var o=f=null,w=null,b=h;do{var A=b.lane;if((ou&A)===A)w!==null&&(w=w.next={lane:0,action:b.action,hasEagerState:b.hasEagerState,eagerState:b.eagerState,next:null}),s=b.hasEagerState?b.eagerState:e(s,b.action);else{var C={lane:A,action:b.action,hasEagerState:b.hasEagerState,eagerState:b.eagerState,next:null};w===null?(o=w=C,f=s):w=w.next=C,Qn.lanes|=A,lu|=A}b=b.next}while(b!==null&&b!==h);w===null?f=s:w.next=o,xa(s,t.memoizedState)||(Ji=!0),t.memoizedState=s,t.baseState=f,t.baseQueue=w,n.lastRenderedState=s}if(e=n.interleaved,e!==null){c=e;do h=c.lane,Qn.lanes|=h,lu|=h,c=c.next;while(c!==e)}else c===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function n0(e){var t=Gs(),n=t.queue;if(n===null)throw Error(Ye(311));n.lastRenderedReducer=e;var s=n.dispatch,c=n.pending,h=t.memoizedState;if(c!==null){n.pending=null;var f=c=c.next;do h=e(h,f.action),f=f.next;while(f!==c);xa(h,t.memoizedState)||(Ji=!0),t.memoizedState=h,t.baseQueue===null&&(t.baseState=h),n.lastRenderedState=h}return[h,s]}function _I(){}function wI(e,t){var n=Qn,s=Gs(),c=t(),h=!xa(s.memoizedState,c);if(h&&(s.memoizedState=c,Ji=!0),s=s.queue,vb(TI.bind(null,n,s,e),[e]),s.getSnapshot!==t||h||Or!==null&&Or.memoizedState.tag&1){if(n.flags|=2048,Cp(9,SI.bind(null,n,s,c,t),void 0,null),Fr===null)throw Error(Ye(349));ou&30||bI(n,t,c)}return c}function bI(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Qn.updateQueue,t===null?(t={lastEffect:null,stores:null},Qn.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function SI(e,t,n,s){t.value=n,t.getSnapshot=s,EI(t)&&CI(e)}function TI(e,t,n){return n(function(){EI(t)&&CI(e)})}function EI(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!xa(e,n)}catch{return!0}}function CI(e){var t=Fo(e,1);t!==null&&va(t,e,1,-1)}function RE(e){var t=za();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ep,lastRenderedState:e},t.queue=e,e=e.dispatch=ON.bind(null,Qn,e),[t.memoizedState,e]}function Cp(e,t,n,s){return e={tag:e,create:t,destroy:n,deps:s,next:null},t=Qn.updateQueue,t===null?(t={lastEffect:null,stores:null},Qn.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(s=n.next,n.next=e,e.next=s,t.lastEffect=e)),e}function PI(){return Gs().memoizedState}function ry(e,t,n,s){var c=za();Qn.flags|=e,c.memoizedState=Cp(1|t,n,void 0,s===void 0?null:s)}function Av(e,t,n,s){var c=Gs();s=s===void 0?null:s;var h=void 0;if(Er!==null){var f=Er.memoizedState;if(h=f.destroy,s!==null&&mb(s,f.deps)){c.memoizedState=Cp(t,n,h,s);return}}Qn.flags|=e,c.memoizedState=Cp(1|t,n,h,s)}function DE(e,t){return ry(8390656,8,e,t)}function vb(e,t){return Av(2048,8,e,t)}function AI(e,t){return Av(4,2,e,t)}function kI(e,t){return Av(4,4,e,t)}function II(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function MI(e,t,n){return n=n!=null?n.concat([e]):null,Av(4,4,II.bind(null,t,e),n)}function xb(){}function RI(e,t){var n=Gs();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&mb(t,s[1])?s[0]:(n.memoizedState=[e,t],e)}function DI(e,t){var n=Gs();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&mb(t,s[1])?s[0]:(e=e(),n.memoizedState=[e,t],e)}function LI(e,t,n){return ou&21?(xa(n,t)||(n=Fk(),Qn.lanes|=n,lu|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ji=!0),e.memoizedState=n)}function LN(e,t){var n=gn;gn=n!==0&&4>n?n:4,e(!0);var s=e0.transition;e0.transition={};try{e(!1),t()}finally{gn=n,e0.transition=s}}function zI(){return Gs().memoizedState}function zN(e,t,n){var s=$l(e);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},OI(e))FI(t,n);else if(n=fI(e,t,n,s),n!==null){var c=Oi();va(n,e,s,c),NI(n,t,s)}}function ON(e,t,n){var s=$l(e),c={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(OI(e))FI(t,c);else{var h=e.alternate;if(e.lanes===0&&(h===null||h.lanes===0)&&(h=t.lastRenderedReducer,h!==null))try{var f=t.lastRenderedState,o=h(f,n);if(c.hasEagerState=!0,c.eagerState=o,xa(o,f)){var w=t.interleaved;w===null?(c.next=c,ub(t)):(c.next=w.next,w.next=c),t.interleaved=c;return}}catch{}finally{}n=fI(e,t,c,s),n!==null&&(c=Oi(),va(n,e,s,c),NI(n,t,s))}}function OI(e){var t=e.alternate;return e===Qn||t!==null&&t===Qn}function FI(e,t){tp=jy=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function NI(e,t,n){if(n&4194240){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,X1(e,n)}}var $y={readContext:qs,useCallback:ui,useContext:ui,useEffect:ui,useImperativeHandle:ui,useInsertionEffect:ui,useLayoutEffect:ui,useMemo:ui,useReducer:ui,useRef:ui,useState:ui,useDebugValue:ui,useDeferredValue:ui,useTransition:ui,useMutableSource:ui,useSyncExternalStore:ui,useId:ui,unstable_isNewReconciler:!1},FN={readContext:qs,useCallback:function(e,t){return za().memoizedState=[e,t===void 0?null:t],e},useContext:qs,useEffect:DE,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,ry(4194308,4,II.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ry(4194308,4,e,t)},useInsertionEffect:function(e,t){return ry(4,2,e,t)},useMemo:function(e,t){var n=za();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var s=za();return t=n!==void 0?n(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=zN.bind(null,Qn,e),[s.memoizedState,e]},useRef:function(e){var t=za();return e={current:e},t.memoizedState=e},useState:RE,useDebugValue:xb,useDeferredValue:function(e){return za().memoizedState=e},useTransition:function(){var e=RE(!1),t=e[0];return e=LN.bind(null,e[1]),za().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var s=Qn,c=za();if(Gn){if(n===void 0)throw Error(Ye(407));n=n()}else{if(n=t(),Fr===null)throw Error(Ye(349));ou&30||bI(s,t,n)}c.memoizedState=n;var h={value:n,getSnapshot:t};return c.queue=h,DE(TI.bind(null,s,h,e),[e]),s.flags|=2048,Cp(9,SI.bind(null,s,h,n,t),void 0,null),n},useId:function(){var e=za(),t=Fr.identifierPrefix;if(Gn){var n=Co,s=Eo;n=(s&~(1<<32-ya(s)-1)).toString(32)+n,t=":"+t+"R"+n,n=Tp++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=DN++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},NN={readContext:qs,useCallback:RI,useContext:qs,useEffect:vb,useImperativeHandle:MI,useInsertionEffect:AI,useLayoutEffect:kI,useMemo:DI,useReducer:t0,useRef:PI,useState:function(){return t0(Ep)},useDebugValue:xb,useDeferredValue:function(e){var t=Gs();return LI(t,Er.memoizedState,e)},useTransition:function(){var e=t0(Ep)[0],t=Gs().memoizedState;return[e,t]},useMutableSource:_I,useSyncExternalStore:wI,useId:zI,unstable_isNewReconciler:!1},BN={readContext:qs,useCallback:RI,useContext:qs,useEffect:vb,useImperativeHandle:MI,useInsertionEffect:AI,useLayoutEffect:kI,useMemo:DI,useReducer:n0,useRef:PI,useState:function(){return n0(Ep)},useDebugValue:xb,useDeferredValue:function(e){var t=Gs();return Er===null?t.memoizedState=e:LI(t,Er.memoizedState,e)},useTransition:function(){var e=n0(Ep)[0],t=Gs().memoizedState;return[e,t]},useMutableSource:_I,useSyncExternalStore:wI,useId:zI,unstable_isNewReconciler:!1};function Yh(e,t){try{var n="",s=t;do n+=fF(s),s=s.return;while(s);var c=n}catch(h){c=`
Error generating stack: `+h.message+`
`+h.stack}return{value:e,source:t,stack:c,digest:null}}function r0(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function bw(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var VN=typeof WeakMap=="function"?WeakMap:Map;function BI(e,t,n){n=Io(-1,n),n.tag=3,n.payload={element:null};var s=t.value;return n.callback=function(){qy||(qy=!0,Rw=s),bw(e,t)},n}function VI(e,t,n){n=Io(-1,n),n.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var c=t.value;n.payload=function(){return s(c)},n.callback=function(){bw(e,t)}}var h=e.stateNode;return h!==null&&typeof h.componentDidCatch=="function"&&(n.callback=function(){bw(e,t),typeof s!="function"&&(jl===null?jl=new Set([this]):jl.add(this));var f=t.stack;this.componentDidCatch(t.value,{componentStack:f!==null?f:""})}),n}function LE(e,t,n){var s=e.pingCache;if(s===null){s=e.pingCache=new VN;var c=new Set;s.set(t,c)}else c=s.get(t),c===void 0&&(c=new Set,s.set(t,c));c.has(n)||(c.add(n),e=e5.bind(null,e,t,n),t.then(e,e))}function zE(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function OE(e,t,n,s,c){return e.mode&1?(e.flags|=65536,e.lanes=c,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Io(-1,1),t.tag=2,Vl(n,t,1))),n.lanes|=1),e)}var jN=Vo.ReactCurrentOwner,Ji=!1;function Ri(e,t,n,s){t.child=e===null?vI(t,null,n,s):Xh(t,e.child,n,s)}function FE(e,t,n,s,c){n=n.render;var h=t.ref;return Ah(t,c),s=gb(e,t,n,s,h,c),n=yb(),e!==null&&!Ji?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,No(e,t,c)):(Gn&&n&&ib(t),t.flags|=1,Ri(e,t,s,c),t.child)}function NE(e,t,n,s,c){if(e===null){var h=n.type;return typeof h=="function"&&!Pb(h)&&h.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=h,jI(e,t,h,s,c)):(e=oy(n.type,null,s,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(h=e.child,!(e.lanes&c)){var f=h.memoizedProps;if(n=n.compare,n=n!==null?n:vp,n(f,s)&&e.ref===t.ref)return No(e,t,c)}return t.flags|=1,e=Ul(h,s),e.ref=t.ref,e.return=t,t.child=e}function jI(e,t,n,s,c){if(e!==null){var h=e.memoizedProps;if(vp(h,s)&&e.ref===t.ref)if(Ji=!1,t.pendingProps=s=h,(e.lanes&c)!==0)e.flags&131072&&(Ji=!0);else return t.lanes=e.lanes,No(e,t,c)}return Sw(e,t,n,s,c)}function $I(e,t,n){var s=t.pendingProps,c=s.children,h=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Rn(yh,us),us|=n;else{if(!(n&1073741824))return e=h!==null?h.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Rn(yh,us),us|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=h!==null?h.baseLanes:n,Rn(yh,us),us|=s}else h!==null?(s=h.baseLanes|n,t.memoizedState=null):s=n,Rn(yh,us),us|=s;return Ri(e,t,c,n),t.child}function UI(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Sw(e,t,n,s,c){var h=ts(n)?su:yi.current;return h=Hh(t,h),Ah(t,c),n=gb(e,t,n,s,h,c),s=yb(),e!==null&&!Ji?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,No(e,t,c)):(Gn&&s&&ib(t),t.flags|=1,Ri(e,t,n,c),t.child)}function BE(e,t,n,s,c){if(ts(n)){var h=!0;Ly(t)}else h=!1;if(Ah(t,c),t.stateNode===null)iy(e,t),gI(t,n,s),ww(t,n,s,c),s=!0;else if(e===null){var f=t.stateNode,o=t.memoizedProps;f.props=o;var w=f.context,b=n.contextType;typeof b=="object"&&b!==null?b=qs(b):(b=ts(n)?su:yi.current,b=Hh(t,b));var A=n.getDerivedStateFromProps,C=typeof A=="function"||typeof f.getSnapshotBeforeUpdate=="function";C||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(o!==s||w!==b)&&IE(t,f,s,b),vl=!1;var M=t.memoizedState;f.state=M,By(t,s,f,c),w=t.memoizedState,o!==s||M!==w||es.current||vl?(typeof A=="function"&&(_w(t,n,A,s),w=t.memoizedState),(o=vl||kE(t,n,o,s,M,w,b))?(C||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(t.flags|=4194308)):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=w),f.props=s,f.state=w,f.context=b,s=o):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{f=t.stateNode,pI(e,t),o=t.memoizedProps,b=t.type===t.elementType?o:la(t.type,o),f.props=b,C=t.pendingProps,M=f.context,w=n.contextType,typeof w=="object"&&w!==null?w=qs(w):(w=ts(n)?su:yi.current,w=Hh(t,w));var B=n.getDerivedStateFromProps;(A=typeof B=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(o!==C||M!==w)&&IE(t,f,s,w),vl=!1,M=t.memoizedState,f.state=M,By(t,s,f,c);var V=t.memoizedState;o!==C||M!==V||es.current||vl?(typeof B=="function"&&(_w(t,n,B,s),V=t.memoizedState),(b=vl||kE(t,n,b,s,M,V,w)||!1)?(A||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(s,V,w),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(s,V,w)),typeof f.componentDidUpdate=="function"&&(t.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof f.componentDidUpdate!="function"||o===e.memoizedProps&&M===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&M===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=V),f.props=s,f.state=V,f.context=w,s=b):(typeof f.componentDidUpdate!="function"||o===e.memoizedProps&&M===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&M===e.memoizedState||(t.flags|=1024),s=!1)}return Tw(e,t,n,s,h,c)}function Tw(e,t,n,s,c,h){UI(e,t);var f=(t.flags&128)!==0;if(!s&&!f)return c&&TE(t,n,!1),No(e,t,h);s=t.stateNode,jN.current=t;var o=f&&typeof n.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&f?(t.child=Xh(t,e.child,null,h),t.child=Xh(t,null,o,h)):Ri(e,t,o,h),t.memoizedState=s.state,c&&TE(t,n,!0),t.child}function qI(e){var t=e.stateNode;t.pendingContext?SE(e,t.pendingContext,t.pendingContext!==t.context):t.context&&SE(e,t.context,!1),db(e,t.containerInfo)}function VE(e,t,n,s,c){return Kh(),ab(c),t.flags|=256,Ri(e,t,n,s),t.child}var Ew={dehydrated:null,treeContext:null,retryLane:0};function Cw(e){return{baseLanes:e,cachePool:null,transitions:null}}function GI(e,t,n){var s=t.pendingProps,c=Kn.current,h=!1,f=(t.flags&128)!==0,o;if((o=f)||(o=e!==null&&e.memoizedState===null?!1:(c&2)!==0),o?(h=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(c|=1),Rn(Kn,c&1),e===null)return vw(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(f=s.children,e=s.fallback,h?(s=t.mode,h=t.child,f={mode:"hidden",children:f},!(s&1)&&h!==null?(h.childLanes=0,h.pendingProps=f):h=Mv(f,s,0,null),e=ru(e,s,n,null),h.return=t,e.return=t,h.sibling=e,t.child=h,t.child.memoizedState=Cw(n),t.memoizedState=Ew,e):_b(t,f));if(c=e.memoizedState,c!==null&&(o=c.dehydrated,o!==null))return $N(e,t,f,s,o,c,n);if(h){h=s.fallback,f=t.mode,c=e.child,o=c.sibling;var w={mode:"hidden",children:s.children};return!(f&1)&&t.child!==c?(s=t.child,s.childLanes=0,s.pendingProps=w,t.deletions=null):(s=Ul(c,w),s.subtreeFlags=c.subtreeFlags&14680064),o!==null?h=Ul(o,h):(h=ru(h,f,n,null),h.flags|=2),h.return=t,s.return=t,s.sibling=h,t.child=s,s=h,h=t.child,f=e.child.memoizedState,f=f===null?Cw(n):{baseLanes:f.baseLanes|n,cachePool:null,transitions:f.transitions},h.memoizedState=f,h.childLanes=e.childLanes&~n,t.memoizedState=Ew,s}return h=e.child,e=h.sibling,s=Ul(h,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=n),s.return=t,s.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function _b(e,t){return t=Mv({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Og(e,t,n,s){return s!==null&&ab(s),Xh(t,e.child,null,n),e=_b(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function $N(e,t,n,s,c,h,f){if(n)return t.flags&256?(t.flags&=-257,s=r0(Error(Ye(422))),Og(e,t,f,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(h=s.fallback,c=t.mode,s=Mv({mode:"visible",children:s.children},c,0,null),h=ru(h,c,f,null),h.flags|=2,s.return=t,h.return=t,s.sibling=h,t.child=s,t.mode&1&&Xh(t,e.child,null,f),t.child.memoizedState=Cw(f),t.memoizedState=Ew,h);if(!(t.mode&1))return Og(e,t,f,null);if(c.data==="$!"){if(s=c.nextSibling&&c.nextSibling.dataset,s)var o=s.dgst;return s=o,h=Error(Ye(419)),s=r0(h,s,void 0),Og(e,t,f,s)}if(o=(f&e.childLanes)!==0,Ji||o){if(s=Fr,s!==null){switch(f&-f){case 4:c=2;break;case 16:c=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:c=32;break;case 536870912:c=268435456;break;default:c=0}c=c&(s.suspendedLanes|f)?0:c,c!==0&&c!==h.retryLane&&(h.retryLane=c,Fo(e,c),va(s,e,c,-1))}return Cb(),s=r0(Error(Ye(421))),Og(e,t,f,s)}return c.data==="$?"?(t.flags|=128,t.child=e.child,t=t5.bind(null,e),c._reactRetry=t,null):(e=h.treeContext,ds=Bl(c.nextSibling),ps=t,Gn=!0,pa=null,e!==null&&(Ns[Bs++]=Eo,Ns[Bs++]=Co,Ns[Bs++]=au,Eo=e.id,Co=e.overflow,au=t),t=_b(t,s.children),t.flags|=4096,t)}function jE(e,t,n){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),xw(e.return,t,n)}function i0(e,t,n,s,c){var h=e.memoizedState;h===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:c}:(h.isBackwards=t,h.rendering=null,h.renderingStartTime=0,h.last=s,h.tail=n,h.tailMode=c)}function ZI(e,t,n){var s=t.pendingProps,c=s.revealOrder,h=s.tail;if(Ri(e,t,s.children,n),s=Kn.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&jE(e,n,t);else if(e.tag===19)jE(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(Rn(Kn,s),!(t.mode&1))t.memoizedState=null;else switch(c){case"forwards":for(n=t.child,c=null;n!==null;)e=n.alternate,e!==null&&Vy(e)===null&&(c=n),n=n.sibling;n=c,n===null?(c=t.child,t.child=null):(c=n.sibling,n.sibling=null),i0(t,!1,c,n,h);break;case"backwards":for(n=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&Vy(e)===null){t.child=c;break}e=c.sibling,c.sibling=n,n=c,c=e}i0(t,!0,n,null,h);break;case"together":i0(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function iy(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function No(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),lu|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Ye(153));if(t.child!==null){for(e=t.child,n=Ul(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Ul(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function UN(e,t,n){switch(t.tag){case 3:qI(t),Kh();break;case 5:xI(t);break;case 1:ts(t.type)&&Ly(t);break;case 4:db(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,c=t.memoizedProps.value;Rn(Fy,s._currentValue),s._currentValue=c;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(Rn(Kn,Kn.current&1),t.flags|=128,null):n&t.child.childLanes?GI(e,t,n):(Rn(Kn,Kn.current&1),e=No(e,t,n),e!==null?e.sibling:null);Rn(Kn,Kn.current&1);break;case 19:if(s=(n&t.childLanes)!==0,e.flags&128){if(s)return ZI(e,t,n);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),Rn(Kn,Kn.current),s)break;return null;case 22:case 23:return t.lanes=0,$I(e,t,n)}return No(e,t,n)}var WI,Pw,HI,KI;WI=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Pw=function(){};HI=function(e,t,n,s){var c=e.memoizedProps;if(c!==s){e=t.stateNode,jc(Ua.current);var h=null;switch(n){case"input":c=K0(e,c),s=K0(e,s),h=[];break;case"select":c=Jn({},c,{value:void 0}),s=Jn({},s,{value:void 0}),h=[];break;case"textarea":c=Y0(e,c),s=Y0(e,s),h=[];break;default:typeof c.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=Ry)}ew(n,s);var f;n=null;for(b in c)if(!s.hasOwnProperty(b)&&c.hasOwnProperty(b)&&c[b]!=null)if(b==="style"){var o=c[b];for(f in o)o.hasOwnProperty(f)&&(n||(n={}),n[f]="")}else b!=="dangerouslySetInnerHTML"&&b!=="children"&&b!=="suppressContentEditableWarning"&&b!=="suppressHydrationWarning"&&b!=="autoFocus"&&(hp.hasOwnProperty(b)?h||(h=[]):(h=h||[]).push(b,null));for(b in s){var w=s[b];if(o=c!=null?c[b]:void 0,s.hasOwnProperty(b)&&w!==o&&(w!=null||o!=null))if(b==="style")if(o){for(f in o)!o.hasOwnProperty(f)||w&&w.hasOwnProperty(f)||(n||(n={}),n[f]="");for(f in w)w.hasOwnProperty(f)&&o[f]!==w[f]&&(n||(n={}),n[f]=w[f])}else n||(h||(h=[]),h.push(b,n)),n=w;else b==="dangerouslySetInnerHTML"?(w=w?w.__html:void 0,o=o?o.__html:void 0,w!=null&&o!==w&&(h=h||[]).push(b,w)):b==="children"?typeof w!="string"&&typeof w!="number"||(h=h||[]).push(b,""+w):b!=="suppressContentEditableWarning"&&b!=="suppressHydrationWarning"&&(hp.hasOwnProperty(b)?(w!=null&&b==="onScroll"&&Nn("scroll",e),h||o===w||(h=[])):(h=h||[]).push(b,w))}n&&(h=h||[]).push("style",n);var b=h;(t.updateQueue=b)&&(t.flags|=4)}};KI=function(e,t,n,s){n!==s&&(t.flags|=4)};function Df(e,t){if(!Gn)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function hi(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,s=0;if(t)for(var c=e.child;c!==null;)n|=c.lanes|c.childLanes,s|=c.subtreeFlags&14680064,s|=c.flags&14680064,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)n|=c.lanes|c.childLanes,s|=c.subtreeFlags,s|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=s,e.childLanes=n,t}function qN(e,t,n){var s=t.pendingProps;switch(sb(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return hi(t),null;case 1:return ts(t.type)&&Dy(),hi(t),null;case 3:return s=t.stateNode,Qh(),Vn(es),Vn(yi),pb(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(Lg(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,pa!==null&&(zw(pa),pa=null))),Pw(e,t),hi(t),null;case 5:fb(t);var c=jc(Sp.current);if(n=t.type,e!==null&&t.stateNode!=null)HI(e,t,n,s,c),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(Ye(166));return hi(t),null}if(e=jc(Ua.current),Lg(t)){s=t.stateNode,n=t.type;var h=t.memoizedProps;switch(s[Ba]=t,s[wp]=h,e=(t.mode&1)!==0,n){case"dialog":Nn("cancel",s),Nn("close",s);break;case"iframe":case"object":case"embed":Nn("load",s);break;case"video":case"audio":for(c=0;c<qf.length;c++)Nn(qf[c],s);break;case"source":Nn("error",s);break;case"img":case"image":case"link":Nn("error",s),Nn("load",s);break;case"details":Nn("toggle",s);break;case"input":XT(s,h),Nn("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!h.multiple},Nn("invalid",s);break;case"textarea":YT(s,h),Nn("invalid",s)}ew(n,h),c=null;for(var f in h)if(h.hasOwnProperty(f)){var o=h[f];f==="children"?typeof o=="string"?s.textContent!==o&&(h.suppressHydrationWarning!==!0&&Dg(s.textContent,o,e),c=["children",o]):typeof o=="number"&&s.textContent!==""+o&&(h.suppressHydrationWarning!==!0&&Dg(s.textContent,o,e),c=["children",""+o]):hp.hasOwnProperty(f)&&o!=null&&f==="onScroll"&&Nn("scroll",s)}switch(n){case"input":Eg(s),QT(s,h,!0);break;case"textarea":Eg(s),JT(s);break;case"select":case"option":break;default:typeof h.onClick=="function"&&(s.onclick=Ry)}s=c,t.updateQueue=s,s!==null&&(t.flags|=4)}else{f=c.nodeType===9?c:c.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=bk(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=f.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=f.createElement(n,{is:s.is}):(e=f.createElement(n),n==="select"&&(f=e,s.multiple?f.multiple=!0:s.size&&(f.size=s.size))):e=f.createElementNS(e,n),e[Ba]=t,e[wp]=s,WI(e,t,!1,!1),t.stateNode=e;e:{switch(f=tw(n,s),n){case"dialog":Nn("cancel",e),Nn("close",e),c=s;break;case"iframe":case"object":case"embed":Nn("load",e),c=s;break;case"video":case"audio":for(c=0;c<qf.length;c++)Nn(qf[c],e);c=s;break;case"source":Nn("error",e),c=s;break;case"img":case"image":case"link":Nn("error",e),Nn("load",e),c=s;break;case"details":Nn("toggle",e),c=s;break;case"input":XT(e,s),c=K0(e,s),Nn("invalid",e);break;case"option":c=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},c=Jn({},s,{value:void 0}),Nn("invalid",e);break;case"textarea":YT(e,s),c=Y0(e,s),Nn("invalid",e);break;default:c=s}ew(n,c),o=c;for(h in o)if(o.hasOwnProperty(h)){var w=o[h];h==="style"?Ek(e,w):h==="dangerouslySetInnerHTML"?(w=w?w.__html:void 0,w!=null&&Sk(e,w)):h==="children"?typeof w=="string"?(n!=="textarea"||w!=="")&&dp(e,w):typeof w=="number"&&dp(e,""+w):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(hp.hasOwnProperty(h)?w!=null&&h==="onScroll"&&Nn("scroll",e):w!=null&&q1(e,h,w,f))}switch(n){case"input":Eg(e),QT(e,s,!1);break;case"textarea":Eg(e),JT(e);break;case"option":s.value!=null&&e.setAttribute("value",""+Hl(s.value));break;case"select":e.multiple=!!s.multiple,h=s.value,h!=null?Th(e,!!s.multiple,h,!1):s.defaultValue!=null&&Th(e,!!s.multiple,s.defaultValue,!0);break;default:typeof c.onClick=="function"&&(e.onclick=Ry)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return hi(t),null;case 6:if(e&&t.stateNode!=null)KI(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(Ye(166));if(n=jc(Sp.current),jc(Ua.current),Lg(t)){if(s=t.stateNode,n=t.memoizedProps,s[Ba]=t,(h=s.nodeValue!==n)&&(e=ps,e!==null))switch(e.tag){case 3:Dg(s.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Dg(s.nodeValue,n,(e.mode&1)!==0)}h&&(t.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[Ba]=t,t.stateNode=s}return hi(t),null;case 13:if(Vn(Kn),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Gn&&ds!==null&&t.mode&1&&!(t.flags&128))dI(),Kh(),t.flags|=98560,h=!1;else if(h=Lg(t),s!==null&&s.dehydrated!==null){if(e===null){if(!h)throw Error(Ye(318));if(h=t.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(Ye(317));h[Ba]=t}else Kh(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;hi(t),h=!1}else pa!==null&&(zw(pa),pa=null),h=!0;if(!h)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||Kn.current&1?Pr===0&&(Pr=3):Cb())),t.updateQueue!==null&&(t.flags|=4),hi(t),null);case 4:return Qh(),Pw(e,t),e===null&&xp(t.stateNode.containerInfo),hi(t),null;case 10:return cb(t.type._context),hi(t),null;case 17:return ts(t.type)&&Dy(),hi(t),null;case 19:if(Vn(Kn),h=t.memoizedState,h===null)return hi(t),null;if(s=(t.flags&128)!==0,f=h.rendering,f===null)if(s)Df(h,!1);else{if(Pr!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(f=Vy(e),f!==null){for(t.flags|=128,Df(h,!1),s=f.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=n,n=t.child;n!==null;)h=n,e=s,h.flags&=14680066,f=h.alternate,f===null?(h.childLanes=0,h.lanes=e,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=f.childLanes,h.lanes=f.lanes,h.child=f.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=f.memoizedProps,h.memoizedState=f.memoizedState,h.updateQueue=f.updateQueue,h.type=f.type,e=f.dependencies,h.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Rn(Kn,Kn.current&1|2),t.child}e=e.sibling}h.tail!==null&&mr()>Jh&&(t.flags|=128,s=!0,Df(h,!1),t.lanes=4194304)}else{if(!s)if(e=Vy(f),e!==null){if(t.flags|=128,s=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Df(h,!0),h.tail===null&&h.tailMode==="hidden"&&!f.alternate&&!Gn)return hi(t),null}else 2*mr()-h.renderingStartTime>Jh&&n!==1073741824&&(t.flags|=128,s=!0,Df(h,!1),t.lanes=4194304);h.isBackwards?(f.sibling=t.child,t.child=f):(n=h.last,n!==null?n.sibling=f:t.child=f,h.last=f)}return h.tail!==null?(t=h.tail,h.rendering=t,h.tail=t.sibling,h.renderingStartTime=mr(),t.sibling=null,n=Kn.current,Rn(Kn,s?n&1|2:n&1),t):(hi(t),null);case 22:case 23:return Eb(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?us&1073741824&&(hi(t),t.subtreeFlags&6&&(t.flags|=8192)):hi(t),null;case 24:return null;case 25:return null}throw Error(Ye(156,t.tag))}function GN(e,t){switch(sb(t),t.tag){case 1:return ts(t.type)&&Dy(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Qh(),Vn(es),Vn(yi),pb(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return fb(t),null;case 13:if(Vn(Kn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Ye(340));Kh()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Vn(Kn),null;case 4:return Qh(),null;case 10:return cb(t.type._context),null;case 22:case 23:return Eb(),null;case 24:return null;default:return null}}var Fg=!1,mi=!1,ZN=typeof WeakSet=="function"?WeakSet:Set,Et=null;function gh(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){ir(e,t,s)}else n.current=null}function Aw(e,t,n){try{n()}catch(s){ir(e,t,s)}}var $E=!1;function WN(e,t){if(hw=ky,e=Jk(),rb(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var c=s.anchorOffset,h=s.focusNode;s=s.focusOffset;try{n.nodeType,h.nodeType}catch{n=null;break e}var f=0,o=-1,w=-1,b=0,A=0,C=e,M=null;t:for(;;){for(var B;C!==n||c!==0&&C.nodeType!==3||(o=f+c),C!==h||s!==0&&C.nodeType!==3||(w=f+s),C.nodeType===3&&(f+=C.nodeValue.length),(B=C.firstChild)!==null;)M=C,C=B;for(;;){if(C===e)break t;if(M===n&&++b===c&&(o=f),M===h&&++A===s&&(w=f),(B=C.nextSibling)!==null)break;C=M,M=C.parentNode}C=B}n=o===-1||w===-1?null:{start:o,end:w}}else n=null}n=n||{start:0,end:0}}else n=null;for(dw={focusedElem:e,selectionRange:n},ky=!1,Et=t;Et!==null;)if(t=Et,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Et=e;else for(;Et!==null;){t=Et;try{var V=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(V!==null){var j=V.memoizedProps,Z=V.memoizedState,N=t.stateNode,F=N.getSnapshotBeforeUpdate(t.elementType===t.type?j:la(t.type,j),Z);N.__reactInternalSnapshotBeforeUpdate=F}break;case 3:var W=t.stateNode.containerInfo;W.nodeType===1?W.textContent="":W.nodeType===9&&W.documentElement&&W.removeChild(W.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ye(163))}}catch(Q){ir(t,t.return,Q)}if(e=t.sibling,e!==null){e.return=t.return,Et=e;break}Et=t.return}return V=$E,$E=!1,V}function np(e,t,n){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var c=s=s.next;do{if((c.tag&e)===e){var h=c.destroy;c.destroy=void 0,h!==void 0&&Aw(t,n,h)}c=c.next}while(c!==s)}}function kv(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var s=n.create;n.destroy=s()}n=n.next}while(n!==t)}}function kw(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function XI(e){var t=e.alternate;t!==null&&(e.alternate=null,XI(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ba],delete t[wp],delete t[mw],delete t[kN],delete t[IN])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function QI(e){return e.tag===5||e.tag===3||e.tag===4}function UE(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||QI(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Iw(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Ry));else if(s!==4&&(e=e.child,e!==null))for(Iw(e,t,n),e=e.sibling;e!==null;)Iw(e,t,n),e=e.sibling}function Mw(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(Mw(e,t,n),e=e.sibling;e!==null;)Mw(e,t,n),e=e.sibling}var Wr=null,da=!1;function hl(e,t,n){for(n=n.child;n!==null;)YI(e,t,n),n=n.sibling}function YI(e,t,n){if($a&&typeof $a.onCommitFiberUnmount=="function")try{$a.onCommitFiberUnmount(wv,n)}catch{}switch(n.tag){case 5:mi||gh(n,t);case 6:var s=Wr,c=da;Wr=null,hl(e,t,n),Wr=s,da=c,Wr!==null&&(da?(e=Wr,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Wr.removeChild(n.stateNode));break;case 18:Wr!==null&&(da?(e=Wr,n=n.stateNode,e.nodeType===8?Q_(e.parentNode,n):e.nodeType===1&&Q_(e,n),gp(e)):Q_(Wr,n.stateNode));break;case 4:s=Wr,c=da,Wr=n.stateNode.containerInfo,da=!0,hl(e,t,n),Wr=s,da=c;break;case 0:case 11:case 14:case 15:if(!mi&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){c=s=s.next;do{var h=c,f=h.destroy;h=h.tag,f!==void 0&&(h&2||h&4)&&Aw(n,t,f),c=c.next}while(c!==s)}hl(e,t,n);break;case 1:if(!mi&&(gh(n,t),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(o){ir(n,t,o)}hl(e,t,n);break;case 21:hl(e,t,n);break;case 22:n.mode&1?(mi=(s=mi)||n.memoizedState!==null,hl(e,t,n),mi=s):hl(e,t,n);break;default:hl(e,t,n)}}function qE(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new ZN),t.forEach(function(s){var c=n5.bind(null,e,s);n.has(s)||(n.add(s),s.then(c,c))})}}function aa(e,t){var n=t.deletions;if(n!==null)for(var s=0;s<n.length;s++){var c=n[s];try{var h=e,f=t,o=f;e:for(;o!==null;){switch(o.tag){case 5:Wr=o.stateNode,da=!1;break e;case 3:Wr=o.stateNode.containerInfo,da=!0;break e;case 4:Wr=o.stateNode.containerInfo,da=!0;break e}o=o.return}if(Wr===null)throw Error(Ye(160));YI(h,f,c),Wr=null,da=!1;var w=c.alternate;w!==null&&(w.return=null),c.return=null}catch(b){ir(c,t,b)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)JI(t,e),t=t.sibling}function JI(e,t){var n=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(aa(t,e),La(e),s&4){try{np(3,e,e.return),kv(3,e)}catch(j){ir(e,e.return,j)}try{np(5,e,e.return)}catch(j){ir(e,e.return,j)}}break;case 1:aa(t,e),La(e),s&512&&n!==null&&gh(n,n.return);break;case 5:if(aa(t,e),La(e),s&512&&n!==null&&gh(n,n.return),e.flags&32){var c=e.stateNode;try{dp(c,"")}catch(j){ir(e,e.return,j)}}if(s&4&&(c=e.stateNode,c!=null)){var h=e.memoizedProps,f=n!==null?n.memoizedProps:h,o=e.type,w=e.updateQueue;if(e.updateQueue=null,w!==null)try{o==="input"&&h.type==="radio"&&h.name!=null&&_k(c,h),tw(o,f);var b=tw(o,h);for(f=0;f<w.length;f+=2){var A=w[f],C=w[f+1];A==="style"?Ek(c,C):A==="dangerouslySetInnerHTML"?Sk(c,C):A==="children"?dp(c,C):q1(c,A,C,b)}switch(o){case"input":X0(c,h);break;case"textarea":wk(c,h);break;case"select":var M=c._wrapperState.wasMultiple;c._wrapperState.wasMultiple=!!h.multiple;var B=h.value;B!=null?Th(c,!!h.multiple,B,!1):M!==!!h.multiple&&(h.defaultValue!=null?Th(c,!!h.multiple,h.defaultValue,!0):Th(c,!!h.multiple,h.multiple?[]:"",!1))}c[wp]=h}catch(j){ir(e,e.return,j)}}break;case 6:if(aa(t,e),La(e),s&4){if(e.stateNode===null)throw Error(Ye(162));c=e.stateNode,h=e.memoizedProps;try{c.nodeValue=h}catch(j){ir(e,e.return,j)}}break;case 3:if(aa(t,e),La(e),s&4&&n!==null&&n.memoizedState.isDehydrated)try{gp(t.containerInfo)}catch(j){ir(e,e.return,j)}break;case 4:aa(t,e),La(e);break;case 13:aa(t,e),La(e),c=e.child,c.flags&8192&&(h=c.memoizedState!==null,c.stateNode.isHidden=h,!h||c.alternate!==null&&c.alternate.memoizedState!==null||(Sb=mr())),s&4&&qE(e);break;case 22:if(A=n!==null&&n.memoizedState!==null,e.mode&1?(mi=(b=mi)||A,aa(t,e),mi=b):aa(t,e),La(e),s&8192){if(b=e.memoizedState!==null,(e.stateNode.isHidden=b)&&!A&&e.mode&1)for(Et=e,A=e.child;A!==null;){for(C=Et=A;Et!==null;){switch(M=Et,B=M.child,M.tag){case 0:case 11:case 14:case 15:np(4,M,M.return);break;case 1:gh(M,M.return);var V=M.stateNode;if(typeof V.componentWillUnmount=="function"){s=M,n=M.return;try{t=s,V.props=t.memoizedProps,V.state=t.memoizedState,V.componentWillUnmount()}catch(j){ir(s,n,j)}}break;case 5:gh(M,M.return);break;case 22:if(M.memoizedState!==null){ZE(C);continue}}B!==null?(B.return=M,Et=B):ZE(C)}A=A.sibling}e:for(A=null,C=e;;){if(C.tag===5){if(A===null){A=C;try{c=C.stateNode,b?(h=c.style,typeof h.setProperty=="function"?h.setProperty("display","none","important"):h.display="none"):(o=C.stateNode,w=C.memoizedProps.style,f=w!=null&&w.hasOwnProperty("display")?w.display:null,o.style.display=Tk("display",f))}catch(j){ir(e,e.return,j)}}}else if(C.tag===6){if(A===null)try{C.stateNode.nodeValue=b?"":C.memoizedProps}catch(j){ir(e,e.return,j)}}else if((C.tag!==22&&C.tag!==23||C.memoizedState===null||C===e)&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===e)break e;for(;C.sibling===null;){if(C.return===null||C.return===e)break e;A===C&&(A=null),C=C.return}A===C&&(A=null),C.sibling.return=C.return,C=C.sibling}}break;case 19:aa(t,e),La(e),s&4&&qE(e);break;case 21:break;default:aa(t,e),La(e)}}function La(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(QI(n)){var s=n;break e}n=n.return}throw Error(Ye(160))}switch(s.tag){case 5:var c=s.stateNode;s.flags&32&&(dp(c,""),s.flags&=-33);var h=UE(e);Mw(e,h,c);break;case 3:case 4:var f=s.stateNode.containerInfo,o=UE(e);Iw(e,o,f);break;default:throw Error(Ye(161))}}catch(w){ir(e,e.return,w)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function HN(e,t,n){Et=e,eM(e)}function eM(e,t,n){for(var s=(e.mode&1)!==0;Et!==null;){var c=Et,h=c.child;if(c.tag===22&&s){var f=c.memoizedState!==null||Fg;if(!f){var o=c.alternate,w=o!==null&&o.memoizedState!==null||mi;o=Fg;var b=mi;if(Fg=f,(mi=w)&&!b)for(Et=c;Et!==null;)f=Et,w=f.child,f.tag===22&&f.memoizedState!==null?WE(c):w!==null?(w.return=f,Et=w):WE(c);for(;h!==null;)Et=h,eM(h),h=h.sibling;Et=c,Fg=o,mi=b}GE(e)}else c.subtreeFlags&8772&&h!==null?(h.return=c,Et=h):GE(e)}}function GE(e){for(;Et!==null;){var t=Et;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:mi||kv(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!mi)if(n===null)s.componentDidMount();else{var c=t.elementType===t.type?n.memoizedProps:la(t.type,n.memoizedProps);s.componentDidUpdate(c,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var h=t.updateQueue;h!==null&&AE(t,h,s);break;case 3:var f=t.updateQueue;if(f!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}AE(t,f,n)}break;case 5:var o=t.stateNode;if(n===null&&t.flags&4){n=o;var w=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":w.autoFocus&&n.focus();break;case"img":w.src&&(n.src=w.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var b=t.alternate;if(b!==null){var A=b.memoizedState;if(A!==null){var C=A.dehydrated;C!==null&&gp(C)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ye(163))}mi||t.flags&512&&kw(t)}catch(M){ir(t,t.return,M)}}if(t===e){Et=null;break}if(n=t.sibling,n!==null){n.return=t.return,Et=n;break}Et=t.return}}function ZE(e){for(;Et!==null;){var t=Et;if(t===e){Et=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Et=n;break}Et=t.return}}function WE(e){for(;Et!==null;){var t=Et;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{kv(4,t)}catch(w){ir(t,n,w)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var c=t.return;try{s.componentDidMount()}catch(w){ir(t,c,w)}}var h=t.return;try{kw(t)}catch(w){ir(t,h,w)}break;case 5:var f=t.return;try{kw(t)}catch(w){ir(t,f,w)}}}catch(w){ir(t,t.return,w)}if(t===e){Et=null;break}var o=t.sibling;if(o!==null){o.return=t.return,Et=o;break}Et=t.return}}var KN=Math.ceil,Uy=Vo.ReactCurrentDispatcher,wb=Vo.ReactCurrentOwner,$s=Vo.ReactCurrentBatchConfig,cn=0,Fr=null,yr=null,Kr=0,us=0,yh=rc(0),Pr=0,Pp=null,lu=0,Iv=0,bb=0,rp=null,Yi=null,Sb=0,Jh=1/0,yo=null,qy=!1,Rw=null,jl=null,Ng=!1,Rl=null,Gy=0,ip=0,Dw=null,sy=-1,ay=0;function Oi(){return cn&6?mr():sy!==-1?sy:sy=mr()}function $l(e){return e.mode&1?cn&2&&Kr!==0?Kr&-Kr:RN.transition!==null?(ay===0&&(ay=Fk()),ay):(e=gn,e!==0||(e=window.event,e=e===void 0?16:qk(e.type)),e):1}function va(e,t,n,s){if(50<ip)throw ip=0,Dw=null,Error(Ye(185));tm(e,n,s),(!(cn&2)||e!==Fr)&&(e===Fr&&(!(cn&2)&&(Iv|=n),Pr===4&&_l(e,Kr)),ns(e,s),n===1&&cn===0&&!(t.mode&1)&&(Jh=mr()+500,Cv&&ic()))}function ns(e,t){var n=e.callbackNode;RF(e,t);var s=Ay(e,e===Fr?Kr:0);if(s===0)n!==null&&nE(n),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(n!=null&&nE(n),t===1)e.tag===0?MN(HE.bind(null,e)):cI(HE.bind(null,e)),PN(function(){!(cn&6)&&ic()}),n=null;else{switch(Nk(s)){case 1:n=K1;break;case 4:n=zk;break;case 16:n=Py;break;case 536870912:n=Ok;break;default:n=Py}n=lM(n,tM.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function tM(e,t){if(sy=-1,ay=0,cn&6)throw Error(Ye(327));var n=e.callbackNode;if(kh()&&e.callbackNode!==n)return null;var s=Ay(e,e===Fr?Kr:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=Zy(e,s);else{t=s;var c=cn;cn|=2;var h=rM();(Fr!==e||Kr!==t)&&(yo=null,Jh=mr()+500,nu(e,t));do try{YN();break}catch(o){nM(e,o)}while(1);lb(),Uy.current=h,cn=c,yr!==null?t=0:(Fr=null,Kr=0,t=Pr)}if(t!==0){if(t===2&&(c=aw(e),c!==0&&(s=c,t=Lw(e,c))),t===1)throw n=Pp,nu(e,0),_l(e,s),ns(e,mr()),n;if(t===6)_l(e,s);else{if(c=e.current.alternate,!(s&30)&&!XN(c)&&(t=Zy(e,s),t===2&&(h=aw(e),h!==0&&(s=h,t=Lw(e,h))),t===1))throw n=Pp,nu(e,0),_l(e,s),ns(e,mr()),n;switch(e.finishedWork=c,e.finishedLanes=s,t){case 0:case 1:throw Error(Ye(345));case 2:Rc(e,Yi,yo);break;case 3:if(_l(e,s),(s&130023424)===s&&(t=Sb+500-mr(),10<t)){if(Ay(e,0)!==0)break;if(c=e.suspendedLanes,(c&s)!==s){Oi(),e.pingedLanes|=e.suspendedLanes&c;break}e.timeoutHandle=pw(Rc.bind(null,e,Yi,yo),t);break}Rc(e,Yi,yo);break;case 4:if(_l(e,s),(s&4194240)===s)break;for(t=e.eventTimes,c=-1;0<s;){var f=31-ya(s);h=1<<f,f=t[f],f>c&&(c=f),s&=~h}if(s=c,s=mr()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*KN(s/1960))-s,10<s){e.timeoutHandle=pw(Rc.bind(null,e,Yi,yo),s);break}Rc(e,Yi,yo);break;case 5:Rc(e,Yi,yo);break;default:throw Error(Ye(329))}}}return ns(e,mr()),e.callbackNode===n?tM.bind(null,e):null}function Lw(e,t){var n=rp;return e.current.memoizedState.isDehydrated&&(nu(e,t).flags|=256),e=Zy(e,t),e!==2&&(t=Yi,Yi=n,t!==null&&zw(t)),e}function zw(e){Yi===null?Yi=e:Yi.push.apply(Yi,e)}function XN(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var c=n[s],h=c.getSnapshot;c=c.value;try{if(!xa(h(),c))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function _l(e,t){for(t&=~bb,t&=~Iv,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ya(t),s=1<<n;e[n]=-1,t&=~s}}function HE(e){if(cn&6)throw Error(Ye(327));kh();var t=Ay(e,0);if(!(t&1))return ns(e,mr()),null;var n=Zy(e,t);if(e.tag!==0&&n===2){var s=aw(e);s!==0&&(t=s,n=Lw(e,s))}if(n===1)throw n=Pp,nu(e,0),_l(e,t),ns(e,mr()),n;if(n===6)throw Error(Ye(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Rc(e,Yi,yo),ns(e,mr()),null}function Tb(e,t){var n=cn;cn|=1;try{return e(t)}finally{cn=n,cn===0&&(Jh=mr()+500,Cv&&ic())}}function cu(e){Rl!==null&&Rl.tag===0&&!(cn&6)&&kh();var t=cn;cn|=1;var n=$s.transition,s=gn;try{if($s.transition=null,gn=1,e)return e()}finally{gn=s,$s.transition=n,cn=t,!(cn&6)&&ic()}}function Eb(){us=yh.current,Vn(yh)}function nu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,CN(n)),yr!==null)for(n=yr.return;n!==null;){var s=n;switch(sb(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&Dy();break;case 3:Qh(),Vn(es),Vn(yi),pb();break;case 5:fb(s);break;case 4:Qh();break;case 13:Vn(Kn);break;case 19:Vn(Kn);break;case 10:cb(s.type._context);break;case 22:case 23:Eb()}n=n.return}if(Fr=e,yr=e=Ul(e.current,null),Kr=us=t,Pr=0,Pp=null,bb=Iv=lu=0,Yi=rp=null,Vc!==null){for(t=0;t<Vc.length;t++)if(n=Vc[t],s=n.interleaved,s!==null){n.interleaved=null;var c=s.next,h=n.pending;if(h!==null){var f=h.next;h.next=c,s.next=f}n.pending=s}Vc=null}return e}function nM(e,t){do{var n=yr;try{if(lb(),ny.current=$y,jy){for(var s=Qn.memoizedState;s!==null;){var c=s.queue;c!==null&&(c.pending=null),s=s.next}jy=!1}if(ou=0,Or=Er=Qn=null,tp=!1,Tp=0,wb.current=null,n===null||n.return===null){Pr=1,Pp=t,yr=null;break}e:{var h=e,f=n.return,o=n,w=t;if(t=Kr,o.flags|=32768,w!==null&&typeof w=="object"&&typeof w.then=="function"){var b=w,A=o,C=A.tag;if(!(A.mode&1)&&(C===0||C===11||C===15)){var M=A.alternate;M?(A.updateQueue=M.updateQueue,A.memoizedState=M.memoizedState,A.lanes=M.lanes):(A.updateQueue=null,A.memoizedState=null)}var B=zE(f);if(B!==null){B.flags&=-257,OE(B,f,o,h,t),B.mode&1&&LE(h,b,t),t=B,w=b;var V=t.updateQueue;if(V===null){var j=new Set;j.add(w),t.updateQueue=j}else V.add(w);break e}else{if(!(t&1)){LE(h,b,t),Cb();break e}w=Error(Ye(426))}}else if(Gn&&o.mode&1){var Z=zE(f);if(Z!==null){!(Z.flags&65536)&&(Z.flags|=256),OE(Z,f,o,h,t),ab(Yh(w,o));break e}}h=w=Yh(w,o),Pr!==4&&(Pr=2),rp===null?rp=[h]:rp.push(h),h=f;do{switch(h.tag){case 3:h.flags|=65536,t&=-t,h.lanes|=t;var N=BI(h,w,t);PE(h,N);break e;case 1:o=w;var F=h.type,W=h.stateNode;if(!(h.flags&128)&&(typeof F.getDerivedStateFromError=="function"||W!==null&&typeof W.componentDidCatch=="function"&&(jl===null||!jl.has(W)))){h.flags|=65536,t&=-t,h.lanes|=t;var Q=VI(h,o,t);PE(h,Q);break e}}h=h.return}while(h!==null)}sM(n)}catch(fe){t=fe,yr===n&&n!==null&&(yr=n=n.return);continue}break}while(1)}function rM(){var e=Uy.current;return Uy.current=$y,e===null?$y:e}function Cb(){(Pr===0||Pr===3||Pr===2)&&(Pr=4),Fr===null||!(lu&268435455)&&!(Iv&268435455)||_l(Fr,Kr)}function Zy(e,t){var n=cn;cn|=2;var s=rM();(Fr!==e||Kr!==t)&&(yo=null,nu(e,t));do try{QN();break}catch(c){nM(e,c)}while(1);if(lb(),cn=n,Uy.current=s,yr!==null)throw Error(Ye(261));return Fr=null,Kr=0,Pr}function QN(){for(;yr!==null;)iM(yr)}function YN(){for(;yr!==null&&!SF();)iM(yr)}function iM(e){var t=oM(e.alternate,e,us);e.memoizedProps=e.pendingProps,t===null?sM(e):yr=t,wb.current=null}function sM(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=GN(n,t),n!==null){n.flags&=32767,yr=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Pr=6,yr=null;return}}else if(n=qN(n,t,us),n!==null){yr=n;return}if(t=t.sibling,t!==null){yr=t;return}yr=t=e}while(t!==null);Pr===0&&(Pr=5)}function Rc(e,t,n){var s=gn,c=$s.transition;try{$s.transition=null,gn=1,JN(e,t,n,s)}finally{$s.transition=c,gn=s}return null}function JN(e,t,n,s){do kh();while(Rl!==null);if(cn&6)throw Error(Ye(327));n=e.finishedWork;var c=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Ye(177));e.callbackNode=null,e.callbackPriority=0;var h=n.lanes|n.childLanes;if(DF(e,h),e===Fr&&(yr=Fr=null,Kr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ng||(Ng=!0,lM(Py,function(){return kh(),null})),h=(n.flags&15990)!==0,n.subtreeFlags&15990||h){h=$s.transition,$s.transition=null;var f=gn;gn=1;var o=cn;cn|=4,wb.current=null,WN(e,n),JI(n,e),xN(dw),ky=!!hw,dw=hw=null,e.current=n,HN(n),TF(),cn=o,gn=f,$s.transition=h}else e.current=n;if(Ng&&(Ng=!1,Rl=e,Gy=c),h=e.pendingLanes,h===0&&(jl=null),PF(n.stateNode),ns(e,mr()),t!==null)for(s=e.onRecoverableError,n=0;n<t.length;n++)c=t[n],s(c.value,{componentStack:c.stack,digest:c.digest});if(qy)throw qy=!1,e=Rw,Rw=null,e;return Gy&1&&e.tag!==0&&kh(),h=e.pendingLanes,h&1?e===Dw?ip++:(ip=0,Dw=e):ip=0,ic(),null}function kh(){if(Rl!==null){var e=Nk(Gy),t=$s.transition,n=gn;try{if($s.transition=null,gn=16>e?16:e,Rl===null)var s=!1;else{if(e=Rl,Rl=null,Gy=0,cn&6)throw Error(Ye(331));var c=cn;for(cn|=4,Et=e.current;Et!==null;){var h=Et,f=h.child;if(Et.flags&16){var o=h.deletions;if(o!==null){for(var w=0;w<o.length;w++){var b=o[w];for(Et=b;Et!==null;){var A=Et;switch(A.tag){case 0:case 11:case 15:np(8,A,h)}var C=A.child;if(C!==null)C.return=A,Et=C;else for(;Et!==null;){A=Et;var M=A.sibling,B=A.return;if(XI(A),A===b){Et=null;break}if(M!==null){M.return=B,Et=M;break}Et=B}}}var V=h.alternate;if(V!==null){var j=V.child;if(j!==null){V.child=null;do{var Z=j.sibling;j.sibling=null,j=Z}while(j!==null)}}Et=h}}if(h.subtreeFlags&2064&&f!==null)f.return=h,Et=f;else e:for(;Et!==null;){if(h=Et,h.flags&2048)switch(h.tag){case 0:case 11:case 15:np(9,h,h.return)}var N=h.sibling;if(N!==null){N.return=h.return,Et=N;break e}Et=h.return}}var F=e.current;for(Et=F;Et!==null;){f=Et;var W=f.child;if(f.subtreeFlags&2064&&W!==null)W.return=f,Et=W;else e:for(f=F;Et!==null;){if(o=Et,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:kv(9,o)}}catch(fe){ir(o,o.return,fe)}if(o===f){Et=null;break e}var Q=o.sibling;if(Q!==null){Q.return=o.return,Et=Q;break e}Et=o.return}}if(cn=c,ic(),$a&&typeof $a.onPostCommitFiberRoot=="function")try{$a.onPostCommitFiberRoot(wv,e)}catch{}s=!0}return s}finally{gn=n,$s.transition=t}}return!1}function KE(e,t,n){t=Yh(n,t),t=BI(e,t,1),e=Vl(e,t,1),t=Oi(),e!==null&&(tm(e,1,t),ns(e,t))}function ir(e,t,n){if(e.tag===3)KE(e,e,n);else for(;t!==null;){if(t.tag===3){KE(t,e,n);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(jl===null||!jl.has(s))){e=Yh(n,e),e=VI(t,e,1),t=Vl(t,e,1),e=Oi(),t!==null&&(tm(t,1,e),ns(t,e));break}}t=t.return}}function e5(e,t,n){var s=e.pingCache;s!==null&&s.delete(t),t=Oi(),e.pingedLanes|=e.suspendedLanes&n,Fr===e&&(Kr&n)===n&&(Pr===4||Pr===3&&(Kr&130023424)===Kr&&500>mr()-Sb?nu(e,0):bb|=n),ns(e,t)}function aM(e,t){t===0&&(e.mode&1?(t=Ag,Ag<<=1,!(Ag&130023424)&&(Ag=4194304)):t=1);var n=Oi();e=Fo(e,t),e!==null&&(tm(e,t,n),ns(e,n))}function t5(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),aM(e,n)}function n5(e,t){var n=0;switch(e.tag){case 13:var s=e.stateNode,c=e.memoizedState;c!==null&&(n=c.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(Ye(314))}s!==null&&s.delete(t),aM(e,n)}var oM;oM=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||es.current)Ji=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Ji=!1,UN(e,t,n);Ji=!!(e.flags&131072)}else Ji=!1,Gn&&t.flags&1048576&&uI(t,Oy,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;iy(e,t),e=t.pendingProps;var c=Hh(t,yi.current);Ah(t,n),c=gb(null,t,s,e,c,n);var h=yb();return t.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ts(s)?(h=!0,Ly(t)):h=!1,t.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,hb(t),c.updater=Pv,t.stateNode=c,c._reactInternals=t,ww(t,s,e,n),t=Tw(null,t,s,!0,h,n)):(t.tag=0,Gn&&h&&ib(t),Ri(null,t,c,n),t=t.child),t;case 16:s=t.elementType;e:{switch(iy(e,t),e=t.pendingProps,c=s._init,s=c(s._payload),t.type=s,c=t.tag=i5(s),e=la(s,e),c){case 0:t=Sw(null,t,s,e,n);break e;case 1:t=BE(null,t,s,e,n);break e;case 11:t=FE(null,t,s,e,n);break e;case 14:t=NE(null,t,s,la(s.type,e),n);break e}throw Error(Ye(306,s,""))}return t;case 0:return s=t.type,c=t.pendingProps,c=t.elementType===s?c:la(s,c),Sw(e,t,s,c,n);case 1:return s=t.type,c=t.pendingProps,c=t.elementType===s?c:la(s,c),BE(e,t,s,c,n);case 3:e:{if(qI(t),e===null)throw Error(Ye(387));s=t.pendingProps,h=t.memoizedState,c=h.element,pI(e,t),By(t,s,null,n);var f=t.memoizedState;if(s=f.element,h.isDehydrated)if(h={element:s,isDehydrated:!1,cache:f.cache,pendingSuspenseBoundaries:f.pendingSuspenseBoundaries,transitions:f.transitions},t.updateQueue.baseState=h,t.memoizedState=h,t.flags&256){c=Yh(Error(Ye(423)),t),t=VE(e,t,s,n,c);break e}else if(s!==c){c=Yh(Error(Ye(424)),t),t=VE(e,t,s,n,c);break e}else for(ds=Bl(t.stateNode.containerInfo.firstChild),ps=t,Gn=!0,pa=null,n=vI(t,null,s,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Kh(),s===c){t=No(e,t,n);break e}Ri(e,t,s,n)}t=t.child}return t;case 5:return xI(t),e===null&&vw(t),s=t.type,c=t.pendingProps,h=e!==null?e.memoizedProps:null,f=c.children,fw(s,c)?f=null:h!==null&&fw(s,h)&&(t.flags|=32),UI(e,t),Ri(e,t,f,n),t.child;case 6:return e===null&&vw(t),null;case 13:return GI(e,t,n);case 4:return db(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=Xh(t,null,s,n):Ri(e,t,s,n),t.child;case 11:return s=t.type,c=t.pendingProps,c=t.elementType===s?c:la(s,c),FE(e,t,s,c,n);case 7:return Ri(e,t,t.pendingProps,n),t.child;case 8:return Ri(e,t,t.pendingProps.children,n),t.child;case 12:return Ri(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(s=t.type._context,c=t.pendingProps,h=t.memoizedProps,f=c.value,Rn(Fy,s._currentValue),s._currentValue=f,h!==null)if(xa(h.value,f)){if(h.children===c.children&&!es.current){t=No(e,t,n);break e}}else for(h=t.child,h!==null&&(h.return=t);h!==null;){var o=h.dependencies;if(o!==null){f=h.child;for(var w=o.firstContext;w!==null;){if(w.context===s){if(h.tag===1){w=Io(-1,n&-n),w.tag=2;var b=h.updateQueue;if(b!==null){b=b.shared;var A=b.pending;A===null?w.next=w:(w.next=A.next,A.next=w),b.pending=w}}h.lanes|=n,w=h.alternate,w!==null&&(w.lanes|=n),xw(h.return,n,t),o.lanes|=n;break}w=w.next}}else if(h.tag===10)f=h.type===t.type?null:h.child;else if(h.tag===18){if(f=h.return,f===null)throw Error(Ye(341));f.lanes|=n,o=f.alternate,o!==null&&(o.lanes|=n),xw(f,n,t),f=h.sibling}else f=h.child;if(f!==null)f.return=h;else for(f=h;f!==null;){if(f===t){f=null;break}if(h=f.sibling,h!==null){h.return=f.return,f=h;break}f=f.return}h=f}Ri(e,t,c.children,n),t=t.child}return t;case 9:return c=t.type,s=t.pendingProps.children,Ah(t,n),c=qs(c),s=s(c),t.flags|=1,Ri(e,t,s,n),t.child;case 14:return s=t.type,c=la(s,t.pendingProps),c=la(s.type,c),NE(e,t,s,c,n);case 15:return jI(e,t,t.type,t.pendingProps,n);case 17:return s=t.type,c=t.pendingProps,c=t.elementType===s?c:la(s,c),iy(e,t),t.tag=1,ts(s)?(e=!0,Ly(t)):e=!1,Ah(t,n),gI(t,s,c),ww(t,s,c,n),Tw(null,t,s,!0,e,n);case 19:return ZI(e,t,n);case 22:return $I(e,t,n)}throw Error(Ye(156,t.tag))};function lM(e,t){return Lk(e,t)}function r5(e,t,n,s){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function js(e,t,n,s){return new r5(e,t,n,s)}function Pb(e){return e=e.prototype,!(!e||!e.isReactComponent)}function i5(e){if(typeof e=="function")return Pb(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Z1)return 11;if(e===W1)return 14}return 2}function Ul(e,t){var n=e.alternate;return n===null?(n=js(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function oy(e,t,n,s,c,h){var f=2;if(s=e,typeof e=="function")Pb(e)&&(f=1);else if(typeof e=="string")f=5;else e:switch(e){case oh:return ru(n.children,c,h,t);case G1:f=8,c|=8;break;case G0:return e=js(12,n,t,c|2),e.elementType=G0,e.lanes=h,e;case Z0:return e=js(13,n,t,c),e.elementType=Z0,e.lanes=h,e;case W0:return e=js(19,n,t,c),e.elementType=W0,e.lanes=h,e;case yk:return Mv(n,c,h,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case mk:f=10;break e;case gk:f=9;break e;case Z1:f=11;break e;case W1:f=14;break e;case yl:f=16,s=null;break e}throw Error(Ye(130,e==null?e:typeof e,""))}return t=js(f,n,t,c),t.elementType=e,t.type=s,t.lanes=h,t}function ru(e,t,n,s){return e=js(7,e,s,t),e.lanes=n,e}function Mv(e,t,n,s){return e=js(22,e,s,t),e.elementType=yk,e.lanes=n,e.stateNode={isHidden:!1},e}function s0(e,t,n){return e=js(6,e,null,t),e.lanes=n,e}function a0(e,t,n){return t=js(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function s5(e,t,n,s,c){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=V_(0),this.expirationTimes=V_(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=V_(0),this.identifierPrefix=s,this.onRecoverableError=c,this.mutableSourceEagerHydrationData=null}function Ab(e,t,n,s,c,h,f,o,w){return e=new s5(e,t,n,o,w),t===1?(t=1,h===!0&&(t|=8)):t=0,h=js(3,null,null,t),e.current=h,h.stateNode=e,h.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},hb(h),e}function a5(e,t,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ah,key:s==null?null:""+s,children:e,containerInfo:t,implementation:n}}function cM(e){if(!e)return Kl;e=e._reactInternals;e:{if(mu(e)!==e||e.tag!==1)throw Error(Ye(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ts(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Ye(171))}if(e.tag===1){var n=e.type;if(ts(n))return lI(e,n,t)}return t}function uM(e,t,n,s,c,h,f,o,w){return e=Ab(n,s,!0,e,c,h,f,o,w),e.context=cM(null),n=e.current,s=Oi(),c=$l(n),h=Io(s,c),h.callback=t??null,Vl(n,h,c),e.current.lanes=c,tm(e,c,s),ns(e,s),e}function Rv(e,t,n,s){var c=t.current,h=Oi(),f=$l(c);return n=cM(n),t.context===null?t.context=n:t.pendingContext=n,t=Io(h,f),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=Vl(c,t,f),e!==null&&(va(e,c,f,h),ty(e,c,f)),f}function Wy(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function XE(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function kb(e,t){XE(e,t),(e=e.alternate)&&XE(e,t)}function o5(){return null}var hM=typeof reportError=="function"?reportError:function(e){console.error(e)};function Ib(e){this._internalRoot=e}Dv.prototype.render=Ib.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Ye(409));Rv(e,t,null,null)};Dv.prototype.unmount=Ib.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;cu(function(){Rv(null,e,null,null)}),t[Oo]=null}};function Dv(e){this._internalRoot=e}Dv.prototype.unstable_scheduleHydration=function(e){if(e){var t=jk();e={blockedOn:null,target:e,priority:t};for(var n=0;n<xl.length&&t!==0&&t<xl[n].priority;n++);xl.splice(n,0,e),n===0&&Uk(e)}};function Mb(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Lv(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function QE(){}function l5(e,t,n,s,c){if(c){if(typeof s=="function"){var h=s;s=function(){var b=Wy(f);h.call(b)}}var f=uM(t,s,e,0,null,!1,!1,"",QE);return e._reactRootContainer=f,e[Oo]=f.current,xp(e.nodeType===8?e.parentNode:e),cu(),f}for(;c=e.lastChild;)e.removeChild(c);if(typeof s=="function"){var o=s;s=function(){var b=Wy(w);o.call(b)}}var w=Ab(e,0,!1,null,null,!1,!1,"",QE);return e._reactRootContainer=w,e[Oo]=w.current,xp(e.nodeType===8?e.parentNode:e),cu(function(){Rv(t,w,n,s)}),w}function zv(e,t,n,s,c){var h=n._reactRootContainer;if(h){var f=h;if(typeof c=="function"){var o=c;c=function(){var w=Wy(f);o.call(w)}}Rv(t,f,e,c)}else f=l5(n,t,e,c,s);return Wy(f)}Bk=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Uf(t.pendingLanes);n!==0&&(X1(t,n|1),ns(t,mr()),!(cn&6)&&(Jh=mr()+500,ic()))}break;case 13:cu(function(){var s=Fo(e,1);if(s!==null){var c=Oi();va(s,e,1,c)}}),kb(e,1)}};Q1=function(e){if(e.tag===13){var t=Fo(e,134217728);if(t!==null){var n=Oi();va(t,e,134217728,n)}kb(e,134217728)}};Vk=function(e){if(e.tag===13){var t=$l(e),n=Fo(e,t);if(n!==null){var s=Oi();va(n,e,t,s)}kb(e,t)}};jk=function(){return gn};$k=function(e,t){var n=gn;try{return gn=e,t()}finally{gn=n}};rw=function(e,t,n){switch(t){case"input":if(X0(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var s=n[t];if(s!==e&&s.form===e.form){var c=Ev(s);if(!c)throw Error(Ye(90));xk(s),X0(s,c)}}}break;case"textarea":wk(e,n);break;case"select":t=n.value,t!=null&&Th(e,!!n.multiple,t,!1)}};Ak=Tb;kk=cu;var c5={usingClientEntryPoint:!1,Events:[rm,hh,Ev,Ck,Pk,Tb]},Lf={findFiberByHostInstance:Bc,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},u5={bundleType:Lf.bundleType,version:Lf.version,rendererPackageName:Lf.rendererPackageName,rendererConfig:Lf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Vo.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Rk(e),e===null?null:e.stateNode},findFiberByHostInstance:Lf.findFiberByHostInstance||o5,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bg.isDisabled&&Bg.supportsFiber)try{wv=Bg.inject(u5),$a=Bg}catch{}}xs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=c5;xs.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Mb(t))throw Error(Ye(200));return a5(e,t,null,n)};xs.createRoot=function(e,t){if(!Mb(e))throw Error(Ye(299));var n=!1,s="",c=hM;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(c=t.onRecoverableError)),t=Ab(e,1,!1,null,null,n,!1,s,c),e[Oo]=t.current,xp(e.nodeType===8?e.parentNode:e),new Ib(t)};xs.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Ye(188)):(e=Object.keys(e).join(","),Error(Ye(268,e)));return e=Rk(t),e=e===null?null:e.stateNode,e};xs.flushSync=function(e){return cu(e)};xs.hydrate=function(e,t,n){if(!Lv(t))throw Error(Ye(200));return zv(null,e,t,!0,n)};xs.hydrateRoot=function(e,t,n){if(!Mb(e))throw Error(Ye(405));var s=n!=null&&n.hydratedSources||null,c=!1,h="",f=hM;if(n!=null&&(n.unstable_strictMode===!0&&(c=!0),n.identifierPrefix!==void 0&&(h=n.identifierPrefix),n.onRecoverableError!==void 0&&(f=n.onRecoverableError)),t=uM(t,null,e,1,n??null,c,!1,h,f),e[Oo]=t.current,xp(e),s)for(e=0;e<s.length;e++)n=s[e],c=n._getVersion,c=c(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,c]:t.mutableSourceEagerHydrationData.push(n,c);return new Dv(t)};xs.render=function(e,t,n){if(!Lv(t))throw Error(Ye(200));return zv(null,e,t,!1,n)};xs.unmountComponentAtNode=function(e){if(!Lv(e))throw Error(Ye(40));return e._reactRootContainer?(cu(function(){zv(null,null,e,!1,function(){e._reactRootContainer=null,e[Oo]=null})}),!0):!1};xs.unstable_batchedUpdates=Tb;xs.unstable_renderSubtreeIntoContainer=function(e,t,n,s){if(!Lv(n))throw Error(Ye(200));if(e==null||e._reactInternals===void 0)throw Error(Ye(38));return zv(e,t,n,!1,s)};xs.version="18.2.0-next-9e3b772b8-20220608";function dM(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(dM)}catch(e){console.error(e)}}dM(),uk.exports=xs;var Rb=uk.exports;const Vg=YA(Rb);var YE=Rb;U0.createRoot=YE.createRoot,U0.hydrateRoot=YE.hydrateRoot;var fM={exports:{}},pM={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ed=Y;function h5(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var d5=typeof Object.is=="function"?Object.is:h5,f5=ed.useState,p5=ed.useEffect,m5=ed.useLayoutEffect,g5=ed.useDebugValue;function y5(e,t){var n=t(),s=f5({inst:{value:n,getSnapshot:t}}),c=s[0].inst,h=s[1];return m5(function(){c.value=n,c.getSnapshot=t,o0(c)&&h({inst:c})},[e,n,t]),p5(function(){return o0(c)&&h({inst:c}),e(function(){o0(c)&&h({inst:c})})},[e]),g5(n),n}function o0(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!d5(e,n)}catch{return!0}}function v5(e,t){return t()}var x5=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?v5:y5;pM.useSyncExternalStore=ed.useSyncExternalStore!==void 0?ed.useSyncExternalStore:x5;fM.exports=pM;var _5=fM.exports,mM={exports:{}},gM={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ov=Y,w5=_5;function b5(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var S5=typeof Object.is=="function"?Object.is:b5,T5=w5.useSyncExternalStore,E5=Ov.useRef,C5=Ov.useEffect,P5=Ov.useMemo,A5=Ov.useDebugValue;gM.useSyncExternalStoreWithSelector=function(e,t,n,s,c){var h=E5(null);if(h.current===null){var f={hasValue:!1,value:null};h.current=f}else f=h.current;h=P5(function(){function w(B){if(!b){if(b=!0,A=B,B=s(B),c!==void 0&&f.hasValue){var V=f.value;if(c(V,B))return C=V}return C=B}if(V=C,S5(A,B))return V;var j=s(B);return c!==void 0&&c(V,j)?V:(A=B,C=j)}var b=!1,A,C,M=n===void 0?null:n;return[function(){return w(t())},M===null?void 0:function(){return w(M())}]},[t,n,s,c]);var o=T5(e,h[0],h[1]);return C5(function(){f.hasValue=!0,f.value=o},[o]),A5(o),o};mM.exports=gM;var k5=mM.exports;function I5(e){e()}let yM=I5;const M5=e=>yM=e,R5=()=>yM,JE=Symbol.for("react-redux-context"),eC=typeof globalThis<"u"?globalThis:{};function D5(){var e;if(!Y.createContext)return{};const t=(e=eC[JE])!=null?e:eC[JE]=new Map;let n=t.get(Y.createContext);return n||(n=Y.createContext(null),t.set(Y.createContext,n)),n}const Xl=D5();function Db(e=Xl){return function(){return Y.useContext(e)}}const vM=Db(),L5=()=>{throw new Error("uSES not initialized!")};let xM=L5;const z5=e=>{xM=e},O5=(e,t)=>e===t;function F5(e=Xl){const t=e===Xl?vM:Db(e);return function(s,c={}){const{equalityFn:h=O5,stabilityCheck:f=void 0,noopCheck:o=void 0}=typeof c=="function"?{equalityFn:c}:c,{store:w,subscription:b,getServerState:A,stabilityCheck:C,noopCheck:M}=t();Y.useRef(!0);const B=Y.useCallback({[s.name](j){return s(j)}}[s.name],[s,C,f]),V=xM(b.addNestedSub,w.getState,A||w.getState,B,h);return Y.useDebugValue(V),V}}const N5=F5();function uu(){return uu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},uu.apply(this,arguments)}function Lb(e,t){if(e==null)return{};var n={},s=Object.keys(e),c,h;for(h=0;h<s.length;h++)c=s[h],!(t.indexOf(c)>=0)&&(n[c]=e[c]);return n}var _M={exports:{}},yn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nr=typeof Symbol=="function"&&Symbol.for,zb=Nr?Symbol.for("react.element"):60103,Ob=Nr?Symbol.for("react.portal"):60106,Fv=Nr?Symbol.for("react.fragment"):60107,Nv=Nr?Symbol.for("react.strict_mode"):60108,Bv=Nr?Symbol.for("react.profiler"):60114,Vv=Nr?Symbol.for("react.provider"):60109,jv=Nr?Symbol.for("react.context"):60110,Fb=Nr?Symbol.for("react.async_mode"):60111,$v=Nr?Symbol.for("react.concurrent_mode"):60111,Uv=Nr?Symbol.for("react.forward_ref"):60112,qv=Nr?Symbol.for("react.suspense"):60113,B5=Nr?Symbol.for("react.suspense_list"):60120,Gv=Nr?Symbol.for("react.memo"):60115,Zv=Nr?Symbol.for("react.lazy"):60116,V5=Nr?Symbol.for("react.block"):60121,j5=Nr?Symbol.for("react.fundamental"):60117,$5=Nr?Symbol.for("react.responder"):60118,U5=Nr?Symbol.for("react.scope"):60119;function ws(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case zb:switch(e=e.type,e){case Fb:case $v:case Fv:case Bv:case Nv:case qv:return e;default:switch(e=e&&e.$$typeof,e){case jv:case Uv:case Zv:case Gv:case Vv:return e;default:return t}}case Ob:return t}}}function wM(e){return ws(e)===$v}yn.AsyncMode=Fb;yn.ConcurrentMode=$v;yn.ContextConsumer=jv;yn.ContextProvider=Vv;yn.Element=zb;yn.ForwardRef=Uv;yn.Fragment=Fv;yn.Lazy=Zv;yn.Memo=Gv;yn.Portal=Ob;yn.Profiler=Bv;yn.StrictMode=Nv;yn.Suspense=qv;yn.isAsyncMode=function(e){return wM(e)||ws(e)===Fb};yn.isConcurrentMode=wM;yn.isContextConsumer=function(e){return ws(e)===jv};yn.isContextProvider=function(e){return ws(e)===Vv};yn.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===zb};yn.isForwardRef=function(e){return ws(e)===Uv};yn.isFragment=function(e){return ws(e)===Fv};yn.isLazy=function(e){return ws(e)===Zv};yn.isMemo=function(e){return ws(e)===Gv};yn.isPortal=function(e){return ws(e)===Ob};yn.isProfiler=function(e){return ws(e)===Bv};yn.isStrictMode=function(e){return ws(e)===Nv};yn.isSuspense=function(e){return ws(e)===qv};yn.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Fv||e===$v||e===Bv||e===Nv||e===qv||e===B5||typeof e=="object"&&e!==null&&(e.$$typeof===Zv||e.$$typeof===Gv||e.$$typeof===Vv||e.$$typeof===jv||e.$$typeof===Uv||e.$$typeof===j5||e.$$typeof===$5||e.$$typeof===U5||e.$$typeof===V5)};yn.typeOf=ws;_M.exports=yn;var q5=_M.exports,bM=q5,G5={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Z5={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},SM={};SM[bM.ForwardRef]=G5;SM[bM.Memo]=Z5;var bn={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nb=Symbol.for("react.element"),Bb=Symbol.for("react.portal"),Wv=Symbol.for("react.fragment"),Hv=Symbol.for("react.strict_mode"),Kv=Symbol.for("react.profiler"),Xv=Symbol.for("react.provider"),Qv=Symbol.for("react.context"),W5=Symbol.for("react.server_context"),Yv=Symbol.for("react.forward_ref"),Jv=Symbol.for("react.suspense"),ex=Symbol.for("react.suspense_list"),tx=Symbol.for("react.memo"),nx=Symbol.for("react.lazy"),H5=Symbol.for("react.offscreen"),TM;TM=Symbol.for("react.module.reference");function Zs(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Nb:switch(e=e.type,e){case Wv:case Kv:case Hv:case Jv:case ex:return e;default:switch(e=e&&e.$$typeof,e){case W5:case Qv:case Yv:case nx:case tx:case Xv:return e;default:return t}}case Bb:return t}}}bn.ContextConsumer=Qv;bn.ContextProvider=Xv;bn.Element=Nb;bn.ForwardRef=Yv;bn.Fragment=Wv;bn.Lazy=nx;bn.Memo=tx;bn.Portal=Bb;bn.Profiler=Kv;bn.StrictMode=Hv;bn.Suspense=Jv;bn.SuspenseList=ex;bn.isAsyncMode=function(){return!1};bn.isConcurrentMode=function(){return!1};bn.isContextConsumer=function(e){return Zs(e)===Qv};bn.isContextProvider=function(e){return Zs(e)===Xv};bn.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Nb};bn.isForwardRef=function(e){return Zs(e)===Yv};bn.isFragment=function(e){return Zs(e)===Wv};bn.isLazy=function(e){return Zs(e)===nx};bn.isMemo=function(e){return Zs(e)===tx};bn.isPortal=function(e){return Zs(e)===Bb};bn.isProfiler=function(e){return Zs(e)===Kv};bn.isStrictMode=function(e){return Zs(e)===Hv};bn.isSuspense=function(e){return Zs(e)===Jv};bn.isSuspenseList=function(e){return Zs(e)===ex};bn.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Wv||e===Kv||e===Hv||e===Jv||e===ex||e===H5||typeof e=="object"&&e!==null&&(e.$$typeof===nx||e.$$typeof===tx||e.$$typeof===Xv||e.$$typeof===Qv||e.$$typeof===Yv||e.$$typeof===TM||e.getModuleId!==void 0)};bn.typeOf=Zs;function K5(){const e=R5();let t=null,n=null;return{clear(){t=null,n=null},notify(){e(()=>{let s=t;for(;s;)s.callback(),s=s.next})},get(){let s=[],c=t;for(;c;)s.push(c),c=c.next;return s},subscribe(s){let c=!0,h=n={callback:s,next:null,prev:n};return h.prev?h.prev.next=h:t=h,function(){!c||t===null||(c=!1,h.next?h.next.prev=h.prev:n=h.prev,h.prev?h.prev.next=h.next:t=h.next)}}}}const tC={notify(){},get:()=>[]};function X5(e,t){let n,s=tC,c=0,h=!1;function f(j){A();const Z=s.subscribe(j);let N=!1;return()=>{N||(N=!0,Z(),C())}}function o(){s.notify()}function w(){V.onStateChange&&V.onStateChange()}function b(){return h}function A(){c++,n||(n=t?t.addNestedSub(w):e.subscribe(w),s=K5())}function C(){c--,n&&c===0&&(n(),n=void 0,s.clear(),s=tC)}function M(){h||(h=!0,A())}function B(){h&&(h=!1,C())}const V={addNestedSub:f,notifyNestedSubs:o,handleChangeWrapper:w,isSubscribed:b,trySubscribe:M,tryUnsubscribe:B,getListeners:()=>s};return V}const Q5=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Y5=Q5?Y.useLayoutEffect:Y.useEffect;function J5({store:e,context:t,children:n,serverState:s,stabilityCheck:c="once",noopCheck:h="once"}){const f=Y.useMemo(()=>{const b=X5(e);return{store:e,subscription:b,getServerState:s?()=>s:void 0,stabilityCheck:c,noopCheck:h}},[e,s,c,h]),o=Y.useMemo(()=>e.getState(),[e]);Y5(()=>{const{subscription:b}=f;return b.onStateChange=b.notifyNestedSubs,b.trySubscribe(),o!==e.getState()&&b.notifyNestedSubs(),()=>{b.tryUnsubscribe(),b.onStateChange=void 0}},[f,o]);const w=t||Xl;return Y.createElement(w.Provider,{value:f},n)}function EM(e=Xl){const t=e===Xl?vM:Db(e);return function(){const{store:s}=t();return s}}const e4=EM();function t4(e=Xl){const t=e===Xl?e4:EM(e);return function(){return t().dispatch}}const CM=t4();z5(k5.useSyncExternalStoreWithSelector);M5(Rb.unstable_batchedUpdates);/**
 * @remix-run/router v1.15.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ap(){return Ap=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Ap.apply(this,arguments)}var Dl;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Dl||(Dl={}));const nC="popstate";function n4(e){e===void 0&&(e={});function t(s,c){let{pathname:h,search:f,hash:o}=s.location;return Ow("",{pathname:h,search:f,hash:o},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function n(s,c){return typeof c=="string"?c:Hy(c)}return i4(t,n,null,e)}function Yn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function PM(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function r4(){return Math.random().toString(36).substr(2,8)}function rC(e,t){return{usr:e.state,key:e.key,idx:t}}function Ow(e,t,n,s){return n===void 0&&(n=null),Ap({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?dd(t):t,{state:n,key:t&&t.key||s||r4()})}function Hy(e){let{pathname:t="/",search:n="",hash:s=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function dd(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let s=e.indexOf("?");s>=0&&(t.search=e.substr(s),e=e.substr(0,s)),e&&(t.pathname=e)}return t}function i4(e,t,n,s){s===void 0&&(s={});let{window:c=document.defaultView,v5Compat:h=!1}=s,f=c.history,o=Dl.Pop,w=null,b=A();b==null&&(b=0,f.replaceState(Ap({},f.state,{idx:b}),""));function A(){return(f.state||{idx:null}).idx}function C(){o=Dl.Pop;let Z=A(),N=Z==null?null:Z-b;b=Z,w&&w({action:o,location:j.location,delta:N})}function M(Z,N){o=Dl.Push;let F=Ow(j.location,Z,N);n&&n(F,Z),b=A()+1;let W=rC(F,b),Q=j.createHref(F);try{f.pushState(W,"",Q)}catch(fe){if(fe instanceof DOMException&&fe.name==="DataCloneError")throw fe;c.location.assign(Q)}h&&w&&w({action:o,location:j.location,delta:1})}function B(Z,N){o=Dl.Replace;let F=Ow(j.location,Z,N);n&&n(F,Z),b=A();let W=rC(F,b),Q=j.createHref(F);f.replaceState(W,"",Q),h&&w&&w({action:o,location:j.location,delta:0})}function V(Z){let N=c.location.origin!=="null"?c.location.origin:c.location.href,F=typeof Z=="string"?Z:Hy(Z);return F=F.replace(/ $/,"%20"),Yn(N,"No window.location.(origin|href) available to create URL for href: "+F),new URL(F,N)}let j={get action(){return o},get location(){return e(c,f)},listen(Z){if(w)throw new Error("A history only accepts one active listener");return c.addEventListener(nC,C),w=Z,()=>{c.removeEventListener(nC,C),w=null}},createHref(Z){return t(c,Z)},createURL:V,encodeLocation(Z){let N=V(Z);return{pathname:N.pathname,search:N.search,hash:N.hash}},push:M,replace:B,go(Z){return f.go(Z)}};return j}var iC;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(iC||(iC={}));function s4(e,t,n){n===void 0&&(n="/");let s=typeof t=="string"?dd(t):t,c=td(s.pathname||"/",n);if(c==null)return null;let h=AM(e);a4(h);let f=null;for(let o=0;f==null&&o<h.length;++o){let w=y4(c);f=m4(h[o],w)}return f}function AM(e,t,n,s){t===void 0&&(t=[]),n===void 0&&(n=[]),s===void 0&&(s="");let c=(h,f,o)=>{let w={relativePath:o===void 0?h.path||"":o,caseSensitive:h.caseSensitive===!0,childrenIndex:f,route:h};w.relativePath.startsWith("/")&&(Yn(w.relativePath.startsWith(s),'Absolute route path "'+w.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),w.relativePath=w.relativePath.slice(s.length));let b=ql([s,w.relativePath]),A=n.concat(w);h.children&&h.children.length>0&&(Yn(h.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+b+'".')),AM(h.children,t,A,b)),!(h.path==null&&!h.index)&&t.push({path:b,score:f4(b,h.index),routesMeta:A})};return e.forEach((h,f)=>{var o;if(h.path===""||!((o=h.path)!=null&&o.includes("?")))c(h,f);else for(let w of kM(h.path))c(h,f,w)}),t}function kM(e){let t=e.split("/");if(t.length===0)return[];let[n,...s]=t,c=n.endsWith("?"),h=n.replace(/\?$/,"");if(s.length===0)return c?[h,""]:[h];let f=kM(s.join("/")),o=[];return o.push(...f.map(w=>w===""?h:[h,w].join("/"))),c&&o.push(...f),o.map(w=>e.startsWith("/")&&w===""?"/":w)}function a4(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:p4(t.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}const o4=/^:[\w-]+$/,l4=3,c4=2,u4=1,h4=10,d4=-2,sC=e=>e==="*";function f4(e,t){let n=e.split("/"),s=n.length;return n.some(sC)&&(s+=d4),t&&(s+=c4),n.filter(c=>!sC(c)).reduce((c,h)=>c+(o4.test(h)?l4:h===""?u4:h4),s)}function p4(e,t){return e.length===t.length&&e.slice(0,-1).every((s,c)=>s===t[c])?e[e.length-1]-t[t.length-1]:0}function m4(e,t){let{routesMeta:n}=e,s={},c="/",h=[];for(let f=0;f<n.length;++f){let o=n[f],w=f===n.length-1,b=c==="/"?t:t.slice(c.length)||"/",A=Fw({path:o.relativePath,caseSensitive:o.caseSensitive,end:w},b);if(!A)return null;Object.assign(s,A.params);let C=o.route;h.push({params:s,pathname:ql([c,A.pathname]),pathnameBase:w4(ql([c,A.pathnameBase])),route:C}),A.pathnameBase!=="/"&&(c=ql([c,A.pathnameBase]))}return h}function Fw(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,s]=g4(e.path,e.caseSensitive,e.end),c=t.match(n);if(!c)return null;let h=c[0],f=h.replace(/(.)\/+$/,"$1"),o=c.slice(1);return{params:s.reduce((b,A,C)=>{let{paramName:M,isOptional:B}=A;if(M==="*"){let j=o[C]||"";f=h.slice(0,h.length-j.length).replace(/(.)\/+$/,"$1")}const V=o[C];return B&&!V?b[M]=void 0:b[M]=(V||"").replace(/%2F/g,"/"),b},{}),pathname:h,pathnameBase:f,pattern:e}}function g4(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),PM(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let s=[],c="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,o,w)=>(s.push({paramName:o,isOptional:w!=null}),w?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(s.push({paramName:"*"}),c+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?c+="\\/*$":e!==""&&e!=="/"&&(c+="(?:(?=\\/|$))"),[new RegExp(c,t?void 0:"i"),s]}function y4(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return PM(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function td(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,s=e.charAt(n);return s&&s!=="/"?null:e.slice(n)||"/"}function v4(e,t){t===void 0&&(t="/");let{pathname:n,search:s="",hash:c=""}=typeof e=="string"?dd(e):e;return{pathname:n?n.startsWith("/")?n:x4(n,t):t,search:b4(s),hash:S4(c)}}function x4(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(c=>{c===".."?n.length>1&&n.pop():c!=="."&&n.push(c)}),n.length>1?n.join("/"):"/"}function l0(e,t,n,s){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function _4(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Vb(e,t){let n=_4(e);return t?n.map((s,c)=>c===e.length-1?s.pathname:s.pathnameBase):n.map(s=>s.pathnameBase)}function jb(e,t,n,s){s===void 0&&(s=!1);let c;typeof e=="string"?c=dd(e):(c=Ap({},e),Yn(!c.pathname||!c.pathname.includes("?"),l0("?","pathname","search",c)),Yn(!c.pathname||!c.pathname.includes("#"),l0("#","pathname","hash",c)),Yn(!c.search||!c.search.includes("#"),l0("#","search","hash",c)));let h=e===""||c.pathname==="",f=h?"/":c.pathname,o;if(f==null)o=n;else{let C=t.length-1;if(!s&&f.startsWith("..")){let M=f.split("/");for(;M[0]==="..";)M.shift(),C-=1;c.pathname=M.join("/")}o=C>=0?t[C]:"/"}let w=v4(c,o),b=f&&f!=="/"&&f.endsWith("/"),A=(h||f===".")&&n.endsWith("/");return!w.pathname.endsWith("/")&&(b||A)&&(w.pathname+="/"),w}const ql=e=>e.join("/").replace(/\/\/+/g,"/"),w4=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),b4=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,S4=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function T4(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const IM=["post","put","patch","delete"];new Set(IM);const E4=["get",...IM];new Set(E4);/**
 * React Router v6.22.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function kp(){return kp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},kp.apply(this,arguments)}const rx=Y.createContext(null),MM=Y.createContext(null),jo=Y.createContext(null),ix=Y.createContext(null),$o=Y.createContext({outlet:null,matches:[],isDataRoute:!1}),RM=Y.createContext(null);function C4(e,t){let{relative:n}=t===void 0?{}:t;fd()||Yn(!1);let{basename:s,navigator:c}=Y.useContext(jo),{hash:h,pathname:f,search:o}=ax(e,{relative:n}),w=f;return s!=="/"&&(w=f==="/"?s:ql([s,f])),c.createHref({pathname:w,search:o,hash:h})}function fd(){return Y.useContext(ix)!=null}function pd(){return fd()||Yn(!1),Y.useContext(ix).location}function DM(e){Y.useContext(jo).static||Y.useLayoutEffect(e)}function sx(){let{isDataRoute:e}=Y.useContext($o);return e?j4():P4()}function P4(){fd()||Yn(!1);let e=Y.useContext(rx),{basename:t,future:n,navigator:s}=Y.useContext(jo),{matches:c}=Y.useContext($o),{pathname:h}=pd(),f=JSON.stringify(Vb(c,n.v7_relativeSplatPath)),o=Y.useRef(!1);return DM(()=>{o.current=!0}),Y.useCallback(function(b,A){if(A===void 0&&(A={}),!o.current)return;if(typeof b=="number"){s.go(b);return}let C=jb(b,JSON.parse(f),h,A.relative==="path");e==null&&t!=="/"&&(C.pathname=C.pathname==="/"?t:ql([t,C.pathname])),(A.replace?s.replace:s.push)(C,A.state,A)},[t,s,f,h,e])}const A4=Y.createContext(null);function k4(e){let t=Y.useContext($o).outlet;return t&&Y.createElement(A4.Provider,{value:e},t)}function ax(e,t){let{relative:n}=t===void 0?{}:t,{future:s}=Y.useContext(jo),{matches:c}=Y.useContext($o),{pathname:h}=pd(),f=JSON.stringify(Vb(c,s.v7_relativeSplatPath));return Y.useMemo(()=>jb(e,JSON.parse(f),h,n==="path"),[e,f,h,n])}function I4(e,t){return M4(e,t)}function M4(e,t,n,s){fd()||Yn(!1);let{navigator:c}=Y.useContext(jo),{matches:h}=Y.useContext($o),f=h[h.length-1],o=f?f.params:{};f&&f.pathname;let w=f?f.pathnameBase:"/";f&&f.route;let b=pd(),A;if(t){var C;let Z=typeof t=="string"?dd(t):t;w==="/"||(C=Z.pathname)!=null&&C.startsWith(w)||Yn(!1),A=Z}else A=b;let M=A.pathname||"/",B=M;if(w!=="/"){let Z=w.replace(/^\//,"").split("/");B="/"+M.replace(/^\//,"").split("/").slice(Z.length).join("/")}let V=s4(e,{pathname:B}),j=O4(V&&V.map(Z=>Object.assign({},Z,{params:Object.assign({},o,Z.params),pathname:ql([w,c.encodeLocation?c.encodeLocation(Z.pathname).pathname:Z.pathname]),pathnameBase:Z.pathnameBase==="/"?w:ql([w,c.encodeLocation?c.encodeLocation(Z.pathnameBase).pathname:Z.pathnameBase])})),h,n,s);return t&&j?Y.createElement(ix.Provider,{value:{location:kp({pathname:"/",search:"",hash:"",state:null,key:"default"},A),navigationType:Dl.Pop}},j):j}function R4(){let e=V4(),t=T4(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,c={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},h=null;return Y.createElement(Y.Fragment,null,Y.createElement("h2",null,"Unexpected Application Error!"),Y.createElement("h3",{style:{fontStyle:"italic"}},t),n?Y.createElement("pre",{style:c},n):null,h)}const D4=Y.createElement(R4,null);class L4 extends Y.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?Y.createElement($o.Provider,{value:this.props.routeContext},Y.createElement(RM.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function z4(e){let{routeContext:t,match:n,children:s}=e,c=Y.useContext(rx);return c&&c.static&&c.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(c.staticContext._deepestRenderedBoundaryId=n.route.id),Y.createElement($o.Provider,{value:t},s)}function O4(e,t,n,s){var c;if(t===void 0&&(t=[]),n===void 0&&(n=null),s===void 0&&(s=null),e==null){var h;if((h=n)!=null&&h.errors)e=n.matches;else return null}let f=e,o=(c=n)==null?void 0:c.errors;if(o!=null){let A=f.findIndex(C=>C.route.id&&(o==null?void 0:o[C.route.id]));A>=0||Yn(!1),f=f.slice(0,Math.min(f.length,A+1))}let w=!1,b=-1;if(n&&s&&s.v7_partialHydration)for(let A=0;A<f.length;A++){let C=f[A];if((C.route.HydrateFallback||C.route.hydrateFallbackElement)&&(b=A),C.route.id){let{loaderData:M,errors:B}=n,V=C.route.loader&&M[C.route.id]===void 0&&(!B||B[C.route.id]===void 0);if(C.route.lazy||V){w=!0,b>=0?f=f.slice(0,b+1):f=[f[0]];break}}}return f.reduceRight((A,C,M)=>{let B,V=!1,j=null,Z=null;n&&(B=o&&C.route.id?o[C.route.id]:void 0,j=C.route.errorElement||D4,w&&(b<0&&M===0?($4("route-fallback",!1),V=!0,Z=null):b===M&&(V=!0,Z=C.route.hydrateFallbackElement||null)));let N=t.concat(f.slice(0,M+1)),F=()=>{let W;return B?W=j:V?W=Z:C.route.Component?W=Y.createElement(C.route.Component,null):C.route.element?W=C.route.element:W=A,Y.createElement(z4,{match:C,routeContext:{outlet:A,matches:N,isDataRoute:n!=null},children:W})};return n&&(C.route.ErrorBoundary||C.route.errorElement||M===0)?Y.createElement(L4,{location:n.location,revalidation:n.revalidation,component:j,error:B,children:F(),routeContext:{outlet:null,matches:N,isDataRoute:!0}}):F()},null)}var LM=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(LM||{}),Ky=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Ky||{});function F4(e){let t=Y.useContext(rx);return t||Yn(!1),t}function N4(e){let t=Y.useContext(MM);return t||Yn(!1),t}function B4(e){let t=Y.useContext($o);return t||Yn(!1),t}function zM(e){let t=B4(),n=t.matches[t.matches.length-1];return n.route.id||Yn(!1),n.route.id}function V4(){var e;let t=Y.useContext(RM),n=N4(Ky.UseRouteError),s=zM(Ky.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[s]}function j4(){let{router:e}=F4(LM.UseNavigateStable),t=zM(Ky.UseNavigateStable),n=Y.useRef(!1);return DM(()=>{n.current=!0}),Y.useCallback(function(c,h){h===void 0&&(h={}),n.current&&(typeof c=="number"?e.navigate(c):e.navigate(c,kp({fromRouteId:t},h)))},[e,t])}const aC={};function $4(e,t,n){!t&&!aC[e]&&(aC[e]=!0)}function U4(e){let{to:t,replace:n,state:s,relative:c}=e;fd()||Yn(!1);let{future:h,static:f}=Y.useContext(jo),{matches:o}=Y.useContext($o),{pathname:w}=pd(),b=sx(),A=jb(t,Vb(o,h.v7_relativeSplatPath),w,c==="path"),C=JSON.stringify(A);return Y.useEffect(()=>b(JSON.parse(C),{replace:n,state:s,relative:c}),[b,C,c,n,s]),null}function q4(e){return k4(e.context)}function pl(e){Yn(!1)}function G4(e){let{basename:t="/",children:n=null,location:s,navigationType:c=Dl.Pop,navigator:h,static:f=!1,future:o}=e;fd()&&Yn(!1);let w=t.replace(/^\/*/,"/"),b=Y.useMemo(()=>({basename:w,navigator:h,static:f,future:kp({v7_relativeSplatPath:!1},o)}),[w,o,h,f]);typeof s=="string"&&(s=dd(s));let{pathname:A="/",search:C="",hash:M="",state:B=null,key:V="default"}=s,j=Y.useMemo(()=>{let Z=td(A,w);return Z==null?null:{location:{pathname:Z,search:C,hash:M,state:B,key:V},navigationType:c}},[w,A,C,M,B,V,c]);return j==null?null:Y.createElement(jo.Provider,{value:b},Y.createElement(ix.Provider,{children:n,value:j}))}function Z4(e){let{children:t,location:n}=e;return I4(Nw(t),n)}new Promise(()=>{});function Nw(e,t){t===void 0&&(t=[]);let n=[];return Y.Children.forEach(e,(s,c)=>{if(!Y.isValidElement(s))return;let h=[...t,c];if(s.type===Y.Fragment){n.push.apply(n,Nw(s.props.children,h));return}s.type!==pl&&Yn(!1),!s.props.index||!s.props.children||Yn(!1);let f={id:s.props.id||h.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(f.children=Nw(s.props.children,h)),n.push(f)}),n}/**
 * React Router DOM v6.22.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Xy(){return Xy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Xy.apply(this,arguments)}function OM(e,t){if(e==null)return{};var n={},s=Object.keys(e),c,h;for(h=0;h<s.length;h++)c=s[h],!(t.indexOf(c)>=0)&&(n[c]=e[c]);return n}function W4(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function H4(e,t){return e.button===0&&(!t||t==="_self")&&!W4(e)}const K4=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],X4=["aria-current","caseSensitive","className","end","style","to","unstable_viewTransition","children"],Q4="6";try{window.__reactRouterVersion=Q4}catch{}const Y4=Y.createContext({isTransitioning:!1}),J4="startTransition",oC=lk[J4];function eB(e){let{basename:t,children:n,future:s,window:c}=e,h=Y.useRef();h.current==null&&(h.current=n4({window:c,v5Compat:!0}));let f=h.current,[o,w]=Y.useState({action:f.action,location:f.location}),{v7_startTransition:b}=s||{},A=Y.useCallback(C=>{b&&oC?oC(()=>w(C)):w(C)},[w,b]);return Y.useLayoutEffect(()=>f.listen(A),[f,A]),Y.createElement(G4,{basename:t,children:n,location:o.location,navigationType:o.action,navigator:f,future:s})}const tB=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",nB=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,rB=Y.forwardRef(function(t,n){let{onClick:s,relative:c,reloadDocument:h,replace:f,state:o,target:w,to:b,preventScrollReset:A,unstable_viewTransition:C}=t,M=OM(t,K4),{basename:B}=Y.useContext(jo),V,j=!1;if(typeof b=="string"&&nB.test(b)&&(V=b,tB))try{let W=new URL(window.location.href),Q=b.startsWith("//")?new URL(W.protocol+b):new URL(b),fe=td(Q.pathname,B);Q.origin===W.origin&&fe!=null?b=fe+Q.search+Q.hash:j=!0}catch{}let Z=C4(b,{relative:c}),N=sB(b,{replace:f,state:o,target:w,preventScrollReset:A,relative:c,unstable_viewTransition:C});function F(W){s&&s(W),W.defaultPrevented||N(W)}return Y.createElement("a",Xy({},M,{href:V||Z,onClick:j||h?s:F,ref:n,target:w}))}),$b=Y.forwardRef(function(t,n){let{"aria-current":s="page",caseSensitive:c=!1,className:h="",end:f=!1,style:o,to:w,unstable_viewTransition:b,children:A}=t,C=OM(t,X4),M=ax(w,{relative:C.relative}),B=pd(),V=Y.useContext(MM),{navigator:j,basename:Z}=Y.useContext(jo),N=V!=null&&aB(M)&&b===!0,F=j.encodeLocation?j.encodeLocation(M).pathname:M.pathname,W=B.pathname,Q=V&&V.navigation&&V.navigation.location?V.navigation.location.pathname:null;c||(W=W.toLowerCase(),Q=Q?Q.toLowerCase():null,F=F.toLowerCase()),Q&&Z&&(Q=td(Q,Z)||Q);const fe=F!=="/"&&F.endsWith("/")?F.length-1:F.length;let Ee=W===F||!f&&W.startsWith(F)&&W.charAt(fe)==="/",Re=Q!=null&&(Q===F||!f&&Q.startsWith(F)&&Q.charAt(F.length)==="/"),Te={isActive:Ee,isPending:Re,isTransitioning:N},Ne=Ee?s:void 0,ke;typeof h=="function"?ke=h(Te):ke=[h,Ee?"active":null,Re?"pending":null,N?"transitioning":null].filter(Boolean).join(" ");let ft=typeof o=="function"?o(Te):o;return Y.createElement(rB,Xy({},C,{"aria-current":Ne,className:ke,ref:n,style:ft,to:w,unstable_viewTransition:b}),typeof A=="function"?A(Te):A)});var Bw;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Bw||(Bw={}));var lC;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(lC||(lC={}));function iB(e){let t=Y.useContext(rx);return t||Yn(!1),t}function sB(e,t){let{target:n,replace:s,state:c,preventScrollReset:h,relative:f,unstable_viewTransition:o}=t===void 0?{}:t,w=sx(),b=pd(),A=ax(e,{relative:f});return Y.useCallback(C=>{if(H4(C,n)){C.preventDefault();let M=s!==void 0?s:Hy(b)===Hy(A);w(e,{replace:M,state:c,preventScrollReset:h,relative:f,unstable_viewTransition:o})}},[b,w,A,s,c,n,e,h,f,o])}function aB(e,t){t===void 0&&(t={});let n=Y.useContext(Y4);n==null&&Yn(!1);let{basename:s}=iB(Bw.useViewTransitionState),c=ax(e,{relative:t.relative});if(!n.isTransitioning)return!1;let h=td(n.currentLocation.pathname,s)||n.currentLocation.pathname,f=td(n.nextLocation.pathname,s)||n.nextLocation.pathname;return Fw(c.pathname,f)!=null||Fw(c.pathname,h)!=null}var md=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},hu=typeof window>"u"||"Deno"in globalThis;function Di(){}function oB(e,t){return typeof e=="function"?e(t):e}function Vw(e){return typeof e=="number"&&e>=0&&e!==1/0}function FM(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Gl(e,t){return typeof e=="function"?e(t):e}function Fs(e,t){return typeof e=="function"?e(t):e}function cC(e,t){const{type:n="all",exact:s,fetchStatus:c,predicate:h,queryKey:f,stale:o}=e;if(f){if(s){if(t.queryHash!==Ub(f,t.options))return!1}else if(!Ip(t.queryKey,f))return!1}if(n!=="all"){const w=t.isActive();if(n==="active"&&!w||n==="inactive"&&w)return!1}return!(typeof o=="boolean"&&t.isStale()!==o||c&&c!==t.state.fetchStatus||h&&!h(t))}function uC(e,t){const{exact:n,status:s,predicate:c,mutationKey:h}=e;if(h){if(!t.options.mutationKey)return!1;if(n){if(du(t.options.mutationKey)!==du(h))return!1}else if(!Ip(t.options.mutationKey,h))return!1}return!(s&&t.state.status!==s||c&&!c(t))}function Ub(e,t){return((t==null?void 0:t.queryKeyHashFn)||du)(e)}function du(e){return JSON.stringify(e,(t,n)=>jw(n)?Object.keys(n).sort().reduce((s,c)=>(s[c]=n[c],s),{}):n)}function Ip(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>Ip(e[n],t[n])):!1}function NM(e,t){if(e===t)return e;const n=hC(e)&&hC(t);if(n||jw(e)&&jw(t)){const s=n?e:Object.keys(e),c=s.length,h=n?t:Object.keys(t),f=h.length,o=n?[]:{},w=new Set(s);let b=0;for(let A=0;A<f;A++){const C=n?A:h[A];(!n&&w.has(C)||n)&&e[C]===void 0&&t[C]===void 0?(o[C]=void 0,b++):(o[C]=NM(e[C],t[C]),o[C]===e[C]&&e[C]!==void 0&&b++)}return c===f&&b===c?e:o}return t}function Qy(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function hC(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function jw(e){if(!dC(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!dC(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function dC(e){return Object.prototype.toString.call(e)==="[object Object]"}function lB(e){return new Promise(t=>{setTimeout(t,e)})}function $w(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?NM(e,t):t}function cB(e,t,n=0){const s=[...e,t];return n&&s.length>n?s.slice(1):s}function uB(e,t,n=0){const s=[t,...e];return n&&s.length>n?s.slice(0,-1):s}var qb=Symbol();function BM(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===qb?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function VM(e,t){return typeof e=="function"?e(...t):!!e}var Wc,bl,Dh,$A,hB=($A=class extends md{constructor(){super();kt(this,Wc,void 0);kt(this,bl,void 0);kt(this,Dh,void 0);_t(this,Dh,t=>{if(!hu&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){ge(this,bl)||this.setEventListener(ge(this,Dh))}onUnsubscribe(){var t;this.hasListeners()||((t=ge(this,bl))==null||t.call(this),_t(this,bl,void 0))}setEventListener(t){var n;_t(this,Dh,t),(n=ge(this,bl))==null||n.call(this),_t(this,bl,t(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()}))}setFocused(t){ge(this,Wc)!==t&&(_t(this,Wc,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof ge(this,Wc)=="boolean"?ge(this,Wc):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Wc=new WeakMap,bl=new WeakMap,Dh=new WeakMap,$A),Gb=new hB,Lh,Sl,zh,UA,dB=(UA=class extends md{constructor(){super();kt(this,Lh,!0);kt(this,Sl,void 0);kt(this,zh,void 0);_t(this,zh,t=>{if(!hu&&window.addEventListener){const n=()=>t(!0),s=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",s)}}})}onSubscribe(){ge(this,Sl)||this.setEventListener(ge(this,zh))}onUnsubscribe(){var t;this.hasListeners()||((t=ge(this,Sl))==null||t.call(this),_t(this,Sl,void 0))}setEventListener(t){var n;_t(this,zh,t),(n=ge(this,Sl))==null||n.call(this),_t(this,Sl,t(this.setOnline.bind(this)))}setOnline(t){ge(this,Lh)!==t&&(_t(this,Lh,t),this.listeners.forEach(s=>{s(t)}))}isOnline(){return ge(this,Lh)}},Lh=new WeakMap,Sl=new WeakMap,zh=new WeakMap,UA),Yy=new dB;function Uw(){let e,t;const n=new Promise((c,h)=>{e=c,t=h});n.status="pending",n.catch(()=>{});function s(c){Object.assign(n,c),delete n.resolve,delete n.reject}return n.resolve=c=>{s({status:"fulfilled",value:c}),e(c)},n.reject=c=>{s({status:"rejected",reason:c}),t(c)},n}function fB(e){return Math.min(1e3*2**e,3e4)}function jM(e){return(e??"online")==="online"?Yy.isOnline():!0}var $M=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function UM(e){let t=!1,n=0,s;const c=Uw(),h=()=>c.status!=="pending",f=j=>{var Z;h()||(M(new $M(j)),(Z=e.abort)==null||Z.call(e))},o=()=>{t=!0},w=()=>{t=!1},b=()=>Gb.isFocused()&&(e.networkMode==="always"||Yy.isOnline())&&e.canRun(),A=()=>jM(e.networkMode)&&e.canRun(),C=j=>{h()||(s==null||s(),c.resolve(j))},M=j=>{h()||(s==null||s(),c.reject(j))},B=()=>new Promise(j=>{var Z;s=N=>{(h()||b())&&j(N)},(Z=e.onPause)==null||Z.call(e)}).then(()=>{var j;s=void 0,h()||(j=e.onContinue)==null||j.call(e)}),V=()=>{if(h())return;let j;const Z=n===0?e.initialPromise:void 0;try{j=Z??e.fn()}catch(N){j=Promise.reject(N)}Promise.resolve(j).then(C).catch(N=>{var Ee;if(h())return;const F=e.retry??(hu?0:3),W=e.retryDelay??fB,Q=typeof W=="function"?W(n,N):W,fe=F===!0||typeof F=="number"&&n<F||typeof F=="function"&&F(n,N);if(t||!fe){M(N);return}n++,(Ee=e.onFail)==null||Ee.call(e,n,N),lB(Q).then(()=>b()?void 0:B()).then(()=>{t?M(N):V()})})};return{promise:c,status:()=>c.status,cancel:f,continue:()=>(s==null||s(),c),cancelRetry:o,continueRetry:w,canStart:A,start:()=>(A()?V():B().then(V),c)}}var pB=e=>setTimeout(e,0);function mB(){let e=[],t=0,n=o=>{o()},s=o=>{o()},c=pB;const h=o=>{t?e.push(o):c(()=>{n(o)})},f=()=>{const o=e;e=[],o.length&&c(()=>{s(()=>{o.forEach(w=>{n(w)})})})};return{batch:o=>{let w;t++;try{w=o()}finally{t--,t||f()}return w},batchCalls:o=>(...w)=>{h(()=>{o(...w)})},schedule:h,setNotifyFunction:o=>{n=o},setBatchNotifyFunction:o=>{s=o},setScheduler:o=>{c=o}}}var Cr=mB(),Hc,qA,qM=(qA=class{constructor(){kt(this,Hc,void 0)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Vw(this.gcTime)&&_t(this,Hc,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(hu?1/0:5*60*1e3))}clearGcTimeout(){ge(this,Hc)&&(clearTimeout(ge(this,Hc)),_t(this,Hc,void 0))}},Hc=new WeakMap,qA),Oh,Fh,Os,Kc,zr,$p,Xc,ua,go,GA,gB=(GA=class extends qM{constructor(t){super();kt(this,ua);kt(this,Oh,void 0);kt(this,Fh,void 0);kt(this,Os,void 0);kt(this,Kc,void 0);kt(this,zr,void 0);kt(this,$p,void 0);kt(this,Xc,void 0);_t(this,Xc,!1),_t(this,$p,t.defaultOptions),this.setOptions(t.options),this.observers=[],_t(this,Kc,t.client),_t(this,Os,ge(this,Kc).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,_t(this,Oh,yB(this.options)),this.state=t.state??ge(this,Oh),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=ge(this,zr))==null?void 0:t.promise}setOptions(t){this.options={...ge(this,$p),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&ge(this,Os).remove(this)}setData(t,n){const s=$w(this.state.data,t,this.options);return Qt(this,ua,go).call(this,{data:s,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),s}setState(t,n){Qt(this,ua,go).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var s,c;const n=(s=ge(this,zr))==null?void 0:s.promise;return(c=ge(this,zr))==null||c.cancel(t),n?n.then(Di).catch(Di):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(ge(this,Oh))}isActive(){return this.observers.some(t=>Fs(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===qb||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Gl(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!FM(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(s=>s.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=ge(this,zr))==null||n.continue()}onOnline(){var n;const t=this.observers.find(s=>s.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=ge(this,zr))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),ge(this,Os).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(ge(this,zr)&&(ge(this,Xc)?ge(this,zr).cancel({revert:!0}):ge(this,zr).cancelRetry()),this.scheduleGc()),ge(this,Os).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Qt(this,ua,go).call(this,{type:"invalidate"})}async fetch(t,n){var w,b,A,C,M,B,V,j,Z,N,F,W;if(this.state.fetchStatus!=="idle"&&((w=ge(this,zr))==null?void 0:w.status())!=="rejected"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(ge(this,zr))return ge(this,zr).continueRetry(),ge(this,zr).promise}if(t&&this.setOptions(t),!this.options.queryFn){const Q=this.observers.find(fe=>fe.options.queryFn);Q&&this.setOptions(Q.options)}const s=new AbortController,c=Q=>{Object.defineProperty(Q,"signal",{enumerable:!0,get:()=>(_t(this,Xc,!0),s.signal)})},h=()=>{const Q=BM(this.options,n),Ee=(()=>{const Re={client:ge(this,Kc),queryKey:this.queryKey,meta:this.meta};return c(Re),Re})();return _t(this,Xc,!1),this.options.persister?this.options.persister(Q,Ee,this):Q(Ee)},o=(()=>{const Q={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:ge(this,Kc),state:this.state,fetchFn:h};return c(Q),Q})();(b=this.options.behavior)==null||b.onFetch(o,this),_t(this,Fh,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((A=o.fetchOptions)==null?void 0:A.meta))&&Qt(this,ua,go).call(this,{type:"fetch",meta:(C=o.fetchOptions)==null?void 0:C.meta}),_t(this,zr,UM({initialPromise:n==null?void 0:n.initialPromise,fn:o.fetchFn,abort:s.abort.bind(s),onFail:(Q,fe)=>{Qt(this,ua,go).call(this,{type:"failed",failureCount:Q,error:fe})},onPause:()=>{Qt(this,ua,go).call(this,{type:"pause"})},onContinue:()=>{Qt(this,ua,go).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0}));try{const Q=await ge(this,zr).start();if(Q===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(Q),(B=(M=ge(this,Os).config).onSuccess)==null||B.call(M,Q,this),(j=(V=ge(this,Os).config).onSettled)==null||j.call(V,Q,this.state.error,this),Q}catch(Q){if(Q instanceof $M){if(Q.silent)return ge(this,zr).promise;if(Q.revert){if(this.setState({...ge(this,Fh),fetchStatus:"idle"}),this.state.data===void 0)throw Q;return this.state.data}}throw Qt(this,ua,go).call(this,{type:"error",error:Q}),(N=(Z=ge(this,Os).config).onError)==null||N.call(Z,Q,this),(W=(F=ge(this,Os).config).onSettled)==null||W.call(F,this.state.data,Q,this),Q}finally{this.scheduleGc()}}},Oh=new WeakMap,Fh=new WeakMap,Os=new WeakMap,Kc=new WeakMap,zr=new WeakMap,$p=new WeakMap,Xc=new WeakMap,ua=new WeakSet,go=function(t){const n=s=>{switch(t.type){case"failed":return{...s,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...GM(s.data,this.options),fetchMeta:t.meta??null};case"success":const c={...s,data:t.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return _t(this,Fh,t.manual?c:void 0),c;case"error":const h=t.error;return{...s,error:h,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:h,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...t.state}}};this.state=n(this.state),Cr.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),ge(this,Os).notify({query:this,type:"updated",action:t})})},GA);function GM(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:jM(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function yB(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,s=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Oa,ZA,vB=(ZA=class extends md{constructor(t={}){super();kt(this,Oa,void 0);this.config=t,_t(this,Oa,new Map)}build(t,n,s){const c=n.queryKey,h=n.queryHash??Ub(c,n);let f=this.get(h);return f||(f=new gB({client:t,queryKey:c,queryHash:h,options:t.defaultQueryOptions(n),state:s,defaultOptions:t.getQueryDefaults(c)}),this.add(f)),f}add(t){ge(this,Oa).has(t.queryHash)||(ge(this,Oa).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=ge(this,Oa).get(t.queryHash);n&&(t.destroy(),n===t&&ge(this,Oa).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Cr.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return ge(this,Oa).get(t)}getAll(){return[...ge(this,Oa).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(s=>cC(n,s))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(s=>cC(t,s)):n}notify(t){Cr.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){Cr.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Cr.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Oa=new WeakMap,ZA),Fa,Ii,Qc,Na,ml,WA,xB=(WA=class extends qM{constructor(t){super();kt(this,Na);kt(this,Fa,void 0);kt(this,Ii,void 0);kt(this,Qc,void 0);this.mutationId=t.mutationId,_t(this,Ii,t.mutationCache),_t(this,Fa,[]),this.state=t.state||ZM(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){ge(this,Fa).includes(t)||(ge(this,Fa).push(t),this.clearGcTimeout(),ge(this,Ii).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){_t(this,Fa,ge(this,Fa).filter(n=>n!==t)),this.scheduleGc(),ge(this,Ii).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){ge(this,Fa).length||(this.state.status==="pending"?this.scheduleGc():ge(this,Ii).remove(this))}continue(){var t;return((t=ge(this,Qc))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var h,f,o,w,b,A,C,M,B,V,j,Z,N,F,W,Q,fe,Ee,Re,Te;const n=()=>{Qt(this,Na,ml).call(this,{type:"continue"})};_t(this,Qc,UM({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(Ne,ke)=>{Qt(this,Na,ml).call(this,{type:"failed",failureCount:Ne,error:ke})},onPause:()=>{Qt(this,Na,ml).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>ge(this,Ii).canRun(this)}));const s=this.state.status==="pending",c=!ge(this,Qc).canStart();try{if(s)n();else{Qt(this,Na,ml).call(this,{type:"pending",variables:t,isPaused:c}),await((f=(h=ge(this,Ii).config).onMutate)==null?void 0:f.call(h,t,this));const ke=await((w=(o=this.options).onMutate)==null?void 0:w.call(o,t));ke!==this.state.context&&Qt(this,Na,ml).call(this,{type:"pending",context:ke,variables:t,isPaused:c})}const Ne=await ge(this,Qc).start();return await((A=(b=ge(this,Ii).config).onSuccess)==null?void 0:A.call(b,Ne,t,this.state.context,this)),await((M=(C=this.options).onSuccess)==null?void 0:M.call(C,Ne,t,this.state.context)),await((V=(B=ge(this,Ii).config).onSettled)==null?void 0:V.call(B,Ne,null,this.state.variables,this.state.context,this)),await((Z=(j=this.options).onSettled)==null?void 0:Z.call(j,Ne,null,t,this.state.context)),Qt(this,Na,ml).call(this,{type:"success",data:Ne}),Ne}catch(Ne){try{throw await((F=(N=ge(this,Ii).config).onError)==null?void 0:F.call(N,Ne,t,this.state.context,this)),await((Q=(W=this.options).onError)==null?void 0:Q.call(W,Ne,t,this.state.context)),await((Ee=(fe=ge(this,Ii).config).onSettled)==null?void 0:Ee.call(fe,void 0,Ne,this.state.variables,this.state.context,this)),await((Te=(Re=this.options).onSettled)==null?void 0:Te.call(Re,void 0,Ne,t,this.state.context)),Ne}finally{Qt(this,Na,ml).call(this,{type:"error",error:Ne})}}finally{ge(this,Ii).runNext(this)}}},Fa=new WeakMap,Ii=new WeakMap,Qc=new WeakMap,Na=new WeakSet,ml=function(t){const n=s=>{switch(t.type){case"failed":return{...s,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...s,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:t.error,failureCount:s.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Cr.batch(()=>{ge(this,Fa).forEach(s=>{s.onMutationUpdate(t)}),ge(this,Ii).notify({mutation:this,type:"updated",action:t})})},WA);function ZM(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var wo,ha,Up,HA,_B=(HA=class extends md{constructor(t={}){super();kt(this,wo,void 0);kt(this,ha,void 0);kt(this,Up,void 0);this.config=t,_t(this,wo,new Set),_t(this,ha,new Map),_t(this,Up,0)}build(t,n,s){const c=new xB({mutationCache:this,mutationId:++bg(this,Up)._,options:t.defaultMutationOptions(n),state:s});return this.add(c),c}add(t){ge(this,wo).add(t);const n=jg(t);if(typeof n=="string"){const s=ge(this,ha).get(n);s?s.push(t):ge(this,ha).set(n,[t])}this.notify({type:"added",mutation:t})}remove(t){if(ge(this,wo).delete(t)){const n=jg(t);if(typeof n=="string"){const s=ge(this,ha).get(n);if(s)if(s.length>1){const c=s.indexOf(t);c!==-1&&s.splice(c,1)}else s[0]===t&&ge(this,ha).delete(n)}}this.notify({type:"removed",mutation:t})}canRun(t){const n=jg(t);if(typeof n=="string"){const s=ge(this,ha).get(n),c=s==null?void 0:s.find(h=>h.state.status==="pending");return!c||c===t}else return!0}runNext(t){var s;const n=jg(t);if(typeof n=="string"){const c=(s=ge(this,ha).get(n))==null?void 0:s.find(h=>h!==t&&h.state.isPaused);return(c==null?void 0:c.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Cr.batch(()=>{ge(this,wo).forEach(t=>{this.notify({type:"removed",mutation:t})}),ge(this,wo).clear(),ge(this,ha).clear()})}getAll(){return Array.from(ge(this,wo))}find(t){const n={exact:!0,...t};return this.getAll().find(s=>uC(n,s))}findAll(t={}){return this.getAll().filter(n=>uC(t,n))}notify(t){Cr.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return Cr.batch(()=>Promise.all(t.map(n=>n.continue().catch(Di))))}},wo=new WeakMap,ha=new WeakMap,Up=new WeakMap,HA);function jg(e){var t;return(t=e.options.scope)==null?void 0:t.id}function fC(e){return{onFetch:(t,n)=>{var A,C,M,B,V;const s=t.options,c=(M=(C=(A=t.fetchOptions)==null?void 0:A.meta)==null?void 0:C.fetchMore)==null?void 0:M.direction,h=((B=t.state.data)==null?void 0:B.pages)||[],f=((V=t.state.data)==null?void 0:V.pageParams)||[];let o={pages:[],pageParams:[]},w=0;const b=async()=>{let j=!1;const Z=W=>{Object.defineProperty(W,"signal",{enumerable:!0,get:()=>(t.signal.aborted?j=!0:t.signal.addEventListener("abort",()=>{j=!0}),t.signal)})},N=BM(t.options,t.fetchOptions),F=async(W,Q,fe)=>{if(j)return Promise.reject();if(Q==null&&W.pages.length)return Promise.resolve(W);const Re=(()=>{const ft={client:t.client,queryKey:t.queryKey,pageParam:Q,direction:fe?"backward":"forward",meta:t.options.meta};return Z(ft),ft})(),Te=await N(Re),{maxPages:Ne}=t.options,ke=fe?uB:cB;return{pages:ke(W.pages,Te,Ne),pageParams:ke(W.pageParams,Q,Ne)}};if(c&&h.length){const W=c==="backward",Q=W?wB:pC,fe={pages:h,pageParams:f},Ee=Q(s,fe);o=await F(fe,Ee,W)}else{const W=e??h.length;do{const Q=w===0?f[0]??s.initialPageParam:pC(s,o);if(w>0&&Q==null)break;o=await F(o,Q),w++}while(w<W)}return o};t.options.persister?t.fetchFn=()=>{var j,Z;return(Z=(j=t.options).persister)==null?void 0:Z.call(j,b,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=b}}}function pC(e,{pages:t,pageParams:n}){const s=t.length-1;return t.length>0?e.getNextPageParam(t[s],t,n[s],n):void 0}function wB(e,{pages:t,pageParams:n}){var s;return t.length>0?(s=e.getPreviousPageParam)==null?void 0:s.call(e,t[0],t,n[0],n):void 0}var rr,Tl,El,Nh,Bh,Cl,Vh,jh,KA,bB=(KA=class{constructor(e={}){kt(this,rr,void 0);kt(this,Tl,void 0);kt(this,El,void 0);kt(this,Nh,void 0);kt(this,Bh,void 0);kt(this,Cl,void 0);kt(this,Vh,void 0);kt(this,jh,void 0);_t(this,rr,e.queryCache||new vB),_t(this,Tl,e.mutationCache||new _B),_t(this,El,e.defaultOptions||{}),_t(this,Nh,new Map),_t(this,Bh,new Map),_t(this,Cl,0)}mount(){bg(this,Cl)._++,ge(this,Cl)===1&&(_t(this,Vh,Gb.subscribe(async e=>{e&&(await this.resumePausedMutations(),ge(this,rr).onFocus())})),_t(this,jh,Yy.subscribe(async e=>{e&&(await this.resumePausedMutations(),ge(this,rr).onOnline())})))}unmount(){var e,t;bg(this,Cl)._--,ge(this,Cl)===0&&((e=ge(this,Vh))==null||e.call(this),_t(this,Vh,void 0),(t=ge(this,jh))==null||t.call(this),_t(this,jh,void 0))}isFetching(e){return ge(this,rr).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return ge(this,Tl).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=ge(this,rr).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=ge(this,rr).build(this,t),s=n.state.data;return s===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(Gl(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(s))}getQueriesData(e){return ge(this,rr).findAll(e).map(({queryKey:t,state:n})=>{const s=n.data;return[t,s]})}setQueryData(e,t,n){const s=this.defaultQueryOptions({queryKey:e}),c=ge(this,rr).get(s.queryHash),h=c==null?void 0:c.state.data,f=oB(t,h);if(f!==void 0)return ge(this,rr).build(this,s).setData(f,{...n,manual:!0})}setQueriesData(e,t,n){return Cr.batch(()=>ge(this,rr).findAll(e).map(({queryKey:s})=>[s,this.setQueryData(s,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=ge(this,rr).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=ge(this,rr);Cr.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=ge(this,rr);return Cr.batch(()=>(n.findAll(e).forEach(s=>{s.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},s=Cr.batch(()=>ge(this,rr).findAll(e).map(c=>c.cancel(n)));return Promise.all(s).then(Di).catch(Di)}invalidateQueries(e,t={}){return Cr.batch(()=>(ge(this,rr).findAll(e).forEach(n=>{n.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},s=Cr.batch(()=>ge(this,rr).findAll(e).filter(c=>!c.isDisabled()&&!c.isStatic()).map(c=>{let h=c.fetch(void 0,n);return n.throwOnError||(h=h.catch(Di)),c.state.fetchStatus==="paused"?Promise.resolve():h}));return Promise.all(s).then(Di)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=ge(this,rr).build(this,t);return n.isStaleByTime(Gl(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Di).catch(Di)}fetchInfiniteQuery(e){return e.behavior=fC(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Di).catch(Di)}ensureInfiniteQueryData(e){return e.behavior=fC(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Yy.isOnline()?ge(this,Tl).resumePausedMutations():Promise.resolve()}getQueryCache(){return ge(this,rr)}getMutationCache(){return ge(this,Tl)}getDefaultOptions(){return ge(this,El)}setDefaultOptions(e){_t(this,El,e)}setQueryDefaults(e,t){ge(this,Nh).set(du(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...ge(this,Nh).values()],n={};return t.forEach(s=>{Ip(e,s.queryKey)&&Object.assign(n,s.defaultOptions)}),n}setMutationDefaults(e,t){ge(this,Bh).set(du(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...ge(this,Bh).values()],n={};return t.forEach(s=>{Ip(e,s.mutationKey)&&Object.assign(n,s.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...ge(this,El).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Ub(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===qb&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...ge(this,El).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){ge(this,rr).clear(),ge(this,Tl).clear()}},rr=new WeakMap,Tl=new WeakMap,El=new WeakMap,Nh=new WeakMap,Bh=new WeakMap,Cl=new WeakMap,Vh=new WeakMap,jh=new WeakMap,KA),Xi,an,qp,Mi,Yc,$h,bo,Pl,Gp,Uh,qh,Jc,eu,Al,Gh,tu,Gf,Zp,qw,Wp,Gw,Hp,Zw,Kp,Ww,Xp,Hw,Qp,Kw,Yp,Xw,xv,WM,XA,SB=(XA=class extends md{constructor(t,n){super();kt(this,tu);kt(this,Zp);kt(this,Wp);kt(this,Hp);kt(this,Kp);kt(this,Xp);kt(this,Qp);kt(this,Yp);kt(this,xv);kt(this,Xi,void 0);kt(this,an,void 0);kt(this,qp,void 0);kt(this,Mi,void 0);kt(this,Yc,void 0);kt(this,$h,void 0);kt(this,bo,void 0);kt(this,Pl,void 0);kt(this,Gp,void 0);kt(this,Uh,void 0);kt(this,qh,void 0);kt(this,Jc,void 0);kt(this,eu,void 0);kt(this,Al,void 0);kt(this,Gh,new Set);this.options=n,_t(this,Xi,t),_t(this,Pl,null),_t(this,bo,Uw()),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(ge(this,an).addObserver(this),mC(ge(this,an),this.options)?Qt(this,tu,Gf).call(this):this.updateResult(),Qt(this,Kp,Ww).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Qw(ge(this,an),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Qw(ge(this,an),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Qt(this,Xp,Hw).call(this),Qt(this,Qp,Kw).call(this),ge(this,an).removeObserver(this)}setOptions(t){const n=this.options,s=ge(this,an);if(this.options=ge(this,Xi).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Fs(this.options.enabled,ge(this,an))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Qt(this,Yp,Xw).call(this),ge(this,an).setOptions(this.options),n._defaulted&&!Qy(this.options,n)&&ge(this,Xi).getQueryCache().notify({type:"observerOptionsUpdated",query:ge(this,an),observer:this});const c=this.hasListeners();c&&gC(ge(this,an),s,this.options,n)&&Qt(this,tu,Gf).call(this),this.updateResult(),c&&(ge(this,an)!==s||Fs(this.options.enabled,ge(this,an))!==Fs(n.enabled,ge(this,an))||Gl(this.options.staleTime,ge(this,an))!==Gl(n.staleTime,ge(this,an)))&&Qt(this,Zp,qw).call(this);const h=Qt(this,Wp,Gw).call(this);c&&(ge(this,an)!==s||Fs(this.options.enabled,ge(this,an))!==Fs(n.enabled,ge(this,an))||h!==ge(this,Al))&&Qt(this,Hp,Zw).call(this,h)}getOptimisticResult(t){const n=ge(this,Xi).getQueryCache().build(ge(this,Xi),t),s=this.createResult(n,t);return EB(this,s)&&(_t(this,Mi,s),_t(this,$h,this.options),_t(this,Yc,ge(this,an).state)),s}getCurrentResult(){return ge(this,Mi)}trackResult(t,n){return new Proxy(t,{get:(s,c)=>(this.trackProp(c),n==null||n(c),c==="promise"&&!this.options.experimental_prefetchInRender&&ge(this,bo).status==="pending"&&ge(this,bo).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(s,c))})}trackProp(t){ge(this,Gh).add(t)}getCurrentQuery(){return ge(this,an)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const n=ge(this,Xi).defaultQueryOptions(t),s=ge(this,Xi).getQueryCache().build(ge(this,Xi),n);return s.fetch().then(()=>this.createResult(s,n))}fetch(t){return Qt(this,tu,Gf).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),ge(this,Mi)))}createResult(t,n){var Ne;const s=ge(this,an),c=this.options,h=ge(this,Mi),f=ge(this,Yc),o=ge(this,$h),b=t!==s?t.state:ge(this,qp),{state:A}=t;let C={...A},M=!1,B;if(n._optimisticResults){const ke=this.hasListeners(),ft=!ke&&mC(t,n),je=ke&&gC(t,s,n,c);(ft||je)&&(C={...C,...GM(A.data,t.options)}),n._optimisticResults==="isRestoring"&&(C.fetchStatus="idle")}let{error:V,errorUpdatedAt:j,status:Z}=C;B=C.data;let N=!1;if(n.placeholderData!==void 0&&B===void 0&&Z==="pending"){let ke;h!=null&&h.isPlaceholderData&&n.placeholderData===(o==null?void 0:o.placeholderData)?(ke=h.data,N=!0):ke=typeof n.placeholderData=="function"?n.placeholderData((Ne=ge(this,qh))==null?void 0:Ne.state.data,ge(this,qh)):n.placeholderData,ke!==void 0&&(Z="success",B=$w(h==null?void 0:h.data,ke,n),M=!0)}if(n.select&&B!==void 0&&!N)if(h&&B===(f==null?void 0:f.data)&&n.select===ge(this,Gp))B=ge(this,Uh);else try{_t(this,Gp,n.select),B=n.select(B),B=$w(h==null?void 0:h.data,B,n),_t(this,Uh,B),_t(this,Pl,null)}catch(ke){_t(this,Pl,ke)}ge(this,Pl)&&(V=ge(this,Pl),B=ge(this,Uh),j=Date.now(),Z="error");const F=C.fetchStatus==="fetching",W=Z==="pending",Q=Z==="error",fe=W&&F,Ee=B!==void 0,Te={status:Z,fetchStatus:C.fetchStatus,isPending:W,isSuccess:Z==="success",isError:Q,isInitialLoading:fe,isLoading:fe,data:B,dataUpdatedAt:C.dataUpdatedAt,error:V,errorUpdatedAt:j,failureCount:C.fetchFailureCount,failureReason:C.fetchFailureReason,errorUpdateCount:C.errorUpdateCount,isFetched:C.dataUpdateCount>0||C.errorUpdateCount>0,isFetchedAfterMount:C.dataUpdateCount>b.dataUpdateCount||C.errorUpdateCount>b.errorUpdateCount,isFetching:F,isRefetching:F&&!W,isLoadingError:Q&&!Ee,isPaused:C.fetchStatus==="paused",isPlaceholderData:M,isRefetchError:Q&&Ee,isStale:Zb(t,n),refetch:this.refetch,promise:ge(this,bo),isEnabled:Fs(n.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const ke=st=>{Te.status==="error"?st.reject(Te.error):Te.data!==void 0&&st.resolve(Te.data)},ft=()=>{const st=_t(this,bo,Te.promise=Uw());ke(st)},je=ge(this,bo);switch(je.status){case"pending":t.queryHash===s.queryHash&&ke(je);break;case"fulfilled":(Te.status==="error"||Te.data!==je.value)&&ft();break;case"rejected":(Te.status!=="error"||Te.error!==je.reason)&&ft();break}}return Te}updateResult(){const t=ge(this,Mi),n=this.createResult(ge(this,an),this.options);if(_t(this,Yc,ge(this,an).state),_t(this,$h,this.options),ge(this,Yc).data!==void 0&&_t(this,qh,ge(this,an)),Qy(n,t))return;_t(this,Mi,n);const s=()=>{if(!t)return!0;const{notifyOnChangeProps:c}=this.options,h=typeof c=="function"?c():c;if(h==="all"||!h&&!ge(this,Gh).size)return!0;const f=new Set(h??ge(this,Gh));return this.options.throwOnError&&f.add("error"),Object.keys(ge(this,Mi)).some(o=>{const w=o;return ge(this,Mi)[w]!==t[w]&&f.has(w)})};Qt(this,xv,WM).call(this,{listeners:s()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Qt(this,Kp,Ww).call(this)}},Xi=new WeakMap,an=new WeakMap,qp=new WeakMap,Mi=new WeakMap,Yc=new WeakMap,$h=new WeakMap,bo=new WeakMap,Pl=new WeakMap,Gp=new WeakMap,Uh=new WeakMap,qh=new WeakMap,Jc=new WeakMap,eu=new WeakMap,Al=new WeakMap,Gh=new WeakMap,tu=new WeakSet,Gf=function(t){Qt(this,Yp,Xw).call(this);let n=ge(this,an).fetch(this.options,t);return t!=null&&t.throwOnError||(n=n.catch(Di)),n},Zp=new WeakSet,qw=function(){Qt(this,Xp,Hw).call(this);const t=Gl(this.options.staleTime,ge(this,an));if(hu||ge(this,Mi).isStale||!Vw(t))return;const s=FM(ge(this,Mi).dataUpdatedAt,t)+1;_t(this,Jc,setTimeout(()=>{ge(this,Mi).isStale||this.updateResult()},s))},Wp=new WeakSet,Gw=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(ge(this,an)):this.options.refetchInterval)??!1},Hp=new WeakSet,Zw=function(t){Qt(this,Qp,Kw).call(this),_t(this,Al,t),!(hu||Fs(this.options.enabled,ge(this,an))===!1||!Vw(ge(this,Al))||ge(this,Al)===0)&&_t(this,eu,setInterval(()=>{(this.options.refetchIntervalInBackground||Gb.isFocused())&&Qt(this,tu,Gf).call(this)},ge(this,Al)))},Kp=new WeakSet,Ww=function(){Qt(this,Zp,qw).call(this),Qt(this,Hp,Zw).call(this,Qt(this,Wp,Gw).call(this))},Xp=new WeakSet,Hw=function(){ge(this,Jc)&&(clearTimeout(ge(this,Jc)),_t(this,Jc,void 0))},Qp=new WeakSet,Kw=function(){ge(this,eu)&&(clearInterval(ge(this,eu)),_t(this,eu,void 0))},Yp=new WeakSet,Xw=function(){const t=ge(this,Xi).getQueryCache().build(ge(this,Xi),this.options);if(t===ge(this,an))return;const n=ge(this,an);_t(this,an,t),_t(this,qp,t.state),this.hasListeners()&&(n==null||n.removeObserver(this),t.addObserver(this))},xv=new WeakSet,WM=function(t){Cr.batch(()=>{t.listeners&&this.listeners.forEach(n=>{n(ge(this,Mi))}),ge(this,Xi).getQueryCache().notify({query:ge(this,an),type:"observerResultsUpdated"})})},XA);function TB(e,t){return Fs(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function mC(e,t){return TB(e,t)||e.state.data!==void 0&&Qw(e,t,t.refetchOnMount)}function Qw(e,t,n){if(Fs(t.enabled,e)!==!1&&Gl(t.staleTime,e)!=="static"){const s=typeof n=="function"?n(e):n;return s==="always"||s!==!1&&Zb(e,t)}return!1}function gC(e,t,n,s){return(e!==t||Fs(s.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&Zb(e,n)}function Zb(e,t){return Fs(t.enabled,e)!==!1&&e.isStaleByTime(Gl(t.staleTime,e))}function EB(e,t){return!Qy(e.getCurrentResult(),t)}var kl,Il,Qi,So,Zh,ly,Jp,Yw,QA,CB=(QA=class extends md{constructor(n,s){super();kt(this,Zh);kt(this,Jp);kt(this,kl,void 0);kt(this,Il,void 0);kt(this,Qi,void 0);kt(this,So,void 0);_t(this,kl,n),this.setOptions(s),this.bindMethods(),Qt(this,Zh,ly).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var c;const s=this.options;this.options=ge(this,kl).defaultMutationOptions(n),Qy(this.options,s)||ge(this,kl).getMutationCache().notify({type:"observerOptionsUpdated",mutation:ge(this,Qi),observer:this}),s!=null&&s.mutationKey&&this.options.mutationKey&&du(s.mutationKey)!==du(this.options.mutationKey)?this.reset():((c=ge(this,Qi))==null?void 0:c.state.status)==="pending"&&ge(this,Qi).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=ge(this,Qi))==null||n.removeObserver(this)}onMutationUpdate(n){Qt(this,Zh,ly).call(this),Qt(this,Jp,Yw).call(this,n)}getCurrentResult(){return ge(this,Il)}reset(){var n;(n=ge(this,Qi))==null||n.removeObserver(this),_t(this,Qi,void 0),Qt(this,Zh,ly).call(this),Qt(this,Jp,Yw).call(this)}mutate(n,s){var c;return _t(this,So,s),(c=ge(this,Qi))==null||c.removeObserver(this),_t(this,Qi,ge(this,kl).getMutationCache().build(ge(this,kl),this.options)),ge(this,Qi).addObserver(this),ge(this,Qi).execute(n)}},kl=new WeakMap,Il=new WeakMap,Qi=new WeakMap,So=new WeakMap,Zh=new WeakSet,ly=function(){var s;const n=((s=ge(this,Qi))==null?void 0:s.state)??ZM();_t(this,Il,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},Jp=new WeakSet,Yw=function(n){Cr.batch(()=>{var s,c,h,f,o,w,b,A;if(ge(this,So)&&this.hasListeners()){const C=ge(this,Il).variables,M=ge(this,Il).context;(n==null?void 0:n.type)==="success"?((c=(s=ge(this,So)).onSuccess)==null||c.call(s,n.data,C,M),(f=(h=ge(this,So)).onSettled)==null||f.call(h,n.data,null,C,M)):(n==null?void 0:n.type)==="error"&&((w=(o=ge(this,So)).onError)==null||w.call(o,n.error,C,M),(A=(b=ge(this,So)).onSettled)==null||A.call(b,void 0,n.error,C,M))}this.listeners.forEach(C=>{C(ge(this,Il))})})},QA),HM=Y.createContext(void 0),KM=e=>{const t=Y.useContext(HM);if(e)return e;if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},PB=({client:e,children:t})=>(Y.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),K(HM.Provider,{value:e,children:t})),XM=Y.createContext(!1),AB=()=>Y.useContext(XM);XM.Provider;function kB(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var IB=Y.createContext(kB()),MB=()=>Y.useContext(IB),RB=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},DB=e=>{Y.useEffect(()=>{e.clearReset()},[e])},LB=({result:e,errorResetBoundary:t,throwOnError:n,query:s,suspense:c})=>e.isError&&!t.isReset()&&!e.isFetching&&s&&(c&&e.data===void 0||VM(n,[e.error,s])),zB=e=>{if(e.suspense){const t=s=>s==="static"?s:Math.max(s??1e3,1e3),n=e.staleTime;e.staleTime=typeof n=="function"?(...s)=>t(n(...s)):t(n),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},OB=(e,t)=>e.isLoading&&e.isFetching&&!t,FB=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,yC=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function NB(e,t,n){var C,M,B,V,j;const s=AB(),c=MB(),h=KM(n),f=h.defaultQueryOptions(e);(M=(C=h.getDefaultOptions().queries)==null?void 0:C._experimental_beforeQuery)==null||M.call(C,f),f._optimisticResults=s?"isRestoring":"optimistic",zB(f),RB(f,c),DB(c);const o=!h.getQueryCache().get(f.queryHash),[w]=Y.useState(()=>new t(h,f)),b=w.getOptimisticResult(f),A=!s&&e.subscribed!==!1;if(Y.useSyncExternalStore(Y.useCallback(Z=>{const N=A?w.subscribe(Cr.batchCalls(Z)):Di;return w.updateResult(),N},[w,A]),()=>w.getCurrentResult(),()=>w.getCurrentResult()),Y.useEffect(()=>{w.setOptions(f)},[f,w]),FB(f,b))throw yC(f,w,c);if(LB({result:b,errorResetBoundary:c,throwOnError:f.throwOnError,query:h.getQueryCache().get(f.queryHash),suspense:f.suspense}))throw b.error;if((V=(B=h.getDefaultOptions().queries)==null?void 0:B._experimental_afterQuery)==null||V.call(B,f,b),f.experimental_prefetchInRender&&!hu&&OB(b,s)){const Z=o?yC(f,w,c):(j=h.getQueryCache().get(f.queryHash))==null?void 0:j.promise;Z==null||Z.catch(Di).finally(()=>{w.updateResult()})}return f.notifyOnChangeProps?b:w.trackResult(b)}function BB(e,t){return NB(e,SB,t)}function VB(e,t){const n=KM(t),[s]=Y.useState(()=>new CB(n,e));Y.useEffect(()=>{s.setOptions(e)},[s,e]);const c=Y.useSyncExternalStore(Y.useCallback(f=>s.subscribe(Cr.batchCalls(f)),[s]),()=>s.getCurrentResult(),()=>s.getCurrentResult()),h=Y.useCallback((f,o)=>{s.mutate(f,o).catch(Di)},[s]);if(c.error&&VM(s.options.throwOnError,[c.error]))throw c.error;return{...c,mutate:h,mutateAsync:c.mutate}}function cy(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?cy=function(n){return typeof n}:cy=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},cy(e)}function jB(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vC(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function $B(e,t,n){return t&&vC(e.prototype,t),n&&vC(e,n),e}function UB(e,t){return t&&(cy(t)==="object"||typeof t=="function")?t:uy(e)}function Jw(e){return Jw=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Jw(e)}function uy(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qB(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&e1(e,t)}function e1(e,t){return e1=Object.setPrototypeOf||function(s,c){return s.__proto__=c,s},e1(e,t)}function hy(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var QM=function(e){qB(t,e);function t(){var n,s;jB(this,t);for(var c=arguments.length,h=new Array(c),f=0;f<c;f++)h[f]=arguments[f];return s=UB(this,(n=Jw(t)).call.apply(n,[this].concat(h))),hy(uy(s),"state",{bootstrapped:!1}),hy(uy(s),"_unsubscribe",void 0),hy(uy(s),"handlePersistorState",function(){var o=s.props.persistor,w=o.getState(),b=w.bootstrapped;b&&(s.props.onBeforeLift?Promise.resolve(s.props.onBeforeLift()).finally(function(){return s.setState({bootstrapped:!0})}):s.setState({bootstrapped:!0}),s._unsubscribe&&s._unsubscribe())}),s}return $B(t,[{key:"componentDidMount",value:function(){this._unsubscribe=this.props.persistor.subscribe(this.handlePersistorState),this.handlePersistorState()}},{key:"componentWillUnmount",value:function(){this._unsubscribe&&this._unsubscribe()}},{key:"render",value:function(){return typeof this.props.children=="function"?this.props.children(this.state.bootstrapped):this.state.bootstrapped?this.props.children:this.props.loading}}]),t}(Y.PureComponent);hy(QM,"defaultProps",{children:null,loading:null});function ma(e){for(var t=arguments.length,n=Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(c){return"'"+c+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Ql(e){return!!e&&!!e[qn]}function Bo(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var s=Object.getPrototypeOf(n);if(s===null)return!0;var c=Object.hasOwnProperty.call(s,"constructor")&&s.constructor;return c===Object||typeof c=="function"&&Function.toString.call(c)===JB}(e)||Array.isArray(e)||!!e[EC]||!!(!((t=e.constructor)===null||t===void 0)&&t[EC])||Wb(e)||Hb(e))}function fu(e,t,n){n===void 0&&(n=!1),gd(e)===0?(n?Object.keys:Mh)(e).forEach(function(s){n&&typeof s=="symbol"||t(s,e[s],e)}):e.forEach(function(s,c){return t(c,s,e)})}function gd(e){var t=e[qn];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:Wb(e)?2:Hb(e)?3:0}function Ih(e,t){return gd(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function GB(e,t){return gd(e)===2?e.get(t):e[t]}function YM(e,t,n){var s=gd(e);s===2?e.set(t,n):s===3?e.add(n):e[t]=n}function JM(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function Wb(e){return QB&&e instanceof Map}function Hb(e){return YB&&e instanceof Set}function Dc(e){return e.o||e.t}function Kb(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=tR(e);delete t[qn];for(var n=Mh(t),s=0;s<n.length;s++){var c=n[s],h=t[c];h.writable===!1&&(h.writable=!0,h.configurable=!0),(h.get||h.set)&&(t[c]={configurable:!0,writable:!0,enumerable:h.enumerable,value:e[c]})}return Object.create(Object.getPrototypeOf(e),t)}function Xb(e,t){return t===void 0&&(t=!1),Qb(e)||Ql(e)||!Bo(e)||(gd(e)>1&&(e.set=e.add=e.clear=e.delete=ZB),Object.freeze(e),t&&fu(e,function(n,s){return Xb(s,!0)},!0)),e}function ZB(){ma(2)}function Qb(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function qa(e){var t=i1[e];return t||ma(18,e),t}function WB(e,t){i1[e]||(i1[e]=t)}function t1(){return Mp}function c0(e,t){t&&(qa("Patches"),e.u=[],e.s=[],e.v=t)}function Jy(e){n1(e),e.p.forEach(HB),e.p=null}function n1(e){e===Mp&&(Mp=e.l)}function xC(e){return Mp={p:[],l:Mp,h:e,m:!0,_:0}}function HB(e){var t=e[qn];t.i===0||t.i===1?t.j():t.g=!0}function u0(e,t){t._=t.p.length;var n=t.p[0],s=e!==void 0&&e!==n;return t.h.O||qa("ES5").S(t,e,s),s?(n[qn].P&&(Jy(t),ma(4)),Bo(e)&&(e=ev(t,e),t.l||tv(t,e)),t.u&&qa("Patches").M(n[qn].t,e,t.u,t.s)):e=ev(t,n,[]),Jy(t),t.u&&t.v(t.u,t.s),e!==eR?e:void 0}function ev(e,t,n){if(Qb(t))return t;var s=t[qn];if(!s)return fu(t,function(o,w){return _C(e,s,t,o,w,n)},!0),t;if(s.A!==e)return t;if(!s.P)return tv(e,s.t,!0),s.t;if(!s.I){s.I=!0,s.A._--;var c=s.i===4||s.i===5?s.o=Kb(s.k):s.o,h=c,f=!1;s.i===3&&(h=new Set(c),c.clear(),f=!0),fu(h,function(o,w){return _C(e,s,c,o,w,n,f)}),tv(e,c,!1),n&&e.u&&qa("Patches").N(s,n,e.u,e.s)}return s.o}function _C(e,t,n,s,c,h,f){if(Ql(c)){var o=ev(e,c,h&&t&&t.i!==3&&!Ih(t.R,s)?h.concat(s):void 0);if(YM(n,s,o),!Ql(o))return;e.m=!1}else f&&n.add(c);if(Bo(c)&&!Qb(c)){if(!e.h.D&&e._<1)return;ev(e,c),t&&t.A.l||tv(e,c)}}function tv(e,t,n){n===void 0&&(n=!1),!e.l&&e.h.D&&e.m&&Xb(t,n)}function h0(e,t){var n=e[qn];return(n?Dc(n):e)[t]}function wC(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var s=Object.getOwnPropertyDescriptor(n,t);if(s)return s;n=Object.getPrototypeOf(n)}}function wl(e){e.P||(e.P=!0,e.l&&wl(e.l))}function d0(e){e.o||(e.o=Kb(e.t))}function r1(e,t,n){var s=Wb(t)?qa("MapSet").F(t,n):Hb(t)?qa("MapSet").T(t,n):e.O?function(c,h){var f=Array.isArray(c),o={i:f?1:0,A:h?h.A:t1(),P:!1,I:!1,R:{},l:h,t:c,k:null,o:null,j:null,C:!1},w=o,b=Rp;f&&(w=[o],b=Zf);var A=Proxy.revocable(w,b),C=A.revoke,M=A.proxy;return o.k=M,o.j=C,M}(t,n):qa("ES5").J(t,n);return(n?n.A:t1()).p.push(s),s}function KB(e){return Ql(e)||ma(22,e),function t(n){if(!Bo(n))return n;var s,c=n[qn],h=gd(n);if(c){if(!c.P&&(c.i<4||!qa("ES5").K(c)))return c.t;c.I=!0,s=bC(n,h),c.I=!1}else s=bC(n,h);return fu(s,function(f,o){c&&GB(c.t,f)===o||YM(s,f,t(o))}),h===3?new Set(s):s}(e)}function bC(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return Kb(e)}function XB(){function e(h,f){var o=c[h];return o?o.enumerable=f:c[h]=o={configurable:!0,enumerable:f,get:function(){var w=this[qn];return Rp.get(w,h)},set:function(w){var b=this[qn];Rp.set(b,h,w)}},o}function t(h){for(var f=h.length-1;f>=0;f--){var o=h[f][qn];if(!o.P)switch(o.i){case 5:s(o)&&wl(o);break;case 4:n(o)&&wl(o)}}}function n(h){for(var f=h.t,o=h.k,w=Mh(o),b=w.length-1;b>=0;b--){var A=w[b];if(A!==qn){var C=f[A];if(C===void 0&&!Ih(f,A))return!0;var M=o[A],B=M&&M[qn];if(B?B.t!==C:!JM(M,C))return!0}}var V=!!f[qn];return w.length!==Mh(f).length+(V?0:1)}function s(h){var f=h.k;if(f.length!==h.t.length)return!0;var o=Object.getOwnPropertyDescriptor(f,f.length-1);if(o&&!o.get)return!0;for(var w=0;w<f.length;w++)if(!f.hasOwnProperty(w))return!0;return!1}var c={};WB("ES5",{J:function(h,f){var o=Array.isArray(h),w=function(A,C){if(A){for(var M=Array(C.length),B=0;B<C.length;B++)Object.defineProperty(M,""+B,e(B,!0));return M}var V=tR(C);delete V[qn];for(var j=Mh(V),Z=0;Z<j.length;Z++){var N=j[Z];V[N]=e(N,A||!!V[N].enumerable)}return Object.create(Object.getPrototypeOf(C),V)}(o,h),b={i:o?5:4,A:f?f.A:t1(),P:!1,I:!1,R:{},l:f,t:h,k:w,o:null,g:!1,C:!1};return Object.defineProperty(w,qn,{value:b,writable:!0}),w},S:function(h,f,o){o?Ql(f)&&f[qn].A===h&&t(h.p):(h.u&&function w(b){if(b&&typeof b=="object"){var A=b[qn];if(A){var C=A.t,M=A.k,B=A.R,V=A.i;if(V===4)fu(M,function(W){W!==qn&&(C[W]!==void 0||Ih(C,W)?B[W]||w(M[W]):(B[W]=!0,wl(A)))}),fu(C,function(W){M[W]!==void 0||Ih(M,W)||(B[W]=!1,wl(A))});else if(V===5){if(s(A)&&(wl(A),B.length=!0),M.length<C.length)for(var j=M.length;j<C.length;j++)B[j]=!1;else for(var Z=C.length;Z<M.length;Z++)B[Z]=!0;for(var N=Math.min(M.length,C.length),F=0;F<N;F++)M.hasOwnProperty(F)||(B[F]=!0),B[F]===void 0&&w(M[F])}}}}(h.p[0]),t(h.p))},K:function(h){return h.i===4?n(h):s(h)}})}var SC,Mp,Yb=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",QB=typeof Map<"u",YB=typeof Set<"u",TC=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",eR=Yb?Symbol.for("immer-nothing"):((SC={})["immer-nothing"]=!0,SC),EC=Yb?Symbol.for("immer-draftable"):"__$immer_draftable",qn=Yb?Symbol.for("immer-state"):"__$immer_state",JB=""+Object.prototype.constructor,Mh=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,tR=Object.getOwnPropertyDescriptors||function(e){var t={};return Mh(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},i1={},Rp={get:function(e,t){if(t===qn)return e;var n=Dc(e);if(!Ih(n,t))return function(c,h,f){var o,w=wC(h,f);return w?"value"in w?w.value:(o=w.get)===null||o===void 0?void 0:o.call(c.k):void 0}(e,n,t);var s=n[t];return e.I||!Bo(s)?s:s===h0(e.t,t)?(d0(e),e.o[t]=r1(e.A.h,s,e)):s},has:function(e,t){return t in Dc(e)},ownKeys:function(e){return Reflect.ownKeys(Dc(e))},set:function(e,t,n){var s=wC(Dc(e),t);if(s!=null&&s.set)return s.set.call(e.k,n),!0;if(!e.P){var c=h0(Dc(e),t),h=c==null?void 0:c[qn];if(h&&h.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(JM(n,c)&&(n!==void 0||Ih(e.t,t)))return!0;d0(e),wl(e)}return e.o[t]===n&&(n!==void 0||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return h0(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,d0(e),wl(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=Dc(e),s=Reflect.getOwnPropertyDescriptor(n,t);return s&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:s.enumerable,value:n[t]}},defineProperty:function(){ma(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){ma(12)}},Zf={};fu(Rp,function(e,t){Zf[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),Zf.deleteProperty=function(e,t){return Zf.set.call(this,e,t,void 0)},Zf.set=function(e,t,n){return Rp.set.call(this,e[0],t,n,e[0])};var e6=function(){function e(n){var s=this;this.O=TC,this.D=!0,this.produce=function(c,h,f){if(typeof c=="function"&&typeof h!="function"){var o=h;h=c;var w=s;return function(j){var Z=this;j===void 0&&(j=o);for(var N=arguments.length,F=Array(N>1?N-1:0),W=1;W<N;W++)F[W-1]=arguments[W];return w.produce(j,function(Q){var fe;return(fe=h).call.apply(fe,[Z,Q].concat(F))})}}var b;if(typeof h!="function"&&ma(6),f!==void 0&&typeof f!="function"&&ma(7),Bo(c)){var A=xC(s),C=r1(s,c,void 0),M=!0;try{b=h(C),M=!1}finally{M?Jy(A):n1(A)}return typeof Promise<"u"&&b instanceof Promise?b.then(function(j){return c0(A,f),u0(j,A)},function(j){throw Jy(A),j}):(c0(A,f),u0(b,A))}if(!c||typeof c!="object"){if((b=h(c))===void 0&&(b=c),b===eR&&(b=void 0),s.D&&Xb(b,!0),f){var B=[],V=[];qa("Patches").M(c,b,B,V),f(B,V)}return b}ma(21,c)},this.produceWithPatches=function(c,h){if(typeof c=="function")return function(b){for(var A=arguments.length,C=Array(A>1?A-1:0),M=1;M<A;M++)C[M-1]=arguments[M];return s.produceWithPatches(b,function(B){return c.apply(void 0,[B].concat(C))})};var f,o,w=s.produce(c,h,function(b,A){f=b,o=A});return typeof Promise<"u"&&w instanceof Promise?w.then(function(b){return[b,f,o]}):[w,f,o]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){Bo(n)||ma(8),Ql(n)&&(n=KB(n));var s=xC(this),c=r1(this,n,void 0);return c[qn].C=!0,n1(s),c},t.finishDraft=function(n,s){var c=n&&n[qn],h=c.A;return c0(h,s),u0(void 0,h)},t.setAutoFreeze=function(n){this.D=n},t.setUseProxies=function(n){n&&!TC&&ma(20),this.O=n},t.applyPatches=function(n,s){var c;for(c=s.length-1;c>=0;c--){var h=s[c];if(h.path.length===0&&h.op==="replace"){n=h.value;break}}c>-1&&(s=s.slice(c+1));var f=qa("Patches").$;return Ql(n)?f(n,s):this.produce(n,function(o){return f(o,s)})},e}(),ys=new e6,nR=ys.produce;ys.produceWithPatches.bind(ys);ys.setAutoFreeze.bind(ys);ys.setUseProxies.bind(ys);ys.applyPatches.bind(ys);ys.createDraft.bind(ys);ys.finishDraft.bind(ys);function Dp(e){"@babel/helpers - typeof";return Dp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dp(e)}function t6(e,t){if(Dp(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Dp(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function n6(e){var t=t6(e,"string");return Dp(t)=="symbol"?t:t+""}function r6(e,t,n){return t=n6(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function CC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),n.push.apply(n,s)}return n}function PC(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?CC(Object(n),!0).forEach(function(s){r6(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CC(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function di(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var AC=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),f0=function(){return Math.random().toString(36).substring(7).split("").join(".")},nv={INIT:"@@redux/INIT"+f0(),REPLACE:"@@redux/REPLACE"+f0(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+f0()}};function i6(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Jb(e,t,n){var s;if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(di(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(di(1));return n(Jb)(e,t)}if(typeof e!="function")throw new Error(di(2));var c=e,h=t,f=[],o=f,w=!1;function b(){o===f&&(o=f.slice())}function A(){if(w)throw new Error(di(3));return h}function C(j){if(typeof j!="function")throw new Error(di(4));if(w)throw new Error(di(5));var Z=!0;return b(),o.push(j),function(){if(Z){if(w)throw new Error(di(6));Z=!1,b();var F=o.indexOf(j);o.splice(F,1),f=null}}}function M(j){if(!i6(j))throw new Error(di(7));if(typeof j.type>"u")throw new Error(di(8));if(w)throw new Error(di(9));try{w=!0,h=c(h,j)}finally{w=!1}for(var Z=f=o,N=0;N<Z.length;N++){var F=Z[N];F()}return j}function B(j){if(typeof j!="function")throw new Error(di(10));c=j,M({type:nv.REPLACE})}function V(){var j,Z=C;return j={subscribe:function(F){if(typeof F!="object"||F===null)throw new Error(di(11));function W(){F.next&&F.next(A())}W();var Q=Z(W);return{unsubscribe:Q}}},j[AC]=function(){return this},j}return M({type:nv.INIT}),s={dispatch:M,subscribe:C,getState:A,replaceReducer:B},s[AC]=V,s}function s6(e){Object.keys(e).forEach(function(t){var n=e[t],s=n(void 0,{type:nv.INIT});if(typeof s>"u")throw new Error(di(12));if(typeof n(void 0,{type:nv.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(di(13))})}function rR(e){for(var t=Object.keys(e),n={},s=0;s<t.length;s++){var c=t[s];typeof e[c]=="function"&&(n[c]=e[c])}var h=Object.keys(n),f;try{s6(n)}catch(o){f=o}return function(w,b){if(w===void 0&&(w={}),f)throw f;for(var A=!1,C={},M=0;M<h.length;M++){var B=h[M],V=n[B],j=w[B],Z=V(j,b);if(typeof Z>"u")throw b&&b.type,new Error(di(14));C[B]=Z,A=A||Z!==j}return A=A||h.length!==Object.keys(w).length,A?C:w}}function rv(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===0?function(s){return s}:t.length===1?t[0]:t.reduce(function(s,c){return function(){return s(c.apply(void 0,arguments))}})}function a6(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(s){return function(){var c=s.apply(void 0,arguments),h=function(){throw new Error(di(15))},f={getState:c.getState,dispatch:function(){return h.apply(void 0,arguments)}},o=t.map(function(w){return w(f)});return h=rv.apply(void 0,o)(c.dispatch),PC(PC({},c),{},{dispatch:h})}}}function iR(e){var t=function(s){var c=s.dispatch,h=s.getState;return function(f){return function(o){return typeof o=="function"?o(c,h,e):f(o)}}};return t}var sR=iR();sR.withExtraArgument=iR;const kC=sR;var aR=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var h in c)Object.prototype.hasOwnProperty.call(c,h)&&(s[h]=c[h])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function s(){this.constructor=t}t.prototype=n===null?Object.create(n):(s.prototype=n.prototype,new s)}}(),o6=globalThis&&globalThis.__generator||function(e,t){var n={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},s,c,h,f;return f={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function o(b){return function(A){return w([b,A])}}function w(b){if(s)throw new TypeError("Generator is already executing.");for(;n;)try{if(s=1,c&&(h=b[0]&2?c.return:b[0]?c.throw||((h=c.return)&&h.call(c),0):c.next)&&!(h=h.call(c,b[1])).done)return h;switch(c=0,h&&(b=[b[0]&2,h.value]),b[0]){case 0:case 1:h=b;break;case 4:return n.label++,{value:b[1],done:!1};case 5:n.label++,c=b[1],b=[0];continue;case 7:b=n.ops.pop(),n.trys.pop();continue;default:if(h=n.trys,!(h=h.length>0&&h[h.length-1])&&(b[0]===6||b[0]===2)){n=0;continue}if(b[0]===3&&(!h||b[1]>h[0]&&b[1]<h[3])){n.label=b[1];break}if(b[0]===6&&n.label<h[1]){n.label=h[1],h=b;break}if(h&&n.label<h[2]){n.label=h[2],n.ops.push(b);break}h[2]&&n.ops.pop(),n.trys.pop();continue}b=t.call(e,n)}catch(A){b=[6,A],c=0}finally{s=h=0}if(b[0]&5)throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}},nd=globalThis&&globalThis.__spreadArray||function(e,t){for(var n=0,s=t.length,c=e.length;n<s;n++,c++)e[c]=t[n];return e},l6=Object.defineProperty,c6=Object.defineProperties,u6=Object.getOwnPropertyDescriptors,IC=Object.getOwnPropertySymbols,h6=Object.prototype.hasOwnProperty,d6=Object.prototype.propertyIsEnumerable,MC=function(e,t,n){return t in e?l6(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},Zl=function(e,t){for(var n in t||(t={}))h6.call(t,n)&&MC(e,n,t[n]);if(IC)for(var s=0,c=IC(t);s<c.length;s++){var n=c[s];d6.call(t,n)&&MC(e,n,t[n])}return e},p0=function(e,t){return c6(e,u6(t))},f6=function(e,t,n){return new Promise(function(s,c){var h=function(w){try{o(n.next(w))}catch(b){c(b)}},f=function(w){try{o(n.throw(w))}catch(b){c(b)}},o=function(w){return w.done?s(w.value):Promise.resolve(w.value).then(h,f)};o((n=n.apply(e,t)).next())})},p6=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?rv:rv.apply(null,arguments)};function m6(e){if(typeof e!="object"||e===null)return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var n=t;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return t===n}function Wl(e,t){function n(){for(var s=[],c=0;c<arguments.length;c++)s[c]=arguments[c];if(t){var h=t.apply(void 0,s);if(!h)throw new Error("prepareAction did not return an object");return Zl(Zl({type:e,payload:h.payload},"meta"in h&&{meta:h.meta}),"error"in h&&{error:h.error})}return{type:e,payload:s[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(s){return s.type===e},n}var g6=function(e){aR(t,e);function t(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];var c=e.apply(this,n)||this;return Object.setPrototypeOf(c,t.prototype),c}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,nd([void 0],n[0].concat(this)))):new(t.bind.apply(t,nd([void 0],n.concat(this))))},t}(Array),y6=function(e){aR(t,e);function t(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];var c=e.apply(this,n)||this;return Object.setPrototypeOf(c,t.prototype),c}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,nd([void 0],n[0].concat(this)))):new(t.bind.apply(t,nd([void 0],n.concat(this))))},t}(Array);function s1(e){return Bo(e)?nR(e,function(){}):e}function v6(e){return typeof e=="boolean"}function x6(){return function(t){return _6(t)}}function _6(e){e===void 0&&(e={});var t=e.thunk,n=t===void 0?!0:t;e.immutableCheck,e.serializableCheck,e.actionCreatorCheck;var s=new g6;return n&&(v6(n)?s.push(kC):s.push(kC.withExtraArgument(n.extraArgument))),s}var w6=!0;function b6(e){var t=x6(),n=e||{},s=n.reducer,c=s===void 0?void 0:s,h=n.middleware,f=h===void 0?t():h,o=n.devTools,w=o===void 0?!0:o,b=n.preloadedState,A=b===void 0?void 0:b,C=n.enhancers,M=C===void 0?void 0:C,B;if(typeof c=="function")B=c;else if(m6(c))B=rR(c);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var V=f;typeof V=="function"&&(V=V(t));var j=a6.apply(void 0,V),Z=rv;w&&(Z=p6(Zl({trace:!w6},typeof w=="object"&&w)));var N=new y6(j),F=N;Array.isArray(M)?F=nd([j],M):typeof M=="function"&&(F=M(N));var W=Z.apply(void 0,F);return Jb(B,A,W)}function oR(e){var t={},n=[],s,c={addCase:function(h,f){var o=typeof h=="string"?h:h.type;if(!o)throw new Error("`builder.addCase` cannot be called with an empty action type");if(o in t)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return t[o]=f,c},addMatcher:function(h,f){return n.push({matcher:h,reducer:f}),c},addDefaultCase:function(h){return s=h,c}};return e(c),[t,n,s]}function S6(e){return typeof e=="function"}function T6(e,t,n,s){n===void 0&&(n=[]);var c=typeof t=="function"?oR(t):[t,n,s],h=c[0],f=c[1],o=c[2],w;if(S6(e))w=function(){return s1(e())};else{var b=s1(e);w=function(){return b}}function A(C,M){C===void 0&&(C=w());var B=nd([h[M.type]],f.filter(function(V){var j=V.matcher;return j(M)}).map(function(V){var j=V.reducer;return j}));return B.filter(function(V){return!!V}).length===0&&(B=[o]),B.reduce(function(V,j){if(j)if(Ql(V)){var Z=V,N=j(Z,M);return N===void 0?V:N}else{if(Bo(V))return nR(V,function(F){return j(F,M)});var N=j(V,M);if(N===void 0){if(V===null)return V;throw Error("A case reducer on a non-draftable value must not return undefined")}return N}return V},C)}return A.getInitialState=w,A}function E6(e,t){return e+"/"+t}function lR(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");typeof process<"u";var n=typeof e.initialState=="function"?e.initialState:s1(e.initialState),s=e.reducers||{},c=Object.keys(s),h={},f={},o={};c.forEach(function(A){var C=s[A],M=E6(t,A),B,V;"reducer"in C?(B=C.reducer,V=C.prepare):B=C,h[A]=B,f[M]=B,o[A]=V?Wl(M,V):Wl(M)});function w(){var A=typeof e.extraReducers=="function"?oR(e.extraReducers):[e.extraReducers],C=A[0],M=C===void 0?{}:C,B=A[1],V=B===void 0?[]:B,j=A[2],Z=j===void 0?void 0:j,N=Zl(Zl({},M),f);return T6(n,function(F){for(var W in N)F.addCase(W,N[W]);for(var Q=0,fe=V;Q<fe.length;Q++){var Ee=fe[Q];F.addMatcher(Ee.matcher,Ee.reducer)}Z&&F.addDefaultCase(Z)})}var b;return{name:t,reducer:function(A,C){return b||(b=w()),b(A,C)},actions:o,caseReducers:h,getInitialState:function(){return b||(b=w()),b.getInitialState()}}}var C6="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",P6=function(e){e===void 0&&(e=21);for(var t="",n=e;n--;)t+=C6[Math.random()*64|0];return t},A6=["name","message","stack","code"],m0=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),RC=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),k6=function(e){if(typeof e=="object"&&e!==null){for(var t={},n=0,s=A6;n<s.length;n++){var c=s[n];typeof e[c]=="string"&&(t[c]=e[c])}return t}return{message:String(e)}};(function(){function e(t,n,s){var c=Wl(t+"/fulfilled",function(b,A,C,M){return{payload:b,meta:p0(Zl({},M||{}),{arg:C,requestId:A,requestStatus:"fulfilled"})}}),h=Wl(t+"/pending",function(b,A,C){return{payload:void 0,meta:p0(Zl({},C||{}),{arg:A,requestId:b,requestStatus:"pending"})}}),f=Wl(t+"/rejected",function(b,A,C,M,B){return{payload:M,error:(s&&s.serializeError||k6)(b||"Rejected"),meta:p0(Zl({},B||{}),{arg:C,requestId:A,rejectedWithValue:!!M,requestStatus:"rejected",aborted:(b==null?void 0:b.name)==="AbortError",condition:(b==null?void 0:b.name)==="ConditionError"})}}),o=typeof AbortController<"u"?AbortController:function(){function b(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return b.prototype.abort=function(){},b}();function w(b){return function(A,C,M){var B=s!=null&&s.idGenerator?s.idGenerator(b):P6(),V=new o,j;function Z(F){j=F,V.abort()}var N=function(){return f6(this,null,function(){var F,W,Q,fe,Ee,Re,Te;return o6(this,function(Ne){switch(Ne.label){case 0:return Ne.trys.push([0,4,,5]),fe=(F=s==null?void 0:s.condition)==null?void 0:F.call(s,b,{getState:C,extra:M}),M6(fe)?[4,fe]:[3,2];case 1:fe=Ne.sent(),Ne.label=2;case 2:if(fe===!1||V.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return Ee=new Promise(function(ke,ft){return V.signal.addEventListener("abort",function(){return ft({name:"AbortError",message:j||"Aborted"})})}),A(h(B,b,(W=s==null?void 0:s.getPendingMeta)==null?void 0:W.call(s,{requestId:B,arg:b},{getState:C,extra:M}))),[4,Promise.race([Ee,Promise.resolve(n(b,{dispatch:A,getState:C,extra:M,requestId:B,signal:V.signal,abort:Z,rejectWithValue:function(ke,ft){return new m0(ke,ft)},fulfillWithValue:function(ke,ft){return new RC(ke,ft)}})).then(function(ke){if(ke instanceof m0)throw ke;return ke instanceof RC?c(ke.payload,B,b,ke.meta):c(ke,B,b)})])];case 3:return Q=Ne.sent(),[3,5];case 4:return Re=Ne.sent(),Q=Re instanceof m0?f(null,B,b,Re.payload,Re.meta):f(Re,B,b),[3,5];case 5:return Te=s&&!s.dispatchConditionRejection&&f.match(Q)&&Q.meta.condition,Te||A(Q),[2,Q]}})})}();return Object.assign(N,{abort:Z,requestId:B,arg:b,unwrap:function(){return N.then(I6)}})}}return Object.assign(w,{pending:h,rejected:f,fulfilled:c,typePrefix:t})}return e.withTypes=function(){return e},e})();function I6(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function M6(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var eS="listenerMiddleware";Wl(eS+"/add");Wl(eS+"/removeAll");Wl(eS+"/remove");var DC;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);XB();var _a=function(t){return"@@redux-saga/"+t},R6=_a("CANCEL_PROMISE"),cR=_a("CHANNEL_END"),uR=_a("IO"),LC=_a("MATCH"),D6=_a("MULTICAST"),hR=_a("SAGA_ACTION"),L6=_a("SELF_CANCELLATION"),z6=_a("TASK"),Rh=_a("TASK_CANCEL"),dR=_a("TERMINATE"),O6=_a("LOCATION"),F6=function(t){return t==null},N6=function(t){return t!=null},Yl=function(t){return typeof t=="function"},B6=function(t){return typeof t=="string"},yd=Array.isArray,ox=function(t){return t&&Yl(t.then)},tS=function(t){return t&&Yl(t.next)&&Yl(t.throw)},V6=function(t){return Yl(t)&&t.hasOwnProperty("toString")},j6=function(t){return!!t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype},$6=function(t){return function(){return t}},U6=$6(!0),zi=function(){},q6=function(t){return t},nS=function(t,n){uu(t,n),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(n).forEach(function(s){t[s]=n[s]})},G6=function(t,n){var s;return(s=[]).concat.apply(s,n.map(t))};function lx(e,t){var n=e.indexOf(t);n>=0&&e.splice(n,1)}function Z6(e){var t=!1;return function(){t||(t=!0,e())}}var W6=function(t){throw t},H6=function(t){return{value:t,done:!0}};function zC(e,t,n){t===void 0&&(t=W6),n===void 0&&(n="iterator");var s={meta:{name:n},next:e,throw:t,return:H6,isSagaIterator:!0};return typeof Symbol<"u"&&(s[Symbol.iterator]=function(){return s}),s}function K6(e,t){var n=t.sagaStack;console.error(e),console.error(n)}var fR=function(t){return Array.apply(null,new Array(t))},X6=function(t){return function(n){return t(Object.defineProperty(n,hR,{value:!0}))}},pR=function(t){return t===dR},mR=function(t){return t===Rh},gR=function(t){return pR(t)||mR(t)};function yR(e,t){var n=Object.keys(e),s=n.length,c=0,h,f=yd(e)?fR(s):{},o={};function w(){c===s&&(h=!0,t(f))}return n.forEach(function(b){var A=function(M,B){h||(B||gR(M)?(t.cancel(),t(M,B)):(f[b]=M,c++,w()))};A.cancel=zi,o[b]=A}),t.cancel=function(){h||(h=!0,n.forEach(function(b){return o[b].cancel()}))},o}function rS(e){return{name:e.name||"anonymous",location:vR(e)}}function vR(e){return e[O6]}function Q6(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===0?function(s){return s}:t.length===1?t[0]:t.reduce(function(s,c){return function(){return s(c.apply(void 0,arguments))}})}var Y6="Channel's Buffer overflow!",J6=1,eV=3,xR=4;function tV(e,t){e===void 0&&(e=10);var n=new Array(e),s=0,c=0,h=0,f=function(A){n[c]=A,c=(c+1)%e,s++},o=function(){if(s!=0){var A=n[h];return n[h]=null,s--,h=(h+1)%e,A}},w=function(){for(var A=[];s;)A.push(o());return A};return{isEmpty:function(){return s==0},put:function(A){if(s<e)f(A);else{var C;switch(t){case J6:throw new Error(Y6);case eV:n[c]=A,c=(c+1)%e,h=c;break;case xR:C=2*e,n=w(),s=n.length,c=n.length,h=0,n.length=C,e=C,f(A);break}}},take:o,flush:w}}var nV=function(t){return tV(t,xR)},rV="TAKE",iV="PUT",_R="ALL",sV="RACE",aV="CALL",oV="CPS",lV="FORK",cV="JOIN",uV="CANCEL",hV="SELECT",dV="ACTION_CHANNEL",fV="CANCELLED",pV="FLUSH",mV="GET_CONTEXT",gV="SET_CONTEXT",yV=function(t,n){var s;return s={},s[uR]=!0,s.combinator=!1,s.type=t,s.payload=n,s};function vV(e){var t=yV(_R,e);return t.combinator=!0,t}function xV(){var e={};return e.promise=new Promise(function(t,n){e.resolve=t,e.reject=n}),e}var wR=[],cx=0;function _V(e){try{iS(),e()}finally{TR()}}function bR(e){wR.push(e),cx||(iS(),ER())}function SR(e){try{return iS(),e()}finally{ER()}}function iS(){cx++}function TR(){cx--}function ER(){TR();for(var e;!cx&&(e=wR.shift())!==void 0;)_V(e)}var wV=function(t){return function(n){return t.some(function(s){return sS(s)(n)})}},bV=function(t){return function(n){return t(n)}},OC=function(t){return function(n){return n.type===String(t)}},SV=function(t){return function(n){return n.type===t}},CR=function(){return U6};function sS(e){var t=e==="*"?CR:B6(e)?OC:yd(e)?wV:V6(e)?OC:Yl(e)?bV:j6(e)?SV:null;if(t===null)throw new Error("invalid pattern: "+e);return t(e)}var sp={type:cR},aS=function(t){return t&&t.type===cR};function TV(e){e===void 0&&(e=nV());var t=!1,n=[];function s(o){if(!t){if(n.length===0)return e.put(o);var w=n.shift();w(o)}}function c(o){t&&e.isEmpty()?o(sp):e.isEmpty()?(n.push(o),o.cancel=function(){lx(n,o)}):o(e.take())}function h(o){if(t&&e.isEmpty()){o(sp);return}o(e.flush())}function f(){if(!t){t=!0;var o=n;n=[];for(var w=0,b=o.length;w<b;w++){var A=o[w];A(sp)}}}return{take:c,put:s,flush:h,close:f}}function EV(){var e,t=!1,n=[],s=n,c=function(){s===n&&(s=n.slice())},h=function(){t=!0;var o=n=s;s=[],o.forEach(function(w){w(sp)})};return e={},e[D6]=!0,e.put=function(o){if(!t){if(aS(o)){h();return}for(var w=n=s,b=0,A=w.length;b<A;b++){var C=w[b];C[LC](o)&&(C.cancel(),C(o))}}},e.take=function(o,w){if(w===void 0&&(w=CR),t){o(sp);return}o[LC]=w,c(),s.push(o),o.cancel=Z6(function(){c(),lx(s,o)})},e.close=h,e}function PR(){var e=EV(),t=e.put;return e.put=function(n){if(n[hR]){t(n);return}bR(function(){t(n)})},e}var Nc=0,To=1,dy=2,AR=3;function oS(e,t){var n=e[R6];Yl(n)&&(t.cancel=n),e.then(t,function(s){t(s,!0)})}var sm=0,kR=function(){return++sm},Zr;function CV(e,t){return e.isSagaIterator?{name:e.meta.name}:rS(t)}function PV(e){var t=e.context,n=e.fn,s=e.args;try{var c=n.apply(t,s);if(tS(c))return c;var h=!1,f=function(w){return h?{value:w,done:!0}:(h=!0,{value:c,done:!ox(c)})};return zC(f)}catch(o){return zC(function(){throw o})}}function AV(e,t,n){var s=t.channel,c=t.action,h=t.resolve;bR(function(){var f;try{f=(s?s.put:e.dispatch)(c)}catch(o){n(o,!0);return}h&&ox(f)?oS(f,n):n(f)})}function kV(e,t,n){var s=t.channel,c=s===void 0?e.channel:s,h=t.pattern,f=t.maybe,o=function(b){if(b instanceof Error){n(b,!0);return}if(aS(b)&&!f){n(dR);return}n(b)};try{c.take(o,N6(h)?sS(h):null)}catch(w){n(w,!0);return}n.cancel=o.cancel}function IV(e,t,n,s){var c=t.context,h=t.fn,f=t.args,o=s.task;try{var w=h.apply(c,f);if(ox(w)){oS(w,n);return}if(tS(w)){ux(e,w,o.context,sm,rS(h),!1,n);return}n(w)}catch(b){n(b,!0)}}function MV(e,t,n){var s=t.context,c=t.fn,h=t.args;try{var f=function(w,b){F6(w)?n(b):n(w,!0)};c.apply(s,h.concat(f)),f.cancel&&(n.cancel=f.cancel)}catch(o){n(o,!0)}}function RV(e,t,n,s){var c=t.context,h=t.fn,f=t.args,o=t.detached,w=s.task,b=PV({context:c,fn:h,args:f}),A=CV(b,h);SR(function(){var C=ux(e,b,w.context,sm,A,o,void 0);o?n(C):C.isRunning()?(w.queue.addTask(C),n(C)):C.isAborted()?w.queue.abort(C.error()):n(C)})}function DV(e,t,n,s){var c=s.task,h=function(w,b){if(w.isRunning()){var A={task:c,cb:b};b.cancel=function(){w.isRunning()&&lx(w.joiners,A)},w.joiners.push(A)}else w.isAborted()?b(w.error(),!0):b(w.result())};if(yd(t)){if(t.length===0){n([]);return}var f=yR(t,n);t.forEach(function(o,w){h(o,f[w])})}else h(t,n)}function g0(e){e.isRunning()&&e.cancel()}function LV(e,t,n,s){var c=s.task;t===L6?g0(c):yd(t)?t.forEach(g0):g0(t),n()}function zV(e,t,n,s){var c=s.digestEffect,h=sm,f=Object.keys(t);if(f.length===0){n(yd(t)?[]:{});return}var o=yR(t,n);f.forEach(function(w){c(t[w],h,o[w],w)})}function OV(e,t,n,s){var c=s.digestEffect,h=sm,f=Object.keys(t),o=yd(t)?fR(f.length):{},w={},b=!1;f.forEach(function(A){var C=function(B,V){b||(V||gR(B)?(n.cancel(),n(B,V)):(n.cancel(),b=!0,o[A]=B,n(o)))};C.cancel=zi,w[A]=C}),n.cancel=function(){b||(b=!0,f.forEach(function(A){return w[A].cancel()}))},f.forEach(function(A){b||c(t[A],h,w[A],A)})}function FV(e,t,n){var s=t.selector,c=t.args;try{var h=s.apply(void 0,[e.getState()].concat(c));n(h)}catch(f){n(f,!0)}}function NV(e,t,n){var s=t.pattern,c=t.buffer,h=TV(c),f=sS(s),o=function b(A){aS(A)||e.channel.take(b,f),h.put(A)},w=h.close;h.close=function(){o.cancel(),w()},e.channel.take(o,f),n(h)}function BV(e,t,n,s){var c=s.task;n(c.isCancelled())}function VV(e,t,n){t.flush(n)}function jV(e,t,n,s){var c=s.task;n(c.context[t])}function $V(e,t,n,s){var c=s.task;nS(c.context,t),n()}var UV=(Zr={},Zr[rV]=kV,Zr[iV]=AV,Zr[_R]=zV,Zr[sV]=OV,Zr[aV]=IV,Zr[oV]=MV,Zr[lV]=RV,Zr[cV]=DV,Zr[uV]=LV,Zr[hV]=FV,Zr[dV]=NV,Zr[fV]=BV,Zr[pV]=VV,Zr[mV]=jV,Zr[gV]=$V,Zr);function qV(e,t,n){var s=[],c,h=!1;w(e);var f=function(){return s};function o(A){t(),b(),n(A,!0)}function w(A){s.push(A),A.cont=function(C,M){h||(lx(s,A),A.cont=zi,M?o(C):(A===e&&(c=C),s.length||(h=!0,n(c))))}}function b(){h||(h=!0,s.forEach(function(A){A.cont=zi,A.cancel()}),s=[])}return{addTask:w,cancelAll:b,abort:o,getTasks:f}}function IR(e,t){return e+"?"+t}function GV(e){var t=vR(e);if(t){var n=t.code,s=t.fileName,c=t.lineNumber,h=n+"  "+IR(s,c);return h}return""}function FC(e){var t=e.name,n=e.location;return n?t+"  "+IR(n.fileName,n.lineNumber):t}function ZV(e){var t=G6(function(n){return n.cancelledTasks},e);return t.length?["Tasks cancelled due to error:"].concat(t).join(`
`):""}var lS=null,ap=[],WV=function(t){t.crashedEffect=lS,ap.push(t)},MR=function(){lS=null,ap.length=0},HV=function(t){lS=t},KV=function(){var t=ap[0],n=ap.slice(1),s=t.crashedEffect?GV(t.crashedEffect):null,c="The above error occurred in task "+FC(t.meta)+(s?` 
 when executing effect `+s:"");return[c].concat(n.map(function(h){return"    created by "+FC(h.meta)}),[ZV(ap)]).join(`
`)};function XV(e,t,n,s,c,h,f){var o;f===void 0&&(f=zi);var w=Nc,b,A,C=null,M=[],B=Object.create(n),V=qV(t,function(){M.push.apply(M,V.getTasks().map(function(fe){return fe.meta.name}))},Z);function j(){w===Nc&&(w=To,V.cancelAll(),Z(Rh,!1))}function Z(Q,fe){if(!fe)Q===Rh?w=To:w!==To&&(w=AR),b=Q,C&&C.resolve(Q);else{if(w=dy,WV({meta:c,cancelledTasks:M}),W.isRoot){var Ee=KV();MR(),e.onError(Q,{sagaStack:Ee})}A=Q,C&&C.reject(Q)}W.cont(Q,fe),W.joiners.forEach(function(Re){Re.cb(Q,fe)}),W.joiners=null}function N(Q){nS(B,Q)}function F(){return C||(C=xV(),w===dy?C.reject(A):w!==Nc&&C.resolve(b)),C.promise}var W=(o={},o[z6]=!0,o.id=s,o.meta=c,o.isRoot=h,o.context=B,o.joiners=[],o.queue=V,o.cancel=j,o.cont=f,o.end=Z,o.setContext=N,o.toPromise=F,o.isRunning=function(){return w===Nc},o.isCancelled=function(){return w===To||w===Nc&&t.status===To},o.isAborted=function(){return w===dy},o.result=function(){return b},o.error=function(){return A},o);return W}function ux(e,t,n,s,c,h,f){var o=e.finalizeRunEffect(B);M.cancel=zi;var w={meta:c,cancel:C,status:Nc},b=XV(e,w,n,s,c,h,f),A={task:b,digestEffect:V};function C(){w.status===Nc&&(w.status=To,M(Rh))}return f&&(f.cancel=b.cancel),M(),b;function M(j,Z){try{var N;Z?(N=t.throw(j),MR()):mR(j)?(w.status=To,M.cancel(),N=Yl(t.return)?t.return(Rh):{done:!0,value:Rh}):pR(j)?N=Yl(t.return)?t.return():{done:!0}:N=t.next(j),N.done?(w.status!==To&&(w.status=AR),w.cont(N.value)):V(N.value,s,M)}catch(F){if(w.status===To)throw F;w.status=dy,w.cont(F,!0)}}function B(j,Z,N){if(ox(j))oS(j,N);else if(tS(j))ux(e,j,b.context,Z,c,!1,N);else if(j&&j[uR]){var F=UV[j.type];F(e,j.payload,N,A)}else N(j)}function V(j,Z,N,F){F===void 0&&(F="");var W=kR();e.sagaMonitor&&e.sagaMonitor.effectTriggered({effectId:W,parentEffectId:Z,label:F,effect:j});var Q;function fe(Ee,Re){Q||(Q=!0,N.cancel=zi,e.sagaMonitor&&(Re?e.sagaMonitor.effectRejected(W,Ee):e.sagaMonitor.effectResolved(W,Ee)),Re&&HV(j),N(Ee,Re))}fe.cancel=zi,N.cancel=function(){Q||(Q=!0,fe.cancel(),fe.cancel=zi,e.sagaMonitor&&e.sagaMonitor.effectCancelled(W))},o(j,W,fe)}}function QV(e,t){for(var n=e.channel,s=n===void 0?PR():n,c=e.dispatch,h=e.getState,f=e.context,o=f===void 0?{}:f,w=e.sagaMonitor,b=e.effectMiddlewares,A=e.onError,C=A===void 0?K6:A,M=arguments.length,B=new Array(M>2?M-2:0),V=2;V<M;V++)B[V-2]=arguments[V];var j=t.apply(void 0,B),Z=kR();w&&(w.rootSagaStarted=w.rootSagaStarted||zi,w.effectTriggered=w.effectTriggered||zi,w.effectResolved=w.effectResolved||zi,w.effectRejected=w.effectRejected||zi,w.effectCancelled=w.effectCancelled||zi,w.actionDispatched=w.actionDispatched||zi,w.rootSagaStarted({effectId:Z,saga:t,args:B}));var N;if(b){var F=Q6.apply(void 0,b);N=function(fe){return function(Ee,Re,Te){var Ne=function(ft){return fe(ft,Re,Te)};return F(Ne)(Ee)}}}else N=q6;var W={channel:s,dispatch:X6(c),getState:h,sagaMonitor:w,onError:C,finalizeRunEffect:N};return SR(function(){var Q=ux(W,j,o,Z,rS(t),!0,void 0);return w&&w.effectResolved(Z,Q),Q})}function YV(e){var t=e===void 0?{}:e,n=t.context,s=n===void 0?{}:n,c=t.channel,h=c===void 0?PR():c,f=t.sagaMonitor,o=Lb(t,["context","channel","sagaMonitor"]),w;function b(A){var C=A.getState,M=A.dispatch;return w=QV.bind(null,uu({},o,{context:s,channel:h,dispatch:M,getState:C,sagaMonitor:f})),function(B){return function(V){f&&f.actionDispatched&&f.actionDispatched(V);var j=B(V);return h.put(V),j}}}return b.run=function(){return w.apply(void 0,arguments)},b.setContext=function(A){nS(s,A)},b}var cS="persist:",RR="persist/FLUSH",uS="persist/REHYDRATE",DR="persist/PAUSE",LR="persist/PERSIST",zR="persist/PURGE",OR="persist/REGISTER",JV=-1;function fy(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?fy=function(n){return typeof n}:fy=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},fy(e)}function NC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),n.push.apply(n,s)}return n}function ej(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?NC(n,!0).forEach(function(s){tj(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):NC(n).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function tj(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nj(e,t,n,s){s.debug;var c=ej({},n);return e&&fy(e)==="object"&&Object.keys(e).forEach(function(h){h!=="_persist"&&t[h]===n[h]&&(c[h]=e[h])}),c}function rj(e){var t=e.blacklist||null,n=e.whitelist||null,s=e.transforms||[],c=e.throttle||0,h="".concat(e.keyPrefix!==void 0?e.keyPrefix:cS).concat(e.key),f=e.storage,o;e.serialize===!1?o=function(fe){return fe}:typeof e.serialize=="function"?o=e.serialize:o=ij;var w=e.writeFailHandler||null,b={},A={},C=[],M=null,B=null,V=function(fe){Object.keys(fe).forEach(function(Ee){N(Ee)&&b[Ee]!==fe[Ee]&&C.indexOf(Ee)===-1&&C.push(Ee)}),Object.keys(b).forEach(function(Ee){fe[Ee]===void 0&&N(Ee)&&C.indexOf(Ee)===-1&&b[Ee]!==void 0&&C.push(Ee)}),M===null&&(M=setInterval(j,c)),b=fe};function j(){if(C.length===0){M&&clearInterval(M),M=null;return}var Q=C.shift(),fe=s.reduce(function(Ee,Re){return Re.in(Ee,Q,b)},b[Q]);if(fe!==void 0)try{A[Q]=o(fe)}catch(Ee){console.error("redux-persist/createPersistoid: error serializing state",Ee)}else delete A[Q];C.length===0&&Z()}function Z(){Object.keys(A).forEach(function(Q){b[Q]===void 0&&delete A[Q]}),B=f.setItem(h,o(A)).catch(F)}function N(Q){return!(n&&n.indexOf(Q)===-1&&Q!=="_persist"||t&&t.indexOf(Q)!==-1)}function F(Q){w&&w(Q)}var W=function(){for(;C.length!==0;)j();return B||Promise.resolve()};return{update:V,flush:W}}function ij(e){return JSON.stringify(e)}function sj(e){var t=e.transforms||[],n="".concat(e.keyPrefix!==void 0?e.keyPrefix:cS).concat(e.key),s=e.storage;e.debug;var c;return e.deserialize===!1?c=function(f){return f}:typeof e.deserialize=="function"?c=e.deserialize:c=aj,s.getItem(n).then(function(h){if(h)try{var f={},o=c(h);return Object.keys(o).forEach(function(w){f[w]=t.reduceRight(function(b,A){return A.out(b,w,o)},c(o[w]))}),f}catch(w){throw w}else return})}function aj(e){return JSON.parse(e)}function oj(e){var t=e.storage,n="".concat(e.keyPrefix!==void 0?e.keyPrefix:cS).concat(e.key);return t.removeItem(n,lj)}function lj(e){}function BC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),n.push.apply(n,s)}return n}function po(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?BC(n,!0).forEach(function(s){cj(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):BC(n).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function cj(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function uj(e,t){if(e==null)return{};var n=hj(e,t),s,c;if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(c=0;c<h.length;c++)s=h[c],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function hj(e,t){if(e==null)return{};var n={},s=Object.keys(e),c,h;for(h=0;h<s.length;h++)c=s[h],!(t.indexOf(c)>=0)&&(n[c]=e[c]);return n}var dj=5e3;function fj(e,t){var n=e.version!==void 0?e.version:JV;e.debug;var s=e.stateReconciler===void 0?nj:e.stateReconciler,c=e.getStoredState||sj,h=e.timeout!==void 0?e.timeout:dj,f=null,o=!1,w=!0,b=function(C){return C._persist.rehydrated&&f&&!w&&f.update(C),C};return function(A,C){var M=A||{},B=M._persist,V=uj(M,["_persist"]),j=V;if(C.type===LR){var Z=!1,N=function(Te,Ne){Z||(C.rehydrate(e.key,Te,Ne),Z=!0)};if(h&&setTimeout(function(){!Z&&N(void 0,new Error('redux-persist: persist timed out for persist key "'.concat(e.key,'"')))},h),w=!1,f||(f=rj(e)),B)return po({},t(j,C),{_persist:B});if(typeof C.rehydrate!="function"||typeof C.register!="function")throw new Error("redux-persist: either rehydrate or register is not a function on the PERSIST action. This can happen if the action is being replayed. This is an unexplored use case, please open an issue and we will figure out a resolution.");return C.register(e.key),c(e).then(function(Re){var Te=e.migrate||function(Ne,ke){return Promise.resolve(Ne)};Te(Re,n).then(function(Ne){N(Ne)},function(Ne){N(void 0,Ne)})},function(Re){N(void 0,Re)}),po({},t(j,C),{_persist:{version:n,rehydrated:!1}})}else{if(C.type===zR)return o=!0,C.result(oj(e)),po({},t(j,C),{_persist:B});if(C.type===RR)return C.result(f&&f.flush()),po({},t(j,C),{_persist:B});if(C.type===DR)w=!0;else if(C.type===uS){if(o)return po({},j,{_persist:po({},B,{rehydrated:!0})});if(C.key===e.key){var F=t(j,C),W=C.payload,Q=s!==!1&&W!==void 0?s(W,A,F,e):F,fe=po({},Q,{_persist:po({},B,{rehydrated:!0})});return b(fe)}}}if(!B)return t(A,C);var Ee=t(j,C);return Ee===j?A:b(po({},Ee,{_persist:B}))}}function VC(e){return gj(e)||mj(e)||pj()}function pj(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function mj(e){if(Symbol.iterator in Object(e)||Object.prototype.toString.call(e)==="[object Arguments]")return Array.from(e)}function gj(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function jC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),n.push.apply(n,s)}return n}function a1(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?jC(n,!0).forEach(function(s){yj(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jC(n).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function yj(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var FR={registry:[],bootstrapped:!1},vj=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:FR,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case OR:return a1({},t,{registry:[].concat(VC(t.registry),[n.key])});case uS:var s=t.registry.indexOf(n.key),c=VC(t.registry);return c.splice(s,1),a1({},t,{registry:c,bootstrapped:c.length===0});default:return t}};function xj(e,t,n){var s=n||!1,c=Jb(vj,FR,t&&t.enhancer?t.enhancer:void 0),h=function(b){c.dispatch({type:OR,key:b})},f=function(b,A,C){var M={type:uS,payload:A,err:C,key:b};e.dispatch(M),c.dispatch(M),s&&o.getState().bootstrapped&&(s(),s=!1)},o=a1({},c,{purge:function(){var b=[];return e.dispatch({type:zR,result:function(C){b.push(C)}}),Promise.all(b)},flush:function(){var b=[];return e.dispatch({type:RR,result:function(C){b.push(C)}}),Promise.all(b)},pause:function(){e.dispatch({type:DR})},persist:function(){e.dispatch({type:LR,register:h,rehydrate:f})}});return t&&t.manualPersist||o.persist(),o}var hS={},dS={};dS.__esModule=!0;dS.default=bj;function py(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?py=function(n){return typeof n}:py=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},py(e)}function y0(){}var _j={getItem:y0,setItem:y0,removeItem:y0};function wj(e){if((typeof self>"u"?"undefined":py(self))!=="object"||!(e in self))return!1;try{var t=self[e],n="redux-persist ".concat(e," test");t.setItem(n,"test"),t.getItem(n),t.removeItem(n)}catch{return!1}return!0}function bj(e){var t="".concat(e,"Storage");return wj(t)?self[t]:_j}hS.__esModule=!0;hS.default=Ej;var Sj=Tj(dS);function Tj(e){return e&&e.__esModule?e:{default:e}}function Ej(e){var t=(0,Sj.default)(e);return{getItem:function(s){return new Promise(function(c,h){c(t.getItem(s))})},setItem:function(s,c){return new Promise(function(h,f){h(t.setItem(s,c))})},removeItem:function(s){return new Promise(function(c,h){c(t.removeItem(s))})}}}var NR=void 0,Cj=Pj(hS);function Pj(e){return e&&e.__esModule?e:{default:e}}var Aj=(0,Cj.default)("local");NR=Aj;function kj(e,t,n){return fj({key:e,storage:NR,whitelist:t},n)}const Ij={showModal:!1,modalContent:null,showPromptDialog:!1,promptDialogContent:null,navbarToggled:!1,activeExamTab:"form-section",examView:"main",userEmail:null,selectedMockTest:null,attemptId:null,isAuthenticated:!1,username:null},Mj=(e,t)=>({...e,...t.payload}),Rj=(e,t)=>({...e,showModal:!!t.payload,modalContent:t.payload||e.modalContent}),Dj=(e,t)=>({...e,navbarToggled:t.payload}),Lj=(e,t)=>({...e,modalContent:t.payload||null}),zj=(e,t)=>({...e,showPromptDialog:!!t.payload||!e.showPromptDialog,promptDialogContent:t.payload||e.promptDialogContent}),Oj=(e,t)=>({...e,promptDialogContent:t.payload||null}),Fj=(e,t)=>({...e,isAuthenticated:t.payload.isAuthenticated,username:t.payload.username}),BR=lR({name:"common",initialState:Ij,reducers:{setCommonState:Mj,toggleModal:Rj,setModalContent:Lj,setToggleNavbar:Dj,togglePromptDialog:zj,setPromptDialogContent:Oj,setLoginState:Fj}}),Nj=kj("common",[],BR.reducer),Bj={actions:[]},Vj=lR({name:"loader",initialState:Bj,reducers:{startAction(e,t){e.actions.push(t.payload)},stopAction(e,t){e.actions=e.actions.filter(n=>n!==t.payload)}}}),jj=Vj.reducer,$j=rR({common:Nj,loader:jj});function*Uj(){yield vV([])}const VR=YV(),qj=[VR],jR=b6({reducer:$j,middleware:e=>e({thunk:!1,serializableCheck:!1}).concat(qj)});VR.run(Uj);const Gj=xj(jR);function $R(e){var t,n,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=$R(e[t]))&&(s&&(s+=" "),s+=n);else for(t in e)e[t]&&(s&&(s+=" "),s+=t);return s}function Ll(){for(var e,t,n=0,s="";n<arguments.length;)(e=arguments[n++])&&(t=$R(e))&&(s&&(s+=" "),s+=t);return s}const my=e=>typeof e=="number"&&!isNaN(e),iv=e=>typeof e=="string",fs=e=>typeof e=="function",gy=e=>iv(e)||fs(e)?e:null,v0=e=>Y.isValidElement(e)||iv(e)||fs(e)||my(e);function Zj(e,t,n){n===void 0&&(n=300);const{scrollHeight:s,style:c}=e;requestAnimationFrame(()=>{c.minHeight="initial",c.height=s+"px",c.transition=`all ${n}ms`,requestAnimationFrame(()=>{c.height="0",c.padding="0",c.margin="0",setTimeout(t,n)})})}function hx(e){let{enter:t,exit:n,appendPosition:s=!1,collapse:c=!0,collapseDuration:h=300}=e;return function(f){let{children:o,position:w,preventExitTransition:b,done:A,nodeRef:C,isIn:M}=f;const B=s?`${t}--${w}`:t,V=s?`${n}--${w}`:n,j=Y.useRef(0);return Y.useLayoutEffect(()=>{const Z=C.current,N=B.split(" "),F=W=>{W.target===C.current&&(Z.dispatchEvent(new Event("d")),Z.removeEventListener("animationend",F),Z.removeEventListener("animationcancel",F),j.current===0&&W.type!=="animationcancel"&&Z.classList.remove(...N))};Z.classList.add(...N),Z.addEventListener("animationend",F),Z.addEventListener("animationcancel",F)},[]),Y.useEffect(()=>{const Z=C.current,N=()=>{Z.removeEventListener("animationend",N),c?Zj(Z,A,h):A()};M||(b?N():(j.current=1,Z.className+=` ${V}`,Z.addEventListener("animationend",N)))},[M]),bt.createElement(bt.Fragment,null,o)}}function $C(e,t){return e!=null?{content:e.content,containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,status:t}:{}}const $c={list:new Map,emitQueue:new Map,on(e,t){return this.list.has(e)||this.list.set(e,[]),this.list.get(e).push(t),this},off(e,t){if(t){const n=this.list.get(e).filter(s=>s!==t);return this.list.set(e,n),this}return this.list.delete(e),this},cancelEmit(e){const t=this.emitQueue.get(e);return t&&(t.forEach(clearTimeout),this.emitQueue.delete(e)),this},emit(e){this.list.has(e)&&this.list.get(e).forEach(t=>{const n=setTimeout(()=>{t(...[].slice.call(arguments,1))},0);this.emitQueue.has(e)||this.emitQueue.set(e,[]),this.emitQueue.get(e).push(n)})}},$g=e=>{let{theme:t,type:n,...s}=e;return bt.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:t==="colored"?"currentColor":`var(--toastify-icon-color-${n})`,...s})},x0={info:function(e){return bt.createElement($g,{...e},bt.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(e){return bt.createElement($g,{...e},bt.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(e){return bt.createElement($g,{...e},bt.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(e){return bt.createElement($g,{...e},bt.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return bt.createElement("div",{className:"Toastify__spinner"})}};function Wj(e){const[,t]=Y.useReducer(B=>B+1,0),[n,s]=Y.useState([]),c=Y.useRef(null),h=Y.useRef(new Map).current,f=B=>n.indexOf(B)!==-1,o=Y.useRef({toastKey:1,displayedToast:0,count:0,queue:[],props:e,containerId:null,isToastActive:f,getToast:B=>h.get(B)}).current;function w(B){let{containerId:V}=B;const{limit:j}=o.props;!j||V&&o.containerId!==V||(o.count-=o.queue.length,o.queue=[])}function b(B){s(V=>B==null?[]:V.filter(j=>j!==B))}function A(){const{toastContent:B,toastProps:V,staleId:j}=o.queue.shift();M(B,V,j)}function C(B,V){let{delay:j,staleId:Z,...N}=V;if(!v0(B)||function(je){return!c.current||o.props.enableMultiContainer&&je.containerId!==o.props.containerId||h.has(je.toastId)&&je.updateId==null}(N))return;const{toastId:F,updateId:W,data:Q}=N,{props:fe}=o,Ee=()=>b(F),Re=W==null;Re&&o.count++;const Te={...fe,style:fe.toastStyle,key:o.toastKey++,...Object.fromEntries(Object.entries(N).filter(je=>{let[st,ut]=je;return ut!=null})),toastId:F,updateId:W,data:Q,closeToast:Ee,isIn:!1,className:gy(N.className||fe.toastClassName),bodyClassName:gy(N.bodyClassName||fe.bodyClassName),progressClassName:gy(N.progressClassName||fe.progressClassName),autoClose:!N.isLoading&&(Ne=N.autoClose,ke=fe.autoClose,Ne===!1||my(Ne)&&Ne>0?Ne:ke),deleteToast(){const je=$C(h.get(F),"removed");h.delete(F),$c.emit(4,je);const st=o.queue.length;if(o.count=F==null?o.count-o.displayedToast:o.count-1,o.count<0&&(o.count=0),st>0){const ut=F==null?o.props.limit:1;if(st===1||ut===1)o.displayedToast++,A();else{const Tt=ut>st?st:ut;o.displayedToast=Tt;for(let ht=0;ht<Tt;ht++)A()}}else t()}};var Ne,ke;Te.iconOut=function(je){let{theme:st,type:ut,isLoading:Tt,icon:ht}=je,Ue=null;const De={theme:st,type:ut};return ht===!1||(fs(ht)?Ue=ht(De):Y.isValidElement(ht)?Ue=Y.cloneElement(ht,De):iv(ht)||my(ht)?Ue=ht:Tt?Ue=x0.spinner():(Xe=>Xe in x0)(ut)&&(Ue=x0[ut](De))),Ue}(Te),fs(N.onOpen)&&(Te.onOpen=N.onOpen),fs(N.onClose)&&(Te.onClose=N.onClose),Te.closeButton=fe.closeButton,N.closeButton===!1||v0(N.closeButton)?Te.closeButton=N.closeButton:N.closeButton===!0&&(Te.closeButton=!v0(fe.closeButton)||fe.closeButton);let ft=B;Y.isValidElement(B)&&!iv(B.type)?ft=Y.cloneElement(B,{closeToast:Ee,toastProps:Te,data:Q}):fs(B)&&(ft=B({closeToast:Ee,toastProps:Te,data:Q})),fe.limit&&fe.limit>0&&o.count>fe.limit&&Re?o.queue.push({toastContent:ft,toastProps:Te,staleId:Z}):my(j)?setTimeout(()=>{M(ft,Te,Z)},j):M(ft,Te,Z)}function M(B,V,j){const{toastId:Z}=V;j&&h.delete(j);const N={content:B,props:V};h.set(Z,N),s(F=>[...F,Z].filter(W=>W!==j)),$c.emit(4,$C(N,N.props.updateId==null?"added":"updated"))}return Y.useEffect(()=>(o.containerId=e.containerId,$c.cancelEmit(3).on(0,C).on(1,B=>c.current&&b(B)).on(5,w).emit(2,o),()=>{h.clear(),$c.emit(3,o)}),[]),Y.useEffect(()=>{o.props=e,o.isToastActive=f,o.displayedToast=n.length}),{getToastToRender:function(B){const V=new Map,j=Array.from(h.values());return e.newestOnTop&&j.reverse(),j.forEach(Z=>{const{position:N}=Z.props;V.has(N)||V.set(N,[]),V.get(N).push(Z)}),Array.from(V,Z=>B(Z[0],Z[1]))},containerRef:c,isToastActive:f}}function UC(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientX:e.clientX}function qC(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientY:e.clientY}function Hj(e){const[t,n]=Y.useState(!1),[s,c]=Y.useState(!1),h=Y.useRef(null),f=Y.useRef({start:0,x:0,y:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,boundingRect:null,didMove:!1}).current,o=Y.useRef(e),{autoClose:w,pauseOnHover:b,closeToast:A,onClick:C,closeOnClick:M}=e;function B(Q){if(e.draggable){Q.nativeEvent.type==="touchstart"&&Q.nativeEvent.preventDefault(),f.didMove=!1,document.addEventListener("mousemove",N),document.addEventListener("mouseup",F),document.addEventListener("touchmove",N),document.addEventListener("touchend",F);const fe=h.current;f.canCloseOnClick=!0,f.canDrag=!0,f.boundingRect=fe.getBoundingClientRect(),fe.style.transition="",f.x=UC(Q.nativeEvent),f.y=qC(Q.nativeEvent),e.draggableDirection==="x"?(f.start=f.x,f.removalDistance=fe.offsetWidth*(e.draggablePercent/100)):(f.start=f.y,f.removalDistance=fe.offsetHeight*(e.draggablePercent===80?1.5*e.draggablePercent:e.draggablePercent/100))}}function V(Q){if(f.boundingRect){const{top:fe,bottom:Ee,left:Re,right:Te}=f.boundingRect;Q.nativeEvent.type!=="touchend"&&e.pauseOnHover&&f.x>=Re&&f.x<=Te&&f.y>=fe&&f.y<=Ee?Z():j()}}function j(){n(!0)}function Z(){n(!1)}function N(Q){const fe=h.current;f.canDrag&&fe&&(f.didMove=!0,t&&Z(),f.x=UC(Q),f.y=qC(Q),f.delta=e.draggableDirection==="x"?f.x-f.start:f.y-f.start,f.start!==f.x&&(f.canCloseOnClick=!1),fe.style.transform=`translate${e.draggableDirection}(${f.delta}px)`,fe.style.opacity=""+(1-Math.abs(f.delta/f.removalDistance)))}function F(){document.removeEventListener("mousemove",N),document.removeEventListener("mouseup",F),document.removeEventListener("touchmove",N),document.removeEventListener("touchend",F);const Q=h.current;if(f.canDrag&&f.didMove&&Q){if(f.canDrag=!1,Math.abs(f.delta)>f.removalDistance)return c(!0),void e.closeToast();Q.style.transition="transform 0.2s, opacity 0.2s",Q.style.transform=`translate${e.draggableDirection}(0)`,Q.style.opacity="1"}}Y.useEffect(()=>{o.current=e}),Y.useEffect(()=>(h.current&&h.current.addEventListener("d",j,{once:!0}),fs(e.onOpen)&&e.onOpen(Y.isValidElement(e.children)&&e.children.props),()=>{const Q=o.current;fs(Q.onClose)&&Q.onClose(Y.isValidElement(Q.children)&&Q.children.props)}),[]),Y.useEffect(()=>(e.pauseOnFocusLoss&&(document.hasFocus()||Z(),window.addEventListener("focus",j),window.addEventListener("blur",Z)),()=>{e.pauseOnFocusLoss&&(window.removeEventListener("focus",j),window.removeEventListener("blur",Z))}),[e.pauseOnFocusLoss]);const W={onMouseDown:B,onTouchStart:B,onMouseUp:V,onTouchEnd:V};return w&&b&&(W.onMouseEnter=Z,W.onMouseLeave=j),M&&(W.onClick=Q=>{C&&C(Q),f.canCloseOnClick&&A()}),{playToast:j,pauseToast:Z,isRunning:t,preventExitTransition:s,toastRef:h,eventHandlers:W}}function UR(e){let{closeToast:t,theme:n,ariaLabel:s="close"}=e;return bt.createElement("button",{className:`Toastify__close-button Toastify__close-button--${n}`,type:"button",onClick:c=>{c.stopPropagation(),t(c)},"aria-label":s},bt.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},bt.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function Kj(e){let{delay:t,isRunning:n,closeToast:s,type:c="default",hide:h,className:f,style:o,controlledProgress:w,progress:b,rtl:A,isIn:C,theme:M}=e;const B=h||w&&b===0,V={...o,animationDuration:`${t}ms`,animationPlayState:n?"running":"paused",opacity:B?0:1};w&&(V.transform=`scaleX(${b})`);const j=Ll("Toastify__progress-bar",w?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${M}`,`Toastify__progress-bar--${c}`,{"Toastify__progress-bar--rtl":A}),Z=fs(f)?f({rtl:A,type:c,defaultClassName:j}):Ll(j,f);return bt.createElement("div",{role:"progressbar","aria-hidden":B?"true":"false","aria-label":"notification timer",className:Z,style:V,[w&&b>=1?"onTransitionEnd":"onAnimationEnd"]:w&&b<1?null:()=>{C&&s()}})}const Xj=e=>{const{isRunning:t,preventExitTransition:n,toastRef:s,eventHandlers:c}=Hj(e),{closeButton:h,children:f,autoClose:o,onClick:w,type:b,hideProgressBar:A,closeToast:C,transition:M,position:B,className:V,style:j,bodyClassName:Z,bodyStyle:N,progressClassName:F,progressStyle:W,updateId:Q,role:fe,progress:Ee,rtl:Re,toastId:Te,deleteToast:Ne,isIn:ke,isLoading:ft,iconOut:je,closeOnClick:st,theme:ut}=e,Tt=Ll("Toastify__toast",`Toastify__toast-theme--${ut}`,`Toastify__toast--${b}`,{"Toastify__toast--rtl":Re},{"Toastify__toast--close-on-click":st}),ht=fs(V)?V({rtl:Re,position:B,type:b,defaultClassName:Tt}):Ll(Tt,V),Ue=!!Ee||!o,De={closeToast:C,type:b,theme:ut};let Xe=null;return h===!1||(Xe=fs(h)?h(De):Y.isValidElement(h)?Y.cloneElement(h,De):UR(De)),bt.createElement(M,{isIn:ke,done:Ne,position:B,preventExitTransition:n,nodeRef:s},bt.createElement("div",{id:Te,onClick:w,className:ht,...c,style:j,ref:s},bt.createElement("div",{...ke&&{role:fe},className:fs(Z)?Z({type:b}):Ll("Toastify__toast-body",Z),style:N},je!=null&&bt.createElement("div",{className:Ll("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!ft})},je),bt.createElement("div",null,f)),Xe,bt.createElement(Kj,{...Q&&!Ue?{key:`pb-${Q}`}:{},rtl:Re,theme:ut,delay:o,isRunning:t,isIn:ke,closeToast:C,hide:A,type:b,style:W,className:F,controlledProgress:Ue,progress:Ee||0})))},dx=function(e,t){return t===void 0&&(t=!1),{enter:`Toastify--animate Toastify__${e}-enter`,exit:`Toastify--animate Toastify__${e}-exit`,appendPosition:t}},Qj=hx(dx("bounce",!0));hx(dx("slide",!0));hx(dx("zoom"));hx(dx("flip"));const o1=Y.forwardRef((e,t)=>{const{getToastToRender:n,containerRef:s,isToastActive:c}=Wj(e),{className:h,style:f,rtl:o,containerId:w}=e;function b(A){const C=Ll("Toastify__toast-container",`Toastify__toast-container--${A}`,{"Toastify__toast-container--rtl":o});return fs(h)?h({position:A,rtl:o,defaultClassName:C}):Ll(C,gy(h))}return Y.useEffect(()=>{t&&(t.current=s.current)},[]),bt.createElement("div",{ref:s,className:"Toastify",id:w},n((A,C)=>{const M=C.length?{...f}:{...f,pointerEvents:"none"};return bt.createElement("div",{className:b(A),style:M,key:`container-${A}`},C.map((B,V)=>{let{content:j,props:Z}=B;return bt.createElement(Xj,{...Z,isIn:c(Z.toastId),style:{...Z.style,"--nth":V+1,"--len":C.length},key:`toast-${Z.key}`},j)}))}))});o1.displayName="ToastContainer",o1.defaultProps={position:"top-right",transition:Qj,autoClose:5e3,closeButton:UR,pauseOnHover:!0,pauseOnFocusLoss:!0,closeOnClick:!0,draggable:!0,draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};let GC,_0=new Map,ZC=[];$c.on(2,e=>{GC=e.containerId||e,_0.set(GC,e),ZC.forEach(t=>{$c.emit(0,t.content,t.options)}),ZC=[]}).on(3,e=>{_0.delete(e.containerId||e),_0.size===0&&$c.off(0).off(1).off(5)});const sc=()=>CM(),Po=N5;function Yj(){return K("h1",{children:"Something went wrong!"})}function WC(e){if(!e)return!0;try{const[,t]=e.split("."),n=JSON.parse(atob(t));return n.exp?n.exp*1e3<Date.now():!0}catch{return!0}}async function Jj(e){const t=await fetch("https://sujanadh.pythonanywhere.com/api/user/token/refresh/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refresh:e})});if(!t.ok)throw new Error("Failed to refresh token");return t.json()}function qR(){const[e,t]=Y.useState(!1),[n,s]=Y.useState(!0);return Y.useEffect(()=>{const c=async()=>{const f=localStorage.getItem("token"),o=localStorage.getItem("refresh_token");if(f&&!WC(f))t(!0);else if(o&&!WC(o))try{const w=await Jj(o);w.access?(localStorage.setItem("token",w.access),t(!0)):(t(!1),localStorage.removeItem("token"),localStorage.removeItem("refresh_token"))}catch{t(!1),localStorage.removeItem("token"),localStorage.removeItem("refresh_token")}else t(!1),localStorage.removeItem("token"),localStorage.removeItem("refresh_token");s(!1)};c();const h=()=>{s(!0),c()};return window.addEventListener("authChanged",h),()=>{window.removeEventListener("authChanged",h)}},[]),{isAuthenticated:e,loading:n}}function e$({isAuthenticated:e,redirectPath:t="/login",children:n}){return e?n||K(q4,{}):K(U4,{to:t,replace:!0})}function t$({routes:e,fallback:t=K(Yj,{})}){const{isAuthenticated:n,loading:s}=qR();return s?t:K(Y.Suspense,{fallback:t,children:K(Z4,{children:e==null?void 0:e.map(c=>{var h,f;return c.authenticated?K(pl,{element:K(e$,{isAuthenticated:n}),children:c!=null&&c.children?K(pl,{path:c.path,children:(h=c==null?void 0:c.children)==null?void 0:h.map(o=>K(pl,{path:o.path,element:K(o.component,{})},o.name))},c.name):K(pl,{path:c.path,element:K(c.component,{})},c.name)},c.name):c!=null&&c.children?K(pl,{path:c.path,children:(f=c==null?void 0:c.children)==null?void 0:f.map(o=>K(pl,{path:o.path,element:K(o.component,{})},o.name))},c.name):K(pl,{path:c.path,element:K(c.component,{})},c.name)})})})}function GR(e){var t,n,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var c=e.length;for(t=0;t<c;t++)e[t]&&(n=GR(e[t]))&&(s&&(s+=" "),s+=n)}else for(n in e)e[n]&&(s&&(s+=" "),s+=n);return s}function n$(){for(var e,t,n=0,s="",c=arguments.length;n<c;n++)(e=arguments[n])&&(t=GR(e))&&(s&&(s+=" "),s+=t);return s}function r$(){for(var e=0,t,n,s="";e<arguments.length;)(t=arguments[e++])&&(n=ZR(t))&&(s&&(s+=" "),s+=n);return s}function ZR(e){if(typeof e=="string")return e;for(var t,n="",s=0;s<e.length;s++)e[s]&&(t=ZR(e[s]))&&(n&&(n+=" "),n+=t);return n}var fS="-";function i$(e){var t=a$(e),n=e.conflictingClassGroups,s=e.conflictingClassGroupModifiers,c=s===void 0?{}:s;function h(o){var w=o.split(fS);return w[0]===""&&w.length!==1&&w.shift(),WR(w,t)||s$(o)}function f(o,w){var b=n[o]||[];return w&&c[o]?[].concat(b,c[o]):b}return{getClassGroupId:h,getConflictingClassGroupIds:f}}function WR(e,t){var f;if(e.length===0)return t.classGroupId;var n=e[0],s=t.nextPart.get(n),c=s?WR(e.slice(1),s):void 0;if(c)return c;if(t.validators.length!==0){var h=e.join(fS);return(f=t.validators.find(function(o){var w=o.validator;return w(h)}))==null?void 0:f.classGroupId}}var HC=/^\[(.+)\]$/;function s$(e){if(HC.test(e)){var t=HC.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}}function a$(e){var t=e.theme,n=e.prefix,s={nextPart:new Map,validators:[]},c=l$(Object.entries(e.classGroups),n);return c.forEach(function(h){var f=h[0],o=h[1];l1(o,s,f,t)}),s}function l1(e,t,n,s){e.forEach(function(c){if(typeof c=="string"){var h=c===""?t:KC(t,c);h.classGroupId=n;return}if(typeof c=="function"){if(o$(c)){l1(c(s),t,n,s);return}t.validators.push({validator:c,classGroupId:n});return}Object.entries(c).forEach(function(f){var o=f[0],w=f[1];l1(w,KC(t,o),n,s)})})}function KC(e,t){var n=e;return t.split(fS).forEach(function(s){n.nextPart.has(s)||n.nextPart.set(s,{nextPart:new Map,validators:[]}),n=n.nextPart.get(s)}),n}function o$(e){return e.isThemeGetter}function l$(e,t){return t?e.map(function(n){var s=n[0],c=n[1],h=c.map(function(f){return typeof f=="string"?t+f:typeof f=="object"?Object.fromEntries(Object.entries(f).map(function(o){var w=o[0],b=o[1];return[t+w,b]})):f});return[s,h]}):e}function c$(e){if(e<1)return{get:function(){},set:function(){}};var t=0,n=new Map,s=new Map;function c(h,f){n.set(h,f),t++,t>e&&(t=0,s=n,n=new Map)}return{get:function(f){var o=n.get(f);if(o!==void 0)return o;if((o=s.get(f))!==void 0)return c(f,o),o},set:function(f,o){n.has(f)?n.set(f,o):c(f,o)}}}var HR="!";function u$(e){var t=e.separator||":",n=t.length===1,s=t[0],c=t.length;return function(f){for(var o=[],w=0,b=0,A,C=0;C<f.length;C++){var M=f[C];if(w===0){if(M===s&&(n||f.slice(C,C+c)===t)){o.push(f.slice(b,C)),b=C+c;continue}if(M==="/"){A=C;continue}}M==="["?w++:M==="]"&&w--}var B=o.length===0?f:f.substring(b),V=B.startsWith(HR),j=V?B.substring(1):B,Z=A&&A>b?A-b:void 0;return{modifiers:o,hasImportantModifier:V,baseClassName:j,maybePostfixModifierPosition:Z}}}function h$(e){if(e.length<=1)return e;var t=[],n=[];return e.forEach(function(s){var c=s[0]==="[";c?(t.push.apply(t,n.sort().concat([s])),n=[]):n.push(s)}),t.push.apply(t,n.sort()),t}function d$(e){return{cache:c$(e.cacheSize),splitModifiers:u$(e),...i$(e)}}var f$=/\s+/;function p$(e,t){var n=t.splitModifiers,s=t.getClassGroupId,c=t.getConflictingClassGroupIds,h=new Set;return e.trim().split(f$).map(function(f){var o=n(f),w=o.modifiers,b=o.hasImportantModifier,A=o.baseClassName,C=o.maybePostfixModifierPosition,M=s(C?A.substring(0,C):A),B=!!C;if(!M){if(!C)return{isTailwindClass:!1,originalClassName:f};if(M=s(A),!M)return{isTailwindClass:!1,originalClassName:f};B=!1}var V=h$(w).join(":"),j=b?V+HR:V;return{isTailwindClass:!0,modifierId:j,classGroupId:M,originalClassName:f,hasPostfixModifier:B}}).reverse().filter(function(f){if(!f.isTailwindClass)return!0;var o=f.modifierId,w=f.classGroupId,b=f.hasPostfixModifier,A=o+w;return h.has(A)?!1:(h.add(A),c(w,b).forEach(function(C){return h.add(o+C)}),!0)}).reverse().map(function(f){return f.originalClassName}).join(" ")}function m$(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var s,c,h,f=o;function o(b){var A=t[0],C=t.slice(1),M=C.reduce(function(B,V){return V(B)},A());return s=d$(M),c=s.cache.get,h=s.cache.set,f=w,w(b)}function w(b){var A=c(b);if(A)return A;var C=p$(b,s);return h(b,C),C}return function(){return f(r$.apply(null,arguments))}}function Fn(e){var t=function(s){return s[e]||[]};return t.isThemeGetter=!0,t}var KR=/^\[(?:([a-z-]+):)?(.+)\]$/i,g$=/^\d+\/\d+$/,y$=new Set(["px","full","screen"]),v$=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,x$=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,_$=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function oa(e){return Uc(e)||y$.has(e)||g$.test(e)||c1(e)}function c1(e){return gu(e,"length",C$)}function w$(e){return gu(e,"size",XR)}function b$(e){return gu(e,"position",XR)}function S$(e){return gu(e,"url",P$)}function Ug(e){return gu(e,"number",Uc)}function Uc(e){return!Number.isNaN(Number(e))}function T$(e){return e.endsWith("%")&&Uc(e.slice(0,-1))}function zf(e){return XC(e)||gu(e,"number",XC)}function en(e){return KR.test(e)}function Of(){return!0}function dl(e){return v$.test(e)}function E$(e){return gu(e,"",A$)}function gu(e,t,n){var s=KR.exec(e);return s?s[1]?s[1]===t:n(s[2]):!1}function C$(e){return x$.test(e)}function XR(){return!1}function P$(e){return e.startsWith("url(")}function XC(e){return Number.isInteger(Number(e))}function A$(e){return _$.test(e)}function k$(){var e=Fn("colors"),t=Fn("spacing"),n=Fn("blur"),s=Fn("brightness"),c=Fn("borderColor"),h=Fn("borderRadius"),f=Fn("borderSpacing"),o=Fn("borderWidth"),w=Fn("contrast"),b=Fn("grayscale"),A=Fn("hueRotate"),C=Fn("invert"),M=Fn("gap"),B=Fn("gradientColorStops"),V=Fn("gradientColorStopPositions"),j=Fn("inset"),Z=Fn("margin"),N=Fn("opacity"),F=Fn("padding"),W=Fn("saturate"),Q=Fn("scale"),fe=Fn("sepia"),Ee=Fn("skew"),Re=Fn("space"),Te=Fn("translate"),Ne=function(){return["auto","contain","none"]},ke=function(){return["auto","hidden","clip","visible","scroll"]},ft=function(){return["auto",en,t]},je=function(){return[en,t]},st=function(){return["",oa]},ut=function(){return["auto",Uc,en]},Tt=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},ht=function(){return["solid","dashed","dotted","double","none"]},Ue=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},De=function(){return["start","end","center","between","around","evenly","stretch"]},Xe=function(){return["","0",en]},mt=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},zt=function(){return[Uc,Ug]},$t=function(){return[Uc,en]};return{cacheSize:500,theme:{colors:[Of],spacing:[oa],blur:["none","",dl,en],brightness:zt(),borderColor:[e],borderRadius:["none","","full",dl,en],borderSpacing:je(),borderWidth:st(),contrast:zt(),grayscale:Xe(),hueRotate:$t(),invert:Xe(),gap:je(),gradientColorStops:[e],gradientColorStopPositions:[T$,c1],inset:ft(),margin:ft(),opacity:zt(),padding:je(),saturate:zt(),scale:zt(),sepia:Xe(),skew:$t(),space:je(),translate:je()},classGroups:{aspect:[{aspect:["auto","square","video",en]}],container:["container"],columns:[{columns:[dl]}],"break-after":[{"break-after":mt()}],"break-before":[{"break-before":mt()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(Tt(),[en])}],overflow:[{overflow:ke()}],"overflow-x":[{"overflow-x":ke()}],"overflow-y":[{"overflow-y":ke()}],overscroll:[{overscroll:Ne()}],"overscroll-x":[{"overscroll-x":Ne()}],"overscroll-y":[{"overscroll-y":Ne()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[j]}],"inset-x":[{"inset-x":[j]}],"inset-y":[{"inset-y":[j]}],start:[{start:[j]}],end:[{end:[j]}],top:[{top:[j]}],right:[{right:[j]}],bottom:[{bottom:[j]}],left:[{left:[j]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",zf]}],basis:[{basis:ft()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",en]}],grow:[{grow:Xe()}],shrink:[{shrink:Xe()}],order:[{order:["first","last","none",zf]}],"grid-cols":[{"grid-cols":[Of]}],"col-start-end":[{col:["auto",{span:["full",zf]},en]}],"col-start":[{"col-start":ut()}],"col-end":[{"col-end":ut()}],"grid-rows":[{"grid-rows":[Of]}],"row-start-end":[{row:["auto",{span:[zf]},en]}],"row-start":[{"row-start":ut()}],"row-end":[{"row-end":ut()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",en]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",en]}],gap:[{gap:[M]}],"gap-x":[{"gap-x":[M]}],"gap-y":[{"gap-y":[M]}],"justify-content":[{justify:["normal"].concat(De())}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat(De(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(De(),["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[F]}],px:[{px:[F]}],py:[{py:[F]}],ps:[{ps:[F]}],pe:[{pe:[F]}],pt:[{pt:[F]}],pr:[{pr:[F]}],pb:[{pb:[F]}],pl:[{pl:[F]}],m:[{m:[Z]}],mx:[{mx:[Z]}],my:[{my:[Z]}],ms:[{ms:[Z]}],me:[{me:[Z]}],mt:[{mt:[Z]}],mr:[{mr:[Z]}],mb:[{mb:[Z]}],ml:[{ml:[Z]}],"space-x":[{"space-x":[Re]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[Re]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",en,t]}],"min-w":[{"min-w":["min","max","fit",en,oa]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[dl]},dl,en]}],h:[{h:[en,t,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",en,oa]}],"max-h":[{"max-h":[en,t,"min","max","fit"]}],"font-size":[{text:["base",dl,c1]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Ug]}],"font-family":[{font:[Of]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",en]}],"line-clamp":[{"line-clamp":["none",Uc,Ug]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",en,oa]}],"list-image":[{"list-image":["none",en]}],"list-style-type":[{list:["none","disc","decimal",en]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[N]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[N]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(ht(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",oa]}],"underline-offset":[{"underline-offset":["auto",en,oa]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:je()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",en]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",en]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[N]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(Tt(),[b$])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",w$]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},S$]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[V]}],"gradient-via-pos":[{via:[V]}],"gradient-to-pos":[{to:[V]}],"gradient-from":[{from:[B]}],"gradient-via":[{via:[B]}],"gradient-to":[{to:[B]}],rounded:[{rounded:[h]}],"rounded-s":[{"rounded-s":[h]}],"rounded-e":[{"rounded-e":[h]}],"rounded-t":[{"rounded-t":[h]}],"rounded-r":[{"rounded-r":[h]}],"rounded-b":[{"rounded-b":[h]}],"rounded-l":[{"rounded-l":[h]}],"rounded-ss":[{"rounded-ss":[h]}],"rounded-se":[{"rounded-se":[h]}],"rounded-ee":[{"rounded-ee":[h]}],"rounded-es":[{"rounded-es":[h]}],"rounded-tl":[{"rounded-tl":[h]}],"rounded-tr":[{"rounded-tr":[h]}],"rounded-br":[{"rounded-br":[h]}],"rounded-bl":[{"rounded-bl":[h]}],"border-w":[{border:[o]}],"border-w-x":[{"border-x":[o]}],"border-w-y":[{"border-y":[o]}],"border-w-s":[{"border-s":[o]}],"border-w-e":[{"border-e":[o]}],"border-w-t":[{"border-t":[o]}],"border-w-r":[{"border-r":[o]}],"border-w-b":[{"border-b":[o]}],"border-w-l":[{"border-l":[o]}],"border-opacity":[{"border-opacity":[N]}],"border-style":[{border:[].concat(ht(),["hidden"])}],"divide-x":[{"divide-x":[o]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[o]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[N]}],"divide-style":[{divide:ht()}],"border-color":[{border:[c]}],"border-color-x":[{"border-x":[c]}],"border-color-y":[{"border-y":[c]}],"border-color-t":[{"border-t":[c]}],"border-color-r":[{"border-r":[c]}],"border-color-b":[{"border-b":[c]}],"border-color-l":[{"border-l":[c]}],"divide-color":[{divide:[c]}],"outline-style":[{outline:[""].concat(ht())}],"outline-offset":[{"outline-offset":[en,oa]}],"outline-w":[{outline:[oa]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:st()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[N]}],"ring-offset-w":[{"ring-offset":[oa]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",dl,E$]}],"shadow-color":[{shadow:[Of]}],opacity:[{opacity:[N]}],"mix-blend":[{"mix-blend":Ue()}],"bg-blend":[{"bg-blend":Ue()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[s]}],contrast:[{contrast:[w]}],"drop-shadow":[{"drop-shadow":["","none",dl,en]}],grayscale:[{grayscale:[b]}],"hue-rotate":[{"hue-rotate":[A]}],invert:[{invert:[C]}],saturate:[{saturate:[W]}],sepia:[{sepia:[fe]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[s]}],"backdrop-contrast":[{"backdrop-contrast":[w]}],"backdrop-grayscale":[{"backdrop-grayscale":[b]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[A]}],"backdrop-invert":[{"backdrop-invert":[C]}],"backdrop-opacity":[{"backdrop-opacity":[N]}],"backdrop-saturate":[{"backdrop-saturate":[W]}],"backdrop-sepia":[{"backdrop-sepia":[fe]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[f]}],"border-spacing-x":[{"border-spacing-x":[f]}],"border-spacing-y":[{"border-spacing-y":[f]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",en]}],duration:[{duration:$t()}],ease:[{ease:["linear","in","out","in-out",en]}],delay:[{delay:$t()}],animate:[{animate:["none","spin","ping","pulse","bounce",en]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[Q]}],"scale-x":[{"scale-x":[Q]}],"scale-y":[{"scale-y":[Q]}],rotate:[{rotate:[zf,en]}],"translate-x":[{"translate-x":[Te]}],"translate-y":[{"translate-y":[Te]}],"skew-x":[{"skew-x":[Ee]}],"skew-y":[{"skew-y":[Ee]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",en]}],accent:[{accent:["auto",e]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",en]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":je()}],"scroll-mx":[{"scroll-mx":je()}],"scroll-my":[{"scroll-my":je()}],"scroll-ms":[{"scroll-ms":je()}],"scroll-me":[{"scroll-me":je()}],"scroll-mt":[{"scroll-mt":je()}],"scroll-mr":[{"scroll-mr":je()}],"scroll-mb":[{"scroll-mb":je()}],"scroll-ml":[{"scroll-ml":je()}],"scroll-p":[{"scroll-p":je()}],"scroll-px":[{"scroll-px":je()}],"scroll-py":[{"scroll-py":je()}],"scroll-ps":[{"scroll-ps":je()}],"scroll-pe":[{"scroll-pe":je()}],"scroll-pt":[{"scroll-pt":je()}],"scroll-pr":[{"scroll-pr":je()}],"scroll-pb":[{"scroll-pb":je()}],"scroll-pl":[{"scroll-pl":je()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",en]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[oa,Ug]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}var I$=m$(k$);function ac(...e){return I$(n$(e))}function fx({className:e="",children:t,gap:n,md:s,row:c,...h}){let f="";return s&&(f+="md:naxatw-flex-row "),K("div",{className:ac(`naxatw-flex naxatw-flex-col ${f}
      ${e}`),...h,style:{gap:n?`${n*.25}rem`:""},children:t})}function hs({className:e="",children:t,gap:n,...s}){return K("div",{className:ac(`naxatw-flex naxatw-flex-row
      ${e}`),...s,style:{gap:n?`${n*.25}rem`:""},children:t})}function qc({className:e="",children:t,gap:n,...s}){return K("div",{className:ac(`naxatw-flex naxatw-flex-col ${e}`),style:{gap:n?`${n*.25}rem`:""},...s,children:t})}const M$="/assets/landing-image-15b039a3.svg";function Ao({aspectRation:e,styleClass:t,src:n,alt:s,width:c,className:h}){return K("div",{className:`image-cover naxatw-aspect-${e} ${t}}  `,style:{aspectRatio:e},children:K("img",{src:n,alt:s,width:c,className:h})})}function R$(){return K("section",{className:"home naxatw-bg-primary naxatw-w-full naxatw-h-[35rem]",children:Ve(hs,{className:"naxatw-container naxatw-h-full naxatw-items-center naxatw-justify-between",children:[Ve(qc,{gap:10,children:[Ve("div",{className:"naxatw-animate-fade-up",children:[K("h1",{className:"naxatw-text-white naxatw-text-[5rem]",children:"GeoSewa"}),K("p",{className:"naxatw-text-white naxatw-tracking-widest naxatw-text-[1.15rem] naxatw-mt-3 naxatw-ml-3",children:"Your Spatial Reference!"})]}),K("p",{className:"naxatw-text-white naxatw-text-[1.5rem] naxatw-ml-3 naxatw-animate-fade-up",children:"Unlock your potential with notes and mock exam mastery!!"})]}),K(Ao,{src:M$,width:400,className:"naxatw-animate-fade-up naxatw-hidden md:naxatw-flex"})]})})}const D$="/assets/about-image-87671f32.svg";function L$(e){if(typeof Proxy>"u")return e;const t=new Map,n=(...s)=>e(...s);return new Proxy(n,{get:(s,c)=>c==="create"?e:(t.has(c)||t.set(c,e(c)),t.get(c))})}function Lp(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const u1=e=>Array.isArray(e);function QR(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let s=0;s<n;s++)if(t[s]!==e[s])return!1;return!0}function zp(e){return typeof e=="string"||Array.isArray(e)}function QC(e){const t=[{},{}];return e==null||e.values.forEach((n,s)=>{t[0][s]=n.get(),t[1][s]=n.getVelocity()}),t}function pS(e,t,n,s){if(typeof t=="function"){const[c,h]=QC(s);t=t(n!==void 0?n:e.custom,c,h)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[c,h]=QC(s);t=t(n!==void 0?n:e.custom,c,h)}return t}function px(e,t,n){const s=e.getProps();return pS(s,t,n!==void 0?n:s.custom,e)}const mS=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],gS=["initial",...mS],am=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],oc=new Set(am),Ga=e=>e*1e3,Mo=e=>e/1e3,z$={type:"spring",stiffness:500,damping:25,restSpeed:10},O$=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),F$={type:"keyframes",duration:.8},N$={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},B$=(e,{keyframes:t})=>t.length>2?F$:oc.has(e)?e.startsWith("scale")?O$(t[1]):z$:N$;function yS(e,t){return e?e[t]||e.default||e:void 0}const V$={skipAnimations:!1,useManualTiming:!1},j$=e=>e!==null;function mx(e,{repeat:t,repeatType:n="loop"},s){const c=e.filter(j$),h=t&&n!=="loop"&&t%2===1?0:c.length-1;return!h||s===void 0?c[h]:s}const Xr=e=>e;function $$(e){let t=new Set,n=new Set,s=!1,c=!1;const h=new WeakSet;let f={delta:0,timestamp:0,isProcessing:!1};function o(b){h.has(b)&&(w.schedule(b),e()),b(f)}const w={schedule:(b,A=!1,C=!1)=>{const B=C&&s?t:n;return A&&h.add(b),B.has(b)||B.add(b),b},cancel:b=>{n.delete(b),h.delete(b)},process:b=>{if(f=b,s){c=!0;return}s=!0,[t,n]=[n,t],n.clear(),t.forEach(o),s=!1,c&&(c=!1,w.process(b))}};return w}const qg=["read","resolveKeyframes","update","preRender","render","postRender"],U$=40;function YR(e,t){let n=!1,s=!0;const c={delta:0,timestamp:0,isProcessing:!1},h=()=>n=!0,f=qg.reduce((N,F)=>(N[F]=$$(h),N),{}),{read:o,resolveKeyframes:w,update:b,preRender:A,render:C,postRender:M}=f,B=()=>{const N=performance.now();n=!1,c.delta=s?1e3/60:Math.max(Math.min(N-c.timestamp,U$),1),c.timestamp=N,c.isProcessing=!0,o.process(c),w.process(c),b.process(c),A.process(c),C.process(c),M.process(c),c.isProcessing=!1,n&&t&&(s=!1,e(B))},V=()=>{n=!0,s=!0,c.isProcessing||e(B)};return{schedule:qg.reduce((N,F)=>{const W=f[F];return N[F]=(Q,fe=!1,Ee=!1)=>(n||V(),W.schedule(Q,fe,Ee)),N},{}),cancel:N=>{for(let F=0;F<qg.length;F++)f[qg[F]].cancel(N)},state:c,steps:f}}const{schedule:wn,cancel:Jl,state:Hr,steps:w0}=YR(typeof requestAnimationFrame<"u"?requestAnimationFrame:Xr,!0),JR=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,q$=1e-7,G$=12;function Z$(e,t,n,s,c){let h,f,o=0;do f=t+(n-t)/2,h=JR(f,s,c)-e,h>0?n=f:t=f;while(Math.abs(h)>q$&&++o<G$);return f}function om(e,t,n,s){if(e===t&&n===s)return Xr;const c=h=>Z$(h,0,1,e,n);return h=>h===0||h===1?h:JR(c(h),t,s)}const eD=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,tD=e=>t=>1-e(1-t),nD=om(.33,1.53,.69,.99),vS=tD(nD),rD=eD(vS),iD=e=>(e*=2)<1?.5*vS(e):.5*(2-Math.pow(2,-10*(e-1))),xS=e=>1-Math.sin(Math.acos(e)),sD=tD(xS),aD=eD(xS),oD=e=>/^0[^.\s]+$/u.test(e);function W$(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||oD(e):!0}let H$=Xr,lD=Xr;const cD=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),uD=e=>t=>typeof t=="string"&&t.startsWith(e),hD=uD("--"),K$=uD("var(--"),_S=e=>K$(e)?X$.test(e.split("/*")[0].trim()):!1,X$=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Q$=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Y$(e){const t=Q$.exec(e);if(!t)return[,];const[,n,s,c]=t;return[`--${n??s}`,c]}function dD(e,t,n=1){const[s,c]=Y$(e);if(!s)return;const h=window.getComputedStyle(t).getPropertyValue(s);if(h){const f=h.trim();return cD(f)?parseFloat(f):f}return _S(c)?dD(c,t,n+1):c}const ec=(e,t,n)=>n>t?t:n<e?e:n,vd={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Op={...vd,transform:e=>ec(0,1,e)},Gg={...vd,default:1},lm=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),gl=lm("deg"),Za=lm("%"),Nt=lm("px"),J$=lm("vh"),eU=lm("vw"),YC={...Za,parse:e=>Za.parse(e)/100,transform:e=>Za.transform(e*100)},tU=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),JC=e=>e===vd||e===Nt,eP=(e,t)=>parseFloat(e.split(", ")[t]),tP=(e,t)=>(n,{transform:s})=>{if(s==="none"||!s)return 0;const c=s.match(/^matrix3d\((.+)\)$/u);if(c)return eP(c[1],t);{const h=s.match(/^matrix\((.+)\)$/u);return h?eP(h[1],e):0}},nU=new Set(["x","y","z"]),rU=am.filter(e=>!nU.has(e));function iU(e){const t=[];return rU.forEach(n=>{const s=e.getValue(n);s!==void 0&&(t.push([n,s.get()]),s.set(n.startsWith("scale")?1:0))}),t}const rd={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:tP(4,13),y:tP(5,14)};rd.translateX=rd.x;rd.translateY=rd.y;const fD=e=>t=>t.test(e),sU={test:e=>e==="auto",parse:e=>e},pD=[vd,Nt,Za,gl,eU,J$,sU],nP=e=>pD.find(fD(e)),iu=new Set;let h1=!1,d1=!1;function mD(){if(d1){const e=Array.from(iu).filter(s=>s.needsMeasurement),t=new Set(e.map(s=>s.element)),n=new Map;t.forEach(s=>{const c=iU(s);c.length&&(n.set(s,c),s.render())}),e.forEach(s=>s.measureInitialState()),t.forEach(s=>{s.render();const c=n.get(s);c&&c.forEach(([h,f])=>{var o;(o=s.getValue(h))===null||o===void 0||o.set(f)})}),e.forEach(s=>s.measureEndState()),e.forEach(s=>{s.suspendedScrollY!==void 0&&window.scrollTo(0,s.suspendedScrollY)})}d1=!1,h1=!1,iu.forEach(e=>e.complete()),iu.clear()}function gD(){iu.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(d1=!0)})}function aU(){gD(),mD()}class wS{constructor(t,n,s,c,h,f=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=s,this.motionValue=c,this.element=h,this.isAsync=f}scheduleResolve(){this.isScheduled=!0,this.isAsync?(iu.add(this),h1||(h1=!0,wn.read(gD),wn.resolveKeyframes(mD))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:s,motionValue:c}=this;for(let h=0;h<t.length;h++)if(t[h]===null)if(h===0){const f=c==null?void 0:c.get(),o=t[t.length-1];if(f!==void 0)t[0]=f;else if(s&&n){const w=s.readValue(n,o);w!=null&&(t[0]=w)}t[0]===void 0&&(t[0]=o),c&&f===void 0&&c.set(t[0])}else t[h]=t[h-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),iu.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,iu.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const op=e=>Math.round(e*1e5)/1e5,bS=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function oU(e){return e==null}const lU=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,SS=(e,t)=>n=>!!(typeof n=="string"&&lU.test(n)&&n.startsWith(e)||t&&!oU(n)&&Object.prototype.hasOwnProperty.call(n,t)),yD=(e,t,n)=>s=>{if(typeof s!="string")return s;const[c,h,f,o]=s.match(bS);return{[e]:parseFloat(c),[t]:parseFloat(h),[n]:parseFloat(f),alpha:o!==void 0?parseFloat(o):1}},cU=e=>ec(0,255,e),b0={...vd,transform:e=>Math.round(cU(e))},Gc={test:SS("rgb","red"),parse:yD("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:s=1})=>"rgba("+b0.transform(e)+", "+b0.transform(t)+", "+b0.transform(n)+", "+op(Op.transform(s))+")"};function uU(e){let t="",n="",s="",c="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),s=e.substring(5,7),c=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),s=e.substring(3,4),c=e.substring(4,5),t+=t,n+=n,s+=s,c+=c),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(s,16),alpha:c?parseInt(c,16)/255:1}}const f1={test:SS("#"),parse:uU,transform:Gc.transform},vh={test:SS("hsl","hue"),parse:yD("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:s=1})=>"hsla("+Math.round(e)+", "+Za.transform(op(t))+", "+Za.transform(op(n))+", "+op(Op.transform(s))+")"},fi={test:e=>Gc.test(e)||f1.test(e)||vh.test(e),parse:e=>Gc.test(e)?Gc.parse(e):vh.test(e)?vh.parse(e):f1.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Gc.transform(e):vh.transform(e)},hU=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function dU(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(bS))===null||t===void 0?void 0:t.length)||0)+(((n=e.match(hU))===null||n===void 0?void 0:n.length)||0)>0}const vD="number",xD="color",fU="var",pU="var(",rP="${}",mU=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Fp(e){const t=e.toString(),n=[],s={color:[],number:[],var:[]},c=[];let h=0;const o=t.replace(mU,w=>(fi.test(w)?(s.color.push(h),c.push(xD),n.push(fi.parse(w))):w.startsWith(pU)?(s.var.push(h),c.push(fU),n.push(w)):(s.number.push(h),c.push(vD),n.push(parseFloat(w))),++h,rP)).split(rP);return{values:n,split:o,indexes:s,types:c}}function _D(e){return Fp(e).values}function wD(e){const{split:t,types:n}=Fp(e),s=t.length;return c=>{let h="";for(let f=0;f<s;f++)if(h+=t[f],c[f]!==void 0){const o=n[f];o===vD?h+=op(c[f]):o===xD?h+=fi.transform(c[f]):h+=c[f]}return h}}const gU=e=>typeof e=="number"?0:e;function yU(e){const t=_D(e);return wD(e)(t.map(gU))}const tc={test:dU,parse:_D,createTransformer:wD,getAnimatableNone:yU},vU=new Set(["brightness","contrast","saturate","opacity"]);function xU(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[s]=n.match(bS)||[];if(!s)return e;const c=n.replace(s,"");let h=vU.has(t)?1:0;return s!==n&&(h*=100),t+"("+h+c+")"}const _U=/\b([a-z-]*)\(.*?\)/gu,p1={...tc,getAnimatableNone:e=>{const t=e.match(_U);return t?t.map(xU).join(" "):e}},wU={borderWidth:Nt,borderTopWidth:Nt,borderRightWidth:Nt,borderBottomWidth:Nt,borderLeftWidth:Nt,borderRadius:Nt,radius:Nt,borderTopLeftRadius:Nt,borderTopRightRadius:Nt,borderBottomRightRadius:Nt,borderBottomLeftRadius:Nt,width:Nt,maxWidth:Nt,height:Nt,maxHeight:Nt,top:Nt,right:Nt,bottom:Nt,left:Nt,padding:Nt,paddingTop:Nt,paddingRight:Nt,paddingBottom:Nt,paddingLeft:Nt,margin:Nt,marginTop:Nt,marginRight:Nt,marginBottom:Nt,marginLeft:Nt,backgroundPositionX:Nt,backgroundPositionY:Nt},bU={rotate:gl,rotateX:gl,rotateY:gl,rotateZ:gl,scale:Gg,scaleX:Gg,scaleY:Gg,scaleZ:Gg,skew:gl,skewX:gl,skewY:gl,distance:Nt,translateX:Nt,translateY:Nt,translateZ:Nt,x:Nt,y:Nt,z:Nt,perspective:Nt,transformPerspective:Nt,opacity:Op,originX:YC,originY:YC,originZ:Nt},iP={...vd,transform:Math.round},TS={...wU,...bU,zIndex:iP,size:Nt,fillOpacity:Op,strokeOpacity:Op,numOctaves:iP},SU={...TS,color:fi,backgroundColor:fi,outlineColor:fi,fill:fi,stroke:fi,borderColor:fi,borderTopColor:fi,borderRightColor:fi,borderBottomColor:fi,borderLeftColor:fi,filter:p1,WebkitFilter:p1},ES=e=>SU[e];function bD(e,t){let n=ES(e);return n!==p1&&(n=tc),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const TU=new Set(["auto","none","0"]);function EU(e,t,n){let s=0,c;for(;s<e.length&&!c;){const h=e[s];typeof h=="string"&&!TU.has(h)&&Fp(h).values.length&&(c=e[s]),s++}if(c&&n)for(const h of t)e[h]=bD(n,c)}class SD extends wS{constructor(t,n,s,c,h){super(t,n,s,c,h,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:s}=this;if(!n||!n.current)return;super.readKeyframes();for(let w=0;w<t.length;w++){let b=t[w];if(typeof b=="string"&&(b=b.trim(),_S(b))){const A=dD(b,n.current);A!==void 0&&(t[w]=A),w===t.length-1&&(this.finalKeyframe=b)}}if(this.resolveNoneKeyframes(),!tU.has(s)||t.length!==2)return;const[c,h]=t,f=nP(c),o=nP(h);if(f!==o)if(JC(f)&&JC(o))for(let w=0;w<t.length;w++){const b=t[w];typeof b=="string"&&(t[w]=parseFloat(b))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,s=[];for(let c=0;c<t.length;c++)W$(t[c])&&s.push(c);s.length&&EU(t,s,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:s}=this;if(!t||!t.current)return;s==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=rd[s](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const c=n[n.length-1];c!==void 0&&t.getValue(s,c).jump(c,!1)}measureEndState(){var t;const{element:n,name:s,unresolvedKeyframes:c}=this;if(!n||!n.current)return;const h=n.getValue(s);h&&h.jump(this.measuredOrigin,!1);const f=c.length-1,o=c[f];c[f]=rd[s](n.measureViewportBox(),window.getComputedStyle(n.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),!((t=this.removedTransforms)===null||t===void 0)&&t.length&&this.removedTransforms.forEach(([w,b])=>{n.getValue(w).set(b)}),this.resolveNoneKeyframes()}}function CS(e){return typeof e=="function"}let yy;function CU(){yy=void 0}const Wa={now:()=>(yy===void 0&&Wa.set(Hr.isProcessing||V$.useManualTiming?Hr.timestamp:performance.now()),yy),set:e=>{yy=e,queueMicrotask(CU)}},sP=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(tc.test(e)||e==="0")&&!e.startsWith("url("));function PU(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function AU(e,t,n,s){const c=e[0];if(c===null)return!1;if(t==="display"||t==="visibility")return!0;const h=e[e.length-1],f=sP(c,t),o=sP(h,t);return!f||!o?!1:PU(e)||(n==="spring"||CS(n))&&s}const kU=40;class TD{constructor({autoplay:t=!0,delay:n=0,type:s="keyframes",repeat:c=0,repeatDelay:h=0,repeatType:f="loop",...o}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Wa.now(),this.options={autoplay:t,delay:n,type:s,repeat:c,repeatDelay:h,repeatType:f,...o},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>kU?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&aU(),this._resolved}onKeyframesResolved(t,n){this.resolvedAt=Wa.now(),this.hasAttemptedResolve=!0;const{name:s,type:c,velocity:h,delay:f,onComplete:o,onUpdate:w,isGenerator:b}=this.options;if(!b&&!AU(t,s,c,h))if(f)this.options.duration=0;else{w==null||w(mx(t,this.options,n)),o==null||o(),this.resolveFinishedPromise();return}const A=this.initPlayback(t,n);A!==!1&&(this._resolved={keyframes:t,finalKeyframe:n,...A},this.onPostResolved())}onPostResolved(){}then(t,n){return this.currentFinishedPromise.then(t,n)}updateFinishedPromise(){this.currentFinishedPromise=new Promise(t=>{this.resolveFinishedPromise=t})}}function ED(e,t){return t?e*(1e3/t):0}const IU=5;function CD(e,t,n){const s=Math.max(t-IU,0);return ED(n-e(s),t-s)}const S0=.001,MU=.01,aP=10,RU=.05,DU=1;function LU({duration:e=800,bounce:t=.25,velocity:n=0,mass:s=1}){let c,h;H$(e<=Ga(aP));let f=1-t;f=ec(RU,DU,f),e=ec(MU,aP,Mo(e)),f<1?(c=b=>{const A=b*f,C=A*e,M=A-n,B=m1(b,f),V=Math.exp(-C);return S0-M/B*V},h=b=>{const C=b*f*e,M=C*n+n,B=Math.pow(f,2)*Math.pow(b,2)*e,V=Math.exp(-C),j=m1(Math.pow(b,2),f);return(-c(b)+S0>0?-1:1)*((M-B)*V)/j}):(c=b=>{const A=Math.exp(-b*e),C=(b-n)*e+1;return-S0+A*C},h=b=>{const A=Math.exp(-b*e),C=(n-b)*(e*e);return A*C});const o=5/e,w=OU(c,h,o);if(e=Ga(e),isNaN(w))return{stiffness:100,damping:10,duration:e};{const b=Math.pow(w,2)*s;return{stiffness:b,damping:f*2*Math.sqrt(s*b),duration:e}}}const zU=12;function OU(e,t,n){let s=n;for(let c=1;c<zU;c++)s=s-e(s)/t(s);return s}function m1(e,t){return e*Math.sqrt(1-t*t)}const FU=["duration","bounce"],NU=["stiffness","damping","mass"];function oP(e,t){return t.some(n=>e[n]!==void 0)}function BU(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!oP(e,NU)&&oP(e,FU)){const n=LU(e);t={...t,...n,mass:1},t.isResolvedFromDuration=!0}return t}function PD({keyframes:e,restDelta:t,restSpeed:n,...s}){const c=e[0],h=e[e.length-1],f={done:!1,value:c},{stiffness:o,damping:w,mass:b,duration:A,velocity:C,isResolvedFromDuration:M}=BU({...s,velocity:-Mo(s.velocity||0)}),B=C||0,V=w/(2*Math.sqrt(o*b)),j=h-c,Z=Mo(Math.sqrt(o/b)),N=Math.abs(j)<5;n||(n=N?.01:2),t||(t=N?.005:.5);let F;if(V<1){const W=m1(Z,V);F=Q=>{const fe=Math.exp(-V*Z*Q);return h-fe*((B+V*Z*j)/W*Math.sin(W*Q)+j*Math.cos(W*Q))}}else if(V===1)F=W=>h-Math.exp(-Z*W)*(j+(B+Z*j)*W);else{const W=Z*Math.sqrt(V*V-1);F=Q=>{const fe=Math.exp(-V*Z*Q),Ee=Math.min(W*Q,300);return h-fe*((B+V*Z*j)*Math.sinh(Ee)+W*j*Math.cosh(Ee))/W}}return{calculatedDuration:M&&A||null,next:W=>{const Q=F(W);if(M)f.done=W>=A;else{let fe=0;V<1&&(fe=W===0?Ga(B):CD(F,W,Q));const Ee=Math.abs(fe)<=n,Re=Math.abs(h-Q)<=t;f.done=Ee&&Re}return f.value=f.done?h:Q,f}}}function lP({keyframes:e,velocity:t=0,power:n=.8,timeConstant:s=325,bounceDamping:c=10,bounceStiffness:h=500,modifyTarget:f,min:o,max:w,restDelta:b=.5,restSpeed:A}){const C=e[0],M={done:!1,value:C},B=Te=>o!==void 0&&Te<o||w!==void 0&&Te>w,V=Te=>o===void 0?w:w===void 0||Math.abs(o-Te)<Math.abs(w-Te)?o:w;let j=n*t;const Z=C+j,N=f===void 0?Z:f(Z);N!==Z&&(j=N-C);const F=Te=>-j*Math.exp(-Te/s),W=Te=>N+F(Te),Q=Te=>{const Ne=F(Te),ke=W(Te);M.done=Math.abs(Ne)<=b,M.value=M.done?N:ke};let fe,Ee;const Re=Te=>{B(M.value)&&(fe=Te,Ee=PD({keyframes:[M.value,V(M.value)],velocity:CD(W,Te,M.value),damping:c,stiffness:h,restDelta:b,restSpeed:A}))};return Re(0),{calculatedDuration:null,next:Te=>{let Ne=!1;return!Ee&&fe===void 0&&(Ne=!0,Q(Te),Re(Te)),fe!==void 0&&Te>=fe?Ee.next(Te-fe):(!Ne&&Q(Te),M)}}}const VU=om(.42,0,1,1),jU=om(0,0,.58,1),AD=om(.42,0,.58,1),$U=e=>Array.isArray(e)&&typeof e[0]!="number",PS=e=>Array.isArray(e)&&typeof e[0]=="number",UU={linear:Xr,easeIn:VU,easeInOut:AD,easeOut:jU,circIn:xS,circInOut:aD,circOut:sD,backIn:vS,backInOut:rD,backOut:nD,anticipate:iD},cP=e=>{if(PS(e)){lD(e.length===4);const[t,n,s,c]=e;return om(t,n,s,c)}else if(typeof e=="string")return UU[e];return e},qU=(e,t)=>n=>t(e(n)),Ro=(...e)=>e.reduce(qU),id=(e,t,n)=>{const s=t-e;return s===0?1:(n-e)/s},Xn=(e,t,n)=>e+(t-e)*n;function T0(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function GU({hue:e,saturation:t,lightness:n,alpha:s}){e/=360,t/=100,n/=100;let c=0,h=0,f=0;if(!t)c=h=f=n;else{const o=n<.5?n*(1+t):n+t-n*t,w=2*n-o;c=T0(w,o,e+1/3),h=T0(w,o,e),f=T0(w,o,e-1/3)}return{red:Math.round(c*255),green:Math.round(h*255),blue:Math.round(f*255),alpha:s}}function sv(e,t){return n=>n>0?t:e}const E0=(e,t,n)=>{const s=e*e,c=n*(t*t-s)+s;return c<0?0:Math.sqrt(c)},ZU=[f1,Gc,vh],WU=e=>ZU.find(t=>t.test(e));function uP(e){const t=WU(e);if(!t)return!1;let n=t.parse(e);return t===vh&&(n=GU(n)),n}const hP=(e,t)=>{const n=uP(e),s=uP(t);if(!n||!s)return sv(e,t);const c={...n};return h=>(c.red=E0(n.red,s.red,h),c.green=E0(n.green,s.green,h),c.blue=E0(n.blue,s.blue,h),c.alpha=Xn(n.alpha,s.alpha,h),Gc.transform(c))},g1=new Set(["none","hidden"]);function HU(e,t){return g1.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function KU(e,t){return n=>Xn(e,t,n)}function AS(e){return typeof e=="number"?KU:typeof e=="string"?_S(e)?sv:fi.test(e)?hP:YU:Array.isArray(e)?kD:typeof e=="object"?fi.test(e)?hP:XU:sv}function kD(e,t){const n=[...e],s=n.length,c=e.map((h,f)=>AS(h)(h,t[f]));return h=>{for(let f=0;f<s;f++)n[f]=c[f](h);return n}}function XU(e,t){const n={...e,...t},s={};for(const c in n)e[c]!==void 0&&t[c]!==void 0&&(s[c]=AS(e[c])(e[c],t[c]));return c=>{for(const h in s)n[h]=s[h](c);return n}}function QU(e,t){var n;const s=[],c={color:0,var:0,number:0};for(let h=0;h<t.values.length;h++){const f=t.types[h],o=e.indexes[f][c[f]],w=(n=e.values[o])!==null&&n!==void 0?n:0;s[h]=w,c[f]++}return s}const YU=(e,t)=>{const n=tc.createTransformer(t),s=Fp(e),c=Fp(t);return s.indexes.var.length===c.indexes.var.length&&s.indexes.color.length===c.indexes.color.length&&s.indexes.number.length>=c.indexes.number.length?g1.has(e)&&!c.values.length||g1.has(t)&&!s.values.length?HU(e,t):Ro(kD(QU(s,c),c.values),n):sv(e,t)};function ID(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?Xn(e,t,n):AS(e)(e,t)}function JU(e,t,n){const s=[],c=n||ID,h=e.length-1;for(let f=0;f<h;f++){let o=c(e[f],e[f+1]);if(t){const w=Array.isArray(t)?t[f]||Xr:t;o=Ro(w,o)}s.push(o)}return s}function e8(e,t,{clamp:n=!0,ease:s,mixer:c}={}){const h=e.length;if(lD(h===t.length),h===1)return()=>t[0];if(h===2&&e[0]===e[1])return()=>t[1];e[0]>e[h-1]&&(e=[...e].reverse(),t=[...t].reverse());const f=JU(t,s,c),o=f.length,w=b=>{let A=0;if(o>1)for(;A<e.length-2&&!(b<e[A+1]);A++);const C=id(e[A],e[A+1],b);return f[A](C)};return n?b=>w(ec(e[0],e[h-1],b)):w}function t8(e,t){const n=e[e.length-1];for(let s=1;s<=t;s++){const c=id(0,t,s);e.push(Xn(n,1,c))}}function n8(e){const t=[0];return t8(t,e.length-1),t}function r8(e,t){return e.map(n=>n*t)}function i8(e,t){return e.map(()=>t||AD).splice(0,e.length-1)}function av({duration:e=300,keyframes:t,times:n,ease:s="easeInOut"}){const c=$U(s)?s.map(cP):cP(s),h={done:!1,value:t[0]},f=r8(n&&n.length===t.length?n:n8(t),e),o=e8(f,t,{ease:Array.isArray(c)?c:i8(t,c)});return{calculatedDuration:e,next:w=>(h.value=o(w),h.done=w>=e,h)}}const dP=2e4;function s8(e){let t=0;const n=50;let s=e.next(t);for(;!s.done&&t<dP;)t+=n,s=e.next(t);return t>=dP?1/0:t}const a8=e=>{const t=({timestamp:n})=>e(n);return{start:()=>wn.update(t,!0),stop:()=>Jl(t),now:()=>Hr.isProcessing?Hr.timestamp:Wa.now()}},o8={decay:lP,inertia:lP,tween:av,keyframes:av,spring:PD},l8=e=>e/100;class kS extends TD{constructor(t){super(t),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:w}=this.options;w&&w()};const{name:n,motionValue:s,element:c,keyframes:h}=this.options,f=(c==null?void 0:c.KeyframeResolver)||wS,o=(w,b)=>this.onKeyframesResolved(w,b);this.resolver=new f(h,o,n,s,c),this.resolver.scheduleResolve()}initPlayback(t){const{type:n="keyframes",repeat:s=0,repeatDelay:c=0,repeatType:h,velocity:f=0}=this.options,o=CS(n)?n:o8[n]||av;let w,b;o!==av&&typeof t[0]!="number"&&(w=Ro(l8,ID(t[0],t[1])),t=[0,100]);const A=o({...this.options,keyframes:t});h==="mirror"&&(b=o({...this.options,keyframes:[...t].reverse(),velocity:-f})),A.calculatedDuration===null&&(A.calculatedDuration=s8(A));const{calculatedDuration:C}=A,M=C+c,B=M*(s+1)-c;return{generator:A,mirroredGenerator:b,mapPercentToKeyframes:w,calculatedDuration:C,resolvedDuration:M,totalDuration:B}}onPostResolved(){const{autoplay:t=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!t?this.pause():this.state=this.pendingPlayState}tick(t,n=!1){const{resolved:s}=this;if(!s){const{keyframes:Te}=this.options;return{done:!0,value:Te[Te.length-1]}}const{finalKeyframe:c,generator:h,mirroredGenerator:f,mapPercentToKeyframes:o,keyframes:w,calculatedDuration:b,totalDuration:A,resolvedDuration:C}=s;if(this.startTime===null)return h.next(0);const{delay:M,repeat:B,repeatType:V,repeatDelay:j,onUpdate:Z}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-A/this.speed,this.startTime)),n?this.currentTime=t:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(t-this.startTime)*this.speed;const N=this.currentTime-M*(this.speed>=0?1:-1),F=this.speed>=0?N<0:N>A;this.currentTime=Math.max(N,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=A);let W=this.currentTime,Q=h;if(B){const Te=Math.min(this.currentTime,A)/C;let Ne=Math.floor(Te),ke=Te%1;!ke&&Te>=1&&(ke=1),ke===1&&Ne--,Ne=Math.min(Ne,B+1),!!(Ne%2)&&(V==="reverse"?(ke=1-ke,j&&(ke-=j/C)):V==="mirror"&&(Q=f)),W=ec(0,1,ke)*C}const fe=F?{done:!1,value:w[0]}:Q.next(W);o&&(fe.value=o(fe.value));let{done:Ee}=fe;!F&&b!==null&&(Ee=this.speed>=0?this.currentTime>=A:this.currentTime<=0);const Re=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&Ee);return Re&&c!==void 0&&(fe.value=mx(w,this.options,c)),Z&&Z(fe.value),Re&&this.finish(),fe}get duration(){const{resolved:t}=this;return t?Mo(t.calculatedDuration):0}get time(){return Mo(this.currentTime)}set time(t){t=Ga(t),this.currentTime=t,this.holdTime!==null||this.speed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.speed)}get speed(){return this.playbackSpeed}set speed(t){const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=Mo(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:t=a8,onPlay:n,startTime:s}=this.options;this.driver||(this.driver=t(h=>this.tick(h))),n&&n();const c=this.driver.now();this.holdTime!==null?this.startTime=c-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=c):this.startTime=s??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var t;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(t=this.currentTime)!==null&&t!==void 0?t:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:t}=this.options;t&&t()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}}const MD=new Set(["opacity","clipPath","filter","transform"]),c8=10,u8=(e,t)=>{let n="";const s=Math.max(Math.round(t/c8),2);for(let c=0;c<s;c++)n+=e(id(0,s-1,c))+", ";return`linear(${n.substring(0,n.length-2)})`};function IS(e){let t;return()=>(t===void 0&&(t=e()),t)}const h8={linearEasing:void 0};function d8(e,t){const n=IS(e);return()=>{var s;return(s=h8[t])!==null&&s!==void 0?s:n()}}const ov=d8(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing");function RD(e){return!!(typeof e=="function"&&ov()||!e||typeof e=="string"&&(e in y1||ov())||PS(e)||Array.isArray(e)&&e.every(RD))}const Wf=([e,t,n,s])=>`cubic-bezier(${e}, ${t}, ${n}, ${s})`,y1={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Wf([0,.65,.55,1]),circOut:Wf([.55,0,1,.45]),backIn:Wf([.31,.01,.66,-.59]),backOut:Wf([.33,1.53,.69,.99])};function DD(e,t){if(e)return typeof e=="function"&&ov()?u8(e,t):PS(e)?Wf(e):Array.isArray(e)?e.map(n=>DD(n,t)||y1.easeOut):y1[e]}function f8(e,t,n,{delay:s=0,duration:c=300,repeat:h=0,repeatType:f="loop",ease:o,times:w}={}){const b={[t]:n};w&&(b.offset=w);const A=DD(o,c);return Array.isArray(A)&&(b.easing=A),e.animate(b,{delay:s,duration:c,easing:Array.isArray(A)?"linear":A,fill:"both",iterations:h+1,direction:f==="reverse"?"alternate":"normal"})}function fP(e,t){e.timeline=t,e.onfinish=null}const p8=IS(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),lv=10,m8=2e4;function g8(e){return CS(e.type)||e.type==="spring"||!RD(e.ease)}function y8(e,t){const n=new kS({...t,keyframes:e,repeat:0,delay:0,isGenerator:!0});let s={done:!1,value:e[0]};const c=[];let h=0;for(;!s.done&&h<m8;)s=n.sample(h),c.push(s.value),h+=lv;return{times:void 0,keyframes:c,duration:h-lv,ease:"linear"}}const LD={anticipate:iD,backInOut:rD,circInOut:aD};function v8(e){return e in LD}class pP extends TD{constructor(t){super(t);const{name:n,motionValue:s,element:c,keyframes:h}=this.options;this.resolver=new SD(h,(f,o)=>this.onKeyframesResolved(f,o),n,s,c),this.resolver.scheduleResolve()}initPlayback(t,n){var s;let{duration:c=300,times:h,ease:f,type:o,motionValue:w,name:b,startTime:A}=this.options;if(!(!((s=w.owner)===null||s===void 0)&&s.current))return!1;if(typeof f=="string"&&ov()&&v8(f)&&(f=LD[f]),g8(this.options)){const{onComplete:M,onUpdate:B,motionValue:V,element:j,...Z}=this.options,N=y8(t,Z);t=N.keyframes,t.length===1&&(t[1]=t[0]),c=N.duration,h=N.times,f=N.ease,o="keyframes"}const C=f8(w.owner.current,b,t,{...this.options,duration:c,times:h,ease:f});return C.startTime=A??this.calcStartTime(),this.pendingTimeline?(fP(C,this.pendingTimeline),this.pendingTimeline=void 0):C.onfinish=()=>{const{onComplete:M}=this.options;w.set(mx(t,this.options,n)),M&&M(),this.cancel(),this.resolveFinishedPromise()},{animation:C,duration:c,times:h,type:o,ease:f,keyframes:t}}get duration(){const{resolved:t}=this;if(!t)return 0;const{duration:n}=t;return Mo(n)}get time(){const{resolved:t}=this;if(!t)return 0;const{animation:n}=t;return Mo(n.currentTime||0)}set time(t){const{resolved:n}=this;if(!n)return;const{animation:s}=n;s.currentTime=Ga(t)}get speed(){const{resolved:t}=this;if(!t)return 1;const{animation:n}=t;return n.playbackRate}set speed(t){const{resolved:n}=this;if(!n)return;const{animation:s}=n;s.playbackRate=t}get state(){const{resolved:t}=this;if(!t)return"idle";const{animation:n}=t;return n.playState}get startTime(){const{resolved:t}=this;if(!t)return null;const{animation:n}=t;return n.startTime}attachTimeline(t){if(!this._resolved)this.pendingTimeline=t;else{const{resolved:n}=this;if(!n)return Xr;const{animation:s}=n;fP(s,t)}return Xr}play(){if(this.isStopped)return;const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:t}=this;if(!t)return;const{animation:n,keyframes:s,duration:c,type:h,ease:f,times:o}=t;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:b,onUpdate:A,onComplete:C,element:M,...B}=this.options,V=new kS({...B,keyframes:s,duration:c,type:h,ease:f,times:o,isGenerator:!0}),j=Ga(this.time);b.setWithVelocity(V.sample(j-lv).value,V.sample(j).value,lv)}const{onStop:w}=this.options;w&&w(),this.cancel()}complete(){const{resolved:t}=this;t&&t.animation.finish()}cancel(){const{resolved:t}=this;t&&t.animation.cancel()}static supports(t){const{motionValue:n,name:s,repeatDelay:c,repeatType:h,damping:f,type:o}=t;return p8()&&s&&MD.has(s)&&n&&n.owner&&n.owner.current instanceof HTMLElement&&!n.owner.getProps().onUpdate&&!c&&h!=="mirror"&&f!==0&&o!=="inertia"}}const x8=IS(()=>window.ScrollTimeline!==void 0);class _8{constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}then(t,n){return Promise.all(this.animations).then(t).catch(n)}getAll(t){return this.animations[0][t]}setAll(t,n){for(let s=0;s<this.animations.length;s++)this.animations[s][t]=n}attachTimeline(t,n){const s=this.animations.map(c=>x8()&&c.attachTimeline?c.attachTimeline(t):n(c));return()=>{s.forEach((c,h)=>{c&&c(),this.animations[h].stop()})}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get startTime(){return this.getAll("startTime")}get duration(){let t=0;for(let n=0;n<this.animations.length;n++)t=Math.max(t,this.animations[n].duration);return t}runAll(t){this.animations.forEach(n=>n[t]())}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}function w8({when:e,delay:t,delayChildren:n,staggerChildren:s,staggerDirection:c,repeat:h,repeatType:f,repeatDelay:o,from:w,elapsed:b,...A}){return!!Object.keys(A).length}const MS=(e,t,n,s={},c,h)=>f=>{const o=yS(s,e)||{},w=o.delay||s.delay||0;let{elapsed:b=0}=s;b=b-Ga(w);let A={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...o,delay:-b,onUpdate:M=>{t.set(M),o.onUpdate&&o.onUpdate(M)},onComplete:()=>{f(),o.onComplete&&o.onComplete()},name:e,motionValue:t,element:h?void 0:c};w8(o)||(A={...A,...B$(e,A)}),A.duration&&(A.duration=Ga(A.duration)),A.repeatDelay&&(A.repeatDelay=Ga(A.repeatDelay)),A.from!==void 0&&(A.keyframes[0]=A.from);let C=!1;if((A.type===!1||A.duration===0&&!A.repeatDelay)&&(A.duration=0,A.delay===0&&(C=!0)),C&&!h&&t.get()!==void 0){const M=mx(A.keyframes,o);if(M!==void 0)return wn.update(()=>{A.onUpdate(M),A.onComplete()}),new _8([])}return!h&&pP.supports(A)?new pP(A):new kS(A)},b8=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),S8=e=>u1(e)?e[e.length-1]||0:e;function RS(e,t){e.indexOf(t)===-1&&e.push(t)}function DS(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class LS{constructor(){this.subscriptions=[]}add(t){return RS(this.subscriptions,t),()=>DS(this.subscriptions,t)}notify(t,n,s){const c=this.subscriptions.length;if(c)if(c===1)this.subscriptions[0](t,n,s);else for(let h=0;h<c;h++){const f=this.subscriptions[h];f&&f(t,n,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const mP=30,T8=e=>!isNaN(parseFloat(e));class E8{constructor(t,n={}){this.version="11.11.8",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(s,c=!0)=>{const h=Wa.now();this.updatedAt!==h&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(s),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),c&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=Wa.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=T8(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new LS);const s=this.events[t].add(n);return t==="change"?()=>{s(),wn.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,s){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-s}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Wa.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>mP)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,mP);return ED(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Np(e,t){return new E8(e,t)}function C8(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,Np(n))}function P8(e,t){const n=px(e,t);let{transitionEnd:s={},transition:c={},...h}=n||{};h={...h,...s};for(const f in h){const o=S8(h[f]);C8(e,f,o)}}const gx=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),A8="framerAppearId",zD="data-"+gx(A8);function OD(e){return e.props[zD]}const gi=e=>!!(e&&e.getVelocity);function k8(e){return!!(gi(e)&&e.add)}function FD(e){if(oc.has(e))return"transform";if(MD.has(e))return gx(e)}function v1(e,t){var n;if(!e.applyWillChange)return;const s=e.getValue("willChange");if(k8(s))return s.add(t);!(!((n=e.props.style)===null||n===void 0)&&n.willChange)&&FD(t)&&e.setStaticValue("willChange","transform")}function I8({protectedKeys:e,needsAnimating:t},n){const s=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,s}function ND(e,t,{delay:n=0,transitionOverride:s,type:c}={}){var h;let{transition:f=e.getDefaultTransition(),transitionEnd:o,...w}=t;s&&(f=s);const b=[],A=c&&e.animationState&&e.animationState.getState()[c];for(const C in w){const M=e.getValue(C,(h=e.latestValues[C])!==null&&h!==void 0?h:null),B=w[C];if(B===void 0||A&&I8(A,C))continue;const V={delay:n,...yS(f||{},C)};let j=!1;if(window.MotionHandoffAnimation){const N=OD(e);if(N){const F=window.MotionHandoffAnimation(N,C,wn);F!==null&&(V.startTime=F,j=!0)}}v1(e,C),M.start(MS(C,M,B,e.shouldReduceMotion&&oc.has(C)?{type:!1}:V,e,j));const Z=M.animation;Z&&b.push(Z)}return o&&Promise.all(b).then(()=>{wn.update(()=>{o&&P8(e,o)})}),b}function x1(e,t,n={}){var s;const c=px(e,t,n.type==="exit"?(s=e.presenceContext)===null||s===void 0?void 0:s.custom:void 0);let{transition:h=e.getDefaultTransition()||{}}=c||{};n.transitionOverride&&(h=n.transitionOverride);const f=c?()=>Promise.all(ND(e,c,n)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(b=0)=>{const{delayChildren:A=0,staggerChildren:C,staggerDirection:M}=h;return M8(e,t,A+b,C,M,n)}:()=>Promise.resolve(),{when:w}=h;if(w){const[b,A]=w==="beforeChildren"?[f,o]:[o,f];return b().then(()=>A())}else return Promise.all([f(),o(n.delay)])}function M8(e,t,n=0,s=0,c=1,h){const f=[],o=(e.variantChildren.size-1)*s,w=c===1?(b=0)=>b*s:(b=0)=>o-b*s;return Array.from(e.variantChildren).sort(R8).forEach((b,A)=>{b.notify("AnimationStart",t),f.push(x1(b,t,{...h,delay:n+w(A)}).then(()=>b.notify("AnimationComplete",t)))}),Promise.all(f)}function R8(e,t){return e.sortNodePosition(t)}function D8(e,t,n={}){e.notify("AnimationStart",t);let s;if(Array.isArray(t)){const c=t.map(h=>x1(e,h,n));s=Promise.all(c)}else if(typeof t=="string")s=x1(e,t,n);else{const c=typeof t=="function"?px(e,t,n.custom):t;s=Promise.all(ND(e,c,n))}return s.then(()=>{e.notify("AnimationComplete",t)})}const L8=gS.length;function BD(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?BD(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<L8;n++){const s=gS[n],c=e.props[s];(zp(c)||c===!1)&&(t[s]=c)}return t}const z8=[...mS].reverse(),O8=mS.length;function F8(e){return t=>Promise.all(t.map(({animation:n,options:s})=>D8(e,n,s)))}function N8(e){let t=F8(e),n=gP(),s=!0;const c=w=>(b,A)=>{var C;const M=px(e,A,w==="exit"?(C=e.presenceContext)===null||C===void 0?void 0:C.custom:void 0);if(M){const{transition:B,transitionEnd:V,...j}=M;b={...b,...j,...V}}return b};function h(w){t=w(e)}function f(w){const{props:b}=e,A=BD(e.parent)||{},C=[],M=new Set;let B={},V=1/0;for(let Z=0;Z<O8;Z++){const N=z8[Z],F=n[N],W=b[N]!==void 0?b[N]:A[N],Q=zp(W),fe=N===w?F.isActive:null;fe===!1&&(V=Z);let Ee=W===A[N]&&W!==b[N]&&Q;if(Ee&&s&&e.manuallyAnimateOnMount&&(Ee=!1),F.protectedKeys={...B},!F.isActive&&fe===null||!W&&!F.prevProp||Lp(W)||typeof W=="boolean")continue;const Re=B8(F.prevProp,W);let Te=Re||N===w&&F.isActive&&!Ee&&Q||Z>V&&Q,Ne=!1;const ke=Array.isArray(W)?W:[W];let ft=ke.reduce(c(N),{});fe===!1&&(ft={});const{prevResolvedValues:je={}}=F,st={...je,...ft},ut=Ue=>{Te=!0,M.has(Ue)&&(Ne=!0,M.delete(Ue)),F.needsAnimating[Ue]=!0;const De=e.getValue(Ue);De&&(De.liveStyle=!1)};for(const Ue in st){const De=ft[Ue],Xe=je[Ue];if(B.hasOwnProperty(Ue))continue;let mt=!1;u1(De)&&u1(Xe)?mt=!QR(De,Xe):mt=De!==Xe,mt?De!=null?ut(Ue):M.add(Ue):De!==void 0&&M.has(Ue)?ut(Ue):F.protectedKeys[Ue]=!0}F.prevProp=W,F.prevResolvedValues=ft,F.isActive&&(B={...B,...ft}),s&&e.blockInitialAnimation&&(Te=!1),Te&&(!(Ee&&Re)||Ne)&&C.push(...ke.map(Ue=>({animation:Ue,options:{type:N}})))}if(M.size){const Z={};M.forEach(N=>{const F=e.getBaseTarget(N),W=e.getValue(N);W&&(W.liveStyle=!0),Z[N]=F??null}),C.push({animation:Z})}let j=!!C.length;return s&&(b.initial===!1||b.initial===b.animate)&&!e.manuallyAnimateOnMount&&(j=!1),s=!1,j?t(C):Promise.resolve()}function o(w,b){var A;if(n[w].isActive===b)return Promise.resolve();(A=e.variantChildren)===null||A===void 0||A.forEach(M=>{var B;return(B=M.animationState)===null||B===void 0?void 0:B.setActive(w,b)}),n[w].isActive=b;const C=f(w);for(const M in n)n[M].protectedKeys={};return C}return{animateChanges:f,setActive:o,setAnimateFunction:h,getState:()=>n,reset:()=>{n=gP(),s=!0}}}function B8(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!QR(t,e):!1}function Ic(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function gP(){return{animate:Ic(!0),whileInView:Ic(),whileHover:Ic(),whileTap:Ic(),whileDrag:Ic(),whileFocus:Ic(),exit:Ic()}}class lc{constructor(t){this.isMounted=!1,this.node=t}update(){}}class V8 extends lc{constructor(t){super(t),t.animationState||(t.animationState=N8(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Lp(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)===null||t===void 0||t.call(this)}}let j8=0;class $8 extends lc{constructor(){super(...arguments),this.id=j8++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===s)return;const c=this.node.animationState.setActive("exit",!t);n&&!t&&c.then(()=>n(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const U8={animation:{Feature:V8},exit:{Feature:$8}},VD=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function yx(e,t="page"){return{point:{x:e[`${t}X`],y:e[`${t}Y`]}}}const q8=e=>t=>VD(t)&&e(t,yx(t));function ko(e,t,n,s={passive:!0}){return e.addEventListener(t,n,s),()=>e.removeEventListener(t,n)}function Do(e,t,n,s){return ko(e,t,q8(n),s)}const yP=(e,t)=>Math.abs(e-t);function G8(e,t){const n=yP(e.x,t.x),s=yP(e.y,t.y);return Math.sqrt(n**2+s**2)}class jD{constructor(t,n,{transformPagePoint:s,contextWindow:c,dragSnapToOrigin:h=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const C=P0(this.lastMoveEventInfo,this.history),M=this.startEvent!==null,B=G8(C.offset,{x:0,y:0})>=3;if(!M&&!B)return;const{point:V}=C,{timestamp:j}=Hr;this.history.push({...V,timestamp:j});const{onStart:Z,onMove:N}=this.handlers;M||(Z&&Z(this.lastMoveEvent,C),this.startEvent=this.lastMoveEvent),N&&N(this.lastMoveEvent,C)},this.handlePointerMove=(C,M)=>{this.lastMoveEvent=C,this.lastMoveEventInfo=C0(M,this.transformPagePoint),wn.update(this.updatePoint,!0)},this.handlePointerUp=(C,M)=>{this.end();const{onEnd:B,onSessionEnd:V,resumeAnimation:j}=this.handlers;if(this.dragSnapToOrigin&&j&&j(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const Z=P0(C.type==="pointercancel"?this.lastMoveEventInfo:C0(M,this.transformPagePoint),this.history);this.startEvent&&B&&B(C,Z),V&&V(C,Z)},!VD(t))return;this.dragSnapToOrigin=h,this.handlers=n,this.transformPagePoint=s,this.contextWindow=c||window;const f=yx(t),o=C0(f,this.transformPagePoint),{point:w}=o,{timestamp:b}=Hr;this.history=[{...w,timestamp:b}];const{onSessionStart:A}=n;A&&A(t,P0(o,this.history)),this.removeListeners=Ro(Do(this.contextWindow,"pointermove",this.handlePointerMove),Do(this.contextWindow,"pointerup",this.handlePointerUp),Do(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Jl(this.updatePoint)}}function C0(e,t){return t?{point:t(e.point)}:e}function vP(e,t){return{x:e.x-t.x,y:e.y-t.y}}function P0({point:e},t){return{point:e,delta:vP(e,$D(t)),offset:vP(e,Z8(t)),velocity:W8(t,.1)}}function Z8(e){return e[0]}function $D(e){return e[e.length-1]}function W8(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,s=null;const c=$D(e);for(;n>=0&&(s=e[n],!(c.timestamp-s.timestamp>Ga(t)));)n--;if(!s)return{x:0,y:0};const h=Mo(c.timestamp-s.timestamp);if(h===0)return{x:0,y:0};const f={x:(c.x-s.x)/h,y:(c.y-s.y)/h};return f.x===1/0&&(f.x=0),f.y===1/0&&(f.y=0),f}function UD(e){let t=null;return()=>{const n=()=>{t=null};return t===null?(t=e,n):!1}}const xP=UD("dragHorizontal"),_P=UD("dragVertical");function qD(e){let t=!1;if(e==="y")t=_P();else if(e==="x")t=xP();else{const n=xP(),s=_P();n&&s?t=()=>{n(),s()}:(n&&n(),s&&s())}return t}function GD(){const e=qD(!0);return e?(e(),!1):!0}function xh(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}const ZD=1e-4,H8=1-ZD,K8=1+ZD,WD=.01,X8=0-WD,Q8=0+WD;function vs(e){return e.max-e.min}function Y8(e,t,n){return Math.abs(e-t)<=n}function wP(e,t,n,s=.5){e.origin=s,e.originPoint=Xn(t.min,t.max,e.origin),e.scale=vs(n)/vs(t),e.translate=Xn(n.min,n.max,e.origin)-e.originPoint,(e.scale>=H8&&e.scale<=K8||isNaN(e.scale))&&(e.scale=1),(e.translate>=X8&&e.translate<=Q8||isNaN(e.translate))&&(e.translate=0)}function lp(e,t,n,s){wP(e.x,t.x,n.x,s?s.originX:void 0),wP(e.y,t.y,n.y,s?s.originY:void 0)}function bP(e,t,n){e.min=n.min+t.min,e.max=e.min+vs(t)}function J8(e,t,n){bP(e.x,t.x,n.x),bP(e.y,t.y,n.y)}function SP(e,t,n){e.min=t.min-n.min,e.max=e.min+vs(t)}function cp(e,t,n){SP(e.x,t.x,n.x),SP(e.y,t.y,n.y)}function e9(e,{min:t,max:n},s){return t!==void 0&&e<t?e=s?Xn(t,e,s.min):Math.max(e,t):n!==void 0&&e>n&&(e=s?Xn(n,e,s.max):Math.min(e,n)),e}function TP(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function t9(e,{top:t,left:n,bottom:s,right:c}){return{x:TP(e.x,n,c),y:TP(e.y,t,s)}}function EP(e,t){let n=t.min-e.min,s=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,s]=[s,n]),{min:n,max:s}}function n9(e,t){return{x:EP(e.x,t.x),y:EP(e.y,t.y)}}function r9(e,t){let n=.5;const s=vs(e),c=vs(t);return c>s?n=id(t.min,t.max-s,e.min):s>c&&(n=id(e.min,e.max-c,t.min)),ec(0,1,n)}function i9(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const _1=.35;function s9(e=_1){return e===!1?e=0:e===!0&&(e=_1),{x:CP(e,"left","right"),y:CP(e,"top","bottom")}}function CP(e,t,n){return{min:PP(e,t),max:PP(e,n)}}function PP(e,t){return typeof e=="number"?e:e[t]||0}const AP=()=>({translate:0,scale:1,origin:0,originPoint:0}),_h=()=>({x:AP(),y:AP()}),kP=()=>({min:0,max:0}),fr=()=>({x:kP(),y:kP()});function zs(e){return[e("x"),e("y")]}function HD({top:e,left:t,right:n,bottom:s}){return{x:{min:t,max:n},y:{min:e,max:s}}}function a9({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function o9(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),s=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:s.y,right:s.x}}function A0(e){return e===void 0||e===1}function w1({scale:e,scaleX:t,scaleY:n}){return!A0(e)||!A0(t)||!A0(n)}function Lc(e){return w1(e)||KD(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function KD(e){return IP(e.x)||IP(e.y)}function IP(e){return e&&e!=="0%"}function cv(e,t,n){const s=e-n,c=t*s;return n+c}function MP(e,t,n,s,c){return c!==void 0&&(e=cv(e,c,s)),cv(e,n,s)+t}function b1(e,t=0,n=1,s,c){e.min=MP(e.min,t,n,s,c),e.max=MP(e.max,t,n,s,c)}function XD(e,{x:t,y:n}){b1(e.x,t.translate,t.scale,t.originPoint),b1(e.y,n.translate,n.scale,n.originPoint)}const RP=.999999999999,DP=1.0000000000001;function l9(e,t,n,s=!1){const c=n.length;if(!c)return;t.x=t.y=1;let h,f;for(let o=0;o<c;o++){h=n[o],f=h.projectionDelta;const{visualElement:w}=h.options;w&&w.props.style&&w.props.style.display==="contents"||(s&&h.options.layoutScroll&&h.scroll&&h!==h.root&&bh(e,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),f&&(t.x*=f.x.scale,t.y*=f.y.scale,XD(e,f)),s&&Lc(h.latestValues)&&bh(e,h.latestValues))}t.x<DP&&t.x>RP&&(t.x=1),t.y<DP&&t.y>RP&&(t.y=1)}function wh(e,t){e.min=e.min+t,e.max=e.max+t}function LP(e,t,n,s,c=.5){const h=Xn(e.min,e.max,c);b1(e,t,n,h,s)}function bh(e,t){LP(e.x,t.x,t.scaleX,t.scale,t.originX),LP(e.y,t.y,t.scaleY,t.scale,t.originY)}function QD(e,t){return HD(o9(e.getBoundingClientRect(),t))}function c9(e,t,n){const s=QD(e,n),{scroll:c}=t;return c&&(wh(s.x,c.offset.x),wh(s.y,c.offset.y)),s}const YD=({current:e})=>e?e.ownerDocument.defaultView:null,u9=new WeakMap;class h9{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=fr(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const c=A=>{const{dragSnapToOrigin:C}=this.getProps();C?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(yx(A,"page").point)},h=(A,C)=>{const{drag:M,dragPropagation:B,onDragStart:V}=this.getProps();if(M&&!B&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=qD(M),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),zs(Z=>{let N=this.getAxisMotionValue(Z).get()||0;if(Za.test(N)){const{projection:F}=this.visualElement;if(F&&F.layout){const W=F.layout.layoutBox[Z];W&&(N=vs(W)*(parseFloat(N)/100))}}this.originPoint[Z]=N}),V&&wn.postRender(()=>V(A,C)),v1(this.visualElement,"transform");const{animationState:j}=this.visualElement;j&&j.setActive("whileDrag",!0)},f=(A,C)=>{const{dragPropagation:M,dragDirectionLock:B,onDirectionLock:V,onDrag:j}=this.getProps();if(!M&&!this.openGlobalLock)return;const{offset:Z}=C;if(B&&this.currentDirection===null){this.currentDirection=d9(Z),this.currentDirection!==null&&V&&V(this.currentDirection);return}this.updateAxis("x",C.point,Z),this.updateAxis("y",C.point,Z),this.visualElement.render(),j&&j(A,C)},o=(A,C)=>this.stop(A,C),w=()=>zs(A=>{var C;return this.getAnimationState(A)==="paused"&&((C=this.getAxisMotionValue(A).animation)===null||C===void 0?void 0:C.play())}),{dragSnapToOrigin:b}=this.getProps();this.panSession=new jD(t,{onSessionStart:c,onStart:h,onMove:f,onSessionEnd:o,resumeAnimation:w},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:b,contextWindow:YD(this.visualElement)})}stop(t,n){const s=this.isDragging;if(this.cancel(),!s)return;const{velocity:c}=n;this.startAnimation(c);const{onDragEnd:h}=this.getProps();h&&wn.postRender(()=>h(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,s){const{drag:c}=this.getProps();if(!s||!Zg(t,c,this.currentDirection))return;const h=this.getAxisMotionValue(t);let f=this.originPoint[t]+s[t];this.constraints&&this.constraints[t]&&(f=e9(f,this.constraints[t],this.elastic[t])),h.set(f)}resolveConstraints(){var t;const{dragConstraints:n,dragElastic:s}=this.getProps(),c=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,h=this.constraints;n&&xh(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&c?this.constraints=t9(c.layoutBox,n):this.constraints=!1,this.elastic=s9(s),h!==this.constraints&&c&&this.constraints&&!this.hasMutatedConstraints&&zs(f=>{this.constraints!==!1&&this.getAxisMotionValue(f)&&(this.constraints[f]=i9(c.layoutBox[f],this.constraints[f]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!xh(t))return!1;const s=t.current,{projection:c}=this.visualElement;if(!c||!c.layout)return!1;const h=c9(s,c.root,this.visualElement.getTransformPagePoint());let f=n9(c.layout.layoutBox,h);if(n){const o=n(a9(f));this.hasMutatedConstraints=!!o,o&&(f=HD(o))}return f}startAnimation(t){const{drag:n,dragMomentum:s,dragElastic:c,dragTransition:h,dragSnapToOrigin:f,onDragTransitionEnd:o}=this.getProps(),w=this.constraints||{},b=zs(A=>{if(!Zg(A,n,this.currentDirection))return;let C=w&&w[A]||{};f&&(C={min:0,max:0});const M=c?200:1e6,B=c?40:1e7,V={type:"inertia",velocity:s?t[A]:0,bounceStiffness:M,bounceDamping:B,timeConstant:750,restDelta:1,restSpeed:10,...h,...C};return this.startAxisValueAnimation(A,V)});return Promise.all(b).then(o)}startAxisValueAnimation(t,n){const s=this.getAxisMotionValue(t);return v1(this.visualElement,t),s.start(MS(t,s,0,n,this.visualElement,!1))}stopAnimation(){zs(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){zs(t=>{var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,s=this.visualElement.getProps(),c=s[n];return c||this.visualElement.getValue(t,(s.initial?s.initial[t]:void 0)||0)}snapToCursor(t){zs(n=>{const{drag:s}=this.getProps();if(!Zg(n,s,this.currentDirection))return;const{projection:c}=this.visualElement,h=this.getAxisMotionValue(n);if(c&&c.layout){const{min:f,max:o}=c.layout.layoutBox[n];h.set(t[n]-Xn(f,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:s}=this.visualElement;if(!xh(n)||!s||!this.constraints)return;this.stopAnimation();const c={x:0,y:0};zs(f=>{const o=this.getAxisMotionValue(f);if(o&&this.constraints!==!1){const w=o.get();c[f]=r9({min:w,max:w},this.constraints[f])}});const{transformTemplate:h}=this.visualElement.getProps();this.visualElement.current.style.transform=h?h({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),zs(f=>{if(!Zg(f,t,null))return;const o=this.getAxisMotionValue(f),{min:w,max:b}=this.constraints[f];o.set(Xn(w,b,c[f]))})}addListeners(){if(!this.visualElement.current)return;u9.set(this.visualElement,this);const t=this.visualElement.current,n=Do(t,"pointerdown",w=>{const{drag:b,dragListener:A=!0}=this.getProps();b&&A&&this.start(w)}),s=()=>{const{dragConstraints:w}=this.getProps();xh(w)&&w.current&&(this.constraints=this.resolveRefConstraints())},{projection:c}=this.visualElement,h=c.addEventListener("measure",s);c&&!c.layout&&(c.root&&c.root.updateScroll(),c.updateLayout()),wn.read(s);const f=ko(window,"resize",()=>this.scalePositionWithinConstraints()),o=c.addEventListener("didUpdate",({delta:w,hasLayoutChanged:b})=>{this.isDragging&&b&&(zs(A=>{const C=this.getAxisMotionValue(A);C&&(this.originPoint[A]+=w[A].translate,C.set(C.get()+w[A].translate))}),this.visualElement.render())});return()=>{f(),n(),h(),o&&o()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:s=!1,dragPropagation:c=!1,dragConstraints:h=!1,dragElastic:f=_1,dragMomentum:o=!0}=t;return{...t,drag:n,dragDirectionLock:s,dragPropagation:c,dragConstraints:h,dragElastic:f,dragMomentum:o}}}function Zg(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function d9(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class f9 extends lc{constructor(t){super(t),this.removeGroupControls=Xr,this.removeListeners=Xr,this.controls=new h9(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Xr}unmount(){this.removeGroupControls(),this.removeListeners()}}const zP=e=>(t,n)=>{e&&wn.postRender(()=>e(t,n))};class p9 extends lc{constructor(){super(...arguments),this.removePointerDownListener=Xr}onPointerDown(t){this.session=new jD(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:YD(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:s,onPanEnd:c}=this.node.getProps();return{onSessionStart:zP(t),onStart:zP(n),onMove:s,onEnd:(h,f)=>{delete this.session,c&&wn.postRender(()=>c(h,f))}}}mount(){this.removePointerDownListener=Do(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const zS=Y.createContext(null);function m9(){const e=Y.useContext(zS);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:n,register:s}=e,c=Y.useId();Y.useEffect(()=>s(c),[]);const h=Y.useCallback(()=>n&&n(c),[c,n]);return!t&&n?[!1,h]:[!0]}const JD=Y.createContext({}),eL=Y.createContext({}),vy={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function OP(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Ff={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(Nt.test(e))e=parseFloat(e);else return e;const n=OP(e,t.target.x),s=OP(e,t.target.y);return`${n}% ${s}%`}},g9={correct:(e,{treeScale:t,projectionDelta:n})=>{const s=e,c=tc.parse(e);if(c.length>5)return s;const h=tc.createTransformer(e),f=typeof c[0]!="number"?1:0,o=n.x.scale*t.x,w=n.y.scale*t.y;c[0+f]/=o,c[1+f]/=w;const b=Xn(o,w,.5);return typeof c[2+f]=="number"&&(c[2+f]/=b),typeof c[3+f]=="number"&&(c[3+f]/=b),h(c)}},uv={};function y9(e){Object.assign(uv,e)}const{schedule:OS,cancel:sH}=YR(queueMicrotask,!1);class v9 extends Y.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:s,layoutId:c}=this.props,{projection:h}=t;y9(x9),h&&(n.group&&n.group.add(h),s&&s.register&&c&&s.register(h),h.root.didUpdate(),h.addEventListener("animationComplete",()=>{this.safeToRemove()}),h.setOptions({...h.options,onExitComplete:()=>this.safeToRemove()})),vy.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:s,drag:c,isPresent:h}=this.props,f=s.projection;return f&&(f.isPresent=h,c||t.layoutDependency!==n||n===void 0?f.willUpdate():this.safeToRemove(),t.isPresent!==h&&(h?f.promote():f.relegate()||wn.postRender(()=>{const o=f.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),OS.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:s}=this.props,{projection:c}=t;c&&(c.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(c),s&&s.deregister&&s.deregister(c))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function tL(e){const[t,n]=m9(),s=Y.useContext(JD);return K(v9,{...e,layoutGroup:s,switchLayoutGroup:Y.useContext(eL),isPresent:t,safeToRemove:n})}const x9={borderRadius:{...Ff,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ff,borderTopRightRadius:Ff,borderBottomLeftRadius:Ff,borderBottomRightRadius:Ff,boxShadow:g9},nL=["TopLeft","TopRight","BottomLeft","BottomRight"],_9=nL.length,FP=e=>typeof e=="string"?parseFloat(e):e,NP=e=>typeof e=="number"||Nt.test(e);function w9(e,t,n,s,c,h){c?(e.opacity=Xn(0,n.opacity!==void 0?n.opacity:1,b9(s)),e.opacityExit=Xn(t.opacity!==void 0?t.opacity:1,0,S9(s))):h&&(e.opacity=Xn(t.opacity!==void 0?t.opacity:1,n.opacity!==void 0?n.opacity:1,s));for(let f=0;f<_9;f++){const o=`border${nL[f]}Radius`;let w=BP(t,o),b=BP(n,o);if(w===void 0&&b===void 0)continue;w||(w=0),b||(b=0),w===0||b===0||NP(w)===NP(b)?(e[o]=Math.max(Xn(FP(w),FP(b),s),0),(Za.test(b)||Za.test(w))&&(e[o]+="%")):e[o]=b}(t.rotate||n.rotate)&&(e.rotate=Xn(t.rotate||0,n.rotate||0,s))}function BP(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const b9=rL(0,.5,sD),S9=rL(.5,.95,Xr);function rL(e,t,n){return s=>s<e?0:s>t?1:n(id(e,t,s))}function VP(e,t){e.min=t.min,e.max=t.max}function Ds(e,t){VP(e.x,t.x),VP(e.y,t.y)}function jP(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function $P(e,t,n,s,c){return e-=t,e=cv(e,1/n,s),c!==void 0&&(e=cv(e,1/c,s)),e}function T9(e,t=0,n=1,s=.5,c,h=e,f=e){if(Za.test(t)&&(t=parseFloat(t),t=Xn(f.min,f.max,t/100)-f.min),typeof t!="number")return;let o=Xn(h.min,h.max,s);e===h&&(o-=t),e.min=$P(e.min,t,n,o,c),e.max=$P(e.max,t,n,o,c)}function UP(e,t,[n,s,c],h,f){T9(e,t[n],t[s],t[c],t.scale,h,f)}const E9=["x","scaleX","originX"],C9=["y","scaleY","originY"];function qP(e,t,n,s){UP(e.x,t,E9,n?n.x:void 0,s?s.x:void 0),UP(e.y,t,C9,n?n.y:void 0,s?s.y:void 0)}function GP(e){return e.translate===0&&e.scale===1}function iL(e){return GP(e.x)&&GP(e.y)}function ZP(e,t){return e.min===t.min&&e.max===t.max}function P9(e,t){return ZP(e.x,t.x)&&ZP(e.y,t.y)}function WP(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function sL(e,t){return WP(e.x,t.x)&&WP(e.y,t.y)}function HP(e){return vs(e.x)/vs(e.y)}function KP(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class A9{constructor(){this.members=[]}add(t){RS(this.members,t),t.scheduleRender()}remove(t){if(DS(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(c=>t===c);if(n===0)return!1;let s;for(let c=n;c>=0;c--){const h=this.members[c];if(h.isPresent!==!1){s=h;break}}return s?(this.promote(s),!0):!1}promote(t,n){const s=this.lead;if(t!==s&&(this.prevLead=s,this.lead=t,t.show(),s)){s.instance&&s.scheduleRender(),t.scheduleRender(),t.resumeFrom=s,n&&(t.resumeFrom.preserveOpacity=!0),s.snapshot&&(t.snapshot=s.snapshot,t.snapshot.latestValues=s.animationValues||s.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:c}=t.options;c===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:s}=t;n.onExitComplete&&n.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function k9(e,t,n){let s="";const c=e.x.translate/t.x,h=e.y.translate/t.y,f=(n==null?void 0:n.z)||0;if((c||h||f)&&(s=`translate3d(${c}px, ${h}px, ${f}px) `),(t.x!==1||t.y!==1)&&(s+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:b,rotate:A,rotateX:C,rotateY:M,skewX:B,skewY:V}=n;b&&(s=`perspective(${b}px) ${s}`),A&&(s+=`rotate(${A}deg) `),C&&(s+=`rotateX(${C}deg) `),M&&(s+=`rotateY(${M}deg) `),B&&(s+=`skewX(${B}deg) `),V&&(s+=`skewY(${V}deg) `)}const o=e.x.scale*t.x,w=e.y.scale*t.y;return(o!==1||w!==1)&&(s+=`scale(${o}, ${w})`),s||"none"}const I9=(e,t)=>e.depth-t.depth;class M9{constructor(){this.children=[],this.isDirty=!1}add(t){RS(this.children,t),this.isDirty=!0}remove(t){DS(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(I9),this.isDirty=!1,this.children.forEach(t)}}function xy(e){const t=gi(e)?e.get():e;return b8(t)?t.toValue():t}function R9(e,t){const n=Wa.now(),s=({timestamp:c})=>{const h=c-n;h>=t&&(Jl(s),e(h-t))};return wn.read(s,!0),()=>Jl(s)}function D9(e){return e instanceof SVGElement&&e.tagName!=="svg"}function L9(e,t,n){const s=gi(e)?e:Np(e);return s.start(MS("",s,t,n)),s.animation}const zc={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Hf=typeof window<"u"&&window.MotionDebug!==void 0,k0=["","X","Y","Z"],z9={visibility:"hidden"},XP=1e3;let O9=0;function I0(e,t,n,s){const{latestValues:c}=t;c[e]&&(n[e]=c[e],t.setStaticValue(e,0),s&&(s[e]=0))}function aL(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=OD(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:c,layoutId:h}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",wn,!(c||h))}const{parent:s}=e;s&&!s.hasCheckedOptimisedAppear&&aL(s)}function oL({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:s,resetTransform:c}){return class{constructor(f={},o=t==null?void 0:t()){this.id=O9++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Hf&&(zc.totalNodes=zc.resolvedTargetDeltas=zc.recalculatedProjection=0),this.nodes.forEach(B9),this.nodes.forEach(q9),this.nodes.forEach(G9),this.nodes.forEach(V9),Hf&&window.MotionDebug.record(zc)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=f,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let w=0;w<this.path.length;w++)this.path[w].shouldResetTransform=!0;this.root===this&&(this.nodes=new M9)}addEventListener(f,o){return this.eventHandlers.has(f)||this.eventHandlers.set(f,new LS),this.eventHandlers.get(f).add(o)}notifyListeners(f,...o){const w=this.eventHandlers.get(f);w&&w.notify(...o)}hasListeners(f){return this.eventHandlers.has(f)}mount(f,o=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=D9(f),this.instance=f;const{layoutId:w,layout:b,visualElement:A}=this.options;if(A&&!A.current&&A.mount(f),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),o&&(b||w)&&(this.isLayoutDirty=!0),e){let C;const M=()=>this.root.updateBlockedByResize=!1;e(f,()=>{this.root.updateBlockedByResize=!0,C&&C(),C=R9(M,250),vy.hasAnimatedSinceResize&&(vy.hasAnimatedSinceResize=!1,this.nodes.forEach(YP))})}w&&this.root.registerSharedNode(w,this),this.options.animate!==!1&&A&&(w||b)&&this.addEventListener("didUpdate",({delta:C,hasLayoutChanged:M,hasRelativeTargetChanged:B,layout:V})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const j=this.options.transition||A.getDefaultTransition()||X9,{onLayoutAnimationStart:Z,onLayoutAnimationComplete:N}=A.getProps(),F=!this.targetLayout||!sL(this.targetLayout,V)||B,W=!M&&B;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||W||M&&(F||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(C,W);const Q={...yS(j,"layout"),onPlay:Z,onComplete:N};(A.shouldReduceMotion||this.options.layoutRoot)&&(Q.delay=0,Q.type=!1),this.startAnimation(Q)}else M||YP(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=V})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const f=this.getStack();f&&f.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Jl(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Z9),this.animationId++)}getTransformTemplate(){const{visualElement:f}=this.options;return f&&f.getProps().transformTemplate}willUpdate(f=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&aL(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let A=0;A<this.path.length;A++){const C=this.path[A];C.shouldResetTransform=!0,C.updateScroll("snapshot"),C.options.layoutRoot&&C.willUpdate(!1)}const{layoutId:o,layout:w}=this.options;if(o===void 0&&!w)return;const b=this.getTransformTemplate();this.prevTransformTemplateValue=b?b(this.latestValues,""):void 0,this.updateSnapshot(),f&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(QP);return}this.isUpdating||this.nodes.forEach($9),this.isUpdating=!1,this.nodes.forEach(U9),this.nodes.forEach(F9),this.nodes.forEach(N9),this.clearAllSnapshots();const o=Wa.now();Hr.delta=ec(0,1e3/60,o-Hr.timestamp),Hr.timestamp=o,Hr.isProcessing=!0,w0.update.process(Hr),w0.preRender.process(Hr),w0.render.process(Hr),Hr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,OS.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(j9),this.sharedNodes.forEach(W9)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,wn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){wn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let w=0;w<this.path.length;w++)this.path[w].updateScroll();const f=this.layout;this.layout=this.measure(!1),this.layoutCorrected=fr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,f?f.layoutBox:void 0)}updateScroll(f="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===f&&(o=!1),o){const w=s(this.instance);this.scroll={animationId:this.root.animationId,phase:f,isRoot:w,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:w}}}resetTransform(){if(!c)return;const f=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!iL(this.projectionDelta),w=this.getTransformTemplate(),b=w?w(this.latestValues,""):void 0,A=b!==this.prevTransformTemplateValue;f&&(o||Lc(this.latestValues)||A)&&(c(this.instance,b),this.shouldResetTransform=!1,this.scheduleRender())}measure(f=!0){const o=this.measurePageBox();let w=this.removeElementScroll(o);return f&&(w=this.removeTransform(w)),Q9(w),{animationId:this.root.animationId,measuredBox:o,layoutBox:w,latestValues:{},source:this.id}}measurePageBox(){var f;const{visualElement:o}=this.options;if(!o)return fr();const w=o.measureViewportBox();if(!(((f=this.scroll)===null||f===void 0?void 0:f.wasRoot)||this.path.some(Y9))){const{scroll:A}=this.root;A&&(wh(w.x,A.offset.x),wh(w.y,A.offset.y))}return w}removeElementScroll(f){var o;const w=fr();if(Ds(w,f),!((o=this.scroll)===null||o===void 0)&&o.wasRoot)return w;for(let b=0;b<this.path.length;b++){const A=this.path[b],{scroll:C,options:M}=A;A!==this.root&&C&&M.layoutScroll&&(C.wasRoot&&Ds(w,f),wh(w.x,C.offset.x),wh(w.y,C.offset.y))}return w}applyTransform(f,o=!1){const w=fr();Ds(w,f);for(let b=0;b<this.path.length;b++){const A=this.path[b];!o&&A.options.layoutScroll&&A.scroll&&A!==A.root&&bh(w,{x:-A.scroll.offset.x,y:-A.scroll.offset.y}),Lc(A.latestValues)&&bh(w,A.latestValues)}return Lc(this.latestValues)&&bh(w,this.latestValues),w}removeTransform(f){const o=fr();Ds(o,f);for(let w=0;w<this.path.length;w++){const b=this.path[w];if(!b.instance||!Lc(b.latestValues))continue;w1(b.latestValues)&&b.updateSnapshot();const A=fr(),C=b.measurePageBox();Ds(A,C),qP(o,b.latestValues,b.snapshot?b.snapshot.layoutBox:void 0,A)}return Lc(this.latestValues)&&qP(o,this.latestValues),o}setTargetDelta(f){this.targetDelta=f,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(f){this.options={...this.options,...f,crossfade:f.crossfade!==void 0?f.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Hr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(f=!1){var o;const w=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=w.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=w.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=w.isSharedProjectionDirty);const b=!!this.resumingFrom||this!==w;if(!(f||b&&this.isSharedProjectionDirty||this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:C,layoutId:M}=this.options;if(!(!this.layout||!(C||M))){if(this.resolvedRelativeTargetAt=Hr.timestamp,!this.targetDelta&&!this.relativeTarget){const B=this.getClosestProjectingParent();B&&B.layout&&this.animationProgress!==1?(this.relativeParent=B,this.forceRelativeParentToResolveTarget(),this.relativeTarget=fr(),this.relativeTargetOrigin=fr(),cp(this.relativeTargetOrigin,this.layout.layoutBox,B.layout.layoutBox),Ds(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=fr(),this.targetWithTransforms=fr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),J8(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ds(this.target,this.layout.layoutBox),XD(this.target,this.targetDelta)):Ds(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const B=this.getClosestProjectingParent();B&&!!B.resumingFrom==!!this.resumingFrom&&!B.options.layoutScroll&&B.target&&this.animationProgress!==1?(this.relativeParent=B,this.forceRelativeParentToResolveTarget(),this.relativeTarget=fr(),this.relativeTargetOrigin=fr(),cp(this.relativeTargetOrigin,this.target,B.target),Ds(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Hf&&zc.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||w1(this.parent.latestValues)||KD(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var f;const o=this.getLead(),w=!!this.resumingFrom||this!==o;let b=!0;if((this.isProjectionDirty||!((f=this.parent)===null||f===void 0)&&f.isProjectionDirty)&&(b=!1),w&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(b=!1),this.resolvedRelativeTargetAt===Hr.timestamp&&(b=!1),b)return;const{layout:A,layoutId:C}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(A||C))return;Ds(this.layoutCorrected,this.layout.layoutBox);const M=this.treeScale.x,B=this.treeScale.y;l9(this.layoutCorrected,this.treeScale,this.path,w),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=fr());const{target:V}=o;if(!V){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(jP(this.prevProjectionDelta.x,this.projectionDelta.x),jP(this.prevProjectionDelta.y,this.projectionDelta.y)),lp(this.projectionDelta,this.layoutCorrected,V,this.latestValues),(this.treeScale.x!==M||this.treeScale.y!==B||!KP(this.projectionDelta.x,this.prevProjectionDelta.x)||!KP(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",V)),Hf&&zc.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(f=!0){var o;if((o=this.options.visualElement)===null||o===void 0||o.scheduleRender(),f){const w=this.getStack();w&&w.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=_h(),this.projectionDelta=_h(),this.projectionDeltaWithTransform=_h()}setAnimationOrigin(f,o=!1){const w=this.snapshot,b=w?w.latestValues:{},A={...this.latestValues},C=_h();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const M=fr(),B=w?w.source:void 0,V=this.layout?this.layout.source:void 0,j=B!==V,Z=this.getStack(),N=!Z||Z.members.length<=1,F=!!(j&&!N&&this.options.crossfade===!0&&!this.path.some(K9));this.animationProgress=0;let W;this.mixTargetDelta=Q=>{const fe=Q/1e3;JP(C.x,f.x,fe),JP(C.y,f.y,fe),this.setTargetDelta(C),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(cp(M,this.layout.layoutBox,this.relativeParent.layout.layoutBox),H9(this.relativeTarget,this.relativeTargetOrigin,M,fe),W&&P9(this.relativeTarget,W)&&(this.isProjectionDirty=!1),W||(W=fr()),Ds(W,this.relativeTarget)),j&&(this.animationValues=A,w9(A,b,this.latestValues,fe,F,N)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=fe},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(f){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Jl(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=wn.update(()=>{vy.hasAnimatedSinceResize=!0,this.currentAnimation=L9(0,XP,{...f,onUpdate:o=>{this.mixTargetDelta(o),f.onUpdate&&f.onUpdate(o)},onComplete:()=>{f.onComplete&&f.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const f=this.getStack();f&&f.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(XP),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const f=this.getLead();let{targetWithTransforms:o,target:w,layout:b,latestValues:A}=f;if(!(!o||!w||!b)){if(this!==f&&this.layout&&b&&lL(this.options.animationType,this.layout.layoutBox,b.layoutBox)){w=this.target||fr();const C=vs(this.layout.layoutBox.x);w.x.min=f.target.x.min,w.x.max=w.x.min+C;const M=vs(this.layout.layoutBox.y);w.y.min=f.target.y.min,w.y.max=w.y.min+M}Ds(o,w),bh(o,A),lp(this.projectionDeltaWithTransform,this.layoutCorrected,o,A)}}registerSharedNode(f,o){this.sharedNodes.has(f)||this.sharedNodes.set(f,new A9),this.sharedNodes.get(f).add(o);const b=o.options.initialPromotionConfig;o.promote({transition:b?b.transition:void 0,preserveFollowOpacity:b&&b.shouldPreserveFollowOpacity?b.shouldPreserveFollowOpacity(o):void 0})}isLead(){const f=this.getStack();return f?f.lead===this:!0}getLead(){var f;const{layoutId:o}=this.options;return o?((f=this.getStack())===null||f===void 0?void 0:f.lead)||this:this}getPrevLead(){var f;const{layoutId:o}=this.options;return o?(f=this.getStack())===null||f===void 0?void 0:f.prevLead:void 0}getStack(){const{layoutId:f}=this.options;if(f)return this.root.sharedNodes.get(f)}promote({needsReset:f,transition:o,preserveFollowOpacity:w}={}){const b=this.getStack();b&&b.promote(this,w),f&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const f=this.getStack();return f?f.relegate(this):!1}resetSkewAndRotation(){const{visualElement:f}=this.options;if(!f)return;let o=!1;const{latestValues:w}=f;if((w.z||w.rotate||w.rotateX||w.rotateY||w.rotateZ||w.skewX||w.skewY)&&(o=!0),!o)return;const b={};w.z&&I0("z",f,b,this.animationValues);for(let A=0;A<k0.length;A++)I0(`rotate${k0[A]}`,f,b,this.animationValues),I0(`skew${k0[A]}`,f,b,this.animationValues);f.render();for(const A in b)f.setStaticValue(A,b[A]),this.animationValues&&(this.animationValues[A]=b[A]);f.scheduleRender()}getProjectionStyles(f){var o,w;if(!this.instance||this.isSVG)return;if(!this.isVisible)return z9;const b={visibility:""},A=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,b.opacity="",b.pointerEvents=xy(f==null?void 0:f.pointerEvents)||"",b.transform=A?A(this.latestValues,""):"none",b;const C=this.getLead();if(!this.projectionDelta||!this.layout||!C.target){const j={};return this.options.layoutId&&(j.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,j.pointerEvents=xy(f==null?void 0:f.pointerEvents)||""),this.hasProjected&&!Lc(this.latestValues)&&(j.transform=A?A({},""):"none",this.hasProjected=!1),j}const M=C.animationValues||C.latestValues;this.applyTransformsToTarget(),b.transform=k9(this.projectionDeltaWithTransform,this.treeScale,M),A&&(b.transform=A(M,b.transform));const{x:B,y:V}=this.projectionDelta;b.transformOrigin=`${B.origin*100}% ${V.origin*100}% 0`,C.animationValues?b.opacity=C===this?(w=(o=M.opacity)!==null&&o!==void 0?o:this.latestValues.opacity)!==null&&w!==void 0?w:1:this.preserveOpacity?this.latestValues.opacity:M.opacityExit:b.opacity=C===this?M.opacity!==void 0?M.opacity:"":M.opacityExit!==void 0?M.opacityExit:0;for(const j in uv){if(M[j]===void 0)continue;const{correct:Z,applyTo:N}=uv[j],F=b.transform==="none"?M[j]:Z(M[j],C);if(N){const W=N.length;for(let Q=0;Q<W;Q++)b[N[Q]]=F}else b[j]=F}return this.options.layoutId&&(b.pointerEvents=C===this?xy(f==null?void 0:f.pointerEvents)||"":"none"),b}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(f=>{var o;return(o=f.currentAnimation)===null||o===void 0?void 0:o.stop()}),this.root.nodes.forEach(QP),this.root.sharedNodes.clear()}}}function F9(e){e.updateLayout()}function N9(e){var t;const n=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:c}=e.layout,{animationType:h}=e.options,f=n.source!==e.layout.source;h==="size"?zs(C=>{const M=f?n.measuredBox[C]:n.layoutBox[C],B=vs(M);M.min=s[C].min,M.max=M.min+B}):lL(h,n.layoutBox,s)&&zs(C=>{const M=f?n.measuredBox[C]:n.layoutBox[C],B=vs(s[C]);M.max=M.min+B,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[C].max=e.relativeTarget[C].min+B)});const o=_h();lp(o,s,n.layoutBox);const w=_h();f?lp(w,e.applyTransform(c,!0),n.measuredBox):lp(w,s,n.layoutBox);const b=!iL(o);let A=!1;if(!e.resumeFrom){const C=e.getClosestProjectingParent();if(C&&!C.resumeFrom){const{snapshot:M,layout:B}=C;if(M&&B){const V=fr();cp(V,n.layoutBox,M.layoutBox);const j=fr();cp(j,s,B.layoutBox),sL(V,j)||(A=!0),C.options.layoutRoot&&(e.relativeTarget=j,e.relativeTargetOrigin=V,e.relativeParent=C)}}}e.notifyListeners("didUpdate",{layout:s,snapshot:n,delta:w,layoutDelta:o,hasLayoutChanged:b,hasRelativeTargetChanged:A})}else if(e.isLead()){const{onExitComplete:s}=e.options;s&&s()}e.options.transition=void 0}function B9(e){Hf&&zc.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function V9(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function j9(e){e.clearSnapshot()}function QP(e){e.clearMeasurements()}function $9(e){e.isLayoutDirty=!1}function U9(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function YP(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function q9(e){e.resolveTargetDelta()}function G9(e){e.calcProjection()}function Z9(e){e.resetSkewAndRotation()}function W9(e){e.removeLeadSnapshot()}function JP(e,t,n){e.translate=Xn(t.translate,0,n),e.scale=Xn(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function eA(e,t,n,s){e.min=Xn(t.min,n.min,s),e.max=Xn(t.max,n.max,s)}function H9(e,t,n,s){eA(e.x,t.x,n.x,s),eA(e.y,t.y,n.y,s)}function K9(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const X9={duration:.45,ease:[.4,0,.1,1]},tA=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),nA=tA("applewebkit/")&&!tA("chrome/")?Math.round:Xr;function rA(e){e.min=nA(e.min),e.max=nA(e.max)}function Q9(e){rA(e.x),rA(e.y)}function lL(e,t,n){return e==="position"||e==="preserve-aspect"&&!Y8(HP(t),HP(n),.2)}function Y9(e){var t;return e!==e.root&&((t=e.scroll)===null||t===void 0?void 0:t.wasRoot)}const J9=oL({attachResizeListener:(e,t)=>ko(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),M0={current:void 0},cL=oL({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!M0.current){const e=new J9({});e.mount(window),e.setOptions({layoutScroll:!0}),M0.current=e}return M0.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),eq={pan:{Feature:p9},drag:{Feature:f9,ProjectionNode:cL,MeasureLayout:tL}};function iA(e,t){const n=t?"pointerenter":"pointerleave",s=t?"onHoverStart":"onHoverEnd",c=(h,f)=>{if(h.pointerType==="touch"||GD())return;const o=e.getProps();e.animationState&&o.whileHover&&e.animationState.setActive("whileHover",t);const w=o[s];w&&wn.postRender(()=>w(h,f))};return Do(e.current,n,c,{passive:!e.getProps()[s]})}class tq extends lc{mount(){this.unmount=Ro(iA(this.node,!0),iA(this.node,!1))}unmount(){}}class nq extends lc{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ro(ko(this.node.current,"focus",()=>this.onFocus()),ko(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const uL=(e,t)=>t?e===t?!0:uL(e,t.parentElement):!1;function R0(e,t){if(!t)return;const n=new PointerEvent("pointer"+e);t(n,yx(n))}class rq extends lc{constructor(){super(...arguments),this.removeStartListeners=Xr,this.removeEndListeners=Xr,this.removeAccessibleListeners=Xr,this.startPointerPress=(t,n)=>{if(this.isPressing)return;this.removeEndListeners();const s=this.node.getProps(),h=Do(window,"pointerup",(o,w)=>{if(!this.checkPressEnd())return;const{onTap:b,onTapCancel:A,globalTapTarget:C}=this.node.getProps(),M=!C&&!uL(this.node.current,o.target)?A:b;M&&wn.update(()=>M(o,w))},{passive:!(s.onTap||s.onPointerUp)}),f=Do(window,"pointercancel",(o,w)=>this.cancelPress(o,w),{passive:!(s.onTapCancel||s.onPointerCancel)});this.removeEndListeners=Ro(h,f),this.startPress(t,n)},this.startAccessiblePress=()=>{const t=h=>{if(h.key!=="Enter"||this.isPressing)return;const f=o=>{o.key!=="Enter"||!this.checkPressEnd()||R0("up",(w,b)=>{const{onTap:A}=this.node.getProps();A&&wn.postRender(()=>A(w,b))})};this.removeEndListeners(),this.removeEndListeners=ko(this.node.current,"keyup",f),R0("down",(o,w)=>{this.startPress(o,w)})},n=ko(this.node.current,"keydown",t),s=()=>{this.isPressing&&R0("cancel",(h,f)=>this.cancelPress(h,f))},c=ko(this.node.current,"blur",s);this.removeAccessibleListeners=Ro(n,c)}}startPress(t,n){this.isPressing=!0;const{onTapStart:s,whileTap:c}=this.node.getProps();c&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),s&&wn.postRender(()=>s(t,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!GD()}cancelPress(t,n){if(!this.checkPressEnd())return;const{onTapCancel:s}=this.node.getProps();s&&wn.postRender(()=>s(t,n))}mount(){const t=this.node.getProps(),n=Do(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),s=ko(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Ro(n,s)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const S1=new WeakMap,D0=new WeakMap,iq=e=>{const t=S1.get(e.target);t&&t(e)},sq=e=>{e.forEach(iq)};function aq({root:e,...t}){const n=e||document;D0.has(n)||D0.set(n,{});const s=D0.get(n),c=JSON.stringify(t);return s[c]||(s[c]=new IntersectionObserver(sq,{root:e,...t})),s[c]}function oq(e,t,n){const s=aq(t);return S1.set(e,n),s.observe(e),()=>{S1.delete(e),s.unobserve(e)}}const lq={some:0,all:1};class cq extends lc{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:s,amount:c="some",once:h}=t,f={root:n?n.current:void 0,rootMargin:s,threshold:typeof c=="number"?c:lq[c]},o=w=>{const{isIntersecting:b}=w;if(this.isInView===b||(this.isInView=b,h&&!b&&this.hasEnteredView))return;b&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",b);const{onViewportEnter:A,onViewportLeave:C}=this.node.getProps(),M=b?A:C;M&&M(w)};return oq(this.node.current,f,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(uq(t,n))&&this.startObserver()}unmount(){}}function uq({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const hq={inView:{Feature:cq},tap:{Feature:rq},focus:{Feature:nq},hover:{Feature:tq}},dq={layout:{ProjectionNode:cL,MeasureLayout:tL}},hL=Y.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),vx=Y.createContext({}),FS=typeof window<"u",fq=FS?Y.useLayoutEffect:Y.useEffect,dL=Y.createContext({strict:!1});function pq(e,t,n,s,c){var h,f;const{visualElement:o}=Y.useContext(vx),w=Y.useContext(dL),b=Y.useContext(zS),A=Y.useContext(hL).reducedMotion,C=Y.useRef();s=s||w.renderer,!C.current&&s&&(C.current=s(e,{visualState:t,parent:o,props:n,presenceContext:b,blockInitialAnimation:b?b.initial===!1:!1,reducedMotionConfig:A}));const M=C.current,B=Y.useContext(eL);M&&!M.projection&&c&&(M.type==="html"||M.type==="svg")&&mq(C.current,n,c,B),Y.useInsertionEffect(()=>{M&&M.update(n,b)});const V=n[zD],j=Y.useRef(!!V&&!(!((h=window.MotionHandoffIsComplete)===null||h===void 0)&&h.call(window,V))&&((f=window.MotionHasOptimisedAnimation)===null||f===void 0?void 0:f.call(window,V)));return fq(()=>{M&&(window.MotionIsMounted=!0,M.updateFeatures(),OS.render(M.render),j.current&&M.animationState&&M.animationState.animateChanges())}),Y.useEffect(()=>{M&&(!j.current&&M.animationState&&M.animationState.animateChanges(),j.current&&(queueMicrotask(()=>{var Z;(Z=window.MotionHandoffMarkAsComplete)===null||Z===void 0||Z.call(window,V)}),j.current=!1))}),M}function mq(e,t,n,s){const{layoutId:c,layout:h,drag:f,dragConstraints:o,layoutScroll:w,layoutRoot:b}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:fL(e.parent)),e.projection.setOptions({layoutId:c,layout:h,alwaysMeasureLayout:!!f||o&&xh(o),visualElement:e,animationType:typeof h=="string"?h:"both",initialPromotionConfig:s,layoutScroll:w,layoutRoot:b})}function fL(e){if(e)return e.options.allowProjection!==!1?e.projection:fL(e.parent)}function gq(e,t,n){return Y.useCallback(s=>{s&&e.mount&&e.mount(s),t&&(s?t.mount(s):t.unmount()),n&&(typeof n=="function"?n(s):xh(n)&&(n.current=s))},[t])}function xx(e){return Lp(e.animate)||gS.some(t=>zp(e[t]))}function pL(e){return!!(xx(e)||e.variants)}function yq(e,t){if(xx(e)){const{initial:n,animate:s}=e;return{initial:n===!1||zp(n)?n:void 0,animate:zp(s)?s:void 0}}return e.inherit!==!1?t:{}}function vq(e){const{initial:t,animate:n}=yq(e,Y.useContext(vx));return Y.useMemo(()=>({initial:t,animate:n}),[sA(t),sA(n)])}function sA(e){return Array.isArray(e)?e.join(" "):e}const aA={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},sd={};for(const e in aA)sd[e]={isEnabled:t=>aA[e].some(n=>!!t[n])};function xq(e){for(const t in e)sd[t]={...sd[t],...e[t]}}const _q=Symbol.for("motionComponentSymbol");function wq({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:s,Component:c}){e&&xq(e);function h(o,w){let b;const A={...Y.useContext(hL),...o,layoutId:bq(o)},{isStatic:C}=A,M=vq(o),B=s(o,C);if(!C&&FS){Sq();const V=Tq(A);b=V.MeasureLayout,M.visualElement=pq(c,B,A,t,V.ProjectionNode)}return Ve(vx.Provider,{value:M,children:[b&&M.visualElement?K(b,{visualElement:M.visualElement,...A}):null,n(c,o,gq(B,M.visualElement,w),B,C,M.visualElement)]})}const f=Y.forwardRef(h);return f[_q]=c,f}function bq({layoutId:e}){const t=Y.useContext(JD).id;return t&&e!==void 0?t+"-"+e:e}function Sq(e,t){Y.useContext(dL).strict}function Tq(e){const{drag:t,layout:n}=sd;if(!t&&!n)return{};const s={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}const Eq=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function NS(e){return typeof e!="string"||e.includes("-")?!1:!!(Eq.indexOf(e)>-1||/[A-Z]/u.test(e))}function mL(e,{style:t,vars:n},s,c){Object.assign(e.style,t,c&&c.getProjectionStyles(s));for(const h in n)e.style.setProperty(h,n[h])}const gL=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function yL(e,t,n,s){mL(e,t,void 0,s);for(const c in t.attrs)e.setAttribute(gL.has(c)?c:gx(c),t.attrs[c])}function vL(e,{layout:t,layoutId:n}){return oc.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!uv[e]||e==="opacity")}function BS(e,t,n){var s;const{style:c}=e,h={};for(const f in c)(gi(c[f])||t.style&&gi(t.style[f])||vL(f,e)||((s=n==null?void 0:n.getValue(f))===null||s===void 0?void 0:s.liveStyle)!==void 0)&&(h[f]=c[f]);return n&&c&&typeof c.willChange=="string"&&(n.applyWillChange=!1),h}function xL(e,t,n){const s=BS(e,t,n);for(const c in e)if(gi(e[c])||gi(t[c])){const h=am.indexOf(c)!==-1?"attr"+c.charAt(0).toUpperCase()+c.substring(1):c;s[h]=e[c]}return s}function Cq(e){const t=Y.useRef(null);return t.current===null&&(t.current=e()),t.current}function Pq({applyWillChange:e=!1,scrapeMotionValuesFromProps:t,createRenderState:n,onMount:s},c,h,f,o){const w={latestValues:Aq(c,h,f,o?!1:e,t),renderState:n()};return s&&(w.mount=b=>s(c,b,w)),w}const _L=e=>(t,n)=>{const s=Y.useContext(vx),c=Y.useContext(zS),h=()=>Pq(e,t,s,c,n);return n?h():Cq(h)};function oA(e,t,n){const s=Array.isArray(t)?t:[t];for(let c=0;c<s.length;c++){const h=pS(e,s[c]);if(h){const{transitionEnd:f,transition:o,...w}=h;n(w,f)}}}function Aq(e,t,n,s,c){var h;const f={};let o=s&&((h=e.style)===null||h===void 0?void 0:h.willChange)===void 0;const w=c(e,{});for(const j in w)f[j]=xy(w[j]);let{initial:b,animate:A}=e;const C=xx(e),M=pL(e);t&&M&&!C&&e.inherit!==!1&&(b===void 0&&(b=t.initial),A===void 0&&(A=t.animate));let B=n?n.initial===!1:!1;B=B||b===!1;const V=B?A:b;return V&&typeof V!="boolean"&&!Lp(V)&&oA(e,V,(j,Z)=>{for(const N in j){let F=j[N];if(Array.isArray(F)){const W=B?F.length-1:0;F=F[W]}F!==null&&(f[N]=F)}for(const N in Z)f[N]=Z[N]}),o&&A&&b!==!1&&!Lp(A)&&oA(e,A,j=>{for(const Z in j)if(FD(Z)){f.willChange="transform";return}}),f}const VS=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),wL=()=>({...VS(),attrs:{}}),bL=(e,t)=>t&&typeof e=="number"?t.transform(e):e,kq={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Iq=am.length;function Mq(e,t,n){let s="",c=!0;for(let h=0;h<Iq;h++){const f=am[h],o=e[f];if(o===void 0)continue;let w=!0;if(typeof o=="number"?w=o===(f.startsWith("scale")?1:0):w=parseFloat(o)===0,!w||n){const b=bL(o,TS[f]);if(!w){c=!1;const A=kq[f]||f;s+=`${A}(${b}) `}n&&(t[f]=b)}}return s=s.trim(),n?s=n(t,c?"":s):c&&(s="none"),s}function jS(e,t,n){const{style:s,vars:c,transformOrigin:h}=e;let f=!1,o=!1;for(const w in t){const b=t[w];if(oc.has(w)){f=!0;continue}else if(hD(w)){c[w]=b;continue}else{const A=bL(b,TS[w]);w.startsWith("origin")?(o=!0,h[w]=A):s[w]=A}}if(t.transform||(f||n?s.transform=Mq(t,e.transform,n):s.transform&&(s.transform="none")),o){const{originX:w="50%",originY:b="50%",originZ:A=0}=h;s.transformOrigin=`${w} ${b} ${A}`}}function lA(e,t,n){return typeof e=="string"?e:Nt.transform(t+n*e)}function Rq(e,t,n){const s=lA(t,e.x,e.width),c=lA(n,e.y,e.height);return`${s} ${c}`}const Dq={offset:"stroke-dashoffset",array:"stroke-dasharray"},Lq={offset:"strokeDashoffset",array:"strokeDasharray"};function zq(e,t,n=1,s=0,c=!0){e.pathLength=1;const h=c?Dq:Lq;e[h.offset]=Nt.transform(-s);const f=Nt.transform(t),o=Nt.transform(n);e[h.array]=`${f} ${o}`}function $S(e,{attrX:t,attrY:n,attrScale:s,originX:c,originY:h,pathLength:f,pathSpacing:o=1,pathOffset:w=0,...b},A,C){if(jS(e,b,C),A){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:M,style:B,dimensions:V}=e;M.transform&&(V&&(B.transform=M.transform),delete M.transform),V&&(c!==void 0||h!==void 0||B.transform)&&(B.transformOrigin=Rq(V,c!==void 0?c:.5,h!==void 0?h:.5)),t!==void 0&&(M.x=t),n!==void 0&&(M.y=n),s!==void 0&&(M.scale=s),f!==void 0&&zq(M,f,o,w,!1)}const US=e=>typeof e=="string"&&e.toLowerCase()==="svg",Oq={useVisualState:_L({scrapeMotionValuesFromProps:xL,createRenderState:wL,onMount:(e,t,{renderState:n,latestValues:s})=>{wn.read(()=>{try{n.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),wn.render(()=>{$S(n,s,US(t.tagName),e.transformTemplate),yL(t,n)})}})},Fq={useVisualState:_L({applyWillChange:!0,scrapeMotionValuesFromProps:BS,createRenderState:VS})};function SL(e,t,n){for(const s in t)!gi(t[s])&&!vL(s,n)&&(e[s]=t[s])}function Nq({transformTemplate:e},t){return Y.useMemo(()=>{const n=VS();return jS(n,t,e),Object.assign({},n.vars,n.style)},[t])}function Bq(e,t){const n=e.style||{},s={};return SL(s,n,e),Object.assign(s,Nq(e,t)),s}function Vq(e,t){const n={},s=Bq(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=s,n}const jq=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function hv(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||jq.has(e)}let TL=e=>!hv(e);function $q(e){e&&(TL=t=>t.startsWith("on")?!hv(t):e(t))}try{$q(require("@emotion/is-prop-valid").default)}catch{}function Uq(e,t,n){const s={};for(const c in e)c==="values"&&typeof e.values=="object"||(TL(c)||n===!0&&hv(c)||!t&&!hv(c)||e.draggable&&c.startsWith("onDrag"))&&(s[c]=e[c]);return s}function qq(e,t,n,s){const c=Y.useMemo(()=>{const h=wL();return $S(h,t,US(s),e.transformTemplate),{...h.attrs,style:{...h.style}}},[t]);if(e.style){const h={};SL(h,e.style,e),c.style={...h,...c.style}}return c}function Gq(e=!1){return(n,s,c,{latestValues:h},f)=>{const w=(NS(n)?qq:Vq)(s,h,f,n),b=Uq(s,typeof n=="string",e),A=n!==Y.Fragment?{...b,...w,ref:c}:{},{children:C}=s,M=Y.useMemo(()=>gi(C)?C.get():C,[C]);return Y.createElement(n,{...A,children:M})}}function Zq(e,t){return function(s,{forwardMotionProps:c}={forwardMotionProps:!1}){const f={...NS(s)?Oq:Fq,preloadedFeatures:e,useRender:Gq(c),createVisualElement:t,Component:s};return wq(f)}}const T1={current:null},EL={current:!1};function Wq(){if(EL.current=!0,!!FS)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>T1.current=e.matches;e.addListener(t),t()}else T1.current=!1}function Hq(e,t,n){for(const s in t){const c=t[s],h=n[s];if(gi(c))e.addValue(s,c);else if(gi(h))e.addValue(s,Np(c,{owner:e}));else if(h!==c)if(e.hasValue(s)){const f=e.getValue(s);f.liveStyle===!0?f.jump(c):f.hasAnimated||f.set(c)}else{const f=e.getStaticValue(s);e.addValue(s,Np(f!==void 0?f:c,{owner:e}))}}for(const s in n)t[s]===void 0&&e.removeValue(s);return t}const cA=new WeakMap,Kq=[...pD,fi,tc],Xq=e=>Kq.find(fD(e)),uA=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Qq{scrapeMotionValuesFromProps(t,n,s){return{}}constructor({parent:t,props:n,presenceContext:s,reducedMotionConfig:c,blockInitialAnimation:h,visualState:f},o={}){this.applyWillChange=!1,this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=wS,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const M=Wa.now();this.renderScheduledAt<M&&(this.renderScheduledAt=M,wn.render(this.render,!1,!0))};const{latestValues:w,renderState:b}=f;this.latestValues=w,this.baseTarget={...w},this.initialValues=n.initial?{...w}:{},this.renderState=b,this.parent=t,this.props=n,this.presenceContext=s,this.depth=t?t.depth+1:0,this.reducedMotionConfig=c,this.options=o,this.blockInitialAnimation=!!h,this.isControllingVariants=xx(n),this.isVariantNode=pL(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:A,...C}=this.scrapeMotionValuesFromProps(n,{},this);for(const M in C){const B=C[M];w[M]!==void 0&&gi(B)&&B.set(w[M],!1)}}mount(t){this.current=t,cA.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,s)=>this.bindToMotionValue(s,n)),EL.current||Wq(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:T1.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){cA.delete(this.current),this.projection&&this.projection.unmount(),Jl(this.notifyUpdate),Jl(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const s=oc.has(t),c=n.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&wn.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0)}),h=n.on("renderRequest",this.scheduleRender);let f;window.MotionCheckAppearSync&&(f=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{c(),h(),f&&f(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in sd){const n=sd[t];if(!n)continue;const{isEnabled:s,Feature:c}=n;if(!this.features[t]&&c&&s(this.props)&&(this.features[t]=new c(this)),this.features[t]){const h=this.features[t];h.isMounted?h.update():(h.mount(),h.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):fr()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let s=0;s<uA.length;s++){const c=uA[s];this.propEventSubscriptions[c]&&(this.propEventSubscriptions[c](),delete this.propEventSubscriptions[c]);const h="on"+c,f=t[h];f&&(this.propEventSubscriptions[c]=this.on(c,f))}this.prevMotionValues=Hq(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const s=this.values.get(t);n!==s&&(s&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let s=this.values.get(t);return s===void 0&&n!==void 0&&(s=Np(n===null?void 0:n,{owner:this}),this.addValue(t,s)),s}readValue(t,n){var s;let c=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(s=this.getBaseTargetFromProps(this.props,t))!==null&&s!==void 0?s:this.readValueFromInstance(this.current,t,this.options);return c!=null&&(typeof c=="string"&&(cD(c)||oD(c))?c=parseFloat(c):!Xq(c)&&tc.test(n)&&(c=bD(t,n)),this.setBaseTarget(t,gi(c)?c.get():c)),gi(c)?c.get():c}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var n;const{initial:s}=this.props;let c;if(typeof s=="string"||typeof s=="object"){const f=pS(this.props,s,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);f&&(c=f[t])}if(s&&c!==void 0)return c;const h=this.getBaseTargetFromProps(this.props,t);return h!==void 0&&!gi(h)?h:this.initialValues[t]!==void 0&&c===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new LS),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class CL extends Qq{constructor(){super(...arguments),this.KeyframeResolver=SD}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:s}){delete n[t],delete s[t]}}function Yq(e){return window.getComputedStyle(e)}class Jq extends CL{constructor(){super(...arguments),this.type="html",this.applyWillChange=!0,this.renderInstance=mL}readValueFromInstance(t,n){if(oc.has(n)){const s=ES(n);return s&&s.default||0}else{const s=Yq(t),c=(hD(n)?s.getPropertyValue(n):s[n])||0;return typeof c=="string"?c.trim():c}}measureInstanceViewportBox(t,{transformPagePoint:n}){return QD(t,n)}build(t,n,s){jS(t,n,s.transformTemplate)}scrapeMotionValuesFromProps(t,n,s){return BS(t,n,s)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;gi(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}class e7 extends CL{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=fr}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(oc.has(n)){const s=ES(n);return s&&s.default||0}return n=gL.has(n)?n:gx(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,s){return xL(t,n,s)}build(t,n,s){$S(t,n,this.isSVGTag,s.transformTemplate)}renderInstance(t,n,s,c){yL(t,n,s,c)}mount(t){this.isSVGTag=US(t.tagName),super.mount(t)}}const t7=(e,t)=>NS(e)?new e7(t):new Jq(t,{allowProjection:e!==Y.Fragment}),n7=Zq({...U8,...hq,...eq,...dq},t7),ad=L$(n7);function r7(){return K("section",{className:"about naxatw-bg-white naxatw-h-fit lg:naxatw-h-[25rem]",children:Ve("div",{className:"naxatw-flex naxatw-flex-col lg:naxatw-flex-row naxatw-container naxatw-py-10 lg:naxatw-py-20 naxatw-text-gray-800 naxatw-items-center",children:[K(ad.div,{initial:{translateX:-200,opacity:0},whileInView:{translateX:0,opacity:1},transition:{duration:.7},viewport:{once:!0},className:"naxatw-w-1/2",children:K(Ao,{src:D$,width:350})}),Ve(ad.div,{initial:{translateX:200,opacity:0},whileInView:{translateX:0,opacity:1},transition:{duration:.7},viewport:{once:!0},className:"naxatw-flex naxatw-flex-col naxatw-gap-8 naxatw-w-full lg:naxatw-w-1/2",children:[K("p",{className:"naxatw-text-[3rem]",children:"About Us"}),K("p",{children:"At Geosewa, we provide essential resources for geomatics engineers, including mock tests and past exam questions for the NEC Geomatics Engineering License. Our services also encompass professional mapping and IT solutions. Join us to access top-tier study materials, expert guidance, and advanced mapping services, all designed to help you excel in your geomatics engineering career."})]})]})})}const i7="/assets/Nec-License-3ef0125d.svg",s7="/assets/Nec-mocktest-22d66ece.svg",a7="/assets/Psc-prepration-ab8e35ca.svg",o7="/assets/It-services-5f34a5f7.svg",l7="/assets/arun-bhumi-91b25f28.jpg",c7="/assets/bishal-gyawali-a96bd964.jpg",u7="/assets/karan-chaudhary-be801aac.jpg",h7="/assets/samrat-acharya-073d53b9.jpg",d7=[{id:1,image:i7,title:"NEC License Material",description:"Comprehensive materials for Nepal Engineering Councils GeomaticsEngineering License exam, aligned with the latest syllabus"},{id:2,image:s7,title:"NEC License Mocktest",description:"Extensive mock tests with previous NEC questions help gauge preparation and build confidence for the exam."},{id:3,image:a7,title:"PSC Preparation",description:"We offer curated materials for PSC exams in Nepal, focusing on 4th, 5th, and 7th levels to give you an edge."},{id:4,image:o7,title:"GeoSpatial And IT services",description:"At GeoSewa, we provide geomatics and IT services, including mapping, surveys, drone services, and digital solutions."}],f7=[{id:1,question:"What is GeoSewa?",answer:"Geosewa is an educational and it service company decidated for sharing top-tier study materials, expert guidance, and advanced mapping services."},{id:2,question:"How can we get license exam materials?",answer:"You can simply email us on geosewa7@gmail.com requesting for the materials."},{id:3,question:"When does the mock test generally happen?",answer:"Generally, before one or two weeks before NEC license examination."},{id:4,question:"Is this page only for geomatics engineering mock test?",answer:"Yes, you can try us for free for 30 days.If you want, we'll provide you with a free, personalized 30-minute onboading call to get you up and running as soon as possible. "},{id:5,question:"How does billing work?",answer:"Yes, you can try us for free for a few days.If you want, we'll provide you with a free, personalized 30-minute onboading call to get you up and running as soon as possible. "},{id:6,question:"How can we contact you?",answer:"You can contact or whatsapp us at 9763252325 or DM us at geosewa page."}],p7=[{id:3,student:"Karan Chaudhary",organization:"IOE, WRC",image:u7,quote:"Very helpful and worth it. I recommend everyone to participate in the moct test conducted by Geo Sewa. It helps a lot."},{id:1,student:"Arun Kumar Bhomi",organization:"KU",image:l7,quote:"I took five Geosewa mock exams, which closely mirrored the NEC format and provided excellent practice. Many questions in the actual license exam were similar, significantly boosting my confidence and success. I highly recommend Geosewa's tests for anyone preparing for the exam."},{id:2,student:"Bishal Gyawali",organization:"IOE, WRC",image:c7,quote:"Thanks for encouraging and better confidence as the mock test is really worth it. Huge love for all Geosewa team and memebers"},{id:4,student:"Samrat Acharya",organization:"KU",image:h7,quote:"Thank you for everything. Mock Test was really a worth it. It gives you the time calculation for the questions, past question (which gets repeat in Real Examination).So, Thank you for everything."}];function m7({image:e,title:t,description:n}){return Ve(qc,{gap:2,className:"naxatw-p-4 naxatw-transform naxatw-transition-transform naxatw-duration-300 hover:naxatw-scale-105 naxatw-bg-white naxatw-rounded-xl naxatw-border naxatw-shadow-lg",children:[K(Ao,{src:e,width:60}),K("h4",{className:"naxatw-text-gray-800",children:t}),K("p",{children:n})]})}const PL={hidden:{opacity:0,scale:1},visible:{opacity:1,scale:1,transition:{delayChildren:.3,staggerChildren:.2}}},AL={hidden:{y:20,opacity:0},visible:{y:0,opacity:1}};function g7(){return K("section",{className:"services naxatw-w-full naxatw-bg-[#F5FAFF]",children:Ve("div",{className:"naxatw-container naxatw-py-10 md:naxatw-py-20",children:[Ve(hs,{gap:2,children:[K("p",{className:"naxatw-text-[3rem] naxatw-text-gray-800 naxatw-text-center naxatw-mb-8",children:"Our"}),K("p",{className:"naxatw-text-[3rem] naxatw-text-[#59AAFB] naxatw-text-center naxatw-mb-8",children:"Services"})]}),K(ad.div,{variants:PL,initial:"hidden",whileInView:"visible",viewport:{once:!0},className:"naxatw-grid naxatw-grid-cols-1 md:naxatw-grid-cols-2 naxatw-gap-14",children:d7.map(e=>K(ad.div,{variants:AL,children:K(m7,{image:e.image,title:e.title,description:e.description},e.id)},e.id))})]})})}const y7=e=>{const{image:t,student:n,quote:s,organization:c}=e;return Ve("div",{className:"testimonial-card naxatw-cursor-default naxatw-shadow-lg naxatw-rounded-xl naxatw-border naxatw-border-solid naxatw-border-[#E7EAEE] naxatw-bg-white naxatw-p-8 naxatw-text-center",children:[K("div",{className:"image-container naxatw-mx-auto naxatw-mb-10 naxatw-h-16 naxatw-w-16",children:K("img",{src:t,alt:n,width:100,height:100,className:"naxatw-rounded-[50%] naxatw-object-cover naxatw-object-center"})}),Ve("div",{className:"text-container",children:[K("div",{className:"description naxatw-mb-10",children:K("p",{className:"naxatw-text-base naxatw-leading-7 naxatw-tracking-[-0.01125rem] naxatw-text-[#07090D]",children:s})}),Ve("div",{className:"cutomer-details",children:[K("p",{className:"naxatw-text-base naxatw-font-medium naxatw-leading-6 naxatw-tracking-[-0.03rem] naxatw-text-[#07090D]",children:n}),K("span",{className:"naxatw-text-[0.875rem] naxatw-leading-6 naxatw-tracking-[-0.00875rem] naxatw-text-[#818A9C]",children:c})]})]})]})};function v7(){return K("section",{className:"what-students-say naxatw-bg-[#FBF8F3]",children:Ve("div",{className:"naxatw-py-10 md:naxatw-py-20 naxatw-container",children:[Ve("p",{className:"naxatw-text-[3rem] naxatw-text-gray-800 naxatw-text-center",children:["Our Students",K("span",{className:"naxatw-text-[3rem] naxatw-ml-2 naxatw-text-[#59AAFB]",children:"Say !"})]}),K(ad.div,{variants:PL,initial:"hidden",whileInView:"visible",viewport:{once:!0},className:"naxatw-grid naxatw-grid-cols-1 naxatw-gap-10 naxatw-mt-8 md:naxatw-grid-cols-2 xl:naxatw-grid-cols-3",children:p7.slice(1,4).map(e=>K(ad.div,{variants:AL,children:K(y7,{...e},e.id)},e.id))})]})})}function kL(e,t=[]){let n=[];function s(h,f){const o=Y.createContext(f),w=n.length;n=[...n,f];const b=C=>{var N;const{scope:M,children:B,...V}=C,j=((N=M==null?void 0:M[e])==null?void 0:N[w])||o,Z=Y.useMemo(()=>V,Object.values(V));return K(j.Provider,{value:Z,children:B})};b.displayName=h+"Provider";function A(C,M){var j;const B=((j=M==null?void 0:M[e])==null?void 0:j[w])||o,V=Y.useContext(B);if(V)return V;if(f!==void 0)return f;throw new Error(`\`${C}\` must be used within \`${h}\``)}return[b,A]}const c=()=>{const h=n.map(f=>Y.createContext(f));return function(o){const w=(o==null?void 0:o[e])||h;return Y.useMemo(()=>({[`__scope${e}`]:{...o,[e]:w}}),[o,w])}};return c.scopeName=e,[s,x7(c,...t)]}function x7(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const s=e.map(c=>({useScope:c(),scopeName:c.scopeName}));return function(h){const f=s.reduce((o,{useScope:w,scopeName:b})=>{const C=w(h)[`__scope${b}`];return{...o,...C}},{});return Y.useMemo(()=>({[`__scope${t.scopeName}`]:f}),[f])}};return n.scopeName=t.scopeName,n}function _7(e,t=[]){let n=[];function s(h,f){const o=Y.createContext(f),w=n.length;n=[...n,f];function b(C){const{scope:M,children:B,...V}=C,j=(M==null?void 0:M[e][w])||o,Z=Y.useMemo(()=>V,Object.values(V));return K(j.Provider,{value:Z,children:B})}function A(C,M){const B=(M==null?void 0:M[e][w])||o,V=Y.useContext(B);if(V)return V;if(f!==void 0)return f;throw new Error(`\`${C}\` must be used within \`${h}\``)}return b.displayName=h+"Provider",[b,A]}const c=()=>{const h=n.map(f=>Y.createContext(f));return function(o){const w=(o==null?void 0:o[e])||h;return Y.useMemo(()=>({[`__scope${e}`]:{...o,[e]:w}}),[o,w])}};return c.scopeName=e,[s,w7(c,...t)]}function w7(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const s=e.map(c=>({useScope:c(),scopeName:c.scopeName}));return function(h){const f=s.reduce((o,{useScope:w,scopeName:b})=>{const C=w(h)[`__scope${b}`];return{...o,...C}},{});return Y.useMemo(()=>({[`__scope${t.scopeName}`]:f}),[f])}};return n.scopeName=t.scopeName,n}function b7(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function qS(...e){return t=>e.forEach(n=>b7(n,t))}function Bp(...e){return Y.useCallback(qS(...e),e)}var E1=Y.forwardRef((e,t)=>{const{children:n,...s}=e,c=Y.Children.toArray(n),h=c.find(T7);if(h){const f=h.props.children,o=c.map(w=>w===h?Y.Children.count(f)>1?Y.Children.only(null):Y.isValidElement(f)?f.props.children:null:w);return K(C1,{...s,ref:t,children:Y.isValidElement(f)?Y.cloneElement(f,void 0,o):null})}return K(C1,{...s,ref:t,children:n})});E1.displayName="Slot";var C1=Y.forwardRef((e,t)=>{const{children:n,...s}=e;if(Y.isValidElement(n)){const c=C7(n);return Y.cloneElement(n,{...E7(s,n.props),ref:t?qS(t,c):c})}return Y.Children.count(n)>1?Y.Children.only(null):null});C1.displayName="SlotClone";var S7=({children:e})=>K(ms,{children:e});function T7(e){return Y.isValidElement(e)&&e.type===S7}function E7(e,t){const n={...t};for(const s in t){const c=e[s],h=t[s];/^on[A-Z]/.test(s)?c&&h?n[s]=(...o)=>{h(...o),c(...o)}:c&&(n[s]=c):s==="style"?n[s]={...c,...h}:s==="className"&&(n[s]=[c,h].filter(Boolean).join(" "))}return{...e,...n}}function C7(e){var s,c;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(c=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:c.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function P7(e){const t=e+"CollectionProvider",[n,s]=_7(t),[c,h]=n(t,{collectionRef:{current:null},itemMap:new Map}),f=B=>{const{scope:V,children:j}=B,Z=bt.useRef(null),N=bt.useRef(new Map).current;return K(c,{scope:V,itemMap:N,collectionRef:Z,children:j})};f.displayName=t;const o=e+"CollectionSlot",w=bt.forwardRef((B,V)=>{const{scope:j,children:Z}=B,N=h(o,j),F=Bp(V,N.collectionRef);return K(E1,{ref:F,children:Z})});w.displayName=o;const b=e+"CollectionItemSlot",A="data-radix-collection-item",C=bt.forwardRef((B,V)=>{const{scope:j,children:Z,...N}=B,F=bt.useRef(null),W=Bp(V,F),Q=h(b,j);return bt.useEffect(()=>(Q.itemMap.set(F,{ref:F,...N}),()=>void Q.itemMap.delete(F))),K(E1,{[A]:"",ref:W,children:Z})});C.displayName=b;function M(B){const V=h(e+"CollectionConsumer",B);return bt.useCallback(()=>{const Z=V.collectionRef.current;if(!Z)return[];const N=Array.from(Z.querySelectorAll(`[${A}]`));return Array.from(V.itemMap.values()).sort((Q,fe)=>N.indexOf(Q.ref.current)-N.indexOf(fe.ref.current))},[V.collectionRef,V.itemMap])}return[{Provider:f,Slot:w,ItemSlot:C},M,s]}function IL(e,t,{checkForDefaultPrevented:n=!0}={}){return function(c){if(e==null||e(c),n===!1||!c.defaultPrevented)return t==null?void 0:t(c)}}function ML(e){const t=Y.useRef(e);return Y.useEffect(()=>{t.current=e}),Y.useMemo(()=>(...n)=>{var s;return(s=t.current)==null?void 0:s.call(t,...n)},[])}function GS({prop:e,defaultProp:t,onChange:n=()=>{}}){const[s,c]=A7({defaultProp:t,onChange:n}),h=e!==void 0,f=h?e:s,o=ML(n),w=Y.useCallback(b=>{if(h){const C=typeof b=="function"?b(e):b;C!==e&&o(C)}else c(b)},[h,e,c,o]);return[f,w]}function A7({defaultProp:e,onChange:t}){const n=Y.useState(e),[s]=n,c=Y.useRef(s),h=ML(t);return Y.useEffect(()=>{c.current!==s&&(h(s),c.current=s)},[s,c,h]),n}var RL=Y.forwardRef((e,t)=>{const{children:n,...s}=e,c=Y.Children.toArray(n),h=c.find(I7);if(h){const f=h.props.children,o=c.map(w=>w===h?Y.Children.count(f)>1?Y.Children.only(null):Y.isValidElement(f)?f.props.children:null:w);return K(P1,{...s,ref:t,children:Y.isValidElement(f)?Y.cloneElement(f,void 0,o):null})}return K(P1,{...s,ref:t,children:n})});RL.displayName="Slot";var P1=Y.forwardRef((e,t)=>{const{children:n,...s}=e;if(Y.isValidElement(n)){const c=R7(n);return Y.cloneElement(n,{...M7(s,n.props),ref:t?qS(t,c):c})}return Y.Children.count(n)>1?Y.Children.only(null):null});P1.displayName="SlotClone";var k7=({children:e})=>K(ms,{children:e});function I7(e){return Y.isValidElement(e)&&e.type===k7}function M7(e,t){const n={...t};for(const s in t){const c=e[s],h=t[s];/^on[A-Z]/.test(s)?c&&h?n[s]=(...o)=>{h(...o),c(...o)}:c&&(n[s]=c):s==="style"?n[s]={...c,...h}:s==="className"&&(n[s]=[c,h].filter(Boolean).join(" "))}return{...e,...n}}function R7(e){var s,c;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(c=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:c.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var D7=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],cm=D7.reduce((e,t)=>{const n=Y.forwardRef((s,c)=>{const{asChild:h,...f}=s,o=h?RL:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),K(o,{...f,ref:c})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{}),dv=globalThis!=null&&globalThis.document?Y.useLayoutEffect:()=>{};function L7(e,t){return Y.useReducer((n,s)=>t[n][s]??n,e)}var DL=e=>{const{present:t,children:n}=e,s=z7(t),c=typeof n=="function"?n({present:s.isPresent}):Y.Children.only(n),h=Bp(s.ref,O7(c));return typeof n=="function"||s.isPresent?Y.cloneElement(c,{ref:h}):null};DL.displayName="Presence";function z7(e){const[t,n]=Y.useState(),s=Y.useRef({}),c=Y.useRef(e),h=Y.useRef("none"),f=e?"mounted":"unmounted",[o,w]=L7(f,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return Y.useEffect(()=>{const b=Wg(s.current);h.current=o==="mounted"?b:"none"},[o]),dv(()=>{const b=s.current,A=c.current;if(A!==e){const M=h.current,B=Wg(b);e?w("MOUNT"):B==="none"||(b==null?void 0:b.display)==="none"?w("UNMOUNT"):w(A&&M!==B?"ANIMATION_OUT":"UNMOUNT"),c.current=e}},[e,w]),dv(()=>{if(t){let b;const A=t.ownerDocument.defaultView??window,C=B=>{const j=Wg(s.current).includes(B.animationName);if(B.target===t&&j&&(w("ANIMATION_END"),!c.current)){const Z=t.style.animationFillMode;t.style.animationFillMode="forwards",b=A.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=Z)})}},M=B=>{B.target===t&&(h.current=Wg(s.current))};return t.addEventListener("animationstart",M),t.addEventListener("animationcancel",C),t.addEventListener("animationend",C),()=>{A.clearTimeout(b),t.removeEventListener("animationstart",M),t.removeEventListener("animationcancel",C),t.removeEventListener("animationend",C)}}else w("ANIMATION_END")},[t,w]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:Y.useCallback(b=>{b&&(s.current=getComputedStyle(b)),n(b)},[])}}function Wg(e){return(e==null?void 0:e.animationName)||"none"}function O7(e){var s,c;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(c=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:c.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var F7=lk["useId".toString()]||(()=>{}),N7=0;function LL(e){const[t,n]=Y.useState(F7());return dv(()=>{e||n(s=>s??String(N7++))},[e]),e||(t?`radix-${t}`:"")}var ZS="Collapsible",[B7,zL]=kL(ZS),[V7,WS]=B7(ZS),OL=Y.forwardRef((e,t)=>{const{__scopeCollapsible:n,open:s,defaultOpen:c,disabled:h,onOpenChange:f,...o}=e,[w=!1,b]=GS({prop:s,defaultProp:c,onChange:f});return K(V7,{scope:n,disabled:h,contentId:LL(),open:w,onOpenToggle:Y.useCallback(()=>b(A=>!A),[b]),children:K(cm.div,{"data-state":KS(w),"data-disabled":h?"":void 0,...o,ref:t})})});OL.displayName=ZS;var FL="CollapsibleTrigger",NL=Y.forwardRef((e,t)=>{const{__scopeCollapsible:n,...s}=e,c=WS(FL,n);return K(cm.button,{type:"button","aria-controls":c.contentId,"aria-expanded":c.open||!1,"data-state":KS(c.open),"data-disabled":c.disabled?"":void 0,disabled:c.disabled,...s,ref:t,onClick:IL(e.onClick,c.onOpenToggle)})});NL.displayName=FL;var HS="CollapsibleContent",BL=Y.forwardRef((e,t)=>{const{forceMount:n,...s}=e,c=WS(HS,e.__scopeCollapsible);return K(DL,{present:n||c.open,children:({present:h})=>K(j7,{...s,ref:t,present:h})})});BL.displayName=HS;var j7=Y.forwardRef((e,t)=>{const{__scopeCollapsible:n,present:s,children:c,...h}=e,f=WS(HS,n),[o,w]=Y.useState(s),b=Y.useRef(null),A=Bp(t,b),C=Y.useRef(0),M=C.current,B=Y.useRef(0),V=B.current,j=f.open||o,Z=Y.useRef(j),N=Y.useRef();return Y.useEffect(()=>{const F=requestAnimationFrame(()=>Z.current=!1);return()=>cancelAnimationFrame(F)},[]),dv(()=>{const F=b.current;if(F){N.current=N.current||{transitionDuration:F.style.transitionDuration,animationName:F.style.animationName},F.style.transitionDuration="0s",F.style.animationName="none";const W=F.getBoundingClientRect();C.current=W.height,B.current=W.width,Z.current||(F.style.transitionDuration=N.current.transitionDuration,F.style.animationName=N.current.animationName),w(s)}},[f.open,s]),K(cm.div,{"data-state":KS(f.open),"data-disabled":f.disabled?"":void 0,id:f.contentId,hidden:!j,...h,ref:A,style:{"--radix-collapsible-content-height":M?`${M}px`:void 0,"--radix-collapsible-content-width":V?`${V}px`:void 0,...e.style},children:j&&c})});function KS(e){return e?"open":"closed"}var $7=OL,U7=NL,q7=BL,G7=Y.createContext(void 0);function Z7(e){const t=Y.useContext(G7);return e||t||"ltr"}var Uo="Accordion",W7=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[XS,H7,K7]=P7(Uo),[_x,oH]=kL(Uo,[K7,zL]),QS=zL(),VL=bt.forwardRef((e,t)=>{const{type:n,...s}=e,c=s,h=s;return K(XS.Provider,{scope:e.__scopeAccordion,children:n==="multiple"?K(J7,{...h,ref:t}):K(Y7,{...c,ref:t})})});VL.displayName=Uo;var[jL,X7]=_x(Uo),[$L,Q7]=_x(Uo,{collapsible:!1}),Y7=bt.forwardRef((e,t)=>{const{value:n,defaultValue:s,onValueChange:c=()=>{},collapsible:h=!1,...f}=e,[o,w]=GS({prop:n,defaultProp:s,onChange:c});return K(jL,{scope:e.__scopeAccordion,value:o?[o]:[],onItemOpen:w,onItemClose:bt.useCallback(()=>h&&w(""),[h,w]),children:K($L,{scope:e.__scopeAccordion,collapsible:h,children:K(UL,{...f,ref:t})})})}),J7=bt.forwardRef((e,t)=>{const{value:n,defaultValue:s,onValueChange:c=()=>{},...h}=e,[f=[],o]=GS({prop:n,defaultProp:s,onChange:c}),w=bt.useCallback(A=>o((C=[])=>[...C,A]),[o]),b=bt.useCallback(A=>o((C=[])=>C.filter(M=>M!==A)),[o]);return K(jL,{scope:e.__scopeAccordion,value:f,onItemOpen:w,onItemClose:b,children:K($L,{scope:e.__scopeAccordion,collapsible:!0,children:K(UL,{...h,ref:t})})})}),[eG,wx]=_x(Uo),UL=bt.forwardRef((e,t)=>{const{__scopeAccordion:n,disabled:s,dir:c,orientation:h="vertical",...f}=e,o=bt.useRef(null),w=Bp(o,t),b=H7(n),C=Z7(c)==="ltr",M=IL(e.onKeyDown,B=>{var Te;if(!W7.includes(B.key))return;const V=B.target,j=b().filter(Ne=>{var ke;return!((ke=Ne.ref.current)!=null&&ke.disabled)}),Z=j.findIndex(Ne=>Ne.ref.current===V),N=j.length;if(Z===-1)return;B.preventDefault();let F=Z;const W=0,Q=N-1,fe=()=>{F=Z+1,F>Q&&(F=W)},Ee=()=>{F=Z-1,F<W&&(F=Q)};switch(B.key){case"Home":F=W;break;case"End":F=Q;break;case"ArrowRight":h==="horizontal"&&(C?fe():Ee());break;case"ArrowDown":h==="vertical"&&fe();break;case"ArrowLeft":h==="horizontal"&&(C?Ee():fe());break;case"ArrowUp":h==="vertical"&&Ee();break}const Re=F%N;(Te=j[Re].ref.current)==null||Te.focus()});return K(eG,{scope:n,disabled:s,direction:c,orientation:h,children:K(XS.Slot,{scope:n,children:K(cm.div,{...f,"data-orientation":h,ref:w,onKeyDown:s?void 0:M})})})}),fv="AccordionItem",[tG,YS]=_x(fv),qL=bt.forwardRef((e,t)=>{const{__scopeAccordion:n,value:s,...c}=e,h=wx(fv,n),f=X7(fv,n),o=QS(n),w=LL(),b=s&&f.value.includes(s)||!1,A=h.disabled||e.disabled;return K(tG,{scope:n,open:b,disabled:A,triggerId:w,children:K($7,{"data-orientation":h.orientation,"data-state":XL(b),...o,...c,ref:t,disabled:A,open:b,onOpenChange:C=>{C?f.onItemOpen(s):f.onItemClose(s)}})})});qL.displayName=fv;var GL="AccordionHeader",ZL=bt.forwardRef((e,t)=>{const{__scopeAccordion:n,...s}=e,c=wx(Uo,n),h=YS(GL,n);return K(cm.h3,{"data-orientation":c.orientation,"data-state":XL(h.open),"data-disabled":h.disabled?"":void 0,...s,ref:t})});ZL.displayName=GL;var A1="AccordionTrigger",WL=bt.forwardRef((e,t)=>{const{__scopeAccordion:n,...s}=e,c=wx(Uo,n),h=YS(A1,n),f=Q7(A1,n),o=QS(n);return K(XS.ItemSlot,{scope:n,children:K(U7,{"aria-disabled":h.open&&!f.collapsible||void 0,"data-orientation":c.orientation,id:h.triggerId,...o,...s,ref:t})})});WL.displayName=A1;var HL="AccordionContent",KL=bt.forwardRef((e,t)=>{const{__scopeAccordion:n,...s}=e,c=wx(Uo,n),h=YS(HL,n),f=QS(n);return K(q7,{role:"region","aria-labelledby":h.triggerId,"data-orientation":c.orientation,...f,...s,ref:t,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...e.style}})});KL.displayName=HL;function XL(e){return e?"open":"closed"}var nG=VL,rG=qL,iG=ZL,QL=WL,YL=KL;const sG=nG,JL=bt.forwardRef(({className:e,...t},n)=>K(rG,{ref:n,className:ac("",e),...t}));JL.displayName="AccordionItem";const ez=bt.forwardRef(({className:e,children:t,...n},s)=>K(iG,{children:K(QL,{ref:s,className:ac("",e),...n,children:t})}));ez.displayName=QL.displayName;const tz=bt.forwardRef(({className:e,children:t,...n},s)=>K(YL,{ref:s,className:ac("naxatw-overflow-hidden data-[state=closed]:naxatw-animate-accordion-up data-[state=open]:naxatw-animate-accordion-down",e),...n,children:t}));tz.displayName=YL.displayName;function Yr({name:e,className:t,iconSymbolType:n="material-symbols-outlined",onClick:s}){return K("i",{role:"button",tabIndex:0,onKeyUp:()=>{},onClick:s,className:`naxatw-text-icon-sm lg:naxatw-text-2xl ${t} ${n}`,children:e})}const aG=({faqsDataList:e})=>{const[t,n]=Y.useState(null);return K("div",{className:"accordion-wrapper",children:K(sG,{type:"single",collapsible:!0,className:"naxatw-transition-all naxatw-duration-300 naxatw-ease-out",children:e.map(s=>Ve(JL,{value:`item-${s.id}`,className:"naxatw-border-b naxatw-border-b-[#A9A9A9]",onClick:()=>{if(t===s.id){n(null);return}n(s.id)},children:[Ve(ez,{className:"naxatw-flex naxatw-w-full  naxatw-items-center naxatw-justify-between naxatw-gap-4 naxatw-py-6 naxatw-text-left",children:[K("p",{className:"naxatw-text-xl naxatw-font-medium naxatw-leading-6 naxatw-tracking-[-0.01125rem] naxatw-text-[#2B2B2B] ",children:s.question}),t===s.id?K(Yr,{name:"remove_circle_outline",className:"naxatw-text-main"}):K(Yr,{name:"add_circle_outline",className:"hover:naxatw-text-main"})]}),t===s.id&&K(tz,{className:"data-[state=closed]:naxatw-animate-accordion-up",children:K("p",{className:"naxatw-overflow-hidden naxatw-pb-6 naxatw-text-lg naxatw-font-normal naxatw-tracking-[-0.01125rem] naxatw-text-[#4E4E4E]",children:s.answer})})]},s.id))})})};function oG(){return K("section",{className:"faq-section naxatw-bg-[#F5FAFF]",children:Ve("div",{className:"naxatw-container naxatw-py-10 md:naxatw-py-20",children:[K("p",{className:"naxatw-text-[3rem] naxatw-text-gray-800",children:"FAQs"}),K("div",{className:"faqs-container",children:K(aG,{faqsDataList:f7})})]})})}const lG="/assets/twitter-icon-26997669.svg",cG="/assets/facebook-icon-2cec1970.svg",uG="/assets/linkedin-icon-575d4072.svg",hG="/assets/instagram-icon-1a2c4b29.svg";function dG(){return K("section",{className:"footer naxatw-bg-primary",children:Ve("div",{className:"naxatw-container naxatw-py-10 md:naxatw-py-20 naxatw-flex naxatw-justify-between naxatw-flex-col md:naxatw-flex-row naxatw-items-center naxatw-gap-14 naxatw-animate-fade-up",children:[Ve(qc,{gap:2.5,children:[Ve(hs,{className:"naxatw-text-white naxatw-items-center",gap:2,children:[K(Yr,{name:"public"}),K("div",{className:"naxatw-cursor-pointer",role:"presentation",children:K("h3",{className:"naxatw-text-white naxatw-font-medium",children:"GeoSewa"})})]}),Ve(qc,{gap:1,className:"naxatw-ml-3",children:[K("p",{className:"naxatw-text-white naxatw-text-body-lg",children:"geosewa7@gmail.com"}),K("p",{className:"naxatw-text-white naxatw-text-body-lg",children:"+977-9763252325"})]})]}),Ve(qc,{gap:2.5,children:[K("h4",{className:"naxatw-text-white naxatw-font-medium",children:"Follow Us On"}),Ve(hs,{gap:2,children:[K(Ao,{src:lG,width:20}),K(Ao,{src:cG,width:20}),K(Ao,{src:uG,width:20}),K(Ao,{src:hG,width:20})]})]}),Ve(qc,{children:[K("h4",{className:"naxatw-text-white naxatw-font-medium naxatw-mb-2",children:"Payment Partners"}),K(hs,{children:K("p",{className:"naxatw-text-white naxatw-text-xl",children:"Khalti"})})]})]})})}function fG(){return Ve("main",{className:"scrollbar",children:[K(R$,{}),K(r7,{}),K(g7,{}),K(v7,{}),K(oG,{}),K(dG,{})]})}function pG(){return K("main",{className:"notes naxatw-h-screen-nav naxatw-w-full",children:K(fx,{className:"naxatw-h-full naxatw-justify-center naxatw-animate-fade-up naxatw-font-medium naxatw-items-center",children:K("h3",{children:"The notes section is in progress. Stay tuned...."})})})}function mG(){return K(pG,{})}const gG=({tabOptions:e,className:t,activeClassName:n,onTabChange:s,activeTab:c,clickable:h=!1,orientation:f="column"})=>{const[o,w]=Y.useState(c);Y.useEffect(()=>{w(c)},[c]);const b=A=>{h&&(w(A),s(A))};return K("div",{className:`${f==="column"?"":"naxatw-flex"}`,children:e.map(A=>K("div",{className:`${t} naxatw-cursor-pointer naxatw-text-gray-600a ${o===A.value?`${n} !naxatw-border-b-primary naxatw-border-b-2 naxatw-text-primary`:"hover:naxatw-text-primary"}`,onClick:()=>b(A.value),children:K("p",{className:"naxatw-px-3 naxatw-py-2 naxatw-text-body-btn",children:A.label})},A.id))})},yG=[{id:1,label:"Exam Section",value:"exam-section"},{id:2,label:"Form Section",value:"form-section"}],{setCommonState:Vp,toggleModal:od,setModalContent:nz,togglePromptDialog:vG,setToggleNavbar:hA,setPromptDialogContent:xG,setLoginState:dA}=BR.actions;function rz(e,t){return function(){return e.apply(t,arguments)}}const{toString:_G}=Object.prototype,{getPrototypeOf:JS}=Object,bx=(e=>t=>{const n=_G.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Ha=e=>(e=e.toLowerCase(),t=>bx(t)===e),Sx=e=>t=>typeof t===e,{isArray:xd}=Array,jp=Sx("undefined");function wG(e){return e!==null&&!jp(e)&&e.constructor!==null&&!jp(e.constructor)&&Us(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const iz=Ha("ArrayBuffer");function bG(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&iz(e.buffer),t}const SG=Sx("string"),Us=Sx("function"),sz=Sx("number"),Tx=e=>e!==null&&typeof e=="object",TG=e=>e===!0||e===!1,_y=e=>{if(bx(e)!=="object")return!1;const t=JS(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},EG=Ha("Date"),CG=Ha("File"),PG=Ha("Blob"),AG=Ha("FileList"),kG=e=>Tx(e)&&Us(e.pipe),IG=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Us(e.append)&&((t=bx(e))==="formdata"||t==="object"&&Us(e.toString)&&e.toString()==="[object FormData]"))},MG=Ha("URLSearchParams"),RG=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function um(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let s,c;if(typeof e!="object"&&(e=[e]),xd(e))for(s=0,c=e.length;s<c;s++)t.call(null,e[s],s,e);else{const h=n?Object.getOwnPropertyNames(e):Object.keys(e),f=h.length;let o;for(s=0;s<f;s++)o=h[s],t.call(null,e[o],o,e)}}function az(e,t){t=t.toLowerCase();const n=Object.keys(e);let s=n.length,c;for(;s-- >0;)if(c=n[s],t===c.toLowerCase())return c;return null}const oz=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),lz=e=>!jp(e)&&e!==oz;function k1(){const{caseless:e}=lz(this)&&this||{},t={},n=(s,c)=>{const h=e&&az(t,c)||c;_y(t[h])&&_y(s)?t[h]=k1(t[h],s):_y(s)?t[h]=k1({},s):xd(s)?t[h]=s.slice():t[h]=s};for(let s=0,c=arguments.length;s<c;s++)arguments[s]&&um(arguments[s],n);return t}const DG=(e,t,n,{allOwnKeys:s}={})=>(um(t,(c,h)=>{n&&Us(c)?e[h]=rz(c,n):e[h]=c},{allOwnKeys:s}),e),LG=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),zG=(e,t,n,s)=>{e.prototype=Object.create(t.prototype,s),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},OG=(e,t,n,s)=>{let c,h,f;const o={};if(t=t||{},e==null)return t;do{for(c=Object.getOwnPropertyNames(e),h=c.length;h-- >0;)f=c[h],(!s||s(f,e,t))&&!o[f]&&(t[f]=e[f],o[f]=!0);e=n!==!1&&JS(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},FG=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const s=e.indexOf(t,n);return s!==-1&&s===n},NG=e=>{if(!e)return null;if(xd(e))return e;let t=e.length;if(!sz(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},BG=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&JS(Uint8Array)),VG=(e,t)=>{const s=(e&&e[Symbol.iterator]).call(e);let c;for(;(c=s.next())&&!c.done;){const h=c.value;t.call(e,h[0],h[1])}},jG=(e,t)=>{let n;const s=[];for(;(n=e.exec(t))!==null;)s.push(n);return s},$G=Ha("HTMLFormElement"),UG=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,s,c){return s.toUpperCase()+c}),fA=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),qG=Ha("RegExp"),cz=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),s={};um(n,(c,h)=>{let f;(f=t(c,h,e))!==!1&&(s[h]=f||c)}),Object.defineProperties(e,s)},GG=e=>{cz(e,(t,n)=>{if(Us(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const s=e[n];if(Us(s)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},ZG=(e,t)=>{const n={},s=c=>{c.forEach(h=>{n[h]=!0})};return xd(e)?s(e):s(String(e).split(t)),n},WG=()=>{},HG=(e,t)=>(e=+e,Number.isFinite(e)?e:t),L0="abcdefghijklmnopqrstuvwxyz",pA="0123456789",uz={DIGIT:pA,ALPHA:L0,ALPHA_DIGIT:L0+L0.toUpperCase()+pA},KG=(e=16,t=uz.ALPHA_DIGIT)=>{let n="";const{length:s}=t;for(;e--;)n+=t[Math.random()*s|0];return n};function XG(e){return!!(e&&Us(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const QG=e=>{const t=new Array(10),n=(s,c)=>{if(Tx(s)){if(t.indexOf(s)>=0)return;if(!("toJSON"in s)){t[c]=s;const h=xd(s)?[]:{};return um(s,(f,o)=>{const w=n(f,c+1);!jp(w)&&(h[o]=w)}),t[c]=void 0,h}}return s};return n(e,0)},YG=Ha("AsyncFunction"),JG=e=>e&&(Tx(e)||Us(e))&&Us(e.then)&&Us(e.catch),Ge={isArray:xd,isArrayBuffer:iz,isBuffer:wG,isFormData:IG,isArrayBufferView:bG,isString:SG,isNumber:sz,isBoolean:TG,isObject:Tx,isPlainObject:_y,isUndefined:jp,isDate:EG,isFile:CG,isBlob:PG,isRegExp:qG,isFunction:Us,isStream:kG,isURLSearchParams:MG,isTypedArray:BG,isFileList:AG,forEach:um,merge:k1,extend:DG,trim:RG,stripBOM:LG,inherits:zG,toFlatObject:OG,kindOf:bx,kindOfTest:Ha,endsWith:FG,toArray:NG,forEachEntry:VG,matchAll:jG,isHTMLForm:$G,hasOwnProperty:fA,hasOwnProp:fA,reduceDescriptors:cz,freezeMethods:GG,toObjectSet:ZG,toCamelCase:UG,noop:WG,toFiniteNumber:HG,findKey:az,global:oz,isContextDefined:lz,ALPHABET:uz,generateString:KG,isSpecCompliantForm:XG,toJSONObject:QG,isAsyncFn:YG,isThenable:JG};function ln(e,t,n,s,c){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),s&&(this.request=s),c&&(this.response=c)}Ge.inherits(ln,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Ge.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const hz=ln.prototype,dz={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{dz[e]={value:e}});Object.defineProperties(ln,dz);Object.defineProperty(hz,"isAxiosError",{value:!0});ln.from=(e,t,n,s,c,h)=>{const f=Object.create(hz);return Ge.toFlatObject(e,f,function(w){return w!==Error.prototype},o=>o!=="isAxiosError"),ln.call(f,e.message,t,n,s,c),f.cause=e,f.name=e.name,h&&Object.assign(f,h),f};const eZ=null;function I1(e){return Ge.isPlainObject(e)||Ge.isArray(e)}function fz(e){return Ge.endsWith(e,"[]")?e.slice(0,-2):e}function mA(e,t,n){return e?e.concat(t).map(function(c,h){return c=fz(c),!n&&h?"["+c+"]":c}).join(n?".":""):t}function tZ(e){return Ge.isArray(e)&&!e.some(I1)}const nZ=Ge.toFlatObject(Ge,{},null,function(t){return/^is[A-Z]/.test(t)});function Ex(e,t,n){if(!Ge.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=Ge.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(j,Z){return!Ge.isUndefined(Z[j])});const s=n.metaTokens,c=n.visitor||A,h=n.dots,f=n.indexes,w=(n.Blob||typeof Blob<"u"&&Blob)&&Ge.isSpecCompliantForm(t);if(!Ge.isFunction(c))throw new TypeError("visitor must be a function");function b(V){if(V===null)return"";if(Ge.isDate(V))return V.toISOString();if(!w&&Ge.isBlob(V))throw new ln("Blob is not supported. Use a Buffer instead.");return Ge.isArrayBuffer(V)||Ge.isTypedArray(V)?w&&typeof Blob=="function"?new Blob([V]):Buffer.from(V):V}function A(V,j,Z){let N=V;if(V&&!Z&&typeof V=="object"){if(Ge.endsWith(j,"{}"))j=s?j:j.slice(0,-2),V=JSON.stringify(V);else if(Ge.isArray(V)&&tZ(V)||(Ge.isFileList(V)||Ge.endsWith(j,"[]"))&&(N=Ge.toArray(V)))return j=fz(j),N.forEach(function(W,Q){!(Ge.isUndefined(W)||W===null)&&t.append(f===!0?mA([j],Q,h):f===null?j:j+"[]",b(W))}),!1}return I1(V)?!0:(t.append(mA(Z,j,h),b(V)),!1)}const C=[],M=Object.assign(nZ,{defaultVisitor:A,convertValue:b,isVisitable:I1});function B(V,j){if(!Ge.isUndefined(V)){if(C.indexOf(V)!==-1)throw Error("Circular reference detected in "+j.join("."));C.push(V),Ge.forEach(V,function(N,F){(!(Ge.isUndefined(N)||N===null)&&c.call(t,N,Ge.isString(F)?F.trim():F,j,M))===!0&&B(N,j?j.concat(F):[F])}),C.pop()}}if(!Ge.isObject(e))throw new TypeError("data must be an object");return B(e),t}function gA(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(s){return t[s]})}function e2(e,t){this._pairs=[],e&&Ex(e,this,t)}const pz=e2.prototype;pz.append=function(t,n){this._pairs.push([t,n])};pz.toString=function(t){const n=t?function(s){return t.call(this,s,gA)}:gA;return this._pairs.map(function(c){return n(c[0])+"="+n(c[1])},"").join("&")};function rZ(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function mz(e,t,n){if(!t)return e;const s=n&&n.encode||rZ,c=n&&n.serialize;let h;if(c?h=c(t,n):h=Ge.isURLSearchParams(t)?t.toString():new e2(t,n).toString(s),h){const f=e.indexOf("#");f!==-1&&(e=e.slice(0,f)),e+=(e.indexOf("?")===-1?"?":"&")+h}return e}class iZ{constructor(){this.handlers=[]}use(t,n,s){return this.handlers.push({fulfilled:t,rejected:n,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Ge.forEach(this.handlers,function(s){s!==null&&t(s)})}}const yA=iZ,gz={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},sZ=typeof URLSearchParams<"u"?URLSearchParams:e2,aZ=typeof FormData<"u"?FormData:null,oZ=typeof Blob<"u"?Blob:null,lZ={isBrowser:!0,classes:{URLSearchParams:sZ,FormData:aZ,Blob:oZ},protocols:["http","https","file","blob","url","data"]},yz=typeof window<"u"&&typeof document<"u",cZ=(e=>yz&&["ReactNative","NativeScript","NS"].indexOf(e)<0)(typeof navigator<"u"&&navigator.product),uZ=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),hZ=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:yz,hasStandardBrowserEnv:cZ,hasStandardBrowserWebWorkerEnv:uZ},Symbol.toStringTag,{value:"Module"})),Va={...hZ,...lZ};function dZ(e,t){return Ex(e,new Va.classes.URLSearchParams,Object.assign({visitor:function(n,s,c,h){return Va.isNode&&Ge.isBuffer(n)?(this.append(s,n.toString("base64")),!1):h.defaultVisitor.apply(this,arguments)}},t))}function fZ(e){return Ge.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function pZ(e){const t={},n=Object.keys(e);let s;const c=n.length;let h;for(s=0;s<c;s++)h=n[s],t[h]=e[h];return t}function vz(e){function t(n,s,c,h){let f=n[h++];if(f==="__proto__")return!0;const o=Number.isFinite(+f),w=h>=n.length;return f=!f&&Ge.isArray(c)?c.length:f,w?(Ge.hasOwnProp(c,f)?c[f]=[c[f],s]:c[f]=s,!o):((!c[f]||!Ge.isObject(c[f]))&&(c[f]=[]),t(n,s,c[f],h)&&Ge.isArray(c[f])&&(c[f]=pZ(c[f])),!o)}if(Ge.isFormData(e)&&Ge.isFunction(e.entries)){const n={};return Ge.forEachEntry(e,(s,c)=>{t(fZ(s),c,n,0)}),n}return null}function mZ(e,t,n){if(Ge.isString(e))try{return(t||JSON.parse)(e),Ge.trim(e)}catch(s){if(s.name!=="SyntaxError")throw s}return(n||JSON.stringify)(e)}const t2={transitional:gz,adapter:["xhr","http"],transformRequest:[function(t,n){const s=n.getContentType()||"",c=s.indexOf("application/json")>-1,h=Ge.isObject(t);if(h&&Ge.isHTMLForm(t)&&(t=new FormData(t)),Ge.isFormData(t))return c?JSON.stringify(vz(t)):t;if(Ge.isArrayBuffer(t)||Ge.isBuffer(t)||Ge.isStream(t)||Ge.isFile(t)||Ge.isBlob(t))return t;if(Ge.isArrayBufferView(t))return t.buffer;if(Ge.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let o;if(h){if(s.indexOf("application/x-www-form-urlencoded")>-1)return dZ(t,this.formSerializer).toString();if((o=Ge.isFileList(t))||s.indexOf("multipart/form-data")>-1){const w=this.env&&this.env.FormData;return Ex(o?{"files[]":t}:t,w&&new w,this.formSerializer)}}return h||c?(n.setContentType("application/json",!1),mZ(t)):t}],transformResponse:[function(t){const n=this.transitional||t2.transitional,s=n&&n.forcedJSONParsing,c=this.responseType==="json";if(t&&Ge.isString(t)&&(s&&!this.responseType||c)){const f=!(n&&n.silentJSONParsing)&&c;try{return JSON.parse(t)}catch(o){if(f)throw o.name==="SyntaxError"?ln.from(o,ln.ERR_BAD_RESPONSE,this,null,this.response):o}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Va.classes.FormData,Blob:Va.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Ge.forEach(["delete","get","head","post","put","patch"],e=>{t2.headers[e]={}});const n2=t2,gZ=Ge.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),yZ=e=>{const t={};let n,s,c;return e&&e.split(`
`).forEach(function(f){c=f.indexOf(":"),n=f.substring(0,c).trim().toLowerCase(),s=f.substring(c+1).trim(),!(!n||t[n]&&gZ[n])&&(n==="set-cookie"?t[n]?t[n].push(s):t[n]=[s]:t[n]=t[n]?t[n]+", "+s:s)}),t},vA=Symbol("internals");function Nf(e){return e&&String(e).trim().toLowerCase()}function wy(e){return e===!1||e==null?e:Ge.isArray(e)?e.map(wy):String(e)}function vZ(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=n.exec(e);)t[s[1]]=s[2];return t}const xZ=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function z0(e,t,n,s,c){if(Ge.isFunction(s))return s.call(this,t,n);if(c&&(t=n),!!Ge.isString(t)){if(Ge.isString(s))return t.indexOf(s)!==-1;if(Ge.isRegExp(s))return s.test(t)}}function _Z(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,s)=>n.toUpperCase()+s)}function wZ(e,t){const n=Ge.toCamelCase(" "+t);["get","set","has"].forEach(s=>{Object.defineProperty(e,s+n,{value:function(c,h,f){return this[s].call(this,t,c,h,f)},configurable:!0})})}class Cx{constructor(t){t&&this.set(t)}set(t,n,s){const c=this;function h(o,w,b){const A=Nf(w);if(!A)throw new Error("header name must be a non-empty string");const C=Ge.findKey(c,A);(!C||c[C]===void 0||b===!0||b===void 0&&c[C]!==!1)&&(c[C||w]=wy(o))}const f=(o,w)=>Ge.forEach(o,(b,A)=>h(b,A,w));return Ge.isPlainObject(t)||t instanceof this.constructor?f(t,n):Ge.isString(t)&&(t=t.trim())&&!xZ(t)?f(yZ(t),n):t!=null&&h(n,t,s),this}get(t,n){if(t=Nf(t),t){const s=Ge.findKey(this,t);if(s){const c=this[s];if(!n)return c;if(n===!0)return vZ(c);if(Ge.isFunction(n))return n.call(this,c,s);if(Ge.isRegExp(n))return n.exec(c);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=Nf(t),t){const s=Ge.findKey(this,t);return!!(s&&this[s]!==void 0&&(!n||z0(this,this[s],s,n)))}return!1}delete(t,n){const s=this;let c=!1;function h(f){if(f=Nf(f),f){const o=Ge.findKey(s,f);o&&(!n||z0(s,s[o],o,n))&&(delete s[o],c=!0)}}return Ge.isArray(t)?t.forEach(h):h(t),c}clear(t){const n=Object.keys(this);let s=n.length,c=!1;for(;s--;){const h=n[s];(!t||z0(this,this[h],h,t,!0))&&(delete this[h],c=!0)}return c}normalize(t){const n=this,s={};return Ge.forEach(this,(c,h)=>{const f=Ge.findKey(s,h);if(f){n[f]=wy(c),delete n[h];return}const o=t?_Z(h):String(h).trim();o!==h&&delete n[h],n[o]=wy(c),s[o]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return Ge.forEach(this,(s,c)=>{s!=null&&s!==!1&&(n[c]=t&&Ge.isArray(s)?s.join(", "):s)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const s=new this(t);return n.forEach(c=>s.set(c)),s}static accessor(t){const s=(this[vA]=this[vA]={accessors:{}}).accessors,c=this.prototype;function h(f){const o=Nf(f);s[o]||(wZ(c,f),s[o]=!0)}return Ge.isArray(t)?t.forEach(h):h(t),this}}Cx.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Ge.reduceDescriptors(Cx.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(s){this[n]=s}}});Ge.freezeMethods(Cx);const Lo=Cx;function O0(e,t){const n=this||n2,s=t||n,c=Lo.from(s.headers);let h=s.data;return Ge.forEach(e,function(o){h=o.call(n,h,c.normalize(),t?t.status:void 0)}),c.normalize(),h}function xz(e){return!!(e&&e.__CANCEL__)}function hm(e,t,n){ln.call(this,e??"canceled",ln.ERR_CANCELED,t,n),this.name="CanceledError"}Ge.inherits(hm,ln,{__CANCEL__:!0});function bZ(e,t,n){const s=n.config.validateStatus;!n.status||!s||s(n.status)?e(n):t(new ln("Request failed with status code "+n.status,[ln.ERR_BAD_REQUEST,ln.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const SZ=Va.hasStandardBrowserEnv?{write(e,t,n,s,c,h){const f=[e+"="+encodeURIComponent(t)];Ge.isNumber(n)&&f.push("expires="+new Date(n).toGMTString()),Ge.isString(s)&&f.push("path="+s),Ge.isString(c)&&f.push("domain="+c),h===!0&&f.push("secure"),document.cookie=f.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function TZ(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function EZ(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function _z(e,t){return e&&!TZ(t)?EZ(e,t):t}const CZ=Va.hasStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let s;function c(h){let f=h;return t&&(n.setAttribute("href",f),f=n.href),n.setAttribute("href",f),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return s=c(window.location.href),function(f){const o=Ge.isString(f)?c(f):f;return o.protocol===s.protocol&&o.host===s.host}}():function(){return function(){return!0}}();function PZ(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function AZ(e,t){e=e||10;const n=new Array(e),s=new Array(e);let c=0,h=0,f;return t=t!==void 0?t:1e3,function(w){const b=Date.now(),A=s[h];f||(f=b),n[c]=w,s[c]=b;let C=h,M=0;for(;C!==c;)M+=n[C++],C=C%e;if(c=(c+1)%e,c===h&&(h=(h+1)%e),b-f<t)return;const B=A&&b-A;return B?Math.round(M*1e3/B):void 0}}function xA(e,t){let n=0;const s=AZ(50,250);return c=>{const h=c.loaded,f=c.lengthComputable?c.total:void 0,o=h-n,w=s(o),b=h<=f;n=h;const A={loaded:h,total:f,progress:f?h/f:void 0,bytes:o,rate:w||void 0,estimated:w&&f&&b?(f-h)/w:void 0,event:c};A[t?"download":"upload"]=!0,e(A)}}const kZ=typeof XMLHttpRequest<"u",IZ=kZ&&function(e){return new Promise(function(n,s){let c=e.data;const h=Lo.from(e.headers).normalize();let{responseType:f,withXSRFToken:o}=e,w;function b(){e.cancelToken&&e.cancelToken.unsubscribe(w),e.signal&&e.signal.removeEventListener("abort",w)}let A;if(Ge.isFormData(c)){if(Va.hasStandardBrowserEnv||Va.hasStandardBrowserWebWorkerEnv)h.setContentType(!1);else if((A=h.getContentType())!==!1){const[j,...Z]=A?A.split(";").map(N=>N.trim()).filter(Boolean):[];h.setContentType([j||"multipart/form-data",...Z].join("; "))}}let C=new XMLHttpRequest;if(e.auth){const j=e.auth.username||"",Z=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";h.set("Authorization","Basic "+btoa(j+":"+Z))}const M=_z(e.baseURL,e.url);C.open(e.method.toUpperCase(),mz(M,e.params,e.paramsSerializer),!0),C.timeout=e.timeout;function B(){if(!C)return;const j=Lo.from("getAllResponseHeaders"in C&&C.getAllResponseHeaders()),N={data:!f||f==="text"||f==="json"?C.responseText:C.response,status:C.status,statusText:C.statusText,headers:j,config:e,request:C};bZ(function(W){n(W),b()},function(W){s(W),b()},N),C=null}if("onloadend"in C?C.onloadend=B:C.onreadystatechange=function(){!C||C.readyState!==4||C.status===0&&!(C.responseURL&&C.responseURL.indexOf("file:")===0)||setTimeout(B)},C.onabort=function(){C&&(s(new ln("Request aborted",ln.ECONNABORTED,e,C)),C=null)},C.onerror=function(){s(new ln("Network Error",ln.ERR_NETWORK,e,C)),C=null},C.ontimeout=function(){let Z=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const N=e.transitional||gz;e.timeoutErrorMessage&&(Z=e.timeoutErrorMessage),s(new ln(Z,N.clarifyTimeoutError?ln.ETIMEDOUT:ln.ECONNABORTED,e,C)),C=null},Va.hasStandardBrowserEnv&&(o&&Ge.isFunction(o)&&(o=o(e)),o||o!==!1&&CZ(M))){const j=e.xsrfHeaderName&&e.xsrfCookieName&&SZ.read(e.xsrfCookieName);j&&h.set(e.xsrfHeaderName,j)}c===void 0&&h.setContentType(null),"setRequestHeader"in C&&Ge.forEach(h.toJSON(),function(Z,N){C.setRequestHeader(N,Z)}),Ge.isUndefined(e.withCredentials)||(C.withCredentials=!!e.withCredentials),f&&f!=="json"&&(C.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&C.addEventListener("progress",xA(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&C.upload&&C.upload.addEventListener("progress",xA(e.onUploadProgress)),(e.cancelToken||e.signal)&&(w=j=>{C&&(s(!j||j.type?new hm(null,e,C):j),C.abort(),C=null)},e.cancelToken&&e.cancelToken.subscribe(w),e.signal&&(e.signal.aborted?w():e.signal.addEventListener("abort",w)));const V=PZ(M);if(V&&Va.protocols.indexOf(V)===-1){s(new ln("Unsupported protocol "+V+":",ln.ERR_BAD_REQUEST,e));return}C.send(c||null)})},M1={http:eZ,xhr:IZ};Ge.forEach(M1,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const _A=e=>`- ${e}`,MZ=e=>Ge.isFunction(e)||e===null||e===!1,wz={getAdapter:e=>{e=Ge.isArray(e)?e:[e];const{length:t}=e;let n,s;const c={};for(let h=0;h<t;h++){n=e[h];let f;if(s=n,!MZ(n)&&(s=M1[(f=String(n)).toLowerCase()],s===void 0))throw new ln(`Unknown adapter '${f}'`);if(s)break;c[f||"#"+h]=s}if(!s){const h=Object.entries(c).map(([o,w])=>`adapter ${o} `+(w===!1?"is not supported by the environment":"is not available in the build"));let f=t?h.length>1?`since :
`+h.map(_A).join(`
`):" "+_A(h[0]):"as no adapter specified";throw new ln("There is no suitable adapter to dispatch the request "+f,"ERR_NOT_SUPPORT")}return s},adapters:M1};function F0(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new hm(null,e)}function wA(e){return F0(e),e.headers=Lo.from(e.headers),e.data=O0.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),wz.getAdapter(e.adapter||n2.adapter)(e).then(function(s){return F0(e),s.data=O0.call(e,e.transformResponse,s),s.headers=Lo.from(s.headers),s},function(s){return xz(s)||(F0(e),s&&s.response&&(s.response.data=O0.call(e,e.transformResponse,s.response),s.response.headers=Lo.from(s.response.headers))),Promise.reject(s)})}const bA=e=>e instanceof Lo?{...e}:e;function ld(e,t){t=t||{};const n={};function s(b,A,C){return Ge.isPlainObject(b)&&Ge.isPlainObject(A)?Ge.merge.call({caseless:C},b,A):Ge.isPlainObject(A)?Ge.merge({},A):Ge.isArray(A)?A.slice():A}function c(b,A,C){if(Ge.isUndefined(A)){if(!Ge.isUndefined(b))return s(void 0,b,C)}else return s(b,A,C)}function h(b,A){if(!Ge.isUndefined(A))return s(void 0,A)}function f(b,A){if(Ge.isUndefined(A)){if(!Ge.isUndefined(b))return s(void 0,b)}else return s(void 0,A)}function o(b,A,C){if(C in t)return s(b,A);if(C in e)return s(void 0,b)}const w={url:h,method:h,data:h,baseURL:f,transformRequest:f,transformResponse:f,paramsSerializer:f,timeout:f,timeoutMessage:f,withCredentials:f,withXSRFToken:f,adapter:f,responseType:f,xsrfCookieName:f,xsrfHeaderName:f,onUploadProgress:f,onDownloadProgress:f,decompress:f,maxContentLength:f,maxBodyLength:f,beforeRedirect:f,transport:f,httpAgent:f,httpsAgent:f,cancelToken:f,socketPath:f,responseEncoding:f,validateStatus:o,headers:(b,A)=>c(bA(b),bA(A),!0)};return Ge.forEach(Object.keys(Object.assign({},e,t)),function(A){const C=w[A]||c,M=C(e[A],t[A],A);Ge.isUndefined(M)&&C!==o||(n[A]=M)}),n}const bz="1.6.8",r2={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{r2[e]=function(s){return typeof s===e||"a"+(t<1?"n ":" ")+e}});const SA={};r2.transitional=function(t,n,s){function c(h,f){return"[Axios v"+bz+"] Transitional option '"+h+"'"+f+(s?". "+s:"")}return(h,f,o)=>{if(t===!1)throw new ln(c(f," has been removed"+(n?" in "+n:"")),ln.ERR_DEPRECATED);return n&&!SA[f]&&(SA[f]=!0,console.warn(c(f," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(h,f,o):!0}};function RZ(e,t,n){if(typeof e!="object")throw new ln("options must be an object",ln.ERR_BAD_OPTION_VALUE);const s=Object.keys(e);let c=s.length;for(;c-- >0;){const h=s[c],f=t[h];if(f){const o=e[h],w=o===void 0||f(o,h,e);if(w!==!0)throw new ln("option "+h+" must be "+w,ln.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new ln("Unknown option "+h,ln.ERR_BAD_OPTION)}}const R1={assertOptions:RZ,validators:r2},fl=R1.validators;class pv{constructor(t){this.defaults=t,this.interceptors={request:new yA,response:new yA}}async request(t,n){try{return await this._request(t,n)}catch(s){if(s instanceof Error){let c;Error.captureStackTrace?Error.captureStackTrace(c={}):c=new Error;const h=c.stack?c.stack.replace(/^.+\n/,""):"";s.stack?h&&!String(s.stack).endsWith(h.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+h):s.stack=h}throw s}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=ld(this.defaults,n);const{transitional:s,paramsSerializer:c,headers:h}=n;s!==void 0&&R1.assertOptions(s,{silentJSONParsing:fl.transitional(fl.boolean),forcedJSONParsing:fl.transitional(fl.boolean),clarifyTimeoutError:fl.transitional(fl.boolean)},!1),c!=null&&(Ge.isFunction(c)?n.paramsSerializer={serialize:c}:R1.assertOptions(c,{encode:fl.function,serialize:fl.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let f=h&&Ge.merge(h.common,h[n.method]);h&&Ge.forEach(["delete","get","head","post","put","patch","common"],V=>{delete h[V]}),n.headers=Lo.concat(f,h);const o=[];let w=!0;this.interceptors.request.forEach(function(j){typeof j.runWhen=="function"&&j.runWhen(n)===!1||(w=w&&j.synchronous,o.unshift(j.fulfilled,j.rejected))});const b=[];this.interceptors.response.forEach(function(j){b.push(j.fulfilled,j.rejected)});let A,C=0,M;if(!w){const V=[wA.bind(this),void 0];for(V.unshift.apply(V,o),V.push.apply(V,b),M=V.length,A=Promise.resolve(n);C<M;)A=A.then(V[C++],V[C++]);return A}M=o.length;let B=n;for(C=0;C<M;){const V=o[C++],j=o[C++];try{B=V(B)}catch(Z){j.call(this,Z);break}}try{A=wA.call(this,B)}catch(V){return Promise.reject(V)}for(C=0,M=b.length;C<M;)A=A.then(b[C++],b[C++]);return A}getUri(t){t=ld(this.defaults,t);const n=_z(t.baseURL,t.url);return mz(n,t.params,t.paramsSerializer)}}Ge.forEach(["delete","get","head","options"],function(t){pv.prototype[t]=function(n,s){return this.request(ld(s||{},{method:t,url:n,data:(s||{}).data}))}});Ge.forEach(["post","put","patch"],function(t){function n(s){return function(h,f,o){return this.request(ld(o||{},{method:t,headers:s?{"Content-Type":"multipart/form-data"}:{},url:h,data:f}))}}pv.prototype[t]=n(),pv.prototype[t+"Form"]=n(!0)});const by=pv;class i2{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(h){n=h});const s=this;this.promise.then(c=>{if(!s._listeners)return;let h=s._listeners.length;for(;h-- >0;)s._listeners[h](c);s._listeners=null}),this.promise.then=c=>{let h;const f=new Promise(o=>{s.subscribe(o),h=o}).then(c);return f.cancel=function(){s.unsubscribe(h)},f},t(function(h,f,o){s.reason||(s.reason=new hm(h,f,o),n(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}static source(){let t;return{token:new i2(function(c){t=c}),cancel:t}}}const DZ=i2;function LZ(e){return function(n){return e.apply(null,n)}}function zZ(e){return Ge.isObject(e)&&e.isAxiosError===!0}const D1={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(D1).forEach(([e,t])=>{D1[t]=e});const OZ=D1;function Sz(e){const t=new by(e),n=rz(by.prototype.request,t);return Ge.extend(n,by.prototype,t,{allOwnKeys:!0}),Ge.extend(n,t,null,{allOwnKeys:!0}),n.create=function(c){return Sz(ld(e,c))},n}const vr=Sz(n2);vr.Axios=by;vr.CanceledError=hm;vr.CancelToken=DZ;vr.isCancel=xz;vr.VERSION=bz;vr.toFormData=Ex;vr.AxiosError=ln;vr.Cancel=vr.CanceledError;vr.all=function(t){return Promise.all(t)};vr.spread=LZ;vr.isAxiosError=zZ;vr.mergeConfig=ld;vr.AxiosHeaders=Lo;vr.formToJSON=e=>vz(Ge.isHTMLForm(e)?new FormData(e):e);vr.getAdapter=wz.getAdapter;vr.HttpStatusCode=OZ;vr.default=vr;const dm=vr,Tz="https://sujanadh.pythonanywhere.com/api",Ka=dm.create({baseURL:Tz,timeout:5*60*1e3,headers:{accept:"application/json","Content-Type":"application/json"}});dm.create({baseURL:Tz,timeout:5*60*1e3,headers:{accept:"application/json","Content-Type":"multipart/form-data"}});Ka.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t?(e.headers=e.headers||{},e.headers.Authorization=`Bearer ${t}`):e.headers&&e.headers.Authorization&&delete e.headers.Authorization,e},e=>Promise.reject(e));const FZ=e=>Ka.get("mcq/questions/",{params:e}),NZ=()=>Ka.get("exams/sets/"),BZ=e=>Ka.post(`exams/sets/${e}/start/`),VZ=e=>Ka.get(`exams/attempt/${e}/`),jZ=(e,t)=>Ka.post(`exams/attempt/${e}/save-answer/`,t),$Z=e=>Ka.post(`exams/attempt/${e}/submit/`),UZ=e=>Ka.get(`exams/exam-results/${e}/`);function qZ(){const e=sc(),[t,n]=Y.useState([]),[s,c]=Y.useState(!0),[h,f]=Y.useState(null),[o,w]=Y.useState(!1);Y.useEffect(()=>{(async()=>{c(!0),f(null);try{const C=await NZ();n(C.data)}catch(C){f("Error loading mock tests"),console.error("Error fetching mock tests:",C)}finally{c(!1)}})()},[]);const b=async A=>{var C,M;w(!0),f(null);try{const B=await BZ(A),V=B.data.attempt_id||B.data.id||B.data.attempt;if(!V)throw new Error("No attempt id returned from server");e(Vp({examView:"mcq-test",selectedMockTest:A,attemptId:V.toString()}))}catch(B){console.error("Error starting attempt:",B),f(((M=(C=B.response)==null?void 0:C.data)==null?void 0:M.message)||"Failed to start attempt. Please try again.")}finally{w(!1)}};return s?K("div",{className:"naxatw-p-8",children:"Loading mock tests..."}):o?K("div",{className:"naxatw-p-8",children:"Starting attempt..."}):h?Ve("div",{className:"naxatw-p-8",children:[K("div",{className:"naxatw-text-red-500 naxatw-mb-4",children:h}),K("button",{onClick:()=>window.location.reload(),className:"naxatw-bg-primary naxatw-text-white naxatw-py-2 naxatw-px-4 naxatw-rounded-md",children:"Retry"})]}):K("section",{className:"naxatw-h-full naxatw-w-full naxatw-p-4",children:Ve("div",{className:"naxatw-max-w-4xl naxatw-mx-auto naxatw-my-8",children:[Ve("div",{className:"naxatw-flex naxatw-justify-between naxatw-items-center naxatw-mb-6",children:[K("h2",{className:"naxatw-text-2xl naxatw-font-semibold",children:"Available Mock Tests"}),K("button",{onClick:()=>e(Vp({examView:"main"})),className:"naxatw-text-primary naxatw-underline",children:"Back to Exam Section"})]}),K("div",{className:"naxatw-grid naxatw-grid-cols-1 naxatw-md:grid-cols-2 naxatw-lg:grid-cols-3 naxatw-gap-6",children:t.map(A=>Ve("div",{className:"naxatw-bg-white naxatw-rounded-lg naxatw-shadow-md naxatw-p-6 naxatw-cursor-pointer hover:naxatw-shadow-lg naxatw-transition-shadow",onClick:()=>b(A.id),children:[K("h3",{className:"naxatw-text-lg naxatw-font-semibold naxatw-mb-2",children:A.title}),K("p",{className:"naxatw-text-gray-600 naxatw-mb-4 naxatw-line-clamp-3",children:A.description}),Ve("div",{className:"naxatw-flex naxatw-justify-between naxatw-items-center naxatw-mb-4",children:[K("span",{className:`naxatw-px-2 naxatw-py-1 naxatw-rounded-full naxatw-text-xs naxatw-font-medium ${A.difficulty==="beginner"?"naxatw-bg-green-100 naxatw-text-green-800":A.difficulty==="intermediate"?"naxatw-bg-yellow-100 naxatw-text-yellow-800":A.difficulty==="advanced"?"naxatw-bg-orange-100 naxatw-text-orange-800":"naxatw-bg-red-100 naxatw-text-red-800"}`,children:A.difficulty}),Ve("span",{className:"naxatw-text-lg naxatw-font-bold naxatw-text-primary",children:["$",A.price]})]}),Ve("div",{className:"naxatw-flex naxatw-justify-between naxatw-text-sm naxatw-text-gray-500",children:[Ve("span",{children:[A.total_questions||0," questions"]}),Ve("span",{children:[A.duration_minutes||0," minutes"]})]})]},A.id))}),t.length===0&&!s&&K("div",{className:"naxatw-text-center naxatw-text-gray-500 naxatw-mt-8",children:"No mock tests available at the moment."})]})})}function GZ(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function ZZ(...e){return t=>e.forEach(n=>GZ(n,t))}const Ez=Y.forwardRef((e,t)=>{const{children:n,...s}=e,c=Y.Children.toArray(n),h=c.find(HZ);if(h){const f=h.props.children,o=c.map(w=>w===h?Y.Children.count(f)>1?Y.Children.only(null):Y.isValidElement(f)?f.props.children:null:w);return Y.createElement(L1,uu({},s,{ref:t}),Y.isValidElement(f)?Y.cloneElement(f,void 0,o):null)}return Y.createElement(L1,uu({},s,{ref:t}),n)});Ez.displayName="Slot";const L1=Y.forwardRef((e,t)=>{const{children:n,...s}=e;return Y.isValidElement(n)?Y.cloneElement(n,{...KZ(s,n.props),ref:t?ZZ(t,n.ref):n.ref}):Y.Children.count(n)>1?Y.Children.only(null):null});L1.displayName="SlotClone";const WZ=({children:e})=>Y.createElement(Y.Fragment,null,e);function HZ(e){return Y.isValidElement(e)&&e.type===WZ}function KZ(e,t){const n={...t};for(const s in t){const c=e[s],h=t[s];/^on[A-Z]/.test(s)?c&&h?n[s]=(...o)=>{h(...o),c(...o)}:c&&(n[s]=c):s==="style"?n[s]={...c,...h}:s==="className"&&(n[s]=[c,h].filter(Boolean).join(" "))}return{...e,...n}}function Cz(e){var t,n,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=Cz(e[t]))&&(s&&(s+=" "),s+=n);else for(t in e)e[t]&&(s&&(s+=" "),s+=t);return s}function XZ(){for(var e,t,n=0,s="";n<arguments.length;)(e=arguments[n++])&&(t=Cz(e))&&(s&&(s+=" "),s+=t);return s}const TA=e=>typeof e=="boolean"?"".concat(e):e===0?"0":e,EA=XZ,QZ=(e,t)=>n=>{var s;if((t==null?void 0:t.variants)==null)return EA(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:c,defaultVariants:h}=t,f=Object.keys(c).map(b=>{const A=n==null?void 0:n[b],C=h==null?void 0:h[b];if(A===null)return null;const M=TA(A)||TA(C);return c[b][M]}),o=n&&Object.entries(n).reduce((b,A)=>{let[C,M]=A;return M===void 0||(b[C]=M),b},{}),w=t==null||(s=t.compoundVariants)===null||s===void 0?void 0:s.reduce((b,A)=>{let{class:C,className:M,...B}=A;return Object.entries(B).every(V=>{let[j,Z]=V;return Array.isArray(Z)?Z.includes({...h,...o}[j]):{...h,...o}[j]===Z})?[...b,C,M]:b},[]);return EA(e,f,w,n==null?void 0:n.class,n==null?void 0:n.className)};function YZ({className:e}){return K("div",{role:"status",className:"naxatw-flex naxatw-items-center",children:Ve("svg",{"aria-hidden":"true",className:`naxatw-h-[24px] naxatw-w-[24px] naxatw-animate-spin ${e}`,viewBox:"0 0 100 101",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[K("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"currentColor"}),K("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentFill"})]},e)})}const JZ=QZ(`naxatw-inline-flex naxatw-items-center naxatw-justify-center naxatw-rounded-md naxatw-text-sm 
  naxatw-font-bold naxatw-transition-colors focus-visible:naxatw-outline-none focus-visible:naxatw-ring-2 
  focus-visible:ring-ring focus-visible:naxatw-ring-offset-2 disabled:naxatw-opacity-50 disabled:naxatw-pointer-events-none`,{variants:{variant:{default:"naxatw-bg-primary naxatw-text-white hover:naxatw-shadow-top hover:naxatw-shadow-primary",destructive:"naxatw-bg-red-500 naxatw-text-white hover:naxatw-shadow-top hover:naxatw-shadow-red-500",outline:`naxatw-border naxatw-text-primary naxatw-border- hover:naxatw-bg-primary hover:naxatw-text-white naxatw-border-input 
        hover:naxatw-shadow-top naxatw-bg-white`,secondary:"naxatw-bg-white naxatw-text-primary naxatw-border naxatw-border-primary hover:naxatw-shadow-top",ghost:"naxatw-text-primary naxatw-font-bold disabled:naxatw-text-grey-600 hover:naxatw-text-red-500",link:`naxatw-text-primary naxatw-font-bold naxatw-underline-offset-4 naxatw-underline hover:naxatw-no-underline
         naxatw-text-primarycolor hover:naxatw-shadow hover:naxatw-shadow-primary`},size:{default:"naxatw-h-9 naxatw-py-2 naxatw-px-3",sm:"naxatw-h-7 naxatw-px-2 naxatw-rounded-lg",lg:"naxatw-h-11 naxatw-px-8 naxatw-rounded-md"}},defaultVariants:{variant:"default",size:"default"}}),Pz=Y.forwardRef(({className:e,variant:t,size:n,asChild:s=!1,...c},h)=>K(s?Ez:"button",{className:ac(JZ({variant:t,size:n,className:e})),ref:h,...c}));Pz.displayName="Button";function Vs({leftIcon:e,rightIcon:t,children:n,iconClassname:s,withLoader:c,isLoading:h,className:f,...o}){return Ve(Pz,{...o,className:`naxatw-flex naxatw-items-center naxatw-gap-1 ${f}`,children:[e&&K(Yr,{className:`${s} !naxatw-text-icon-sm`,name:e}),n,t&&K(Yr,{className:`${s} !naxatw-text-icon-sm`,name:t}),c&&h&&K(YZ,{className:"naxatw-fill-primary-500"})]})}function eW(){const e=Po(Ue=>Ue.common.selectedMockTest),t=Po(Ue=>Ue.common.attemptId),n=sc(),s=Y.useRef(null),[c,h]=Y.useState([]),[f,o]=Y.useState(!0),[w,b]=Y.useState(!1),[A,C]=Y.useState(null),[M,B]=Y.useState({}),[V,j]=Y.useState(!1),[Z,N]=Y.useState(null),[F,W]=Y.useState(1),Q=10,fe=Math.ceil(c.length/Q),Ee=(F-1)*Q,Re=Math.min(Ee+Q,c.length),Te=c.slice(Ee,Re),Ne=Ue=>`mockTestAnswers_${Ue}`,ke=()=>{if(!Z)return{correct:0,incorrect:0,unanswered:0};const Ue=Z.detailed_results.filter(mt=>mt.is_correct).length,De=Z.detailed_results.filter(mt=>!mt.is_correct).length,Xe=Z.detailed_results.filter(mt=>!mt.selected_choices||mt.selected_choices.length===0).length;return{correct:Ue,incorrect:De,unanswered:Xe}};Y.useEffect(()=>{if(!t)return;(async()=>{var De,Xe;o(!0),C(null);try{const zt=(await VZ(t)).data;if(console.log("Exam attempt data:",zt),zt.questions&&Array.isArray(zt.questions))h(zt.questions);else throw new Error("No questions found in exam attempt");const $t=localStorage.getItem(Ne(t));if($t)try{const Dt=JSON.parse($t);B(Dt)}catch{console.warn("Failed to parse saved answers from localStorage")}zt.saved_answers&&typeof zt.saved_answers=="object"&&B(Dt=>({...Dt,...zt.saved_answers}))}catch(mt){console.error("Error fetching exam attempt:",mt),C(((Xe=(De=mt.response)==null?void 0:De.data)==null?void 0:Xe.message)||"Error loading questions. Please try again.")}finally{o(!1)}})()},[t]),Y.useEffect(()=>{t&&Object.keys(M).length>0&&localStorage.setItem(Ne(t),JSON.stringify(M))},[M,t]);const ft=(Ue,De)=>{B(Xe=>({...Xe,[Ue]:De}))},je=async()=>{var Ue,De;if(!t){C("No attempt ID found");return}b(!0),C(null);try{const Xe=localStorage.getItem(Ne(t));let mt={};if(Xe)try{mt=JSON.parse(Xe)}catch{mt=M}else mt=M;for(const[zt,$t]of Object.entries(mt))try{await jZ(t,{question_id:parseInt(zt),selected_choices:[$t]})}catch(Dt){console.warn(`Failed to save answer for question ${zt}:`,Dt)}console.log("All answers saved successfully"),await $Z(t),console.log("Exam submitted successfully");try{const zt=await UZ(t);N(zt.data)}catch(zt){console.warn("Could not fetch results:",zt)}localStorage.removeItem(Ne(t)),j(!0)}catch(Xe){console.error("Error submitting exam:",Xe),C(((De=(Ue=Xe.response)==null?void 0:Ue.data)==null?void 0:De.message)||"Error submitting exam. Please try again.")}finally{b(!1)}},st=()=>{t&&localStorage.removeItem(Ne(t)),n(Vp({examView:"mock-tests",selectedMockTest:null,attemptId:null}))},ut=()=>{F<fe&&W(Ue=>Ue+1)},Tt=()=>{F>1&&W(Ue=>Ue-1)};if(Y.useEffect(()=>{s.current&&(s.current.scrollTop=0,s.current.scrollIntoView({behavior:"smooth",block:"start"}))},[F]),f)return K("div",{className:"naxatw-flex naxatw-items-center naxatw-justify-center naxatw-h-64",children:Ve("div",{className:"naxatw-text-center",children:[K("div",{className:"naxatw-text-lg naxatw-mb-2",children:"Loading questions..."}),K("div",{className:"naxatw-text-gray-500",children:"Please wait while we prepare your exam"})]})});if(A)return K("div",{className:"naxatw-p-8",children:Ve("div",{className:"naxatw-text-center",children:[K("div",{className:"naxatw-text-red-500 naxatw-mb-4",children:A}),K(Vs,{onClick:st,className:"naxatw-bg-primary naxatw-text-white naxatw-py-2 naxatw-px-4 naxatw-rounded-md",children:"Back to Mock Tests"})]})});if(!Array.isArray(c)||c.length===0)return K("div",{className:"naxatw-p-8",children:Ve("div",{className:"naxatw-text-center",children:[K("div",{className:"naxatw-text-gray-500 naxatw-mb-4",children:"No questions available for this exam."}),K(Vs,{onClick:st,className:"naxatw-bg-primary naxatw-text-white naxatw-py-2 naxatw-px-4 naxatw-rounded-md",children:"Back to Mock Tests"})]})});const ht=ke();return K("section",{className:"naxatw-h-full naxatw-w-full naxatw-p-4",children:Ve("div",{className:"naxatw-max-w-4xl naxatw-mx-auto naxatw-my-8",children:[Ve("div",{className:"naxatw-flex naxatw-justify-between naxatw-items-center naxatw-mb-6",children:[Ve("h2",{className:"naxatw-text-2xl naxatw-font-semibold",children:["Mock Test ",e]}),K("button",{onClick:st,className:"naxatw-text-primary naxatw-underline",children:"Back to Mock Tests"})]}),V?Ve("div",{className:"naxatw-bg-white naxatw-rounded-lg naxatw-shadow-md naxatw-p-6",children:[Z?Ve(ms,{children:[Ve("div",{className:"naxatw-text-center naxatw-mb-8",children:[K("h3",{className:"naxatw-text-2xl naxatw-font-bold naxatw-mb-4",children:"Exam Results"}),Ve("div",{className:"naxatw-grid naxatw-grid-cols-2 naxatw-md:grid-cols-4 naxatw-gap-4 naxatw-mb-6",children:[Ve("div",{className:"naxatw-bg-blue-50 naxatw-p-4 naxatw-rounded-lg",children:[K("div",{className:"naxatw-text-2xl naxatw-font-bold naxatw-text-blue-600",children:Z.score}),K("div",{className:"naxatw-text-sm naxatw-text-gray-600",children:"Score"})]}),Ve("div",{className:"naxatw-bg-green-50 naxatw-p-4 naxatw-rounded-lg",children:[K("div",{className:"naxatw-text-2xl naxatw-font-bold naxatw-text-green-600",children:ht.correct}),K("div",{className:"naxatw-text-sm naxatw-text-gray-600",children:"Correct"})]}),Ve("div",{className:"naxatw-bg-red-50 naxatw-p-4 naxatw-rounded-lg",children:[K("div",{className:"naxatw-text-2xl naxatw-font-bold naxatw-text-red-600",children:ht.incorrect}),K("div",{className:"naxatw-text-sm naxatw-text-gray-600",children:"Incorrect"})]}),Ve("div",{className:"naxatw-bg-gray-50 naxatw-p-4 naxatw-rounded-lg",children:[Ve("div",{className:"naxatw-text-2xl naxatw-font-bold naxatw-text-gray-600",children:[Z.score_percentage,"%"]}),K("div",{className:"naxatw-text-sm naxatw-text-gray-600",children:"Percentage"})]})]}),Ve("div",{className:"naxatw-grid naxatw-grid-cols-1 naxatw-md:grid-cols-3 naxatw-gap-4 naxatw-mb-6",children:[Ve("div",{className:"naxatw-bg-purple-50 naxatw-p-3 naxatw-rounded-lg",children:[K("div",{className:"naxatw-text-lg naxatw-font-semibold naxatw-text-purple-700",children:Z.total_points}),K("div",{className:"naxatw-text-sm naxatw-text-gray-600",children:"Total Points"})]}),Ve("div",{className:"naxatw-bg-indigo-50 naxatw-p-3 naxatw-rounded-lg",children:[K("div",{className:"naxatw-text-lg naxatw-font-semibold naxatw-text-indigo-700",children:Z.time_taken}),K("div",{className:"naxatw-text-sm naxatw-text-gray-600",children:"Time Taken"})]})]})]}),Ve("div",{className:"naxatw-space-y-6 naxatw-mb-6",children:[K("h4",{className:"naxatw-text-xl naxatw-font-semibold naxatw-border-b naxatw-pb-2",children:"Detailed Results"}),Z.detailed_results&&Z.detailed_results.length>0?Z.detailed_results.map((Ue,De)=>K("div",{className:"naxatw-border naxatw-rounded-lg naxatw-p-6",children:Ve("div",{className:"naxatw-flex naxatw-gap-3 naxatw-mb-4",children:[K("span",{className:`naxatw-inline-flex naxatw-items-center naxatw-justify-center naxatw-w-8 naxatw-h-8 naxatw-rounded-full naxatw-text-white naxatw-font-bold ${Ue.is_correct?"naxatw-bg-green-500":"naxatw-bg-red-500"}`,children:De+1}),Ve("div",{className:"naxatw-flex-1",children:[K("h5",{className:"naxatw-font-medium naxatw-text-lg naxatw-mb-2",children:Ue.question_text}),Ve("div",{className:"naxatw-mb-3",children:[K("span",{className:"naxatw-font-medium naxatw-text-gray-700",children:"Your Answer: "}),Ue.selected_choices&&Ue.selected_choices.length>0?K("span",{className:`naxatw-font-semibold ${Ue.is_correct?"naxatw-text-green-600":"naxatw-text-red-600"}`,children:Ue.selected_choices.map(Xe=>Xe.choice_text).join(", ")}):K("span",{className:"naxatw-text-gray-500 italic",children:"No answer provided"})]}),!Ue.is_correct&&Ve("div",{className:"naxatw-mb-3",children:[K("span",{className:"naxatw-font-medium naxatw-text-gray-700",children:"Correct Answer: "}),K("span",{className:"naxatw-font-semibold naxatw-text-green-600",children:Ue.correct_choices.map(Xe=>Xe.choice_text).join(", ")})]}),Ue.explanation&&Ve("div",{className:"naxatw-bg-gray-50 naxatw-p-3 naxatw-rounded-md naxatw-mt-3",children:[K("span",{className:"naxatw-font-medium naxatw-text-gray-700",children:"Explanation: "}),K("span",{className:"naxatw-text-gray-600",children:Ue.explanation})]})]})]})},Ue.question_id)):K("div",{className:"naxatw-text-center naxatw-text-gray-500 naxatw-py-8",children:"Detailed results will be available shortly."})]})]}):Ve("div",{className:"naxatw-text-center",children:[K("h3",{className:"naxatw-text-xl naxatw-font-semibold naxatw-mb-4",children:"Exam Submitted Successfully!"}),K("p",{className:"naxatw-text-gray-600 naxatw-mb-6",children:"Your exam has been submitted and is being processed. You can check your results later from the exam history."}),Ve("div",{className:"naxatw-bg-green-50 naxatw-border naxatw-border-green-200 naxatw-rounded-lg naxatw-p-4 naxatw-mb-6",children:[K("p",{className:"naxatw-text-green-800 naxatw-font-medium",children:" All your answers have been saved"}),K("p",{className:"naxatw-text-green-700 naxatw-text-sm",children:" Exam has been submitted successfully"})]})]}),K("div",{className:"naxatw-text-center",children:K(Vs,{onClick:st,className:"naxatw-bg-primary naxatw-text-white naxatw-py-2 naxatw-px-8 naxatw-rounded-md hover:naxatw-bg-primary/90",children:"Back to Mock Tests"})})]}):Ve(ms,{children:[Ve("div",{ref:s,className:"naxatw-bg-white naxatw-rounded-lg naxatw-shadow-md naxatw-p-6 naxatw-mb-6",children:[Ve("div",{className:"naxatw-flex naxatw-justify-between naxatw-items-center naxatw-mb-4",children:[K("h3",{className:"naxatw-text-lg naxatw-font-bold",children:"Questions"}),Ve("span",{className:"naxatw-text-sm naxatw-text-gray-500",children:["Page ",F," of ",fe,"  ",c.length," total questions"]})]}),Te.map((Ue,De)=>Ve("div",{className:"naxatw-mb-8 naxatw-border-b naxatw-pb-4 naxatw-last:border-0",children:[Ve("div",{className:"naxatw-mb-3",children:[Ve("h4",{className:"naxatw-font-medium naxatw-text-lg",children:[Ee+De+1,". ",Ue.question_text]}),Ue.image&&K("img",{src:Ue.image,alt:"Question",className:"naxatw-mt-2 naxatw-max-w-full naxatw-h-auto naxatw-rounded"})]}),K("div",{className:"naxatw-pl-4",children:Array.isArray(Ue.choices)&&Ue.choices.length>0?Ue.choices.map(Xe=>Ve("div",{className:"naxatw-flex naxatw-items-center naxatw-gap-3 naxatw-my-3",children:[K("input",{type:"radio",id:`q${Ue.id}-${Xe.id}`,name:`question-${Ue.id}`,checked:M[Ue.id]===Xe.id,onChange:()=>ft(Ue.id,Xe.id),className:"naxatw-cursor-pointer naxatw-w-4 naxatw-h-4"}),K("label",{htmlFor:`q${Ue.id}-${Xe.id}`,className:"naxatw-cursor-pointer naxatw-flex-1 naxatw-text-gray-700",children:Xe.choice_text})]},Xe.id)):K("div",{className:"naxatw-text-gray-400 naxatw-italic",children:"No options available."})})]},Ue.id))]}),Ve("div",{className:"naxatw-flex naxatw-justify-between naxatw-items-center naxatw-mb-6 naxatw-pb-4",children:[F>1&&K(Vs,{onClick:Tt,className:"naxatw-bg-gray-500 naxatw-text-white naxatw-py-2 naxatw-px-4 naxatw-rounded-md hover:naxatw-bg-gray-600",children:"Previous"}),F===fe?K("div",{className:"naxatw-flex naxatw-justify-center naxatw-w-full",children:K(Vs,{onClick:je,disabled:w,className:"naxatw-bg-primary naxatw-text-white naxatw-py-3 naxatw-px-8 naxatw-rounded-md hover:naxatw-bg-primary/90 disabled:naxatw-opacity-50",children:w?"Submitting...":"Submit Exam"})}):K("div",{className:`${F===1?"naxatw-ml-auto":""}`,children:K(Vs,{onClick:ut,className:"naxatw-bg-primary naxatw-text-white naxatw-py-2 naxatw-px-4 naxatw-rounded-md hover:naxatw-bg-primary/90",children:"Next"})})]})]})]})})}function CA(){const e=sc(),t=Po(s=>s.common.examView),n=()=>{e(Vp({examView:"mock-tests"}))};return t==="mock-tests"?K(qZ,{}):t==="mcq-test"?K(eW,{}):K("section",{className:"naxatw-h-full naxatw-w-full naxatw-p-4",children:Ve("div",{className:"naxatw-w-[20rem] naxatw-cursor-pointer naxatw-border-primary naxatw-flex naxatw-h-[4rem] naxatw-gap-1 naxatw-justify-center naxatw-items-center naxatw-p-4 naxatw-border naxatw-rounded-md",onClick:n,children:[K(Yr,{name:"edit_note",className:"naxatw-text-[10em] naxatw-text-primary"}),K("h5",{children:"Geomatics License Mock Test"})]})})}function tW(){return K("section",{className:"naxatw-h-full naxatw-w-full naxatw-p-4",children:Ve("div",{className:"naxatw-w-[20rem] naxatw-cursor-pointer naxatw-border-primary naxatw-flex naxatw-h-[4rem] naxatw-gap-2 naxatw-justify-center naxatw-items-center naxatw-p-4 naxatw-border naxatw-rounded-md",onClick:()=>window.open("https://docs.google.com/forms/d/e/1FAIpQLSdXQT4kRARLykvhLpgBpcbl-th53jy3FhIxNuOiXyMrzzQJ0g/viewform?usp=send_form","_blank"),children:[K(Yr,{name:"summarize",className:"naxatw-text-[10em] naxatw-text-primary"}),K("h5",{children:"Geomatics License Exam Form"})]})})}const nW=e=>{switch(e){case"exam-section":return K(CA,{});case"form-section":return K(tW,{});default:return K(CA,{})}};function rW(){const e=sc(),t=Po(n=>n.common.activeExamTab);return BB({queryKey:["key"],queryFn:()=>FZ({set:1})}),K("main",{className:"notes naxatw-h-screen-nav naxatw-w-full naxatw-bg-white",children:Ve("div",{className:"naxatw-container naxatw-py-4 naxatw-h-full",children:[K(gG,{orientation:"row",clickable:!0,onTabChange:n=>{e(Vp({activeExamTab:n}))},tabOptions:yG,activeTab:t}),nW(t)]})})}function fa({children:e,htmlFor:t,required:n}){return Ve("label",{className:"naxatw-text-sm naxatw-text-grey-800",htmlFor:t==null?void 0:t.toString(),children:[e,n&&K("span",{className:"naxatw-text-red-500",children:"*"})]})}const pi=Y.forwardRef(({className:e,placeholder:t,type:n,...s},c)=>K("input",{type:n,placeholder:t||"Search",className:ac("naxatw-flex naxatw-rounded-[4px] naxatw-border naxatw-border-[#555555] naxatw-bg-transparent naxatw-p-2 naxatw-text-body-md file:naxatw-font-medium hover:naxatw-border-red focus:naxatw-border-red focus:naxatw-bg-transparent focus:naxatw-outline-none disabled:naxatw-cursor-not-allowed",e),ref:c,...s}));pi.displayName="Input";function vo({children:e,className:t}){return K(qc,{className:t,children:e})}function iW(){return Ve("div",{className:"contact-form animation-area",children:[K("div",{className:"title naxatw-mb-12 md:naxatw-mb-16",children:Ve("p",{className:"naxatw-text-[2.75rem] naxatw-leading-[3.75rem] naxatw-tracking-[-0.04125rem] naxatw-text-[#07090D]",children:["Get in Touch with Us"," "]})}),Ve("form",{action:"",children:[Ve("div",{className:"naxatw-grid naxatw-grid-cols-2 naxatw-gap-x-7 naxatw-gap-y-4",children:[Ve("div",{className:"form-control naxatw-flex naxatw-w-full naxatw-flex-col naxatw-gap-2",children:[K("p",{className:"naxatw-text-[0.875rem] naxatw-leading-4 naxatw-text-[#343434]",children:"Name"}),K(pi,{type:"text",name:"name",className:"naxatw-w-full !naxatw-rounded-lg naxatw-border !naxatw-border-b naxatw-border-solid !naxatw-border-[#969696] !naxatw-text-[0.875rem] naxatw-leading-5 !naxatw-text-[#343434] hover:!naxatw-border-[#969696] focus:!naxatw-border-[#343434]",placeholder:"Name"})]}),Ve("div",{className:"form-control naxatw-flex naxatw-w-full naxatw-flex-col naxatw-gap-2",children:[K("p",{className:"naxatw-text-[0.875rem] naxatw-leading-4 naxatw-text-[#343434]",children:"Email"}),K(pi,{type:"text",className:" naxatw-w-full !naxatw-rounded-lg naxatw-border !naxatw-border-b naxatw-border-solid !naxatw-border-[#969696]  !naxatw-text-[0.875rem] naxatw-leading-5 !naxatw-text-[#343434] hover:!naxatw-border-[#969696] focus:!naxatw-border-[#343434]",placeholder:"Email"})]}),Ve("div",{className:"form-control naxatw-flex naxatw-w-full naxatw-flex-col naxatw-gap-2",children:[K("p",{className:"naxatw-text-[0.875rem] naxatw-leading-4 naxatw-text-[#343434]",children:"Phone"}),K(pi,{type:"text",className:"naxatw-w-full !naxatw-rounded-lg naxatw-border !naxatw-border-b naxatw-border-solid !naxatw-border-[#969696] !naxatw-text-[0.875rem] naxatw-leading-5 !naxatw-text-[#343434] hover:!naxatw-border-[#969696] focus:!naxatw-border-[#343434]",placeholder:"Phone"})]}),Ve("div",{className:"form-control naxatw-flex naxatw-w-full naxatw-flex-col naxatw-gap-2",children:[K("p",{className:"naxatw-text-[0.875rem] naxatw-leading-4 naxatw-text-[#343434]",children:"College/Organization"}),K(pi,{type:"text",className:"naxatw-w-full !naxatw-rounded-lg naxatw-border !naxatw-border-b naxatw-border-solid !naxatw-border-[#969696] !naxatw-text-[0.875rem] naxatw-leading-5 !naxatw-text-[#343434] hover:!naxatw-border-[#969696] focus:!naxatw-border-[#343434]",placeholder:"College/Organization"})]})]}),K("div",{className:"naxatw-my-6",children:K("textarea",{placeholder:"Describe to us how you would use GeoSewa",className:"naxatw-h-[7.75rem] naxatw-w-full  naxatw-resize-none naxatw-rounded-lg !naxatw-border !naxatw-border-solid !naxatw-border-[#969696] naxatw-p-3  naxatw-text-[#343434] focus:!naxatw-border-[#343434] focus:!naxatw-outline-none"})}),Ve("button",{className:"btn hover:naxatw-bg-primary naxatw-relative naxatw-z-10 naxatw-flex naxatw-h-14 naxatw-items-center naxatw-justify-start naxatw-gap-4 naxatw-overflow-hidden naxatw-rounded-[2.4375rem] naxatw-bg-[#39CDF2] naxatw-px-5 naxatw-py-3 naxatw-no-underline naxatw-shadow-[0px_1px_2px_0px_rgba(16,24,40,0.05)] naxatw-w-[12.5rem]",type:"button",children:[K("span",{className:"naxatw-text-base naxatw-font-semibold naxatw-leading-6 naxatw-tracking-[-0.011rem] naxatw-text-white",children:"Send message"}),K(Yr,{name:"east",className:"naxatw-text-white"})]})]})]})}const{Children:PA,cloneElement:AA,forwardRef:sW}=bt,aW=sW(({children:e,map:t,isMapLoaded:n,...s},c)=>{const h=PA.count(e),f={map:t,isMapLoaded:n};return K("div",{id:"maplibre-gl-map",...s,children:h<1?K(ms,{}):h>1?PA.map(e,o=>o?AA(o,{...f}):K(ms,{})):AA(e,{...f})})});var Az={exports:{}};(function(e,t){(function(n,s){e.exports=s()})(V3,function(){var n,s,c;function h(o,w){if(!n)n=w;else if(!s)s=w;else{var b="var sharedChunk = {}; ("+n+")(sharedChunk); ("+s+")(sharedChunk);",A={};n(A),c=w(A),typeof window<"u"&&(c.workerUrl=window.URL.createObjectURL(new Blob([b],{type:"text/javascript"})))}}h(["exports"],function(o){function w(a,r,l,d){return new(l||(l=Promise))(function(m,v){function _(I){try{P(d.next(I))}catch(D){v(D)}}function S(I){try{P(d.throw(I))}catch(D){v(D)}}function P(I){var D;I.done?m(I.value):(D=I.value,D instanceof l?D:new l(function(O){O(D)})).then(_,S)}P((d=d.apply(a,r||[])).next())})}function b(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}typeof SuppressedError=="function"&&SuppressedError;var A=C;function C(a,r){this.x=a,this.y=r}C.prototype={clone:function(){return new C(this.x,this.y)},add:function(a){return this.clone()._add(a)},sub:function(a){return this.clone()._sub(a)},multByPoint:function(a){return this.clone()._multByPoint(a)},divByPoint:function(a){return this.clone()._divByPoint(a)},mult:function(a){return this.clone()._mult(a)},div:function(a){return this.clone()._div(a)},rotate:function(a){return this.clone()._rotate(a)},rotateAround:function(a,r){return this.clone()._rotateAround(a,r)},matMult:function(a){return this.clone()._matMult(a)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(a){return this.x===a.x&&this.y===a.y},dist:function(a){return Math.sqrt(this.distSqr(a))},distSqr:function(a){var r=a.x-this.x,l=a.y-this.y;return r*r+l*l},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(a){return Math.atan2(this.y-a.y,this.x-a.x)},angleWith:function(a){return this.angleWithSep(a.x,a.y)},angleWithSep:function(a,r){return Math.atan2(this.x*r-this.y*a,this.x*a+this.y*r)},_matMult:function(a){var r=a[2]*this.x+a[3]*this.y;return this.x=a[0]*this.x+a[1]*this.y,this.y=r,this},_add:function(a){return this.x+=a.x,this.y+=a.y,this},_sub:function(a){return this.x-=a.x,this.y-=a.y,this},_mult:function(a){return this.x*=a,this.y*=a,this},_div:function(a){return this.x/=a,this.y/=a,this},_multByPoint:function(a){return this.x*=a.x,this.y*=a.y,this},_divByPoint:function(a){return this.x/=a.x,this.y/=a.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var a=this.y;return this.y=this.x,this.x=-a,this},_rotate:function(a){var r=Math.cos(a),l=Math.sin(a),d=l*this.x+r*this.y;return this.x=r*this.x-l*this.y,this.y=d,this},_rotateAround:function(a,r){var l=Math.cos(a),d=Math.sin(a),m=r.y+d*(this.x-r.x)+l*(this.y-r.y);return this.x=r.x+l*(this.x-r.x)-d*(this.y-r.y),this.y=m,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},C.convert=function(a){return a instanceof C?a:Array.isArray(a)?new C(a[0],a[1]):a};var M=b(A),B=V;function V(a,r,l,d){this.cx=3*a,this.bx=3*(l-a)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*r,this.by=3*(d-r)-this.cy,this.ay=1-this.cy-this.by,this.p1x=a,this.p1y=r,this.p2x=l,this.p2y=d}V.prototype={sampleCurveX:function(a){return((this.ax*a+this.bx)*a+this.cx)*a},sampleCurveY:function(a){return((this.ay*a+this.by)*a+this.cy)*a},sampleCurveDerivativeX:function(a){return(3*this.ax*a+2*this.bx)*a+this.cx},solveCurveX:function(a,r){if(r===void 0&&(r=1e-6),a<0)return 0;if(a>1)return 1;for(var l=a,d=0;d<8;d++){var m=this.sampleCurveX(l)-a;if(Math.abs(m)<r)return l;var v=this.sampleCurveDerivativeX(l);if(Math.abs(v)<1e-6)break;l-=m/v}var _=0,S=1;for(l=a,d=0;d<20&&(m=this.sampleCurveX(l),!(Math.abs(m-a)<r));d++)a>m?_=l:S=l,l=.5*(S-_)+_;return l},solve:function(a,r){return this.sampleCurveY(this.solveCurveX(a,r))}};var j=b(B);let Z,N;function F(){return Z==null&&(Z=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),Z}function W(){if(N==null&&(N=!1,F())){const r=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(r){for(let d=0;d<5*5;d++){const m=4*d;r.fillStyle=`rgb(${m},${m+1},${m+2})`,r.fillRect(d%5,Math.floor(d/5),1,1)}const l=r.getImageData(0,0,5,5).data;for(let d=0;d<5*5*4;d++)if(d%4!=3&&l[d]!==d){N=!0;break}}}return N||!1}function Q(a,r,l,d){const m=new j(a,r,l,d);return function(v){return m.solve(v)}}const fe=Q(.25,.1,.25,1);function Ee(a,r,l){return Math.min(l,Math.max(r,a))}function Re(a,r,l){const d=l-r,m=((a-r)%d+d)%d+r;return m===r?l:m}function Te(a,...r){for(const l of r)for(const d in l)a[d]=l[d];return a}let Ne=1;function ke(a,r,l){const d={};for(const m in a)d[m]=r.call(l||this,a[m],m,a);return d}function ft(a,r,l){const d={};for(const m in a)r.call(l||this,a[m],m,a)&&(d[m]=a[m]);return d}function je(a){return Array.isArray(a)?a.map(je):typeof a=="object"&&a?ke(a,je):a}const st={};function ut(a){st[a]||(typeof console<"u"&&console.warn(a),st[a]=!0)}function Tt(a,r,l){return(l.y-a.y)*(r.x-a.x)>(r.y-a.y)*(l.x-a.x)}function ht(a){let r=0;for(let l,d,m=0,v=a.length,_=v-1;m<v;_=m++)l=a[m],d=a[_],r+=(d.x-l.x)*(l.y+d.y);return r}function Ue(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}let De=null;function Xe(a){return typeof ImageBitmap<"u"&&a instanceof ImageBitmap}const mt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function zt(a,r,l,d,m){return w(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const v=new VideoFrame(a,{timestamp:0});try{const _=v==null?void 0:v.format;if(!_||!_.startsWith("BGR")&&!_.startsWith("RGB"))throw new Error(`Unrecognized format ${_}`);const S=_.startsWith("BGR"),P=new Uint8ClampedArray(d*m*4);if(yield v.copyTo(P,function(I,D,O,U,H){const X=4*Math.max(-D,0),te=(Math.max(0,O)-O)*U*4+X,oe=4*U,he=Math.max(0,D),we=Math.max(0,O);return{rect:{x:he,y:we,width:Math.min(I.width,D+U)-he,height:Math.min(I.height,O+H)-we},layout:[{offset:te,stride:oe}]}}(a,r,l,d,m)),S)for(let I=0;I<P.length;I+=4){const D=P[I];P[I]=P[I+2],P[I+2]=D}return P}finally{v.close()}})}let $t,Dt,Sn,vi;const gr={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(a){const r=requestAnimationFrame(a);return{cancel:()=>cancelAnimationFrame(r)}},getImageData(a,r=0){return this.getImageCanvasContext(a).getImageData(-r,-r,a.width+2*r,a.height+2*r)},getImageCanvasContext(a){const r=window.document.createElement("canvas"),l=r.getContext("2d",{willReadFrequently:!0});if(!l)throw new Error("failed to create canvas 2d context");return r.width=a.width,r.height=a.height,l.drawImage(a,0,0,a.width,a.height),l},resolveURL:a=>(Sn||(Sn=document.createElement("a")),Sn.href=a,Sn.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(vi==null&&(vi=matchMedia("(prefers-reduced-motion: reduce)")),vi.matches)}},Jr={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};class Bi extends Error{constructor(r,l,d,m){super(`AJAXError: ${l} (${r}): ${d}`),this.status=r,this.statusText=l,this.url=d,this.body=m}}const ei=Ue()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href,ti=a=>Jr.REGISTERED_PROTOCOLS[a.substring(0,a.indexOf("://"))];function wa(a,r){const l=new AbortController,d=new Request(a.url,{method:a.method||"GET",body:a.body,credentials:a.credentials,headers:a.headers,cache:a.cache,referrer:ei(),signal:l.signal});let m=!1,v=!1;return a.type==="json"&&d.headers.set("Accept","application/json"),v||fetch(d).then(_=>_.ok?(S=>{(a.type==="arrayBuffer"||a.type==="image"?S.arrayBuffer():a.type==="json"?S.json():S.text()).then(P=>{v||(m=!0,r(null,P,S.headers.get("Cache-Control"),S.headers.get("Expires")))}).catch(P=>{v||r(new Error(P.message))})})(_):_.blob().then(S=>r(new Bi(_.status,_.statusText,a.url,S)))).catch(_=>{_.code!==20&&r(new Error(_.message))}),{cancel:()=>{v=!0,m||l.abort()}}}const bs=function(a,r){if(/:\/\//.test(a.url)&&!/^https?:|^file:/.test(a.url)){if(Ue()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",a,r);if(!Ue())return(ti(a.url)||wa)(a,r)}if(!(/^file:/.test(l=a.url)||/^file:/.test(ei())&&!/^\w+:/.test(l))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return wa(a,r);if(Ue()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",a,r,void 0,!0)}var l;return function(d,m){const v=new XMLHttpRequest;v.open(d.method||"GET",d.url,!0),d.type!=="arrayBuffer"&&d.type!=="image"||(v.responseType="arraybuffer");for(const _ in d.headers)v.setRequestHeader(_,d.headers[_]);return d.type==="json"&&(v.responseType="text",v.setRequestHeader("Accept","application/json")),v.withCredentials=d.credentials==="include",v.onerror=()=>{m(new Error(v.statusText))},v.onload=()=>{if((v.status>=200&&v.status<300||v.status===0)&&v.response!==null){let _=v.response;if(d.type==="json")try{_=JSON.parse(v.response)}catch(S){return m(S)}m(null,_,v.getResponseHeader("Cache-Control"),v.getResponseHeader("Expires"))}else{const _=new Blob([v.response],{type:v.getResponseHeader("Content-Type")});m(new Bi(v.status,v.statusText,d.url,_))}},v.send(d.body),{cancel:()=>v.abort()}}(a,r)},ba=function(a,r){return bs(Te(a,{type:"arrayBuffer"}),r)};function Vi(a){if(!a||a.indexOf("://")<=0||a.indexOf("data:image/")===0||a.indexOf("blob:")===0)return!0;const r=new URL(a),l=window.location;return r.protocol===l.protocol&&r.host===l.host}function Xa(a,r,l){l[a]&&l[a].indexOf(r)!==-1||(l[a]=l[a]||[],l[a].push(r))}function Sa(a,r,l){if(l&&l[a]){const d=l[a].indexOf(r);d!==-1&&l[a].splice(d,1)}}class Ws{constructor(r,l={}){Te(this,l),this.type=r}}class ye extends Ws{constructor(r,l={}){super("error",Te({error:r},l))}}class Me{on(r,l){return this._listeners=this._listeners||{},Xa(r,l,this._listeners),this}off(r,l){return Sa(r,l,this._listeners),Sa(r,l,this._oneTimeListeners),this}once(r,l){return l?(this._oneTimeListeners=this._oneTimeListeners||{},Xa(r,l,this._oneTimeListeners),this):new Promise(d=>this.once(r,d))}fire(r,l){typeof r=="string"&&(r=new Ws(r,l||{}));const d=r.type;if(this.listens(d)){r.target=this;const m=this._listeners&&this._listeners[d]?this._listeners[d].slice():[];for(const S of m)S.call(this,r);const v=this._oneTimeListeners&&this._oneTimeListeners[d]?this._oneTimeListeners[d].slice():[];for(const S of v)Sa(d,S,this._oneTimeListeners),S.call(this,r);const _=this._eventedParent;_&&(Te(r,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),_.fire(r))}else r instanceof ye&&console.error(r.error);return this}listens(r){return this._listeners&&this._listeners[r]&&this._listeners[r].length>0||this._oneTimeListeners&&this._oneTimeListeners[r]&&this._oneTimeListeners[r].length>0||this._eventedParent&&this._eventedParent.listens(r)}setEventedParent(r,l){return this._eventedParent=r,this._eventedParentData=l,this}}var ce={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const at=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function nt(a,r){const l={};for(const d in a)d!=="ref"&&(l[d]=a[d]);return at.forEach(d=>{d in r&&(l[d]=r[d])}),l}function qe(a,r){if(Array.isArray(a)){if(!Array.isArray(r)||a.length!==r.length)return!1;for(let l=0;l<a.length;l++)if(!qe(a[l],r[l]))return!1;return!0}if(typeof a=="object"&&a!==null&&r!==null){if(typeof r!="object"||Object.keys(a).length!==Object.keys(r).length)return!1;for(const l in a)if(!qe(a[l],r[l]))return!1;return!0}return a===r}const et={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Gt(a,r,l){l.push({command:et.addSource,args:[a,r[a]]})}function Tn(a,r,l){r.push({command:et.removeSource,args:[a]}),l[a]=!0}function Dn(a,r,l,d){Tn(a,l,d),Gt(a,r,l)}function rs(a,r,l){let d;for(d in a[l])if(Object.prototype.hasOwnProperty.call(a[l],d)&&d!=="data"&&!qe(a[l][d],r[l][d]))return!1;for(d in r[l])if(Object.prototype.hasOwnProperty.call(r[l],d)&&d!=="data"&&!qe(a[l][d],r[l][d]))return!1;return!0}function Ta(a,r,l,d,m,v){let _;for(_ in r=r||{},a=a||{})Object.prototype.hasOwnProperty.call(a,_)&&(qe(a[_],r[_])||l.push({command:v,args:[d,_,r[_],m]}));for(_ in r)Object.prototype.hasOwnProperty.call(r,_)&&!Object.prototype.hasOwnProperty.call(a,_)&&(qe(a[_],r[_])||l.push({command:v,args:[d,_,r[_],m]}))}function ji(a){return a.id}function is(a,r){return a[r.id]=r,a}class Ke{constructor(r,l,d,m){this.message=(r?`${r}: `:"")+d,m&&(this.identifier=m),l!=null&&l.__line__&&(this.line=l.__line__)}}function xi(a,...r){for(const l of r)for(const d in l)a[d]=l[d];return a}class En extends Error{constructor(r,l){super(l),this.message=l,this.key=r}}class Ss{constructor(r,l=[]){this.parent=r,this.bindings={};for(const[d,m]of l)this.bindings[d]=m}concat(r){return new Ss(this,r)}get(r){if(this.bindings[r])return this.bindings[r];if(this.parent)return this.parent.get(r);throw new Error(`${r} not found in scope.`)}has(r){return!!this.bindings[r]||!!this.parent&&this.parent.has(r)}}const Hs={kind:"null"},tt={kind:"number"},jt={kind:"string"},Ot={kind:"boolean"},Br={kind:"color"},Ts={kind:"object"},Bt={kind:"value"},Ks={kind:"collator"},ie={kind:"formatted"},$={kind:"padding"},q={kind:"resolvedImage"},J={kind:"variableAnchorOffsetCollection"};function ae(a,r){return{kind:"array",itemType:a,N:r}}function le(a){if(a.kind==="array"){const r=le(a.itemType);return typeof a.N=="number"?`array<${r}, ${a.N}>`:a.itemType.kind==="value"?"array":`array<${r}>`}return a.kind}const be=[Hs,tt,jt,Ot,Br,ie,Ts,ae(Bt),$,q,J];function me(a,r){if(r.kind==="error")return null;if(a.kind==="array"){if(r.kind==="array"&&(r.N===0&&r.itemType.kind==="value"||!me(a.itemType,r.itemType))&&(typeof a.N!="number"||a.N===r.N))return null}else{if(a.kind===r.kind)return null;if(a.kind==="value"){for(const l of be)if(!me(l,r))return null}}return`Expected ${le(a)} but found ${le(r)} instead.`}function de(a,r){return r.some(l=>l.kind===a.kind)}function _e(a,r){return r.some(l=>l==="null"?a===null:l==="array"?Array.isArray(a):l==="object"?a&&!Array.isArray(a)&&typeof a=="object":l===typeof a)}function Le(a,r){return a.kind==="array"&&r.kind==="array"?a.itemType.kind===r.itemType.kind&&typeof a.N=="number":a.kind===r.kind}const ze=.96422,Be=.82521,Ct=4/29,Lt=6/29,gt=3*Lt*Lt,At=Lt*Lt*Lt,Ft=Math.PI/180,on=180/Math.PI;function dn(a){return(a%=360)<0&&(a+=360),a}function Jt([a,r,l,d]){let m,v;const _=kr((.2225045*(a=Yt(a))+.7168786*(r=Yt(r))+.0606169*(l=Yt(l)))/1);a===r&&r===l?m=v=_:(m=kr((.4360747*a+.3850649*r+.1430804*l)/ze),v=kr((.0139322*a+.0971045*r+.7141733*l)/Be));const S=116*_-16;return[S<0?0:S,500*(m-_),200*(_-v),d]}function Yt(a){return a<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4)}function kr(a){return a>At?Math.pow(a,1/3):a/gt+Ct}function pn([a,r,l,d]){let m=(a+16)/116,v=isNaN(r)?m:m+r/500,_=isNaN(l)?m:m-l/200;return m=1*xr(m),v=ze*xr(v),_=Be*xr(_),[er(3.1338561*v-1.6168667*m-.4906146*_),er(-.9787684*v+1.9161415*m+.033454*_),er(.0719453*v-.2289914*m+1.4052427*_),d]}function er(a){return(a=a<=.00304?12.92*a:1.055*Math.pow(a,1/2.4)-.055)<0?0:a>1?1:a}function xr(a){return a>Lt?a*a*a:gt*(a-Ct)}function $i(a){return parseInt(a.padEnd(2,a),16)/255}function mm(a,r){return Go(r?a/100:a,0,1)}function Go(a,r,l){return Math.min(Math.max(r,a),l)}function Zo(a){return!a.some(Number.isNaN)}const Px={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class un{constructor(r,l,d,m=1,v=!0){this.r=r,this.g=l,this.b=d,this.a=m,v||(this.r*=m,this.g*=m,this.b*=m,m||this.overwriteGetter("rgb",[r,l,d,m]))}static parse(r){if(r instanceof un)return r;if(typeof r!="string")return;const l=function(d){if((d=d.toLowerCase().trim())==="transparent")return[0,0,0,0];const m=Px[d];if(m){const[_,S,P]=m;return[_/255,S/255,P/255,1]}if(d.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(d)){const _=d.length<6?1:2;let S=1;return[$i(d.slice(S,S+=_)),$i(d.slice(S,S+=_)),$i(d.slice(S,S+=_)),$i(d.slice(S,S+_)||"ff")]}if(d.startsWith("rgb")){const _=d.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(_){const[S,P,I,D,O,U,H,X,te,oe,he,we]=_,pe=[D||" ",H||" ",oe].join("");if(pe==="  "||pe==="  /"||pe===",,"||pe===",,,"){const Se=[I,U,te].join(""),Pe=Se==="%%%"?100:Se===""?255:0;if(Pe){const Fe=[Go(+P/Pe,0,1),Go(+O/Pe,0,1),Go(+X/Pe,0,1),he?mm(+he,we):1];if(Zo(Fe))return Fe}}return}}const v=d.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(v){const[_,S,P,I,D,O,U,H,X]=v,te=[P||" ",D||" ",U].join("");if(te==="  "||te==="  /"||te===",,"||te===",,,"){const oe=[+S,Go(+I,0,100),Go(+O,0,100),H?mm(+H,X):1];if(Zo(oe))return function([he,we,pe,Se]){function Pe(Fe){const ct=(Fe+he/30)%12,vt=we*Math.min(pe,1-pe);return pe-vt*Math.max(-1,Math.min(ct-3,9-ct,1))}return he=dn(he),we/=100,pe/=100,[Pe(0),Pe(8),Pe(4),Se]}(oe)}}}(r);return l?new un(...l,!1):void 0}get rgb(){const{r,g:l,b:d,a:m}=this,v=m||1/0;return this.overwriteGetter("rgb",[r/v,l/v,d/v,m])}get hcl(){return this.overwriteGetter("hcl",function(r){const[l,d,m,v]=Jt(r),_=Math.sqrt(d*d+m*m);return[Math.round(1e4*_)?dn(Math.atan2(m,d)*on):NaN,_,l,v]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Jt(this.rgb))}overwriteGetter(r,l){return Object.defineProperty(this,r,{value:l}),l}toString(){const[r,l,d,m]=this.rgb;return`rgba(${[r,l,d].map(v=>Math.round(255*v)).join(",")},${m})`}}un.black=new un(0,0,0,1),un.white=new un(1,1,1,1),un.transparent=new un(0,0,0,0),un.red=new un(1,0,0,1);class _d{constructor(r,l,d){this.sensitivity=r?l?"variant":"case":l?"accent":"base",this.locale=d,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(r,l){return this.collator.compare(r,l)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class yu{constructor(r,l,d,m,v){this.text=r,this.image=l,this.scale=d,this.fontStack=m,this.textColor=v}}class Ir{constructor(r){this.sections=r}static fromString(r){return new Ir([new yu(r,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(r=>r.text.length!==0||r.image&&r.image.name.length!==0)}static factory(r){return r instanceof Ir?r:Ir.fromString(r)}toString(){return this.sections.length===0?"":this.sections.map(r=>r.text).join("")}}class _i{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof _i)return r;if(typeof r=="number")return new _i([r,r,r,r]);if(Array.isArray(r)&&!(r.length<1||r.length>4)){for(const l of r)if(typeof l!="number")return;switch(r.length){case 1:r=[r[0],r[0],r[0],r[0]];break;case 2:r=[r[0],r[1],r[0],r[1]];break;case 3:r=[r[0],r[1],r[2],r[1]]}return new _i(r)}}toString(){return JSON.stringify(this.values)}}const Ax=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Ui{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof Ui)return r;if(Array.isArray(r)&&!(r.length<1)&&r.length%2==0){for(let l=0;l<r.length;l+=2){const d=r[l],m=r[l+1];if(typeof d!="string"||!Ax.has(d)||!Array.isArray(m)||m.length!==2||typeof m[0]!="number"||typeof m[1]!="number")return}return new Ui(r)}}toString(){return JSON.stringify(this.values)}}class _r{constructor(r){this.name=r.name,this.available=r.available}toString(){return this.name}static fromString(r){return r?new _r({name:r,available:!1}):null}}function vu(a,r,l,d){return typeof a=="number"&&a>=0&&a<=255&&typeof r=="number"&&r>=0&&r<=255&&typeof l=="number"&&l>=0&&l<=255?d===void 0||typeof d=="number"&&d>=0&&d<=1?null:`Invalid rgba value [${[a,r,l,d].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof d=="number"?[a,r,l,d]:[a,r,l]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Wo(a){if(a===null||typeof a=="string"||typeof a=="boolean"||typeof a=="number"||a instanceof un||a instanceof _d||a instanceof Ir||a instanceof _i||a instanceof Ui||a instanceof _r)return!0;if(Array.isArray(a)){for(const r of a)if(!Wo(r))return!1;return!0}if(typeof a=="object"){for(const r in a)if(!Wo(a[r]))return!1;return!0}return!1}function An(a){if(a===null)return Hs;if(typeof a=="string")return jt;if(typeof a=="boolean")return Ot;if(typeof a=="number")return tt;if(a instanceof un)return Br;if(a instanceof _d)return Ks;if(a instanceof Ir)return ie;if(a instanceof _i)return $;if(a instanceof Ui)return J;if(a instanceof _r)return q;if(Array.isArray(a)){const r=a.length;let l;for(const d of a){const m=An(d);if(l){if(l===m)continue;l=Bt;break}l=m}return ae(l||Bt,r)}return Ts}function nn(a){const r=typeof a;return a===null?"":r==="string"||r==="number"||r==="boolean"?String(a):a instanceof un||a instanceof Ir||a instanceof _i||a instanceof Ui||a instanceof _r?a.toString():JSON.stringify(a)}class Qa{constructor(r,l){this.type=r,this.value=l}static parse(r,l){if(r.length!==2)return l.error(`'literal' expression requires exactly one argument, but found ${r.length-1} instead.`);if(!Wo(r[1]))return l.error("invalid value");const d=r[1];let m=An(d);const v=l.expectedType;return m.kind!=="array"||m.N!==0||!v||v.kind!=="array"||typeof v.N=="number"&&v.N!==0||(m=v),new Qa(m,d)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class Ln{constructor(r){this.name="ExpressionEvaluationError",this.message=r}toJSON(){return this.message}}const xu={string:jt,number:tt,boolean:Ot,object:Ts};class qi{constructor(r,l){this.type=r,this.args=l}static parse(r,l){if(r.length<2)return l.error("Expected at least one argument.");let d,m=1;const v=r[0];if(v==="array"){let S,P;if(r.length>2){const I=r[1];if(typeof I!="string"||!(I in xu)||I==="object")return l.error('The item type argument of "array" must be one of string, number, boolean',1);S=xu[I],m++}else S=Bt;if(r.length>3){if(r[2]!==null&&(typeof r[2]!="number"||r[2]<0||r[2]!==Math.floor(r[2])))return l.error('The length argument to "array" must be a positive integer literal',2);P=r[2],m++}d=ae(S,P)}else{if(!xu[v])throw new Error(`Types doesn't contain name = ${v}`);d=xu[v]}const _=[];for(;m<r.length;m++){const S=l.parse(r[m],m,Bt);if(!S)return null;_.push(S)}return new qi(d,_)}evaluate(r){for(let l=0;l<this.args.length;l++){const d=this.args[l].evaluate(r);if(!me(this.type,An(d)))return d;if(l===this.args.length-1)throw new Ln(`Expected value to be of type ${le(this.type)}, but found ${le(An(d))} instead.`)}throw new Error}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}const wd={"to-boolean":Ot,"to-color":Br,"to-number":tt,"to-string":jt};class Ea{constructor(r,l){this.type=r,this.args=l}static parse(r,l){if(r.length<2)return l.error("Expected at least one argument.");const d=r[0];if(!wd[d])throw new Error(`Can't parse ${d} as it is not part of the known types`);if((d==="to-boolean"||d==="to-string")&&r.length!==2)return l.error("Expected one argument.");const m=wd[d],v=[];for(let _=1;_<r.length;_++){const S=l.parse(r[_],_,Bt);if(!S)return null;v.push(S)}return new Ea(m,v)}evaluate(r){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(r);case"color":{let l,d;for(const m of this.args){if(l=m.evaluate(r),d=null,l instanceof un)return l;if(typeof l=="string"){const v=r.parseColor(l);if(v)return v}else if(Array.isArray(l)&&(d=l.length<3||l.length>4?`Invalid rbga value ${JSON.stringify(l)}: expected an array containing either three or four numeric values.`:vu(l[0],l[1],l[2],l[3]),!d))return new un(l[0]/255,l[1]/255,l[2]/255,l[3])}throw new Ln(d||`Could not parse color from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"padding":{let l;for(const d of this.args){l=d.evaluate(r);const m=_i.parse(l);if(m)return m}throw new Ln(`Could not parse padding from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"variableAnchorOffsetCollection":{let l;for(const d of this.args){l=d.evaluate(r);const m=Ui.parse(l);if(m)return m}throw new Ln(`Could not parse variableAnchorOffsetCollection from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"number":{let l=null;for(const d of this.args){if(l=d.evaluate(r),l===null)return 0;const m=Number(l);if(!isNaN(m))return m}throw new Ln(`Could not convert ${JSON.stringify(l)} to number.`)}case"formatted":return Ir.fromString(nn(this.args[0].evaluate(r)));case"resolvedImage":return _r.fromString(nn(this.args[0].evaluate(r)));default:return nn(this.args[0].evaluate(r))}}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}const gm=["Unknown","Point","LineString","Polygon"];class bd{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?gm[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(r){let l=this._parseColorCache[r];return l||(l=this._parseColorCache[r]=un.parse(r)),l}}class _u{constructor(r,l,d=[],m,v=new Ss,_=[]){this.registry=r,this.path=d,this.key=d.map(S=>`[${S}]`).join(""),this.scope=v,this.errors=_,this.expectedType=m,this._isConstant=l}parse(r,l,d,m,v={}){return l?this.concat(l,d,m)._parse(r,v):this._parse(r,v)}_parse(r,l){function d(m,v,_){return _==="assert"?new qi(v,[m]):_==="coerce"?new Ea(v,[m]):m}if(r!==null&&typeof r!="string"&&typeof r!="boolean"&&typeof r!="number"||(r=["literal",r]),Array.isArray(r)){if(r.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const m=r[0];if(typeof m!="string")return this.error(`Expression name must be a string, but found ${typeof m} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const v=this.registry[m];if(v){let _=v.parse(r,this);if(!_)return null;if(this.expectedType){const S=this.expectedType,P=_.type;if(S.kind!=="string"&&S.kind!=="number"&&S.kind!=="boolean"&&S.kind!=="object"&&S.kind!=="array"||P.kind!=="value")if(S.kind!=="color"&&S.kind!=="formatted"&&S.kind!=="resolvedImage"||P.kind!=="value"&&P.kind!=="string")if(S.kind!=="padding"||P.kind!=="value"&&P.kind!=="number"&&P.kind!=="array")if(S.kind!=="variableAnchorOffsetCollection"||P.kind!=="value"&&P.kind!=="array"){if(this.checkSubtype(S,P))return null}else _=d(_,S,l.typeAnnotation||"coerce");else _=d(_,S,l.typeAnnotation||"coerce");else _=d(_,S,l.typeAnnotation||"coerce");else _=d(_,S,l.typeAnnotation||"assert")}if(!(_ instanceof Qa)&&_.type.kind!=="resolvedImage"&&this._isConstant(_)){const S=new bd;try{_=new Qa(_.type,_.evaluate(S))}catch(P){return this.error(P.message),null}}return _}return this.error(`Unknown expression "${m}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(r===void 0?"'undefined' value invalid. Use null instead.":typeof r=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof r} instead.`)}concat(r,l,d){const m=typeof r=="number"?this.path.concat(r):this.path,v=d?this.scope.concat(d):this.scope;return new _u(this.registry,this._isConstant,m,l||null,v,this.errors)}error(r,...l){const d=`${this.key}${l.map(m=>`[${m}]`).join("")}`;this.errors.push(new En(d,r))}checkSubtype(r,l){const d=me(r,l);return d&&this.error(d),d}}class wu{constructor(r,l,d){this.type=Ks,this.locale=d,this.caseSensitive=r,this.diacriticSensitive=l}static parse(r,l){if(r.length!==2)return l.error("Expected one argument.");const d=r[1];if(typeof d!="object"||Array.isArray(d))return l.error("Collator options argument must be an object.");const m=l.parse(d["case-sensitive"]!==void 0&&d["case-sensitive"],1,Ot);if(!m)return null;const v=l.parse(d["diacritic-sensitive"]!==void 0&&d["diacritic-sensitive"],1,Ot);if(!v)return null;let _=null;return d.locale&&(_=l.parse(d.locale,1,jt),!_)?null:new wu(m,v,_)}evaluate(r){return new _d(this.caseSensitive.evaluate(r),this.diacriticSensitive.evaluate(r),this.locale?this.locale.evaluate(r):null)}eachChild(r){r(this.caseSensitive),r(this.diacriticSensitive),this.locale&&r(this.locale)}outputDefined(){return!1}}const Ca=8192;function Sd(a,r){a[0]=Math.min(a[0],r[0]),a[1]=Math.min(a[1],r[1]),a[2]=Math.max(a[2],r[0]),a[3]=Math.max(a[3],r[1])}function cc(a,r){return!(a[0]<=r[0]||a[2]>=r[2]||a[1]<=r[1]||a[3]>=r[3])}function ym(a,r){const l=(180+a[0])/360,d=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a[1]*Math.PI/360)))/360,m=Math.pow(2,r.z);return[Math.round(l*m*Ca),Math.round(d*m*Ca)]}function kx(a,r,l){const d=a[0]-r[0],m=a[1]-r[1],v=a[0]-l[0],_=a[1]-l[1];return d*_-v*m==0&&d*v<=0&&m*_<=0}function Td(a,r){let l=!1;for(let _=0,S=r.length;_<S;_++){const P=r[_];for(let I=0,D=P.length;I<D-1;I++){if(kx(a,P[I],P[I+1]))return!1;(m=P[I])[1]>(d=a)[1]!=(v=P[I+1])[1]>d[1]&&d[0]<(v[0]-m[0])*(d[1]-m[1])/(v[1]-m[1])+m[0]&&(l=!l)}}var d,m,v;return l}function Ed(a,r){for(let l=0;l<r.length;l++)if(Td(a,r[l]))return!0;return!1}function vm(a,r,l,d){const m=d[0]-l[0],v=d[1]-l[1],_=(a[0]-l[0])*v-m*(a[1]-l[1]),S=(r[0]-l[0])*v-m*(r[1]-l[1]);return _>0&&S<0||_<0&&S>0}function Ix(a,r,l){for(const I of l)for(let D=0;D<I.length-1;++D)if((S=[(_=I[D+1])[0]-(v=I[D])[0],_[1]-v[1]])[0]*(P=[(m=r)[0]-(d=a)[0],m[1]-d[1]])[1]-S[1]*P[0]!=0&&vm(d,m,v,_)&&vm(v,_,d,m))return!0;var d,m,v,_,S,P;return!1}function xm(a,r){for(let l=0;l<a.length;++l)if(!Td(a[l],r))return!1;for(let l=0;l<a.length-1;++l)if(Ix(a[l],a[l+1],r))return!1;return!0}function _m(a,r){for(let l=0;l<r.length;l++)if(xm(a,r[l]))return!0;return!1}function bu(a,r,l){const d=[];for(let m=0;m<a.length;m++){const v=[];for(let _=0;_<a[m].length;_++){const S=ym(a[m][_],l);Sd(r,S),v.push(S)}d.push(v)}return d}function wm(a,r,l){const d=[];for(let m=0;m<a.length;m++){const v=bu(a[m],r,l);d.push(v)}return d}function bm(a,r,l,d){if(a[0]<l[0]||a[0]>l[2]){const m=.5*d;let v=a[0]-l[0]>m?-d:l[0]-a[0]>m?d:0;v===0&&(v=a[0]-l[2]>m?-d:l[2]-a[0]>m?d:0),a[0]+=v}Sd(r,a)}function Cd(a,r,l,d){const m=Math.pow(2,d.z)*Ca,v=[d.x*Ca,d.y*Ca],_=[];for(const S of a)for(const P of S){const I=[P.x+v[0],P.y+v[1]];bm(I,r,l,m),_.push(I)}return _}function Pd(a,r,l,d){const m=Math.pow(2,d.z)*Ca,v=[d.x*Ca,d.y*Ca],_=[];for(const P of a){const I=[];for(const D of P){const O=[D.x+v[0],D.y+v[1]];Sd(r,O),I.push(O)}_.push(I)}if(r[2]-r[0]<=m/2){(S=r)[0]=S[1]=1/0,S[2]=S[3]=-1/0;for(const P of _)for(const I of P)bm(I,r,l,m)}var S;return _}class Ya{constructor(r,l){this.type=Ot,this.geojson=r,this.geometries=l}static parse(r,l){if(r.length!==2)return l.error(`'within' expression requires exactly one argument, but found ${r.length-1} instead.`);if(Wo(r[1])){const d=r[1];if(d.type==="FeatureCollection")for(let m=0;m<d.features.length;++m){const v=d.features[m].geometry.type;if(v==="Polygon"||v==="MultiPolygon")return new Ya(d,d.features[m].geometry)}else if(d.type==="Feature"){const m=d.geometry.type;if(m==="Polygon"||m==="MultiPolygon")return new Ya(d,d.geometry)}else if(d.type==="Polygon"||d.type==="MultiPolygon")return new Ya(d,d)}return l.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(r){if(r.geometry()!=null&&r.canonicalID()!=null){if(r.geometryType()==="Point")return function(l,d){const m=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],_=l.canonicalID();if(d.type==="Polygon"){const S=bu(d.coordinates,v,_),P=Cd(l.geometry(),m,v,_);if(!cc(m,v))return!1;for(const I of P)if(!Td(I,S))return!1}if(d.type==="MultiPolygon"){const S=wm(d.coordinates,v,_),P=Cd(l.geometry(),m,v,_);if(!cc(m,v))return!1;for(const I of P)if(!Ed(I,S))return!1}return!0}(r,this.geometries);if(r.geometryType()==="LineString")return function(l,d){const m=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],_=l.canonicalID();if(d.type==="Polygon"){const S=bu(d.coordinates,v,_),P=Pd(l.geometry(),m,v,_);if(!cc(m,v))return!1;for(const I of P)if(!xm(I,S))return!1}if(d.type==="MultiPolygon"){const S=wm(d.coordinates,v,_),P=Pd(l.geometry(),m,v,_);if(!cc(m,v))return!1;for(const I of P)if(!_m(I,S))return!1}return!0}(r,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class Su{constructor(r,l){this.type=l.type,this.name=r,this.boundExpression=l}static parse(r,l){if(r.length!==2||typeof r[1]!="string")return l.error("'var' expression requires exactly one string literal argument.");const d=r[1];return l.scope.has(d)?new Su(d,l.scope.get(d)):l.error(`Unknown variable "${d}". Make sure "${d}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(r){return this.boundExpression.evaluate(r)}eachChild(){}outputDefined(){return!1}}class Gi{constructor(r,l,d,m){this.name=r,this.type=l,this._evaluate=d,this.args=m}evaluate(r){return this._evaluate(r,this.args)}eachChild(r){this.args.forEach(r)}outputDefined(){return!1}static parse(r,l){const d=r[0],m=Gi.definitions[d];if(!m)return l.error(`Unknown expression "${d}". If you wanted a literal array, use ["literal", [...]].`,0);const v=Array.isArray(m)?m[0]:m.type,_=Array.isArray(m)?[[m[1],m[2]]]:m.overloads,S=_.filter(([I])=>!Array.isArray(I)||I.length===r.length-1);let P=null;for(const[I,D]of S){P=new _u(l.registry,Tu,l.path,null,l.scope);const O=[];let U=!1;for(let H=1;H<r.length;H++){const X=r[H],te=Array.isArray(I)?I[H-1]:I.type,oe=P.parse(X,1+O.length,te);if(!oe){U=!0;break}O.push(oe)}if(!U)if(Array.isArray(I)&&I.length!==O.length)P.error(`Expected ${I.length} arguments, but found ${O.length} instead.`);else{for(let H=0;H<O.length;H++){const X=Array.isArray(I)?I[H]:I.type,te=O[H];P.concat(H+1).checkSubtype(X,te.type)}if(P.errors.length===0)return new Gi(d,v,D,O)}}if(S.length===1)l.errors.push(...P.errors);else{const I=(S.length?S:_).map(([O])=>{return U=O,Array.isArray(U)?`(${U.map(le).join(", ")})`:`(${le(U.type)}...)`;var U}).join(" | "),D=[];for(let O=1;O<r.length;O++){const U=l.parse(r[O],1+D.length);if(!U)return null;D.push(le(U.type))}l.error(`Expected arguments of type ${I}, but found (${D.join(", ")}) instead.`)}return null}static register(r,l){Gi.definitions=l;for(const d in l)r[d]=Gi}}function Tu(a){if(a instanceof Su)return Tu(a.boundExpression);if(a instanceof Gi&&a.name==="error"||a instanceof wu||a instanceof Ya)return!1;const r=a instanceof Ea||a instanceof qi;let l=!0;return a.eachChild(d=>{l=r?l&&Tu(d):l&&d instanceof Qa}),!!l&&Eu(a)&&Cu(a,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Eu(a){if(a instanceof Gi&&(a.name==="get"&&a.args.length===1||a.name==="feature-state"||a.name==="has"&&a.args.length===1||a.name==="properties"||a.name==="geometry-type"||a.name==="id"||/^filter-/.test(a.name))||a instanceof Ya)return!1;let r=!0;return a.eachChild(l=>{r&&!Eu(l)&&(r=!1)}),r}function uc(a){if(a instanceof Gi&&a.name==="feature-state")return!1;let r=!0;return a.eachChild(l=>{r&&!uc(l)&&(r=!1)}),r}function Cu(a,r){if(a instanceof Gi&&r.indexOf(a.name)>=0)return!1;let l=!0;return a.eachChild(d=>{l&&!Cu(d,r)&&(l=!1)}),l}function Ho(a,r){const l=a.length-1;let d,m,v=0,_=l,S=0;for(;v<=_;)if(S=Math.floor((v+_)/2),d=a[S],m=a[S+1],d<=r){if(S===l||r<m)return S;v=S+1}else{if(!(d>r))throw new Ln("Input is not a number.");_=S-1}return 0}class Pa{constructor(r,l,d){this.type=r,this.input=l,this.labels=[],this.outputs=[];for(const[m,v]of d)this.labels.push(m),this.outputs.push(v)}static parse(r,l){if(r.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return l.error("Expected an even number of arguments.");const d=l.parse(r[1],1,tt);if(!d)return null;const m=[];let v=null;l.expectedType&&l.expectedType.kind!=="value"&&(v=l.expectedType);for(let _=1;_<r.length;_+=2){const S=_===1?-1/0:r[_],P=r[_+1],I=_,D=_+1;if(typeof S!="number")return l.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',I);if(m.length&&m[m.length-1][0]>=S)return l.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',I);const O=l.parse(P,D,v);if(!O)return null;v=v||O.type,m.push([S,O])}return new Pa(v,d,m)}evaluate(r){const l=this.labels,d=this.outputs;if(l.length===1)return d[0].evaluate(r);const m=this.input.evaluate(r);if(m<=l[0])return d[0].evaluate(r);const v=l.length;return m>=l[v-1]?d[v-1].evaluate(r):d[Ho(l,m)].evaluate(r)}eachChild(r){r(this.input);for(const l of this.outputs)r(l)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}}function Kt(a,r,l){return a+l*(r-a)}function Pu(a,r,l){return a.map((d,m)=>Kt(d,r[m],l))}const wi={number:Kt,color:function(a,r,l,d="rgb"){switch(d){case"rgb":{const[m,v,_,S]=Pu(a.rgb,r.rgb,l);return new un(m,v,_,S,!1)}case"hcl":{const[m,v,_,S]=a.hcl,[P,I,D,O]=r.hcl;let U,H;if(isNaN(m)||isNaN(P))isNaN(m)?isNaN(P)?U=NaN:(U=P,_!==1&&_!==0||(H=I)):(U=m,D!==1&&D!==0||(H=v));else{let we=P-m;P>m&&we>180?we-=360:P<m&&m-P>180&&(we+=360),U=m+l*we}const[X,te,oe,he]=function([we,pe,Se,Pe]){return we=isNaN(we)?0:we*Ft,pn([Se,Math.cos(we)*pe,Math.sin(we)*pe,Pe])}([U,H??Kt(v,I,l),Kt(_,D,l),Kt(S,O,l)]);return new un(X,te,oe,he,!1)}case"lab":{const[m,v,_,S]=pn(Pu(a.lab,r.lab,l));return new un(m,v,_,S,!1)}}},array:Pu,padding:function(a,r,l){return new _i(Pu(a.values,r.values,l))},variableAnchorOffsetCollection:function(a,r,l){const d=a.values,m=r.values;if(d.length!==m.length)throw new Ln(`Cannot interpolate values of different length. from: ${a.toString()}, to: ${r.toString()}`);const v=[];for(let _=0;_<d.length;_+=2){if(d[_]!==m[_])throw new Ln(`Cannot interpolate values containing mismatched anchors. from[${_}]: ${d[_]}, to[${_}]: ${m[_]}`);v.push(d[_]);const[S,P]=d[_+1],[I,D]=m[_+1];v.push([Kt(S,I,l),Kt(P,D,l)])}return new Ui(v)}};class bi{constructor(r,l,d,m,v){this.type=r,this.operator=l,this.interpolation=d,this.input=m,this.labels=[],this.outputs=[];for(const[_,S]of v)this.labels.push(_),this.outputs.push(S)}static interpolationFactor(r,l,d,m){let v=0;if(r.name==="exponential")v=Ad(l,r.base,d,m);else if(r.name==="linear")v=Ad(l,1,d,m);else if(r.name==="cubic-bezier"){const _=r.controlPoints;v=new j(_[0],_[1],_[2],_[3]).solve(Ad(l,1,d,m))}return v}static parse(r,l){let[d,m,v,..._]=r;if(!Array.isArray(m)||m.length===0)return l.error("Expected an interpolation type expression.",1);if(m[0]==="linear")m={name:"linear"};else if(m[0]==="exponential"){const I=m[1];if(typeof I!="number")return l.error("Exponential interpolation requires a numeric base.",1,1);m={name:"exponential",base:I}}else{if(m[0]!=="cubic-bezier")return l.error(`Unknown interpolation type ${String(m[0])}`,1,0);{const I=m.slice(1);if(I.length!==4||I.some(D=>typeof D!="number"||D<0||D>1))return l.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);m={name:"cubic-bezier",controlPoints:I}}}if(r.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return l.error("Expected an even number of arguments.");if(v=l.parse(v,2,tt),!v)return null;const S=[];let P=null;d==="interpolate-hcl"||d==="interpolate-lab"?P=Br:l.expectedType&&l.expectedType.kind!=="value"&&(P=l.expectedType);for(let I=0;I<_.length;I+=2){const D=_[I],O=_[I+1],U=I+3,H=I+4;if(typeof D!="number")return l.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',U);if(S.length&&S[S.length-1][0]>=D)return l.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',U);const X=l.parse(O,H,P);if(!X)return null;P=P||X.type,S.push([D,X])}return Le(P,tt)||Le(P,Br)||Le(P,$)||Le(P,J)||Le(P,ae(tt))?new bi(P,d,m,v,S):l.error(`Type ${le(P)} is not interpolatable.`)}evaluate(r){const l=this.labels,d=this.outputs;if(l.length===1)return d[0].evaluate(r);const m=this.input.evaluate(r);if(m<=l[0])return d[0].evaluate(r);const v=l.length;if(m>=l[v-1])return d[v-1].evaluate(r);const _=Ho(l,m),S=bi.interpolationFactor(this.interpolation,m,l[_],l[_+1]),P=d[_].evaluate(r),I=d[_+1].evaluate(r);switch(this.operator){case"interpolate":return wi[this.type.kind](P,I,S);case"interpolate-hcl":return wi.color(P,I,S,"hcl");case"interpolate-lab":return wi.color(P,I,S,"lab")}}eachChild(r){r(this.input);for(const l of this.outputs)r(l)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}}function Ad(a,r,l,d){const m=d-l,v=a-l;return m===0?0:r===1?v/m:(Math.pow(r,v)-1)/(Math.pow(r,m)-1)}class Au{constructor(r,l){this.type=r,this.args=l}static parse(r,l){if(r.length<2)return l.error("Expectected at least one argument.");let d=null;const m=l.expectedType;m&&m.kind!=="value"&&(d=m);const v=[];for(const S of r.slice(1)){const P=l.parse(S,1+v.length,d,void 0,{typeAnnotation:"omit"});if(!P)return null;d=d||P.type,v.push(P)}if(!d)throw new Error("No output type");const _=m&&v.some(S=>me(m,S.type));return new Au(_?Bt:d,v)}evaluate(r){let l,d=null,m=0;for(const v of this.args)if(m++,d=v.evaluate(r),d&&d instanceof _r&&!d.available&&(l||(l=d.name),d=null,m===this.args.length&&(d=l)),d!==null)break;return d}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}class ku{constructor(r,l){this.type=l.type,this.bindings=[].concat(r),this.result=l}evaluate(r){return this.result.evaluate(r)}eachChild(r){for(const l of this.bindings)r(l[1]);r(this.result)}static parse(r,l){if(r.length<4)return l.error(`Expected at least 3 arguments, but found ${r.length-1} instead.`);const d=[];for(let v=1;v<r.length-1;v+=2){const _=r[v];if(typeof _!="string")return l.error(`Expected string, but found ${typeof _} instead.`,v);if(/[^a-zA-Z0-9_]/.test(_))return l.error("Variable names must contain only alphanumeric characters or '_'.",v);const S=l.parse(r[v+1],v+1);if(!S)return null;d.push([_,S])}const m=l.parse(r[r.length-1],r.length-1,l.expectedType,d);return m?new ku(d,m):null}outputDefined(){return this.result.outputDefined()}}class kd{constructor(r,l,d){this.type=r,this.index=l,this.input=d}static parse(r,l){if(r.length!==3)return l.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const d=l.parse(r[1],1,tt),m=l.parse(r[2],2,ae(l.expectedType||Bt));return d&&m?new kd(m.type.itemType,d,m):null}evaluate(r){const l=this.index.evaluate(r),d=this.input.evaluate(r);if(l<0)throw new Ln(`Array index out of bounds: ${l} < 0.`);if(l>=d.length)throw new Ln(`Array index out of bounds: ${l} > ${d.length-1}.`);if(l!==Math.floor(l))throw new Ln(`Array index must be an integer, but found ${l} instead.`);return d[l]}eachChild(r){r(this.index),r(this.input)}outputDefined(){return!1}}class Id{constructor(r,l){this.type=Ot,this.needle=r,this.haystack=l}static parse(r,l){if(r.length!==3)return l.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const d=l.parse(r[1],1,Bt),m=l.parse(r[2],2,Bt);return d&&m?de(d.type,[Ot,jt,tt,Hs,Bt])?new Id(d,m):l.error(`Expected first argument to be of type boolean, string, number or null, but found ${le(d.type)} instead`):null}evaluate(r){const l=this.needle.evaluate(r),d=this.haystack.evaluate(r);if(!d)return!1;if(!_e(l,["boolean","string","number","null"]))throw new Ln(`Expected first argument to be of type boolean, string, number or null, but found ${le(An(l))} instead.`);if(!_e(d,["string","array"]))throw new Ln(`Expected second argument to be of type array or string, but found ${le(An(d))} instead.`);return d.indexOf(l)>=0}eachChild(r){r(this.needle),r(this.haystack)}outputDefined(){return!0}}class Iu{constructor(r,l,d){this.type=tt,this.needle=r,this.haystack=l,this.fromIndex=d}static parse(r,l){if(r.length<=2||r.length>=5)return l.error(`Expected 3 or 4 arguments, but found ${r.length-1} instead.`);const d=l.parse(r[1],1,Bt),m=l.parse(r[2],2,Bt);if(!d||!m)return null;if(!de(d.type,[Ot,jt,tt,Hs,Bt]))return l.error(`Expected first argument to be of type boolean, string, number or null, but found ${le(d.type)} instead`);if(r.length===4){const v=l.parse(r[3],3,tt);return v?new Iu(d,m,v):null}return new Iu(d,m)}evaluate(r){const l=this.needle.evaluate(r),d=this.haystack.evaluate(r);if(!_e(l,["boolean","string","number","null"]))throw new Ln(`Expected first argument to be of type boolean, string, number or null, but found ${le(An(l))} instead.`);if(!_e(d,["string","array"]))throw new Ln(`Expected second argument to be of type array or string, but found ${le(An(d))} instead.`);if(this.fromIndex){const m=this.fromIndex.evaluate(r);return d.indexOf(l,m)}return d.indexOf(l)}eachChild(r){r(this.needle),r(this.haystack),this.fromIndex&&r(this.fromIndex)}outputDefined(){return!1}}class Md{constructor(r,l,d,m,v,_){this.inputType=r,this.type=l,this.input=d,this.cases=m,this.outputs=v,this.otherwise=_}static parse(r,l){if(r.length<5)return l.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if(r.length%2!=1)return l.error("Expected an even number of arguments.");let d,m;l.expectedType&&l.expectedType.kind!=="value"&&(m=l.expectedType);const v={},_=[];for(let I=2;I<r.length-1;I+=2){let D=r[I];const O=r[I+1];Array.isArray(D)||(D=[D]);const U=l.concat(I);if(D.length===0)return U.error("Expected at least one branch label.");for(const X of D){if(typeof X!="number"&&typeof X!="string")return U.error("Branch labels must be numbers or strings.");if(typeof X=="number"&&Math.abs(X)>Number.MAX_SAFE_INTEGER)return U.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof X=="number"&&Math.floor(X)!==X)return U.error("Numeric branch labels must be integer values.");if(d){if(U.checkSubtype(d,An(X)))return null}else d=An(X);if(v[String(X)]!==void 0)return U.error("Branch labels must be unique.");v[String(X)]=_.length}const H=l.parse(O,I,m);if(!H)return null;m=m||H.type,_.push(H)}const S=l.parse(r[1],1,Bt);if(!S)return null;const P=l.parse(r[r.length-1],r.length-1,m);return P?S.type.kind!=="value"&&l.concat(1).checkSubtype(d,S.type)?null:new Md(d,m,S,v,_,P):null}evaluate(r){const l=this.input.evaluate(r);return(An(l)===this.inputType&&this.outputs[this.cases[l]]||this.otherwise).evaluate(r)}eachChild(r){r(this.input),this.outputs.forEach(r),r(this.otherwise)}outputDefined(){return this.outputs.every(r=>r.outputDefined())&&this.otherwise.outputDefined()}}class Rd{constructor(r,l,d){this.type=r,this.branches=l,this.otherwise=d}static parse(r,l){if(r.length<4)return l.error(`Expected at least 3 arguments, but found only ${r.length-1}.`);if(r.length%2!=0)return l.error("Expected an odd number of arguments.");let d;l.expectedType&&l.expectedType.kind!=="value"&&(d=l.expectedType);const m=[];for(let _=1;_<r.length-1;_+=2){const S=l.parse(r[_],_,Ot);if(!S)return null;const P=l.parse(r[_+1],_+1,d);if(!P)return null;m.push([S,P]),d=d||P.type}const v=l.parse(r[r.length-1],r.length-1,d);if(!v)return null;if(!d)throw new Error("Can't infer output type");return new Rd(d,m,v)}evaluate(r){for(const[l,d]of this.branches)if(l.evaluate(r))return d.evaluate(r);return this.otherwise.evaluate(r)}eachChild(r){for(const[l,d]of this.branches)r(l),r(d);r(this.otherwise)}outputDefined(){return this.branches.every(([r,l])=>l.outputDefined())&&this.otherwise.outputDefined()}}class Mu{constructor(r,l,d,m){this.type=r,this.input=l,this.beginIndex=d,this.endIndex=m}static parse(r,l){if(r.length<=2||r.length>=5)return l.error(`Expected 3 or 4 arguments, but found ${r.length-1} instead.`);const d=l.parse(r[1],1,Bt),m=l.parse(r[2],2,tt);if(!d||!m)return null;if(!de(d.type,[ae(Bt),jt,Bt]))return l.error(`Expected first argument to be of type array or string, but found ${le(d.type)} instead`);if(r.length===4){const v=l.parse(r[3],3,tt);return v?new Mu(d.type,d,m,v):null}return new Mu(d.type,d,m)}evaluate(r){const l=this.input.evaluate(r),d=this.beginIndex.evaluate(r);if(!_e(l,["string","array"]))throw new Ln(`Expected first argument to be of type array or string, but found ${le(An(l))} instead.`);if(this.endIndex){const m=this.endIndex.evaluate(r);return l.slice(d,m)}return l.slice(d)}eachChild(r){r(this.input),r(this.beginIndex),this.endIndex&&r(this.endIndex)}outputDefined(){return!1}}function Sm(a,r){return a==="=="||a==="!="?r.kind==="boolean"||r.kind==="string"||r.kind==="number"||r.kind==="null"||r.kind==="value":r.kind==="string"||r.kind==="number"||r.kind==="value"}function Tm(a,r,l,d){return d.compare(r,l)===0}function Ko(a,r,l){const d=a!=="=="&&a!=="!=";return class kz{constructor(v,_,S){this.type=Ot,this.lhs=v,this.rhs=_,this.collator=S,this.hasUntypedArgument=v.type.kind==="value"||_.type.kind==="value"}static parse(v,_){if(v.length!==3&&v.length!==4)return _.error("Expected two or three arguments.");const S=v[0];let P=_.parse(v[1],1,Bt);if(!P)return null;if(!Sm(S,P.type))return _.concat(1).error(`"${S}" comparisons are not supported for type '${le(P.type)}'.`);let I=_.parse(v[2],2,Bt);if(!I)return null;if(!Sm(S,I.type))return _.concat(2).error(`"${S}" comparisons are not supported for type '${le(I.type)}'.`);if(P.type.kind!==I.type.kind&&P.type.kind!=="value"&&I.type.kind!=="value")return _.error(`Cannot compare types '${le(P.type)}' and '${le(I.type)}'.`);d&&(P.type.kind==="value"&&I.type.kind!=="value"?P=new qi(I.type,[P]):P.type.kind!=="value"&&I.type.kind==="value"&&(I=new qi(P.type,[I])));let D=null;if(v.length===4){if(P.type.kind!=="string"&&I.type.kind!=="string"&&P.type.kind!=="value"&&I.type.kind!=="value")return _.error("Cannot use collator to compare non-string types.");if(D=_.parse(v[3],3,Ks),!D)return null}return new kz(P,I,D)}evaluate(v){const _=this.lhs.evaluate(v),S=this.rhs.evaluate(v);if(d&&this.hasUntypedArgument){const P=An(_),I=An(S);if(P.kind!==I.kind||P.kind!=="string"&&P.kind!=="number")throw new Ln(`Expected arguments for "${a}" to be (string, string) or (number, number), but found (${P.kind}, ${I.kind}) instead.`)}if(this.collator&&!d&&this.hasUntypedArgument){const P=An(_),I=An(S);if(P.kind!=="string"||I.kind!=="string")return r(v,_,S)}return this.collator?l(v,_,S,this.collator.evaluate(v)):r(v,_,S)}eachChild(v){v(this.lhs),v(this.rhs),this.collator&&v(this.collator)}outputDefined(){return!0}}}const Mx=Ko("==",function(a,r,l){return r===l},Tm),Rx=Ko("!=",function(a,r,l){return r!==l},function(a,r,l,d){return!Tm(0,r,l,d)}),Dx=Ko("<",function(a,r,l){return r<l},function(a,r,l,d){return d.compare(r,l)<0}),Lx=Ko(">",function(a,r,l){return r>l},function(a,r,l,d){return d.compare(r,l)>0}),zx=Ko("<=",function(a,r,l){return r<=l},function(a,r,l,d){return d.compare(r,l)<=0}),Ox=Ko(">=",function(a,r,l){return r>=l},function(a,r,l,d){return d.compare(r,l)>=0});class Dd{constructor(r,l,d,m,v){this.type=jt,this.number=r,this.locale=l,this.currency=d,this.minFractionDigits=m,this.maxFractionDigits=v}static parse(r,l){if(r.length!==3)return l.error("Expected two arguments.");const d=l.parse(r[1],1,tt);if(!d)return null;const m=r[2];if(typeof m!="object"||Array.isArray(m))return l.error("NumberFormat options argument must be an object.");let v=null;if(m.locale&&(v=l.parse(m.locale,1,jt),!v))return null;let _=null;if(m.currency&&(_=l.parse(m.currency,1,jt),!_))return null;let S=null;if(m["min-fraction-digits"]&&(S=l.parse(m["min-fraction-digits"],1,tt),!S))return null;let P=null;return m["max-fraction-digits"]&&(P=l.parse(m["max-fraction-digits"],1,tt),!P)?null:new Dd(d,v,_,S,P)}evaluate(r){return new Intl.NumberFormat(this.locale?this.locale.evaluate(r):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(r):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(r):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(r):void 0}).format(this.number.evaluate(r))}eachChild(r){r(this.number),this.locale&&r(this.locale),this.currency&&r(this.currency),this.minFractionDigits&&r(this.minFractionDigits),this.maxFractionDigits&&r(this.maxFractionDigits)}outputDefined(){return!1}}class Ru{constructor(r){this.type=ie,this.sections=r}static parse(r,l){if(r.length<2)return l.error("Expected at least one argument.");const d=r[1];if(!Array.isArray(d)&&typeof d=="object")return l.error("First argument must be an image or text section.");const m=[];let v=!1;for(let _=1;_<=r.length-1;++_){const S=r[_];if(v&&typeof S=="object"&&!Array.isArray(S)){v=!1;let P=null;if(S["font-scale"]&&(P=l.parse(S["font-scale"],1,tt),!P))return null;let I=null;if(S["text-font"]&&(I=l.parse(S["text-font"],1,ae(jt)),!I))return null;let D=null;if(S["text-color"]&&(D=l.parse(S["text-color"],1,Br),!D))return null;const O=m[m.length-1];O.scale=P,O.font=I,O.textColor=D}else{const P=l.parse(r[_],1,Bt);if(!P)return null;const I=P.type.kind;if(I!=="string"&&I!=="value"&&I!=="null"&&I!=="resolvedImage")return l.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");v=!0,m.push({content:P,scale:null,font:null,textColor:null})}}return new Ru(m)}evaluate(r){return new Ir(this.sections.map(l=>{const d=l.content.evaluate(r);return An(d)===q?new yu("",d,null,null,null):new yu(nn(d),null,l.scale?l.scale.evaluate(r):null,l.font?l.font.evaluate(r).join(","):null,l.textColor?l.textColor.evaluate(r):null)}))}eachChild(r){for(const l of this.sections)r(l.content),l.scale&&r(l.scale),l.font&&r(l.font),l.textColor&&r(l.textColor)}outputDefined(){return!1}}class Ld{constructor(r){this.type=q,this.input=r}static parse(r,l){if(r.length!==2)return l.error("Expected two arguments.");const d=l.parse(r[1],1,jt);return d?new Ld(d):l.error("No image name provided.")}evaluate(r){const l=this.input.evaluate(r),d=_r.fromString(l);return d&&r.availableImages&&(d.available=r.availableImages.indexOf(l)>-1),d}eachChild(r){r(this.input)}outputDefined(){return!1}}class zd{constructor(r){this.type=tt,this.input=r}static parse(r,l){if(r.length!==2)return l.error(`Expected 1 argument, but found ${r.length-1} instead.`);const d=l.parse(r[1],1);return d?d.type.kind!=="array"&&d.type.kind!=="string"&&d.type.kind!=="value"?l.error(`Expected argument of type string or array, but found ${le(d.type)} instead.`):new zd(d):null}evaluate(r){const l=this.input.evaluate(r);if(typeof l=="string"||Array.isArray(l))return l.length;throw new Ln(`Expected value to be of type string or array, but found ${le(An(l))} instead.`)}eachChild(r){r(this.input)}outputDefined(){return!1}}const Xo={"==":Mx,"!=":Rx,">":Lx,"<":Dx,">=":Ox,"<=":zx,array:qi,at:kd,boolean:qi,case:Rd,coalesce:Au,collator:wu,format:Ru,image:Ld,in:Id,"index-of":Iu,interpolate:bi,"interpolate-hcl":bi,"interpolate-lab":bi,length:zd,let:ku,literal:Qa,match:Md,number:qi,"number-format":Dd,object:qi,slice:Mu,step:Pa,string:qi,"to-boolean":Ea,"to-color":Ea,"to-number":Ea,"to-string":Ea,var:Su,within:Ya};function Em(a,[r,l,d,m]){r=r.evaluate(a),l=l.evaluate(a),d=d.evaluate(a);const v=m?m.evaluate(a):1,_=vu(r,l,d,v);if(_)throw new Ln(_);return new un(r/255,l/255,d/255,v,!1)}function Cm(a,r){return a in r}function Od(a,r){const l=r[a];return l===void 0?null:l}function Ja(a){return{type:a}}function Pm(a){return{result:"success",value:a}}function Aa(a){return{result:"error",value:a}}function Qo(a){return a["property-type"]==="data-driven"||a["property-type"]==="cross-faded-data-driven"}function Am(a){return!!a.expression&&a.expression.parameters.indexOf("zoom")>-1}function Fd(a){return!!a.expression&&a.expression.interpolated}function rn(a){return a instanceof Number?"number":a instanceof String?"string":a instanceof Boolean?"boolean":Array.isArray(a)?"array":a===null?"null":typeof a}function kn(a){return typeof a=="object"&&a!==null&&!Array.isArray(a)}function Fx(a){return a}function Xt(a,r){const l=r.type==="color",d=a.stops&&typeof a.stops[0][0]=="object",m=d||!(d||a.property!==void 0),v=a.type||(Fd(r)?"exponential":"interval");if(l||r.type==="padding"){const D=l?un.parse:_i.parse;(a=xi({},a)).stops&&(a.stops=a.stops.map(O=>[O[0],D(O[1])])),a.default=D(a.default?a.default:r.default)}if(a.colorSpace&&(_=a.colorSpace)!=="rgb"&&_!=="hcl"&&_!=="lab")throw new Error(`Unknown color space: "${a.colorSpace}"`);var _;let S,P,I;if(v==="exponential")S=hc;else if(v==="interval")S=Cn;else if(v==="categorical"){S=In,P=Object.create(null);for(const D of a.stops)P[D[0]]=D[1];I=typeof a.stops[0][0]}else{if(v!=="identity")throw new Error(`Unknown function type "${v}"`);S=km}if(d){const D={},O=[];for(let X=0;X<a.stops.length;X++){const te=a.stops[X],oe=te[0].zoom;D[oe]===void 0&&(D[oe]={zoom:oe,type:a.type,property:a.property,default:a.default,stops:[]},O.push(oe)),D[oe].stops.push([te[0].value,te[1]])}const U=[];for(const X of O)U.push([D[X].zoom,Xt(D[X],r)]);const H={name:"linear"};return{kind:"composite",interpolationType:H,interpolationFactor:bi.interpolationFactor.bind(void 0,H),zoomStops:U.map(X=>X[0]),evaluate:({zoom:X},te)=>hc({stops:U,base:a.base},r,X).evaluate(X,te)}}if(m){const D=v==="exponential"?{name:"exponential",base:a.base!==void 0?a.base:1}:null;return{kind:"camera",interpolationType:D,interpolationFactor:bi.interpolationFactor.bind(void 0,D),zoomStops:a.stops.map(O=>O[0]),evaluate:({zoom:O})=>S(a,r,O,P,I)}}return{kind:"source",evaluate(D,O){const U=O&&O.properties?O.properties[a.property]:void 0;return U===void 0?eo(a.default,r.default):S(a,r,U,P,I)}}}function eo(a,r,l){return a!==void 0?a:r!==void 0?r:l!==void 0?l:void 0}function In(a,r,l,d,m){return eo(typeof l===m?d[l]:void 0,a.default,r.default)}function Cn(a,r,l){if(rn(l)!=="number")return eo(a.default,r.default);const d=a.stops.length;if(d===1||l<=a.stops[0][0])return a.stops[0][1];if(l>=a.stops[d-1][0])return a.stops[d-1][1];const m=Ho(a.stops.map(v=>v[0]),l);return a.stops[m][1]}function hc(a,r,l){const d=a.base!==void 0?a.base:1;if(rn(l)!=="number")return eo(a.default,r.default);const m=a.stops.length;if(m===1||l<=a.stops[0][0])return a.stops[0][1];if(l>=a.stops[m-1][0])return a.stops[m-1][1];const v=Ho(a.stops.map(D=>D[0]),l),_=function(D,O,U,H){const X=H-U,te=D-U;return X===0?0:O===1?te/X:(Math.pow(O,te)-1)/(Math.pow(O,X)-1)}(l,d,a.stops[v][0],a.stops[v+1][0]),S=a.stops[v][1],P=a.stops[v+1][1],I=wi[r.type]||Fx;return typeof S.evaluate=="function"?{evaluate(...D){const O=S.evaluate.apply(void 0,D),U=P.evaluate.apply(void 0,D);if(O!==void 0&&U!==void 0)return I(O,U,_,a.colorSpace)}}:I(S,P,_,a.colorSpace)}function km(a,r,l){switch(r.type){case"color":l=un.parse(l);break;case"formatted":l=Ir.fromString(l.toString());break;case"resolvedImage":l=_r.fromString(l.toString());break;case"padding":l=_i.parse(l);break;default:rn(l)===r.type||r.type==="enum"&&r.values[l]||(l=void 0)}return eo(l,a.default,r.default)}Gi.register(Xo,{error:[{kind:"error"},[jt],(a,[r])=>{throw new Ln(r.evaluate(a))}],typeof:[jt,[Bt],(a,[r])=>le(An(r.evaluate(a)))],"to-rgba":[ae(tt,4),[Br],(a,[r])=>{const[l,d,m,v]=r.evaluate(a).rgb;return[255*l,255*d,255*m,v]}],rgb:[Br,[tt,tt,tt],Em],rgba:[Br,[tt,tt,tt,tt],Em],has:{type:Ot,overloads:[[[jt],(a,[r])=>Cm(r.evaluate(a),a.properties())],[[jt,Ts],(a,[r,l])=>Cm(r.evaluate(a),l.evaluate(a))]]},get:{type:Bt,overloads:[[[jt],(a,[r])=>Od(r.evaluate(a),a.properties())],[[jt,Ts],(a,[r,l])=>Od(r.evaluate(a),l.evaluate(a))]]},"feature-state":[Bt,[jt],(a,[r])=>Od(r.evaluate(a),a.featureState||{})],properties:[Ts,[],a=>a.properties()],"geometry-type":[jt,[],a=>a.geometryType()],id:[Bt,[],a=>a.id()],zoom:[tt,[],a=>a.globals.zoom],"heatmap-density":[tt,[],a=>a.globals.heatmapDensity||0],"line-progress":[tt,[],a=>a.globals.lineProgress||0],accumulated:[Bt,[],a=>a.globals.accumulated===void 0?null:a.globals.accumulated],"+":[tt,Ja(tt),(a,r)=>{let l=0;for(const d of r)l+=d.evaluate(a);return l}],"*":[tt,Ja(tt),(a,r)=>{let l=1;for(const d of r)l*=d.evaluate(a);return l}],"-":{type:tt,overloads:[[[tt,tt],(a,[r,l])=>r.evaluate(a)-l.evaluate(a)],[[tt],(a,[r])=>-r.evaluate(a)]]},"/":[tt,[tt,tt],(a,[r,l])=>r.evaluate(a)/l.evaluate(a)],"%":[tt,[tt,tt],(a,[r,l])=>r.evaluate(a)%l.evaluate(a)],ln2:[tt,[],()=>Math.LN2],pi:[tt,[],()=>Math.PI],e:[tt,[],()=>Math.E],"^":[tt,[tt,tt],(a,[r,l])=>Math.pow(r.evaluate(a),l.evaluate(a))],sqrt:[tt,[tt],(a,[r])=>Math.sqrt(r.evaluate(a))],log10:[tt,[tt],(a,[r])=>Math.log(r.evaluate(a))/Math.LN10],ln:[tt,[tt],(a,[r])=>Math.log(r.evaluate(a))],log2:[tt,[tt],(a,[r])=>Math.log(r.evaluate(a))/Math.LN2],sin:[tt,[tt],(a,[r])=>Math.sin(r.evaluate(a))],cos:[tt,[tt],(a,[r])=>Math.cos(r.evaluate(a))],tan:[tt,[tt],(a,[r])=>Math.tan(r.evaluate(a))],asin:[tt,[tt],(a,[r])=>Math.asin(r.evaluate(a))],acos:[tt,[tt],(a,[r])=>Math.acos(r.evaluate(a))],atan:[tt,[tt],(a,[r])=>Math.atan(r.evaluate(a))],min:[tt,Ja(tt),(a,r)=>Math.min(...r.map(l=>l.evaluate(a)))],max:[tt,Ja(tt),(a,r)=>Math.max(...r.map(l=>l.evaluate(a)))],abs:[tt,[tt],(a,[r])=>Math.abs(r.evaluate(a))],round:[tt,[tt],(a,[r])=>{const l=r.evaluate(a);return l<0?-Math.round(-l):Math.round(l)}],floor:[tt,[tt],(a,[r])=>Math.floor(r.evaluate(a))],ceil:[tt,[tt],(a,[r])=>Math.ceil(r.evaluate(a))],"filter-==":[Ot,[jt,Bt],(a,[r,l])=>a.properties()[r.value]===l.value],"filter-id-==":[Ot,[Bt],(a,[r])=>a.id()===r.value],"filter-type-==":[Ot,[jt],(a,[r])=>a.geometryType()===r.value],"filter-<":[Ot,[jt,Bt],(a,[r,l])=>{const d=a.properties()[r.value],m=l.value;return typeof d==typeof m&&d<m}],"filter-id-<":[Ot,[Bt],(a,[r])=>{const l=a.id(),d=r.value;return typeof l==typeof d&&l<d}],"filter->":[Ot,[jt,Bt],(a,[r,l])=>{const d=a.properties()[r.value],m=l.value;return typeof d==typeof m&&d>m}],"filter-id->":[Ot,[Bt],(a,[r])=>{const l=a.id(),d=r.value;return typeof l==typeof d&&l>d}],"filter-<=":[Ot,[jt,Bt],(a,[r,l])=>{const d=a.properties()[r.value],m=l.value;return typeof d==typeof m&&d<=m}],"filter-id-<=":[Ot,[Bt],(a,[r])=>{const l=a.id(),d=r.value;return typeof l==typeof d&&l<=d}],"filter->=":[Ot,[jt,Bt],(a,[r,l])=>{const d=a.properties()[r.value],m=l.value;return typeof d==typeof m&&d>=m}],"filter-id->=":[Ot,[Bt],(a,[r])=>{const l=a.id(),d=r.value;return typeof l==typeof d&&l>=d}],"filter-has":[Ot,[Bt],(a,[r])=>r.value in a.properties()],"filter-has-id":[Ot,[],a=>a.id()!==null&&a.id()!==void 0],"filter-type-in":[Ot,[ae(jt)],(a,[r])=>r.value.indexOf(a.geometryType())>=0],"filter-id-in":[Ot,[ae(Bt)],(a,[r])=>r.value.indexOf(a.id())>=0],"filter-in-small":[Ot,[jt,ae(Bt)],(a,[r,l])=>l.value.indexOf(a.properties()[r.value])>=0],"filter-in-large":[Ot,[jt,ae(Bt)],(a,[r,l])=>function(d,m,v,_){for(;v<=_;){const S=v+_>>1;if(m[S]===d)return!0;m[S]>d?_=S-1:v=S+1}return!1}(a.properties()[r.value],l.value,0,l.value.length-1)],all:{type:Ot,overloads:[[[Ot,Ot],(a,[r,l])=>r.evaluate(a)&&l.evaluate(a)],[Ja(Ot),(a,r)=>{for(const l of r)if(!l.evaluate(a))return!1;return!0}]]},any:{type:Ot,overloads:[[[Ot,Ot],(a,[r,l])=>r.evaluate(a)||l.evaluate(a)],[Ja(Ot),(a,r)=>{for(const l of r)if(l.evaluate(a))return!0;return!1}]]},"!":[Ot,[Ot],(a,[r])=>!r.evaluate(a)],"is-supported-script":[Ot,[jt],(a,[r])=>{const l=a.globals&&a.globals.isSupportedScript;return!l||l(r.evaluate(a))}],upcase:[jt,[jt],(a,[r])=>r.evaluate(a).toUpperCase()],downcase:[jt,[jt],(a,[r])=>r.evaluate(a).toLowerCase()],concat:[jt,Ja(Bt),(a,r)=>r.map(l=>nn(l.evaluate(a))).join("")],"resolved-locale":[jt,[Ks],(a,[r])=>r.evaluate(a).resolvedLocale()]});class Nd{constructor(r,l){var d;this.expression=r,this._warningHistory={},this._evaluator=new bd,this._defaultValue=l?(d=l).type==="color"&&kn(d.default)?new un(0,0,0,0):d.type==="color"?un.parse(d.default)||null:d.type==="padding"?_i.parse(d.default)||null:d.type==="variableAnchorOffsetCollection"?Ui.parse(d.default)||null:d.default===void 0?null:d.default:null,this._enumValues=l&&l.type==="enum"?l.values:null}evaluateWithoutErrorHandling(r,l,d,m,v,_){return this._evaluator.globals=r,this._evaluator.feature=l,this._evaluator.featureState=d,this._evaluator.canonical=m,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=_,this.expression.evaluate(this._evaluator)}evaluate(r,l,d,m,v,_){this._evaluator.globals=r,this._evaluator.feature=l||null,this._evaluator.featureState=d||null,this._evaluator.canonical=m,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=_||null;try{const S=this.expression.evaluate(this._evaluator);if(S==null||typeof S=="number"&&S!=S)return this._defaultValue;if(this._enumValues&&!(S in this._enumValues))throw new Ln(`Expected value to be one of ${Object.keys(this._enumValues).map(P=>JSON.stringify(P)).join(", ")}, but found ${JSON.stringify(S)} instead.`);return S}catch(S){return this._warningHistory[S.message]||(this._warningHistory[S.message]=!0,typeof console<"u"&&console.warn(S.message)),this._defaultValue}}}function Du(a){return Array.isArray(a)&&a.length>0&&typeof a[0]=="string"&&a[0]in Xo}function Lu(a,r){const l=new _u(Xo,Tu,[],r?function(m){const v={color:Br,string:jt,number:tt,enum:jt,boolean:Ot,formatted:ie,padding:$,resolvedImage:q,variableAnchorOffsetCollection:J};return m.type==="array"?ae(v[m.value]||Bt,m.length):v[m.type]}(r):void 0),d=l.parse(a,void 0,void 0,void 0,r&&r.type==="string"?{typeAnnotation:"coerce"}:void 0);return d?Pm(new Nd(d,r)):Aa(l.errors)}class Bd{constructor(r,l){this.kind=r,this._styleExpression=l,this.isStateDependent=r!=="constant"&&!uc(l.expression)}evaluateWithoutErrorHandling(r,l,d,m,v,_){return this._styleExpression.evaluateWithoutErrorHandling(r,l,d,m,v,_)}evaluate(r,l,d,m,v,_){return this._styleExpression.evaluate(r,l,d,m,v,_)}}class zu{constructor(r,l,d,m){this.kind=r,this.zoomStops=d,this._styleExpression=l,this.isStateDependent=r!=="camera"&&!uc(l.expression),this.interpolationType=m}evaluateWithoutErrorHandling(r,l,d,m,v,_){return this._styleExpression.evaluateWithoutErrorHandling(r,l,d,m,v,_)}evaluate(r,l,d,m,v,_){return this._styleExpression.evaluate(r,l,d,m,v,_)}interpolationFactor(r,l,d){return this.interpolationType?bi.interpolationFactor(this.interpolationType,r,l,d):0}}function Vd(a,r){const l=Lu(a,r);if(l.result==="error")return l;const d=l.value.expression,m=Eu(d);if(!m&&!Qo(r))return Aa([new En("","data expressions not supported")]);const v=Cu(d,["zoom"]);if(!v&&!Am(r))return Aa([new En("","zoom expressions not supported")]);const _=fc(d);return _||v?_ instanceof En?Aa([_]):_ instanceof bi&&!Fd(r)?Aa([new En("",'"interpolate" expressions cannot be used with this property')]):Pm(_?new zu(m?"camera":"composite",l.value,_.labels,_ instanceof bi?_.interpolation:void 0):new Bd(m?"constant":"source",l.value)):Aa([new En("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class dc{constructor(r,l){this._parameters=r,this._specification=l,xi(this,Xt(this._parameters,this._specification))}static deserialize(r){return new dc(r._parameters,r._specification)}static serialize(r){return{_parameters:r._parameters,_specification:r._specification}}}function fc(a){let r=null;if(a instanceof ku)r=fc(a.result);else if(a instanceof Au){for(const l of a.args)if(r=fc(l),r)break}else(a instanceof Pa||a instanceof bi)&&a.input instanceof Gi&&a.input.name==="zoom"&&(r=a);return r instanceof En||a.eachChild(l=>{const d=fc(l);d instanceof En?r=d:!r&&d?r=new En("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):r&&d&&r!==d&&(r=new En("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),r}function pc(a){if(a===!0||a===!1)return!0;if(!Array.isArray(a)||a.length===0)return!1;switch(a[0]){case"has":return a.length>=2&&a[1]!=="$id"&&a[1]!=="$type";case"in":return a.length>=3&&(typeof a[1]!="string"||Array.isArray(a[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return a.length!==3||Array.isArray(a[1])||Array.isArray(a[2]);case"any":case"all":for(const r of a.slice(1))if(!pc(r)&&typeof r!="boolean")return!1;return!0;default:return!0}}const Nx={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function jd(a){if(a==null)return{filter:()=>!0,needGeometry:!1};pc(a)||(a=Ou(a));const r=Lu(a,Nx);if(r.result==="error")throw new Error(r.value.map(l=>`${l.key}: ${l.message}`).join(", "));return{filter:(l,d,m)=>r.value.evaluate(l,d,{},m),needGeometry:Im(a)}}function Bx(a,r){return a<r?-1:a>r?1:0}function Im(a){if(!Array.isArray(a))return!1;if(a[0]==="within")return!0;for(let r=1;r<a.length;r++)if(Im(a[r]))return!0;return!1}function Ou(a){if(!a)return!0;const r=a[0];return a.length<=1?r!=="any":r==="=="?$d(a[1],a[2],"=="):r==="!="?mc($d(a[1],a[2],"==")):r==="<"||r===">"||r==="<="||r===">="?$d(a[1],a[2],r):r==="any"?(l=a.slice(1),["any"].concat(l.map(Ou))):r==="all"?["all"].concat(a.slice(1).map(Ou)):r==="none"?["all"].concat(a.slice(1).map(Ou).map(mc)):r==="in"?Mm(a[1],a.slice(2)):r==="!in"?mc(Mm(a[1],a.slice(2))):r==="has"?Rm(a[1]):r==="!has"?mc(Rm(a[1])):r!=="within"||a;var l}function $d(a,r,l){switch(a){case"$type":return[`filter-type-${l}`,r];case"$id":return[`filter-id-${l}`,r];default:return[`filter-${l}`,a,r]}}function Mm(a,r){if(r.length===0)return!1;switch(a){case"$type":return["filter-type-in",["literal",r]];case"$id":return["filter-id-in",["literal",r]];default:return r.length>200&&!r.some(l=>typeof l!=typeof r[0])?["filter-in-large",a,["literal",r.sort(Bx)]]:["filter-in-small",a,["literal",r]]}}function Rm(a){switch(a){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",a]}}function mc(a){return["!",a]}function Fu(a){const r=typeof a;if(r==="number"||r==="boolean"||r==="string"||a==null)return JSON.stringify(a);if(Array.isArray(a)){let m="[";for(const v of a)m+=`${Fu(v)},`;return`${m}]`}const l=Object.keys(a).sort();let d="{";for(let m=0;m<l.length;m++)d+=`${JSON.stringify(l[m])}:${Fu(a[l[m]])},`;return`${d}}`}function Nu(a){let r="";for(const l of at)r+=`/${Fu(a[l])}`;return r}function Dm(a){const r=a.value;return r?[new Ke(a.key,r,"constants have been deprecated as of v8")]:[]}function zn(a){return a instanceof Number||a instanceof String||a instanceof Boolean?a.valueOf():a}function to(a){if(Array.isArray(a))return a.map(to);if(a instanceof Object&&!(a instanceof Number||a instanceof String||a instanceof Boolean)){const r={};for(const l in a)r[l]=to(a[l]);return r}return zn(a)}function ni(a){const r=a.key,l=a.value,d=a.valueSpec||{},m=a.objectElementValidators||{},v=a.style,_=a.styleSpec,S=a.validateSpec;let P=[];const I=rn(l);if(I!=="object")return[new Ke(r,l,`object expected, ${I} found`)];for(const D in l){const O=D.split(".")[0],U=d[O]||d["*"];let H;if(m[O])H=m[O];else if(d[O])H=S;else if(m["*"])H=m["*"];else{if(!d["*"]){P.push(new Ke(r,l[D],`unknown property "${D}"`));continue}H=S}P=P.concat(H({key:(r&&`${r}.`)+D,value:l[D],valueSpec:U,style:v,styleSpec:_,object:l,objectKey:D,validateSpec:S},l))}for(const D in d)m[D]||d[D].required&&d[D].default===void 0&&l[D]===void 0&&P.push(new Ke(r,l,`missing required property "${D}"`));return P}function Yo(a){const r=a.value,l=a.valueSpec,d=a.style,m=a.styleSpec,v=a.key,_=a.arrayElementValidator||a.validateSpec;if(rn(r)!=="array")return[new Ke(v,r,`array expected, ${rn(r)} found`)];if(l.length&&r.length!==l.length)return[new Ke(v,r,`array length ${l.length} expected, length ${r.length} found`)];if(l["min-length"]&&r.length<l["min-length"])return[new Ke(v,r,`array length at least ${l["min-length"]} expected, length ${r.length} found`)];let S={type:l.value,values:l.values};m.$version<7&&(S.function=l.function),rn(l.value)==="object"&&(S=l.value);let P=[];for(let I=0;I<r.length;I++)P=P.concat(_({array:r,arrayIndex:I,value:r[I],valueSpec:S,validateSpec:a.validateSpec,style:d,styleSpec:m,key:`${v}[${I}]`}));return P}function gc(a){const r=a.key,l=a.value,d=a.valueSpec;let m=rn(l);return m==="number"&&l!=l&&(m="NaN"),m!=="number"?[new Ke(r,l,`number expected, ${m} found`)]:"minimum"in d&&l<d.minimum?[new Ke(r,l,`${l} is less than the minimum value ${d.minimum}`)]:"maximum"in d&&l>d.maximum?[new Ke(r,l,`${l} is greater than the maximum value ${d.maximum}`)]:[]}function Bu(a){const r=a.valueSpec,l=zn(a.value.type);let d,m,v,_={};const S=l!=="categorical"&&a.value.property===void 0,P=!S,I=rn(a.value.stops)==="array"&&rn(a.value.stops[0])==="array"&&rn(a.value.stops[0][0])==="object",D=ni({key:a.key,value:a.value,valueSpec:a.styleSpec.function,validateSpec:a.validateSpec,style:a.style,styleSpec:a.styleSpec,objectElementValidators:{stops:function(H){if(l==="identity")return[new Ke(H.key,H.value,'identity function may not have a "stops" property')];let X=[];const te=H.value;return X=X.concat(Yo({key:H.key,value:te,valueSpec:H.valueSpec,validateSpec:H.validateSpec,style:H.style,styleSpec:H.styleSpec,arrayElementValidator:O})),rn(te)==="array"&&te.length===0&&X.push(new Ke(H.key,te,"array must have at least one stop")),X},default:function(H){return H.validateSpec({key:H.key,value:H.value,valueSpec:r,validateSpec:H.validateSpec,style:H.style,styleSpec:H.styleSpec})}}});return l==="identity"&&S&&D.push(new Ke(a.key,a.value,'missing required property "property"')),l==="identity"||a.value.stops||D.push(new Ke(a.key,a.value,'missing required property "stops"')),l==="exponential"&&a.valueSpec.expression&&!Fd(a.valueSpec)&&D.push(new Ke(a.key,a.value,"exponential functions not supported")),a.styleSpec.$version>=8&&(P&&!Qo(a.valueSpec)?D.push(new Ke(a.key,a.value,"property functions not supported")):S&&!Am(a.valueSpec)&&D.push(new Ke(a.key,a.value,"zoom functions not supported"))),l!=="categorical"&&!I||a.value.property!==void 0||D.push(new Ke(a.key,a.value,'"property" property is required')),D;function O(H){let X=[];const te=H.value,oe=H.key;if(rn(te)!=="array")return[new Ke(oe,te,`array expected, ${rn(te)} found`)];if(te.length!==2)return[new Ke(oe,te,`array length 2 expected, length ${te.length} found`)];if(I){if(rn(te[0])!=="object")return[new Ke(oe,te,`object expected, ${rn(te[0])} found`)];if(te[0].zoom===void 0)return[new Ke(oe,te,"object stop key must have zoom")];if(te[0].value===void 0)return[new Ke(oe,te,"object stop key must have value")];if(v&&v>zn(te[0].zoom))return[new Ke(oe,te[0].zoom,"stop zoom values must appear in ascending order")];zn(te[0].zoom)!==v&&(v=zn(te[0].zoom),m=void 0,_={}),X=X.concat(ni({key:`${oe}[0]`,value:te[0],valueSpec:{zoom:{}},validateSpec:H.validateSpec,style:H.style,styleSpec:H.styleSpec,objectElementValidators:{zoom:gc,value:U}}))}else X=X.concat(U({key:`${oe}[0]`,value:te[0],valueSpec:{},validateSpec:H.validateSpec,style:H.style,styleSpec:H.styleSpec},te));return Du(to(te[1]))?X.concat([new Ke(`${oe}[1]`,te[1],"expressions are not allowed in function stops.")]):X.concat(H.validateSpec({key:`${oe}[1]`,value:te[1],valueSpec:r,validateSpec:H.validateSpec,style:H.style,styleSpec:H.styleSpec}))}function U(H,X){const te=rn(H.value),oe=zn(H.value),he=H.value!==null?H.value:X;if(d){if(te!==d)return[new Ke(H.key,he,`${te} stop domain type must match previous stop domain type ${d}`)]}else d=te;if(te!=="number"&&te!=="string"&&te!=="boolean")return[new Ke(H.key,he,"stop domain value must be a number, string, or boolean")];if(te!=="number"&&l!=="categorical"){let we=`number expected, ${te} found`;return Qo(r)&&l===void 0&&(we+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Ke(H.key,he,we)]}return l!=="categorical"||te!=="number"||isFinite(oe)&&Math.floor(oe)===oe?l!=="categorical"&&te==="number"&&m!==void 0&&oe<m?[new Ke(H.key,he,"stop domain values must appear in ascending order")]:(m=oe,l==="categorical"&&oe in _?[new Ke(H.key,he,"stop domain values must be unique")]:(_[oe]=!0,[])):[new Ke(H.key,he,`integer expected, found ${oe}`)]}}function no(a){const r=(a.expressionContext==="property"?Vd:Lu)(to(a.value),a.valueSpec);if(r.result==="error")return r.value.map(d=>new Ke(`${a.key}${d.key}`,a.value,d.message));const l=r.value.expression||r.value._styleExpression.expression;if(a.expressionContext==="property"&&a.propertyKey==="text-font"&&!l.outputDefined())return[new Ke(a.key,a.value,`Invalid data expression for "${a.propertyKey}". Output values must be contained as literals within the expression.`)];if(a.expressionContext==="property"&&a.propertyType==="layout"&&!uc(l))return[new Ke(a.key,a.value,'"feature-state" data expressions are not supported with layout properties.')];if(a.expressionContext==="filter"&&!uc(l))return[new Ke(a.key,a.value,'"feature-state" data expressions are not supported with filters.')];if(a.expressionContext&&a.expressionContext.indexOf("cluster")===0){if(!Cu(l,["zoom","feature-state"]))return[new Ke(a.key,a.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(a.expressionContext==="cluster-initial"&&!Eu(l))return[new Ke(a.key,a.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function yc(a){const r=a.key,l=a.value,d=a.valueSpec,m=[];return Array.isArray(d.values)?d.values.indexOf(zn(l))===-1&&m.push(new Ke(r,l,`expected one of [${d.values.join(", ")}], ${JSON.stringify(l)} found`)):Object.keys(d.values).indexOf(zn(l))===-1&&m.push(new Ke(r,l,`expected one of [${Object.keys(d.values).join(", ")}], ${JSON.stringify(l)} found`)),m}function Jo(a){return pc(to(a.value))?no(xi({},a,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Lm(a)}function Lm(a){const r=a.value,l=a.key;if(rn(r)!=="array")return[new Ke(l,r,`array expected, ${rn(r)} found`)];const d=a.styleSpec;let m,v=[];if(r.length<1)return[new Ke(l,r,"filter array must have at least 1 element")];switch(v=v.concat(yc({key:`${l}[0]`,value:r[0],valueSpec:d.filter_operator,style:a.style,styleSpec:a.styleSpec})),zn(r[0])){case"<":case"<=":case">":case">=":r.length>=2&&zn(r[1])==="$type"&&v.push(new Ke(l,r,`"$type" cannot be use with operator "${r[0]}"`));case"==":case"!=":r.length!==3&&v.push(new Ke(l,r,`filter array for operator "${r[0]}" must have 3 elements`));case"in":case"!in":r.length>=2&&(m=rn(r[1]),m!=="string"&&v.push(new Ke(`${l}[1]`,r[1],`string expected, ${m} found`)));for(let _=2;_<r.length;_++)m=rn(r[_]),zn(r[1])==="$type"?v=v.concat(yc({key:`${l}[${_}]`,value:r[_],valueSpec:d.geometry_type,style:a.style,styleSpec:a.styleSpec})):m!=="string"&&m!=="number"&&m!=="boolean"&&v.push(new Ke(`${l}[${_}]`,r[_],`string, number, or boolean expected, ${m} found`));break;case"any":case"all":case"none":for(let _=1;_<r.length;_++)v=v.concat(Lm({key:`${l}[${_}]`,value:r[_],style:a.style,styleSpec:a.styleSpec}));break;case"has":case"!has":m=rn(r[1]),r.length!==2?v.push(new Ke(l,r,`filter array for "${r[0]}" operator must have 2 elements`)):m!=="string"&&v.push(new Ke(`${l}[1]`,r[1],`string expected, ${m} found`));break;case"within":m=rn(r[1]),r.length!==2?v.push(new Ke(l,r,`filter array for "${r[0]}" operator must have 2 elements`)):m!=="object"&&v.push(new Ke(`${l}[1]`,r[1],`object expected, ${m} found`))}return v}function zm(a,r){const l=a.key,d=a.validateSpec,m=a.style,v=a.styleSpec,_=a.value,S=a.objectKey,P=v[`${r}_${a.layerType}`];if(!P)return[];const I=S.match(/^(.*)-transition$/);if(r==="paint"&&I&&P[I[1]]&&P[I[1]].transition)return d({key:l,value:_,valueSpec:v.transition,style:m,styleSpec:v});const D=a.valueSpec||P[S];if(!D)return[new Ke(l,_,`unknown property "${S}"`)];let O;if(rn(_)==="string"&&Qo(D)&&!D.tokens&&(O=/^{([^}]+)}$/.exec(_)))return[new Ke(l,_,`"${S}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(O[1])} }\`.`)];const U=[];return a.layerType==="symbol"&&(S==="text-field"&&m&&!m.glyphs&&U.push(new Ke(l,_,'use of "text-field" requires a style "glyphs" property')),S==="text-font"&&kn(to(_))&&zn(_.type)==="identity"&&U.push(new Ke(l,_,'"text-font" does not support identity functions'))),U.concat(d({key:a.key,value:_,valueSpec:D,style:m,styleSpec:v,expressionContext:"property",propertyType:r,propertyKey:S}))}function Om(a){return zm(a,"paint")}function Fm(a){return zm(a,"layout")}function Nm(a){let r=[];const l=a.value,d=a.key,m=a.style,v=a.styleSpec;l.type||l.ref||r.push(new Ke(d,l,'either "type" or "ref" is required'));let _=zn(l.type);const S=zn(l.ref);if(l.id){const P=zn(l.id);for(let I=0;I<a.arrayIndex;I++){const D=m.layers[I];zn(D.id)===P&&r.push(new Ke(d,l.id,`duplicate layer id "${l.id}", previously used at line ${D.id.__line__}`))}}if("ref"in l){let P;["type","source","source-layer","filter","layout"].forEach(I=>{I in l&&r.push(new Ke(d,l[I],`"${I}" is prohibited for ref layers`))}),m.layers.forEach(I=>{zn(I.id)===S&&(P=I)}),P?P.ref?r.push(new Ke(d,l.ref,"ref cannot reference another ref layer")):_=zn(P.type):r.push(new Ke(d,l.ref,`ref layer "${S}" not found`))}else if(_!=="background")if(l.source){const P=m.sources&&m.sources[l.source],I=P&&zn(P.type);P?I==="vector"&&_==="raster"?r.push(new Ke(d,l.source,`layer "${l.id}" requires a raster source`)):I!=="raster-dem"&&_==="hillshade"?r.push(new Ke(d,l.source,`layer "${l.id}" requires a raster-dem source`)):I==="raster"&&_!=="raster"?r.push(new Ke(d,l.source,`layer "${l.id}" requires a vector source`)):I!=="vector"||l["source-layer"]?I==="raster-dem"&&_!=="hillshade"?r.push(new Ke(d,l.source,"raster-dem source can only be used with layer type 'hillshade'.")):_!=="line"||!l.paint||!l.paint["line-gradient"]||I==="geojson"&&P.lineMetrics||r.push(new Ke(d,l,`layer "${l.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):r.push(new Ke(d,l,`layer "${l.id}" must specify a "source-layer"`)):r.push(new Ke(d,l.source,`source "${l.source}" not found`))}else r.push(new Ke(d,l,'missing required property "source"'));return r=r.concat(ni({key:d,value:l,valueSpec:v.layer,style:a.style,styleSpec:a.styleSpec,validateSpec:a.validateSpec,objectElementValidators:{"*":()=>[],type:()=>a.validateSpec({key:`${d}.type`,value:l.type,valueSpec:v.layer.type,style:a.style,styleSpec:a.styleSpec,validateSpec:a.validateSpec,object:l,objectKey:"type"}),filter:Jo,layout:P=>ni({layer:l,key:P.key,value:P.value,style:P.style,styleSpec:P.styleSpec,validateSpec:P.validateSpec,objectElementValidators:{"*":I=>Fm(xi({layerType:_},I))}}),paint:P=>ni({layer:l,key:P.key,value:P.value,style:P.style,styleSpec:P.styleSpec,validateSpec:P.validateSpec,objectElementValidators:{"*":I=>Om(xi({layerType:_},I))}})}})),r}function Es(a){const r=a.value,l=a.key,d=rn(r);return d!=="string"?[new Ke(l,r,`string expected, ${d} found`)]:[]}const vc={promoteId:function({key:a,value:r}){if(rn(r)==="string")return Es({key:a,value:r});{const l=[];for(const d in r)l.push(...Es({key:`${a}.${d}`,value:r[d]}));return l}}};function Si(a){const r=a.value,l=a.key,d=a.styleSpec,m=a.style,v=a.validateSpec;if(!r.type)return[new Ke(l,r,'"type" is required')];const _=zn(r.type);let S;switch(_){case"vector":case"raster":return S=ni({key:l,value:r,valueSpec:d[`source_${_.replace("-","_")}`],style:a.style,styleSpec:d,objectElementValidators:vc,validateSpec:v}),S;case"raster-dem":return S=function(P){var I;const D=(I=P.sourceName)!==null&&I!==void 0?I:"",O=P.value,U=P.styleSpec,H=U.source_raster_dem,X=P.style;let te=[];const oe=rn(O);if(O===void 0)return te;if(oe!=="object")return te.push(new Ke("source_raster_dem",O,`object expected, ${oe} found`)),te;const he=zn(O.encoding)==="custom",we=["redFactor","greenFactor","blueFactor","baseShift"],pe=P.value.encoding?`"${P.value.encoding}"`:"Default";for(const Se in O)!he&&we.includes(Se)?te.push(new Ke(Se,O[Se],`In "${D}": "${Se}" is only valid when "encoding" is set to "custom". ${pe} encoding found`)):H[Se]?te=te.concat(P.validateSpec({key:Se,value:O[Se],valueSpec:H[Se],validateSpec:P.validateSpec,style:X,styleSpec:U})):te.push(new Ke(Se,O[Se],`unknown property "${Se}"`));return te}({sourceName:l,value:r,style:a.style,styleSpec:d,validateSpec:v}),S;case"geojson":if(S=ni({key:l,value:r,valueSpec:d.source_geojson,style:m,styleSpec:d,validateSpec:v,objectElementValidators:vc}),r.cluster)for(const P in r.clusterProperties){const[I,D]=r.clusterProperties[P],O=typeof I=="string"?[I,["accumulated"],["get",P]]:I;S.push(...no({key:`${l}.${P}.map`,value:D,validateSpec:v,expressionContext:"cluster-map"})),S.push(...no({key:`${l}.${P}.reduce`,value:O,validateSpec:v,expressionContext:"cluster-reduce"}))}return S;case"video":return ni({key:l,value:r,valueSpec:d.source_video,style:m,validateSpec:v,styleSpec:d});case"image":return ni({key:l,value:r,valueSpec:d.source_image,style:m,validateSpec:v,styleSpec:d});case"canvas":return[new Ke(l,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return yc({key:`${l}.type`,value:r.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:m,validateSpec:v,styleSpec:d})}}function xc(a){const r=a.value,l=a.styleSpec,d=l.light,m=a.style;let v=[];const _=rn(r);if(r===void 0)return v;if(_!=="object")return v=v.concat([new Ke("light",r,`object expected, ${_} found`)]),v;for(const S in r){const P=S.match(/^(.*)-transition$/);v=v.concat(P&&d[P[1]]&&d[P[1]].transition?a.validateSpec({key:S,value:r[S],valueSpec:l.transition,validateSpec:a.validateSpec,style:m,styleSpec:l}):d[S]?a.validateSpec({key:S,value:r[S],valueSpec:d[S],validateSpec:a.validateSpec,style:m,styleSpec:l}):[new Ke(S,r[S],`unknown property "${S}"`)])}return v}function Bm(a){const r=a.value,l=a.styleSpec,d=l.terrain,m=a.style;let v=[];const _=rn(r);if(r===void 0)return v;if(_!=="object")return v=v.concat([new Ke("terrain",r,`object expected, ${_} found`)]),v;for(const S in r)v=v.concat(d[S]?a.validateSpec({key:S,value:r[S],valueSpec:d[S],validateSpec:a.validateSpec,style:m,styleSpec:l}):[new Ke(S,r[S],`unknown property "${S}"`)]);return v}function Vm(a){let r=[];const l=a.value,d=a.key;if(Array.isArray(l)){const m=[],v=[];for(const _ in l)l[_].id&&m.includes(l[_].id)&&r.push(new Ke(d,l,`all the sprites' ids must be unique, but ${l[_].id} is duplicated`)),m.push(l[_].id),l[_].url&&v.includes(l[_].url)&&r.push(new Ke(d,l,`all the sprites' URLs must be unique, but ${l[_].url} is duplicated`)),v.push(l[_].url),r=r.concat(ni({key:`${d}[${_}]`,value:l[_],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:a.validateSpec}));return r}return Es({key:d,value:l})}const jm={"*":()=>[],array:Yo,boolean:function(a){const r=a.value,l=a.key,d=rn(r);return d!=="boolean"?[new Ke(l,r,`boolean expected, ${d} found`)]:[]},number:gc,color:function(a){const r=a.key,l=a.value,d=rn(l);return d!=="string"?[new Ke(r,l,`color expected, ${d} found`)]:un.parse(String(l))?[]:[new Ke(r,l,`color expected, "${l}" found`)]},constants:Dm,enum:yc,filter:Jo,function:Bu,layer:Nm,object:ni,source:Si,light:xc,terrain:Bm,string:Es,formatted:function(a){return Es(a).length===0?[]:no(a)},resolvedImage:function(a){return Es(a).length===0?[]:no(a)},padding:function(a){const r=a.key,l=a.value;if(rn(l)==="array"){if(l.length<1||l.length>4)return[new Ke(r,l,`padding requires 1 to 4 values; ${l.length} values found`)];const d={type:"number"};let m=[];for(let v=0;v<l.length;v++)m=m.concat(a.validateSpec({key:`${r}[${v}]`,value:l[v],validateSpec:a.validateSpec,valueSpec:d}));return m}return gc({key:r,value:l,valueSpec:{}})},variableAnchorOffsetCollection:function(a){const r=a.key,l=a.value,d=rn(l),m=a.styleSpec;if(d!=="array"||l.length<1||l.length%2!=0)return[new Ke(r,l,"variableAnchorOffsetCollection requires a non-empty array of even length")];let v=[];for(let _=0;_<l.length;_+=2)v=v.concat(yc({key:`${r}[${_}]`,value:l[_],valueSpec:m.layout_symbol["text-anchor"]})),v=v.concat(Yo({key:`${r}[${_+1}]`,value:l[_+1],valueSpec:{length:2,value:"number"},validateSpec:a.validateSpec,style:a.style,styleSpec:m}));return v},sprite:Vm};function Xs(a){const r=a.value,l=a.valueSpec,d=a.styleSpec;return a.validateSpec=Xs,l.expression&&kn(zn(r))?Bu(a):l.expression&&Du(to(r))?no(a):l.type&&jm[l.type]?jm[l.type](a):ni(xi({},a,{valueSpec:l.type?d[l.type]:l}))}function $m(a){const r=a.value,l=a.key,d=Es(a);return d.length||(r.indexOf("{fontstack}")===-1&&d.push(new Ke(l,r,'"glyphs" url must include a "{fontstack}" token')),r.indexOf("{range}")===-1&&d.push(new Ke(l,r,'"glyphs" url must include a "{range}" token'))),d}function Zi(a,r=ce){let l=[];return l=l.concat(Xs({key:"",value:a,valueSpec:r.$root,styleSpec:r,style:a,validateSpec:Xs,objectElementValidators:{glyphs:$m,"*":()=>[]}})),a.constants&&(l=l.concat(Dm({key:"constants",value:a.constants,style:a,styleSpec:r,validateSpec:Xs}))),Vu(l)}function Qs(a){return function(r){return a({...r,validateSpec:Xs})}}function Vu(a){return[].concat(a).sort((r,l)=>r.line-l.line)}function Ys(a){return function(...r){return Vu(a.apply(this,r))}}Zi.source=Ys(Qs(Si)),Zi.sprite=Ys(Qs(Vm)),Zi.glyphs=Ys(Qs($m)),Zi.light=Ys(Qs(xc)),Zi.terrain=Ys(Qs(Bm)),Zi.layer=Ys(Qs(Nm)),Zi.filter=Ys(Qs(Jo)),Zi.paintProperty=Ys(Qs(Om)),Zi.layoutProperty=Ys(Qs(Fm));const Js=Zi,Vx=Js.light,Ud=Js.paintProperty,Um=Js.layoutProperty;function ju(a,r){let l=!1;if(r&&r.length)for(const d of r)a.fire(new ye(new Error(d.message))),l=!0;return l}class el{constructor(r,l,d){const m=this.cells=[];if(r instanceof ArrayBuffer){this.arrayBuffer=r;const _=new Int32Array(this.arrayBuffer);r=_[0],this.d=(l=_[1])+2*(d=_[2]);for(let P=0;P<this.d*this.d;P++){const I=_[3+P],D=_[3+P+1];m.push(I===D?null:_.subarray(I,D))}const S=_[3+m.length+1];this.keys=_.subarray(_[3+m.length],S),this.bboxes=_.subarray(S),this.insert=this._insertReadonly}else{this.d=l+2*d;for(let _=0;_<this.d*this.d;_++)m.push([]);this.keys=[],this.bboxes=[]}this.n=l,this.extent=r,this.padding=d,this.scale=l/r,this.uid=0;const v=d/l*r;this.min=-v,this.max=r+v}insert(r,l,d,m,v){this._forEachCell(l,d,m,v,this._insertCell,this.uid++,void 0,void 0),this.keys.push(r),this.bboxes.push(l),this.bboxes.push(d),this.bboxes.push(m),this.bboxes.push(v)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(r,l,d,m,v,_){this.cells[v].push(_)}query(r,l,d,m,v){const _=this.min,S=this.max;if(r<=_&&l<=_&&S<=d&&S<=m&&!v)return Array.prototype.slice.call(this.keys);{const P=[];return this._forEachCell(r,l,d,m,this._queryCell,P,{},v),P}}_queryCell(r,l,d,m,v,_,S,P){const I=this.cells[v];if(I!==null){const D=this.keys,O=this.bboxes;for(let U=0;U<I.length;U++){const H=I[U];if(S[H]===void 0){const X=4*H;(P?P(O[X+0],O[X+1],O[X+2],O[X+3]):r<=O[X+2]&&l<=O[X+3]&&d>=O[X+0]&&m>=O[X+1])?(S[H]=!0,_.push(D[H])):S[H]=!1}}}}_forEachCell(r,l,d,m,v,_,S,P){const I=this._convertToCellCoord(r),D=this._convertToCellCoord(l),O=this._convertToCellCoord(d),U=this._convertToCellCoord(m);for(let H=I;H<=O;H++)for(let X=D;X<=U;X++){const te=this.d*X+H;if((!P||P(this._convertFromCellCoord(H),this._convertFromCellCoord(X),this._convertFromCellCoord(H+1),this._convertFromCellCoord(X+1)))&&v.call(this,r,l,d,m,te,_,S,P))return}}_convertFromCellCoord(r){return(r-this.padding)/this.scale}_convertToCellCoord(r){return Math.max(0,Math.min(this.d-1,Math.floor(r*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const r=this.cells,l=3+this.cells.length+1+1;let d=0;for(let _=0;_<this.cells.length;_++)d+=this.cells[_].length;const m=new Int32Array(l+d+this.keys.length+this.bboxes.length);m[0]=this.extent,m[1]=this.n,m[2]=this.padding;let v=l;for(let _=0;_<r.length;_++){const S=r[_];m[3+_]=v,m.set(S,v),v+=S.length}return m[3+r.length]=v,m.set(this.keys,v),v+=this.keys.length,m[3+r.length+1]=v,m.set(this.bboxes,v),v+=this.bboxes.length,m.buffer}static serialize(r,l){const d=r.toArrayBuffer();return l&&l.push(d),{buffer:d}}static deserialize(r){return new el(r.buffer)}}const ea={};function dt(a,r,l={}){if(ea[a])throw new Error(`${a} is already registered.`);Object.defineProperty(r,"_classRegistryKey",{value:a,writeable:!1}),ea[a]={klass:r,omit:l.omit||[],shallow:l.shallow||[]}}dt("Object",Object),dt("TransferableGridIndex",el),dt("Color",un),dt("Error",Error),dt("AJAXError",Bi),dt("ResolvedImage",_r),dt("StylePropertyFunction",dc),dt("StyleExpression",Nd,{omit:["_evaluator"]}),dt("ZoomDependentExpression",zu),dt("ZoomConstantExpression",Bd),dt("CompoundExpression",Gi,{omit:["_evaluate"]});for(const a in Xo)Xo[a]._classRegistryKey||dt(`Expression_${a}`,Xo[a]);function $u(a){return a&&typeof ArrayBuffer<"u"&&(a instanceof ArrayBuffer||a.constructor&&a.constructor.name==="ArrayBuffer")}function ka(a,r){if(a==null||typeof a=="boolean"||typeof a=="number"||typeof a=="string"||a instanceof Boolean||a instanceof Number||a instanceof String||a instanceof Date||a instanceof RegExp||a instanceof Blob)return a;if($u(a)||Xe(a))return r&&r.push(a),a;if(ArrayBuffer.isView(a)){const l=a;return r&&r.push(l.buffer),l}if(a instanceof ImageData)return r&&r.push(a.data.buffer),a;if(Array.isArray(a)){const l=[];for(const d of a)l.push(ka(d,r));return l}if(typeof a=="object"){const l=a.constructor,d=l._classRegistryKey;if(!d)throw new Error("can't serialize object of unregistered class");if(!ea[d])throw new Error(`${d} is not registered.`);const m=l.serialize?l.serialize(a,r):{};if(l.serialize){if(r&&m===r[r.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const v in a){if(!a.hasOwnProperty(v)||ea[d].omit.indexOf(v)>=0)continue;const _=a[v];m[v]=ea[d].shallow.indexOf(v)>=0?_:ka(_,r)}a instanceof Error&&(m.message=a.message)}if(m.$name)throw new Error("$name property is reserved for worker serialization logic.");return d!=="Object"&&(m.$name=d),m}throw new Error("can't serialize object of type "+typeof a)}function tl(a){if(a==null||typeof a=="boolean"||typeof a=="number"||typeof a=="string"||a instanceof Boolean||a instanceof Number||a instanceof String||a instanceof Date||a instanceof RegExp||a instanceof Blob||$u(a)||Xe(a)||ArrayBuffer.isView(a)||a instanceof ImageData)return a;if(Array.isArray(a))return a.map(tl);if(typeof a=="object"){const r=a.$name||"Object";if(!ea[r])throw new Error(`can't deserialize unregistered class ${r}`);const{klass:l}=ea[r];if(!l)throw new Error(`can't deserialize unregistered class ${r}`);if(l.deserialize)return l.deserialize(a);const d=Object.create(l.prototype);for(const m of Object.keys(a)){if(m==="$name")continue;const v=a[m];d[m]=ea[r].shallow.indexOf(m)>=0?v:tl(v)}return d}throw new Error("can't deserialize object of type "+typeof a)}class qm{constructor(){this.first=!0}update(r,l){const d=Math.floor(r);return this.first?(this.first=!1,this.lastIntegerZoom=d,this.lastIntegerZoomTime=0,this.lastZoom=r,this.lastFloorZoom=d,!0):(this.lastFloorZoom>d?(this.lastIntegerZoom=d+1,this.lastIntegerZoomTime=l):this.lastFloorZoom<d&&(this.lastIntegerZoom=d,this.lastIntegerZoomTime=l),r!==this.lastZoom&&(this.lastZoom=r,this.lastFloorZoom=d,!0))}}const lt={"Latin-1 Supplement":a=>a>=128&&a<=255,Arabic:a=>a>=1536&&a<=1791,"Arabic Supplement":a=>a>=1872&&a<=1919,"Arabic Extended-A":a=>a>=2208&&a<=2303,"Hangul Jamo":a=>a>=4352&&a<=4607,"Unified Canadian Aboriginal Syllabics":a=>a>=5120&&a<=5759,Khmer:a=>a>=6016&&a<=6143,"Unified Canadian Aboriginal Syllabics Extended":a=>a>=6320&&a<=6399,"General Punctuation":a=>a>=8192&&a<=8303,"Letterlike Symbols":a=>a>=8448&&a<=8527,"Number Forms":a=>a>=8528&&a<=8591,"Miscellaneous Technical":a=>a>=8960&&a<=9215,"Control Pictures":a=>a>=9216&&a<=9279,"Optical Character Recognition":a=>a>=9280&&a<=9311,"Enclosed Alphanumerics":a=>a>=9312&&a<=9471,"Geometric Shapes":a=>a>=9632&&a<=9727,"Miscellaneous Symbols":a=>a>=9728&&a<=9983,"Miscellaneous Symbols and Arrows":a=>a>=11008&&a<=11263,"CJK Radicals Supplement":a=>a>=11904&&a<=12031,"Kangxi Radicals":a=>a>=12032&&a<=12255,"Ideographic Description Characters":a=>a>=12272&&a<=12287,"CJK Symbols and Punctuation":a=>a>=12288&&a<=12351,Hiragana:a=>a>=12352&&a<=12447,Katakana:a=>a>=12448&&a<=12543,Bopomofo:a=>a>=12544&&a<=12591,"Hangul Compatibility Jamo":a=>a>=12592&&a<=12687,Kanbun:a=>a>=12688&&a<=12703,"Bopomofo Extended":a=>a>=12704&&a<=12735,"CJK Strokes":a=>a>=12736&&a<=12783,"Katakana Phonetic Extensions":a=>a>=12784&&a<=12799,"Enclosed CJK Letters and Months":a=>a>=12800&&a<=13055,"CJK Compatibility":a=>a>=13056&&a<=13311,"CJK Unified Ideographs Extension A":a=>a>=13312&&a<=19903,"Yijing Hexagram Symbols":a=>a>=19904&&a<=19967,"CJK Unified Ideographs":a=>a>=19968&&a<=40959,"Yi Syllables":a=>a>=40960&&a<=42127,"Yi Radicals":a=>a>=42128&&a<=42191,"Hangul Jamo Extended-A":a=>a>=43360&&a<=43391,"Hangul Syllables":a=>a>=44032&&a<=55215,"Hangul Jamo Extended-B":a=>a>=55216&&a<=55295,"Private Use Area":a=>a>=57344&&a<=63743,"CJK Compatibility Ideographs":a=>a>=63744&&a<=64255,"Arabic Presentation Forms-A":a=>a>=64336&&a<=65023,"Vertical Forms":a=>a>=65040&&a<=65055,"CJK Compatibility Forms":a=>a>=65072&&a<=65103,"Small Form Variants":a=>a>=65104&&a<=65135,"Arabic Presentation Forms-B":a=>a>=65136&&a<=65279,"Halfwidth and Fullwidth Forms":a=>a>=65280&&a<=65519};function qd(a){for(const r of a)if(Zd(r.charCodeAt(0)))return!0;return!1}function Gd(a){for(const r of a)if(!jx(r.charCodeAt(0)))return!1;return!0}function jx(a){return!(lt.Arabic(a)||lt["Arabic Supplement"](a)||lt["Arabic Extended-A"](a)||lt["Arabic Presentation Forms-A"](a)||lt["Arabic Presentation Forms-B"](a))}function Zd(a){return!(a!==746&&a!==747&&(a<4352||!(lt["Bopomofo Extended"](a)||lt.Bopomofo(a)||lt["CJK Compatibility Forms"](a)&&!(a>=65097&&a<=65103)||lt["CJK Compatibility Ideographs"](a)||lt["CJK Compatibility"](a)||lt["CJK Radicals Supplement"](a)||lt["CJK Strokes"](a)||!(!lt["CJK Symbols and Punctuation"](a)||a>=12296&&a<=12305||a>=12308&&a<=12319||a===12336)||lt["CJK Unified Ideographs Extension A"](a)||lt["CJK Unified Ideographs"](a)||lt["Enclosed CJK Letters and Months"](a)||lt["Hangul Compatibility Jamo"](a)||lt["Hangul Jamo Extended-A"](a)||lt["Hangul Jamo Extended-B"](a)||lt["Hangul Jamo"](a)||lt["Hangul Syllables"](a)||lt.Hiragana(a)||lt["Ideographic Description Characters"](a)||lt.Kanbun(a)||lt["Kangxi Radicals"](a)||lt["Katakana Phonetic Extensions"](a)||lt.Katakana(a)&&a!==12540||!(!lt["Halfwidth and Fullwidth Forms"](a)||a===65288||a===65289||a===65293||a>=65306&&a<=65310||a===65339||a===65341||a===65343||a>=65371&&a<=65503||a===65507||a>=65512&&a<=65519)||!(!lt["Small Form Variants"](a)||a>=65112&&a<=65118||a>=65123&&a<=65126)||lt["Unified Canadian Aboriginal Syllabics"](a)||lt["Unified Canadian Aboriginal Syllabics Extended"](a)||lt["Vertical Forms"](a)||lt["Yijing Hexagram Symbols"](a)||lt["Yi Syllables"](a)||lt["Yi Radicals"](a))))}function Gm(a){return!(Zd(a)||function(r){return!!(lt["Latin-1 Supplement"](r)&&(r===167||r===169||r===174||r===177||r===188||r===189||r===190||r===215||r===247)||lt["General Punctuation"](r)&&(r===8214||r===8224||r===8225||r===8240||r===8241||r===8251||r===8252||r===8258||r===8263||r===8264||r===8265||r===8273)||lt["Letterlike Symbols"](r)||lt["Number Forms"](r)||lt["Miscellaneous Technical"](r)&&(r>=8960&&r<=8967||r>=8972&&r<=8991||r>=8996&&r<=9e3||r===9003||r>=9085&&r<=9114||r>=9150&&r<=9165||r===9167||r>=9169&&r<=9179||r>=9186&&r<=9215)||lt["Control Pictures"](r)&&r!==9251||lt["Optical Character Recognition"](r)||lt["Enclosed Alphanumerics"](r)||lt["Geometric Shapes"](r)||lt["Miscellaneous Symbols"](r)&&!(r>=9754&&r<=9759)||lt["Miscellaneous Symbols and Arrows"](r)&&(r>=11026&&r<=11055||r>=11088&&r<=11097||r>=11192&&r<=11243)||lt["CJK Symbols and Punctuation"](r)||lt.Katakana(r)||lt["Private Use Area"](r)||lt["CJK Compatibility Forms"](r)||lt["Small Form Variants"](r)||lt["Halfwidth and Fullwidth Forms"](r)||r===8734||r===8756||r===8757||r>=9984&&r<=10087||r>=10102&&r<=10131||r===65532||r===65533)}(a))}function Zm(a){return a>=1424&&a<=2303||lt["Arabic Presentation Forms-A"](a)||lt["Arabic Presentation Forms-B"](a)}function Wm(a,r){return!(!r&&Zm(a)||a>=2304&&a<=3583||a>=3840&&a<=4255||lt.Khmer(a))}function $x(a){for(const r of a)if(Zm(r.charCodeAt(0)))return!0;return!1}const Wd="deferred",Hd="loading",Kd="loaded";let Xd=null,ri="unavailable",Ia=null;const _c=function(a){a&&typeof a=="string"&&a.indexOf("NetworkError")>-1&&(ri="error"),Xd&&Xd(a)};function Qd(){wc.fire(new Ws("pluginStateChange",{pluginStatus:ri,pluginURL:Ia}))}const wc=new Me,Yd=function(){return ri},Hm=function(){if(ri!==Wd||!Ia)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");ri=Hd,Qd(),Ia&&ba({url:Ia},a=>{a?_c(a):(ri=Kd,Qd())})},Ti={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>ri===Kd||Ti.applyArabicShaping!=null,isLoading:()=>ri===Hd,setState(a){if(!Ue())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");ri=a.pluginStatus,Ia=a.pluginURL},isParsed(){if(!Ue())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return Ti.applyArabicShaping!=null&&Ti.processBidirectionalText!=null&&Ti.processStyledBidirectionalText!=null},getPluginURL(){if(!Ue())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return Ia}};class vn{constructor(r,l){this.zoom=r,l?(this.now=l.now,this.fadeDuration=l.fadeDuration,this.zoomHistory=l.zoomHistory,this.transition=l.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new qm,this.transition={})}isSupportedScript(r){return function(l,d){for(const m of l)if(!Wm(m.charCodeAt(0),d))return!1;return!0}(r,Ti.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const r=this.zoom,l=r-Math.floor(r),d=this.crossFadingFactor();return r>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:l+(1-l)*d}:{fromScale:.5,toScale:1,t:1-(1-d)*l}}}class Uu{constructor(r,l){this.property=r,this.value=l,this.expression=function(d,m){if(kn(d))return new dc(d,m);if(Du(d)){const v=Vd(d,m);if(v.result==="error")throw new Error(v.value.map(_=>`${_.key}: ${_.message}`).join(", "));return v.value}{let v=d;return m.type==="color"&&typeof d=="string"?v=un.parse(d):m.type!=="padding"||typeof d!="number"&&!Array.isArray(d)?m.type==="variableAnchorOffsetCollection"&&Array.isArray(d)&&(v=Ui.parse(d)):v=_i.parse(d),{kind:"constant",evaluate:()=>v}}}(l===void 0?r.specification.default:l,r.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(r,l,d){return this.property.possiblyEvaluate(this,r,l,d)}}class Jd{constructor(r){this.property=r,this.value=new Uu(r,void 0)}transitioned(r,l){return new Xm(this.property,this.value,l,Te({},r.transition,this.transition),r.now)}untransitioned(){return new Xm(this.property,this.value,null,{},0)}}class Km{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitionablePropertyValues)}getValue(r){return je(this._values[r].value.value)}setValue(r,l){Object.prototype.hasOwnProperty.call(this._values,r)||(this._values[r]=new Jd(this._values[r].property)),this._values[r].value=new Uu(this._values[r].property,l===null?void 0:je(l))}getTransition(r){return je(this._values[r].transition)}setTransition(r,l){Object.prototype.hasOwnProperty.call(this._values,r)||(this._values[r]=new Jd(this._values[r].property)),this._values[r].transition=je(l)||void 0}serialize(){const r={};for(const l of Object.keys(this._values)){const d=this.getValue(l);d!==void 0&&(r[l]=d);const m=this.getTransition(l);m!==void 0&&(r[`${l}-transition`]=m)}return r}transitioned(r,l){const d=new Qm(this._properties);for(const m of Object.keys(this._values))d._values[m]=this._values[m].transitioned(r,l._values[m]);return d}untransitioned(){const r=new Qm(this._properties);for(const l of Object.keys(this._values))r._values[l]=this._values[l].untransitioned();return r}}class Xm{constructor(r,l,d,m,v){this.property=r,this.value=l,this.begin=v+m.delay||0,this.end=this.begin+m.duration||0,r.specification.transition&&(m.delay||m.duration)&&(this.prior=d)}possiblyEvaluate(r,l,d){const m=r.now||0,v=this.value.possiblyEvaluate(r,l,d),_=this.prior;if(_){if(m>this.end)return this.prior=null,v;if(this.value.isDataDriven())return this.prior=null,v;if(m<this.begin)return _.possiblyEvaluate(r,l,d);{const S=(m-this.begin)/(this.end-this.begin);return this.property.interpolate(_.possiblyEvaluate(r,l,d),v,function(P){if(P<=0)return 0;if(P>=1)return 1;const I=P*P,D=I*P;return 4*(P<.5?D:3*(P-I)+D-.75)}(S))}}return v}}class Qm{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitioningPropertyValues)}possiblyEvaluate(r,l,d){const m=new qu(this._properties);for(const v of Object.keys(this._values))m._values[v]=this._values[v].possiblyEvaluate(r,l,d);return m}hasTransition(){for(const r of Object.keys(this._values))if(this._values[r].prior)return!0;return!1}}class Ux{constructor(r){this._properties=r,this._values=Object.create(r.defaultPropertyValues)}hasValue(r){return this._values[r].value!==void 0}getValue(r){return je(this._values[r].value)}setValue(r,l){this._values[r]=new Uu(this._values[r].property,l===null?void 0:je(l))}serialize(){const r={};for(const l of Object.keys(this._values)){const d=this.getValue(l);d!==void 0&&(r[l]=d)}return r}possiblyEvaluate(r,l,d){const m=new qu(this._properties);for(const v of Object.keys(this._values))m._values[v]=this._values[v].possiblyEvaluate(r,l,d);return m}}class Vr{constructor(r,l,d){this.property=r,this.value=l,this.parameters=d}isConstant(){return this.value.kind==="constant"}constantOr(r){return this.value.kind==="constant"?this.value.value:r}evaluate(r,l,d,m){return this.property.evaluate(this.value,this.parameters,r,l,d,m)}}class qu{constructor(r){this._properties=r,this._values=Object.create(r.defaultPossiblyEvaluatedValues)}get(r){return this._values[r]}}class St{constructor(r){this.specification=r}possiblyEvaluate(r,l){if(r.isDataDriven())throw new Error("Value should not be data driven");return r.expression.evaluate(l)}interpolate(r,l,d){const m=wi[this.specification.type];return m?m(r,l,d):r}}class Mt{constructor(r,l){this.specification=r,this.overrides=l}possiblyEvaluate(r,l,d,m){return new Vr(this,r.expression.kind==="constant"||r.expression.kind==="camera"?{kind:"constant",value:r.expression.evaluate(l,null,{},d,m)}:r.expression,l)}interpolate(r,l,d){if(r.value.kind!=="constant"||l.value.kind!=="constant")return r;if(r.value.value===void 0||l.value.value===void 0)return new Vr(this,{kind:"constant",value:void 0},r.parameters);const m=wi[this.specification.type];if(m){const v=m(r.value.value,l.value.value,d);return new Vr(this,{kind:"constant",value:v},r.parameters)}return r}evaluate(r,l,d,m,v,_){return r.kind==="constant"?r.value:r.evaluate(l,d,m,v,_)}}class bc extends Mt{possiblyEvaluate(r,l,d,m){if(r.value===void 0)return new Vr(this,{kind:"constant",value:void 0},l);if(r.expression.kind==="constant"){const v=r.expression.evaluate(l,null,{},d,m),_=r.property.specification.type==="resolvedImage"&&typeof v!="string"?v.name:v,S=this._calculate(_,_,_,l);return new Vr(this,{kind:"constant",value:S},l)}if(r.expression.kind==="camera"){const v=this._calculate(r.expression.evaluate({zoom:l.zoom-1}),r.expression.evaluate({zoom:l.zoom}),r.expression.evaluate({zoom:l.zoom+1}),l);return new Vr(this,{kind:"constant",value:v},l)}return new Vr(this,r.expression,l)}evaluate(r,l,d,m,v,_){if(r.kind==="source"){const S=r.evaluate(l,d,m,v,_);return this._calculate(S,S,S,l)}return r.kind==="composite"?this._calculate(r.evaluate({zoom:Math.floor(l.zoom)-1},d,m),r.evaluate({zoom:Math.floor(l.zoom)},d,m),r.evaluate({zoom:Math.floor(l.zoom)+1},d,m),l):r.value}_calculate(r,l,d,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:r,to:l}:{from:d,to:l}}interpolate(r){return r}}class ef{constructor(r){this.specification=r}possiblyEvaluate(r,l,d,m){if(r.value!==void 0){if(r.expression.kind==="constant"){const v=r.expression.evaluate(l,null,{},d,m);return this._calculate(v,v,v,l)}return this._calculate(r.expression.evaluate(new vn(Math.floor(l.zoom-1),l)),r.expression.evaluate(new vn(Math.floor(l.zoom),l)),r.expression.evaluate(new vn(Math.floor(l.zoom+1),l)),l)}}_calculate(r,l,d,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:r,to:l}:{from:d,to:l}}interpolate(r){return r}}class tf{constructor(r){this.specification=r}possiblyEvaluate(r,l,d,m){return!!r.expression.evaluate(l,null,{},d,m)}interpolate(){return!1}}class Zn{constructor(r){this.properties=r,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const l in r){const d=r[l];d.specification.overridable&&this.overridableProperties.push(l);const m=this.defaultPropertyValues[l]=new Uu(d,void 0),v=this.defaultTransitionablePropertyValues[l]=new Jd(d);this.defaultTransitioningPropertyValues[l]=v.untransitioned(),this.defaultPossiblyEvaluatedValues[l]=m.possiblyEvaluate({})}}}dt("DataDrivenProperty",Mt),dt("DataConstantProperty",St),dt("CrossFadedDataDrivenProperty",bc),dt("CrossFadedProperty",ef),dt("ColorRampProperty",tf);const nf="-transition";class Wi extends Me{constructor(r,l){if(super(),this.id=r.id,this.type=r.type,this._featureFilter={filter:()=>!0,needGeometry:!1},r.type!=="custom"&&(this.metadata=r.metadata,this.minzoom=r.minzoom,this.maxzoom=r.maxzoom,r.type!=="background"&&(this.source=r.source,this.sourceLayer=r["source-layer"],this.filter=r.filter),l.layout&&(this._unevaluatedLayout=new Ux(l.layout)),l.paint)){this._transitionablePaint=new Km(l.paint);for(const d in r.paint)this.setPaintProperty(d,r.paint[d],{validate:!1});for(const d in r.layout)this.setLayoutProperty(d,r.layout[d],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new qu(l.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(r){return r==="visibility"?this.visibility:this._unevaluatedLayout.getValue(r)}setLayoutProperty(r,l,d={}){l!=null&&this._validate(Um,`layers.${this.id}.layout.${r}`,r,l,d)||(r!=="visibility"?this._unevaluatedLayout.setValue(r,l):this.visibility=l)}getPaintProperty(r){return r.endsWith(nf)?this._transitionablePaint.getTransition(r.slice(0,-11)):this._transitionablePaint.getValue(r)}setPaintProperty(r,l,d={}){if(l!=null&&this._validate(Ud,`layers.${this.id}.paint.${r}`,r,l,d))return!1;if(r.endsWith(nf))return this._transitionablePaint.setTransition(r.slice(0,-11),l||void 0),!1;{const m=this._transitionablePaint._values[r],v=m.property.specification["property-type"]==="cross-faded-data-driven",_=m.value.isDataDriven(),S=m.value;this._transitionablePaint.setValue(r,l),this._handleSpecialPaintPropertyUpdate(r);const P=this._transitionablePaint._values[r].value;return P.isDataDriven()||_||v||this._handleOverridablePaintPropertyUpdate(r,S,P)}}_handleSpecialPaintPropertyUpdate(r){}_handleOverridablePaintPropertyUpdate(r,l,d){return!1}isHidden(r){return!!(this.minzoom&&r<this.minzoom)||!!(this.maxzoom&&r>=this.maxzoom)||this.visibility==="none"}updateTransitions(r){this._transitioningPaint=this._transitionablePaint.transitioned(r,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(r,l){r.getCrossfadeParameters&&(this._crossfadeParameters=r.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(r,void 0,l)),this.paint=this._transitioningPaint.possiblyEvaluate(r,void 0,l)}serialize(){const r={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(r.layout=r.layout||{},r.layout.visibility=this.visibility),ft(r,(l,d)=>!(l===void 0||d==="layout"&&!Object.keys(l).length||d==="paint"&&!Object.keys(l).length))}_validate(r,l,d,m,v={}){return(!v||v.validate!==!1)&&ju(this,r.call(Js,{key:l,layerType:this.type,objectKey:d,value:m,styleSpec:ce,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const r in this.paint._values){const l=this.paint.get(r);if(l instanceof Vr&&Qo(l.property.specification)&&(l.value.kind==="source"||l.value.kind==="composite")&&l.value.isStateDependent)return!0}return!1}}const Ym={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class ro{constructor(r,l){this._structArray=r,this._pos1=l*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class On{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(r,l){return r._trim(),l&&(r.isTransferred=!0,l.push(r.arrayBuffer)),{length:r.length,arrayBuffer:r.arrayBuffer}}static deserialize(r){const l=Object.create(this.prototype);return l.arrayBuffer=r.arrayBuffer,l.length=r.length,l.capacity=r.arrayBuffer.byteLength/l.bytesPerElement,l._refreshViews(),l}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(r){this.reserve(r),this.length=r}reserve(r){if(r>this.capacity){this.capacity=Math.max(r,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const l=this.uint8;this._refreshViews(),l&&this.uint8.set(l)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Mn(a,r=1){let l=0,d=0;return{members:a.map(m=>{const v=Ym[m.type].BYTES_PER_ELEMENT,_=l=nl(l,Math.max(r,v)),S=m.components||1;return d=Math.max(d,v),l+=v*S,{name:m.name,type:m.type,components:S,offset:_}}),size:nl(l,Math.max(d,r)),alignment:r}}function nl(a,r){return Math.ceil(a/r)*r}class Sc extends On{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,l){const d=this.length;return this.resize(d+1),this.emplace(d,r,l)}emplace(r,l,d){const m=2*r;return this.int16[m+0]=l,this.int16[m+1]=d,r}}Sc.prototype.bytesPerElement=4,dt("StructArrayLayout2i4",Sc);class Tc extends On{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,l,d){const m=this.length;return this.resize(m+1),this.emplace(m,r,l,d)}emplace(r,l,d,m){const v=3*r;return this.int16[v+0]=l,this.int16[v+1]=d,this.int16[v+2]=m,r}}Tc.prototype.bytesPerElement=6,dt("StructArrayLayout3i6",Tc);class io extends On{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,l,d,m){const v=this.length;return this.resize(v+1),this.emplace(v,r,l,d,m)}emplace(r,l,d,m,v){const _=4*r;return this.int16[_+0]=l,this.int16[_+1]=d,this.int16[_+2]=m,this.int16[_+3]=v,r}}io.prototype.bytesPerElement=8,dt("StructArrayLayout4i8",io);class rf extends On{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,l,d,m,v,_){const S=this.length;return this.resize(S+1),this.emplace(S,r,l,d,m,v,_)}emplace(r,l,d,m,v,_,S){const P=6*r;return this.int16[P+0]=l,this.int16[P+1]=d,this.int16[P+2]=m,this.int16[P+3]=v,this.int16[P+4]=_,this.int16[P+5]=S,r}}rf.prototype.bytesPerElement=12,dt("StructArrayLayout2i4i12",rf);class sf extends On{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,l,d,m,v,_){const S=this.length;return this.resize(S+1),this.emplace(S,r,l,d,m,v,_)}emplace(r,l,d,m,v,_,S){const P=4*r,I=8*r;return this.int16[P+0]=l,this.int16[P+1]=d,this.uint8[I+4]=m,this.uint8[I+5]=v,this.uint8[I+6]=_,this.uint8[I+7]=S,r}}sf.prototype.bytesPerElement=8,dt("StructArrayLayout2i4ub8",sf);class rl extends On{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,l){const d=this.length;return this.resize(d+1),this.emplace(d,r,l)}emplace(r,l,d){const m=2*r;return this.float32[m+0]=l,this.float32[m+1]=d,r}}rl.prototype.bytesPerElement=8,dt("StructArrayLayout2f8",rl);class af extends On{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,l,d,m,v,_,S,P,I,D){const O=this.length;return this.resize(O+1),this.emplace(O,r,l,d,m,v,_,S,P,I,D)}emplace(r,l,d,m,v,_,S,P,I,D,O){const U=10*r;return this.uint16[U+0]=l,this.uint16[U+1]=d,this.uint16[U+2]=m,this.uint16[U+3]=v,this.uint16[U+4]=_,this.uint16[U+5]=S,this.uint16[U+6]=P,this.uint16[U+7]=I,this.uint16[U+8]=D,this.uint16[U+9]=O,r}}af.prototype.bytesPerElement=20,dt("StructArrayLayout10ui20",af);class of extends On{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,l,d,m,v,_,S,P,I,D,O,U){const H=this.length;return this.resize(H+1),this.emplace(H,r,l,d,m,v,_,S,P,I,D,O,U)}emplace(r,l,d,m,v,_,S,P,I,D,O,U,H){const X=12*r;return this.int16[X+0]=l,this.int16[X+1]=d,this.int16[X+2]=m,this.int16[X+3]=v,this.uint16[X+4]=_,this.uint16[X+5]=S,this.uint16[X+6]=P,this.uint16[X+7]=I,this.int16[X+8]=D,this.int16[X+9]=O,this.int16[X+10]=U,this.int16[X+11]=H,r}}of.prototype.bytesPerElement=24,dt("StructArrayLayout4i4ui4i24",of);class sn extends On{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,l,d){const m=this.length;return this.resize(m+1),this.emplace(m,r,l,d)}emplace(r,l,d,m){const v=3*r;return this.float32[v+0]=l,this.float32[v+1]=d,this.float32[v+2]=m,r}}sn.prototype.bytesPerElement=12,dt("StructArrayLayout3f12",sn);class y extends On{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(r){const l=this.length;return this.resize(l+1),this.emplace(l,r)}emplace(r,l){return this.uint32[1*r+0]=l,r}}y.prototype.bytesPerElement=4,dt("StructArrayLayout1ul4",y);class i extends On{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,l,d,m,v,_,S,P,I){const D=this.length;return this.resize(D+1),this.emplace(D,r,l,d,m,v,_,S,P,I)}emplace(r,l,d,m,v,_,S,P,I,D){const O=10*r,U=5*r;return this.int16[O+0]=l,this.int16[O+1]=d,this.int16[O+2]=m,this.int16[O+3]=v,this.int16[O+4]=_,this.int16[O+5]=S,this.uint32[U+3]=P,this.uint16[O+8]=I,this.uint16[O+9]=D,r}}i.prototype.bytesPerElement=20,dt("StructArrayLayout6i1ul2ui20",i);class u extends On{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,l,d,m,v,_){const S=this.length;return this.resize(S+1),this.emplace(S,r,l,d,m,v,_)}emplace(r,l,d,m,v,_,S){const P=6*r;return this.int16[P+0]=l,this.int16[P+1]=d,this.int16[P+2]=m,this.int16[P+3]=v,this.int16[P+4]=_,this.int16[P+5]=S,r}}u.prototype.bytesPerElement=12,dt("StructArrayLayout2i2i2i12",u);class p extends On{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,l,d,m,v){const _=this.length;return this.resize(_+1),this.emplace(_,r,l,d,m,v)}emplace(r,l,d,m,v,_){const S=4*r,P=8*r;return this.float32[S+0]=l,this.float32[S+1]=d,this.float32[S+2]=m,this.int16[P+6]=v,this.int16[P+7]=_,r}}p.prototype.bytesPerElement=16,dt("StructArrayLayout2f1f2i16",p);class g extends On{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,l,d,m){const v=this.length;return this.resize(v+1),this.emplace(v,r,l,d,m)}emplace(r,l,d,m,v){const _=12*r,S=3*r;return this.uint8[_+0]=l,this.uint8[_+1]=d,this.float32[S+1]=m,this.float32[S+2]=v,r}}g.prototype.bytesPerElement=12,dt("StructArrayLayout2ub2f12",g);class x extends On{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,l,d){const m=this.length;return this.resize(m+1),this.emplace(m,r,l,d)}emplace(r,l,d,m){const v=3*r;return this.uint16[v+0]=l,this.uint16[v+1]=d,this.uint16[v+2]=m,r}}x.prototype.bytesPerElement=6,dt("StructArrayLayout3ui6",x);class T extends On{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,l,d,m,v,_,S,P,I,D,O,U,H,X,te,oe,he){const we=this.length;return this.resize(we+1),this.emplace(we,r,l,d,m,v,_,S,P,I,D,O,U,H,X,te,oe,he)}emplace(r,l,d,m,v,_,S,P,I,D,O,U,H,X,te,oe,he,we){const pe=24*r,Se=12*r,Pe=48*r;return this.int16[pe+0]=l,this.int16[pe+1]=d,this.uint16[pe+2]=m,this.uint16[pe+3]=v,this.uint32[Se+2]=_,this.uint32[Se+3]=S,this.uint32[Se+4]=P,this.uint16[pe+10]=I,this.uint16[pe+11]=D,this.uint16[pe+12]=O,this.float32[Se+7]=U,this.float32[Se+8]=H,this.uint8[Pe+36]=X,this.uint8[Pe+37]=te,this.uint8[Pe+38]=oe,this.uint32[Se+10]=he,this.int16[pe+22]=we,r}}T.prototype.bytesPerElement=48,dt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",T);class E extends On{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,l,d,m,v,_,S,P,I,D,O,U,H,X,te,oe,he,we,pe,Se,Pe,Fe,ct,vt,ot,it,Qe,pt){const Je=this.length;return this.resize(Je+1),this.emplace(Je,r,l,d,m,v,_,S,P,I,D,O,U,H,X,te,oe,he,we,pe,Se,Pe,Fe,ct,vt,ot,it,Qe,pt)}emplace(r,l,d,m,v,_,S,P,I,D,O,U,H,X,te,oe,he,we,pe,Se,Pe,Fe,ct,vt,ot,it,Qe,pt,Je){const We=32*r,Pt=16*r;return this.int16[We+0]=l,this.int16[We+1]=d,this.int16[We+2]=m,this.int16[We+3]=v,this.int16[We+4]=_,this.int16[We+5]=S,this.int16[We+6]=P,this.int16[We+7]=I,this.uint16[We+8]=D,this.uint16[We+9]=O,this.uint16[We+10]=U,this.uint16[We+11]=H,this.uint16[We+12]=X,this.uint16[We+13]=te,this.uint16[We+14]=oe,this.uint16[We+15]=he,this.uint16[We+16]=we,this.uint16[We+17]=pe,this.uint16[We+18]=Se,this.uint16[We+19]=Pe,this.uint16[We+20]=Fe,this.uint16[We+21]=ct,this.uint16[We+22]=vt,this.uint32[Pt+12]=ot,this.float32[Pt+13]=it,this.float32[Pt+14]=Qe,this.uint16[We+30]=pt,this.uint16[We+31]=Je,r}}E.prototype.bytesPerElement=64,dt("StructArrayLayout8i15ui1ul2f2ui64",E);class k extends On{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r){const l=this.length;return this.resize(l+1),this.emplace(l,r)}emplace(r,l){return this.float32[1*r+0]=l,r}}k.prototype.bytesPerElement=4,dt("StructArrayLayout1f4",k);class R extends On{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,l,d){const m=this.length;return this.resize(m+1),this.emplace(m,r,l,d)}emplace(r,l,d,m){const v=3*r;return this.uint16[6*r+0]=l,this.float32[v+1]=d,this.float32[v+2]=m,r}}R.prototype.bytesPerElement=12,dt("StructArrayLayout1ui2f12",R);class L extends On{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,l,d){const m=this.length;return this.resize(m+1),this.emplace(m,r,l,d)}emplace(r,l,d,m){const v=4*r;return this.uint32[2*r+0]=l,this.uint16[v+2]=d,this.uint16[v+3]=m,r}}L.prototype.bytesPerElement=8,dt("StructArrayLayout1ul2ui8",L);class z extends On{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,l){const d=this.length;return this.resize(d+1),this.emplace(d,r,l)}emplace(r,l,d){const m=2*r;return this.uint16[m+0]=l,this.uint16[m+1]=d,r}}z.prototype.bytesPerElement=4,dt("StructArrayLayout2ui4",z);class G extends On{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r){const l=this.length;return this.resize(l+1),this.emplace(l,r)}emplace(r,l){return this.uint16[1*r+0]=l,r}}G.prototype.bytesPerElement=2,dt("StructArrayLayout1ui2",G);class re extends On{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,l,d,m){const v=this.length;return this.resize(v+1),this.emplace(v,r,l,d,m)}emplace(r,l,d,m,v){const _=4*r;return this.float32[_+0]=l,this.float32[_+1]=d,this.float32[_+2]=m,this.float32[_+3]=v,r}}re.prototype.bytesPerElement=16,dt("StructArrayLayout4f16",re);class ne extends ro{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new M(this.anchorPointX,this.anchorPointY)}}ne.prototype.size=20;class se extends i{get(r){return new ne(this,r)}}dt("CollisionBoxArray",se);class ee extends ro{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(r){this._structArray.uint8[this._pos1+37]=r}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(r){this._structArray.uint8[this._pos1+38]=r}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(r){this._structArray.uint32[this._pos4+10]=r}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}ee.prototype.size=48;class ve extends T{get(r){return new ee(this,r)}}dt("PlacedSymbolArray",ve);class Ce extends ro{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(r){this._structArray.uint32[this._pos4+12]=r}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}Ce.prototype.size=64;class ue extends E{get(r){return new Ce(this,r)}}dt("SymbolInstanceArray",ue);class xe extends k{getoffsetX(r){return this.float32[1*r+0]}}dt("GlyphOffsetArray",xe);class Ae extends Tc{getx(r){return this.int16[3*r+0]}gety(r){return this.int16[3*r+1]}gettileUnitDistanceFromAnchor(r){return this.int16[3*r+2]}}dt("SymbolLineVertexArray",Ae);class Ie extends ro{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Ie.prototype.size=12;class Oe extends R{get(r){return new Ie(this,r)}}dt("TextAnchorOffsetArray",Oe);class Ze extends ro{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Ze.prototype.size=8;class $e extends L{get(r){return new Ze(this,r)}}dt("FeatureIndexArray",$e);class He extends Sc{}class yt extends Sc{}class Zt extends Sc{}class rt extends rf{}class Rt extends sf{}class xt extends rl{}class hn extends af{}class qt extends of{}class Vt extends sn{}class Wt extends y{}class jn extends u{}class mn extends g{}class wr extends x{}class sr extends z{}const Wn=Mn([{name:"a_pos",components:2,type:"Int16"}],4),{members:Ei}=Wn;class xn{constructor(r=[]){this.segments=r}prepareSegment(r,l,d,m){let v=this.segments[this.segments.length-1];return r>xn.MAX_VERTEX_ARRAY_LENGTH&&ut(`Max vertices per segment is ${xn.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${r}`),(!v||v.vertexLength+r>xn.MAX_VERTEX_ARRAY_LENGTH||v.sortKey!==m)&&(v={vertexOffset:l.length,primitiveOffset:d.length,vertexLength:0,primitiveLength:0},m!==void 0&&(v.sortKey=m),this.segments.push(v)),v}get(){return this.segments}destroy(){for(const r of this.segments)for(const l in r.vaos)r.vaos[l].destroy()}static simpleSegment(r,l,d,m){return new xn([{vertexOffset:r,primitiveOffset:l,vertexLength:d,primitiveLength:m,vaos:{},sortKey:0}])}}function Cs(a,r){return 256*(a=Ee(Math.floor(a),0,255))+Ee(Math.floor(r),0,255)}xn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,dt("SegmentVector",xn);const Ps=Mn([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Ma={exports:{}},so={exports:{}};so.exports=function(a,r){var l,d,m,v,_,S,P,I;for(d=a.length-(l=3&a.length),m=r,_=3432918353,S=461845907,I=0;I<d;)P=255&a.charCodeAt(I)|(255&a.charCodeAt(++I))<<8|(255&a.charCodeAt(++I))<<16|(255&a.charCodeAt(++I))<<24,++I,m=27492+(65535&(v=5*(65535&(m=(m^=P=(65535&(P=(P=(65535&P)*_+(((P>>>16)*_&65535)<<16)&4294967295)<<15|P>>>17))*S+(((P>>>16)*S&65535)<<16)&4294967295)<<13|m>>>19))+((5*(m>>>16)&65535)<<16)&4294967295))+((58964+(v>>>16)&65535)<<16);switch(P=0,l){case 3:P^=(255&a.charCodeAt(I+2))<<16;case 2:P^=(255&a.charCodeAt(I+1))<<8;case 1:m^=P=(65535&(P=(P=(65535&(P^=255&a.charCodeAt(I)))*_+(((P>>>16)*_&65535)<<16)&4294967295)<<15|P>>>17))*S+(((P>>>16)*S&65535)<<16)&4294967295}return m^=a.length,m=2246822507*(65535&(m^=m>>>16))+((2246822507*(m>>>16)&65535)<<16)&4294967295,m=3266489909*(65535&(m^=m>>>13))+((3266489909*(m>>>16)&65535)<<16)&4294967295,(m^=m>>>16)>>>0};var il=so.exports,Mr={exports:{}};Mr.exports=function(a,r){for(var l,d=a.length,m=r^d,v=0;d>=4;)l=1540483477*(65535&(l=255&a.charCodeAt(v)|(255&a.charCodeAt(++v))<<8|(255&a.charCodeAt(++v))<<16|(255&a.charCodeAt(++v))<<24))+((1540483477*(l>>>16)&65535)<<16),m=1540483477*(65535&m)+((1540483477*(m>>>16)&65535)<<16)^(l=1540483477*(65535&(l^=l>>>24))+((1540483477*(l>>>16)&65535)<<16)),d-=4,++v;switch(d){case 3:m^=(255&a.charCodeAt(v+2))<<16;case 2:m^=(255&a.charCodeAt(v+1))<<8;case 1:m=1540483477*(65535&(m^=255&a.charCodeAt(v)))+((1540483477*(m>>>16)&65535)<<16)}return m=1540483477*(65535&(m^=m>>>13))+((1540483477*(m>>>16)&65535)<<16),(m^=m>>>15)>>>0};var br=il,jr=Mr.exports;Ma.exports=br,Ma.exports.murmur3=br,Ma.exports.murmur2=jr;var ao=b(Ma.exports);class $n{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(r,l,d,m){this.ids.push(ar(r)),this.positions.push(l,d,m)}getPositions(r){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const l=ar(r);let d=0,m=this.ids.length-1;for(;d<m;){const _=d+m>>1;this.ids[_]>=l?m=_:d=_+1}const v=[];for(;this.ids[d]===l;)v.push({index:this.positions[3*d],start:this.positions[3*d+1],end:this.positions[3*d+2]}),d++;return v}static serialize(r,l){const d=new Float64Array(r.ids),m=new Uint32Array(r.positions);return ii(d,m,0,d.length-1),l&&l.push(d.buffer,m.buffer),{ids:d,positions:m}}static deserialize(r){const l=new $n;return l.ids=r.ids,l.positions=r.positions,l.indexed=!0,l}}function ar(a){const r=+a;return!isNaN(r)&&r<=Number.MAX_SAFE_INTEGER?r:ao(String(a))}function ii(a,r,l,d){for(;l<d;){const m=a[l+d>>1];let v=l-1,_=d+1;for(;;){do v++;while(a[v]<m);do _--;while(a[_]>m);if(v>=_)break;Un(a,v,_),Un(r,3*v,3*_),Un(r,3*v+1,3*_+1),Un(r,3*v+2,3*_+2)}_-l<d-_?(ii(a,r,l,_),l=_+1):(ii(a,r,_+1,d),d=_)}}function Un(a,r,l){const d=a[r];a[r]=a[l],a[l]=d}dt("FeaturePositionMap",$n);class oo{constructor(r,l){this.gl=r.gl,this.location=l}}class Gu extends oo{constructor(r,l){super(r,l),this.current=0}set(r){this.current!==r&&(this.current=r,this.gl.uniform1f(this.location,r))}}class Jm extends oo{constructor(r,l){super(r,l),this.current=[0,0,0,0]}set(r){r[0]===this.current[0]&&r[1]===this.current[1]&&r[2]===this.current[2]&&r[3]===this.current[3]||(this.current=r,this.gl.uniform4f(this.location,r[0],r[1],r[2],r[3]))}}class eg extends oo{constructor(r,l){super(r,l),this.current=un.transparent}set(r){r.r===this.current.r&&r.g===this.current.g&&r.b===this.current.b&&r.a===this.current.a||(this.current=r,this.gl.uniform4f(this.location,r.r,r.g,r.b,r.a))}}const qx=new Float32Array(16);function lf(a){return[Cs(255*a.r,255*a.g),Cs(255*a.b,255*a.a)]}class As{constructor(r,l,d){this.value=r,this.uniformNames=l.map(m=>`u_${m}`),this.type=d}setUniform(r,l,d){r.set(d.constantOr(this.value))}getBinding(r,l,d){return this.type==="color"?new eg(r,l):new Gu(r,l)}}class lo{constructor(r,l){this.uniformNames=l.map(d=>`u_${d}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(r,l){this.pixelRatioFrom=l.pixelRatio,this.pixelRatioTo=r.pixelRatio,this.patternFrom=l.tlbr,this.patternTo=r.tlbr}setUniform(r,l,d,m){const v=m==="u_pattern_to"?this.patternTo:m==="u_pattern_from"?this.patternFrom:m==="u_pixel_ratio_to"?this.pixelRatioTo:m==="u_pixel_ratio_from"?this.pixelRatioFrom:null;v&&r.set(v)}getBinding(r,l,d){return d.substr(0,9)==="u_pattern"?new Jm(r,l):new Gu(r,l)}}class ks{constructor(r,l,d,m){this.expression=r,this.type=d,this.maxValue=0,this.paintVertexAttributes=l.map(v=>({name:`a_${v}`,type:"Float32",components:d==="color"?2:1,offset:0})),this.paintVertexArray=new m}populatePaintArray(r,l,d,m,v){const _=this.paintVertexArray.length,S=this.expression.evaluate(new vn(0),l,{},m,[],v);this.paintVertexArray.resize(r),this._setPaintValue(_,r,S)}updatePaintArray(r,l,d,m){const v=this.expression.evaluate({zoom:0},d,m);this._setPaintValue(r,l,v)}_setPaintValue(r,l,d){if(this.type==="color"){const m=lf(d);for(let v=r;v<l;v++)this.paintVertexArray.emplace(v,m[0],m[1])}else{for(let m=r;m<l;m++)this.paintVertexArray.emplace(m,d);this.maxValue=Math.max(this.maxValue,Math.abs(d))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Hi{constructor(r,l,d,m,v,_){this.expression=r,this.uniformNames=l.map(S=>`u_${S}_t`),this.type=d,this.useIntegerZoom=m,this.zoom=v,this.maxValue=0,this.paintVertexAttributes=l.map(S=>({name:`a_${S}`,type:"Float32",components:d==="color"?4:2,offset:0})),this.paintVertexArray=new _}populatePaintArray(r,l,d,m,v){const _=this.expression.evaluate(new vn(this.zoom),l,{},m,[],v),S=this.expression.evaluate(new vn(this.zoom+1),l,{},m,[],v),P=this.paintVertexArray.length;this.paintVertexArray.resize(r),this._setPaintValue(P,r,_,S)}updatePaintArray(r,l,d,m){const v=this.expression.evaluate({zoom:this.zoom},d,m),_=this.expression.evaluate({zoom:this.zoom+1},d,m);this._setPaintValue(r,l,v,_)}_setPaintValue(r,l,d,m){if(this.type==="color"){const v=lf(d),_=lf(m);for(let S=r;S<l;S++)this.paintVertexArray.emplace(S,v[0],v[1],_[0],_[1])}else{for(let v=r;v<l;v++)this.paintVertexArray.emplace(v,d,m);this.maxValue=Math.max(this.maxValue,Math.abs(d),Math.abs(m))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(r,l){const d=this.useIntegerZoom?Math.floor(l.zoom):l.zoom,m=Ee(this.expression.interpolationFactor(d,this.zoom,this.zoom+1),0,1);r.set(m)}getBinding(r,l,d){return new Gu(r,l)}}class Is{constructor(r,l,d,m,v,_){this.expression=r,this.type=l,this.useIntegerZoom=d,this.zoom=m,this.layerId=_,this.zoomInPaintVertexArray=new v,this.zoomOutPaintVertexArray=new v}populatePaintArray(r,l,d){const m=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(r),this.zoomOutPaintVertexArray.resize(r),this._setPaintValues(m,r,l.patterns&&l.patterns[this.layerId],d)}updatePaintArray(r,l,d,m,v){this._setPaintValues(r,l,d.patterns&&d.patterns[this.layerId],v)}_setPaintValues(r,l,d,m){if(!m||!d)return;const{min:v,mid:_,max:S}=d,P=m[v],I=m[_],D=m[S];if(P&&I&&D)for(let O=r;O<l;O++)this.zoomInPaintVertexArray.emplace(O,I.tl[0],I.tl[1],I.br[0],I.br[1],P.tl[0],P.tl[1],P.br[0],P.br[1],I.pixelRatio,P.pixelRatio),this.zoomOutPaintVertexArray.emplace(O,I.tl[0],I.tl[1],I.br[0],I.br[1],D.tl[0],D.tl[1],D.br[0],D.br[1],I.pixelRatio,D.pixelRatio)}upload(r){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=r.createVertexBuffer(this.zoomInPaintVertexArray,Ps.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=r.createVertexBuffer(this.zoomOutPaintVertexArray,Ps.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class cf{constructor(r,l,d){this.binders={},this._buffers=[];const m=[];for(const v in r.paint._values){if(!d(v))continue;const _=r.paint.get(v);if(!(_ instanceof Vr&&Qo(_.property.specification)))continue;const S=Gz(v,r.type),P=_.value,I=_.property.specification.type,D=_.property.useIntegerZoom,O=_.property.specification["property-type"],U=O==="cross-faded"||O==="cross-faded-data-driven";if(P.kind==="constant")this.binders[v]=U?new lo(P.value,S):new As(P.value,S,I),m.push(`/u_${v}`);else if(P.kind==="source"||U){const H=u2(v,I,"source");this.binders[v]=U?new Is(P,I,D,l,H,r.id):new ks(P,S,I,H),m.push(`/a_${v}`)}else{const H=u2(v,I,"composite");this.binders[v]=new Hi(P,S,I,D,l,H),m.push(`/z_${v}`)}}this.cacheKey=m.sort().join("")}getMaxValue(r){const l=this.binders[r];return l instanceof ks||l instanceof Hi?l.maxValue:0}populatePaintArrays(r,l,d,m,v){for(const _ in this.binders){const S=this.binders[_];(S instanceof ks||S instanceof Hi||S instanceof Is)&&S.populatePaintArray(r,l,d,m,v)}}setConstantPatternPositions(r,l){for(const d in this.binders){const m=this.binders[d];m instanceof lo&&m.setConstantPatternPositions(r,l)}}updatePaintArrays(r,l,d,m,v){let _=!1;for(const S in r){const P=l.getPositions(S);for(const I of P){const D=d.feature(I.index);for(const O in this.binders){const U=this.binders[O];if((U instanceof ks||U instanceof Hi||U instanceof Is)&&U.expression.isStateDependent===!0){const H=m.paint.get(O);U.expression=H.value,U.updatePaintArray(I.start,I.end,D,r[S],v),_=!0}}}}return _}defines(){const r=[];for(const l in this.binders){const d=this.binders[l];(d instanceof As||d instanceof lo)&&r.push(...d.uniformNames.map(m=>`#define HAS_UNIFORM_${m}`))}return r}getBinderAttributes(){const r=[];for(const l in this.binders){const d=this.binders[l];if(d instanceof ks||d instanceof Hi)for(let m=0;m<d.paintVertexAttributes.length;m++)r.push(d.paintVertexAttributes[m].name);else if(d instanceof Is)for(let m=0;m<Ps.members.length;m++)r.push(Ps.members[m].name)}return r}getBinderUniforms(){const r=[];for(const l in this.binders){const d=this.binders[l];if(d instanceof As||d instanceof lo||d instanceof Hi)for(const m of d.uniformNames)r.push(m)}return r}getPaintVertexBuffers(){return this._buffers}getUniforms(r,l){const d=[];for(const m in this.binders){const v=this.binders[m];if(v instanceof As||v instanceof lo||v instanceof Hi){for(const _ of v.uniformNames)if(l[_]){const S=v.getBinding(r,l[_],_);d.push({name:_,property:m,binding:S})}}}return d}setUniforms(r,l,d,m){for(const{name:v,property:_,binding:S}of l)this.binders[_].setUniform(S,m,d.get(_),v)}updatePaintBuffers(r){this._buffers=[];for(const l in this.binders){const d=this.binders[l];if(r&&d instanceof Is){const m=r.fromScale===2?d.zoomInPaintVertexBuffer:d.zoomOutPaintVertexBuffer;m&&this._buffers.push(m)}else(d instanceof ks||d instanceof Hi)&&d.paintVertexBuffer&&this._buffers.push(d.paintVertexBuffer)}}upload(r){for(const l in this.binders){const d=this.binders[l];(d instanceof ks||d instanceof Hi||d instanceof Is)&&d.upload(r)}this.updatePaintBuffers()}destroy(){for(const r in this.binders){const l=this.binders[r];(l instanceof ks||l instanceof Hi||l instanceof Is)&&l.destroy()}}}class ta{constructor(r,l,d=()=>!0){this.programConfigurations={};for(const m of r)this.programConfigurations[m.id]=new cf(m,l,d);this.needsUpload=!1,this._featureMap=new $n,this._bufferOffset=0}populatePaintArrays(r,l,d,m,v,_){for(const S in this.programConfigurations)this.programConfigurations[S].populatePaintArrays(r,l,m,v,_);l.id!==void 0&&this._featureMap.add(l.id,d,this._bufferOffset,r),this._bufferOffset=r,this.needsUpload=!0}updatePaintArrays(r,l,d,m){for(const v of d)this.needsUpload=this.programConfigurations[v.id].updatePaintArrays(r,this._featureMap,l,v,m)||this.needsUpload}get(r){return this.programConfigurations[r]}upload(r){if(this.needsUpload){for(const l in this.programConfigurations)this.programConfigurations[l].upload(r);this.needsUpload=!1}}destroy(){for(const r in this.programConfigurations)this.programConfigurations[r].destroy()}}function Gz(a,r){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[a]||[a.replace(`${r}-`,"").replace(/-/g,"_")]}function u2(a,r,l){const d={color:{source:rl,composite:re},number:{source:k,composite:rl}},m=function(v){return{"line-pattern":{source:hn,composite:hn},"fill-pattern":{source:hn,composite:hn},"fill-extrusion-pattern":{source:hn,composite:hn}}[v]}(a);return m&&m[l]||d[r][l]}dt("ConstantBinder",As),dt("CrossFadedConstantBinder",lo),dt("SourceExpressionBinder",ks),dt("CrossFadedCompositeBinder",Is),dt("CompositeExpressionBinder",Hi),dt("ProgramConfiguration",cf,{omit:["_buffers"]}),dt("ProgramConfigurationSet",ta);const tr=8192,Gx=Math.pow(2,14)-1,h2=-Gx-1;function Ec(a){const r=tr/a.extent,l=a.loadGeometry();for(let d=0;d<l.length;d++){const m=l[d];for(let v=0;v<m.length;v++){const _=m[v],S=Math.round(_.x*r),P=Math.round(_.y*r);_.x=Ee(S,h2,Gx),_.y=Ee(P,h2,Gx),(S<_.x||S>_.x+1||P<_.y||P>_.y+1)&&ut("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return l}function Cc(a,r){return{type:a.type,id:a.id,properties:a.properties,geometry:r?Ec(a):[]}}function tg(a,r,l,d,m){a.emplaceBack(2*r+(d+1)/2,2*l+(m+1)/2)}class Zx{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(l=>l.id),this.index=r.index,this.hasPattern=!1,this.layoutVertexArray=new yt,this.indexArray=new wr,this.segments=new xn,this.programConfigurations=new ta(r.layers,r.zoom),this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(r,l,d){const m=this.layers[0],v=[];let _=null,S=!1;m.type==="circle"&&(_=m.layout.get("circle-sort-key"),S=!_.isConstant());for(const{feature:P,id:I,index:D,sourceLayerIndex:O}of r){const U=this.layers[0]._featureFilter.needGeometry,H=Cc(P,U);if(!this.layers[0]._featureFilter.filter(new vn(this.zoom),H,d))continue;const X=S?_.evaluate(H,{},d):void 0,te={id:I,properties:P.properties,type:P.type,sourceLayerIndex:O,index:D,geometry:U?H.geometry:Ec(P),patterns:{},sortKey:X};v.push(te)}S&&v.sort((P,I)=>P.sortKey-I.sortKey);for(const P of v){const{geometry:I,index:D,sourceLayerIndex:O}=P,U=r[D].feature;this.addFeature(P,I,D,d),l.featureIndex.insert(U,I,D,O,this.index)}}update(r,l,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,l,this.stateDependentLayers,d)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,Ei),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(r,l,d,m){for(const v of l)for(const _ of v){const S=_.x,P=_.y;if(S<0||S>=tr||P<0||P>=tr)continue;const I=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,r.sortKey),D=I.vertexLength;tg(this.layoutVertexArray,S,P,-1,-1),tg(this.layoutVertexArray,S,P,1,-1),tg(this.layoutVertexArray,S,P,1,1),tg(this.layoutVertexArray,S,P,-1,1),this.indexArray.emplaceBack(D,D+1,D+2),this.indexArray.emplaceBack(D,D+3,D+2),I.vertexLength+=4,I.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,d,{},m)}}function d2(a,r){for(let l=0;l<a.length;l++)if(Zu(r,a[l]))return!0;for(let l=0;l<r.length;l++)if(Zu(a,r[l]))return!0;return!!Wx(a,r)}function Zz(a,r,l){return!!Zu(a,r)||!!Hx(r,a,l)}function f2(a,r){if(a.length===1)return m2(r,a[0]);for(let l=0;l<r.length;l++){const d=r[l];for(let m=0;m<d.length;m++)if(Zu(a,d[m]))return!0}for(let l=0;l<a.length;l++)if(m2(r,a[l]))return!0;for(let l=0;l<r.length;l++)if(Wx(a,r[l]))return!0;return!1}function Wz(a,r,l){if(a.length>1){if(Wx(a,r))return!0;for(let d=0;d<r.length;d++)if(Hx(r[d],a,l))return!0}for(let d=0;d<a.length;d++)if(Hx(a[d],r,l))return!0;return!1}function Wx(a,r){if(a.length===0||r.length===0)return!1;for(let l=0;l<a.length-1;l++){const d=a[l],m=a[l+1];for(let v=0;v<r.length-1;v++)if(Hz(d,m,r[v],r[v+1]))return!0}return!1}function Hz(a,r,l,d){return Tt(a,l,d)!==Tt(r,l,d)&&Tt(a,r,l)!==Tt(a,r,d)}function Hx(a,r,l){const d=l*l;if(r.length===1)return a.distSqr(r[0])<d;for(let m=1;m<r.length;m++)if(p2(a,r[m-1],r[m])<d)return!0;return!1}function p2(a,r,l){const d=r.distSqr(l);if(d===0)return a.distSqr(r);const m=((a.x-r.x)*(l.x-r.x)+(a.y-r.y)*(l.y-r.y))/d;return a.distSqr(m<0?r:m>1?l:l.sub(r)._mult(m)._add(r))}function m2(a,r){let l,d,m,v=!1;for(let _=0;_<a.length;_++){l=a[_];for(let S=0,P=l.length-1;S<l.length;P=S++)d=l[S],m=l[P],d.y>r.y!=m.y>r.y&&r.x<(m.x-d.x)*(r.y-d.y)/(m.y-d.y)+d.x&&(v=!v)}return v}function Zu(a,r){let l=!1;for(let d=0,m=a.length-1;d<a.length;m=d++){const v=a[d],_=a[m];v.y>r.y!=_.y>r.y&&r.x<(_.x-v.x)*(r.y-v.y)/(_.y-v.y)+v.x&&(l=!l)}return l}function Kz(a,r,l){const d=l[0],m=l[2];if(a.x<d.x&&r.x<d.x||a.x>m.x&&r.x>m.x||a.y<d.y&&r.y<d.y||a.y>m.y&&r.y>m.y)return!1;const v=Tt(a,r,l[0]);return v!==Tt(a,r,l[1])||v!==Tt(a,r,l[2])||v!==Tt(a,r,l[3])}function uf(a,r,l){const d=r.paint.get(a).value;return d.kind==="constant"?d.value:l.programConfigurations.get(r.id).getMaxValue(a)}function ng(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1])}function rg(a,r,l,d,m){if(!r[0]&&!r[1])return a;const v=M.convert(r)._mult(m);l==="viewport"&&v._rotate(-d);const _=[];for(let S=0;S<a.length;S++)_.push(a[S].sub(v));return _}let g2,y2;dt("CircleBucket",Zx,{omit:["layers"]});var Xz={get paint(){return y2=y2||new Zn({"circle-radius":new Mt(ce.paint_circle["circle-radius"]),"circle-color":new Mt(ce.paint_circle["circle-color"]),"circle-blur":new Mt(ce.paint_circle["circle-blur"]),"circle-opacity":new Mt(ce.paint_circle["circle-opacity"]),"circle-translate":new St(ce.paint_circle["circle-translate"]),"circle-translate-anchor":new St(ce.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new St(ce.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new St(ce.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Mt(ce.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Mt(ce.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Mt(ce.paint_circle["circle-stroke-opacity"])})},get layout(){return g2=g2||new Zn({"circle-sort-key":new Mt(ce.layout_circle["circle-sort-key"])})}},si=1e-6,Wu=typeof Float32Array<"u"?Float32Array:Array;function Kx(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}function v2(a,r,l){var d=r[0],m=r[1],v=r[2],_=r[3],S=r[4],P=r[5],I=r[6],D=r[7],O=r[8],U=r[9],H=r[10],X=r[11],te=r[12],oe=r[13],he=r[14],we=r[15],pe=l[0],Se=l[1],Pe=l[2],Fe=l[3];return a[0]=pe*d+Se*S+Pe*O+Fe*te,a[1]=pe*m+Se*P+Pe*U+Fe*oe,a[2]=pe*v+Se*I+Pe*H+Fe*he,a[3]=pe*_+Se*D+Pe*X+Fe*we,a[4]=(pe=l[4])*d+(Se=l[5])*S+(Pe=l[6])*O+(Fe=l[7])*te,a[5]=pe*m+Se*P+Pe*U+Fe*oe,a[6]=pe*v+Se*I+Pe*H+Fe*he,a[7]=pe*_+Se*D+Pe*X+Fe*we,a[8]=(pe=l[8])*d+(Se=l[9])*S+(Pe=l[10])*O+(Fe=l[11])*te,a[9]=pe*m+Se*P+Pe*U+Fe*oe,a[10]=pe*v+Se*I+Pe*H+Fe*he,a[11]=pe*_+Se*D+Pe*X+Fe*we,a[12]=(pe=l[12])*d+(Se=l[13])*S+(Pe=l[14])*O+(Fe=l[15])*te,a[13]=pe*m+Se*P+Pe*U+Fe*oe,a[14]=pe*v+Se*I+Pe*H+Fe*he,a[15]=pe*_+Se*D+Pe*X+Fe*we,a}Math.hypot||(Math.hypot=function(){for(var a=0,r=arguments.length;r--;)a+=arguments[r]*arguments[r];return Math.sqrt(a)});var hf,Qz=v2;function ig(a,r,l){var d=r[0],m=r[1],v=r[2],_=r[3];return a[0]=l[0]*d+l[4]*m+l[8]*v+l[12]*_,a[1]=l[1]*d+l[5]*m+l[9]*v+l[13]*_,a[2]=l[2]*d+l[6]*m+l[10]*v+l[14]*_,a[3]=l[3]*d+l[7]*m+l[11]*v+l[15]*_,a}hf=new Wu(4),Wu!=Float32Array&&(hf[0]=0,hf[1]=0,hf[2]=0,hf[3]=0);class Yz extends Wi{constructor(r){super(r,Xz)}createBucket(r){return new Zx(r)}queryRadius(r){const l=r;return uf("circle-radius",this,l)+uf("circle-stroke-width",this,l)+ng(this.paint.get("circle-translate"))}queryIntersectsFeature(r,l,d,m,v,_,S,P){const I=rg(r,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),_.angle,S),D=this.paint.get("circle-radius").evaluate(l,d)+this.paint.get("circle-stroke-width").evaluate(l,d),O=this.paint.get("circle-pitch-alignment")==="map",U=O?I:function(X,te){return X.map(oe=>x2(oe,te))}(I,P),H=O?D*S:D;for(const X of m)for(const te of X){const oe=O?te:x2(te,P);let he=H;const we=ig([],[te.x,te.y,0,1],P);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?he*=we[3]/_.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(he*=_.cameraToCenterDistance/we[3]),Zz(U,oe,he))return!0}return!1}}function x2(a,r){const l=ig([],[a.x,a.y,0,1],r);return new M(l[0]/l[3],l[1]/l[3])}class _2 extends Zx{}let w2;dt("HeatmapBucket",_2,{omit:["layers"]});var Jz={get paint(){return w2=w2||new Zn({"heatmap-radius":new Mt(ce.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Mt(ce.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new St(ce.paint_heatmap["heatmap-intensity"]),"heatmap-color":new tf(ce.paint_heatmap["heatmap-color"]),"heatmap-opacity":new St(ce.paint_heatmap["heatmap-opacity"])})}};function Xx(a,{width:r,height:l},d,m){if(m){if(m instanceof Uint8ClampedArray)m=new Uint8Array(m.buffer);else if(m.length!==r*l*d)throw new RangeError(`mismatched image size. expected: ${m.length} but got: ${r*l*d}`)}else m=new Uint8Array(r*l*d);return a.width=r,a.height=l,a.data=m,a}function b2(a,{width:r,height:l},d){if(r===a.width&&l===a.height)return;const m=Xx({},{width:r,height:l},d);Qx(a,m,{x:0,y:0},{x:0,y:0},{width:Math.min(a.width,r),height:Math.min(a.height,l)},d),a.width=r,a.height=l,a.data=m.data}function Qx(a,r,l,d,m,v){if(m.width===0||m.height===0)return r;if(m.width>a.width||m.height>a.height||l.x>a.width-m.width||l.y>a.height-m.height)throw new RangeError("out of range source coordinates for image copy");if(m.width>r.width||m.height>r.height||d.x>r.width-m.width||d.y>r.height-m.height)throw new RangeError("out of range destination coordinates for image copy");const _=a.data,S=r.data;if(_===S)throw new Error("srcData equals dstData, so image is already copied");for(let P=0;P<m.height;P++){const I=((l.y+P)*a.width+l.x)*v,D=((d.y+P)*r.width+d.x)*v;for(let O=0;O<m.width*v;O++)S[D+O]=_[I+O]}return r}class df{constructor(r,l){Xx(this,r,1,l)}resize(r){b2(this,r,1)}clone(){return new df({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,l,d,m,v){Qx(r,l,d,m,v,1)}}class ss{constructor(r,l){Xx(this,r,4,l)}resize(r){b2(this,r,4)}replace(r,l){l?this.data.set(r):this.data=r instanceof Uint8ClampedArray?new Uint8Array(r.buffer):r}clone(){return new ss({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,l,d,m,v){Qx(r,l,d,m,v,4)}}function S2(a){const r={},l=a.resolution||256,d=a.clips?a.clips.length:1,m=a.image||new ss({width:l,height:d});if(Math.log(l)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${l}`);const v=(_,S,P)=>{r[a.evaluationKey]=P;const I=a.expression.evaluate(r);m.data[_+S+0]=Math.floor(255*I.r/I.a),m.data[_+S+1]=Math.floor(255*I.g/I.a),m.data[_+S+2]=Math.floor(255*I.b/I.a),m.data[_+S+3]=Math.floor(255*I.a)};if(a.clips)for(let _=0,S=0;_<d;++_,S+=4*l)for(let P=0,I=0;P<l;P++,I+=4){const D=P/(l-1),{start:O,end:U}=a.clips[_];v(S,I,O*(1-D)+U*D)}else for(let _=0,S=0;_<l;_++,S+=4)v(0,S,_/(l-1));return m}dt("AlphaImage",df),dt("RGBAImage",ss);class eO extends Wi{createBucket(r){return new _2(r)}constructor(r){super(r,Jz),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(r){r==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=S2({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let T2;var tO={get paint(){return T2=T2||new Zn({"hillshade-illumination-direction":new St(ce.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new St(ce.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new St(ce.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new St(ce.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new St(ce.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new St(ce.paint_hillshade["hillshade-accent-color"])})}};class nO extends Wi{constructor(r){super(r,tO)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const rO=Mn([{name:"a_pos",components:2,type:"Int16"}],4),{members:iO}=rO;var Yx={exports:{}};function sg(a,r,l){l=l||2;var d,m,v,_,S,P,I,D=r&&r.length,O=D?r[0]*l:a.length,U=E2(a,0,O,l,!0),H=[];if(!U||U.next===U.prev)return H;if(D&&(U=function(te,oe,he,we){var pe,Se,Pe,Fe=[];for(pe=0,Se=oe.length;pe<Se;pe++)(Pe=E2(te,oe[pe]*we,pe<Se-1?oe[pe+1]*we:te.length,we,!1))===Pe.next&&(Pe.steiner=!0),Fe.push(dO(Pe));for(Fe.sort(cO),pe=0;pe<Fe.length;pe++)he=uO(Fe[pe],he);return he}(a,r,U,l)),a.length>80*l){d=v=a[0],m=_=a[1];for(var X=l;X<O;X+=l)(S=a[X])<d&&(d=S),(P=a[X+1])<m&&(m=P),S>v&&(v=S),P>_&&(_=P);I=(I=Math.max(v-d,_-m))!==0?32767/I:0}return ff(U,H,l,d,m,I,0),H}function E2(a,r,l,d,m){var v,_;if(m===t_(a,r,l,d)>0)for(v=r;v<l;v+=d)_=A2(v,a[v],a[v+1],_);else for(v=l-d;v>=r;v-=d)_=A2(v,a[v],a[v+1],_);return _&&ag(_,_.next)&&(mf(_),_=_.next),_}function Pc(a,r){if(!a)return a;r||(r=a);var l,d=a;do if(l=!1,d.steiner||!ag(d,d.next)&&Hn(d.prev,d,d.next)!==0)d=d.next;else{if(mf(d),(d=r=d.prev)===d.next)break;l=!0}while(l||d!==r);return r}function ff(a,r,l,d,m,v,_){if(a){!_&&v&&function(D,O,U,H){var X=D;do X.z===0&&(X.z=Jx(X.x,X.y,O,U,H)),X.prevZ=X.prev,X.nextZ=X.next,X=X.next;while(X!==D);X.prevZ.nextZ=null,X.prevZ=null,function(te){var oe,he,we,pe,Se,Pe,Fe,ct,vt=1;do{for(he=te,te=null,Se=null,Pe=0;he;){for(Pe++,we=he,Fe=0,oe=0;oe<vt&&(Fe++,we=we.nextZ);oe++);for(ct=vt;Fe>0||ct>0&&we;)Fe!==0&&(ct===0||!we||he.z<=we.z)?(pe=he,he=he.nextZ,Fe--):(pe=we,we=we.nextZ,ct--),Se?Se.nextZ=pe:te=pe,pe.prevZ=Se,Se=pe;he=we}Se.nextZ=null,vt*=2}while(Pe>1)}(X)}(a,d,m,v);for(var S,P,I=a;a.prev!==a.next;)if(S=a.prev,P=a.next,v?aO(a,d,m,v):sO(a))r.push(S.i/l|0),r.push(a.i/l|0),r.push(P.i/l|0),mf(a),a=P.next,I=P.next;else if((a=P)===I){_?_===1?ff(a=oO(Pc(a),r,l),r,l,d,m,v,2):_===2&&lO(a,r,l,d,m,v):ff(Pc(a),r,l,d,m,v,1);break}}}function sO(a){var r=a.prev,l=a,d=a.next;if(Hn(r,l,d)>=0)return!1;for(var m=r.x,v=l.x,_=d.x,S=r.y,P=l.y,I=d.y,D=m<v?m<_?m:_:v<_?v:_,O=S<P?S<I?S:I:P<I?P:I,U=m>v?m>_?m:_:v>_?v:_,H=S>P?S>I?S:I:P>I?P:I,X=d.next;X!==r;){if(X.x>=D&&X.x<=U&&X.y>=O&&X.y<=H&&Hu(m,S,v,P,_,I,X.x,X.y)&&Hn(X.prev,X,X.next)>=0)return!1;X=X.next}return!0}function aO(a,r,l,d){var m=a.prev,v=a,_=a.next;if(Hn(m,v,_)>=0)return!1;for(var S=m.x,P=v.x,I=_.x,D=m.y,O=v.y,U=_.y,H=S<P?S<I?S:I:P<I?P:I,X=D<O?D<U?D:U:O<U?O:U,te=S>P?S>I?S:I:P>I?P:I,oe=D>O?D>U?D:U:O>U?O:U,he=Jx(H,X,r,l,d),we=Jx(te,oe,r,l,d),pe=a.prevZ,Se=a.nextZ;pe&&pe.z>=he&&Se&&Se.z<=we;){if(pe.x>=H&&pe.x<=te&&pe.y>=X&&pe.y<=oe&&pe!==m&&pe!==_&&Hu(S,D,P,O,I,U,pe.x,pe.y)&&Hn(pe.prev,pe,pe.next)>=0||(pe=pe.prevZ,Se.x>=H&&Se.x<=te&&Se.y>=X&&Se.y<=oe&&Se!==m&&Se!==_&&Hu(S,D,P,O,I,U,Se.x,Se.y)&&Hn(Se.prev,Se,Se.next)>=0))return!1;Se=Se.nextZ}for(;pe&&pe.z>=he;){if(pe.x>=H&&pe.x<=te&&pe.y>=X&&pe.y<=oe&&pe!==m&&pe!==_&&Hu(S,D,P,O,I,U,pe.x,pe.y)&&Hn(pe.prev,pe,pe.next)>=0)return!1;pe=pe.prevZ}for(;Se&&Se.z<=we;){if(Se.x>=H&&Se.x<=te&&Se.y>=X&&Se.y<=oe&&Se!==m&&Se!==_&&Hu(S,D,P,O,I,U,Se.x,Se.y)&&Hn(Se.prev,Se,Se.next)>=0)return!1;Se=Se.nextZ}return!0}function oO(a,r,l){var d=a;do{var m=d.prev,v=d.next.next;!ag(m,v)&&C2(m,d,d.next,v)&&pf(m,v)&&pf(v,m)&&(r.push(m.i/l|0),r.push(d.i/l|0),r.push(v.i/l|0),mf(d),mf(d.next),d=a=v),d=d.next}while(d!==a);return Pc(d)}function lO(a,r,l,d,m,v){var _=a;do{for(var S=_.next.next;S!==_.prev;){if(_.i!==S.i&&fO(_,S)){var P=P2(_,S);return _=Pc(_,_.next),P=Pc(P,P.next),ff(_,r,l,d,m,v,0),void ff(P,r,l,d,m,v,0)}S=S.next}_=_.next}while(_!==a)}function cO(a,r){return a.x-r.x}function uO(a,r){var l=function(m,v){var _,S=v,P=m.x,I=m.y,D=-1/0;do{if(I<=S.y&&I>=S.next.y&&S.next.y!==S.y){var O=S.x+(I-S.y)*(S.next.x-S.x)/(S.next.y-S.y);if(O<=P&&O>D&&(D=O,_=S.x<S.next.x?S:S.next,O===P))return _}S=S.next}while(S!==v);if(!_)return null;var U,H=_,X=_.x,te=_.y,oe=1/0;S=_;do P>=S.x&&S.x>=X&&P!==S.x&&Hu(I<te?P:D,I,X,te,I<te?D:P,I,S.x,S.y)&&(U=Math.abs(I-S.y)/(P-S.x),pf(S,m)&&(U<oe||U===oe&&(S.x>_.x||S.x===_.x&&hO(_,S)))&&(_=S,oe=U)),S=S.next;while(S!==H);return _}(a,r);if(!l)return r;var d=P2(l,a);return Pc(d,d.next),Pc(l,l.next)}function hO(a,r){return Hn(a.prev,a,r.prev)<0&&Hn(r.next,a,a.next)<0}function Jx(a,r,l,d,m){return(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a=(a-l)*m|0)|a<<8))|a<<4))|a<<2))|a<<1))|(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=(r-d)*m|0)|r<<8))|r<<4))|r<<2))|r<<1))<<1}function dO(a){var r=a,l=a;do(r.x<l.x||r.x===l.x&&r.y<l.y)&&(l=r),r=r.next;while(r!==a);return l}function Hu(a,r,l,d,m,v,_,S){return(m-_)*(r-S)>=(a-_)*(v-S)&&(a-_)*(d-S)>=(l-_)*(r-S)&&(l-_)*(v-S)>=(m-_)*(d-S)}function fO(a,r){return a.next.i!==r.i&&a.prev.i!==r.i&&!function(l,d){var m=l;do{if(m.i!==l.i&&m.next.i!==l.i&&m.i!==d.i&&m.next.i!==d.i&&C2(m,m.next,l,d))return!0;m=m.next}while(m!==l);return!1}(a,r)&&(pf(a,r)&&pf(r,a)&&function(l,d){var m=l,v=!1,_=(l.x+d.x)/2,S=(l.y+d.y)/2;do m.y>S!=m.next.y>S&&m.next.y!==m.y&&_<(m.next.x-m.x)*(S-m.y)/(m.next.y-m.y)+m.x&&(v=!v),m=m.next;while(m!==l);return v}(a,r)&&(Hn(a.prev,a,r.prev)||Hn(a,r.prev,r))||ag(a,r)&&Hn(a.prev,a,a.next)>0&&Hn(r.prev,r,r.next)>0)}function Hn(a,r,l){return(r.y-a.y)*(l.x-r.x)-(r.x-a.x)*(l.y-r.y)}function ag(a,r){return a.x===r.x&&a.y===r.y}function C2(a,r,l,d){var m=lg(Hn(a,r,l)),v=lg(Hn(a,r,d)),_=lg(Hn(l,d,a)),S=lg(Hn(l,d,r));return m!==v&&_!==S||!(m!==0||!og(a,l,r))||!(v!==0||!og(a,d,r))||!(_!==0||!og(l,a,d))||!(S!==0||!og(l,r,d))}function og(a,r,l){return r.x<=Math.max(a.x,l.x)&&r.x>=Math.min(a.x,l.x)&&r.y<=Math.max(a.y,l.y)&&r.y>=Math.min(a.y,l.y)}function lg(a){return a>0?1:a<0?-1:0}function pf(a,r){return Hn(a.prev,a,a.next)<0?Hn(a,r,a.next)>=0&&Hn(a,a.prev,r)>=0:Hn(a,r,a.prev)<0||Hn(a,a.next,r)<0}function P2(a,r){var l=new e_(a.i,a.x,a.y),d=new e_(r.i,r.x,r.y),m=a.next,v=r.prev;return a.next=r,r.prev=a,l.next=m,m.prev=l,d.next=l,l.prev=d,v.next=d,d.prev=v,d}function A2(a,r,l,d){var m=new e_(a,r,l);return d?(m.next=d.next,m.prev=d,d.next.prev=m,d.next=m):(m.prev=m,m.next=m),m}function mf(a){a.next.prev=a.prev,a.prev.next=a.next,a.prevZ&&(a.prevZ.nextZ=a.nextZ),a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function e_(a,r,l){this.i=a,this.x=r,this.y=l,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function t_(a,r,l,d){for(var m=0,v=r,_=l-d;v<l;v+=d)m+=(a[_]-a[v])*(a[v+1]+a[_+1]),_=v;return m}Yx.exports=sg,Yx.exports.default=sg,sg.deviation=function(a,r,l,d){var m=r&&r.length,v=Math.abs(t_(a,0,m?r[0]*l:a.length,l));if(m)for(var _=0,S=r.length;_<S;_++)v-=Math.abs(t_(a,r[_]*l,_<S-1?r[_+1]*l:a.length,l));var P=0;for(_=0;_<d.length;_+=3){var I=d[_]*l,D=d[_+1]*l,O=d[_+2]*l;P+=Math.abs((a[I]-a[O])*(a[D+1]-a[I+1])-(a[I]-a[D])*(a[O+1]-a[I+1]))}return v===0&&P===0?0:Math.abs((P-v)/v)},sg.flatten=function(a){for(var r=a[0][0].length,l={vertices:[],holes:[],dimensions:r},d=0,m=0;m<a.length;m++){for(var v=0;v<a[m].length;v++)for(var _=0;_<r;_++)l.vertices.push(a[m][v][_]);m>0&&l.holes.push(d+=a[m-1].length)}return l};var k2=b(Yx.exports);function pO(a,r,l,d,m){I2(a,r,l||0,d||a.length-1,m||mO)}function I2(a,r,l,d,m){for(;d>l;){if(d-l>600){var v=d-l+1,_=r-l+1,S=Math.log(v),P=.5*Math.exp(2*S/3),I=.5*Math.sqrt(S*P*(v-P)/v)*(_-v/2<0?-1:1);I2(a,r,Math.max(l,Math.floor(r-_*P/v+I)),Math.min(d,Math.floor(r+(v-_)*P/v+I)),m)}var D=a[r],O=l,U=d;for(gf(a,l,r),m(a[d],D)>0&&gf(a,l,d);O<U;){for(gf(a,O,U),O++,U--;m(a[O],D)<0;)O++;for(;m(a[U],D)>0;)U--}m(a[l],D)===0?gf(a,l,U):gf(a,++U,d),U<=r&&(l=U+1),r<=U&&(d=U-1)}}function gf(a,r,l){var d=a[r];a[r]=a[l],a[l]=d}function mO(a,r){return a<r?-1:a>r?1:0}function n_(a,r){const l=a.length;if(l<=1)return[a];const d=[];let m,v;for(let _=0;_<l;_++){const S=ht(a[_]);S!==0&&(a[_].area=Math.abs(S),v===void 0&&(v=S<0),v===S<0?(m&&d.push(m),m=[a[_]]):m.push(a[_]))}if(m&&d.push(m),r>1)for(let _=0;_<d.length;_++)d[_].length<=r||(pO(d[_],r,1,d[_].length-1,gO),d[_]=d[_].slice(0,r));return d}function gO(a,r){return r.area-a.area}function r_(a,r,l){const d=l.patternDependencies;let m=!1;for(const v of r){const _=v.paint.get(`${a}-pattern`);_.isConstant()||(m=!0);const S=_.constantOr(null);S&&(m=!0,d[S.to]=!0,d[S.from]=!0)}return m}function i_(a,r,l,d,m){const v=m.patternDependencies;for(const _ of r){const S=_.paint.get(`${a}-pattern`).value;if(S.kind!=="constant"){let P=S.evaluate({zoom:d-1},l,{},m.availableImages),I=S.evaluate({zoom:d},l,{},m.availableImages),D=S.evaluate({zoom:d+1},l,{},m.availableImages);P=P&&P.name?P.name:P,I=I&&I.name?I.name:I,D=D&&D.name?D.name:D,v[P]=!0,v[I]=!0,v[D]=!0,l.patterns[_.id]={min:P,mid:I,max:D}}}return l}class s_{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(l=>l.id),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Zt,this.indexArray=new wr,this.indexArray2=new sr,this.programConfigurations=new ta(r.layers,r.zoom),this.segments=new xn,this.segments2=new xn,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(r,l,d){this.hasPattern=r_("fill",this.layers,l);const m=this.layers[0].layout.get("fill-sort-key"),v=!m.isConstant(),_=[];for(const{feature:S,id:P,index:I,sourceLayerIndex:D}of r){const O=this.layers[0]._featureFilter.needGeometry,U=Cc(S,O);if(!this.layers[0]._featureFilter.filter(new vn(this.zoom),U,d))continue;const H=v?m.evaluate(U,{},d,l.availableImages):void 0,X={id:P,properties:S.properties,type:S.type,sourceLayerIndex:D,index:I,geometry:O?U.geometry:Ec(S),patterns:{},sortKey:H};_.push(X)}v&&_.sort((S,P)=>S.sortKey-P.sortKey);for(const S of _){const{geometry:P,index:I,sourceLayerIndex:D}=S;if(this.hasPattern){const O=i_("fill",this.layers,S,this.zoom,l);this.patternFeatures.push(O)}else this.addFeature(S,P,I,d,{});l.featureIndex.insert(r[I].feature,P,I,D,this.index)}}update(r,l,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,l,this.stateDependentLayers,d)}addFeatures(r,l,d){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,l,d)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,iO),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.indexBuffer2=r.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(r,l,d,m,v){for(const _ of n_(l,500)){let S=0;for(const H of _)S+=H.length;const P=this.segments.prepareSegment(S,this.layoutVertexArray,this.indexArray),I=P.vertexLength,D=[],O=[];for(const H of _){if(H.length===0)continue;H!==_[0]&&O.push(D.length/2);const X=this.segments2.prepareSegment(H.length,this.layoutVertexArray,this.indexArray2),te=X.vertexLength;this.layoutVertexArray.emplaceBack(H[0].x,H[0].y),this.indexArray2.emplaceBack(te+H.length-1,te),D.push(H[0].x),D.push(H[0].y);for(let oe=1;oe<H.length;oe++)this.layoutVertexArray.emplaceBack(H[oe].x,H[oe].y),this.indexArray2.emplaceBack(te+oe-1,te+oe),D.push(H[oe].x),D.push(H[oe].y);X.vertexLength+=H.length,X.primitiveLength+=H.length}const U=k2(D,O);for(let H=0;H<U.length;H+=3)this.indexArray.emplaceBack(I+U[H],I+U[H+1],I+U[H+2]);P.vertexLength+=S,P.primitiveLength+=U.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,d,v,m)}}let M2,R2;dt("FillBucket",s_,{omit:["layers","patternFeatures"]});var yO={get paint(){return R2=R2||new Zn({"fill-antialias":new St(ce.paint_fill["fill-antialias"]),"fill-opacity":new Mt(ce.paint_fill["fill-opacity"]),"fill-color":new Mt(ce.paint_fill["fill-color"]),"fill-outline-color":new Mt(ce.paint_fill["fill-outline-color"]),"fill-translate":new St(ce.paint_fill["fill-translate"]),"fill-translate-anchor":new St(ce.paint_fill["fill-translate-anchor"]),"fill-pattern":new bc(ce.paint_fill["fill-pattern"])})},get layout(){return M2=M2||new Zn({"fill-sort-key":new Mt(ce.layout_fill["fill-sort-key"])})}};class vO extends Wi{constructor(r){super(r,yO)}recalculate(r,l){super.recalculate(r,l);const d=this.paint._values["fill-outline-color"];d.value.kind==="constant"&&d.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(r){return new s_(r)}queryRadius(){return ng(this.paint.get("fill-translate"))}queryIntersectsFeature(r,l,d,m,v,_,S){return f2(rg(r,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),_.angle,S),m)}isTileClipped(){return!0}}const xO=Mn([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),_O=Mn([{name:"a_centroid",components:2,type:"Int16"}],4),{members:wO}=xO;var sl={},bO=A,D2=Ku;function Ku(a,r,l,d,m){this.properties={},this.extent=l,this.type=0,this._pbf=a,this._geometry=-1,this._keys=d,this._values=m,a.readFields(SO,this,r)}function SO(a,r,l){a==1?r.id=l.readVarint():a==2?function(d,m){for(var v=d.readVarint()+d.pos;d.pos<v;){var _=m._keys[d.readVarint()],S=m._values[d.readVarint()];m.properties[_]=S}}(l,r):a==3?r.type=l.readVarint():a==4&&(r._geometry=l.pos)}function TO(a){for(var r,l,d=0,m=0,v=a.length,_=v-1;m<v;_=m++)d+=((l=a[_]).x-(r=a[m]).x)*(r.y+l.y);return d}Ku.types=["Unknown","Point","LineString","Polygon"],Ku.prototype.loadGeometry=function(){var a=this._pbf;a.pos=this._geometry;for(var r,l=a.readVarint()+a.pos,d=1,m=0,v=0,_=0,S=[];a.pos<l;){if(m<=0){var P=a.readVarint();d=7&P,m=P>>3}if(m--,d===1||d===2)v+=a.readSVarint(),_+=a.readSVarint(),d===1&&(r&&S.push(r),r=[]),r.push(new bO(v,_));else{if(d!==7)throw new Error("unknown command "+d);r&&r.push(r[0].clone())}}return r&&S.push(r),S},Ku.prototype.bbox=function(){var a=this._pbf;a.pos=this._geometry;for(var r=a.readVarint()+a.pos,l=1,d=0,m=0,v=0,_=1/0,S=-1/0,P=1/0,I=-1/0;a.pos<r;){if(d<=0){var D=a.readVarint();l=7&D,d=D>>3}if(d--,l===1||l===2)(m+=a.readSVarint())<_&&(_=m),m>S&&(S=m),(v+=a.readSVarint())<P&&(P=v),v>I&&(I=v);else if(l!==7)throw new Error("unknown command "+l)}return[_,P,S,I]},Ku.prototype.toGeoJSON=function(a,r,l){var d,m,v=this.extent*Math.pow(2,l),_=this.extent*a,S=this.extent*r,P=this.loadGeometry(),I=Ku.types[this.type];function D(H){for(var X=0;X<H.length;X++){var te=H[X];H[X]=[360*(te.x+_)/v-180,360/Math.PI*Math.atan(Math.exp((180-360*(te.y+S)/v)*Math.PI/180))-90]}}switch(this.type){case 1:var O=[];for(d=0;d<P.length;d++)O[d]=P[d][0];D(P=O);break;case 2:for(d=0;d<P.length;d++)D(P[d]);break;case 3:for(P=function(H){var X=H.length;if(X<=1)return[H];for(var te,oe,he=[],we=0;we<X;we++){var pe=TO(H[we]);pe!==0&&(oe===void 0&&(oe=pe<0),oe===pe<0?(te&&he.push(te),te=[H[we]]):te.push(H[we]))}return te&&he.push(te),he}(P),d=0;d<P.length;d++)for(m=0;m<P[d].length;m++)D(P[d][m])}P.length===1?P=P[0]:I="Multi"+I;var U={type:"Feature",geometry:{type:I,coordinates:P},properties:this.properties};return"id"in this&&(U.id=this.id),U};var EO=D2,L2=z2;function z2(a,r){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=a,this._keys=[],this._values=[],this._features=[],a.readFields(CO,this,r),this.length=this._features.length}function CO(a,r,l){a===15?r.version=l.readVarint():a===1?r.name=l.readString():a===5?r.extent=l.readVarint():a===2?r._features.push(l.pos):a===3?r._keys.push(l.readString()):a===4&&r._values.push(function(d){for(var m=null,v=d.readVarint()+d.pos;d.pos<v;){var _=d.readVarint()>>3;m=_===1?d.readString():_===2?d.readFloat():_===3?d.readDouble():_===4?d.readVarint64():_===5?d.readVarint():_===6?d.readSVarint():_===7?d.readBoolean():null}return m}(l))}z2.prototype.feature=function(a){if(a<0||a>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[a];var r=this._pbf.readVarint()+this._pbf.pos;return new EO(this._pbf,r,this.extent,this._keys,this._values)};var PO=L2;function AO(a,r,l){if(a===3){var d=new PO(l,l.readVarint()+l.pos);d.length&&(r[d.name]=d)}}sl.VectorTile=function(a,r){this.layers=a.readFields(AO,{},r)},sl.VectorTileFeature=D2,sl.VectorTileLayer=L2;const kO=sl.VectorTileFeature.types,a_=Math.pow(2,13);function yf(a,r,l,d,m,v,_,S){a.emplaceBack(r,l,2*Math.floor(d*a_)+_,m*a_*2,v*a_*2,Math.round(S))}class o_{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(l=>l.id),this.index=r.index,this.hasPattern=!1,this.layoutVertexArray=new rt,this.centroidVertexArray=new He,this.indexArray=new wr,this.programConfigurations=new ta(r.layers,r.zoom),this.segments=new xn,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(r,l,d){this.features=[],this.hasPattern=r_("fill-extrusion",this.layers,l);for(const{feature:m,id:v,index:_,sourceLayerIndex:S}of r){const P=this.layers[0]._featureFilter.needGeometry,I=Cc(m,P);if(!this.layers[0]._featureFilter.filter(new vn(this.zoom),I,d))continue;const D={id:v,sourceLayerIndex:S,index:_,geometry:P?I.geometry:Ec(m),properties:m.properties,type:m.type,patterns:{}};this.hasPattern?this.features.push(i_("fill-extrusion",this.layers,D,this.zoom,l)):this.addFeature(D,D.geometry,_,d,{}),l.featureIndex.insert(m,D.geometry,_,S,this.index,!0)}}addFeatures(r,l,d){for(const m of this.features){const{geometry:v}=m;this.addFeature(m,v,m.index,l,d)}}update(r,l,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,l,this.stateDependentLayers,d)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,wO),this.centroidVertexBuffer=r.createVertexBuffer(this.centroidVertexArray,_O.members,!0),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(r,l,d,m,v){const _={x:0,y:0,vertexCount:0};for(const S of n_(l,500)){let P=0;for(const X of S)P+=X.length;let I=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const X of S){if(X.length===0||MO(X))continue;let te=0;for(let oe=0;oe<X.length;oe++){const he=X[oe];if(oe>=1){const we=X[oe-1];if(!IO(he,we)){I.vertexLength+4>xn.MAX_VERTEX_ARRAY_LENGTH&&(I=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const pe=he.sub(we)._perp()._unit(),Se=we.dist(he);te+Se>32768&&(te=0),yf(this.layoutVertexArray,he.x,he.y,pe.x,pe.y,0,0,te),yf(this.layoutVertexArray,he.x,he.y,pe.x,pe.y,0,1,te),_.x+=2*he.x,_.y+=2*he.y,_.vertexCount+=2,te+=Se,yf(this.layoutVertexArray,we.x,we.y,pe.x,pe.y,0,0,te),yf(this.layoutVertexArray,we.x,we.y,pe.x,pe.y,0,1,te),_.x+=2*we.x,_.y+=2*we.y,_.vertexCount+=2;const Pe=I.vertexLength;this.indexArray.emplaceBack(Pe,Pe+2,Pe+1),this.indexArray.emplaceBack(Pe+1,Pe+2,Pe+3),I.vertexLength+=4,I.primitiveLength+=2}}}}if(I.vertexLength+P>xn.MAX_VERTEX_ARRAY_LENGTH&&(I=this.segments.prepareSegment(P,this.layoutVertexArray,this.indexArray)),kO[r.type]!=="Polygon")continue;const D=[],O=[],U=I.vertexLength;for(const X of S)if(X.length!==0){X!==S[0]&&O.push(D.length/2);for(let te=0;te<X.length;te++){const oe=X[te];yf(this.layoutVertexArray,oe.x,oe.y,0,0,1,1,0),_.x+=oe.x,_.y+=oe.y,_.vertexCount+=1,D.push(oe.x),D.push(oe.y)}}const H=k2(D,O);for(let X=0;X<H.length;X+=3)this.indexArray.emplaceBack(U+H[X],U+H[X+2],U+H[X+1]);I.primitiveLength+=H.length/3,I.vertexLength+=P}for(let S=0;S<_.vertexCount;S++)this.centroidVertexArray.emplaceBack(Math.floor(_.x/_.vertexCount),Math.floor(_.y/_.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,d,v,m)}}function IO(a,r){return a.x===r.x&&(a.x<0||a.x>tr)||a.y===r.y&&(a.y<0||a.y>tr)}function MO(a){return a.every(r=>r.x<0)||a.every(r=>r.x>tr)||a.every(r=>r.y<0)||a.every(r=>r.y>tr)}let O2;dt("FillExtrusionBucket",o_,{omit:["layers","features"]});var RO={get paint(){return O2=O2||new Zn({"fill-extrusion-opacity":new St(ce["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Mt(ce["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new St(ce["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new St(ce["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new bc(ce["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Mt(ce["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Mt(ce["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new St(ce["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class DO extends Wi{constructor(r){super(r,RO)}createBucket(r){return new o_(r)}queryRadius(){return ng(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(r,l,d,m,v,_,S,P){const I=rg(r,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),_.angle,S),D=this.paint.get("fill-extrusion-height").evaluate(l,d),O=this.paint.get("fill-extrusion-base").evaluate(l,d),U=function(X,te,oe,he){const we=[];for(const pe of X){const Se=[pe.x,pe.y,0,1];ig(Se,Se,te),we.push(new M(Se[0]/Se[3],Se[1]/Se[3]))}return we}(I,P),H=function(X,te,oe,he){const we=[],pe=[],Se=he[8]*te,Pe=he[9]*te,Fe=he[10]*te,ct=he[11]*te,vt=he[8]*oe,ot=he[9]*oe,it=he[10]*oe,Qe=he[11]*oe;for(const pt of X){const Je=[],We=[];for(const Pt of pt){const wt=Pt.x,Ut=Pt.y,_n=he[0]*wt+he[4]*Ut+he[12],Pn=he[1]*wt+he[5]*Ut+he[13],lr=he[2]*wt+he[6]*Ut+he[14],Ki=he[3]*wt+he[7]*Ut+he[15],ai=lr+Fe,nr=Ki+ct,Sr=_n+vt,Dr=Pn+ot,oi=lr+it,li=Ki+Qe,cr=new M((_n+Se)/nr,(Pn+Pe)/nr);cr.z=ai/nr,Je.push(cr);const ur=new M(Sr/li,Dr/li);ur.z=oi/li,We.push(ur)}we.push(Je),pe.push(We)}return[we,pe]}(m,O,D,P);return function(X,te,oe){let he=1/0;f2(oe,te)&&(he=F2(oe,te[0]));for(let we=0;we<te.length;we++){const pe=te[we],Se=X[we];for(let Pe=0;Pe<pe.length-1;Pe++){const Fe=pe[Pe],ct=[Fe,pe[Pe+1],Se[Pe+1],Se[Pe],Fe];d2(oe,ct)&&(he=Math.min(he,F2(oe,ct)))}}return he!==1/0&&he}(H[0],H[1],U)}}function vf(a,r){return a.x*r.x+a.y*r.y}function F2(a,r){if(a.length===1){let l=0;const d=r[l++];let m;for(;!m||d.equals(m);)if(m=r[l++],!m)return 1/0;for(;l<r.length;l++){const v=r[l],_=a[0],S=m.sub(d),P=v.sub(d),I=_.sub(d),D=vf(S,S),O=vf(S,P),U=vf(P,P),H=vf(I,S),X=vf(I,P),te=D*U-O*O,oe=(U*H-O*X)/te,he=(D*X-O*H)/te,we=d.z*(1-oe-he)+m.z*oe+v.z*he;if(isFinite(we))return we}return 1/0}{let l=1/0;for(const d of r)l=Math.min(l,d.z);return l}}const LO=Mn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:zO}=LO,OO=Mn([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:FO}=OO,NO=sl.VectorTileFeature.types,BO=Math.cos(Math.PI/180*37.5),N2=Math.pow(2,14)/.5;class l_{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(l=>l.id),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(l=>{this.gradients[l.id]={}}),this.layoutVertexArray=new Rt,this.layoutVertexArray2=new xt,this.indexArray=new wr,this.programConfigurations=new ta(r.layers,r.zoom),this.segments=new xn,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(r,l,d){this.hasPattern=r_("line",this.layers,l);const m=this.layers[0].layout.get("line-sort-key"),v=!m.isConstant(),_=[];for(const{feature:S,id:P,index:I,sourceLayerIndex:D}of r){const O=this.layers[0]._featureFilter.needGeometry,U=Cc(S,O);if(!this.layers[0]._featureFilter.filter(new vn(this.zoom),U,d))continue;const H=v?m.evaluate(U,{},d):void 0,X={id:P,properties:S.properties,type:S.type,sourceLayerIndex:D,index:I,geometry:O?U.geometry:Ec(S),patterns:{},sortKey:H};_.push(X)}v&&_.sort((S,P)=>S.sortKey-P.sortKey);for(const S of _){const{geometry:P,index:I,sourceLayerIndex:D}=S;if(this.hasPattern){const O=i_("line",this.layers,S,this.zoom,l);this.patternFeatures.push(O)}else this.addFeature(S,P,I,d,{});l.featureIndex.insert(r[I].feature,P,I,D,this.index)}}update(r,l,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,l,this.stateDependentLayers,d)}addFeatures(r,l,d){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,l,d)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=r.createVertexBuffer(this.layoutVertexArray2,FO)),this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,zO),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(r){if(r.properties&&Object.prototype.hasOwnProperty.call(r.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(r.properties,"mapbox_clip_end"))return{start:+r.properties.mapbox_clip_start,end:+r.properties.mapbox_clip_end}}addFeature(r,l,d,m,v){const _=this.layers[0].layout,S=_.get("line-join").evaluate(r,{}),P=_.get("line-cap"),I=_.get("line-miter-limit"),D=_.get("line-round-limit");this.lineClips=this.lineFeatureClips(r);for(const O of l)this.addLine(O,r,S,P,I,D);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,d,v,m)}addLine(r,l,d,m,v,_){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let he=0;he<r.length-1;he++)this.totalDistance+=r[he].dist(r[he+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const S=NO[l.type]==="Polygon";let P=r.length;for(;P>=2&&r[P-1].equals(r[P-2]);)P--;let I=0;for(;I<P-1&&r[I].equals(r[I+1]);)I++;if(P<(S?3:2))return;d==="bevel"&&(v=1.05);const D=this.overscaling<=16?15*tr/(512*this.overscaling):0,O=this.segments.prepareSegment(10*P,this.layoutVertexArray,this.indexArray);let U,H,X,te,oe;this.e1=this.e2=-1,S&&(U=r[P-2],oe=r[I].sub(U)._unit()._perp());for(let he=I;he<P;he++){if(X=he===P-1?S?r[I+1]:void 0:r[he+1],X&&r[he].equals(X))continue;oe&&(te=oe),U&&(H=U),U=r[he],oe=X?X.sub(U)._unit()._perp():te,te=te||oe;let we=te.add(oe);we.x===0&&we.y===0||we._unit();const pe=te.x*oe.x+te.y*oe.y,Se=we.x*oe.x+we.y*oe.y,Pe=Se!==0?1/Se:1/0,Fe=2*Math.sqrt(2-2*Se),ct=Se<BO&&H&&X,vt=te.x*oe.y-te.y*oe.x>0;if(ct&&he>I){const Qe=U.dist(H);if(Qe>2*D){const pt=U.sub(U.sub(H)._mult(D/Qe)._round());this.updateDistance(H,pt),this.addCurrentVertex(pt,te,0,0,O),H=pt}}const ot=H&&X;let it=ot?d:S?"butt":m;if(ot&&it==="round"&&(Pe<_?it="miter":Pe<=2&&(it="fakeround")),it==="miter"&&Pe>v&&(it="bevel"),it==="bevel"&&(Pe>2&&(it="flipbevel"),Pe<v&&(it="miter")),H&&this.updateDistance(H,U),it==="miter")we._mult(Pe),this.addCurrentVertex(U,we,0,0,O);else if(it==="flipbevel"){if(Pe>100)we=oe.mult(-1);else{const Qe=Pe*te.add(oe).mag()/te.sub(oe).mag();we._perp()._mult(Qe*(vt?-1:1))}this.addCurrentVertex(U,we,0,0,O),this.addCurrentVertex(U,we.mult(-1),0,0,O)}else if(it==="bevel"||it==="fakeround"){const Qe=-Math.sqrt(Pe*Pe-1),pt=vt?Qe:0,Je=vt?0:Qe;if(H&&this.addCurrentVertex(U,te,pt,Je,O),it==="fakeround"){const We=Math.round(180*Fe/Math.PI/20);for(let Pt=1;Pt<We;Pt++){let wt=Pt/We;if(wt!==.5){const _n=wt-.5;wt+=wt*_n*(wt-1)*((1.0904+pe*(pe*(3.55645-1.43519*pe)-3.2452))*_n*_n+(.848013+pe*(.215638*pe-1.06021)))}const Ut=oe.sub(te)._mult(wt)._add(te)._unit()._mult(vt?-1:1);this.addHalfVertex(U,Ut.x,Ut.y,!1,vt,0,O)}}X&&this.addCurrentVertex(U,oe,-pt,-Je,O)}else if(it==="butt")this.addCurrentVertex(U,we,0,0,O);else if(it==="square"){const Qe=H?1:-1;this.addCurrentVertex(U,we,Qe,Qe,O)}else it==="round"&&(H&&(this.addCurrentVertex(U,te,0,0,O),this.addCurrentVertex(U,te,1,1,O,!0)),X&&(this.addCurrentVertex(U,oe,-1,-1,O,!0),this.addCurrentVertex(U,oe,0,0,O)));if(ct&&he<P-1){const Qe=U.dist(X);if(Qe>2*D){const pt=U.add(X.sub(U)._mult(D/Qe)._round());this.updateDistance(U,pt),this.addCurrentVertex(pt,oe,0,0,O),U=pt}}}}addCurrentVertex(r,l,d,m,v,_=!1){const S=l.y*m-l.x,P=-l.y-l.x*m;this.addHalfVertex(r,l.x+l.y*d,l.y-l.x*d,_,!1,d,v),this.addHalfVertex(r,S,P,_,!0,-m,v),this.distance>N2/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(r,l,d,m,v,_))}addHalfVertex({x:r,y:l},d,m,v,_,S,P){const I=.5*(this.lineClips?this.scaledDistance*(N2-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((r<<1)+(v?1:0),(l<<1)+(_?1:0),Math.round(63*d)+128,Math.round(63*m)+128,1+(S===0?0:S<0?-1:1)|(63&I)<<2,I>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const D=P.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,D),P.primitiveLength++),_?this.e2=D:this.e1=D}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(r,l){this.distance+=r.dist(l),this.updateScaledDistance()}}let B2,V2;dt("LineBucket",l_,{omit:["layers","patternFeatures"]});var j2={get paint(){return V2=V2||new Zn({"line-opacity":new Mt(ce.paint_line["line-opacity"]),"line-color":new Mt(ce.paint_line["line-color"]),"line-translate":new St(ce.paint_line["line-translate"]),"line-translate-anchor":new St(ce.paint_line["line-translate-anchor"]),"line-width":new Mt(ce.paint_line["line-width"]),"line-gap-width":new Mt(ce.paint_line["line-gap-width"]),"line-offset":new Mt(ce.paint_line["line-offset"]),"line-blur":new Mt(ce.paint_line["line-blur"]),"line-dasharray":new ef(ce.paint_line["line-dasharray"]),"line-pattern":new bc(ce.paint_line["line-pattern"]),"line-gradient":new tf(ce.paint_line["line-gradient"])})},get layout(){return B2=B2||new Zn({"line-cap":new St(ce.layout_line["line-cap"]),"line-join":new Mt(ce.layout_line["line-join"]),"line-miter-limit":new St(ce.layout_line["line-miter-limit"]),"line-round-limit":new St(ce.layout_line["line-round-limit"]),"line-sort-key":new Mt(ce.layout_line["line-sort-key"])})}};class VO extends Mt{possiblyEvaluate(r,l){return l=new vn(Math.floor(l.zoom),{now:l.now,fadeDuration:l.fadeDuration,zoomHistory:l.zoomHistory,transition:l.transition}),super.possiblyEvaluate(r,l)}evaluate(r,l,d,m){return l=Te({},l,{zoom:Math.floor(l.zoom)}),super.evaluate(r,l,d,m)}}let cg;class jO extends Wi{constructor(r){super(r,j2),this.gradientVersion=0,cg||(cg=new VO(j2.paint.properties["line-width"].specification),cg.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(r){if(r==="line-gradient"){const l=this.gradientExpression();this.stepInterpolant=!!function(d){return d._styleExpression!==void 0}(l)&&l._styleExpression.expression instanceof Pa,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(r,l){super.recalculate(r,l),this.paint._values["line-floorwidth"]=cg.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,r)}createBucket(r){return new l_(r)}queryRadius(r){const l=r,d=$2(uf("line-width",this,l),uf("line-gap-width",this,l)),m=uf("line-offset",this,l);return d/2+Math.abs(m)+ng(this.paint.get("line-translate"))}queryIntersectsFeature(r,l,d,m,v,_,S){const P=rg(r,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),_.angle,S),I=S/2*$2(this.paint.get("line-width").evaluate(l,d),this.paint.get("line-gap-width").evaluate(l,d)),D=this.paint.get("line-offset").evaluate(l,d);return D&&(m=function(O,U){const H=[];for(let X=0;X<O.length;X++){const te=O[X],oe=[];for(let he=0;he<te.length;he++){const we=te[he-1],pe=te[he],Se=te[he+1],Pe=he===0?new M(0,0):pe.sub(we)._unit()._perp(),Fe=he===te.length-1?new M(0,0):Se.sub(pe)._unit()._perp(),ct=Pe._add(Fe)._unit(),vt=ct.x*Fe.x+ct.y*Fe.y;vt!==0&&ct._mult(1/vt),oe.push(ct._mult(U)._add(pe))}H.push(oe)}return H}(m,D*S)),function(O,U,H){for(let X=0;X<U.length;X++){const te=U[X];if(O.length>=3){for(let oe=0;oe<te.length;oe++)if(Zu(O,te[oe]))return!0}if(Wz(O,te,H))return!0}return!1}(P,m,I)}isTileClipped(){return!0}}function $2(a,r){return r>0?r+2*a:a}const $O=Mn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),UO=Mn([{name:"a_projected_pos",components:3,type:"Float32"}],4);Mn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const qO=Mn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);Mn([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const U2=Mn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),GO=Mn([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function ZO(a,r,l){return a.sections.forEach(d=>{d.text=function(m,v,_){const S=v.layout.get("text-transform").evaluate(_,{});return S==="uppercase"?m=m.toLocaleUpperCase():S==="lowercase"&&(m=m.toLocaleLowerCase()),Ti.applyArabicShaping&&(m=Ti.applyArabicShaping(m)),m}(d.text,r,l)}),a}Mn([{name:"triangle",components:3,type:"Uint16"}]),Mn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Mn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),Mn([{type:"Float32",name:"offsetX"}]),Mn([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),Mn([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const xf={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var or=24,q2=fn,G2=function(a,r,l,d,m){var v,_,S=8*m-d-1,P=(1<<S)-1,I=P>>1,D=-7,O=l?m-1:0,U=l?-1:1,H=a[r+O];for(O+=U,v=H&(1<<-D)-1,H>>=-D,D+=S;D>0;v=256*v+a[r+O],O+=U,D-=8);for(_=v&(1<<-D)-1,v>>=-D,D+=d;D>0;_=256*_+a[r+O],O+=U,D-=8);if(v===0)v=1-I;else{if(v===P)return _?NaN:1/0*(H?-1:1);_+=Math.pow(2,d),v-=I}return(H?-1:1)*_*Math.pow(2,v-d)},Z2=function(a,r,l,d,m,v){var _,S,P,I=8*v-m-1,D=(1<<I)-1,O=D>>1,U=m===23?Math.pow(2,-24)-Math.pow(2,-77):0,H=d?0:v-1,X=d?1:-1,te=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(S=isNaN(r)?1:0,_=D):(_=Math.floor(Math.log(r)/Math.LN2),r*(P=Math.pow(2,-_))<1&&(_--,P*=2),(r+=_+O>=1?U/P:U*Math.pow(2,1-O))*P>=2&&(_++,P/=2),_+O>=D?(S=0,_=D):_+O>=1?(S=(r*P-1)*Math.pow(2,m),_+=O):(S=r*Math.pow(2,O-1)*Math.pow(2,m),_=0));m>=8;a[l+H]=255&S,H+=X,S/=256,m-=8);for(_=_<<m|S,I+=m;I>0;a[l+H]=255&_,H+=X,_/=256,I-=8);a[l+H-X]|=128*te};function fn(a){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(a)?a:new Uint8Array(a||0),this.pos=0,this.type=0,this.length=this.buf.length}fn.Varint=0,fn.Fixed64=1,fn.Bytes=2,fn.Fixed32=5;var c_=4294967296,W2=1/c_,H2=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function co(a){return a.type===fn.Bytes?a.readVarint()+a.pos:a.pos+1}function Xu(a,r,l){return l?4294967296*r+(a>>>0):4294967296*(r>>>0)+(a>>>0)}function K2(a,r,l){var d=r<=16383?1:r<=2097151?2:r<=268435455?3:Math.floor(Math.log(r)/(7*Math.LN2));l.realloc(d);for(var m=l.pos-1;m>=a;m--)l.buf[m+d]=l.buf[m]}function WO(a,r){for(var l=0;l<a.length;l++)r.writeVarint(a[l])}function HO(a,r){for(var l=0;l<a.length;l++)r.writeSVarint(a[l])}function KO(a,r){for(var l=0;l<a.length;l++)r.writeFloat(a[l])}function XO(a,r){for(var l=0;l<a.length;l++)r.writeDouble(a[l])}function QO(a,r){for(var l=0;l<a.length;l++)r.writeBoolean(a[l])}function YO(a,r){for(var l=0;l<a.length;l++)r.writeFixed32(a[l])}function JO(a,r){for(var l=0;l<a.length;l++)r.writeSFixed32(a[l])}function e3(a,r){for(var l=0;l<a.length;l++)r.writeFixed64(a[l])}function t3(a,r){for(var l=0;l<a.length;l++)r.writeSFixed64(a[l])}function ug(a,r){return(a[r]|a[r+1]<<8|a[r+2]<<16)+16777216*a[r+3]}function Qu(a,r,l){a[l]=r,a[l+1]=r>>>8,a[l+2]=r>>>16,a[l+3]=r>>>24}function X2(a,r){return(a[r]|a[r+1]<<8|a[r+2]<<16)+(a[r+3]<<24)}fn.prototype={destroy:function(){this.buf=null},readFields:function(a,r,l){for(l=l||this.length;this.pos<l;){var d=this.readVarint(),m=d>>3,v=this.pos;this.type=7&d,a(m,r,this),this.pos===v&&this.skip(d)}return r},readMessage:function(a,r){return this.readFields(a,r,this.readVarint()+this.pos)},readFixed32:function(){var a=ug(this.buf,this.pos);return this.pos+=4,a},readSFixed32:function(){var a=X2(this.buf,this.pos);return this.pos+=4,a},readFixed64:function(){var a=ug(this.buf,this.pos)+ug(this.buf,this.pos+4)*c_;return this.pos+=8,a},readSFixed64:function(){var a=ug(this.buf,this.pos)+X2(this.buf,this.pos+4)*c_;return this.pos+=8,a},readFloat:function(){var a=G2(this.buf,this.pos,!0,23,4);return this.pos+=4,a},readDouble:function(){var a=G2(this.buf,this.pos,!0,52,8);return this.pos+=8,a},readVarint:function(a){var r,l,d=this.buf;return r=127&(l=d[this.pos++]),l<128?r:(r|=(127&(l=d[this.pos++]))<<7,l<128?r:(r|=(127&(l=d[this.pos++]))<<14,l<128?r:(r|=(127&(l=d[this.pos++]))<<21,l<128?r:function(m,v,_){var S,P,I=_.buf;if(S=(112&(P=I[_.pos++]))>>4,P<128||(S|=(127&(P=I[_.pos++]))<<3,P<128)||(S|=(127&(P=I[_.pos++]))<<10,P<128)||(S|=(127&(P=I[_.pos++]))<<17,P<128)||(S|=(127&(P=I[_.pos++]))<<24,P<128)||(S|=(1&(P=I[_.pos++]))<<31,P<128))return Xu(m,S,v);throw new Error("Expected varint not more than 10 bytes")}(r|=(15&(l=d[this.pos]))<<28,a,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var a=this.readVarint();return a%2==1?(a+1)/-2:a/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var a=this.readVarint()+this.pos,r=this.pos;return this.pos=a,a-r>=12&&H2?function(l,d,m){return H2.decode(l.subarray(d,m))}(this.buf,r,a):function(l,d,m){for(var v="",_=d;_<m;){var S,P,I,D=l[_],O=null,U=D>239?4:D>223?3:D>191?2:1;if(_+U>m)break;U===1?D<128&&(O=D):U===2?(192&(S=l[_+1]))==128&&(O=(31&D)<<6|63&S)<=127&&(O=null):U===3?(P=l[_+2],(192&(S=l[_+1]))==128&&(192&P)==128&&((O=(15&D)<<12|(63&S)<<6|63&P)<=2047||O>=55296&&O<=57343)&&(O=null)):U===4&&(P=l[_+2],I=l[_+3],(192&(S=l[_+1]))==128&&(192&P)==128&&(192&I)==128&&((O=(15&D)<<18|(63&S)<<12|(63&P)<<6|63&I)<=65535||O>=1114112)&&(O=null)),O===null?(O=65533,U=1):O>65535&&(O-=65536,v+=String.fromCharCode(O>>>10&1023|55296),O=56320|1023&O),v+=String.fromCharCode(O),_+=U}return v}(this.buf,r,a)},readBytes:function(){var a=this.readVarint()+this.pos,r=this.buf.subarray(this.pos,a);return this.pos=a,r},readPackedVarint:function(a,r){if(this.type!==fn.Bytes)return a.push(this.readVarint(r));var l=co(this);for(a=a||[];this.pos<l;)a.push(this.readVarint(r));return a},readPackedSVarint:function(a){if(this.type!==fn.Bytes)return a.push(this.readSVarint());var r=co(this);for(a=a||[];this.pos<r;)a.push(this.readSVarint());return a},readPackedBoolean:function(a){if(this.type!==fn.Bytes)return a.push(this.readBoolean());var r=co(this);for(a=a||[];this.pos<r;)a.push(this.readBoolean());return a},readPackedFloat:function(a){if(this.type!==fn.Bytes)return a.push(this.readFloat());var r=co(this);for(a=a||[];this.pos<r;)a.push(this.readFloat());return a},readPackedDouble:function(a){if(this.type!==fn.Bytes)return a.push(this.readDouble());var r=co(this);for(a=a||[];this.pos<r;)a.push(this.readDouble());return a},readPackedFixed32:function(a){if(this.type!==fn.Bytes)return a.push(this.readFixed32());var r=co(this);for(a=a||[];this.pos<r;)a.push(this.readFixed32());return a},readPackedSFixed32:function(a){if(this.type!==fn.Bytes)return a.push(this.readSFixed32());var r=co(this);for(a=a||[];this.pos<r;)a.push(this.readSFixed32());return a},readPackedFixed64:function(a){if(this.type!==fn.Bytes)return a.push(this.readFixed64());var r=co(this);for(a=a||[];this.pos<r;)a.push(this.readFixed64());return a},readPackedSFixed64:function(a){if(this.type!==fn.Bytes)return a.push(this.readSFixed64());var r=co(this);for(a=a||[];this.pos<r;)a.push(this.readSFixed64());return a},skip:function(a){var r=7&a;if(r===fn.Varint)for(;this.buf[this.pos++]>127;);else if(r===fn.Bytes)this.pos=this.readVarint()+this.pos;else if(r===fn.Fixed32)this.pos+=4;else{if(r!==fn.Fixed64)throw new Error("Unimplemented type: "+r);this.pos+=8}},writeTag:function(a,r){this.writeVarint(a<<3|r)},realloc:function(a){for(var r=this.length||16;r<this.pos+a;)r*=2;if(r!==this.length){var l=new Uint8Array(r);l.set(this.buf),this.buf=l,this.length=r}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(a){this.realloc(4),Qu(this.buf,a,this.pos),this.pos+=4},writeSFixed32:function(a){this.realloc(4),Qu(this.buf,a,this.pos),this.pos+=4},writeFixed64:function(a){this.realloc(8),Qu(this.buf,-1&a,this.pos),Qu(this.buf,Math.floor(a*W2),this.pos+4),this.pos+=8},writeSFixed64:function(a){this.realloc(8),Qu(this.buf,-1&a,this.pos),Qu(this.buf,Math.floor(a*W2),this.pos+4),this.pos+=8},writeVarint:function(a){(a=+a||0)>268435455||a<0?function(r,l){var d,m;if(r>=0?(d=r%4294967296|0,m=r/4294967296|0):(m=~(-r/4294967296),4294967295^(d=~(-r%4294967296))?d=d+1|0:(d=0,m=m+1|0)),r>=18446744073709552e3||r<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");l.realloc(10),function(v,_,S){S.buf[S.pos++]=127&v|128,v>>>=7,S.buf[S.pos++]=127&v|128,v>>>=7,S.buf[S.pos++]=127&v|128,v>>>=7,S.buf[S.pos++]=127&v|128,S.buf[S.pos]=127&(v>>>=7)}(d,0,l),function(v,_){var S=(7&v)<<4;_.buf[_.pos++]|=S|((v>>>=3)?128:0),v&&(_.buf[_.pos++]=127&v|((v>>>=7)?128:0),v&&(_.buf[_.pos++]=127&v|((v>>>=7)?128:0),v&&(_.buf[_.pos++]=127&v|((v>>>=7)?128:0),v&&(_.buf[_.pos++]=127&v|((v>>>=7)?128:0),v&&(_.buf[_.pos++]=127&v)))))}(m,l)}(a,this):(this.realloc(4),this.buf[this.pos++]=127&a|(a>127?128:0),a<=127||(this.buf[this.pos++]=127&(a>>>=7)|(a>127?128:0),a<=127||(this.buf[this.pos++]=127&(a>>>=7)|(a>127?128:0),a<=127||(this.buf[this.pos++]=a>>>7&127))))},writeSVarint:function(a){this.writeVarint(a<0?2*-a-1:2*a)},writeBoolean:function(a){this.writeVarint(!!a)},writeString:function(a){a=String(a),this.realloc(4*a.length),this.pos++;var r=this.pos;this.pos=function(d,m,v){for(var _,S,P=0;P<m.length;P++){if((_=m.charCodeAt(P))>55295&&_<57344){if(!S){_>56319||P+1===m.length?(d[v++]=239,d[v++]=191,d[v++]=189):S=_;continue}if(_<56320){d[v++]=239,d[v++]=191,d[v++]=189,S=_;continue}_=S-55296<<10|_-56320|65536,S=null}else S&&(d[v++]=239,d[v++]=191,d[v++]=189,S=null);_<128?d[v++]=_:(_<2048?d[v++]=_>>6|192:(_<65536?d[v++]=_>>12|224:(d[v++]=_>>18|240,d[v++]=_>>12&63|128),d[v++]=_>>6&63|128),d[v++]=63&_|128)}return v}(this.buf,a,this.pos);var l=this.pos-r;l>=128&&K2(r,l,this),this.pos=r-1,this.writeVarint(l),this.pos+=l},writeFloat:function(a){this.realloc(4),Z2(this.buf,a,this.pos,!0,23,4),this.pos+=4},writeDouble:function(a){this.realloc(8),Z2(this.buf,a,this.pos,!0,52,8),this.pos+=8},writeBytes:function(a){var r=a.length;this.writeVarint(r),this.realloc(r);for(var l=0;l<r;l++)this.buf[this.pos++]=a[l]},writeRawMessage:function(a,r){this.pos++;var l=this.pos;a(r,this);var d=this.pos-l;d>=128&&K2(l,d,this),this.pos=l-1,this.writeVarint(d),this.pos+=d},writeMessage:function(a,r,l){this.writeTag(a,fn.Bytes),this.writeRawMessage(r,l)},writePackedVarint:function(a,r){r.length&&this.writeMessage(a,WO,r)},writePackedSVarint:function(a,r){r.length&&this.writeMessage(a,HO,r)},writePackedBoolean:function(a,r){r.length&&this.writeMessage(a,QO,r)},writePackedFloat:function(a,r){r.length&&this.writeMessage(a,KO,r)},writePackedDouble:function(a,r){r.length&&this.writeMessage(a,XO,r)},writePackedFixed32:function(a,r){r.length&&this.writeMessage(a,YO,r)},writePackedSFixed32:function(a,r){r.length&&this.writeMessage(a,JO,r)},writePackedFixed64:function(a,r){r.length&&this.writeMessage(a,e3,r)},writePackedSFixed64:function(a,r){r.length&&this.writeMessage(a,t3,r)},writeBytesField:function(a,r){this.writeTag(a,fn.Bytes),this.writeBytes(r)},writeFixed32Field:function(a,r){this.writeTag(a,fn.Fixed32),this.writeFixed32(r)},writeSFixed32Field:function(a,r){this.writeTag(a,fn.Fixed32),this.writeSFixed32(r)},writeFixed64Field:function(a,r){this.writeTag(a,fn.Fixed64),this.writeFixed64(r)},writeSFixed64Field:function(a,r){this.writeTag(a,fn.Fixed64),this.writeSFixed64(r)},writeVarintField:function(a,r){this.writeTag(a,fn.Varint),this.writeVarint(r)},writeSVarintField:function(a,r){this.writeTag(a,fn.Varint),this.writeSVarint(r)},writeStringField:function(a,r){this.writeTag(a,fn.Bytes),this.writeString(r)},writeFloatField:function(a,r){this.writeTag(a,fn.Fixed32),this.writeFloat(r)},writeDoubleField:function(a,r){this.writeTag(a,fn.Fixed64),this.writeDouble(r)},writeBooleanField:function(a,r){this.writeVarintField(a,!!r)}};var u_=b(q2);const h_=3;function n3(a,r,l){a===1&&l.readMessage(r3,r)}function r3(a,r,l){if(a===3){const{id:d,bitmap:m,width:v,height:_,left:S,top:P,advance:I}=l.readMessage(i3,{});r.push({id:d,bitmap:new df({width:v+2*h_,height:_+2*h_},m),metrics:{width:v,height:_,left:S,top:P,advance:I}})}}function i3(a,r,l){a===1?r.id=l.readVarint():a===2?r.bitmap=l.readBytes():a===3?r.width=l.readVarint():a===4?r.height=l.readVarint():a===5?r.left=l.readSVarint():a===6?r.top=l.readSVarint():a===7&&(r.advance=l.readVarint())}const Q2=h_;function Y2(a){let r=0,l=0;for(const _ of a)r+=_.w*_.h,l=Math.max(l,_.w);a.sort((_,S)=>S.h-_.h);const d=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(r/.95)),l),h:1/0}];let m=0,v=0;for(const _ of a)for(let S=d.length-1;S>=0;S--){const P=d[S];if(!(_.w>P.w||_.h>P.h)){if(_.x=P.x,_.y=P.y,v=Math.max(v,_.y+_.h),m=Math.max(m,_.x+_.w),_.w===P.w&&_.h===P.h){const I=d.pop();S<d.length&&(d[S]=I)}else _.h===P.h?(P.x+=_.w,P.w-=_.w):_.w===P.w?(P.y+=_.h,P.h-=_.h):(d.push({x:P.x+_.w,y:P.y,w:P.w-_.w,h:_.h}),P.y+=_.h,P.h-=_.h);break}}return{w:m,h:v,fill:r/(m*v)||0}}const Ci=1;class d_{constructor(r,{pixelRatio:l,version:d,stretchX:m,stretchY:v,content:_}){this.paddedRect=r,this.pixelRatio=l,this.stretchX=m,this.stretchY=v,this.content=_,this.version=d}get tl(){return[this.paddedRect.x+Ci,this.paddedRect.y+Ci]}get br(){return[this.paddedRect.x+this.paddedRect.w-Ci,this.paddedRect.y+this.paddedRect.h-Ci]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Ci)/this.pixelRatio,(this.paddedRect.h-2*Ci)/this.pixelRatio]}}class J2{constructor(r,l){const d={},m={};this.haveRenderCallbacks=[];const v=[];this.addImages(r,d,v),this.addImages(l,m,v);const{w:_,h:S}=Y2(v),P=new ss({width:_||1,height:S||1});for(const I in r){const D=r[I],O=d[I].paddedRect;ss.copy(D.data,P,{x:0,y:0},{x:O.x+Ci,y:O.y+Ci},D.data)}for(const I in l){const D=l[I],O=m[I].paddedRect,U=O.x+Ci,H=O.y+Ci,X=D.data.width,te=D.data.height;ss.copy(D.data,P,{x:0,y:0},{x:U,y:H},D.data),ss.copy(D.data,P,{x:0,y:te-1},{x:U,y:H-1},{width:X,height:1}),ss.copy(D.data,P,{x:0,y:0},{x:U,y:H+te},{width:X,height:1}),ss.copy(D.data,P,{x:X-1,y:0},{x:U-1,y:H},{width:1,height:te}),ss.copy(D.data,P,{x:0,y:0},{x:U+X,y:H},{width:1,height:te})}this.image=P,this.iconPositions=d,this.patternPositions=m}addImages(r,l,d){for(const m in r){const v=r[m],_={x:0,y:0,w:v.data.width+2*Ci,h:v.data.height+2*Ci};d.push(_),l[m]=new d_(_,v),v.hasRenderCallback&&this.haveRenderCallbacks.push(m)}}patchUpdatedImages(r,l){r.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const d in r.updatedImages)this.patchUpdatedImage(this.iconPositions[d],r.getImage(d),l),this.patchUpdatedImage(this.patternPositions[d],r.getImage(d),l)}patchUpdatedImage(r,l,d){if(!r||!l||r.version===l.version)return;r.version=l.version;const[m,v]=r.tl;d.update(l.data,void 0,{x:m,y:v})}}var al;dt("ImagePosition",d_),dt("ImageAtlas",J2),o.ai=void 0,(al=o.ai||(o.ai={}))[al.none=0]="none",al[al.horizontal=1]="horizontal",al[al.vertical=2]="vertical",al[al.horizontalOnly=3]="horizontalOnly";const _f=-17;class wf{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(r,l){const d=new wf;return d.scale=r||1,d.fontStack=l,d}static forImage(r){const l=new wf;return l.imageName=r,l}}class Yu{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(r,l){const d=new Yu;for(let m=0;m<r.sections.length;m++){const v=r.sections[m];v.image?d.addImageSection(v):d.addTextSection(v,l)}return d}length(){return this.text.length}getSection(r){return this.sections[this.sectionIndex[r]]}getSectionIndex(r){return this.sectionIndex[r]}getCharCode(r){return this.text.charCodeAt(r)}verticalizePunctuation(){this.text=function(r){let l="";for(let d=0;d<r.length;d++){const m=r.charCodeAt(d+1)||null,v=r.charCodeAt(d-1)||null;l+=m&&Gm(m)&&!xf[r[d+1]]||v&&Gm(v)&&!xf[r[d-1]]||!xf[r[d]]?r[d]:xf[r[d]]}return l}(this.text)}trim(){let r=0;for(let d=0;d<this.text.length&&dg[this.text.charCodeAt(d)];d++)r++;let l=this.text.length;for(let d=this.text.length-1;d>=0&&d>=r&&dg[this.text.charCodeAt(d)];d--)l--;this.text=this.text.substring(r,l),this.sectionIndex=this.sectionIndex.slice(r,l)}substring(r,l){const d=new Yu;return d.text=this.text.substring(r,l),d.sectionIndex=this.sectionIndex.slice(r,l),d.sections=this.sections,d}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((r,l)=>Math.max(r,this.sections[l].scale),0)}addTextSection(r,l){this.text+=r.text,this.sections.push(wf.forText(r.scale,r.fontStack||l));const d=this.sections.length-1;for(let m=0;m<r.text.length;++m)this.sectionIndex.push(d)}addImageSection(r){const l=r.image?r.image.name:"";if(l.length===0)return void ut("Can't add FormattedSection with an empty image.");const d=this.getNextImageSectionCharCode();d?(this.text+=String.fromCharCode(d),this.sections.push(wf.forImage(l)),this.sectionIndex.push(this.sections.length-1)):ut("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function hg(a,r,l,d,m,v,_,S,P,I,D,O,U,H,X,te){const oe=Yu.fromFeature(a,m);let he;O===o.ai.vertical&&oe.verticalizePunctuation();const{processBidirectionalText:we,processStyledBidirectionalText:pe}=Ti;if(we&&oe.sections.length===1){he=[];const Fe=we(oe.toString(),f_(oe,I,v,r,d,H,X));for(const ct of Fe){const vt=new Yu;vt.text=ct,vt.sections=oe.sections;for(let ot=0;ot<ct.length;ot++)vt.sectionIndex.push(0);he.push(vt)}}else if(pe){he=[];const Fe=pe(oe.text,oe.sectionIndex,f_(oe,I,v,r,d,H,X));for(const ct of Fe){const vt=new Yu;vt.text=ct[0],vt.sectionIndex=ct[1],vt.sections=oe.sections,he.push(vt)}}else he=function(Fe,ct){const vt=[],ot=Fe.text;let it=0;for(const Qe of ct)vt.push(Fe.substring(it,Qe)),it=Qe;return it<ot.length&&vt.push(Fe.substring(it,ot.length)),vt}(oe,f_(oe,I,v,r,d,H,X));const Se=[],Pe={positionedLines:Se,text:oe.toString(),top:D[1],bottom:D[1],left:D[0],right:D[0],writingMode:O,iconsInText:!1,verticalizable:!1};return function(Fe,ct,vt,ot,it,Qe,pt,Je,We,Pt,wt,Ut){let _n=0,Pn=_f,lr=0,Ki=0;const ai=Je==="right"?1:Je==="left"?0:.5;let nr=0;for(const cr of it){cr.trim();const ur=cr.getMaxScale(),$r=(ur-1)*or,ci={positionedGlyphs:[],lineOffset:0};Fe.positionedLines[nr]=ci;const Ur=ci.positionedGlyphs;let Pi=0;if(!cr.length()){Pn+=Qe,++nr;continue}for(let hr=0;hr<cr.length();hr++){const Ht=cr.getSection(hr),qr=cr.getSectionIndex(hr),Lr=cr.getCharCode(hr);let dr=0,Ms=null,na=null,ra=null,uo=or;const Rs=!(We===o.ai.horizontal||!wt&&!Zd(Lr)||wt&&(dg[Lr]||(Sr=Lr,lt.Arabic(Sr)||lt["Arabic Supplement"](Sr)||lt["Arabic Extended-A"](Sr)||lt["Arabic Presentation Forms-A"](Sr)||lt["Arabic Presentation Forms-B"](Sr))));if(Ht.imageName){const os=ot[Ht.imageName];if(!os)continue;ra=Ht.imageName,Fe.iconsInText=Fe.iconsInText||!0,na=os.paddedRect;const ki=os.displaySize;Ht.scale=Ht.scale*or/Ut,Ms={width:ki[0],height:ki[1],left:Ci,top:-Q2,advance:Rs?ki[1]:ki[0]},dr=$r+(or-ki[1]*Ht.scale),uo=Ms.advance;const ho=Rs?ki[0]*Ht.scale-or*ur:ki[1]*Ht.scale-or*ur;ho>0&&ho>Pi&&(Pi=ho)}else{const os=vt[Ht.fontStack],ki=os&&os[Lr];if(ki&&ki.rect)na=ki.rect,Ms=ki.metrics;else{const ho=ct[Ht.fontStack],Cf=ho&&ho[Lr];if(!Cf)continue;Ms=Cf.metrics}dr=(ur-Ht.scale)*or}Rs?(Fe.verticalizable=!0,Ur.push({glyph:Lr,imageName:ra,x:_n,y:Pn+dr,vertical:Rs,scale:Ht.scale,fontStack:Ht.fontStack,sectionIndex:qr,metrics:Ms,rect:na}),_n+=uo*Ht.scale+Pt):(Ur.push({glyph:Lr,imageName:ra,x:_n,y:Pn+dr,vertical:Rs,scale:Ht.scale,fontStack:Ht.fontStack,sectionIndex:qr,metrics:Ms,rect:na}),_n+=Ms.advance*Ht.scale+Pt)}Ur.length!==0&&(lr=Math.max(_n-Pt,lr),o3(Ur,0,Ur.length-1,ai,Pi)),_n=0;const Ai=Qe*ur+Pi;ci.lineOffset=Math.max(Pi,$r),Pn+=Ai,Ki=Math.max(Ai,Ki),++nr}var Sr;const Dr=Pn-_f,{horizontalAlign:oi,verticalAlign:li}=p_(pt);(function(cr,ur,$r,ci,Ur,Pi,Ai,hr,Ht){const qr=(ur-$r)*Ur;let Lr=0;Lr=Pi!==Ai?-hr*ci-_f:(-ci*Ht+.5)*Ai;for(const dr of cr)for(const Ms of dr.positionedGlyphs)Ms.x+=qr,Ms.y+=Lr})(Fe.positionedLines,ai,oi,li,lr,Ki,Qe,Dr,it.length),Fe.top+=-li*Dr,Fe.bottom=Fe.top+Dr,Fe.left+=-oi*lr,Fe.right=Fe.left+lr}(Pe,r,l,d,he,_,S,P,O,I,U,te),!function(Fe){for(const ct of Fe)if(ct.positionedGlyphs.length!==0)return!1;return!0}(Se)&&Pe}const dg={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},s3={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function eT(a,r,l,d,m,v){if(r.imageName){const _=d[r.imageName];return _?_.displaySize[0]*r.scale*or/v+m:0}{const _=l[r.fontStack],S=_&&_[a];return S?S.metrics.advance*r.scale+m:0}}function tT(a,r,l,d){const m=Math.pow(a-r,2);return d?a<r?m/2:2*m:m+Math.abs(l)*l}function a3(a,r,l){let d=0;return a===10&&(d-=1e4),l&&(d+=150),a!==40&&a!==65288||(d+=50),r!==41&&r!==65289||(d+=50),d}function nT(a,r,l,d,m,v){let _=null,S=tT(r,l,m,v);for(const P of d){const I=tT(r-P.x,l,m,v)+P.badness;I<=S&&(_=P,S=I)}return{index:a,x:r,priorBreak:_,badness:S}}function rT(a){return a?rT(a.priorBreak).concat(a.index):[]}function f_(a,r,l,d,m,v,_){if(v!=="point")return[];if(!a)return[];const S=[],P=function(U,H,X,te,oe,he){let we=0;for(let pe=0;pe<U.length();pe++){const Se=U.getSection(pe);we+=eT(U.getCharCode(pe),Se,te,oe,H,he)}return we/Math.max(1,Math.ceil(we/X))}(a,r,l,d,m,_),I=a.text.indexOf("")>=0;let D=0;for(let U=0;U<a.length();U++){const H=a.getSection(U),X=a.getCharCode(U);if(dg[X]||(D+=eT(X,H,d,m,r,_)),U<a.length()-1){const te=!((O=X)<11904||!(lt["Bopomofo Extended"](O)||lt.Bopomofo(O)||lt["CJK Compatibility Forms"](O)||lt["CJK Compatibility Ideographs"](O)||lt["CJK Compatibility"](O)||lt["CJK Radicals Supplement"](O)||lt["CJK Strokes"](O)||lt["CJK Symbols and Punctuation"](O)||lt["CJK Unified Ideographs Extension A"](O)||lt["CJK Unified Ideographs"](O)||lt["Enclosed CJK Letters and Months"](O)||lt["Halfwidth and Fullwidth Forms"](O)||lt.Hiragana(O)||lt["Ideographic Description Characters"](O)||lt["Kangxi Radicals"](O)||lt["Katakana Phonetic Extensions"](O)||lt.Katakana(O)||lt["Vertical Forms"](O)||lt["Yi Radicals"](O)||lt["Yi Syllables"](O)));(s3[X]||te||H.imageName)&&S.push(nT(U+1,D,P,S,a3(X,a.getCharCode(U+1),te&&I),!1))}}var O;return rT(nT(a.length(),D,P,S,0,!0))}function p_(a){let r=.5,l=.5;switch(a){case"right":case"top-right":case"bottom-right":r=1;break;case"left":case"top-left":case"bottom-left":r=0}switch(a){case"bottom":case"bottom-right":case"bottom-left":l=1;break;case"top":case"top-right":case"top-left":l=0}return{horizontalAlign:r,verticalAlign:l}}function o3(a,r,l,d,m){if(!d&&!m)return;const v=a[l],_=(a[l].x+v.metrics.advance*v.scale)*d;for(let S=r;S<=l;S++)a[S].x-=_,a[S].y+=m}function l3(a,r,l){const{horizontalAlign:d,verticalAlign:m}=p_(l),v=r[0]-a.displaySize[0]*d,_=r[1]-a.displaySize[1]*m;return{image:a,top:_,bottom:_+a.displaySize[1],left:v,right:v+a.displaySize[0]}}function iT(a,r,l,d,m,v){const _=a.image;let S;if(_.content){const oe=_.content,he=_.pixelRatio||1;S=[oe[0]/he,oe[1]/he,_.displaySize[0]-oe[2]/he,_.displaySize[1]-oe[3]/he]}const P=r.left*v,I=r.right*v;let D,O,U,H;l==="width"||l==="both"?(H=m[0]+P-d[3],O=m[0]+I+d[1]):(H=m[0]+(P+I-_.displaySize[0])/2,O=H+_.displaySize[0]);const X=r.top*v,te=r.bottom*v;return l==="height"||l==="both"?(D=m[1]+X-d[0],U=m[1]+te+d[2]):(D=m[1]+(X+te-_.displaySize[1])/2,U=D+_.displaySize[1]),{image:_,top:D,right:O,bottom:U,left:H,collisionPadding:S}}const bf=255,Ra=128,ol=bf*Ra;function sT(a,r){const{expression:l}=r;if(l.kind==="constant")return{kind:"constant",layoutSize:l.evaluate(new vn(a+1))};if(l.kind==="source")return{kind:"source"};{const{zoomStops:d,interpolationType:m}=l;let v=0;for(;v<d.length&&d[v]<=a;)v++;v=Math.max(0,v-1);let _=v;for(;_<d.length&&d[_]<a+1;)_++;_=Math.min(d.length-1,_);const S=d[v],P=d[_];return l.kind==="composite"?{kind:"composite",minZoom:S,maxZoom:P,interpolationType:m}:{kind:"camera",minZoom:S,maxZoom:P,minSize:l.evaluate(new vn(S)),maxSize:l.evaluate(new vn(P)),interpolationType:m}}}function m_(a,r,l){let d="never";const m=a.get(r);return m?d=m:a.get(l)&&(d="always"),d}const c3=sl.VectorTileFeature.types,u3=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function fg(a,r,l,d,m,v,_,S,P,I,D,O,U){const H=S?Math.min(ol,Math.round(S[0])):0,X=S?Math.min(ol,Math.round(S[1])):0;a.emplaceBack(r,l,Math.round(32*d),Math.round(32*m),v,_,(H<<1)+(P?1:0),X,16*I,16*D,256*O,256*U)}function g_(a,r,l){a.emplaceBack(r.x,r.y,l),a.emplaceBack(r.x,r.y,l),a.emplaceBack(r.x,r.y,l),a.emplaceBack(r.x,r.y,l)}function h3(a){for(const r of a.sections)if($x(r.text))return!0;return!1}class y_{constructor(r){this.layoutVertexArray=new qt,this.indexArray=new wr,this.programConfigurations=r,this.segments=new xn,this.dynamicLayoutVertexArray=new Vt,this.opacityVertexArray=new Wt,this.hasVisibleVertices=!1,this.placedSymbolArray=new ve}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(r,l,d,m){this.isEmpty()||(d&&(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,$O.members),this.indexBuffer=r.createIndexBuffer(this.indexArray,l),this.dynamicLayoutVertexBuffer=r.createVertexBuffer(this.dynamicLayoutVertexArray,UO.members,!0),this.opacityVertexBuffer=r.createVertexBuffer(this.opacityVertexArray,u3,!0),this.opacityVertexBuffer.itemSize=1),(d||m)&&this.programConfigurations.upload(r))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}dt("SymbolBuffers",y_);class v_{constructor(r,l,d){this.layoutVertexArray=new r,this.layoutAttributes=l,this.indexArray=new d,this.segments=new xn,this.collisionVertexArray=new mn}upload(r){this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=r.createVertexBuffer(this.collisionVertexArray,qO.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}dt("CollisionBuffers",v_);class Ju{constructor(r){this.collisionBoxArray=r.collisionBoxArray,this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(_=>_.id),this.index=r.index,this.pixelRatio=r.pixelRatio,this.sourceLayerIndex=r.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Kx([]),this.placementViewportMatrix=Kx([]);const l=this.layers[0]._unevaluatedLayout._values;this.textSizeData=sT(this.zoom,l["text-size"]),this.iconSizeData=sT(this.zoom,l["icon-size"]);const d=this.layers[0].layout,m=d.get("symbol-sort-key"),v=d.get("symbol-z-order");this.canOverlap=m_(d,"text-overlap","text-allow-overlap")!=="never"||m_(d,"icon-overlap","icon-allow-overlap")!=="never"||d.get("text-ignore-placement")||d.get("icon-ignore-placement"),this.sortFeaturesByKey=v!=="viewport-y"&&!m.isConstant(),this.sortFeaturesByY=(v==="viewport-y"||v==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,d.get("symbol-placement")==="point"&&(this.writingModes=d.get("text-writing-mode").map(_=>o.ai[_])),this.stateDependentLayerIds=this.layers.filter(_=>_.isStateDependent()).map(_=>_.id),this.sourceID=r.sourceID}createArrays(){this.text=new y_(new ta(this.layers,this.zoom,r=>/^text/.test(r))),this.icon=new y_(new ta(this.layers,this.zoom,r=>/^icon/.test(r))),this.glyphOffsetArray=new xe,this.lineVertexArray=new Ae,this.symbolInstances=new ue,this.textAnchorOffsets=new Oe}calculateGlyphDependencies(r,l,d,m,v){for(let _=0;_<r.length;_++)if(l[r.charCodeAt(_)]=!0,(d||m)&&v){const S=xf[r.charAt(_)];S&&(l[S.charCodeAt(0)]=!0)}}populate(r,l,d){const m=this.layers[0],v=m.layout,_=v.get("text-font"),S=v.get("text-field"),P=v.get("icon-image"),I=(S.value.kind!=="constant"||S.value.value instanceof Ir&&!S.value.value.isEmpty()||S.value.value.toString().length>0)&&(_.value.kind!=="constant"||_.value.value.length>0),D=P.value.kind!=="constant"||!!P.value.value||Object.keys(P.parameters).length>0,O=v.get("symbol-sort-key");if(this.features=[],!I&&!D)return;const U=l.iconDependencies,H=l.glyphDependencies,X=l.availableImages,te=new vn(this.zoom);for(const{feature:oe,id:he,index:we,sourceLayerIndex:pe}of r){const Se=m._featureFilter.needGeometry,Pe=Cc(oe,Se);if(!m._featureFilter.filter(te,Pe,d))continue;let Fe,ct;if(Se||(Pe.geometry=Ec(oe)),I){const ot=m.getValueAndResolveTokens("text-field",Pe,d,X),it=Ir.factory(ot);h3(it)&&(this.hasRTLText=!0),(!this.hasRTLText||Yd()==="unavailable"||this.hasRTLText&&Ti.isParsed())&&(Fe=ZO(it,m,Pe))}if(D){const ot=m.getValueAndResolveTokens("icon-image",Pe,d,X);ct=ot instanceof _r?ot:_r.fromString(ot)}if(!Fe&&!ct)continue;const vt=this.sortFeaturesByKey?O.evaluate(Pe,{},d):void 0;if(this.features.push({id:he,text:Fe,icon:ct,index:we,sourceLayerIndex:pe,geometry:Pe.geometry,properties:oe.properties,type:c3[oe.type],sortKey:vt}),ct&&(U[ct.name]=!0),Fe){const ot=_.evaluate(Pe,{},d).join(","),it=v.get("text-rotation-alignment")!=="viewport"&&v.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(o.ai.vertical)>=0;for(const Qe of Fe.sections)if(Qe.image)U[Qe.image.name]=!0;else{const pt=qd(Fe.toString()),Je=Qe.fontStack||ot,We=H[Je]=H[Je]||{};this.calculateGlyphDependencies(Qe.text,We,it,this.allowVerticalPlacement,pt)}}}v.get("symbol-placement")==="line"&&(this.features=function(oe){const he={},we={},pe=[];let Se=0;function Pe(ot){pe.push(oe[ot]),Se++}function Fe(ot,it,Qe){const pt=we[ot];return delete we[ot],we[it]=pt,pe[pt].geometry[0].pop(),pe[pt].geometry[0]=pe[pt].geometry[0].concat(Qe[0]),pt}function ct(ot,it,Qe){const pt=he[it];return delete he[it],he[ot]=pt,pe[pt].geometry[0].shift(),pe[pt].geometry[0]=Qe[0].concat(pe[pt].geometry[0]),pt}function vt(ot,it,Qe){const pt=Qe?it[0][it[0].length-1]:it[0][0];return`${ot}:${pt.x}:${pt.y}`}for(let ot=0;ot<oe.length;ot++){const it=oe[ot],Qe=it.geometry,pt=it.text?it.text.toString():null;if(!pt){Pe(ot);continue}const Je=vt(pt,Qe),We=vt(pt,Qe,!0);if(Je in we&&We in he&&we[Je]!==he[We]){const Pt=ct(Je,We,Qe),wt=Fe(Je,We,pe[Pt].geometry);delete he[Je],delete we[We],we[vt(pt,pe[wt].geometry,!0)]=wt,pe[Pt].geometry=null}else Je in we?Fe(Je,We,Qe):We in he?ct(Je,We,Qe):(Pe(ot),he[Je]=Se-1,we[We]=Se-1)}return pe.filter(ot=>ot.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((oe,he)=>oe.sortKey-he.sortKey)}update(r,l,d){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(r,l,this.layers,d),this.icon.programConfigurations.updatePaintArrays(r,l,this.layers,d))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(r){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(r),this.iconCollisionBox.upload(r)),this.text.upload(r,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(r,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(r,l){const d=this.lineVertexArray.length;if(r.segment!==void 0){let m=r.dist(l[r.segment+1]),v=r.dist(l[r.segment]);const _={};for(let S=r.segment+1;S<l.length;S++)_[S]={x:l[S].x,y:l[S].y,tileUnitDistanceFromAnchor:m},S<l.length-1&&(m+=l[S+1].dist(l[S]));for(let S=r.segment||0;S>=0;S--)_[S]={x:l[S].x,y:l[S].y,tileUnitDistanceFromAnchor:v},S>0&&(v+=l[S-1].dist(l[S]));for(let S=0;S<l.length;S++){const P=_[S];this.lineVertexArray.emplaceBack(P.x,P.y,P.tileUnitDistanceFromAnchor)}}return{lineStartIndex:d,lineLength:this.lineVertexArray.length-d}}addSymbols(r,l,d,m,v,_,S,P,I,D,O,U){const H=r.indexArray,X=r.layoutVertexArray,te=r.segments.prepareSegment(4*l.length,X,H,this.canOverlap?_.sortKey:void 0),oe=this.glyphOffsetArray.length,he=te.vertexLength,we=this.allowVerticalPlacement&&S===o.ai.vertical?Math.PI/2:0,pe=_.text&&_.text.sections;for(let Se=0;Se<l.length;Se++){const{tl:Pe,tr:Fe,bl:ct,br:vt,tex:ot,pixelOffsetTL:it,pixelOffsetBR:Qe,minFontScaleX:pt,minFontScaleY:Je,glyphOffset:We,isSDF:Pt,sectionIndex:wt}=l[Se],Ut=te.vertexLength,_n=We[1];fg(X,P.x,P.y,Pe.x,_n+Pe.y,ot.x,ot.y,d,Pt,it.x,it.y,pt,Je),fg(X,P.x,P.y,Fe.x,_n+Fe.y,ot.x+ot.w,ot.y,d,Pt,Qe.x,it.y,pt,Je),fg(X,P.x,P.y,ct.x,_n+ct.y,ot.x,ot.y+ot.h,d,Pt,it.x,Qe.y,pt,Je),fg(X,P.x,P.y,vt.x,_n+vt.y,ot.x+ot.w,ot.y+ot.h,d,Pt,Qe.x,Qe.y,pt,Je),g_(r.dynamicLayoutVertexArray,P,we),H.emplaceBack(Ut,Ut+1,Ut+2),H.emplaceBack(Ut+1,Ut+2,Ut+3),te.vertexLength+=4,te.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(We[0]),Se!==l.length-1&&wt===l[Se+1].sectionIndex||r.programConfigurations.populatePaintArrays(X.length,_,_.index,{},U,pe&&pe[wt])}r.placedSymbolArray.emplaceBack(P.x,P.y,oe,this.glyphOffsetArray.length-oe,he,I,D,P.segment,d?d[0]:0,d?d[1]:0,m[0],m[1],S,0,!1,0,O)}_addCollisionDebugVertex(r,l,d,m,v,_){return l.emplaceBack(0,0),r.emplaceBack(d.x,d.y,m,v,Math.round(_.x),Math.round(_.y))}addCollisionDebugVertices(r,l,d,m,v,_,S){const P=v.segments.prepareSegment(4,v.layoutVertexArray,v.indexArray),I=P.vertexLength,D=v.layoutVertexArray,O=v.collisionVertexArray,U=S.anchorX,H=S.anchorY;this._addCollisionDebugVertex(D,O,_,U,H,new M(r,l)),this._addCollisionDebugVertex(D,O,_,U,H,new M(d,l)),this._addCollisionDebugVertex(D,O,_,U,H,new M(d,m)),this._addCollisionDebugVertex(D,O,_,U,H,new M(r,m)),P.vertexLength+=4;const X=v.indexArray;X.emplaceBack(I,I+1),X.emplaceBack(I+1,I+2),X.emplaceBack(I+2,I+3),X.emplaceBack(I+3,I),P.primitiveLength+=4}addDebugCollisionBoxes(r,l,d,m){for(let v=r;v<l;v++){const _=this.collisionBoxArray.get(v);this.addCollisionDebugVertices(_.x1,_.y1,_.x2,_.y2,m?this.textCollisionBox:this.iconCollisionBox,_.anchorPoint,d)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new v_(jn,U2.members,sr),this.iconCollisionBox=new v_(jn,U2.members,sr);for(let r=0;r<this.symbolInstances.length;r++){const l=this.symbolInstances.get(r);this.addDebugCollisionBoxes(l.textBoxStartIndex,l.textBoxEndIndex,l,!0),this.addDebugCollisionBoxes(l.verticalTextBoxStartIndex,l.verticalTextBoxEndIndex,l,!0),this.addDebugCollisionBoxes(l.iconBoxStartIndex,l.iconBoxEndIndex,l,!1),this.addDebugCollisionBoxes(l.verticalIconBoxStartIndex,l.verticalIconBoxEndIndex,l,!1)}}_deserializeCollisionBoxesForSymbol(r,l,d,m,v,_,S,P,I){const D={};for(let O=l;O<d;O++){const U=r.get(O);D.textBox={x1:U.x1,y1:U.y1,x2:U.x2,y2:U.y2,anchorPointX:U.anchorPointX,anchorPointY:U.anchorPointY},D.textFeatureIndex=U.featureIndex;break}for(let O=m;O<v;O++){const U=r.get(O);D.verticalTextBox={x1:U.x1,y1:U.y1,x2:U.x2,y2:U.y2,anchorPointX:U.anchorPointX,anchorPointY:U.anchorPointY},D.verticalTextFeatureIndex=U.featureIndex;break}for(let O=_;O<S;O++){const U=r.get(O);D.iconBox={x1:U.x1,y1:U.y1,x2:U.x2,y2:U.y2,anchorPointX:U.anchorPointX,anchorPointY:U.anchorPointY},D.iconFeatureIndex=U.featureIndex;break}for(let O=P;O<I;O++){const U=r.get(O);D.verticalIconBox={x1:U.x1,y1:U.y1,x2:U.x2,y2:U.y2,anchorPointX:U.anchorPointX,anchorPointY:U.anchorPointY},D.verticalIconFeatureIndex=U.featureIndex;break}return D}deserializeCollisionBoxes(r){this.collisionArrays=[];for(let l=0;l<this.symbolInstances.length;l++){const d=this.symbolInstances.get(l);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(r,d.textBoxStartIndex,d.textBoxEndIndex,d.verticalTextBoxStartIndex,d.verticalTextBoxEndIndex,d.iconBoxStartIndex,d.iconBoxEndIndex,d.verticalIconBoxStartIndex,d.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(r,l){const d=r.placedSymbolArray.get(l),m=d.vertexStartIndex+4*d.numGlyphs;for(let v=d.vertexStartIndex;v<m;v+=4)r.indexArray.emplaceBack(v,v+1,v+2),r.indexArray.emplaceBack(v+1,v+2,v+3)}getSortedSymbolIndexes(r){if(this.sortedAngle===r&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const l=Math.sin(r),d=Math.cos(r),m=[],v=[],_=[];for(let S=0;S<this.symbolInstances.length;++S){_.push(S);const P=this.symbolInstances.get(S);m.push(0|Math.round(l*P.anchorX+d*P.anchorY)),v.push(P.featureIndex)}return _.sort((S,P)=>m[S]-m[P]||v[P]-v[S]),_}addToSortKeyRanges(r,l){const d=this.sortKeyRanges[this.sortKeyRanges.length-1];d&&d.sortKey===l?d.symbolInstanceEnd=r+1:this.sortKeyRanges.push({sortKey:l,symbolInstanceStart:r,symbolInstanceEnd:r+1})}sortFeatures(r){if(this.sortFeaturesByY&&this.sortedAngle!==r&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(r),this.sortedAngle=r,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const l of this.symbolInstanceIndexes){const d=this.symbolInstances.get(l);this.featureSortOrder.push(d.featureIndex),[d.rightJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.leftJustifiedTextSymbolIndex].forEach((m,v,_)=>{m>=0&&_.indexOf(m)===v&&this.addIndicesForPlacedSymbol(this.text,m)}),d.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,d.verticalPlacedTextSymbolIndex),d.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,d.placedIconSymbolIndex),d.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,d.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let aT,oT;dt("SymbolBucket",Ju,{omit:["layers","collisionBoxArray","features","compareText"]}),Ju.MAX_GLYPHS=65535,Ju.addDynamicAttributes=g_;var x_={get paint(){return oT=oT||new Zn({"icon-opacity":new Mt(ce.paint_symbol["icon-opacity"]),"icon-color":new Mt(ce.paint_symbol["icon-color"]),"icon-halo-color":new Mt(ce.paint_symbol["icon-halo-color"]),"icon-halo-width":new Mt(ce.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Mt(ce.paint_symbol["icon-halo-blur"]),"icon-translate":new St(ce.paint_symbol["icon-translate"]),"icon-translate-anchor":new St(ce.paint_symbol["icon-translate-anchor"]),"text-opacity":new Mt(ce.paint_symbol["text-opacity"]),"text-color":new Mt(ce.paint_symbol["text-color"],{runtimeType:Br,getOverride:a=>a.textColor,hasOverride:a=>!!a.textColor}),"text-halo-color":new Mt(ce.paint_symbol["text-halo-color"]),"text-halo-width":new Mt(ce.paint_symbol["text-halo-width"]),"text-halo-blur":new Mt(ce.paint_symbol["text-halo-blur"]),"text-translate":new St(ce.paint_symbol["text-translate"]),"text-translate-anchor":new St(ce.paint_symbol["text-translate-anchor"])})},get layout(){return aT=aT||new Zn({"symbol-placement":new St(ce.layout_symbol["symbol-placement"]),"symbol-spacing":new St(ce.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new St(ce.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Mt(ce.layout_symbol["symbol-sort-key"]),"symbol-z-order":new St(ce.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new St(ce.layout_symbol["icon-allow-overlap"]),"icon-overlap":new St(ce.layout_symbol["icon-overlap"]),"icon-ignore-placement":new St(ce.layout_symbol["icon-ignore-placement"]),"icon-optional":new St(ce.layout_symbol["icon-optional"]),"icon-rotation-alignment":new St(ce.layout_symbol["icon-rotation-alignment"]),"icon-size":new Mt(ce.layout_symbol["icon-size"]),"icon-text-fit":new St(ce.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new St(ce.layout_symbol["icon-text-fit-padding"]),"icon-image":new Mt(ce.layout_symbol["icon-image"]),"icon-rotate":new Mt(ce.layout_symbol["icon-rotate"]),"icon-padding":new Mt(ce.layout_symbol["icon-padding"]),"icon-keep-upright":new St(ce.layout_symbol["icon-keep-upright"]),"icon-offset":new Mt(ce.layout_symbol["icon-offset"]),"icon-anchor":new Mt(ce.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new St(ce.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new St(ce.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new St(ce.layout_symbol["text-rotation-alignment"]),"text-field":new Mt(ce.layout_symbol["text-field"]),"text-font":new Mt(ce.layout_symbol["text-font"]),"text-size":new Mt(ce.layout_symbol["text-size"]),"text-max-width":new Mt(ce.layout_symbol["text-max-width"]),"text-line-height":new St(ce.layout_symbol["text-line-height"]),"text-letter-spacing":new Mt(ce.layout_symbol["text-letter-spacing"]),"text-justify":new Mt(ce.layout_symbol["text-justify"]),"text-radial-offset":new Mt(ce.layout_symbol["text-radial-offset"]),"text-variable-anchor":new St(ce.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Mt(ce.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Mt(ce.layout_symbol["text-anchor"]),"text-max-angle":new St(ce.layout_symbol["text-max-angle"]),"text-writing-mode":new St(ce.layout_symbol["text-writing-mode"]),"text-rotate":new Mt(ce.layout_symbol["text-rotate"]),"text-padding":new St(ce.layout_symbol["text-padding"]),"text-keep-upright":new St(ce.layout_symbol["text-keep-upright"]),"text-transform":new Mt(ce.layout_symbol["text-transform"]),"text-offset":new Mt(ce.layout_symbol["text-offset"]),"text-allow-overlap":new St(ce.layout_symbol["text-allow-overlap"]),"text-overlap":new St(ce.layout_symbol["text-overlap"]),"text-ignore-placement":new St(ce.layout_symbol["text-ignore-placement"]),"text-optional":new St(ce.layout_symbol["text-optional"])})}};class lT{constructor(r){if(r.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=r.property.overrides?r.property.overrides.runtimeType:Hs,this.defaultValue=r}evaluate(r){if(r.formattedSection){const l=this.defaultValue.property.overrides;if(l&&l.hasOverride(r.formattedSection))return l.getOverride(r.formattedSection)}return r.feature&&r.featureState?this.defaultValue.evaluate(r.feature,r.featureState):this.defaultValue.property.specification.default}eachChild(r){this.defaultValue.isConstant()||r(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}dt("FormatSectionOverride",lT,{omit:["defaultValue"]});class pg extends Wi{constructor(r){super(r,x_)}recalculate(r,l){if(super.recalculate(r,l),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const d=this.layout.get("text-writing-mode");if(d){const m=[];for(const v of d)m.indexOf(v)<0&&m.push(v);this.layout._values["text-writing-mode"]=m}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(r,l,d,m){const v=this.layout.get(r).evaluate(l,{},d,m),_=this._unevaluatedLayout._values[r];return _.isDataDriven()||Du(_.value)||!v?v:function(S,P){return P.replace(/{([^{}]+)}/g,(I,D)=>S&&D in S?String(S[D]):"")}(l.properties,v)}createBucket(r){return new Ju(r)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const r of x_.paint.overridableProperties){if(!pg.hasPaintOverride(this.layout,r))continue;const l=this.paint.get(r),d=new lT(l),m=new Nd(d,l.property.specification);let v=null;v=l.value.kind==="constant"||l.value.kind==="source"?new Bd("source",m):new zu("composite",m,l.value.zoomStops),this.paint._values[r]=new Vr(l.property,v,l.parameters)}}_handleOverridablePaintPropertyUpdate(r,l,d){return!(!this.layout||l.isDataDriven()||d.isDataDriven())&&pg.hasPaintOverride(this.layout,r)}static hasPaintOverride(r,l){const d=r.get("text-field"),m=x_.paint.properties[l];let v=!1;const _=S=>{for(const P of S)if(m.overrides&&m.overrides.hasOverride(P))return void(v=!0)};if(d.value.kind==="constant"&&d.value.value instanceof Ir)_(d.value.value.sections);else if(d.value.kind==="source"){const S=I=>{v||(I instanceof Qa&&An(I.value)===ie?_(I.value.sections):I instanceof Ru?_(I.sections):I.eachChild(S))},P=d.value;P._styleExpression&&S(P._styleExpression.expression)}return v}}let cT;var d3={get paint(){return cT=cT||new Zn({"background-color":new St(ce.paint_background["background-color"]),"background-pattern":new ef(ce.paint_background["background-pattern"]),"background-opacity":new St(ce.paint_background["background-opacity"])})}};class f3 extends Wi{constructor(r){super(r,d3)}}let uT;var p3={get paint(){return uT=uT||new Zn({"raster-opacity":new St(ce.paint_raster["raster-opacity"]),"raster-hue-rotate":new St(ce.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new St(ce.paint_raster["raster-brightness-min"]),"raster-brightness-max":new St(ce.paint_raster["raster-brightness-max"]),"raster-saturation":new St(ce.paint_raster["raster-saturation"]),"raster-contrast":new St(ce.paint_raster["raster-contrast"]),"raster-resampling":new St(ce.paint_raster["raster-resampling"]),"raster-fade-duration":new St(ce.paint_raster["raster-fade-duration"])})}};class m3 extends Wi{constructor(r){super(r,p3)}}class g3 extends Wi{constructor(r){super(r,{}),this.onAdd=l=>{this.implementation.onAdd&&this.implementation.onAdd(l,l.painter.context.gl)},this.onRemove=l=>{this.implementation.onRemove&&this.implementation.onRemove(l,l.painter.context.gl)},this.implementation=r}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class y3{constructor(r){this._callback=r,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const __=63710088e-1;class ll{constructor(r,l){if(isNaN(r)||isNaN(l))throw new Error(`Invalid LngLat object: (${r}, ${l})`);if(this.lng=+r,this.lat=+l,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new ll(Re(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(r){const l=Math.PI/180,d=this.lat*l,m=r.lat*l,v=Math.sin(d)*Math.sin(m)+Math.cos(d)*Math.cos(m)*Math.cos((r.lng-this.lng)*l);return __*Math.acos(Math.min(v,1))}static convert(r){if(r instanceof ll)return r;if(Array.isArray(r)&&(r.length===2||r.length===3))return new ll(Number(r[0]),Number(r[1]));if(!Array.isArray(r)&&typeof r=="object"&&r!==null)return new ll(Number("lng"in r?r.lng:r.lon),Number(r.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const hT=2*Math.PI*__;function dT(a){return hT*Math.cos(a*Math.PI/180)}function fT(a){return(180+a)/360}function pT(a){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a*Math.PI/360)))/360}function mT(a,r){return a/dT(r)}function gT(a){return 360*a-180}function w_(a){return 360/Math.PI*Math.atan(Math.exp((180-360*a)*Math.PI/180))-90}class mg{constructor(r,l,d=0){this.x=+r,this.y=+l,this.z=+d}static fromLngLat(r,l=0){const d=ll.convert(r);return new mg(fT(d.lng),pT(d.lat),mT(l,d.lat))}toLngLat(){return new ll(gT(this.x),w_(this.y))}toAltitude(){return this.z*dT(w_(this.y))}meterInMercatorCoordinateUnits(){return 1/hT*(r=w_(this.y),1/Math.cos(r*Math.PI/180));var r}}function yT(a,r,l){var d=2*Math.PI*6378137/256/Math.pow(2,l);return[a*d-2*Math.PI*6378137/2,r*d-2*Math.PI*6378137/2]}class b_{constructor(r,l,d){if(r<0||r>25||d<0||d>=Math.pow(2,r)||l<0||l>=Math.pow(2,r))throw new Error(`x=${l}, y=${d}, z=${r} outside of bounds. 0<=x<${Math.pow(2,r)}, 0<=y<${Math.pow(2,r)} 0<=z<=25 `);this.z=r,this.x=l,this.y=d,this.key=Sf(0,r,r,l,d)}equals(r){return this.z===r.z&&this.x===r.x&&this.y===r.y}url(r,l,d){const m=(_=this.y,S=this.z,P=yT(256*(v=this.x),256*(_=Math.pow(2,S)-_-1),S),I=yT(256*(v+1),256*(_+1),S),P[0]+","+P[1]+","+I[0]+","+I[1]);var v,_,S,P,I;const D=function(O,U,H){let X,te="";for(let oe=O;oe>0;oe--)X=1<<oe-1,te+=(U&X?1:0)+(H&X?2:0);return te}(this.z,this.x,this.y);return r[(this.x+this.y)%r.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(d==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,l>1?"@2x":"").replace(/{quadkey}/g,D).replace(/{bbox-epsg-3857}/g,m)}isChildOf(r){const l=this.z-r.z;return l>0&&r.x===this.x>>l&&r.y===this.y>>l}getTilePoint(r){const l=Math.pow(2,this.z);return new M((r.x*l-this.x)*tr,(r.y*l-this.y)*tr)}toString(){return`${this.z}/${this.x}/${this.y}`}}class vT{constructor(r,l){this.wrap=r,this.canonical=l,this.key=Sf(r,l.z,l.z,l.x,l.y)}}class as{constructor(r,l,d,m,v){if(r<d)throw new Error(`overscaledZ should be >= z; overscaledZ = ${r}; z = ${d}`);this.overscaledZ=r,this.wrap=l,this.canonical=new b_(d,+m,+v),this.key=Sf(l,r,d,m,v)}clone(){return new as(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(r){return this.overscaledZ===r.overscaledZ&&this.wrap===r.wrap&&this.canonical.equals(r.canonical)}scaledTo(r){if(r>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${r}; overscaledZ = ${this.overscaledZ}`);const l=this.canonical.z-r;return r>this.canonical.z?new as(r,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new as(r,this.wrap,r,this.canonical.x>>l,this.canonical.y>>l)}calculateScaledKey(r,l){if(r>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${r}; overscaledZ = ${this.overscaledZ}`);const d=this.canonical.z-r;return r>this.canonical.z?Sf(this.wrap*+l,r,this.canonical.z,this.canonical.x,this.canonical.y):Sf(this.wrap*+l,r,r,this.canonical.x>>d,this.canonical.y>>d)}isChildOf(r){if(r.wrap!==this.wrap)return!1;const l=this.canonical.z-r.canonical.z;return r.overscaledZ===0||r.overscaledZ<this.overscaledZ&&r.canonical.x===this.canonical.x>>l&&r.canonical.y===this.canonical.y>>l}children(r){if(this.overscaledZ>=r)return[new as(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const l=this.canonical.z+1,d=2*this.canonical.x,m=2*this.canonical.y;return[new as(l,this.wrap,l,d,m),new as(l,this.wrap,l,d+1,m),new as(l,this.wrap,l,d,m+1),new as(l,this.wrap,l,d+1,m+1)]}isLessThan(r){return this.wrap<r.wrap||!(this.wrap>r.wrap)&&(this.overscaledZ<r.overscaledZ||!(this.overscaledZ>r.overscaledZ)&&(this.canonical.x<r.canonical.x||!(this.canonical.x>r.canonical.x)&&this.canonical.y<r.canonical.y))}wrapped(){return new as(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(r){return new as(this.overscaledZ,r,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new vT(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(r){return this.canonical.getTilePoint(new mg(r.x-this.wrap,r.y))}}function Sf(a,r,l,d,m){(a*=2)<0&&(a=-1*a-1);const v=1<<l;return(v*v*a+v*m+d).toString(36)+l.toString(36)+r.toString(36)}dt("CanonicalTileID",b_),dt("OverscaledTileID",as,{omit:["posMatrix"]});class xT{constructor(r,l,d,m=1,v=1,_=1,S=0){if(this.uid=r,l.height!==l.width)throw new RangeError("DEM tiles must be square");if(d&&!["mapbox","terrarium","custom"].includes(d))return void ut(`"${d}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=l.height;const P=this.dim=l.height-2;switch(this.data=new Uint32Array(l.data.buffer),d){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=m,this.greenFactor=v,this.blueFactor=_,this.baseShift=S;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let I=0;I<P;I++)this.data[this._idx(-1,I)]=this.data[this._idx(0,I)],this.data[this._idx(P,I)]=this.data[this._idx(P-1,I)],this.data[this._idx(I,-1)]=this.data[this._idx(I,0)],this.data[this._idx(I,P)]=this.data[this._idx(I,P-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(P,-1)]=this.data[this._idx(P-1,0)],this.data[this._idx(-1,P)]=this.data[this._idx(0,P-1)],this.data[this._idx(P,P)]=this.data[this._idx(P-1,P-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let I=0;I<P;I++)for(let D=0;D<P;D++){const O=this.get(I,D);O>this.max&&(this.max=O),O<this.min&&(this.min=O)}}get(r,l){const d=new Uint8Array(this.data.buffer),m=4*this._idx(r,l);return this.unpack(d[m],d[m+1],d[m+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(r,l){if(r<-1||r>=this.dim+1||l<-1||l>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(l+1)*this.stride+(r+1)}unpack(r,l,d){return r*this.redFactor+l*this.greenFactor+d*this.blueFactor-this.baseShift}getPixels(){return new ss({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(r,l,d){if(this.dim!==r.dim)throw new Error("dem dimension mismatch");let m=l*this.dim,v=l*this.dim+this.dim,_=d*this.dim,S=d*this.dim+this.dim;switch(l){case-1:m=v-1;break;case 1:v=m+1}switch(d){case-1:_=S-1;break;case 1:S=_+1}const P=-l*this.dim,I=-d*this.dim;for(let D=_;D<S;D++)for(let O=m;O<v;O++)this.data[this._idx(O,D)]=r.data[this._idx(O+P,D+I)]}}dt("DEMData",xT);class _T{constructor(r){this._stringToNumber={},this._numberToString=[];for(let l=0;l<r.length;l++){const d=r[l];this._stringToNumber[d]=l,this._numberToString[l]=d}}encode(r){return this._stringToNumber[r]}decode(r){if(r>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${r} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[r]}}class wT{constructor(r,l,d,m,v){this.type="Feature",this._vectorTileFeature=r,r._z=l,r._x=d,r._y=m,this.properties=r.properties,this.id=v}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(r){this._geometry=r}toJSON(){const r={geometry:this.geometry};for(const l in this)l!=="_geometry"&&l!=="_vectorTileFeature"&&(r[l]=this[l]);return r}}class bT{constructor(r,l){this.tileID=r,this.x=r.canonical.x,this.y=r.canonical.y,this.z=r.canonical.z,this.grid=new el(tr,16,0),this.grid3D=new el(tr,16,0),this.featureIndexArray=new $e,this.promoteId=l}insert(r,l,d,m,v,_){const S=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(d,m,v);const P=_?this.grid3D:this.grid;for(let I=0;I<l.length;I++){const D=l[I],O=[1/0,1/0,-1/0,-1/0];for(let U=0;U<D.length;U++){const H=D[U];O[0]=Math.min(O[0],H.x),O[1]=Math.min(O[1],H.y),O[2]=Math.max(O[2],H.x),O[3]=Math.max(O[3],H.y)}O[0]<tr&&O[1]<tr&&O[2]>=0&&O[3]>=0&&P.insert(S,O[0],O[1],O[2],O[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new sl.VectorTile(new u_(this.rawTileData)).layers,this.sourceLayerCoder=new _T(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(r,l,d,m){this.loadVTLayers();const v=r.params||{},_=tr/r.tileSize/r.scale,S=jd(v.filter),P=r.queryGeometry,I=r.queryPadding*_,D=TT(P),O=this.grid.query(D.minX-I,D.minY-I,D.maxX+I,D.maxY+I),U=TT(r.cameraQueryGeometry),H=this.grid3D.query(U.minX-I,U.minY-I,U.maxX+I,U.maxY+I,(oe,he,we,pe)=>function(Se,Pe,Fe,ct,vt){for(const it of Se)if(Pe<=it.x&&Fe<=it.y&&ct>=it.x&&vt>=it.y)return!0;const ot=[new M(Pe,Fe),new M(Pe,vt),new M(ct,vt),new M(ct,Fe)];if(Se.length>2){for(const it of ot)if(Zu(Se,it))return!0}for(let it=0;it<Se.length-1;it++)if(Kz(Se[it],Se[it+1],ot))return!0;return!1}(r.cameraQueryGeometry,oe-I,he-I,we+I,pe+I));for(const oe of H)O.push(oe);O.sort(v3);const X={};let te;for(let oe=0;oe<O.length;oe++){const he=O[oe];if(he===te)continue;te=he;const we=this.featureIndexArray.get(he);let pe=null;this.loadMatchingFeature(X,we.bucketIndex,we.sourceLayerIndex,we.featureIndex,S,v.layers,v.availableImages,l,d,m,(Se,Pe,Fe)=>(pe||(pe=Ec(Se)),Pe.queryIntersectsFeature(P,Se,Fe,pe,this.z,r.transform,_,r.pixelPosMatrix)))}return X}loadMatchingFeature(r,l,d,m,v,_,S,P,I,D,O){const U=this.bucketLayerIDs[l];if(_&&!function(oe,he){for(let we=0;we<oe.length;we++)if(he.indexOf(oe[we])>=0)return!0;return!1}(_,U))return;const H=this.sourceLayerCoder.decode(d),X=this.vtLayers[H].feature(m);if(v.needGeometry){const oe=Cc(X,!0);if(!v.filter(new vn(this.tileID.overscaledZ),oe,this.tileID.canonical))return}else if(!v.filter(new vn(this.tileID.overscaledZ),X))return;const te=this.getId(X,H);for(let oe=0;oe<U.length;oe++){const he=U[oe];if(_&&_.indexOf(he)<0)continue;const we=P[he];if(!we)continue;let pe={};te&&D&&(pe=D.getState(we.sourceLayer||"_geojsonTileLayer",te));const Se=Te({},I[he]);Se.paint=ST(Se.paint,we.paint,X,pe,S),Se.layout=ST(Se.layout,we.layout,X,pe,S);const Pe=!O||O(X,we,pe);if(!Pe)continue;const Fe=new wT(X,this.z,this.x,this.y,te);Fe.layer=Se;let ct=r[he];ct===void 0&&(ct=r[he]=[]),ct.push({featureIndex:m,feature:Fe,intersectionZ:Pe})}}lookupSymbolFeatures(r,l,d,m,v,_,S,P){const I={};this.loadVTLayers();const D=jd(v);for(const O of r)this.loadMatchingFeature(I,d,m,O,D,_,S,P,l);return I}hasLayer(r){for(const l of this.bucketLayerIDs)for(const d of l)if(r===d)return!0;return!1}getId(r,l){let d=r.id;return this.promoteId&&(d=r.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[l]],typeof d=="boolean"&&(d=Number(d))),d}}function ST(a,r,l,d,m){return ke(a,(v,_)=>{const S=r instanceof qu?r.get(_):null;return S&&S.evaluate?S.evaluate(l,d,m):S})}function TT(a){let r=1/0,l=1/0,d=-1/0,m=-1/0;for(const v of a)r=Math.min(r,v.x),l=Math.min(l,v.y),d=Math.max(d,v.x),m=Math.max(m,v.y);return{minX:r,minY:l,maxX:d,maxY:m}}function v3(a,r){return r-a}function ET(a,r,l,d,m){const v=[];for(let _=0;_<a.length;_++){const S=a[_];let P;for(let I=0;I<S.length-1;I++){let D=S[I],O=S[I+1];D.x<r&&O.x<r||(D.x<r?D=new M(r,D.y+(r-D.x)/(O.x-D.x)*(O.y-D.y))._round():O.x<r&&(O=new M(r,D.y+(r-D.x)/(O.x-D.x)*(O.y-D.y))._round()),D.y<l&&O.y<l||(D.y<l?D=new M(D.x+(l-D.y)/(O.y-D.y)*(O.x-D.x),l)._round():O.y<l&&(O=new M(D.x+(l-D.y)/(O.y-D.y)*(O.x-D.x),l)._round()),D.x>=d&&O.x>=d||(D.x>=d?D=new M(d,D.y+(d-D.x)/(O.x-D.x)*(O.y-D.y))._round():O.x>=d&&(O=new M(d,D.y+(d-D.x)/(O.x-D.x)*(O.y-D.y))._round()),D.y>=m&&O.y>=m||(D.y>=m?D=new M(D.x+(m-D.y)/(O.y-D.y)*(O.x-D.x),m)._round():O.y>=m&&(O=new M(D.x+(m-D.y)/(O.y-D.y)*(O.x-D.x),m)._round()),P&&D.equals(P[P.length-1])||(P=[D],v.push(P)),P.push(O)))))}}return v}dt("FeatureIndex",bT,{omit:["rawTileData","sourceLayerCoder"]});class cl extends M{constructor(r,l,d,m){super(r,l),this.angle=d,m!==void 0&&(this.segment=m)}clone(){return new cl(this.x,this.y,this.angle,this.segment)}}function CT(a,r,l,d,m){if(r.segment===void 0||l===0)return!0;let v=r,_=r.segment+1,S=0;for(;S>-l/2;){if(_--,_<0)return!1;S-=a[_].dist(v),v=a[_]}S+=a[_].dist(a[_+1]),_++;const P=[];let I=0;for(;S<l/2;){const D=a[_],O=a[_+1];if(!O)return!1;let U=a[_-1].angleTo(D)-D.angleTo(O);for(U=Math.abs((U+3*Math.PI)%(2*Math.PI)-Math.PI),P.push({distance:S,angleDelta:U}),I+=U;S-P[0].distance>d;)I-=P.shift().angleDelta;if(I>m)return!1;_++,S+=D.dist(O)}return!0}function PT(a){let r=0;for(let l=0;l<a.length-1;l++)r+=a[l].dist(a[l+1]);return r}function AT(a,r,l){return a?.6*r*l:0}function kT(a,r){return Math.max(a?a.right-a.left:0,r?r.right-r.left:0)}function x3(a,r,l,d,m,v){const _=AT(l,m,v),S=kT(l,d)*v;let P=0;const I=PT(a)/2;for(let D=0;D<a.length-1;D++){const O=a[D],U=a[D+1],H=O.dist(U);if(P+H>I){const X=(I-P)/H,te=wi.number(O.x,U.x,X),oe=wi.number(O.y,U.y,X),he=new cl(te,oe,U.angleTo(O),D);return he._round(),!_||CT(a,he,S,_,r)?he:void 0}P+=H}}function _3(a,r,l,d,m,v,_,S,P){const I=AT(d,v,_),D=kT(d,m),O=D*_,U=a[0].x===0||a[0].x===P||a[0].y===0||a[0].y===P;return r-O<r/4&&(r=O+r/4),IT(a,U?r/2*S%r:(D/2+2*v)*_*S%r,r,I,l,O,U,!1,P)}function IT(a,r,l,d,m,v,_,S,P){const I=v/2,D=PT(a);let O=0,U=r-l,H=[];for(let X=0;X<a.length-1;X++){const te=a[X],oe=a[X+1],he=te.dist(oe),we=oe.angleTo(te);for(;U+l<O+he;){U+=l;const pe=(U-O)/he,Se=wi.number(te.x,oe.x,pe),Pe=wi.number(te.y,oe.y,pe);if(Se>=0&&Se<P&&Pe>=0&&Pe<P&&U-I>=0&&U+I<=D){const Fe=new cl(Se,Pe,we,X);Fe._round(),d&&!CT(a,Fe,v,d,m)||H.push(Fe)}}O+=he}return S||H.length||_||(H=IT(a,O/2,l,d,m,v,_,!0,P)),H}dt("Anchor",cl);const eh=Ci;function MT(a,r,l,d){const m=[],v=a.image,_=v.pixelRatio,S=v.paddedRect.w-2*eh,P=v.paddedRect.h-2*eh,I=a.right-a.left,D=a.bottom-a.top,O=v.stretchX||[[0,S]],U=v.stretchY||[[0,P]],H=(Qe,pt)=>Qe+pt[1]-pt[0],X=O.reduce(H,0),te=U.reduce(H,0),oe=S-X,he=P-te;let we=0,pe=X,Se=0,Pe=te,Fe=0,ct=oe,vt=0,ot=he;if(v.content&&d){const Qe=v.content;we=gg(O,0,Qe[0]),Se=gg(U,0,Qe[1]),pe=gg(O,Qe[0],Qe[2]),Pe=gg(U,Qe[1],Qe[3]),Fe=Qe[0]-we,vt=Qe[1]-Se,ct=Qe[2]-Qe[0]-pe,ot=Qe[3]-Qe[1]-Pe}const it=(Qe,pt,Je,We)=>{const Pt=yg(Qe.stretch-we,pe,I,a.left),wt=vg(Qe.fixed-Fe,ct,Qe.stretch,X),Ut=yg(pt.stretch-Se,Pe,D,a.top),_n=vg(pt.fixed-vt,ot,pt.stretch,te),Pn=yg(Je.stretch-we,pe,I,a.left),lr=vg(Je.fixed-Fe,ct,Je.stretch,X),Ki=yg(We.stretch-Se,Pe,D,a.top),ai=vg(We.fixed-vt,ot,We.stretch,te),nr=new M(Pt,Ut),Sr=new M(Pn,Ut),Dr=new M(Pn,Ki),oi=new M(Pt,Ki),li=new M(wt/_,_n/_),cr=new M(lr/_,ai/_),ur=r*Math.PI/180;if(ur){const Ur=Math.sin(ur),Pi=Math.cos(ur),Ai=[Pi,-Ur,Ur,Pi];nr._matMult(Ai),Sr._matMult(Ai),oi._matMult(Ai),Dr._matMult(Ai)}const $r=Qe.stretch+Qe.fixed,ci=pt.stretch+pt.fixed;return{tl:nr,tr:Sr,bl:oi,br:Dr,tex:{x:v.paddedRect.x+eh+$r,y:v.paddedRect.y+eh+ci,w:Je.stretch+Je.fixed-$r,h:We.stretch+We.fixed-ci},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:li,pixelOffsetBR:cr,minFontScaleX:ct/_/I,minFontScaleY:ot/_/D,isSDF:l}};if(d&&(v.stretchX||v.stretchY)){const Qe=RT(O,oe,X),pt=RT(U,he,te);for(let Je=0;Je<Qe.length-1;Je++){const We=Qe[Je],Pt=Qe[Je+1];for(let wt=0;wt<pt.length-1;wt++)m.push(it(We,pt[wt],Pt,pt[wt+1]))}}else m.push(it({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:S+1},{fixed:0,stretch:P+1}));return m}function gg(a,r,l){let d=0;for(const m of a)d+=Math.max(r,Math.min(l,m[1]))-Math.max(r,Math.min(l,m[0]));return d}function RT(a,r,l){const d=[{fixed:-eh,stretch:0}];for(const[m,v]of a){const _=d[d.length-1];d.push({fixed:m-_.stretch,stretch:_.stretch}),d.push({fixed:m-_.stretch,stretch:_.stretch+(v-m)})}return d.push({fixed:r+eh,stretch:l}),d}function yg(a,r,l,d){return a/r*l+d}function vg(a,r,l,d){return a-r*l/d}class xg{constructor(r,l,d,m,v,_,S,P,I,D){if(this.boxStartIndex=r.length,I){let O=_.top,U=_.bottom;const H=_.collisionPadding;H&&(O-=H[1],U+=H[3]);let X=U-O;X>0&&(X=Math.max(10,X),this.circleDiameter=X)}else{let O=_.top*S-P[0],U=_.bottom*S+P[2],H=_.left*S-P[3],X=_.right*S+P[1];const te=_.collisionPadding;if(te&&(H-=te[0]*S,O-=te[1]*S,X+=te[2]*S,U+=te[3]*S),D){const oe=new M(H,O),he=new M(X,O),we=new M(H,U),pe=new M(X,U),Se=D*Math.PI/180;oe._rotate(Se),he._rotate(Se),we._rotate(Se),pe._rotate(Se),H=Math.min(oe.x,he.x,we.x,pe.x),X=Math.max(oe.x,he.x,we.x,pe.x),O=Math.min(oe.y,he.y,we.y,pe.y),U=Math.max(oe.y,he.y,we.y,pe.y)}r.emplaceBack(l.x,l.y,H,O,X,U,d,m,v)}this.boxEndIndex=r.length}}class w3{constructor(r=[],l=b3){if(this.data=r,this.length=this.data.length,this.compare=l,this.length>0)for(let d=(this.length>>1)-1;d>=0;d--)this._down(d)}push(r){this.data.push(r),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const r=this.data[0],l=this.data.pop();return this.length--,this.length>0&&(this.data[0]=l,this._down(0)),r}peek(){return this.data[0]}_up(r){const{data:l,compare:d}=this,m=l[r];for(;r>0;){const v=r-1>>1,_=l[v];if(d(m,_)>=0)break;l[r]=_,r=v}l[r]=m}_down(r){const{data:l,compare:d}=this,m=this.length>>1,v=l[r];for(;r<m;){let _=1+(r<<1),S=l[_];const P=_+1;if(P<this.length&&d(l[P],S)<0&&(_=P,S=l[P]),d(S,v)>=0)break;l[r]=S,r=_}l[r]=v}}function b3(a,r){return a<r?-1:a>r?1:0}function S3(a,r=1,l=!1){let d=1/0,m=1/0,v=-1/0,_=-1/0;const S=a[0];for(let H=0;H<S.length;H++){const X=S[H];(!H||X.x<d)&&(d=X.x),(!H||X.y<m)&&(m=X.y),(!H||X.x>v)&&(v=X.x),(!H||X.y>_)&&(_=X.y)}const P=Math.min(v-d,_-m);let I=P/2;const D=new w3([],T3);if(P===0)return new M(d,m);for(let H=d;H<v;H+=P)for(let X=m;X<_;X+=P)D.push(new th(H+I,X+I,I,a));let O=function(H){let X=0,te=0,oe=0;const he=H[0];for(let we=0,pe=he.length,Se=pe-1;we<pe;Se=we++){const Pe=he[we],Fe=he[Se],ct=Pe.x*Fe.y-Fe.x*Pe.y;te+=(Pe.x+Fe.x)*ct,oe+=(Pe.y+Fe.y)*ct,X+=3*ct}return new th(te/X,oe/X,0,H)}(a),U=D.length;for(;D.length;){const H=D.pop();(H.d>O.d||!O.d)&&(O=H,l&&console.log("found best %d after %d probes",Math.round(1e4*H.d)/1e4,U)),H.max-O.d<=r||(I=H.h/2,D.push(new th(H.p.x-I,H.p.y-I,I,a)),D.push(new th(H.p.x+I,H.p.y-I,I,a)),D.push(new th(H.p.x-I,H.p.y+I,I,a)),D.push(new th(H.p.x+I,H.p.y+I,I,a)),U+=4)}return l&&(console.log(`num probes: ${U}`),console.log(`best distance: ${O.d}`)),O.p}function T3(a,r){return r.max-a.max}function th(a,r,l,d){this.p=new M(a,r),this.h=l,this.d=function(m,v){let _=!1,S=1/0;for(let P=0;P<v.length;P++){const I=v[P];for(let D=0,O=I.length,U=O-1;D<O;U=D++){const H=I[D],X=I[U];H.y>m.y!=X.y>m.y&&m.x<(X.x-H.x)*(m.y-H.y)/(X.y-H.y)+H.x&&(_=!_),S=Math.min(S,p2(m,H,X))}}return(_?1:-1)*Math.sqrt(S)}(this.p,d),this.max=this.d+this.h*Math.SQRT2}var Rr;o.aq=void 0,(Rr=o.aq||(o.aq={}))[Rr.center=1]="center",Rr[Rr.left=2]="left",Rr[Rr.right=3]="right",Rr[Rr.top=4]="top",Rr[Rr.bottom=5]="bottom",Rr[Rr["top-left"]=6]="top-left",Rr[Rr["top-right"]=7]="top-right",Rr[Rr["bottom-left"]=8]="bottom-left",Rr[Rr["bottom-right"]=9]="bottom-right";const ul=7,S_=Number.POSITIVE_INFINITY;function DT(a,r){return r[1]!==S_?function(l,d,m){let v=0,_=0;switch(d=Math.abs(d),m=Math.abs(m),l){case"top-right":case"top-left":case"top":_=m-ul;break;case"bottom-right":case"bottom-left":case"bottom":_=-m+ul}switch(l){case"top-right":case"bottom-right":case"right":v=-d;break;case"top-left":case"bottom-left":case"left":v=d}return[v,_]}(a,r[0],r[1]):function(l,d){let m=0,v=0;d<0&&(d=0);const _=d/Math.SQRT2;switch(l){case"top-right":case"top-left":v=_-ul;break;case"bottom-right":case"bottom-left":v=-_+ul;break;case"bottom":v=-d+ul;break;case"top":v=d-ul}switch(l){case"top-right":case"bottom-right":m=-_;break;case"top-left":case"bottom-left":m=_;break;case"left":m=d;break;case"right":m=-d}return[m,v]}(a,r[0])}function LT(a,r,l){var d;const m=a.layout,v=(d=m.get("text-variable-anchor-offset"))===null||d===void 0?void 0:d.evaluate(r,{},l);if(v){const S=v.values,P=[];for(let I=0;I<S.length;I+=2){const D=P[I]=S[I],O=S[I+1].map(U=>U*or);D.startsWith("top")?O[1]-=ul:D.startsWith("bottom")&&(O[1]+=ul),P[I+1]=O}return new Ui(P)}const _=m.get("text-variable-anchor");if(_){let S;S=a._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[m.get("text-radial-offset").evaluate(r,{},l)*or,S_]:m.get("text-offset").evaluate(r,{},l).map(I=>I*or);const P=[];for(const I of _)P.push(I,DT(I,S));return new Ui(P)}return null}function T_(a){switch(a){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function E3(a,r,l,d,m,v,_,S,P,I,D){let O=v.textMaxSize.evaluate(r,{});O===void 0&&(O=_);const U=a.layers[0].layout,H=U.get("icon-offset").evaluate(r,{},D),X=OT(l.horizontal),te=_/24,oe=a.tilePixelRatio*te,he=a.tilePixelRatio*O/24,we=a.tilePixelRatio*S,pe=a.tilePixelRatio*U.get("symbol-spacing"),Se=U.get("text-padding")*a.tilePixelRatio,Pe=function(We,Pt,wt,Ut=1){const _n=We.get("icon-padding").evaluate(Pt,{},wt),Pn=_n&&_n.values;return[Pn[0]*Ut,Pn[1]*Ut,Pn[2]*Ut,Pn[3]*Ut]}(U,r,D,a.tilePixelRatio),Fe=U.get("text-max-angle")/180*Math.PI,ct=U.get("text-rotation-alignment")!=="viewport"&&U.get("symbol-placement")!=="point",vt=U.get("icon-rotation-alignment")==="map"&&U.get("symbol-placement")!=="point",ot=U.get("symbol-placement"),it=pe/2,Qe=U.get("icon-text-fit");let pt;d&&Qe!=="none"&&(a.allowVerticalPlacement&&l.vertical&&(pt=iT(d,l.vertical,Qe,U.get("icon-text-fit-padding"),H,te)),X&&(d=iT(d,X,Qe,U.get("icon-text-fit-padding"),H,te)));const Je=(We,Pt)=>{Pt.x<0||Pt.x>=tr||Pt.y<0||Pt.y>=tr||function(wt,Ut,_n,Pn,lr,Ki,ai,nr,Sr,Dr,oi,li,cr,ur,$r,ci,Ur,Pi,Ai,hr,Ht,qr,Lr,dr,Ms){const na=wt.addToLineVertexArray(Ut,_n);let ra,uo,Rs,os,ki=0,ho=0,Cf=0,VT=0,R_=-1,D_=-1;const fo={};let jT=ao("");if(wt.allowVerticalPlacement&&Pn.vertical){const Gr=nr.layout.get("text-rotate").evaluate(Ht,{},dr)+90;Rs=new xg(Sr,Ut,Dr,oi,li,Pn.vertical,cr,ur,$r,Gr),ai&&(os=new xg(Sr,Ut,Dr,oi,li,ai,Ur,Pi,$r,Gr))}if(lr){const Gr=nr.layout.get("icon-rotate").evaluate(Ht,{}),ls=nr.layout.get("icon-text-fit")!=="none",Ac=MT(lr,Gr,Lr,ls),sa=ai?MT(ai,Gr,Lr,ls):void 0;uo=new xg(Sr,Ut,Dr,oi,li,lr,Ur,Pi,!1,Gr),ki=4*Ac.length;const kc=wt.iconSizeData;let Da=null;kc.kind==="source"?(Da=[Ra*nr.layout.get("icon-size").evaluate(Ht,{})],Da[0]>ol&&ut(`${wt.layerIds[0]}: Value for "icon-size" is >= ${bf}. Reduce your "icon-size".`)):kc.kind==="composite"&&(Da=[Ra*qr.compositeIconSizes[0].evaluate(Ht,{},dr),Ra*qr.compositeIconSizes[1].evaluate(Ht,{},dr)],(Da[0]>ol||Da[1]>ol)&&ut(`${wt.layerIds[0]}: Value for "icon-size" is >= ${bf}. Reduce your "icon-size".`)),wt.addSymbols(wt.icon,Ac,Da,hr,Ai,Ht,o.ai.none,Ut,na.lineStartIndex,na.lineLength,-1,dr),R_=wt.icon.placedSymbolArray.length-1,sa&&(ho=4*sa.length,wt.addSymbols(wt.icon,sa,Da,hr,Ai,Ht,o.ai.vertical,Ut,na.lineStartIndex,na.lineLength,-1,dr),D_=wt.icon.placedSymbolArray.length-1)}const $T=Object.keys(Pn.horizontal);for(const Gr of $T){const ls=Pn.horizontal[Gr];if(!ra){jT=ao(ls.text);const sa=nr.layout.get("text-rotate").evaluate(Ht,{},dr);ra=new xg(Sr,Ut,Dr,oi,li,ls,cr,ur,$r,sa)}const Ac=ls.positionedLines.length===1;if(Cf+=zT(wt,Ut,ls,Ki,nr,$r,Ht,ci,na,Pn.vertical?o.ai.horizontal:o.ai.horizontalOnly,Ac?$T:[Gr],fo,R_,qr,dr),Ac)break}Pn.vertical&&(VT+=zT(wt,Ut,Pn.vertical,Ki,nr,$r,Ht,ci,na,o.ai.vertical,["vertical"],fo,D_,qr,dr));const A3=ra?ra.boxStartIndex:wt.collisionBoxArray.length,k3=ra?ra.boxEndIndex:wt.collisionBoxArray.length,I3=Rs?Rs.boxStartIndex:wt.collisionBoxArray.length,M3=Rs?Rs.boxEndIndex:wt.collisionBoxArray.length,R3=uo?uo.boxStartIndex:wt.collisionBoxArray.length,D3=uo?uo.boxEndIndex:wt.collisionBoxArray.length,L3=os?os.boxStartIndex:wt.collisionBoxArray.length,z3=os?os.boxEndIndex:wt.collisionBoxArray.length;let ia=-1;const wg=(Gr,ls)=>Gr&&Gr.circleDiameter?Math.max(Gr.circleDiameter,ls):ls;ia=wg(ra,ia),ia=wg(Rs,ia),ia=wg(uo,ia),ia=wg(os,ia);const UT=ia>-1?1:0;UT&&(ia*=Ms/or),wt.glyphOffsetArray.length>=Ju.MAX_GLYPHS&&ut("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Ht.sortKey!==void 0&&wt.addToSortKeyRanges(wt.symbolInstances.length,Ht.sortKey);const O3=LT(nr,Ht,dr),[F3,N3]=function(Gr,ls){const Ac=Gr.length,sa=ls==null?void 0:ls.values;if((sa==null?void 0:sa.length)>0)for(let kc=0;kc<sa.length;kc+=2){const Da=sa[kc+1];Gr.emplaceBack(o.aq[sa[kc]],Da[0],Da[1])}return[Ac,Gr.length]}(wt.textAnchorOffsets,O3);wt.symbolInstances.emplaceBack(Ut.x,Ut.y,fo.right>=0?fo.right:-1,fo.center>=0?fo.center:-1,fo.left>=0?fo.left:-1,fo.vertical||-1,R_,D_,jT,A3,k3,I3,M3,R3,D3,L3,z3,Dr,Cf,VT,ki,ho,UT,0,cr,ia,F3,N3)}(a,Pt,We,l,d,m,pt,a.layers[0],a.collisionBoxArray,r.index,r.sourceLayerIndex,a.index,oe,[Se,Se,Se,Se],ct,P,we,Pe,vt,H,r,v,I,D,_)};if(ot==="line")for(const We of ET(r.geometry,0,0,tr,tr)){const Pt=_3(We,pe,Fe,l.vertical||X,d,24,he,a.overscaling,tr);for(const wt of Pt)X&&C3(a,X.text,it,wt)||Je(We,wt)}else if(ot==="line-center"){for(const We of r.geometry)if(We.length>1){const Pt=x3(We,Fe,l.vertical||X,d,24,he);Pt&&Je(We,Pt)}}else if(r.type==="Polygon")for(const We of n_(r.geometry,0)){const Pt=S3(We,16);Je(We[0],new cl(Pt.x,Pt.y,0))}else if(r.type==="LineString")for(const We of r.geometry)Je(We,new cl(We[0].x,We[0].y,0));else if(r.type==="Point")for(const We of r.geometry)for(const Pt of We)Je([Pt],new cl(Pt.x,Pt.y,0))}function zT(a,r,l,d,m,v,_,S,P,I,D,O,U,H,X){const te=function(we,pe,Se,Pe,Fe,ct,vt,ot){const it=Pe.layout.get("text-rotate").evaluate(ct,{})*Math.PI/180,Qe=[];for(const pt of pe.positionedLines)for(const Je of pt.positionedGlyphs){if(!Je.rect)continue;const We=Je.rect||{};let Pt=Q2+1,wt=!0,Ut=1,_n=0;const Pn=(Fe||ot)&&Je.vertical,lr=Je.metrics.advance*Je.scale/2;if(ot&&pe.verticalizable&&(_n=pt.lineOffset/2-(Je.imageName?-(or-Je.metrics.width*Je.scale)/2:(Je.scale-1)*or)),Je.imageName){const hr=vt[Je.imageName];wt=hr.sdf,Ut=hr.pixelRatio,Pt=Ci/Ut}const Ki=Fe?[Je.x+lr,Je.y]:[0,0];let ai=Fe?[0,0]:[Je.x+lr+Se[0],Je.y+Se[1]-_n],nr=[0,0];Pn&&(nr=ai,ai=[0,0]);const Sr=Je.metrics.isDoubleResolution?2:1,Dr=(Je.metrics.left-Pt)*Je.scale-lr+ai[0],oi=(-Je.metrics.top-Pt)*Je.scale+ai[1],li=Dr+We.w/Sr*Je.scale/Ut,cr=oi+We.h/Sr*Je.scale/Ut,ur=new M(Dr,oi),$r=new M(li,oi),ci=new M(Dr,cr),Ur=new M(li,cr);if(Pn){const hr=new M(-lr,lr-_f),Ht=-Math.PI/2,qr=or/2-lr,Lr=new M(5-_f-qr,-(Je.imageName?qr:0)),dr=new M(...nr);ur._rotateAround(Ht,hr)._add(Lr)._add(dr),$r._rotateAround(Ht,hr)._add(Lr)._add(dr),ci._rotateAround(Ht,hr)._add(Lr)._add(dr),Ur._rotateAround(Ht,hr)._add(Lr)._add(dr)}if(it){const hr=Math.sin(it),Ht=Math.cos(it),qr=[Ht,-hr,hr,Ht];ur._matMult(qr),$r._matMult(qr),ci._matMult(qr),Ur._matMult(qr)}const Pi=new M(0,0),Ai=new M(0,0);Qe.push({tl:ur,tr:$r,bl:ci,br:Ur,tex:We,writingMode:pe.writingMode,glyphOffset:Ki,sectionIndex:Je.sectionIndex,isSDF:wt,pixelOffsetTL:Pi,pixelOffsetBR:Ai,minFontScaleX:0,minFontScaleY:0})}return Qe}(0,l,S,m,v,_,d,a.allowVerticalPlacement),oe=a.textSizeData;let he=null;oe.kind==="source"?(he=[Ra*m.layout.get("text-size").evaluate(_,{})],he[0]>ol&&ut(`${a.layerIds[0]}: Value for "text-size" is >= ${bf}. Reduce your "text-size".`)):oe.kind==="composite"&&(he=[Ra*H.compositeTextSizes[0].evaluate(_,{},X),Ra*H.compositeTextSizes[1].evaluate(_,{},X)],(he[0]>ol||he[1]>ol)&&ut(`${a.layerIds[0]}: Value for "text-size" is >= ${bf}. Reduce your "text-size".`)),a.addSymbols(a.text,te,he,S,v,_,I,r,P.lineStartIndex,P.lineLength,U,X);for(const we of D)O[we]=a.text.placedSymbolArray.length-1;return 4*te.length}function OT(a){for(const r in a)return a[r];return null}function C3(a,r,l,d){const m=a.compareText;if(r in m){const v=m[r];for(let _=v.length-1;_>=0;_--)if(d.dist(v[_])<l)return!0}else m[r]=[];return m[r].push(d),!1}const FT=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class E_{static from(r){if(!(r instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[l,d]=new Uint8Array(r,0,2);if(l!==219)throw new Error("Data does not appear to be in a KDBush format.");const m=d>>4;if(m!==1)throw new Error(`Got v${m} data when expected v1.`);const v=FT[15&d];if(!v)throw new Error("Unrecognized array type.");const[_]=new Uint16Array(r,2,1),[S]=new Uint32Array(r,4,1);return new E_(S,_,v,r)}constructor(r,l=64,d=Float64Array,m){if(isNaN(r)||r<0)throw new Error(`Unpexpected numItems value: ${r}.`);this.numItems=+r,this.nodeSize=Math.min(Math.max(+l,2),65535),this.ArrayType=d,this.IndexArrayType=r<65536?Uint16Array:Uint32Array;const v=FT.indexOf(this.ArrayType),_=2*r*this.ArrayType.BYTES_PER_ELEMENT,S=r*this.IndexArrayType.BYTES_PER_ELEMENT,P=(8-S%8)%8;if(v<0)throw new Error(`Unexpected typed array class: ${d}.`);m&&m instanceof ArrayBuffer?(this.data=m,this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+S+P,2*r),this._pos=2*r,this._finished=!0):(this.data=new ArrayBuffer(8+_+S+P),this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+S+P,2*r),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+v]),new Uint16Array(this.data,2,1)[0]=l,new Uint32Array(this.data,4,1)[0]=r)}add(r,l){const d=this._pos>>1;return this.ids[d]=d,this.coords[this._pos++]=r,this.coords[this._pos++]=l,d}finish(){const r=this._pos>>1;if(r!==this.numItems)throw new Error(`Added ${r} items when expected ${this.numItems}.`);return C_(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(r,l,d,m){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:v,coords:_,nodeSize:S}=this,P=[0,v.length-1,0],I=[];for(;P.length;){const D=P.pop()||0,O=P.pop()||0,U=P.pop()||0;if(O-U<=S){for(let oe=U;oe<=O;oe++){const he=_[2*oe],we=_[2*oe+1];he>=r&&he<=d&&we>=l&&we<=m&&I.push(v[oe])}continue}const H=U+O>>1,X=_[2*H],te=_[2*H+1];X>=r&&X<=d&&te>=l&&te<=m&&I.push(v[H]),(D===0?r<=X:l<=te)&&(P.push(U),P.push(H-1),P.push(1-D)),(D===0?d>=X:m>=te)&&(P.push(H+1),P.push(O),P.push(1-D))}return I}within(r,l,d){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:m,coords:v,nodeSize:_}=this,S=[0,m.length-1,0],P=[],I=d*d;for(;S.length;){const D=S.pop()||0,O=S.pop()||0,U=S.pop()||0;if(O-U<=_){for(let oe=U;oe<=O;oe++)BT(v[2*oe],v[2*oe+1],r,l)<=I&&P.push(m[oe]);continue}const H=U+O>>1,X=v[2*H],te=v[2*H+1];BT(X,te,r,l)<=I&&P.push(m[H]),(D===0?r-d<=X:l-d<=te)&&(S.push(U),S.push(H-1),S.push(1-D)),(D===0?r+d>=X:l+d>=te)&&(S.push(H+1),S.push(O),S.push(1-D))}return P}}function C_(a,r,l,d,m,v){if(m-d<=l)return;const _=d+m>>1;NT(a,r,_,d,m,v),C_(a,r,l,d,_-1,1-v),C_(a,r,l,_+1,m,1-v)}function NT(a,r,l,d,m,v){for(;m>d;){if(m-d>600){const I=m-d+1,D=l-d+1,O=Math.log(I),U=.5*Math.exp(2*O/3),H=.5*Math.sqrt(O*U*(I-U)/I)*(D-I/2<0?-1:1);NT(a,r,l,Math.max(d,Math.floor(l-D*U/I+H)),Math.min(m,Math.floor(l+(I-D)*U/I+H)),v)}const _=r[2*l+v];let S=d,P=m;for(Tf(a,r,d,l),r[2*m+v]>_&&Tf(a,r,d,m);S<P;){for(Tf(a,r,S,P),S++,P--;r[2*S+v]<_;)S++;for(;r[2*P+v]>_;)P--}r[2*d+v]===_?Tf(a,r,d,P):(P++,Tf(a,r,P,m)),P<=l&&(d=P+1),l<=P&&(m=P-1)}}function Tf(a,r,l,d){P_(a,l,d),P_(r,2*l,2*d),P_(r,2*l+1,2*d+1)}function P_(a,r,l){const d=a[r];a[r]=a[l],a[l]=d}function BT(a,r,l,d){const m=a-l,v=r-d;return m*m+v*v}var A_;o.bh=void 0,(A_=o.bh||(o.bh={})).create="create",A_.load="load",A_.fullLoad="fullLoad";let _g=null,Ef=[];const k_=1e3/60,I_="loadTime",M_="fullLoadTime",P3={mark(a){performance.mark(a)},frame(a){const r=a;_g!=null&&Ef.push(r-_g),_g=r},clearMetrics(){_g=null,Ef=[],performance.clearMeasures(I_),performance.clearMeasures(M_);for(const a in o.bh)performance.clearMarks(o.bh[a])},getPerformanceMetrics(){performance.measure(I_,o.bh.create,o.bh.load),performance.measure(M_,o.bh.create,o.bh.fullLoad);const a=performance.getEntriesByName(I_)[0].duration,r=performance.getEntriesByName(M_)[0].duration,l=Ef.length,d=1/(Ef.reduce((v,_)=>v+_,0)/l/1e3),m=Ef.filter(v=>v>k_).reduce((v,_)=>v+(_-k_)/k_,0);return{loadTime:a,fullLoadTime:r,fps:d,percentDroppedFrames:m/(l+m)*100,totalFrames:l}}};o.$=function(a,r,l){var d,m,v,_,S,P,I,D,O,U,H,X,te=l[0],oe=l[1],he=l[2];return r===a?(a[12]=r[0]*te+r[4]*oe+r[8]*he+r[12],a[13]=r[1]*te+r[5]*oe+r[9]*he+r[13],a[14]=r[2]*te+r[6]*oe+r[10]*he+r[14],a[15]=r[3]*te+r[7]*oe+r[11]*he+r[15]):(m=r[1],v=r[2],_=r[3],S=r[4],P=r[5],I=r[6],D=r[7],O=r[8],U=r[9],H=r[10],X=r[11],a[0]=d=r[0],a[1]=m,a[2]=v,a[3]=_,a[4]=S,a[5]=P,a[6]=I,a[7]=D,a[8]=O,a[9]=U,a[10]=H,a[11]=X,a[12]=d*te+S*oe+O*he+r[12],a[13]=m*te+P*oe+U*he+r[13],a[14]=v*te+I*oe+H*he+r[14],a[15]=_*te+D*oe+X*he+r[15]),a},o.A=Wu,o.B=wi,o.C=class{constructor(a,r,l){this.receive=d=>{const m=d.data,v=m.id;if(v&&(!m.targetMapId||this.mapId===m.targetMapId))if(m.type==="<cancel>"){delete this.tasks[v];const _=this.cancelCallbacks[v];delete this.cancelCallbacks[v],_&&_()}else Ue()||m.mustQueue?(this.tasks[v]=m,this.taskQueue.push(v),this.invoker.trigger()):this.processTask(v,m)},this.process=()=>{if(!this.taskQueue.length)return;const d=this.taskQueue.shift(),m=this.tasks[d];delete this.tasks[d],this.taskQueue.length&&this.invoker.trigger(),m&&this.processTask(d,m)},this.target=a,this.parent=r,this.mapId=l,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},this.invoker=new y3(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=Ue()?a:window}send(a,r,l,d,m=!1){const v=Math.round(1e18*Math.random()).toString(36).substring(0,10);l&&(this.callbacks[v]=l);const _=[],S={id:v,type:a,hasCallback:!!l,targetMapId:d,mustQueue:m,sourceMapId:this.mapId,data:ka(r,_)};return this.target.postMessage(S,{transfer:_}),{cancel:()=>{l&&delete this.callbacks[v],this.target.postMessage({id:v,type:"<cancel>",targetMapId:d,sourceMapId:this.mapId})}}}processTask(a,r){if(r.type==="<response>"){const l=this.callbacks[a];delete this.callbacks[a],l&&(r.error?l(tl(r.error)):l(null,tl(r.data)))}else{let l=!1;const d=[],m=r.hasCallback?(S,P)=>{l=!0,delete this.cancelCallbacks[a];const I={id:a,type:"<response>",sourceMapId:this.mapId,error:S?ka(S):null,data:ka(P,d)};this.target.postMessage(I,{transfer:d})}:S=>{l=!0};let v=null;const _=tl(r.data);if(this.parent[r.type])v=this.parent[r.type](r.sourceMapId,_,m);else if("getWorkerSource"in this.parent){const S=r.type.split(".");v=this.parent.getWorkerSource(r.sourceMapId,S[0],_.source)[S[1]](_,m)}else m(new Error(`Could not find function ${r.type}`));!l&&v&&v.cancel&&(this.cancelCallbacks[a]=v.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},o.D=St,o.E=Me,o.F=function(a,r){const l={};for(let d=0;d<r.length;d++){const m=r[d];m in a&&(l[m]=a[m])}return l},o.G=fT,o.H=pT,o.I=d_,o.J=F,o.K=W,o.L=ll,o.M=zt,o.N=tr,o.O=as,o.P=M,o.Q=Mn,o.R=ss,o.S=xn,o.T=Km,o.U=mg,o.V=class extends io{},o.W=b_,o.X=function(a,r){const l=window.document.createElement("video");l.muted=!0,l.onloadstart=function(){r(null,l)};for(let d=0;d<a.length;d++){const m=window.document.createElement("source");Vi(a[d])||(l.crossOrigin="Anonymous"),m.src=a[d],l.appendChild(m)}return{cancel:()=>{}}},o.Y=Ke,o.Z=function(){var a=new Wu(16);return Wu!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=0,a[12]=0,a[13]=0,a[14]=0),a[0]=1,a[5]=1,a[10]=1,a[15]=1,a},o._=w,o.a=Xe,o.a$=class extends G{},o.a0=function(a,r,l){var d=l[0],m=l[1],v=l[2];return a[0]=r[0]*d,a[1]=r[1]*d,a[2]=r[2]*d,a[3]=r[3]*d,a[4]=r[4]*m,a[5]=r[5]*m,a[6]=r[6]*m,a[7]=r[7]*m,a[8]=r[8]*v,a[9]=r[9]*v,a[10]=r[10]*v,a[11]=r[11]*v,a[12]=r[12],a[13]=r[13],a[14]=r[14],a[15]=r[15],a},o.a1=v2,o.a2=function(){return Ne++},o.a3=se,o.a4=Ju,o.a5=function(){Ti.isLoading()||Ti.isLoaded()||Yd()!=="deferred"||Hm()},o.a6=jd,o.a7=Cc,o.a8=vn,o.a9=wT,o.aA=_c,o.aB=function(a){a=a.slice();const r=Object.create(null);for(let l=0;l<a.length;l++)r[a[l].id]=a[l];for(let l=0;l<a.length;l++)"ref"in a[l]&&(a[l]=nt(a[l],r[a[l].ref]));return a},o.aC=function(a){if(a.type==="custom")return new g3(a);switch(a.type){case"background":return new f3(a);case"circle":return new Yz(a);case"fill":return new vO(a);case"fill-extrusion":return new DO(a);case"heatmap":return new eO(a);case"hillshade":return new nO(a);case"line":return new jO(a);case"raster":return new m3(a);case"symbol":return new pg(a)}},o.aD=je,o.aE=function(a,r){if(!a)return[{command:et.setStyle,args:[r]}];let l=[];try{if(!qe(a.version,r.version))return[{command:et.setStyle,args:[r]}];qe(a.center,r.center)||l.push({command:et.setCenter,args:[r.center]}),qe(a.zoom,r.zoom)||l.push({command:et.setZoom,args:[r.zoom]}),qe(a.bearing,r.bearing)||l.push({command:et.setBearing,args:[r.bearing]}),qe(a.pitch,r.pitch)||l.push({command:et.setPitch,args:[r.pitch]}),qe(a.sprite,r.sprite)||l.push({command:et.setSprite,args:[r.sprite]}),qe(a.glyphs,r.glyphs)||l.push({command:et.setGlyphs,args:[r.glyphs]}),qe(a.transition,r.transition)||l.push({command:et.setTransition,args:[r.transition]}),qe(a.light,r.light)||l.push({command:et.setLight,args:[r.light]});const d={},m=[];(function(_,S,P,I){let D;for(D in S=S||{},_=_||{})Object.prototype.hasOwnProperty.call(_,D)&&(Object.prototype.hasOwnProperty.call(S,D)||Tn(D,P,I));for(D in S)Object.prototype.hasOwnProperty.call(S,D)&&(Object.prototype.hasOwnProperty.call(_,D)?qe(_[D],S[D])||(_[D].type==="geojson"&&S[D].type==="geojson"&&rs(_,S,D)?P.push({command:et.setGeoJSONSourceData,args:[D,S[D].data]}):Dn(D,S,P,I)):Gt(D,S,P))})(a.sources,r.sources,m,d);const v=[];a.layers&&a.layers.forEach(_=>{d[_.source]?l.push({command:et.removeLayer,args:[_.id]}):v.push(_)}),l=l.concat(m),function(_,S,P){S=S||[];const I=(_=_||[]).map(ji),D=S.map(ji),O=_.reduce(is,{}),U=S.reduce(is,{}),H=I.slice(),X=Object.create(null);let te,oe,he,we,pe,Se,Pe;for(te=0,oe=0;te<I.length;te++)he=I[te],Object.prototype.hasOwnProperty.call(U,he)?oe++:(P.push({command:et.removeLayer,args:[he]}),H.splice(H.indexOf(he,oe),1));for(te=0,oe=0;te<D.length;te++)he=D[D.length-1-te],H[H.length-1-te]!==he&&(Object.prototype.hasOwnProperty.call(O,he)?(P.push({command:et.removeLayer,args:[he]}),H.splice(H.lastIndexOf(he,H.length-oe),1)):oe++,Se=H[H.length-te],P.push({command:et.addLayer,args:[U[he],Se]}),H.splice(H.length-te,0,he),X[he]=!0);for(te=0;te<D.length;te++)if(he=D[te],we=O[he],pe=U[he],!X[he]&&!qe(we,pe))if(qe(we.source,pe.source)&&qe(we["source-layer"],pe["source-layer"])&&qe(we.type,pe.type)){for(Pe in Ta(we.layout,pe.layout,P,he,null,et.setLayoutProperty),Ta(we.paint,pe.paint,P,he,null,et.setPaintProperty),qe(we.filter,pe.filter)||P.push({command:et.setFilter,args:[he,pe.filter]}),qe(we.minzoom,pe.minzoom)&&qe(we.maxzoom,pe.maxzoom)||P.push({command:et.setLayerZoomRange,args:[he,pe.minzoom,pe.maxzoom]}),we)Object.prototype.hasOwnProperty.call(we,Pe)&&Pe!=="layout"&&Pe!=="paint"&&Pe!=="filter"&&Pe!=="metadata"&&Pe!=="minzoom"&&Pe!=="maxzoom"&&(Pe.indexOf("paint.")===0?Ta(we[Pe],pe[Pe],P,he,Pe.slice(6),et.setPaintProperty):qe(we[Pe],pe[Pe])||P.push({command:et.setLayerProperty,args:[he,Pe,pe[Pe]]}));for(Pe in pe)Object.prototype.hasOwnProperty.call(pe,Pe)&&!Object.prototype.hasOwnProperty.call(we,Pe)&&Pe!=="layout"&&Pe!=="paint"&&Pe!=="filter"&&Pe!=="metadata"&&Pe!=="minzoom"&&Pe!=="maxzoom"&&(Pe.indexOf("paint.")===0?Ta(we[Pe],pe[Pe],P,he,Pe.slice(6),et.setPaintProperty):qe(we[Pe],pe[Pe])||P.push({command:et.setLayerProperty,args:[he,Pe,pe[Pe]]}))}else P.push({command:et.removeLayer,args:[he]}),Se=H[H.lastIndexOf(he)+1],P.push({command:et.addLayer,args:[pe,Se]})}(v,r.layers,l)}catch(d){console.warn("Unable to compute style diff:",d),l=[{command:et.setStyle,args:[r]}]}return l},o.aF=function(a){const r=[],l=a.id;return l===void 0&&r.push({message:`layers.${l}: missing required property "id"`}),a.render===void 0&&r.push({message:`layers.${l}: missing required method "render"`}),a.renderingMode&&a.renderingMode!=="2d"&&a.renderingMode!=="3d"&&r.push({message:`layers.${l}: property "renderingMode" must be either "2d" or "3d"`}),r},o.aG=function a(r,l){if(Array.isArray(r)){if(!Array.isArray(l)||r.length!==l.length)return!1;for(let d=0;d<r.length;d++)if(!a(r[d],l[d]))return!1;return!0}if(typeof r=="object"&&r!==null&&l!==null){if(typeof l!="object"||Object.keys(r).length!==Object.keys(l).length)return!1;for(const d in r)if(!a(r[d],l[d]))return!1;return!0}return r===l},o.aH=ke,o.aI=ft,o.aJ=wc,o.aK=function(a){return a({pluginStatus:ri,pluginURL:Ia}),wc.on("pluginStateChange",a),a},o.aL=class extends oo{constructor(a,r){super(a,r),this.current=0}set(a){this.current!==a&&(this.current=a,this.gl.uniform1i(this.location,a))}},o.aM=Gu,o.aN=class extends oo{constructor(a,r){super(a,r),this.current=qx}set(a){if(a[12]!==this.current[12]||a[0]!==this.current[0])return this.current=a,void this.gl.uniformMatrix4fv(this.location,!1,a);for(let r=1;r<16;r++)if(a[r]!==this.current[r]){this.current=a,this.gl.uniformMatrix4fv(this.location,!1,a);break}}},o.aO=Jm,o.aP=class extends oo{constructor(a,r){super(a,r),this.current=[0,0,0]}set(a){a[0]===this.current[0]&&a[1]===this.current[1]&&a[2]===this.current[2]||(this.current=a,this.gl.uniform3f(this.location,a[0],a[1],a[2]))}},o.aQ=class extends oo{constructor(a,r){super(a,r),this.current=[0,0]}set(a){a[0]===this.current[0]&&a[1]===this.current[1]||(this.current=a,this.gl.uniform2f(this.location,a[0],a[1]))}},o.aR=eg,o.aS=function(a,r,l,d,m,v,_){var S=1/(r-l),P=1/(d-m),I=1/(v-_);return a[0]=-2*S,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*P,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*I,a[11]=0,a[12]=(r+l)*S,a[13]=(m+d)*P,a[14]=(_+v)*I,a[15]=1,a},o.aT=un,o.aU=Qz,o.aV=class extends p{},o.aW=GO,o.aX=class extends x{},o.aY=function(a){return a<=1?1:Math.pow(2,Math.ceil(Math.log(a)/Math.LN2))},o.aZ=S2,o.a_=He,o.aa=function(a){const r={};if(a.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(l,d,m,v)=>{const _=m||v;return r[d]=!_||_.toLowerCase(),""}),r["max-age"]){const l=parseInt(r["max-age"],10);isNaN(l)?delete r["max-age"]:r["max-age"]=l}return r},o.ab=function(a,r){const l=[];for(const d in a)d in r||l.push(d);return l},o.ac=function(a){if(De==null){const r=a.navigator?a.navigator.userAgent:null;De=!!a.safari||!(!r||!(/\b(iPad|iPhone|iPod)\b/.test(r)||r.match("Safari")&&!r.match("Chrome")))}return De},o.ad=Ee,o.ae=function(a,r,l){var d=Math.sin(l),m=Math.cos(l),v=r[0],_=r[1],S=r[2],P=r[3],I=r[4],D=r[5],O=r[6],U=r[7];return r!==a&&(a[8]=r[8],a[9]=r[9],a[10]=r[10],a[11]=r[11],a[12]=r[12],a[13]=r[13],a[14]=r[14],a[15]=r[15]),a[0]=v*m+I*d,a[1]=_*m+D*d,a[2]=S*m+O*d,a[3]=P*m+U*d,a[4]=I*m-v*d,a[5]=D*m-_*d,a[6]=O*m-S*d,a[7]=U*m-P*d,a},o.af=function(a){var r=new Wu(16);return r[0]=a[0],r[1]=a[1],r[2]=a[2],r[3]=a[3],r[4]=a[4],r[5]=a[5],r[6]=a[6],r[7]=a[7],r[8]=a[8],r[9]=a[9],r[10]=a[10],r[11]=a[11],r[12]=a[12],r[13]=a[13],r[14]=a[14],r[15]=a[15],r},o.ag=ig,o.ah=function(a,r){let l=0,d=0;if(a.kind==="constant")d=a.layoutSize;else if(a.kind!=="source"){const{interpolationType:m,minZoom:v,maxZoom:_}=a,S=m?Ee(bi.interpolationFactor(m,r,v,_),0,1):0;a.kind==="camera"?d=wi.number(a.minSize,a.maxSize,S):l=S}return{uSizeT:l,uSize:d}},o.aj=function(a,{uSize:r,uSizeT:l},{lowerSize:d,upperSize:m}){return a.kind==="source"?d/Ra:a.kind==="composite"?wi.number(d/Ra,m/Ra,l):r},o.ak=g_,o.al=function(a,r,l,d){const m=r.y-a.y,v=r.x-a.x,_=d.y-l.y,S=d.x-l.x,P=_*v-S*m;if(P===0)return null;const I=(S*(a.y-l.y)-_*(a.x-l.x))/P;return new M(a.x+I*v,a.y+I*m)},o.am=ET,o.an=d2,o.ao=Kx,o.ap=or,o.ar=m_,o.as=function(a,r){var l=r[0],d=r[1],m=r[2],v=r[3],_=r[4],S=r[5],P=r[6],I=r[7],D=r[8],O=r[9],U=r[10],H=r[11],X=r[12],te=r[13],oe=r[14],he=r[15],we=l*S-d*_,pe=l*P-m*_,Se=l*I-v*_,Pe=d*P-m*S,Fe=d*I-v*S,ct=m*I-v*P,vt=D*te-O*X,ot=D*oe-U*X,it=D*he-H*X,Qe=O*oe-U*te,pt=O*he-H*te,Je=U*he-H*oe,We=we*Je-pe*pt+Se*Qe+Pe*it-Fe*ot+ct*vt;return We?(a[0]=(S*Je-P*pt+I*Qe)*(We=1/We),a[1]=(m*pt-d*Je-v*Qe)*We,a[2]=(te*ct-oe*Fe+he*Pe)*We,a[3]=(U*Fe-O*ct-H*Pe)*We,a[4]=(P*it-_*Je-I*ot)*We,a[5]=(l*Je-m*it+v*ot)*We,a[6]=(oe*Se-X*ct-he*pe)*We,a[7]=(D*ct-U*Se+H*pe)*We,a[8]=(_*pt-S*it+I*vt)*We,a[9]=(d*it-l*pt-v*vt)*We,a[10]=(X*Fe-te*Se+he*we)*We,a[11]=(O*Se-D*Fe-H*we)*We,a[12]=(S*ot-_*Qe-P*vt)*We,a[13]=(l*Qe-d*ot+m*vt)*We,a[14]=(te*pe-X*Pe-oe*we)*We,a[15]=(D*Pe-O*pe+U*we)*We,a):null},o.at=T_,o.au=p_,o.av=E_,o.aw=function(){const a={},r=ce.$version;for(const l in ce.$root){const d=ce.$root[l];if(d.required){let m=null;m=l==="version"?r:d.type==="array"?[]:{},m!=null&&(a[l]=m)}}return a},o.ax=et,o.ay=qm,o.az=ei,o.b=function(a,r){const l=new Blob([new Uint8Array(a)],{type:"image/png"});createImageBitmap(l).then(d=>{r(null,d)}).catch(d=>{r(new Error(`Could not load image because of ${d.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})},o.b0=wr,o.b1=function(a,r){var l=a[0],d=a[1],m=a[2],v=a[3],_=a[4],S=a[5],P=a[6],I=a[7],D=a[8],O=a[9],U=a[10],H=a[11],X=a[12],te=a[13],oe=a[14],he=a[15],we=r[0],pe=r[1],Se=r[2],Pe=r[3],Fe=r[4],ct=r[5],vt=r[6],ot=r[7],it=r[8],Qe=r[9],pt=r[10],Je=r[11],We=r[12],Pt=r[13],wt=r[14],Ut=r[15];return Math.abs(l-we)<=si*Math.max(1,Math.abs(l),Math.abs(we))&&Math.abs(d-pe)<=si*Math.max(1,Math.abs(d),Math.abs(pe))&&Math.abs(m-Se)<=si*Math.max(1,Math.abs(m),Math.abs(Se))&&Math.abs(v-Pe)<=si*Math.max(1,Math.abs(v),Math.abs(Pe))&&Math.abs(_-Fe)<=si*Math.max(1,Math.abs(_),Math.abs(Fe))&&Math.abs(S-ct)<=si*Math.max(1,Math.abs(S),Math.abs(ct))&&Math.abs(P-vt)<=si*Math.max(1,Math.abs(P),Math.abs(vt))&&Math.abs(I-ot)<=si*Math.max(1,Math.abs(I),Math.abs(ot))&&Math.abs(D-it)<=si*Math.max(1,Math.abs(D),Math.abs(it))&&Math.abs(O-Qe)<=si*Math.max(1,Math.abs(O),Math.abs(Qe))&&Math.abs(U-pt)<=si*Math.max(1,Math.abs(U),Math.abs(pt))&&Math.abs(H-Je)<=si*Math.max(1,Math.abs(H),Math.abs(Je))&&Math.abs(X-We)<=si*Math.max(1,Math.abs(X),Math.abs(We))&&Math.abs(te-Pt)<=si*Math.max(1,Math.abs(te),Math.abs(Pt))&&Math.abs(oe-wt)<=si*Math.max(1,Math.abs(oe),Math.abs(wt))&&Math.abs(he-Ut)<=si*Math.max(1,Math.abs(he),Math.abs(Ut))},o.b2=function(a,r){return a[0]=r[0],a[1]=r[1],a[2]=r[2],a[3]=r[3],a[4]=r[4],a[5]=r[5],a[6]=r[6],a[7]=r[7],a[8]=r[8],a[9]=r[9],a[10]=r[10],a[11]=r[11],a[12]=r[12],a[13]=r[13],a[14]=r[14],a[15]=r[15],a},o.b3=function(a,r,l){return a[0]=r[0]*l[0],a[1]=r[1]*l[1],a[2]=r[2]*l[2],a[3]=r[3]*l[3],a},o.b4=function(a,r){return a[0]*r[0]+a[1]*r[1]+a[2]*r[2]+a[3]*r[3]},o.b5=Re,o.b6=vT,o.b7=mT,o.b8=function(a,r,l,d,m){var v,_=1/Math.tan(r/2);return a[0]=_/l,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=_,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=-1,a[12]=0,a[13]=0,a[15]=0,m!=null&&m!==1/0?(a[10]=(m+d)*(v=1/(d-m)),a[14]=2*m*d*v):(a[10]=-1,a[14]=-2*d),a},o.b9=function(a,r,l){var d=Math.sin(l),m=Math.cos(l),v=r[4],_=r[5],S=r[6],P=r[7],I=r[8],D=r[9],O=r[10],U=r[11];return r!==a&&(a[0]=r[0],a[1]=r[1],a[2]=r[2],a[3]=r[3],a[12]=r[12],a[13]=r[13],a[14]=r[14],a[15]=r[15]),a[4]=v*m+I*d,a[5]=_*m+D*d,a[6]=S*m+O*d,a[7]=P*m+U*d,a[8]=I*m-v*d,a[9]=D*m-_*d,a[10]=O*m-S*d,a[11]=U*m-P*d,a},o.bA=A,o.bB=q2,o.bC=Lu,o.bD=Ti,o.ba=Q,o.bb=fe,o.bc=function(a,r){return a[0]=r[0],a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=r[1],a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=r[2],a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},o.bd=class extends Tc{},o.be=__,o.bf=gT,o.bg=P3,o.bi=Bi,o.bj=function(a,r,l=!1){if(ri===Wd||ri===Hd||ri===Kd)throw new Error("setRTLTextPlugin cannot be called multiple times.");Ia=gr.resolveURL(a),ri=Wd,Xd=r,Qd(),l||Hm()},o.bk=Yd,o.bl=function(a,r){const l={};for(let m=0;m<a.length;m++){const v=r&&r[a[m].id]||Nu(a[m]);r&&(r[a[m].id]=v);let _=l[v];_||(_=l[v]=[]),_.push(a[m])}const d=[];for(const m in l)d.push(l[m]);return d},o.bm=dt,o.bn=_T,o.bo=bT,o.bp=J2,o.bq=function(a){a.bucket.createArrays(),a.bucket.tilePixelRatio=tr/(512*a.bucket.overscaling),a.bucket.compareText={},a.bucket.iconsNeedLinear=!1;const r=a.bucket.layers[0],l=r.layout,d=r._unevaluatedLayout._values,m={layoutIconSize:d["icon-size"].possiblyEvaluate(new vn(a.bucket.zoom+1),a.canonical),layoutTextSize:d["text-size"].possiblyEvaluate(new vn(a.bucket.zoom+1),a.canonical),textMaxSize:d["text-size"].possiblyEvaluate(new vn(18))};if(a.bucket.textSizeData.kind==="composite"){const{minZoom:I,maxZoom:D}=a.bucket.textSizeData;m.compositeTextSizes=[d["text-size"].possiblyEvaluate(new vn(I),a.canonical),d["text-size"].possiblyEvaluate(new vn(D),a.canonical)]}if(a.bucket.iconSizeData.kind==="composite"){const{minZoom:I,maxZoom:D}=a.bucket.iconSizeData;m.compositeIconSizes=[d["icon-size"].possiblyEvaluate(new vn(I),a.canonical),d["icon-size"].possiblyEvaluate(new vn(D),a.canonical)]}const v=l.get("text-line-height")*or,_=l.get("text-rotation-alignment")!=="viewport"&&l.get("symbol-placement")!=="point",S=l.get("text-keep-upright"),P=l.get("text-size");for(const I of a.bucket.features){const D=l.get("text-font").evaluate(I,{},a.canonical).join(","),O=P.evaluate(I,{},a.canonical),U=m.layoutTextSize.evaluate(I,{},a.canonical),H=m.layoutIconSize.evaluate(I,{},a.canonical),X={horizontal:{},vertical:void 0},te=I.text;let oe,he=[0,0];if(te){const Se=te.toString(),Pe=l.get("text-letter-spacing").evaluate(I,{},a.canonical)*or,Fe=Gd(Se)?Pe:0,ct=l.get("text-anchor").evaluate(I,{},a.canonical),vt=LT(r,I,a.canonical);if(!vt){const Je=l.get("text-radial-offset").evaluate(I,{},a.canonical);he=Je?DT(ct,[Je*or,S_]):l.get("text-offset").evaluate(I,{},a.canonical).map(We=>We*or)}let ot=_?"center":l.get("text-justify").evaluate(I,{},a.canonical);const it=l.get("symbol-placement"),Qe=it==="point"?l.get("text-max-width").evaluate(I,{},a.canonical)*or:0,pt=()=>{a.bucket.allowVerticalPlacement&&qd(Se)&&(X.vertical=hg(te,a.glyphMap,a.glyphPositions,a.imagePositions,D,Qe,v,ct,"left",Fe,he,o.ai.vertical,!0,it,U,O))};if(!_&&vt){const Je=new Set;if(ot==="auto")for(let Pt=0;Pt<vt.values.length;Pt+=2)Je.add(T_(vt.values[Pt]));else Je.add(ot);let We=!1;for(const Pt of Je)if(!X.horizontal[Pt])if(We)X.horizontal[Pt]=X.horizontal[0];else{const wt=hg(te,a.glyphMap,a.glyphPositions,a.imagePositions,D,Qe,v,"center",Pt,Fe,he,o.ai.horizontal,!1,it,U,O);wt&&(X.horizontal[Pt]=wt,We=wt.positionedLines.length===1)}pt()}else{ot==="auto"&&(ot=T_(ct));const Je=hg(te,a.glyphMap,a.glyphPositions,a.imagePositions,D,Qe,v,ct,ot,Fe,he,o.ai.horizontal,!1,it,U,O);Je&&(X.horizontal[ot]=Je),pt(),qd(Se)&&_&&S&&(X.vertical=hg(te,a.glyphMap,a.glyphPositions,a.imagePositions,D,Qe,v,ct,ot,Fe,he,o.ai.vertical,!1,it,U,O))}}let we=!1;if(I.icon&&I.icon.name){const Se=a.imageMap[I.icon.name];Se&&(oe=l3(a.imagePositions[I.icon.name],l.get("icon-offset").evaluate(I,{},a.canonical),l.get("icon-anchor").evaluate(I,{},a.canonical)),we=!!Se.sdf,a.bucket.sdfIcons===void 0?a.bucket.sdfIcons=we:a.bucket.sdfIcons!==we&&ut("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Se.pixelRatio!==a.bucket.pixelRatio||l.get("icon-rotate").constantOr(1)!==0)&&(a.bucket.iconsNeedLinear=!0))}const pe=OT(X.horizontal)||X.vertical;a.bucket.iconsInText=!!pe&&pe.iconsInText,(pe||oe)&&E3(a.bucket,I,X,oe,a.imageMap,m,U,H,he,we,a.canonical)}a.showCollisionBoxes&&a.bucket.generateCollisionDebugBuffers()},o.br=l_,o.bs=s_,o.bt=o_,o.bu=class{constructor(a){this._marks={start:[a.url,"start"].join("#"),end:[a.url,"end"].join("#"),measure:a.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let a=performance.getEntriesByName(this._marks.measure);return a.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),a=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),a}},o.bv=u_,o.bw=sl,o.bx=function(a,r,l,d,m){return w(this,void 0,void 0,function*(){if(W())try{return yield zt(a,r,l,d,m)}catch{}return function(v,_,S,P,I){const D=v.width,O=v.height;$t&&Dt||($t=new OffscreenCanvas(D,O),Dt=$t.getContext("2d",{willReadFrequently:!0})),$t.width=D,$t.height=O,Dt.drawImage(v,0,0,D,O);const U=Dt.getImageData(_,S,P,I);return Dt.clearRect(0,0,D,O),U.data}(a,r,l,d,m)})},o.by=xT,o.bz=b,o.c=Jr,o.d=function(a,r){const l=new Image;l.onload=()=>{r(null,l),URL.revokeObjectURL(l.src),l.onload=null,window.requestAnimationFrame(()=>{l.src=mt})},l.onerror=()=>r(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const d=new Blob([new Uint8Array(a)],{type:"image/png"});l.src=a.byteLength?URL.createObjectURL(d):mt},o.e=Te,o.f=function(a,r){return bs(Te(a,{type:"json"}),r)},o.g=ti,o.h=gr,o.i=Ue,o.j=ye,o.k=Ws,o.l=ba,o.m=bs,o.n=function(a){return new u_(a).readFields(n3,[])},o.o=function(a,r,l){if(!a.length)return l(null,[]);let d=a.length;const m=new Array(a.length);let v=null;a.forEach((_,S)=>{r(_,(P,I)=>{P&&(v=P),m[S]=I,--d==0&&l(v,m)})})},o.p=Y2,o.q=df,o.r=Zn,o.s=Vi,o.t=Vx,o.u=lt,o.v=ce,o.w=ut,o.x=ju,o.y=Js,o.z=function([a,r,l]){return r+=90,r*=Math.PI/180,l*=Math.PI/180,{x:a*Math.cos(r)*Math.sin(l),y:a*Math.sin(r)*Math.sin(l),z:a*Math.cos(l)}}}),h(["./shared"],function(o){class w{constructor($){this.keyCache={},$&&this.replace($)}replace($){this._layerConfigs={},this._layers={},this.update($,[])}update($,q){for(const ae of $){this._layerConfigs[ae.id]=ae;const le=this._layers[ae.id]=o.aC(ae);le._featureFilter=o.a6(le.filter),this.keyCache[ae.id]&&delete this.keyCache[ae.id]}for(const ae of q)delete this.keyCache[ae],delete this._layerConfigs[ae],delete this._layers[ae];this.familiesBySource={};const J=o.bl(Object.values(this._layerConfigs),this.keyCache);for(const ae of J){const le=ae.map(ze=>this._layers[ze.id]),be=le[0];if(be.visibility==="none")continue;const me=be.source||"";let de=this.familiesBySource[me];de||(de=this.familiesBySource[me]={});const _e=be.sourceLayer||"_geojsonTileLayer";let Le=de[_e];Le||(Le=de[_e]=[]),Le.push(le)}}}class b{constructor($){const q={},J=[];for(const me in $){const de=$[me],_e=q[me]={};for(const Le in de){const ze=de[+Le];if(!ze||ze.bitmap.width===0||ze.bitmap.height===0)continue;const Be={x:0,y:0,w:ze.bitmap.width+2,h:ze.bitmap.height+2};J.push(Be),_e[Le]={rect:Be,metrics:ze.metrics}}}const{w:ae,h:le}=o.p(J),be=new o.q({width:ae||1,height:le||1});for(const me in $){const de=$[me];for(const _e in de){const Le=de[+_e];if(!Le||Le.bitmap.width===0||Le.bitmap.height===0)continue;const ze=q[me][_e].rect;o.q.copy(Le.bitmap,be,{x:0,y:0},{x:ze.x+1,y:ze.y+1},Le.bitmap)}}this.image=be,this.positions=q}}o.bm("GlyphAtlas",b);class A{constructor($){this.tileID=new o.O($.tileID.overscaledZ,$.tileID.wrap,$.tileID.canonical.z,$.tileID.canonical.x,$.tileID.canonical.y),this.uid=$.uid,this.zoom=$.zoom,this.pixelRatio=$.pixelRatio,this.tileSize=$.tileSize,this.source=$.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=$.showCollisionBoxes,this.collectResourceTiming=!!$.collectResourceTiming,this.returnDependencies=!!$.returnDependencies,this.promoteId=$.promoteId,this.inFlightDependencies=[],this.dependencySentinel=-1}parse($,q,J,ae,le){this.status="parsing",this.data=$,this.collisionBoxArray=new o.a3;const be=new o.bn(Object.keys($.layers).sort()),me=new o.bo(this.tileID,this.promoteId);me.bucketLayerIDs=[];const de={},_e={featureIndex:me,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:J},Le=q.familiesBySource[this.source];for(const Jt in Le){const Yt=$.layers[Jt];if(!Yt)continue;Yt.version===1&&o.w(`Vector tile source "${this.source}" layer "${Jt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const kr=be.encode(Jt),pn=[];for(let er=0;er<Yt.length;er++){const xr=Yt.feature(er),$i=me.getId(xr,Jt);pn.push({feature:xr,id:$i,index:er,sourceLayerIndex:kr})}for(const er of Le[Jt]){const xr=er[0];xr.source!==this.source&&o.w(`layer.source = ${xr.source} does not equal this.source = ${this.source}`),xr.minzoom&&this.zoom<Math.floor(xr.minzoom)||xr.maxzoom&&this.zoom>=xr.maxzoom||xr.visibility!=="none"&&(C(er,this.zoom,J),(de[xr.id]=xr.createBucket({index:me.bucketLayerIDs.length,layers:er,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:kr,sourceID:this.source})).populate(pn,_e,this.tileID.canonical),me.bucketLayerIDs.push(er.map($i=>$i.id)))}}let ze,Be,Ct,Lt;const gt=o.aH(_e.glyphDependencies,Jt=>Object.keys(Jt).map(Number));this.inFlightDependencies.forEach(Jt=>Jt==null?void 0:Jt.cancel()),this.inFlightDependencies=[];const At=++this.dependencySentinel;Object.keys(gt).length?this.inFlightDependencies.push(ae.send("getGlyphs",{uid:this.uid,stacks:gt,source:this.source,tileID:this.tileID,type:"glyphs"},(Jt,Yt)=>{At===this.dependencySentinel&&(ze||(ze=Jt,Be=Yt,dn.call(this)))})):Be={};const Ft=Object.keys(_e.iconDependencies);Ft.length?this.inFlightDependencies.push(ae.send("getImages",{icons:Ft,source:this.source,tileID:this.tileID,type:"icons"},(Jt,Yt)=>{At===this.dependencySentinel&&(ze||(ze=Jt,Ct=Yt,dn.call(this)))})):Ct={};const on=Object.keys(_e.patternDependencies);function dn(){if(ze)return le(ze);if(Be&&Ct&&Lt){const Jt=new b(Be),Yt=new o.bp(Ct,Lt);for(const kr in de){const pn=de[kr];pn instanceof o.a4?(C(pn.layers,this.zoom,J),o.bq({bucket:pn,glyphMap:Be,glyphPositions:Jt.positions,imageMap:Ct,imagePositions:Yt.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):pn.hasPattern&&(pn instanceof o.br||pn instanceof o.bs||pn instanceof o.bt)&&(C(pn.layers,this.zoom,J),pn.addFeatures(_e,this.tileID.canonical,Yt.patternPositions))}this.status="done",le(null,{buckets:Object.values(de).filter(kr=>!kr.isEmpty()),featureIndex:me,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Jt.image,imageAtlas:Yt,glyphMap:this.returnDependencies?Be:null,iconMap:this.returnDependencies?Ct:null,glyphPositions:this.returnDependencies?Jt.positions:null})}}on.length?this.inFlightDependencies.push(ae.send("getImages",{icons:on,source:this.source,tileID:this.tileID,type:"patterns"},(Jt,Yt)=>{At===this.dependencySentinel&&(ze||(ze=Jt,Lt=Yt,dn.call(this)))})):Lt={},dn.call(this)}}function C(ie,$,q){const J=new o.a8($);for(const ae of ie)ae.recalculate(J,q)}function M(ie,$){const q=o.l(ie.request,(J,ae,le,be)=>{if(J)$(J);else if(ae)try{const me=new o.bw.VectorTile(new o.bv(ae));$(null,{vectorTile:me,rawData:ae,cacheControl:le,expires:be})}catch(me){const de=new Uint8Array(ae);let _e=`Unable to parse the tile at ${ie.request.url}, `;_e+=de[0]===31&&de[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${me.messge}`,$(new Error(_e))}});return()=>{q.cancel(),$()}}class B{constructor($,q,J,ae){this.actor=$,this.layerIndex=q,this.availableImages=J,this.loadVectorData=ae||M,this.fetching={},this.loading={},this.loaded={}}loadTile($,q){const J=$.uid;this.loading||(this.loading={});const ae=!!($&&$.request&&$.request.collectResourceTiming)&&new o.bu($.request),le=this.loading[J]=new A($);le.abort=this.loadVectorData($,(be,me)=>{if(delete this.loading[J],be||!me)return le.status="done",this.loaded[J]=le,q(be);const de=me.rawData,_e={};me.expires&&(_e.expires=me.expires),me.cacheControl&&(_e.cacheControl=me.cacheControl);const Le={};if(ae){const ze=ae.finish();ze&&(Le.resourceTiming=JSON.parse(JSON.stringify(ze)))}le.vectorTile=me.vectorTile,le.parse(me.vectorTile,this.layerIndex,this.availableImages,this.actor,(ze,Be)=>{if(delete this.fetching[J],ze||!Be)return q(ze);q(null,o.e({rawTileData:de.slice(0)},Be,_e,Le))}),this.loaded=this.loaded||{},this.loaded[J]=le,this.fetching[J]={rawTileData:de,cacheControl:_e,resourceTiming:Le}})}reloadTile($,q){const J=this.loaded,ae=$.uid;if(J&&J[ae]){const le=J[ae];le.showCollisionBoxes=$.showCollisionBoxes,le.status==="parsing"?le.parse(le.vectorTile,this.layerIndex,this.availableImages,this.actor,(be,me)=>{if(be||!me)return q(be,me);let de;if(this.fetching[ae]){const{rawTileData:_e,cacheControl:Le,resourceTiming:ze}=this.fetching[ae];delete this.fetching[ae],de=o.e({rawTileData:_e.slice(0)},me,Le,ze)}else de=me;q(null,de)}):le.status==="done"&&(le.vectorTile?le.parse(le.vectorTile,this.layerIndex,this.availableImages,this.actor,q):q())}}abortTile($,q){const J=this.loading,ae=$.uid;J&&J[ae]&&J[ae].abort&&(J[ae].abort(),delete J[ae]),q()}removeTile($,q){const J=this.loaded,ae=$.uid;J&&J[ae]&&delete J[ae],q()}}class V{constructor(){this.loaded={}}loadTile($,q){return o._(this,void 0,void 0,function*(){const{uid:J,encoding:ae,rawImageData:le,redFactor:be,greenFactor:me,blueFactor:de,baseShift:_e}=$,Le=le.width+2,ze=le.height+2,Be=o.a(le)?new o.R({width:Le,height:ze},yield o.bx(le,-1,-1,Le,ze)):le,Ct=new o.by(J,Be,ae,be,me,de,_e);this.loaded=this.loaded||{},this.loaded[J]=Ct,q(null,Ct)})}removeTile($){const q=this.loaded,J=$.uid;q&&q[J]&&delete q[J]}}function j(ie,$){if(ie.length!==0){Z(ie[0],$);for(var q=1;q<ie.length;q++)Z(ie[q],!$)}}function Z(ie,$){for(var q=0,J=0,ae=0,le=ie.length,be=le-1;ae<le;be=ae++){var me=(ie[ae][0]-ie[be][0])*(ie[be][1]+ie[ae][1]),de=q+me;J+=Math.abs(q)>=Math.abs(me)?q-de+me:me-de+q,q=de}q+J>=0!=!!$&&ie.reverse()}var N=o.bz(function ie($,q){var J,ae=$&&$.type;if(ae==="FeatureCollection")for(J=0;J<$.features.length;J++)ie($.features[J],q);else if(ae==="GeometryCollection")for(J=0;J<$.geometries.length;J++)ie($.geometries[J],q);else if(ae==="Feature")ie($.geometry,q);else if(ae==="Polygon")j($.coordinates,q);else if(ae==="MultiPolygon")for(J=0;J<$.coordinates.length;J++)j($.coordinates[J],q);return $});const F=o.bw.VectorTileFeature.prototype.toGeoJSON;var W={exports:{}},Q=o.bA,fe=o.bw.VectorTileFeature,Ee=Re;function Re(ie,$){this.options=$||{},this.features=ie,this.length=ie.length}function Te(ie,$){this.id=typeof ie.id=="number"?ie.id:void 0,this.type=ie.type,this.rawGeometry=ie.type===1?[ie.geometry]:ie.geometry,this.properties=ie.tags,this.extent=$||4096}Re.prototype.feature=function(ie){return new Te(this.features[ie],this.options.extent)},Te.prototype.loadGeometry=function(){var ie=this.rawGeometry;this.geometry=[];for(var $=0;$<ie.length;$++){for(var q=ie[$],J=[],ae=0;ae<q.length;ae++)J.push(new Q(q[ae][0],q[ae][1]));this.geometry.push(J)}return this.geometry},Te.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var ie=this.geometry,$=1/0,q=-1/0,J=1/0,ae=-1/0,le=0;le<ie.length;le++)for(var be=ie[le],me=0;me<be.length;me++){var de=be[me];$=Math.min($,de.x),q=Math.max(q,de.x),J=Math.min(J,de.y),ae=Math.max(ae,de.y)}return[$,J,q,ae]},Te.prototype.toGeoJSON=fe.prototype.toGeoJSON;var Ne=o.bB,ke=Ee;function ft(ie){var $=new Ne;return function(q,J){for(var ae in q.layers)J.writeMessage(3,je,q.layers[ae])}(ie,$),$.finish()}function je(ie,$){var q;$.writeVarintField(15,ie.version||1),$.writeStringField(1,ie.name||""),$.writeVarintField(5,ie.extent||4096);var J={keys:[],values:[],keycache:{},valuecache:{}};for(q=0;q<ie.length;q++)J.feature=ie.feature(q),$.writeMessage(2,st,J);var ae=J.keys;for(q=0;q<ae.length;q++)$.writeStringField(3,ae[q]);var le=J.values;for(q=0;q<le.length;q++)$.writeMessage(4,De,le[q])}function st(ie,$){var q=ie.feature;q.id!==void 0&&$.writeVarintField(1,q.id),$.writeMessage(2,ut,ie),$.writeVarintField(3,q.type),$.writeMessage(4,Ue,q)}function ut(ie,$){var q=ie.feature,J=ie.keys,ae=ie.values,le=ie.keycache,be=ie.valuecache;for(var me in q.properties){var de=q.properties[me],_e=le[me];if(de!==null){_e===void 0&&(J.push(me),le[me]=_e=J.length-1),$.writeVarint(_e);var Le=typeof de;Le!=="string"&&Le!=="boolean"&&Le!=="number"&&(de=JSON.stringify(de));var ze=Le+":"+de,Be=be[ze];Be===void 0&&(ae.push(de),be[ze]=Be=ae.length-1),$.writeVarint(Be)}}}function Tt(ie,$){return($<<3)+(7&ie)}function ht(ie){return ie<<1^ie>>31}function Ue(ie,$){for(var q=ie.loadGeometry(),J=ie.type,ae=0,le=0,be=q.length,me=0;me<be;me++){var de=q[me],_e=1;J===1&&(_e=de.length),$.writeVarint(Tt(1,_e));for(var Le=J===3?de.length-1:de.length,ze=0;ze<Le;ze++){ze===1&&J!==1&&$.writeVarint(Tt(2,Le-1));var Be=de[ze].x-ae,Ct=de[ze].y-le;$.writeVarint(ht(Be)),$.writeVarint(ht(Ct)),ae+=Be,le+=Ct}J===3&&$.writeVarint(Tt(7,1))}}function De(ie,$){var q=typeof ie;q==="string"?$.writeStringField(1,ie):q==="boolean"?$.writeBooleanField(7,ie):q==="number"&&(ie%1!=0?$.writeDoubleField(3,ie):ie<0?$.writeSVarintField(6,ie):$.writeVarintField(5,ie))}W.exports=ft,W.exports.fromVectorTileJs=ft,W.exports.fromGeojsonVt=function(ie,$){$=$||{};var q={};for(var J in ie)q[J]=new ke(ie[J].features,$),q[J].name=J,q[J].version=$.version,q[J].extent=$.extent;return ft({layers:q})},W.exports.GeoJSONWrapper=ke;var Xe=o.bz(W.exports);const mt={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ie=>ie},zt=Math.fround||($t=new Float32Array(1),ie=>($t[0]=+ie,$t[0]));var $t;const Dt=3,Sn=5,vi=6;class gr{constructor($){this.options=Object.assign(Object.create(mt),$),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load($){const{log:q,minZoom:J,maxZoom:ae}=this.options;q&&console.time("total time");const le=`prepare ${$.length} points`;q&&console.time(le),this.points=$;const be=[];for(let de=0;de<$.length;de++){const _e=$[de];if(!_e.geometry)continue;const[Le,ze]=_e.geometry.coordinates,Be=zt(ei(Le)),Ct=zt(ti(ze));be.push(Be,Ct,1/0,de,-1,1),this.options.reduce&&be.push(0)}let me=this.trees[ae+1]=this._createTree(be);q&&console.timeEnd(le);for(let de=ae;de>=J;de--){const _e=+Date.now();me=this.trees[de]=this._createTree(this._cluster(me,de)),q&&console.log("z%d: %d clusters in %dms",de,me.numItems,+Date.now()-_e)}return q&&console.timeEnd("total time"),this}getClusters($,q){let J=(($[0]+180)%360+360)%360-180;const ae=Math.max(-90,Math.min(90,$[1]));let le=$[2]===180?180:(($[2]+180)%360+360)%360-180;const be=Math.max(-90,Math.min(90,$[3]));if($[2]-$[0]>=360)J=-180,le=180;else if(J>le){const ze=this.getClusters([J,ae,180,be],q),Be=this.getClusters([-180,ae,le,be],q);return ze.concat(Be)}const me=this.trees[this._limitZoom(q)],de=me.range(ei(J),ti(be),ei(le),ti(ae)),_e=me.data,Le=[];for(const ze of de){const Be=this.stride*ze;Le.push(_e[Be+Sn]>1?Jr(_e,Be,this.clusterProps):this.points[_e[Be+Dt]])}return Le}getChildren($){const q=this._getOriginId($),J=this._getOriginZoom($),ae="No cluster with the specified id.",le=this.trees[J];if(!le)throw new Error(ae);const be=le.data;if(q*this.stride>=be.length)throw new Error(ae);const me=this.options.radius/(this.options.extent*Math.pow(2,J-1)),de=le.within(be[q*this.stride],be[q*this.stride+1],me),_e=[];for(const Le of de){const ze=Le*this.stride;be[ze+4]===$&&_e.push(be[ze+Sn]>1?Jr(be,ze,this.clusterProps):this.points[be[ze+Dt]])}if(_e.length===0)throw new Error(ae);return _e}getLeaves($,q,J){const ae=[];return this._appendLeaves(ae,$,q=q||10,J=J||0,0),ae}getTile($,q,J){const ae=this.trees[this._limitZoom($)],le=Math.pow(2,$),{extent:be,radius:me}=this.options,de=me/be,_e=(J-de)/le,Le=(J+1+de)/le,ze={features:[]};return this._addTileFeatures(ae.range((q-de)/le,_e,(q+1+de)/le,Le),ae.data,q,J,le,ze),q===0&&this._addTileFeatures(ae.range(1-de/le,_e,1,Le),ae.data,le,J,le,ze),q===le-1&&this._addTileFeatures(ae.range(0,_e,de/le,Le),ae.data,-1,J,le,ze),ze.features.length?ze:null}getClusterExpansionZoom($){let q=this._getOriginZoom($)-1;for(;q<=this.options.maxZoom;){const J=this.getChildren($);if(q++,J.length!==1)break;$=J[0].properties.cluster_id}return q}_appendLeaves($,q,J,ae,le){const be=this.getChildren(q);for(const me of be){const de=me.properties;if(de&&de.cluster?le+de.point_count<=ae?le+=de.point_count:le=this._appendLeaves($,de.cluster_id,J,ae,le):le<ae?le++:$.push(me),$.length===J)break}return le}_createTree($){const q=new o.av($.length/this.stride|0,this.options.nodeSize,Float32Array);for(let J=0;J<$.length;J+=this.stride)q.add($[J],$[J+1]);return q.finish(),q.data=$,q}_addTileFeatures($,q,J,ae,le,be){for(const me of $){const de=me*this.stride,_e=q[de+Sn]>1;let Le,ze,Be;if(_e)Le=Bi(q,de,this.clusterProps),ze=q[de],Be=q[de+1];else{const gt=this.points[q[de+Dt]];Le=gt.properties;const[At,Ft]=gt.geometry.coordinates;ze=ei(At),Be=ti(Ft)}const Ct={type:1,geometry:[[Math.round(this.options.extent*(ze*le-J)),Math.round(this.options.extent*(Be*le-ae))]],tags:Le};let Lt;Lt=_e||this.options.generateId?q[de+Dt]:this.points[q[de+Dt]].id,Lt!==void 0&&(Ct.id=Lt),be.features.push(Ct)}}_limitZoom($){return Math.max(this.options.minZoom,Math.min(Math.floor(+$),this.options.maxZoom+1))}_cluster($,q){const{radius:J,extent:ae,reduce:le,minPoints:be}=this.options,me=J/(ae*Math.pow(2,q)),de=$.data,_e=[],Le=this.stride;for(let ze=0;ze<de.length;ze+=Le){if(de[ze+2]<=q)continue;de[ze+2]=q;const Be=de[ze],Ct=de[ze+1],Lt=$.within(de[ze],de[ze+1],me),gt=de[ze+Sn];let At=gt;for(const Ft of Lt){const on=Ft*Le;de[on+2]>q&&(At+=de[on+Sn])}if(At>gt&&At>=be){let Ft,on=Be*gt,dn=Ct*gt,Jt=-1;const Yt=((ze/Le|0)<<5)+(q+1)+this.points.length;for(const kr of Lt){const pn=kr*Le;if(de[pn+2]<=q)continue;de[pn+2]=q;const er=de[pn+Sn];on+=de[pn]*er,dn+=de[pn+1]*er,de[pn+4]=Yt,le&&(Ft||(Ft=this._map(de,ze,!0),Jt=this.clusterProps.length,this.clusterProps.push(Ft)),le(Ft,this._map(de,pn)))}de[ze+4]=Yt,_e.push(on/At,dn/At,1/0,Yt,-1,At),le&&_e.push(Jt)}else{for(let Ft=0;Ft<Le;Ft++)_e.push(de[ze+Ft]);if(At>1)for(const Ft of Lt){const on=Ft*Le;if(!(de[on+2]<=q)){de[on+2]=q;for(let dn=0;dn<Le;dn++)_e.push(de[on+dn])}}}}return _e}_getOriginId($){return $-this.points.length>>5}_getOriginZoom($){return($-this.points.length)%32}_map($,q,J){if($[q+Sn]>1){const be=this.clusterProps[$[q+vi]];return J?Object.assign({},be):be}const ae=this.points[$[q+Dt]].properties,le=this.options.map(ae);return J&&le===ae?Object.assign({},le):le}}function Jr(ie,$,q){return{type:"Feature",id:ie[$+Dt],properties:Bi(ie,$,q),geometry:{type:"Point",coordinates:[(J=ie[$],360*(J-.5)),wa(ie[$+1])]}};var J}function Bi(ie,$,q){const J=ie[$+Sn],ae=J>=1e4?`${Math.round(J/1e3)}k`:J>=1e3?Math.round(J/100)/10+"k":J,le=ie[$+vi],be=le===-1?{}:Object.assign({},q[le]);return Object.assign(be,{cluster:!0,cluster_id:ie[$+Dt],point_count:J,point_count_abbreviated:ae})}function ei(ie){return ie/360+.5}function ti(ie){const $=Math.sin(ie*Math.PI/180),q=.5-.25*Math.log((1+$)/(1-$))/Math.PI;return q<0?0:q>1?1:q}function wa(ie){const $=(180-360*ie)*Math.PI/180;return 360*Math.atan(Math.exp($))/Math.PI-90}function bs(ie,$,q,J){for(var ae,le=J,be=q-$>>1,me=q-$,de=ie[$],_e=ie[$+1],Le=ie[q],ze=ie[q+1],Be=$+3;Be<q;Be+=3){var Ct=ba(ie[Be],ie[Be+1],de,_e,Le,ze);if(Ct>le)ae=Be,le=Ct;else if(Ct===le){var Lt=Math.abs(Be-be);Lt<me&&(ae=Be,me=Lt)}}le>J&&(ae-$>3&&bs(ie,$,ae,J),ie[ae+2]=le,q-ae>3&&bs(ie,ae,q,J))}function ba(ie,$,q,J,ae,le){var be=ae-q,me=le-J;if(be!==0||me!==0){var de=((ie-q)*be+($-J)*me)/(be*be+me*me);de>1?(q=ae,J=le):de>0&&(q+=be*de,J+=me*de)}return(be=ie-q)*be+(me=$-J)*me}function Vi(ie,$,q,J){var ae={id:ie===void 0?null:ie,type:$,geometry:q,tags:J,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(le){var be=le.geometry,me=le.type;if(me==="Point"||me==="MultiPoint"||me==="LineString")Xa(le,be);else if(me==="Polygon"||me==="MultiLineString")for(var de=0;de<be.length;de++)Xa(le,be[de]);else if(me==="MultiPolygon")for(de=0;de<be.length;de++)for(var _e=0;_e<be[de].length;_e++)Xa(le,be[de][_e])}(ae),ae}function Xa(ie,$){for(var q=0;q<$.length;q+=3)ie.minX=Math.min(ie.minX,$[q]),ie.minY=Math.min(ie.minY,$[q+1]),ie.maxX=Math.max(ie.maxX,$[q]),ie.maxY=Math.max(ie.maxY,$[q+1])}function Sa(ie,$,q,J){if($.geometry){var ae=$.geometry.coordinates,le=$.geometry.type,be=Math.pow(q.tolerance/((1<<q.maxZoom)*q.extent),2),me=[],de=$.id;if(q.promoteId?de=$.properties[q.promoteId]:q.generateId&&(de=J||0),le==="Point")Ws(ae,me);else if(le==="MultiPoint")for(var _e=0;_e<ae.length;_e++)Ws(ae[_e],me);else if(le==="LineString")ye(ae,me,be,!1);else if(le==="MultiLineString"){if(q.lineMetrics){for(_e=0;_e<ae.length;_e++)ye(ae[_e],me=[],be,!1),ie.push(Vi(de,"LineString",me,$.properties));return}Me(ae,me,be,!1)}else if(le==="Polygon")Me(ae,me,be,!0);else{if(le!=="MultiPolygon"){if(le==="GeometryCollection"){for(_e=0;_e<$.geometry.geometries.length;_e++)Sa(ie,{id:de,geometry:$.geometry.geometries[_e],properties:$.properties},q,J);return}throw new Error("Input data is not a valid GeoJSON object.")}for(_e=0;_e<ae.length;_e++){var Le=[];Me(ae[_e],Le,be,!0),me.push(Le)}}ie.push(Vi(de,le,me,$.properties))}}function Ws(ie,$){$.push(ce(ie[0])),$.push(at(ie[1])),$.push(0)}function ye(ie,$,q,J){for(var ae,le,be=0,me=0;me<ie.length;me++){var de=ce(ie[me][0]),_e=at(ie[me][1]);$.push(de),$.push(_e),$.push(0),me>0&&(be+=J?(ae*_e-de*le)/2:Math.sqrt(Math.pow(de-ae,2)+Math.pow(_e-le,2))),ae=de,le=_e}var Le=$.length-3;$[2]=1,bs($,0,Le,q),$[Le+2]=1,$.size=Math.abs(be),$.start=0,$.end=$.size}function Me(ie,$,q,J){for(var ae=0;ae<ie.length;ae++){var le=[];ye(ie[ae],le,q,J),$.push(le)}}function ce(ie){return ie/360+.5}function at(ie){var $=Math.sin(ie*Math.PI/180),q=.5-.25*Math.log((1+$)/(1-$))/Math.PI;return q<0?0:q>1?1:q}function nt(ie,$,q,J,ae,le,be,me){if(J/=$,le>=(q/=$)&&be<J)return ie;if(be<q||le>=J)return null;for(var de=[],_e=0;_e<ie.length;_e++){var Le=ie[_e],ze=Le.geometry,Be=Le.type,Ct=ae===0?Le.minX:Le.minY,Lt=ae===0?Le.maxX:Le.maxY;if(Ct>=q&&Lt<J)de.push(Le);else if(!(Lt<q||Ct>=J)){var gt=[];if(Be==="Point"||Be==="MultiPoint")qe(ze,gt,q,J,ae);else if(Be==="LineString")et(ze,gt,q,J,ae,!1,me.lineMetrics);else if(Be==="MultiLineString")Tn(ze,gt,q,J,ae,!1);else if(Be==="Polygon")Tn(ze,gt,q,J,ae,!0);else if(Be==="MultiPolygon")for(var At=0;At<ze.length;At++){var Ft=[];Tn(ze[At],Ft,q,J,ae,!0),Ft.length&&gt.push(Ft)}if(gt.length){if(me.lineMetrics&&Be==="LineString"){for(At=0;At<gt.length;At++)de.push(Vi(Le.id,Be,gt[At],Le.tags));continue}Be!=="LineString"&&Be!=="MultiLineString"||(gt.length===1?(Be="LineString",gt=gt[0]):Be="MultiLineString"),Be!=="Point"&&Be!=="MultiPoint"||(Be=gt.length===3?"Point":"MultiPoint"),de.push(Vi(Le.id,Be,gt,Le.tags))}}}return de.length?de:null}function qe(ie,$,q,J,ae){for(var le=0;le<ie.length;le+=3){var be=ie[le+ae];be>=q&&be<=J&&($.push(ie[le]),$.push(ie[le+1]),$.push(ie[le+2]))}}function et(ie,$,q,J,ae,le,be){for(var me,de,_e=Gt(ie),Le=ae===0?rs:Ta,ze=ie.start,Be=0;Be<ie.length-3;Be+=3){var Ct=ie[Be],Lt=ie[Be+1],gt=ie[Be+2],At=ie[Be+3],Ft=ie[Be+4],on=ae===0?Ct:Lt,dn=ae===0?At:Ft,Jt=!1;be&&(me=Math.sqrt(Math.pow(Ct-At,2)+Math.pow(Lt-Ft,2))),on<q?dn>q&&(de=Le(_e,Ct,Lt,At,Ft,q),be&&(_e.start=ze+me*de)):on>J?dn<J&&(de=Le(_e,Ct,Lt,At,Ft,J),be&&(_e.start=ze+me*de)):Dn(_e,Ct,Lt,gt),dn<q&&on>=q&&(de=Le(_e,Ct,Lt,At,Ft,q),Jt=!0),dn>J&&on<=J&&(de=Le(_e,Ct,Lt,At,Ft,J),Jt=!0),!le&&Jt&&(be&&(_e.end=ze+me*de),$.push(_e),_e=Gt(ie)),be&&(ze+=me)}var Yt=ie.length-3;Ct=ie[Yt],Lt=ie[Yt+1],gt=ie[Yt+2],(on=ae===0?Ct:Lt)>=q&&on<=J&&Dn(_e,Ct,Lt,gt),Yt=_e.length-3,le&&Yt>=3&&(_e[Yt]!==_e[0]||_e[Yt+1]!==_e[1])&&Dn(_e,_e[0],_e[1],_e[2]),_e.length&&$.push(_e)}function Gt(ie){var $=[];return $.size=ie.size,$.start=ie.start,$.end=ie.end,$}function Tn(ie,$,q,J,ae,le){for(var be=0;be<ie.length;be++)et(ie[be],$,q,J,ae,le,!1)}function Dn(ie,$,q,J){ie.push($),ie.push(q),ie.push(J)}function rs(ie,$,q,J,ae,le){var be=(le-$)/(J-$);return ie.push(le),ie.push(q+(ae-q)*be),ie.push(1),be}function Ta(ie,$,q,J,ae,le){var be=(le-q)/(ae-q);return ie.push($+(J-$)*be),ie.push(le),ie.push(1),be}function ji(ie,$){for(var q=[],J=0;J<ie.length;J++){var ae,le=ie[J],be=le.type;if(be==="Point"||be==="MultiPoint"||be==="LineString")ae=is(le.geometry,$);else if(be==="MultiLineString"||be==="Polygon"){ae=[];for(var me=0;me<le.geometry.length;me++)ae.push(is(le.geometry[me],$))}else if(be==="MultiPolygon")for(ae=[],me=0;me<le.geometry.length;me++){for(var de=[],_e=0;_e<le.geometry[me].length;_e++)de.push(is(le.geometry[me][_e],$));ae.push(de)}q.push(Vi(le.id,be,ae,le.tags))}return q}function is(ie,$){var q=[];q.size=ie.size,ie.start!==void 0&&(q.start=ie.start,q.end=ie.end);for(var J=0;J<ie.length;J+=3)q.push(ie[J]+$,ie[J+1],ie[J+2]);return q}function Ke(ie,$){if(ie.transformed)return ie;var q,J,ae,le=1<<ie.z,be=ie.x,me=ie.y;for(q=0;q<ie.features.length;q++){var de=ie.features[q],_e=de.geometry,Le=de.type;if(de.geometry=[],Le===1)for(J=0;J<_e.length;J+=2)de.geometry.push(xi(_e[J],_e[J+1],$,le,be,me));else for(J=0;J<_e.length;J++){var ze=[];for(ae=0;ae<_e[J].length;ae+=2)ze.push(xi(_e[J][ae],_e[J][ae+1],$,le,be,me));de.geometry.push(ze)}}return ie.transformed=!0,ie}function xi(ie,$,q,J,ae,le){return[Math.round(q*(ie*J-ae)),Math.round(q*($*J-le))]}function En(ie,$,q,J,ae){for(var le=$===ae.maxZoom?0:ae.tolerance/((1<<$)*ae.extent),be={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:q,y:J,z:$,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},me=0;me<ie.length;me++){be.numFeatures++,Ss(be,ie[me],le,ae);var de=ie[me].minX,_e=ie[me].minY,Le=ie[me].maxX,ze=ie[me].maxY;de<be.minX&&(be.minX=de),_e<be.minY&&(be.minY=_e),Le>be.maxX&&(be.maxX=Le),ze>be.maxY&&(be.maxY=ze)}return be}function Ss(ie,$,q,J){var ae=$.geometry,le=$.type,be=[];if(le==="Point"||le==="MultiPoint")for(var me=0;me<ae.length;me+=3)be.push(ae[me]),be.push(ae[me+1]),ie.numPoints++,ie.numSimplified++;else if(le==="LineString")Hs(be,ae,ie,q,!1,!1);else if(le==="MultiLineString"||le==="Polygon")for(me=0;me<ae.length;me++)Hs(be,ae[me],ie,q,le==="Polygon",me===0);else if(le==="MultiPolygon")for(var de=0;de<ae.length;de++){var _e=ae[de];for(me=0;me<_e.length;me++)Hs(be,_e[me],ie,q,!0,me===0)}if(be.length){var Le=$.tags||null;if(le==="LineString"&&J.lineMetrics){for(var ze in Le={},$.tags)Le[ze]=$.tags[ze];Le.mapbox_clip_start=ae.start/ae.size,Le.mapbox_clip_end=ae.end/ae.size}var Be={geometry:be,type:le==="Polygon"||le==="MultiPolygon"?3:le==="LineString"||le==="MultiLineString"?2:1,tags:Le};$.id!==null&&(Be.id=$.id),ie.features.push(Be)}}function Hs(ie,$,q,J,ae,le){var be=J*J;if(J>0&&$.size<(ae?be:J))q.numPoints+=$.length/3;else{for(var me=[],de=0;de<$.length;de+=3)(J===0||$[de+2]>be)&&(q.numSimplified++,me.push($[de]),me.push($[de+1])),q.numPoints++;ae&&function(_e,Le){for(var ze=0,Be=0,Ct=_e.length,Lt=Ct-2;Be<Ct;Lt=Be,Be+=2)ze+=(_e[Be]-_e[Lt])*(_e[Be+1]+_e[Lt+1]);if(ze>0===Le)for(Be=0,Ct=_e.length;Be<Ct/2;Be+=2){var gt=_e[Be],At=_e[Be+1];_e[Be]=_e[Ct-2-Be],_e[Be+1]=_e[Ct-1-Be],_e[Ct-2-Be]=gt,_e[Ct-1-Be]=At}}(me,le),ie.push(me)}}function tt(ie,$){var q=($=this.options=function(ae,le){for(var be in le)ae[be]=le[be];return ae}(Object.create(this.options),$)).debug;if(q&&console.time("preprocess data"),$.maxZoom<0||$.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if($.promoteId&&$.generateId)throw new Error("promoteId and generateId cannot be used together.");var J=function(ae,le){var be=[];if(ae.type==="FeatureCollection")for(var me=0;me<ae.features.length;me++)Sa(be,ae.features[me],le,me);else Sa(be,ae.type==="Feature"?ae:{geometry:ae},le);return be}(ie,$);this.tiles={},this.tileCoords=[],q&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",$.indexMaxZoom,$.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),J=function(ae,le){var be=le.buffer/le.extent,me=ae,de=nt(ae,1,-1-be,be,0,-1,2,le),_e=nt(ae,1,1-be,2+be,0,-1,2,le);return(de||_e)&&(me=nt(ae,1,-be,1+be,0,-1,2,le)||[],de&&(me=ji(de,1).concat(me)),_e&&(me=me.concat(ji(_e,-1)))),me}(J,$),J.length&&this.splitTile(J,0,0,0),q&&(J.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function jt(ie,$,q){return 32*((1<<ie)*q+$)+ie}function Ot(ie,$){return $?ie.properties[$]:ie.id}function Br(ie,$){if(ie==null)return!0;if(ie.type==="Feature")return Ot(ie,$)!=null;if(ie.type==="FeatureCollection"){const q=new Set;for(const J of ie.features){const ae=Ot(J,$);if(ae==null||q.has(ae))return!1;q.add(ae)}return!0}return!1}function Ts(ie,$){const q=new Map;if(ie!=null)if(ie.type==="Feature")q.set(Ot(ie,$),ie);else for(const J of ie.features)q.set(Ot(J,$),J);return q}tt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},tt.prototype.splitTile=function(ie,$,q,J,ae,le,be){for(var me=[ie,$,q,J],de=this.options,_e=de.debug;me.length;){J=me.pop(),q=me.pop(),$=me.pop(),ie=me.pop();var Le=1<<$,ze=jt($,q,J),Be=this.tiles[ze];if(!Be&&(_e>1&&console.time("creation"),Be=this.tiles[ze]=En(ie,$,q,J,de),this.tileCoords.push({z:$,x:q,y:J}),_e)){_e>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",$,q,J,Be.numFeatures,Be.numPoints,Be.numSimplified),console.timeEnd("creation"));var Ct="z"+$;this.stats[Ct]=(this.stats[Ct]||0)+1,this.total++}if(Be.source=ie,ae){if($===de.maxZoom||$===ae)continue;var Lt=1<<ae-$;if(q!==Math.floor(le/Lt)||J!==Math.floor(be/Lt))continue}else if($===de.indexMaxZoom||Be.numPoints<=de.indexMaxPoints)continue;if(Be.source=null,ie.length!==0){_e>1&&console.time("clipping");var gt,At,Ft,on,dn,Jt,Yt=.5*de.buffer/de.extent,kr=.5-Yt,pn=.5+Yt,er=1+Yt;gt=At=Ft=on=null,dn=nt(ie,Le,q-Yt,q+pn,0,Be.minX,Be.maxX,de),Jt=nt(ie,Le,q+kr,q+er,0,Be.minX,Be.maxX,de),ie=null,dn&&(gt=nt(dn,Le,J-Yt,J+pn,1,Be.minY,Be.maxY,de),At=nt(dn,Le,J+kr,J+er,1,Be.minY,Be.maxY,de),dn=null),Jt&&(Ft=nt(Jt,Le,J-Yt,J+pn,1,Be.minY,Be.maxY,de),on=nt(Jt,Le,J+kr,J+er,1,Be.minY,Be.maxY,de),Jt=null),_e>1&&console.timeEnd("clipping"),me.push(gt||[],$+1,2*q,2*J),me.push(At||[],$+1,2*q,2*J+1),me.push(Ft||[],$+1,2*q+1,2*J),me.push(on||[],$+1,2*q+1,2*J+1)}}},tt.prototype.getTile=function(ie,$,q){var J=this.options,ae=J.extent,le=J.debug;if(ie<0||ie>24)return null;var be=1<<ie,me=jt(ie,$=($%be+be)%be,q);if(this.tiles[me])return Ke(this.tiles[me],ae);le>1&&console.log("drilling down to z%d-%d-%d",ie,$,q);for(var de,_e=ie,Le=$,ze=q;!de&&_e>0;)_e--,Le=Math.floor(Le/2),ze=Math.floor(ze/2),de=this.tiles[jt(_e,Le,ze)];return de&&de.source?(le>1&&console.log("found parent tile z%d-%d-%d",_e,Le,ze),le>1&&console.time("drilling down"),this.splitTile(de.source,_e,Le,ze,ie,$,q),le>1&&console.timeEnd("drilling down"),this.tiles[me]?Ke(this.tiles[me],ae):null):null};class Bt extends B{constructor($,q,J,ae){super($,q,J),this._dataUpdateable=new Map,this.loadGeoJSON=(le,be)=>{const{promoteId:me}=le;if(le.request)return o.f(le.request,(de,_e,Le,ze)=>{this._dataUpdateable=Br(_e,me)?Ts(_e,me):void 0,be(de,_e,Le,ze)});if(typeof le.data=="string")try{const de=JSON.parse(le.data);this._dataUpdateable=Br(de,me)?Ts(de,me):void 0,be(null,de)}catch{be(new Error(`Input data given to '${le.source}' is not a valid GeoJSON object.`))}else le.dataDiff?this._dataUpdateable?(function(de,_e,Le){var ze,Be,Ct,Lt;if(_e.removeAll&&de.clear(),_e.remove)for(const gt of _e.remove)de.delete(gt);if(_e.add)for(const gt of _e.add){const At=Ot(gt,Le);At!=null&&de.set(At,gt)}if(_e.update)for(const gt of _e.update){let At=de.get(gt.id);if(At==null)continue;const Ft=!gt.removeAllProperties&&(((ze=gt.removeProperties)===null||ze===void 0?void 0:ze.length)>0||((Be=gt.addOrUpdateProperties)===null||Be===void 0?void 0:Be.length)>0);if((gt.newGeometry||gt.removeAllProperties||Ft)&&(At=Object.assign({},At),de.set(gt.id,At),Ft&&(At.properties=Object.assign({},At.properties))),gt.newGeometry&&(At.geometry=gt.newGeometry),gt.removeAllProperties)At.properties={};else if(((Ct=gt.removeProperties)===null||Ct===void 0?void 0:Ct.length)>0)for(const on of gt.removeProperties)Object.prototype.hasOwnProperty.call(At.properties,on)&&delete At.properties[on];if(((Lt=gt.addOrUpdateProperties)===null||Lt===void 0?void 0:Lt.length)>0)for(const{key:on,value:dn}of gt.addOrUpdateProperties)At.properties[on]=dn}}(this._dataUpdateable,le.dataDiff,me),be(null,{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())})):be(new Error(`Cannot update existing geojson data in ${le.source}`)):be(new Error(`Input data given to '${le.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}},this.loadVectorData=this.loadGeoJSONTile,ae&&(this.loadGeoJSON=ae)}loadGeoJSONTile($,q){const J=$.tileID.canonical;if(!this._geoJSONIndex)return q(null,null);const ae=this._geoJSONIndex.getTile(J.z,J.x,J.y);if(!ae)return q(null,null);const le=new class{constructor(me){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=o.N,this.length=me.length,this._features=me}feature(me){return new class{constructor(de){this._feature=de,this.extent=o.N,this.type=de.type,this.properties=de.tags,"id"in de&&!isNaN(de.id)&&(this.id=parseInt(de.id,10))}loadGeometry(){if(this._feature.type===1){const de=[];for(const _e of this._feature.geometry)de.push([new o.P(_e[0],_e[1])]);return de}{const de=[];for(const _e of this._feature.geometry){const Le=[];for(const ze of _e)Le.push(new o.P(ze[0],ze[1]));de.push(Le)}return de}}toGeoJSON(de,_e,Le){return F.call(this,de,_e,Le)}}(this._features[me])}}(ae.features);let be=Xe(le);be.byteOffset===0&&be.byteLength===be.buffer.byteLength||(be=new Uint8Array(be)),q(null,{vectorTile:le,rawData:be.buffer})}loadData($,q){var J;(J=this._pendingRequest)===null||J===void 0||J.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const ae=!!($&&$.request&&$.request.collectResourceTiming)&&new o.bu($.request);this._pendingCallback=q,this._pendingRequest=this.loadGeoJSON($,(le,be)=>{if(delete this._pendingCallback,delete this._pendingRequest,le||!be)return q(le);if(typeof be!="object")return q(new Error(`Input data given to '${$.source}' is not a valid GeoJSON object.`));{N(be,!0);try{if($.filter){const de=o.bC($.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(de.result==="error")throw new Error(de.value.map(Le=>`${Le.key}: ${Le.message}`).join(", "));be={type:"FeatureCollection",features:be.features.filter(Le=>de.value.evaluate({zoom:0},Le))}}this._geoJSONIndex=$.cluster?new gr(function({superclusterOptions:de,clusterProperties:_e}){if(!_e||!de)return de;const Le={},ze={},Be={accumulated:null,zoom:0},Ct={properties:null},Lt=Object.keys(_e);for(const gt of Lt){const[At,Ft]=_e[gt],on=o.bC(Ft),dn=o.bC(typeof At=="string"?[At,["accumulated"],["get",gt]]:At);Le[gt]=on.value,ze[gt]=dn.value}return de.map=gt=>{Ct.properties=gt;const At={};for(const Ft of Lt)At[Ft]=Le[Ft].evaluate(Be,Ct);return At},de.reduce=(gt,At)=>{Ct.properties=At;for(const Ft of Lt)Be.accumulated=gt[Ft],gt[Ft]=ze[Ft].evaluate(Be,Ct)},de}($)).load(be.features):function(de,_e){return new tt(de,_e)}(be,$.geojsonVtOptions)}catch(de){return q(de)}this.loaded={};const me={};if(ae){const de=ae.finish();de&&(me.resourceTiming={},me.resourceTiming[$.source]=JSON.parse(JSON.stringify(de)))}q(null,me)}})}reloadTile($,q){const J=this.loaded;return J&&J[$.uid]?super.reloadTile($,q):this.loadTile($,q)}removeSource($,q){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),q()}getClusterExpansionZoom($,q){try{q(null,this._geoJSONIndex.getClusterExpansionZoom($.clusterId))}catch(J){q(J)}}getClusterChildren($,q){try{q(null,this._geoJSONIndex.getChildren($.clusterId))}catch(J){q(J)}}getClusterLeaves($,q){try{q(null,this._geoJSONIndex.getLeaves($.clusterId,$.limit,$.offset))}catch(J){q(J)}}}class Ks{constructor($){this.self=$,this.actor=new o.C($,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:B,geojson:Bt},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(q,J)=>{if(this.workerSourceTypes[q])throw new Error(`Worker source with name "${q}" already registered.`);this.workerSourceTypes[q]=J},this.self.registerRTLTextPlugin=q=>{if(o.bD.isParsed())throw new Error("RTL text plugin already registered.");o.bD.applyArabicShaping=q.applyArabicShaping,o.bD.processBidirectionalText=q.processBidirectionalText,o.bD.processStyledBidirectionalText=q.processStyledBidirectionalText}}setReferrer($,q){this.referrer=q}setImages($,q,J){this.availableImages[$]=q;for(const ae in this.workerSources[$]){const le=this.workerSources[$][ae];for(const be in le)le[be].availableImages=q}J()}setLayers($,q,J){this.getLayerIndex($).replace(q),J()}updateLayers($,q,J){this.getLayerIndex($).update(q.layers,q.removedIds),J()}loadTile($,q,J){this.getWorkerSource($,q.type,q.source).loadTile(q,J)}loadDEMTile($,q,J){this.getDEMWorkerSource($,q.source).loadTile(q,J)}reloadTile($,q,J){this.getWorkerSource($,q.type,q.source).reloadTile(q,J)}abortTile($,q,J){this.getWorkerSource($,q.type,q.source).abortTile(q,J)}removeTile($,q,J){this.getWorkerSource($,q.type,q.source).removeTile(q,J)}removeDEMTile($,q){this.getDEMWorkerSource($,q.source).removeTile(q)}removeSource($,q,J){if(!this.workerSources[$]||!this.workerSources[$][q.type]||!this.workerSources[$][q.type][q.source])return;const ae=this.workerSources[$][q.type][q.source];delete this.workerSources[$][q.type][q.source],ae.removeSource!==void 0?ae.removeSource(q,J):J()}loadWorkerSource($,q,J){try{this.self.importScripts(q.url),J()}catch(ae){J(ae.toString())}}syncRTLPluginState($,q,J){try{o.bD.setState(q);const ae=o.bD.getPluginURL();if(o.bD.isLoaded()&&!o.bD.isParsed()&&ae!=null){this.self.importScripts(ae);const le=o.bD.isParsed();J(le?void 0:new Error(`RTL Text Plugin failed to import scripts from ${ae}`),le)}}catch(ae){J(ae.toString())}}getAvailableImages($){let q=this.availableImages[$];return q||(q=[]),q}getLayerIndex($){let q=this.layerIndexes[$];return q||(q=this.layerIndexes[$]=new w),q}getWorkerSource($,q,J){return this.workerSources[$]||(this.workerSources[$]={}),this.workerSources[$][q]||(this.workerSources[$][q]={}),this.workerSources[$][q][J]||(this.workerSources[$][q][J]=new this.workerSourceTypes[q]({send:(ae,le,be)=>{this.actor.send(ae,le,be,$)}},this.getLayerIndex($),this.getAvailableImages($))),this.workerSources[$][q][J]}getDEMWorkerSource($,q){return this.demWorkerSources[$]||(this.demWorkerSources[$]={}),this.demWorkerSources[$][q]||(this.demWorkerSources[$][q]=new V),this.demWorkerSources[$][q]}}return o.i()&&(self.worker=new Ks(self)),Ks}),h(["./shared"],function(o){var w="3.6.2";class b{static testProp(i){if(!b.docStyle)return i[0];for(let u=0;u<i.length;u++)if(i[u]in b.docStyle)return i[u];return i[0]}static create(i,u,p){const g=window.document.createElement(i);return u!==void 0&&(g.className=u),p&&p.appendChild(g),g}static createNS(i,u){return window.document.createElementNS(i,u)}static disableDrag(){b.docStyle&&b.selectProp&&(b.userSelect=b.docStyle[b.selectProp],b.docStyle[b.selectProp]="none")}static enableDrag(){b.docStyle&&b.selectProp&&(b.docStyle[b.selectProp]=b.userSelect)}static setTransform(i,u){i.style[b.transformProp]=u}static addEventListener(i,u,p,g={}){i.addEventListener(u,p,"passive"in g?g:g.capture)}static removeEventListener(i,u,p,g={}){i.removeEventListener(u,p,"passive"in g?g:g.capture)}static suppressClickInternal(i){i.preventDefault(),i.stopPropagation(),window.removeEventListener("click",b.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",b.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",b.suppressClickInternal,!0)},0)}static mousePos(i,u){const p=i.getBoundingClientRect();return new o.P(u.clientX-p.left-i.clientLeft,u.clientY-p.top-i.clientTop)}static touchPos(i,u){const p=i.getBoundingClientRect(),g=[];for(let x=0;x<u.length;x++)g.push(new o.P(u[x].clientX-p.left-i.clientLeft,u[x].clientY-p.top-i.clientTop));return g}static mouseButton(i){return i.button}static remove(i){i.parentNode&&i.parentNode.removeChild(i)}}b.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,b.selectProp=b.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),b.transformProp=b.testProp(["transform","WebkitTransform"]);const A={supported:!1,testSupport:function(y){!B&&M&&(V?j(y):C=y)}};let C,M,B=!1,V=!1;function j(y){const i=y.createTexture();y.bindTexture(y.TEXTURE_2D,i);try{if(y.texImage2D(y.TEXTURE_2D,0,y.RGBA,y.RGBA,y.UNSIGNED_BYTE,M),y.isContextLost())return;A.supported=!0}catch{}y.deleteTexture(i),B=!0}var Z,N;typeof document<"u"&&(M=document.createElement("img"),M.onload=function(){C&&j(C),C=null,V=!0},M.onerror=function(){B=!0,C=null},M.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(y){let i,u,p,g;y.resetRequestQueue=()=>{i=[],u=0,p=0,g={}},y.addThrottleControl=R=>{const L=p++;return g[L]=R,L},y.removeThrottleControl=R=>{delete g[R],E()},y.getImage=(R,L,z=!0)=>{A.supported&&(R.headers||(R.headers={}),R.headers.accept="image/webp,*/*");const G={requestParameters:R,supportImageRefresh:z,callback:L,cancelled:!1,completed:!1,cancel:()=>{G.completed||G.cancelled||(G.cancelled=!0,G.innerRequest&&(G.innerRequest.cancel(),u--),E())}};return i.push(G),E(),G};const x=R=>{const{requestParameters:L,supportImageRefresh:z,callback:G}=R;return o.e(L,{type:"image"}),(z!==!1||o.i()||o.g(L.url)||L.headers&&!Object.keys(L.headers).reduce((re,ne)=>re&&ne==="accept",!0)?o.m:k)(L,(re,ne,se,ee)=>{T(R,G,re,ne,se,ee)})},T=(R,L,z,G,re,ne)=>{z?L(z):G instanceof HTMLImageElement||o.a(G)?L(null,G):G&&((se,ee)=>{typeof createImageBitmap=="function"?o.b(se,ee):o.d(se,ee)})(G,(se,ee)=>{se!=null?L(se):ee!=null&&L(null,ee,{cacheControl:re,expires:ne})}),R.cancelled||(R.completed=!0,u--,E())},E=()=>{const R=(()=>{const L=Object.keys(g);let z=!1;if(L.length>0){for(const G of L)if(z=g[G](),z)break}return z})()?o.c.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:o.c.MAX_PARALLEL_IMAGE_REQUESTS;for(let L=u;L<R&&i.length>0;L++){const z=i.shift();if(z.cancelled){L--;continue}const G=x(z);u++,z.innerRequest=G}},k=(R,L)=>{const z=new Image,G=R.url;let re=!1;const ne=R.credentials;return ne&&ne==="include"?z.crossOrigin="use-credentials":(ne&&ne==="same-origin"||!o.s(G))&&(z.crossOrigin="anonymous"),z.fetchPriority="high",z.onload=()=>{L(null,z),z.onerror=z.onload=null},z.onerror=()=>{re||L(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")),z.onerror=z.onload=null},z.src=G,{cancel:()=>{re=!0,z.src=""}}}}(Z||(Z={})),Z.resetRequestQueue(),function(y){y.Glyphs="Glyphs",y.Image="Image",y.Source="Source",y.SpriteImage="SpriteImage",y.SpriteJSON="SpriteJSON",y.Style="Style",y.Tile="Tile",y.Unknown="Unknown"}(N||(N={}));class F{constructor(i){this._transformRequestFn=i}transformRequest(i,u){return this._transformRequestFn&&this._transformRequestFn(i,u)||{url:i}}normalizeSpriteURL(i,u,p){const g=function(x){const T=x.match(W);if(!T)throw new Error(`Unable to parse URL "${x}"`);return{protocol:T[1],authority:T[2],path:T[3]||"/",params:T[4]?T[4].split("&"):[]}}(i);return g.path+=`${u}${p}`,function(x){const T=x.params.length?`?${x.params.join("&")}`:"";return`${x.protocol}://${x.authority}${x.path}${T}`}(g)}setTransformRequest(i){this._transformRequestFn=i}}const W=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Q(y){var i=new o.A(3);return i[0]=y[0],i[1]=y[1],i[2]=y[2],i}var fe,Ee=function(y,i,u){return y[0]=i[0]-u[0],y[1]=i[1]-u[1],y[2]=i[2]-u[2],y};fe=new o.A(3),o.A!=Float32Array&&(fe[0]=0,fe[1]=0,fe[2]=0);var Re=function(y){var i=y[0],u=y[1];return i*i+u*u};function Te(y){const i=[];if(typeof y=="string")i.push({id:"default",url:y});else if(y&&y.length>0){const u=[];for(const{id:p,url:g}of y){const x=`${p}${g}`;u.indexOf(x)===-1&&(u.push(x),i.push({id:p,url:g}))}}return i}function Ne(y,i,u,p,g){if(p)return void y(p);if(g!==Object.values(i).length||g!==Object.values(u).length)return;const x={};for(const T in i){x[T]={};const E=o.h.getImageCanvasContext(u[T]),k=i[T];for(const R in k){const{width:L,height:z,x:G,y:re,sdf:ne,pixelRatio:se,stretchX:ee,stretchY:ve,content:Ce}=k[R];x[T][R]={data:null,pixelRatio:se,sdf:ne,stretchX:ee,stretchY:ve,content:Ce,spriteData:{width:L,height:z,x:G,y:re,context:E}}}}y(null,x)}(function(){var y=new o.A(2);o.A!=Float32Array&&(y[0]=0,y[1]=0)})();class ke{constructor(i,u,p,g){this.context=i,this.format=p,this.texture=i.gl.createTexture(),this.update(u,g)}update(i,u,p){const{width:g,height:x}=i,T=!(this.size&&this.size[0]===g&&this.size[1]===x||p),{context:E}=this,{gl:k}=E;if(this.useMipmap=!!(u&&u.useMipmap),k.bindTexture(k.TEXTURE_2D,this.texture),E.pixelStoreUnpackFlipY.set(!1),E.pixelStoreUnpack.set(1),E.pixelStoreUnpackPremultiplyAlpha.set(this.format===k.RGBA&&(!u||u.premultiply!==!1)),T)this.size=[g,x],i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||o.a(i)?k.texImage2D(k.TEXTURE_2D,0,this.format,this.format,k.UNSIGNED_BYTE,i):k.texImage2D(k.TEXTURE_2D,0,this.format,g,x,0,this.format,k.UNSIGNED_BYTE,i.data);else{const{x:R,y:L}=p||{x:0,y:0};i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||o.a(i)?k.texSubImage2D(k.TEXTURE_2D,0,R,L,k.RGBA,k.UNSIGNED_BYTE,i):k.texSubImage2D(k.TEXTURE_2D,0,R,L,g,x,k.RGBA,k.UNSIGNED_BYTE,i.data)}this.useMipmap&&this.isSizePowerOfTwo()&&k.generateMipmap(k.TEXTURE_2D)}bind(i,u,p){const{context:g}=this,{gl:x}=g;x.bindTexture(x.TEXTURE_2D,this.texture),p!==x.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(p=x.LINEAR),i!==this.filter&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MAG_FILTER,i),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MIN_FILTER,p||i),this.filter=i),u!==this.wrap&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_S,u),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_T,u),this.wrap=u)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:i}=this.context;i.deleteTexture(this.texture),this.texture=null}}function ft(y){const{userImage:i}=y;return!!(i&&i.render&&i.render())&&(y.data.replace(new Uint8Array(i.data.buffer)),!0)}class je extends o.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new o.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(i){if(this.loaded!==i&&(this.loaded=i,i)){for(const{ids:u,callback:p}of this.requestors)this._notify(u,p);this.requestors=[]}}getImage(i){const u=this.images[i];if(u&&!u.data&&u.spriteData){const p=u.spriteData;u.data=new o.R({width:p.width,height:p.height},p.context.getImageData(p.x,p.y,p.width,p.height).data),u.spriteData=null}return u}addImage(i,u){if(this.images[i])throw new Error(`Image id ${i} already exist, use updateImage instead`);this._validate(i,u)&&(this.images[i]=u)}_validate(i,u){let p=!0;const g=u.data||u.spriteData;return this._validateStretch(u.stretchX,g&&g.width)||(this.fire(new o.j(new Error(`Image "${i}" has invalid "stretchX" value`))),p=!1),this._validateStretch(u.stretchY,g&&g.height)||(this.fire(new o.j(new Error(`Image "${i}" has invalid "stretchY" value`))),p=!1),this._validateContent(u.content,u)||(this.fire(new o.j(new Error(`Image "${i}" has invalid "content" value`))),p=!1),p}_validateStretch(i,u){if(!i)return!0;let p=0;for(const g of i){if(g[0]<p||g[1]<g[0]||u<g[1])return!1;p=g[1]}return!0}_validateContent(i,u){if(!i)return!0;if(i.length!==4)return!1;const p=u.spriteData,g=p&&p.width||u.data.width,x=p&&p.height||u.data.height;return!(i[0]<0||g<i[0]||i[1]<0||x<i[1]||i[2]<0||g<i[2]||i[3]<0||x<i[3]||i[2]<i[0]||i[3]<i[1])}updateImage(i,u,p=!0){const g=this.getImage(i);if(p&&(g.data.width!==u.data.width||g.data.height!==u.data.height))throw new Error(`size mismatch between old image (${g.data.width}x${g.data.height}) and new image (${u.data.width}x${u.data.height}).`);u.version=g.version+1,this.images[i]=u,this.updatedImages[i]=!0}removeImage(i){const u=this.images[i];delete this.images[i],delete this.patterns[i],u.userImage&&u.userImage.onRemove&&u.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(i,u){let p=!0;if(!this.isLoaded())for(const g of i)this.images[g]||(p=!1);this.isLoaded()||p?this._notify(i,u):this.requestors.push({ids:i,callback:u})}_notify(i,u){const p={};for(const g of i){let x=this.getImage(g);x||(this.fire(new o.k("styleimagemissing",{id:g})),x=this.getImage(g)),x?p[g]={data:x.data.clone(),pixelRatio:x.pixelRatio,sdf:x.sdf,version:x.version,stretchX:x.stretchX,stretchY:x.stretchY,content:x.content,hasRenderCallback:!!(x.userImage&&x.userImage.render)}:o.w(`Image "${g}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}u(null,p)}getPixelSize(){const{width:i,height:u}=this.atlasImage;return{width:i,height:u}}getPattern(i){const u=this.patterns[i],p=this.getImage(i);if(!p)return null;if(u&&u.position.version===p.version)return u.position;if(u)u.position.version=p.version;else{const g={w:p.data.width+2,h:p.data.height+2,x:0,y:0},x=new o.I(g,p);this.patterns[i]={bin:g,position:x}}return this._updatePatternAtlas(),this.patterns[i].position}bind(i){const u=i.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new ke(i,this.atlasImage,u.RGBA),this.atlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE)}_updatePatternAtlas(){const i=[];for(const x in this.patterns)i.push(this.patterns[x].bin);const{w:u,h:p}=o.p(i),g=this.atlasImage;g.resize({width:u||1,height:p||1});for(const x in this.patterns){const{bin:T}=this.patterns[x],E=T.x+1,k=T.y+1,R=this.getImage(x).data,L=R.width,z=R.height;o.R.copy(R,g,{x:0,y:0},{x:E,y:k},{width:L,height:z}),o.R.copy(R,g,{x:0,y:z-1},{x:E,y:k-1},{width:L,height:1}),o.R.copy(R,g,{x:0,y:0},{x:E,y:k+z},{width:L,height:1}),o.R.copy(R,g,{x:L-1,y:0},{x:E-1,y:k},{width:1,height:z}),o.R.copy(R,g,{x:0,y:0},{x:E+L,y:k},{width:1,height:z})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(i){for(const u of i){if(this.callbackDispatchedThisFrame[u])continue;this.callbackDispatchedThisFrame[u]=!0;const p=this.getImage(u);p||o.w(`Image with ID: "${u}" was not found`),ft(p)&&this.updateImage(u,p)}}}const st=1e20;function ut(y,i,u,p,g,x,T,E,k){for(let R=i;R<i+p;R++)Tt(y,u*x+R,x,g,T,E,k);for(let R=u;R<u+g;R++)Tt(y,R*x+i,1,p,T,E,k)}function Tt(y,i,u,p,g,x,T){x[0]=0,T[0]=-st,T[1]=st,g[0]=y[i];for(let E=1,k=0,R=0;E<p;E++){g[E]=y[i+E*u];const L=E*E;do{const z=x[k];R=(g[E]-g[z]+L-z*z)/(E-z)/2}while(R<=T[k]&&--k>-1);k++,x[k]=E,T[k]=R,T[k+1]=st}for(let E=0,k=0;E<p;E++){for(;T[k+1]<E;)k++;const R=x[k],L=E-R;y[i+E*u]=g[R]+L*L}}class ht{constructor(i,u){this.requestManager=i,this.localIdeographFontFamily=u,this.entries={}}setURL(i){this.url=i}getGlyphs(i,u){const p=[];for(const g in i)for(const x of i[g])p.push({stack:g,id:x});o.o(p,({stack:g,id:x},T)=>{let E=this.entries[g];E||(E=this.entries[g]={glyphs:{},requests:{},ranges:{}});let k=E.glyphs[x];if(k!==void 0)return void T(null,{stack:g,id:x,glyph:k});if(k=this._tinySDF(E,g,x),k)return E.glyphs[x]=k,void T(null,{stack:g,id:x,glyph:k});const R=Math.floor(x/256);if(256*R>65535)return void T(new Error("glyphs > 65535 not supported"));if(E.ranges[R])return void T(null,{stack:g,id:x,glyph:k});if(!this.url)return void T(new Error("glyphsUrl is not set"));let L=E.requests[R];L||(L=E.requests[R]=[],ht.loadGlyphRange(g,R,this.url,this.requestManager,(z,G)=>{if(G){for(const re in G)this._doesCharSupportLocalGlyph(+re)||(E.glyphs[+re]=G[+re]);E.ranges[R]=!0}for(const re of L)re(z,G);delete E.requests[R]})),L.push((z,G)=>{z?T(z):G&&T(null,{stack:g,id:x,glyph:G[x]||null})})},(g,x)=>{if(g)u(g);else if(x){const T={};for(const{stack:E,id:k,glyph:R}of x)(T[E]||(T[E]={}))[k]=R&&{id:R.id,bitmap:R.bitmap.clone(),metrics:R.metrics};u(null,T)}})}_doesCharSupportLocalGlyph(i){return!!this.localIdeographFontFamily&&(o.u["CJK Unified Ideographs"](i)||o.u["Hangul Syllables"](i)||o.u.Hiragana(i)||o.u.Katakana(i))}_tinySDF(i,u,p){const g=this.localIdeographFontFamily;if(!g||!this._doesCharSupportLocalGlyph(p))return;let x=i.tinySDF;if(!x){let E="400";/bold/i.test(u)?E="900":/medium/i.test(u)?E="500":/light/i.test(u)&&(E="200"),x=i.tinySDF=new ht.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:g,fontWeight:E})}const T=x.draw(String.fromCharCode(p));return{id:p,bitmap:new o.q({width:T.width||60,height:T.height||60},T.data),metrics:{width:T.glyphWidth/2||24,height:T.glyphHeight/2||24,left:T.glyphLeft/2+.5||0,top:T.glyphTop/2-27.5||-8,advance:T.glyphAdvance/2||24,isDoubleResolution:!0}}}}ht.loadGlyphRange=function(y,i,u,p,g){const x=256*i,T=x+255,E=p.transformRequest(u.replace("{fontstack}",y).replace("{range}",`${x}-${T}`),N.Glyphs);o.l(E,(k,R)=>{if(k)g(k);else if(R){const L={};for(const z of o.n(R))L[z.id]=z;g(null,L)}})},ht.TinySDF=class{constructor({fontSize:y=24,buffer:i=3,radius:u=8,cutoff:p=.25,fontFamily:g="sans-serif",fontWeight:x="normal",fontStyle:T="normal"}={}){this.buffer=i,this.cutoff=p,this.radius=u;const E=this.size=y+4*i,k=this._createCanvas(E),R=this.ctx=k.getContext("2d",{willReadFrequently:!0});R.font=`${T} ${x} ${y}px ${g}`,R.textBaseline="alphabetic",R.textAlign="left",R.fillStyle="black",this.gridOuter=new Float64Array(E*E),this.gridInner=new Float64Array(E*E),this.f=new Float64Array(E),this.z=new Float64Array(E+1),this.v=new Uint16Array(E)}_createCanvas(y){const i=document.createElement("canvas");return i.width=i.height=y,i}draw(y){const{width:i,actualBoundingBoxAscent:u,actualBoundingBoxDescent:p,actualBoundingBoxLeft:g,actualBoundingBoxRight:x}=this.ctx.measureText(y),T=Math.ceil(u),E=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(x-g))),k=Math.min(this.size-this.buffer,T+Math.ceil(p)),R=E+2*this.buffer,L=k+2*this.buffer,z=Math.max(R*L,0),G=new Uint8ClampedArray(z),re={data:G,width:R,height:L,glyphWidth:E,glyphHeight:k,glyphTop:T,glyphLeft:0,glyphAdvance:i};if(E===0||k===0)return re;const{ctx:ne,buffer:se,gridInner:ee,gridOuter:ve}=this;ne.clearRect(se,se,E,k),ne.fillText(y,se,se+T);const Ce=ne.getImageData(se,se,E,k);ve.fill(st,0,z),ee.fill(0,0,z);for(let ue=0;ue<k;ue++)for(let xe=0;xe<E;xe++){const Ae=Ce.data[4*(ue*E+xe)+3]/255;if(Ae===0)continue;const Ie=(ue+se)*R+xe+se;if(Ae===1)ve[Ie]=0,ee[Ie]=st;else{const Oe=.5-Ae;ve[Ie]=Oe>0?Oe*Oe:0,ee[Ie]=Oe<0?Oe*Oe:0}}ut(ve,0,0,R,L,R,this.f,this.v,this.z),ut(ee,se,se,E,k,R,this.f,this.v,this.z);for(let ue=0;ue<z;ue++){const xe=Math.sqrt(ve[ue])-Math.sqrt(ee[ue]);G[ue]=Math.round(255-255*(xe/this.radius+this.cutoff))}return re}};class Ue{constructor(){this.specification=o.v.light.position}possiblyEvaluate(i,u){return o.z(i.expression.evaluate(u))}interpolate(i,u,p){return{x:o.B.number(i.x,u.x,p),y:o.B.number(i.y,u.y,p),z:o.B.number(i.z,u.z,p)}}}let De;class Xe extends o.E{constructor(i){super(),De=De||new o.r({anchor:new o.D(o.v.light.anchor),position:new Ue,color:new o.D(o.v.light.color),intensity:new o.D(o.v.light.intensity)}),this._transitionable=new o.T(De),this.setLight(i),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(i,u={}){if(!this._validate(o.t,i,u))for(const p in i){const g=i[p];p.endsWith("-transition")?this._transitionable.setTransition(p.slice(0,-11),g):this._transitionable.setValue(p,g)}}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,u,p){return(!p||p.validate!==!1)&&o.x(this,i.call(o.y,o.e({value:u,style:{glyphs:!0,sprite:!0},styleSpec:o.v})))}}class mt{constructor(i,u){this.width=i,this.height=u,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(i,u){const p=i.join(",")+String(u);return this.dashEntry[p]||(this.dashEntry[p]=this.addDash(i,u)),this.dashEntry[p]}getDashRanges(i,u,p){const g=[];let x=i.length%2==1?-i[i.length-1]*p:0,T=i[0]*p,E=!0;g.push({left:x,right:T,isDash:E,zeroLength:i[0]===0});let k=i[0];for(let R=1;R<i.length;R++){E=!E;const L=i[R];x=k*p,k+=L,T=k*p,g.push({left:x,right:T,isDash:E,zeroLength:L===0})}return g}addRoundDash(i,u,p){const g=u/2;for(let x=-p;x<=p;x++){const T=this.width*(this.nextRow+p+x);let E=0,k=i[E];for(let R=0;R<this.width;R++){R/k.right>1&&(k=i[++E]);const L=Math.abs(R-k.left),z=Math.abs(R-k.right),G=Math.min(L,z);let re;const ne=x/p*(g+1);if(k.isDash){const se=g-Math.abs(ne);re=Math.sqrt(G*G+se*se)}else re=g-Math.sqrt(G*G+ne*ne);this.data[T+R]=Math.max(0,Math.min(255,re+128))}}}addRegularDash(i){for(let E=i.length-1;E>=0;--E){const k=i[E],R=i[E+1];k.zeroLength?i.splice(E,1):R&&R.isDash===k.isDash&&(R.left=k.left,i.splice(E,1))}const u=i[0],p=i[i.length-1];u.isDash===p.isDash&&(u.left=p.left-this.width,p.right=u.right+this.width);const g=this.width*this.nextRow;let x=0,T=i[x];for(let E=0;E<this.width;E++){E/T.right>1&&(T=i[++x]);const k=Math.abs(E-T.left),R=Math.abs(E-T.right),L=Math.min(k,R);this.data[g+E]=Math.max(0,Math.min(255,(T.isDash?L:-L)+128))}}addDash(i,u){const p=u?7:0,g=2*p+1;if(this.nextRow+g>this.height)return o.w("LineAtlas out of space"),null;let x=0;for(let E=0;E<i.length;E++)x+=i[E];if(x!==0){const E=this.width/x,k=this.getDashRanges(i,this.width,E);u?this.addRoundDash(k,E,p):this.addRegularDash(k)}const T={y:(this.nextRow+p+.5)/this.height,height:2*p/this.height,width:x};return this.nextRow+=g,this.dirty=!0,T}bind(i){const u=i.gl;this.texture?(u.bindTexture(u.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,u.texSubImage2D(u.TEXTURE_2D,0,0,0,this.width,this.height,u.ALPHA,u.UNSIGNED_BYTE,this.data))):(this.texture=u.createTexture(),u.bindTexture(u.TEXTURE_2D,this.texture),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,u.LINEAR),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,u.LINEAR),u.texImage2D(u.TEXTURE_2D,0,u.ALPHA,this.width,this.height,0,u.ALPHA,u.UNSIGNED_BYTE,this.data))}}class zt{constructor(i,u,p){this.workerPool=i,this.actors=[],this.currentActor=0,this.id=p;const g=this.workerPool.acquire(p);for(let x=0;x<g.length;x++){const T=new o.C(g[x],u,p);T.name=`Worker ${x}`,this.actors.push(T)}if(!this.actors.length)throw new Error("No actors found")}broadcast(i,u,p){o.o(this.actors,(g,x)=>{g.send(i,u,x)},p=p||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(i=!0){this.actors.forEach(u=>{u.remove()}),this.actors=[],i&&this.workerPool.release(this.id)}}function $t(y,i,u){const p=function(g,x){if(g)return u(g);if(x){const T=o.F(o.e(x,y),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);x.vector_layers&&(T.vectorLayers=x.vector_layers,T.vectorLayerIds=T.vectorLayers.map(E=>E.id)),u(null,T)}};return y.url?o.f(i.transformRequest(y.url,N.Source),p):o.h.frame(()=>p(null,y))}class Dt{constructor(i,u){i&&(u?this.setSouthWest(i).setNorthEast(u):Array.isArray(i)&&(i.length===4?this.setSouthWest([i[0],i[1]]).setNorthEast([i[2],i[3]]):this.setSouthWest(i[0]).setNorthEast(i[1])))}setNorthEast(i){return this._ne=i instanceof o.L?new o.L(i.lng,i.lat):o.L.convert(i),this}setSouthWest(i){return this._sw=i instanceof o.L?new o.L(i.lng,i.lat):o.L.convert(i),this}extend(i){const u=this._sw,p=this._ne;let g,x;if(i instanceof o.L)g=i,x=i;else{if(!(i instanceof Dt))return Array.isArray(i)?i.length===4||i.every(Array.isArray)?this.extend(Dt.convert(i)):this.extend(o.L.convert(i)):i&&("lng"in i||"lon"in i)&&"lat"in i?this.extend(o.L.convert(i)):this;if(g=i._sw,x=i._ne,!g||!x)return this}return u||p?(u.lng=Math.min(g.lng,u.lng),u.lat=Math.min(g.lat,u.lat),p.lng=Math.max(x.lng,p.lng),p.lat=Math.max(x.lat,p.lat)):(this._sw=new o.L(g.lng,g.lat),this._ne=new o.L(x.lng,x.lat)),this}getCenter(){return new o.L((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new o.L(this.getWest(),this.getNorth())}getSouthEast(){return new o.L(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(i){const{lng:u,lat:p}=o.L.convert(i);let g=this._sw.lng<=u&&u<=this._ne.lng;return this._sw.lng>this._ne.lng&&(g=this._sw.lng>=u&&u>=this._ne.lng),this._sw.lat<=p&&p<=this._ne.lat&&g}static convert(i){return i instanceof Dt?i:i&&new Dt(i)}static fromLngLat(i,u=0){const p=360*u/40075017,g=p/Math.cos(Math.PI/180*i.lat);return new Dt(new o.L(i.lng-g,i.lat-p),new o.L(i.lng+g,i.lat+p))}}class Sn{constructor(i,u,p){this.bounds=Dt.convert(this.validateBounds(i)),this.minzoom=u||0,this.maxzoom=p||24}validateBounds(i){return Array.isArray(i)&&i.length===4?[Math.max(-180,i[0]),Math.max(-90,i[1]),Math.min(180,i[2]),Math.min(90,i[3])]:[-180,-90,180,90]}contains(i){const u=Math.pow(2,i.z),p=Math.floor(o.G(this.bounds.getWest())*u),g=Math.floor(o.H(this.bounds.getNorth())*u),x=Math.ceil(o.G(this.bounds.getEast())*u),T=Math.ceil(o.H(this.bounds.getSouth())*u);return i.x>=p&&i.x<x&&i.y>=g&&i.y<T}}class vi extends o.E{constructor(i,u,p,g){if(super(),this.load=()=>{this._loaded=!1,this.fire(new o.k("dataloading",{dataType:"source"})),this._tileJSONRequest=$t(this._options,this.map._requestManager,(x,T)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),x?this.fire(new o.j(x)):T&&(o.e(this,T),T.bounds&&(this.tileBounds=new Sn(T.bounds,this.minzoom,this.maxzoom)),this.fire(new o.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.k("data",{dataType:"source",sourceDataType:"content"})))})},this.serialize=()=>o.e({},this._options),this.id=i,this.dispatcher=p,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,o.e(this,o.F(u,["url","scheme","tileSize","promoteId"])),this._options=o.e({type:"vector"},u),this._collectResourceTiming=u.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(g)}loaded(){return this._loaded}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}onAdd(i){this.map=i,this.load()}setSourceProperty(i){this._tileJSONRequest&&this._tileJSONRequest.cancel(),i(),this.load()}setTiles(i){return this.setSourceProperty(()=>{this._options.tiles=i}),this}setUrl(i){return this.setSourceProperty(()=>{this.url=i,this._options.url=i}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}loadTile(i,u){const p=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),g={request:this.map._requestManager.transformRequest(p,N.Tile),uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,tileSize:this.tileSize*i.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function x(T,E){return delete i.request,i.aborted?u(null):T&&T.status!==404?u(T):(E&&E.resourceTiming&&(i.resourceTiming=E.resourceTiming),this.map._refreshExpiredTiles&&E&&i.setExpiryData(E),i.loadVectorData(E,this.map.painter),u(null),void(i.reloadCallback&&(this.loadTile(i,i.reloadCallback),i.reloadCallback=null)))}g.request.collectResourceTiming=this._collectResourceTiming,i.actor&&i.state!=="expired"?i.state==="loading"?i.reloadCallback=u:i.request=i.actor.send("reloadTile",g,x.bind(this)):(i.actor=this.dispatcher.getActor(),i.request=i.actor.send("loadTile",g,x.bind(this)))}abortTile(i){i.request&&(i.request.cancel(),delete i.request),i.actor&&i.actor.send("abortTile",{uid:i.uid,type:this.type,source:this.id},void 0)}unloadTile(i){i.unloadVectorData(),i.actor&&i.actor.send("removeTile",{uid:i.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class gr extends o.E{constructor(i,u,p,g){super(),this.id=i,this.dispatcher=p,this.setEventedParent(g),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=o.e({type:"raster"},u),o.e(this,o.F(u,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new o.k("dataloading",{dataType:"source"})),this._tileJSONRequest=$t(this._options,this.map._requestManager,(i,u)=>{this._tileJSONRequest=null,this._loaded=!0,i?this.fire(new o.j(i)):u&&(o.e(this,u),u.bounds&&(this.tileBounds=new Sn(u.bounds,this.minzoom,this.maxzoom)),this.fire(new o.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.k("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(i){this.map=i,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}setSourceProperty(i){this._tileJSONRequest&&this._tileJSONRequest.cancel(),i(),this.load()}setTiles(i){return this.setSourceProperty(()=>{this._options.tiles=i}),this}serialize(){return o.e({},this._options)}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}loadTile(i,u){const p=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);i.request=Z.getImage(this.map._requestManager.transformRequest(p,N.Tile),(g,x,T)=>{if(delete i.request,i.aborted)i.state="unloaded",u(null);else if(g)i.state="errored",u(g);else if(x){this.map._refreshExpiredTiles&&T&&i.setExpiryData(T);const E=this.map.painter.context,k=E.gl;i.texture=this.map.painter.getTileTexture(x.width),i.texture?i.texture.update(x,{useMipmap:!0}):(i.texture=new ke(E,x,k.RGBA,{useMipmap:!0}),i.texture.bind(k.LINEAR,k.CLAMP_TO_EDGE,k.LINEAR_MIPMAP_NEAREST),E.extTextureFilterAnisotropic&&k.texParameterf(k.TEXTURE_2D,E.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,E.extTextureFilterAnisotropicMax)),i.state="loaded",u(null)}},this.map._refreshExpiredTiles)}abortTile(i,u){i.request&&(i.request.cancel(),delete i.request),u()}unloadTile(i,u){i.texture&&this.map.painter.saveTileTexture(i.texture),u()}hasTransition(){return!1}}class Jr extends gr{constructor(i,u,p,g){super(i,u,p,g),this.type="raster-dem",this.maxzoom=22,this._options=o.e({type:"raster-dem"},u),this.encoding=u.encoding||"mapbox",this.redFactor=u.redFactor,this.greenFactor=u.greenFactor,this.blueFactor=u.blueFactor,this.baseShift=u.baseShift}loadTile(i,u){const p=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),g=this.map._requestManager.transformRequest(p,N.Tile);function x(T,E){T&&(i.state="errored",u(T)),E&&(i.dem=E,i.needsHillshadePrepare=!0,i.needsTerrainPrepare=!0,i.state="loaded",u(null))}i.neighboringTiles=this._getNeighboringTiles(i.tileID),i.request=Z.getImage(g,(T,E,k)=>o._(this,void 0,void 0,function*(){if(delete i.request,i.aborted)i.state="unloaded",u(null);else if(T)i.state="errored",u(T);else if(E){this.map._refreshExpiredTiles&&i.setExpiryData(k);const R=o.a(E)&&o.J()?E:yield function(z){return o._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&o.K()){const G=z.width+2,re=z.height+2;try{return new o.R({width:G,height:re},yield o.M(z,-1,-1,G,re))}catch{}}return o.h.getImageData(z,1)})}(E),L={uid:i.uid,coord:i.tileID,source:this.id,rawImageData:R,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};i.actor&&i.state!=="expired"||(i.actor=this.dispatcher.getActor(),i.actor.send("loadDEMTile",L,x))}}),this.map._refreshExpiredTiles)}_getNeighboringTiles(i){const u=i.canonical,p=Math.pow(2,u.z),g=(u.x-1+p)%p,x=u.x===0?i.wrap-1:i.wrap,T=(u.x+1+p)%p,E=u.x+1===p?i.wrap+1:i.wrap,k={};return k[new o.O(i.overscaledZ,x,u.z,g,u.y).key]={backfilled:!1},k[new o.O(i.overscaledZ,E,u.z,T,u.y).key]={backfilled:!1},u.y>0&&(k[new o.O(i.overscaledZ,x,u.z,g,u.y-1).key]={backfilled:!1},k[new o.O(i.overscaledZ,i.wrap,u.z,u.x,u.y-1).key]={backfilled:!1},k[new o.O(i.overscaledZ,E,u.z,T,u.y-1).key]={backfilled:!1}),u.y+1<p&&(k[new o.O(i.overscaledZ,x,u.z,g,u.y+1).key]={backfilled:!1},k[new o.O(i.overscaledZ,i.wrap,u.z,u.x,u.y+1).key]={backfilled:!1},k[new o.O(i.overscaledZ,E,u.z,T,u.y+1).key]={backfilled:!1}),k}unloadTile(i){i.demTexture&&this.map.painter.saveTileTexture(i.demTexture),i.fbo&&(i.fbo.destroy(),delete i.fbo),i.dem&&delete i.dem,delete i.neighboringTiles,i.state="unloaded",i.actor&&i.actor.send("removeDEMTile",{uid:i.uid,source:this.id})}}class Bi extends o.E{constructor(i,u,p,g){super(),this.load=()=>{this._updateWorkerData()},this.serialize=()=>o.e({},this._options,{type:this.type,data:this._data}),this.id=i,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=p.getActor(),this.setEventedParent(g),this._data=u.data,this._options=o.e({},u),this._collectResourceTiming=u.collectResourceTiming,u.maxzoom!==void 0&&(this.maxzoom=u.maxzoom),u.type&&(this.type=u.type),u.attribution&&(this.attribution=u.attribution),this.promoteId=u.promoteId;const x=o.N/this.tileSize;this.workerOptions=o.e({source:this.id,cluster:u.cluster||!1,geojsonVtOptions:{buffer:(u.buffer!==void 0?u.buffer:128)*x,tolerance:(u.tolerance!==void 0?u.tolerance:.375)*x,extent:o.N,maxZoom:this.maxzoom,lineMetrics:u.lineMetrics||!1,generateId:u.generateId||!1},superclusterOptions:{maxZoom:u.clusterMaxZoom!==void 0?u.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,u.clusterMinPoints||2),extent:o.N,radius:(u.clusterRadius||50)*x,log:!1,generateId:u.generateId||!1},clusterProperties:u.clusterProperties,filter:u.filter},u.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}onAdd(i){this.map=i,this.load()}setData(i){return this._data=i,this._updateWorkerData(),this}updateData(i){return this._updateWorkerData(i),this}setClusterOptions(i){return this.workerOptions.cluster=i.cluster,i&&(i.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=i.clusterRadius),i.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=i.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(i,u){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:i,source:this.id},u),this}getClusterChildren(i,u){return this.actor.send("geojson.getClusterChildren",{clusterId:i,source:this.id},u),this}getClusterLeaves(i,u,p,g){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:i,limit:u,offset:p},g),this}_updateWorkerData(i){const u=o.e({},this.workerOptions);i?u.dataDiff=i:typeof this._data=="string"?(u.request=this.map._requestManager.transformRequest(o.h.resolveURL(this._data),N.Source),u.request.collectResourceTiming=this._collectResourceTiming):u.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new o.k("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,u,(p,g)=>{if(this._pendingLoads--,this._removed||g&&g.abandoned)return void this.fire(new o.k("dataabort",{dataType:"source"}));let x=null;if(g&&g.resourceTiming&&g.resourceTiming[this.id]&&(x=g.resourceTiming[this.id].slice(0)),p)return void this.fire(new o.j(p));const T={dataType:"source"};this._collectResourceTiming&&x&&x.length>0&&o.e(T,{resourceTiming:x}),this.fire(new o.k("data",Object.assign(Object.assign({},T),{sourceDataType:"metadata"}))),this.fire(new o.k("data",Object.assign(Object.assign({},T),{sourceDataType:"content"})))})}loaded(){return this._pendingLoads===0}loadTile(i,u){const p=i.actor?"reloadTile":"loadTile";i.actor=this.actor;const g={type:this.type,uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};i.request=this.actor.send(p,g,(x,T)=>(delete i.request,i.unloadVectorData(),i.aborted?u(null):x?u(x):(i.loadVectorData(T,this.map.painter,p==="reloadTile"),u(null))))}abortTile(i){i.request&&(i.request.cancel(),delete i.request),i.aborted=!0}unloadTile(i){i.unloadVectorData(),this.actor.send("removeTile",{uid:i.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}hasTransition(){return!1}}var ei=o.Q([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class ti extends o.E{constructor(i,u,p,g){super(),this.load=(x,T)=>{this._loaded=!1,this.fire(new o.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=Z.getImage(this.map._requestManager.transformRequest(this.url,N.Image),(E,k)=>{this._request=null,this._loaded=!0,E?this.fire(new o.j(E)):k&&(this.image=k,x&&(this.coordinates=x),T&&T(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||!this.image)return;const x=this.map.painter.context,T=x.gl;this.boundsBuffer||(this.boundsBuffer=x.createVertexBuffer(this._boundsArray,ei.members)),this.boundsSegments||(this.boundsSegments=o.S.simpleSegment(0,0,4,2)),this.texture||(this.texture=new ke(x,this.image,T.RGBA),this.texture.bind(T.LINEAR,T.CLAMP_TO_EDGE));let E=!1;for(const k in this.tiles){const R=this.tiles[k];R.state!=="loaded"&&(R.state="loaded",R.texture=this.texture,E=!0)}E&&this.fire(new o.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"image",url:this.options.url,coordinates:this.coordinates}),this.id=i,this.dispatcher=p,this.coordinates=u.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(g),this.options=u}loaded(){return this._loaded}updateImage(i){return i.url?(this._request&&(this._request.cancel(),this._request=null),this.options.url=i.url,this.load(i.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new o.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(i){this.map=i,this.load()}onRemove(){this._request&&(this._request.cancel(),this._request=null)}setCoordinates(i){this.coordinates=i;const u=i.map(o.U.fromLngLat);this.tileID=function(g){let x=1/0,T=1/0,E=-1/0,k=-1/0;for(const G of g)x=Math.min(x,G.x),T=Math.min(T,G.y),E=Math.max(E,G.x),k=Math.max(k,G.y);const R=Math.max(E-x,k-T),L=Math.max(0,Math.floor(-Math.log(R)/Math.LN2)),z=Math.pow(2,L);return new o.W(L,Math.floor((x+E)/2*z),Math.floor((T+k)/2*z))}(u),this.minzoom=this.maxzoom=this.tileID.z;const p=u.map(g=>this.tileID.getTilePoint(g)._round());return this._boundsArray=new o.V,this._boundsArray.emplaceBack(p[0].x,p[0].y,0,0),this._boundsArray.emplaceBack(p[1].x,p[1].y,o.N,0),this._boundsArray.emplaceBack(p[3].x,p[3].y,0,o.N),this._boundsArray.emplaceBack(p[2].x,p[2].y,o.N,o.N),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new o.k("data",{dataType:"source",sourceDataType:"content"})),this}loadTile(i,u){this.tileID&&this.tileID.equals(i.tileID.canonical)?(this.tiles[String(i.tileID.wrap)]=i,i.buckets={},u(null)):(i.state="errored",u(null))}hasTransition(){return!1}}class wa extends ti{constructor(i,u,p,g){super(i,u,p,g),this.load=()=>{this._loaded=!1;const x=this.options;this.urls=[];for(const T of x.urls)this.urls.push(this.map._requestManager.transformRequest(T,N.Source).url);o.X(this.urls,(T,E)=>{this._loaded=!0,T?this.fire(new o.j(T)):E&&(this.video=E,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const x=this.map.painter.context,T=x.gl;this.boundsBuffer||(this.boundsBuffer=x.createVertexBuffer(this._boundsArray,ei.members)),this.boundsSegments||(this.boundsSegments=o.S.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(T.LINEAR,T.CLAMP_TO_EDGE),T.texSubImage2D(T.TEXTURE_2D,0,0,0,T.RGBA,T.UNSIGNED_BYTE,this.video)):(this.texture=new ke(x,this.video,T.RGBA),this.texture.bind(T.LINEAR,T.CLAMP_TO_EDGE));let E=!1;for(const k in this.tiles){const R=this.tiles[k];R.state!=="loaded"&&(R.state="loaded",R.texture=this.texture,E=!0)}E&&this.fire(new o.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"video",urls:this.urls,coordinates:this.coordinates}),this.roundZoom=!0,this.type="video",this.options=u}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(i){if(this.video){const u=this.video.seekable;i<u.start(0)||i>u.end(0)?this.fire(new o.j(new o.Y(`sources.${this.id}`,null,`Playback for this video can be set only between the ${u.start(0)} and ${u.end(0)}-second mark.`))):this.video.currentTime=i}}getVideo(){return this.video}onAdd(i){this.map||(this.map=i,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}hasTransition(){return this.video&&!this.video.paused}}class bs extends ti{constructor(i,u,p,g){super(i,u,p,g),this.load=()=>{this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new o.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},this.prepare=()=>{let x=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,x=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,x=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const T=this.map.painter.context,E=T.gl;this.boundsBuffer||(this.boundsBuffer=T.createVertexBuffer(this._boundsArray,ei.members)),this.boundsSegments||(this.boundsSegments=o.S.simpleSegment(0,0,4,2)),this.texture?(x||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new ke(T,this.canvas,E.RGBA,{premultiply:!0});let k=!1;for(const R in this.tiles){const L=this.tiles[R];L.state!=="loaded"&&(L.state="loaded",L.texture=this.texture,k=!0)}k&&this.fire(new o.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"canvas",coordinates:this.coordinates}),u.coordinates?Array.isArray(u.coordinates)&&u.coordinates.length===4&&!u.coordinates.some(x=>!Array.isArray(x)||x.length!==2||x.some(T=>typeof T!="number"))||this.fire(new o.j(new o.Y(`sources.${i}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new o.j(new o.Y(`sources.${i}`,null,'missing required property "coordinates"'))),u.animate&&typeof u.animate!="boolean"&&this.fire(new o.j(new o.Y(`sources.${i}`,null,'optional "animate" property must be a boolean value'))),u.canvas?typeof u.canvas=="string"||u.canvas instanceof HTMLCanvasElement||this.fire(new o.j(new o.Y(`sources.${i}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new o.j(new o.Y(`sources.${i}`,null,'missing required property "canvas"'))),this.options=u,this.animate=u.animate===void 0||u.animate}getCanvas(){return this.canvas}onAdd(i){this.map=i,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const i of[this.canvas.width,this.canvas.height])if(isNaN(i)||i<=0)return!0;return!1}}const ba={},Vi=y=>{switch(y){case"geojson":return Bi;case"image":return ti;case"raster":return gr;case"raster-dem":return Jr;case"vector":return vi;case"video":return wa;case"canvas":return bs}return ba[y]};function Xa(y,i){const u=o.Z();return o.$(u,u,[1,1,0]),o.a0(u,u,[.5*y.width,.5*y.height,1]),o.a1(u,u,y.calculatePosMatrix(i.toUnwrapped()))}function Sa(y,i,u,p,g,x){const T=function(z,G,re){if(z)for(const ne of z){const se=G[ne];if(se&&se.source===re&&se.type==="fill-extrusion")return!0}else for(const ne in G){const se=G[ne];if(se.source===re&&se.type==="fill-extrusion")return!0}return!1}(g&&g.layers,i,y.id),E=x.maxPitchScaleFactor(),k=y.tilesIn(p,E,T);k.sort(Ws);const R=[];for(const z of k)R.push({wrappedTileID:z.tileID.wrapped().key,queryResults:z.tile.queryRenderedFeatures(i,u,y._state,z.queryGeometry,z.cameraQueryGeometry,z.scale,g,x,E,Xa(y.transform,z.tileID))});const L=function(z){const G={},re={};for(const ne of z){const se=ne.queryResults,ee=ne.wrappedTileID,ve=re[ee]=re[ee]||{};for(const Ce in se){const ue=se[Ce],xe=ve[Ce]=ve[Ce]||{},Ae=G[Ce]=G[Ce]||[];for(const Ie of ue)xe[Ie.featureIndex]||(xe[Ie.featureIndex]=!0,Ae.push(Ie))}}return G}(R);for(const z in L)L[z].forEach(G=>{const re=G.feature,ne=y.getFeatureState(re.layer["source-layer"],re.id);re.source=re.layer.source,re.layer["source-layer"]&&(re.sourceLayer=re.layer["source-layer"]),re.state=ne});return L}function Ws(y,i){const u=y.tileID,p=i.tileID;return u.overscaledZ-p.overscaledZ||u.canonical.y-p.canonical.y||u.wrap-p.wrap||u.canonical.x-p.canonical.x}class ye{constructor(i,u){this.timeAdded=0,this.fadeEndTime=0,this.tileID=i,this.uid=o.a2(),this.uses=0,this.tileSize=u,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(i){const u=i+this.timeAdded;u<this.fadeEndTime||(this.fadeEndTime=u)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(i){this.demTexture&&i.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(i,u,p){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",i){i.featureIndex&&(this.latestFeatureIndex=i.featureIndex,i.rawTileData?(this.latestRawTileData=i.rawTileData,this.latestFeatureIndex.rawTileData=i.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=i.collisionBoxArray,this.buckets=function(g,x){const T={};if(!x)return T;for(const E of g){const k=E.layerIds.map(R=>x.getLayer(R)).filter(Boolean);if(k.length!==0){E.layers=k,E.stateDependentLayerIds&&(E.stateDependentLayers=E.stateDependentLayerIds.map(R=>k.filter(L=>L.id===R)[0]));for(const R of k)T[R.id]=E}}return T}(i.buckets,u.style),this.hasSymbolBuckets=!1;for(const g in this.buckets){const x=this.buckets[g];if(x instanceof o.a4){if(this.hasSymbolBuckets=!0,!p)break;x.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const g in this.buckets){const x=this.buckets[g];if(x instanceof o.a4&&x.hasRTLText){this.hasRTLText=!0,o.a5();break}}this.queryPadding=0;for(const g in this.buckets){const x=this.buckets[g];this.queryPadding=Math.max(this.queryPadding,u.style.getLayer(g).queryRadius(x))}i.imageAtlas&&(this.imageAtlas=i.imageAtlas),i.glyphAtlasImage&&(this.glyphAtlasImage=i.glyphAtlasImage)}else this.collisionBoxArray=new o.a3}unloadVectorData(){for(const i in this.buckets)this.buckets[i].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(i){return this.buckets[i.id]}upload(i){for(const p in this.buckets){const g=this.buckets[p];g.uploadPending()&&g.upload(i)}const u=i.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new ke(i,this.imageAtlas.image,u.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new ke(i,this.glyphAtlasImage,u.ALPHA),this.glyphAtlasImage=null)}prepare(i){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(i,this.imageAtlasTexture)}queryRenderedFeatures(i,u,p,g,x,T,E,k,R,L){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:g,cameraQueryGeometry:x,scale:T,tileSize:this.tileSize,pixelPosMatrix:L,transform:k,params:E,queryPadding:this.queryPadding*R},i,u,p):{}}querySourceFeatures(i,u){const p=this.latestFeatureIndex;if(!p||!p.rawTileData)return;const g=p.loadVTLayers(),x=u&&u.sourceLayer?u.sourceLayer:"",T=g._geojsonTileLayer||g[x];if(!T)return;const E=o.a6(u&&u.filter),{z:k,x:R,y:L}=this.tileID.canonical,z={z:k,x:R,y:L};for(let G=0;G<T.length;G++){const re=T.feature(G);if(E.needGeometry){const ee=o.a7(re,!0);if(!E.filter(new o.a8(this.tileID.overscaledZ),ee,this.tileID.canonical))continue}else if(!E.filter(new o.a8(this.tileID.overscaledZ),re))continue;const ne=p.getId(re,x),se=new o.a9(re,k,R,L,ne);se.tile=z,i.push(se)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(i){const u=this.expirationTime;if(i.cacheControl){const p=o.aa(i.cacheControl);p["max-age"]&&(this.expirationTime=Date.now()+1e3*p["max-age"])}else i.expires&&(this.expirationTime=new Date(i.expires).getTime());if(this.expirationTime){const p=Date.now();let g=!1;if(this.expirationTime>p)g=!1;else if(u)if(this.expirationTime<u)g=!0;else{const x=this.expirationTime-u;x?this.expirationTime=p+Math.max(x,3e4):g=!0}else g=!0;g?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(i,u){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(i).length===0)return;const p=this.latestFeatureIndex.loadVTLayers();for(const g in this.buckets){if(!u.style.hasLayer(g))continue;const x=this.buckets[g],T=x.layers[0].sourceLayer||"_geojsonTileLayer",E=p[T],k=i[T];if(!E||!k||Object.keys(k).length===0)continue;x.update(k,E,this.imageAtlas&&this.imageAtlas.patternPositions||{});const R=u&&u.style&&u.style.getLayer(g);R&&(this.queryPadding=Math.max(this.queryPadding,R.queryRadius(x)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<o.h.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(i){this.symbolFadeHoldUntil=o.h.now()+i}setDependencies(i,u){const p={};for(const g of u)p[g]=!0;this.dependencies[i]=p}hasDependency(i,u){for(const p of i){const g=this.dependencies[p];if(g){for(const x of u)if(g[x])return!0}}return!1}}class Me{constructor(i,u){this.max=i,this.onRemove=u,this.reset()}reset(){for(const i in this.data)for(const u of this.data[i])u.timeout&&clearTimeout(u.timeout),this.onRemove(u.value);return this.data={},this.order=[],this}add(i,u,p){const g=i.wrapped().key;this.data[g]===void 0&&(this.data[g]=[]);const x={value:u,timeout:void 0};if(p!==void 0&&(x.timeout=setTimeout(()=>{this.remove(i,x)},p)),this.data[g].push(x),this.order.push(g),this.order.length>this.max){const T=this._getAndRemoveByKey(this.order[0]);T&&this.onRemove(T)}return this}has(i){return i.wrapped().key in this.data}getAndRemove(i){return this.has(i)?this._getAndRemoveByKey(i.wrapped().key):null}_getAndRemoveByKey(i){const u=this.data[i].shift();return u.timeout&&clearTimeout(u.timeout),this.data[i].length===0&&delete this.data[i],this.order.splice(this.order.indexOf(i),1),u.value}getByKey(i){const u=this.data[i];return u?u[0].value:null}get(i){return this.has(i)?this.data[i.wrapped().key][0].value:null}remove(i,u){if(!this.has(i))return this;const p=i.wrapped().key,g=u===void 0?0:this.data[p].indexOf(u),x=this.data[p][g];return this.data[p].splice(g,1),x.timeout&&clearTimeout(x.timeout),this.data[p].length===0&&delete this.data[p],this.onRemove(x.value),this.order.splice(this.order.indexOf(p),1),this}setMaxSize(i){for(this.max=i;this.order.length>this.max;){const u=this._getAndRemoveByKey(this.order[0]);u&&this.onRemove(u)}return this}filter(i){const u=[];for(const p in this.data)for(const g of this.data[p])i(g.value)||u.push(g);for(const p of u)this.remove(p.value.tileID,p)}}class ce{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(i,u,p){const g=String(u);if(this.stateChanges[i]=this.stateChanges[i]||{},this.stateChanges[i][g]=this.stateChanges[i][g]||{},o.e(this.stateChanges[i][g],p),this.deletedStates[i]===null){this.deletedStates[i]={};for(const x in this.state[i])x!==g&&(this.deletedStates[i][x]=null)}else if(this.deletedStates[i]&&this.deletedStates[i][g]===null){this.deletedStates[i][g]={};for(const x in this.state[i][g])p[x]||(this.deletedStates[i][g][x]=null)}else for(const x in p)this.deletedStates[i]&&this.deletedStates[i][g]&&this.deletedStates[i][g][x]===null&&delete this.deletedStates[i][g][x]}removeFeatureState(i,u,p){if(this.deletedStates[i]===null)return;const g=String(u);if(this.deletedStates[i]=this.deletedStates[i]||{},p&&u!==void 0)this.deletedStates[i][g]!==null&&(this.deletedStates[i][g]=this.deletedStates[i][g]||{},this.deletedStates[i][g][p]=null);else if(u!==void 0)if(this.stateChanges[i]&&this.stateChanges[i][g])for(p in this.deletedStates[i][g]={},this.stateChanges[i][g])this.deletedStates[i][g][p]=null;else this.deletedStates[i][g]=null;else this.deletedStates[i]=null}getState(i,u){const p=String(u),g=o.e({},(this.state[i]||{})[p],(this.stateChanges[i]||{})[p]);if(this.deletedStates[i]===null)return{};if(this.deletedStates[i]){const x=this.deletedStates[i][u];if(x===null)return{};for(const T in x)delete g[T]}return g}initializeTileState(i,u){i.setFeatureState(this.state,u)}coalesceChanges(i,u){const p={};for(const g in this.stateChanges){this.state[g]=this.state[g]||{};const x={};for(const T in this.stateChanges[g])this.state[g][T]||(this.state[g][T]={}),o.e(this.state[g][T],this.stateChanges[g][T]),x[T]=this.state[g][T];p[g]=x}for(const g in this.deletedStates){this.state[g]=this.state[g]||{};const x={};if(this.deletedStates[g]===null)for(const T in this.state[g])x[T]={},this.state[g][T]={};else for(const T in this.deletedStates[g]){if(this.deletedStates[g][T]===null)this.state[g][T]={};else for(const E of Object.keys(this.deletedStates[g][T]))delete this.state[g][T][E];x[T]=this.state[g][T]}p[g]=p[g]||{},o.e(p[g],x)}if(this.stateChanges={},this.deletedStates={},Object.keys(p).length!==0)for(const g in i)i[g].setFeatureState(p,u)}}class at extends o.E{constructor(i,u,p){super(),this.id=i,this.dispatcher=p,this.on("data",g=>{g.dataType==="source"&&g.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&g.dataType==="source"&&g.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((g,x,T,E)=>{const k=new(Vi(x.type))(g,x,T,E);if(k.id!==g)throw new Error(`Expected Source id to be ${g} instead of ${k.id}`);return k})(i,u,p,this),this._tiles={},this._cache=new Me(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new ce,this._didEmitContent=!1,this._updated=!1}onAdd(i){this.map=i,this._maxTileCacheSize=i?i._maxTileCacheSize:null,this._maxTileCacheZoomLevels=i?i._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(i)}onRemove(i){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(i)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const i in this._tiles){const u=this._tiles[i];if(u.state!=="loaded"&&u.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const i=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,i&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(i,u){return this._source.loadTile(i,u)}_unloadTile(i){if(this._source.unloadTile)return this._source.unloadTile(i,()=>{})}_abortTile(i){this._source.abortTile&&this._source.abortTile(i,()=>{}),this._source.fire(new o.k("dataabort",{tile:i,coord:i.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(i){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const u in this._tiles){const p=this._tiles[u];p.upload(i),p.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(i=>i.tileID).sort(nt).map(i=>i.key)}getRenderableIds(i){const u=[];for(const p in this._tiles)this._isIdRenderable(p,i)&&u.push(this._tiles[p]);return i?u.sort((p,g)=>{const x=p.tileID,T=g.tileID,E=new o.P(x.canonical.x,x.canonical.y)._rotate(this.transform.angle),k=new o.P(T.canonical.x,T.canonical.y)._rotate(this.transform.angle);return x.overscaledZ-T.overscaledZ||k.y-E.y||k.x-E.x}).map(p=>p.tileID.key):u.map(p=>p.tileID).sort(nt).map(p=>p.key)}hasRenderableParent(i){const u=this.findLoadedParent(i,0);return!!u&&this._isIdRenderable(u.tileID.key)}_isIdRenderable(i,u){return this._tiles[i]&&this._tiles[i].hasData()&&!this._coveredTiles[i]&&(u||!this._tiles[i].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const i in this._tiles)this._tiles[i].state!=="errored"&&this._reloadTile(i,"reloading")}}_reloadTile(i,u){const p=this._tiles[i];p&&(p.state!=="loading"&&(p.state=u),this._loadTile(p,this._tileLoaded.bind(this,p,i,u)))}_tileLoaded(i,u,p,g){if(g)return i.state="errored",void(g.status!==404?this._source.fire(new o.j(g,{tile:i})):this.update(this.transform,this.terrain));i.timeAdded=o.h.now(),p==="expired"&&(i.refreshedUponExpiration=!0),this._setTileReloadTimer(u,i),this.getSource().type==="raster-dem"&&i.dem&&this._backfillDEM(i),this._state.initializeTileState(i,this.map?this.map.painter:null),i.aborted||this._source.fire(new o.k("data",{dataType:"source",tile:i,coord:i.tileID}))}_backfillDEM(i){const u=this.getRenderableIds();for(let g=0;g<u.length;g++){const x=u[g];if(i.neighboringTiles&&i.neighboringTiles[x]){const T=this.getTileByID(x);p(i,T),p(T,i)}}function p(g,x){g.needsHillshadePrepare=!0,g.needsTerrainPrepare=!0;let T=x.tileID.canonical.x-g.tileID.canonical.x;const E=x.tileID.canonical.y-g.tileID.canonical.y,k=Math.pow(2,g.tileID.canonical.z),R=x.tileID.key;T===0&&E===0||Math.abs(E)>1||(Math.abs(T)>1&&(Math.abs(T+k)===1?T+=k:Math.abs(T-k)===1&&(T-=k)),x.dem&&g.dem&&(g.dem.backfillBorder(x.dem,T,E),g.neighboringTiles&&g.neighboringTiles[R]&&(g.neighboringTiles[R].backfilled=!0)))}}getTile(i){return this.getTileByID(i.key)}getTileByID(i){return this._tiles[i]}_retainLoadedChildren(i,u,p,g){for(const x in this._tiles){let T=this._tiles[x];if(g[x]||!T.hasData()||T.tileID.overscaledZ<=u||T.tileID.overscaledZ>p)continue;let E=T.tileID;for(;T&&T.tileID.overscaledZ>u+1;){const R=T.tileID.scaledTo(T.tileID.overscaledZ-1);T=this._tiles[R.key],T&&T.hasData()&&(E=R)}let k=E;for(;k.overscaledZ>u;)if(k=k.scaledTo(k.overscaledZ-1),i[k.key]){g[E.key]=E;break}}}findLoadedParent(i,u){if(i.key in this._loadedParentTiles){const p=this._loadedParentTiles[i.key];return p&&p.tileID.overscaledZ>=u?p:null}for(let p=i.overscaledZ-1;p>=u;p--){const g=i.scaledTo(p),x=this._getLoadedTile(g);if(x)return x}}_getLoadedTile(i){const u=this._tiles[i.key];return u&&u.hasData()?u:this._cache.getByKey(i.wrapped().key)}updateCacheSize(i){const u=Math.ceil(i.width/this._source.tileSize)+1,p=Math.ceil(i.height/this._source.tileSize)+1,g=Math.floor(u*p*(this._maxTileCacheZoomLevels===null?o.c.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),x=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,g):g;this._cache.setMaxSize(x)}handleWrapJump(i){const u=Math.round((i-(this._prevLng===void 0?i:this._prevLng))/360);if(this._prevLng=i,u){const p={};for(const g in this._tiles){const x=this._tiles[g];x.tileID=x.tileID.unwrapTo(x.tileID.wrap+u),p[x.tileID.key]=x}this._tiles=p;for(const g in this._timers)clearTimeout(this._timers[g]),delete this._timers[g];for(const g in this._tiles)this._setTileReloadTimer(g,this._tiles[g])}}update(i,u){if(this.transform=i,this.terrain=u,!this._sourceLoaded||this._paused)return;let p;this.updateCacheSize(i),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?p=i.getVisibleUnwrappedCoordinates(this._source.tileID).map(L=>new o.O(L.canonical.z,L.wrap,L.canonical.z,L.canonical.x,L.canonical.y)):(p=i.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:u}),this._source.hasTile&&(p=p.filter(L=>this._source.hasTile(L)))):p=[];const g=i.coveringZoomLevel(this._source),x=Math.max(g-at.maxOverzooming,this._source.minzoom),T=Math.max(g+at.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const L={};for(const z of p)if(z.canonical.z>this._source.minzoom){const G=z.scaledTo(z.canonical.z-1);L[G.key]=G;const re=z.scaledTo(Math.max(this._source.minzoom,Math.min(z.canonical.z,5)));L[re.key]=re}p=p.concat(Object.values(L))}const E=p.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,E&&this.fire(new o.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const k=this._updateRetainedTiles(p,g);if(qe(this._source.type)){const L={},z={},G=Object.keys(k),re=o.h.now();for(const ne of G){const se=k[ne],ee=this._tiles[ne];if(!ee||ee.fadeEndTime!==0&&ee.fadeEndTime<=re)continue;const ve=this.findLoadedParent(se,x);ve&&(this._addTile(ve.tileID),L[ve.tileID.key]=ve.tileID),z[ne]=se}this._retainLoadedChildren(z,g,T,k);for(const ne in L)k[ne]||(this._coveredTiles[ne]=!0,k[ne]=L[ne]);if(u){const ne={},se={};for(const ee of p)this._tiles[ee.key].hasData()?ne[ee.key]=ee:se[ee.key]=ee;for(const ee in se){const ve=se[ee].children(this._source.maxzoom);this._tiles[ve[0].key]&&this._tiles[ve[1].key]&&this._tiles[ve[2].key]&&this._tiles[ve[3].key]&&(ne[ve[0].key]=k[ve[0].key]=ve[0],ne[ve[1].key]=k[ve[1].key]=ve[1],ne[ve[2].key]=k[ve[2].key]=ve[2],ne[ve[3].key]=k[ve[3].key]=ve[3],delete se[ee])}for(const ee in se){const ve=this.findLoadedParent(se[ee],this._source.minzoom);if(ve){ne[ve.tileID.key]=k[ve.tileID.key]=ve.tileID;for(const Ce in ne)ne[Ce].isChildOf(ve.tileID)&&delete ne[Ce]}}for(const ee in this._tiles)ne[ee]||(this._coveredTiles[ee]=!0)}}for(const L in k)this._tiles[L].clearFadeHold();const R=o.ab(this._tiles,k);for(const L of R){const z=this._tiles[L];z.hasSymbolBuckets&&!z.holdingForFade()?z.setHoldDuration(this.map._fadeDuration):z.hasSymbolBuckets&&!z.symbolFadeFinished()||this._removeTile(L)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const i in this._tiles)this._tiles[i].holdingForFade()&&this._removeTile(i)}_updateRetainedTiles(i,u){const p={},g={},x=Math.max(u-at.maxOverzooming,this._source.minzoom),T=Math.max(u+at.maxUnderzooming,this._source.minzoom),E={};for(const k of i){const R=this._addTile(k);p[k.key]=k,R.hasData()||u<this._source.maxzoom&&(E[k.key]=k)}this._retainLoadedChildren(E,u,T,p);for(const k of i){let R=this._tiles[k.key];if(R.hasData())continue;if(u+1>this._source.maxzoom){const z=k.children(this._source.maxzoom)[0],G=this.getTile(z);if(G&&G.hasData()){p[z.key]=z;continue}}else{const z=k.children(this._source.maxzoom);if(p[z[0].key]&&p[z[1].key]&&p[z[2].key]&&p[z[3].key])continue}let L=R.wasRequested();for(let z=k.overscaledZ-1;z>=x;--z){const G=k.scaledTo(z);if(g[G.key])break;if(g[G.key]=!0,R=this.getTile(G),!R&&L&&(R=this._addTile(G)),R){const re=R.hasData();if((L||re)&&(p[G.key]=G),L=R.wasRequested(),re)break}}}return p}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const i in this._tiles){const u=[];let p,g=this._tiles[i].tileID;for(;g.overscaledZ>0;){if(g.key in this._loadedParentTiles){p=this._loadedParentTiles[g.key];break}u.push(g.key);const x=g.scaledTo(g.overscaledZ-1);if(p=this._getLoadedTile(x),p)break;g=x}for(const x of u)this._loadedParentTiles[x]=p}}_addTile(i){let u=this._tiles[i.key];if(u)return u;u=this._cache.getAndRemove(i),u&&(this._setTileReloadTimer(i.key,u),u.tileID=i,this._state.initializeTileState(u,this.map?this.map.painter:null),this._cacheTimers[i.key]&&(clearTimeout(this._cacheTimers[i.key]),delete this._cacheTimers[i.key],this._setTileReloadTimer(i.key,u)));const p=u;return u||(u=new ye(i,this._source.tileSize*i.overscaleFactor()),this._loadTile(u,this._tileLoaded.bind(this,u,i.key,u.state))),u.uses++,this._tiles[i.key]=u,p||this._source.fire(new o.k("dataloading",{tile:u,coord:u.tileID,dataType:"source"})),u}_setTileReloadTimer(i,u){i in this._timers&&(clearTimeout(this._timers[i]),delete this._timers[i]);const p=u.getExpiryTimeout();p&&(this._timers[i]=setTimeout(()=>{this._reloadTile(i,"expired"),delete this._timers[i]},p))}_removeTile(i){const u=this._tiles[i];u&&(u.uses--,delete this._tiles[i],this._timers[i]&&(clearTimeout(this._timers[i]),delete this._timers[i]),u.uses>0||(u.hasData()&&u.state!=="reloading"?this._cache.add(u.tileID,u,u.getExpiryTimeout()):(u.aborted=!0,this._abortTile(u),this._unloadTile(u))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const i in this._tiles)this._removeTile(i);this._cache.reset()}tilesIn(i,u,p){const g=[],x=this.transform;if(!x)return g;const T=p?x.getCameraQueryGeometry(i):i,E=i.map(ne=>x.pointCoordinate(ne,this.terrain)),k=T.map(ne=>x.pointCoordinate(ne,this.terrain)),R=this.getIds();let L=1/0,z=1/0,G=-1/0,re=-1/0;for(const ne of k)L=Math.min(L,ne.x),z=Math.min(z,ne.y),G=Math.max(G,ne.x),re=Math.max(re,ne.y);for(let ne=0;ne<R.length;ne++){const se=this._tiles[R[ne]];if(se.holdingForFade())continue;const ee=se.tileID,ve=Math.pow(2,x.zoom-se.tileID.overscaledZ),Ce=u*se.queryPadding*o.N/se.tileSize/ve,ue=[ee.getTilePoint(new o.U(L,z)),ee.getTilePoint(new o.U(G,re))];if(ue[0].x-Ce<o.N&&ue[0].y-Ce<o.N&&ue[1].x+Ce>=0&&ue[1].y+Ce>=0){const xe=E.map(Ie=>ee.getTilePoint(Ie)),Ae=k.map(Ie=>ee.getTilePoint(Ie));g.push({tile:se,tileID:ee,queryGeometry:xe,cameraQueryGeometry:Ae,scale:ve})}}return g}getVisibleCoordinates(i){const u=this.getRenderableIds(i).map(p=>this._tiles[p].tileID);for(const p of u)p.posMatrix=this.transform.calculatePosMatrix(p.toUnwrapped());return u}hasTransition(){if(this._source.hasTransition())return!0;if(qe(this._source.type)){const i=o.h.now();for(const u in this._tiles)if(this._tiles[u].fadeEndTime>=i)return!0}return!1}setFeatureState(i,u,p){this._state.updateState(i=i||"_geojsonTileLayer",u,p)}removeFeatureState(i,u,p){this._state.removeFeatureState(i=i||"_geojsonTileLayer",u,p)}getFeatureState(i,u){return this._state.getState(i=i||"_geojsonTileLayer",u)}setDependencies(i,u,p){const g=this._tiles[i];g&&g.setDependencies(u,p)}reloadTilesForDependencies(i,u){for(const p in this._tiles)this._tiles[p].hasDependency(i,u)&&this._reloadTile(p,"reloading");this._cache.filter(p=>!p.hasDependency(i,u))}}function nt(y,i){const u=Math.abs(2*y.wrap)-+(y.wrap<0),p=Math.abs(2*i.wrap)-+(i.wrap<0);return y.overscaledZ-i.overscaledZ||p-u||i.canonical.y-y.canonical.y||i.canonical.x-y.canonical.x}function qe(y){return y==="raster"||y==="image"||y==="video"}at.maxOverzooming=10,at.maxUnderzooming=3;const et="mapboxgl_preloaded_worker_pool";class Gt{constructor(){this.active={}}acquire(i){if(!this.workers)for(this.workers=[];this.workers.length<Gt.workerCount;)this.workers.push(new Worker(o.c.WORKER_URL));return this.active[i]=!0,this.workers.slice()}release(i){delete this.active[i],this.numActive()===0&&(this.workers.forEach(u=>{u.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[et]}numActive(){return Object.keys(this.active).length}}const Tn=Math.floor(o.h.hardwareConcurrency/2);let Dn;function rs(){return Dn||(Dn=new Gt),Dn}Gt.workerCount=o.ac(globalThis)?Math.max(Math.min(Tn,3),1):1;class Ta{constructor(i,u){this.reset(i,u)}reset(i,u){this.points=i||[],this._distances=[0];for(let p=1;p<this.points.length;p++)this._distances[p]=this._distances[p-1]+this.points[p].dist(this.points[p-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(u||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(i){if(this.points.length===1)return this.points[0];i=o.ad(i,0,1);let u=1,p=this._distances[u];const g=i*this.paddedLength+this.padding;for(;p<g&&u<this._distances.length;)p=this._distances[++u];const x=u-1,T=this._distances[x],E=p-T,k=E>0?(g-T)/E:0;return this.points[x].mult(1-k).add(this.points[u].mult(k))}}function ji(y,i){let u=!0;return y==="always"||y!=="never"&&i!=="never"||(u=!1),u}class is{constructor(i,u,p){const g=this.boxCells=[],x=this.circleCells=[];this.xCellCount=Math.ceil(i/p),this.yCellCount=Math.ceil(u/p);for(let T=0;T<this.xCellCount*this.yCellCount;T++)g.push([]),x.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=i,this.height=u,this.xScale=this.xCellCount/i,this.yScale=this.yCellCount/u,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(i,u,p,g,x){this._forEachCell(u,p,g,x,this._insertBoxCell,this.boxUid++),this.boxKeys.push(i),this.bboxes.push(u),this.bboxes.push(p),this.bboxes.push(g),this.bboxes.push(x)}insertCircle(i,u,p,g){this._forEachCell(u-g,p-g,u+g,p+g,this._insertCircleCell,this.circleUid++),this.circleKeys.push(i),this.circles.push(u),this.circles.push(p),this.circles.push(g)}_insertBoxCell(i,u,p,g,x,T){this.boxCells[x].push(T)}_insertCircleCell(i,u,p,g,x,T){this.circleCells[x].push(T)}_query(i,u,p,g,x,T,E){if(p<0||i>this.width||g<0||u>this.height)return[];const k=[];if(i<=0&&u<=0&&this.width<=p&&this.height<=g){if(x)return[{key:null,x1:i,y1:u,x2:p,y2:g}];for(let R=0;R<this.boxKeys.length;R++)k.push({key:this.boxKeys[R],x1:this.bboxes[4*R],y1:this.bboxes[4*R+1],x2:this.bboxes[4*R+2],y2:this.bboxes[4*R+3]});for(let R=0;R<this.circleKeys.length;R++){const L=this.circles[3*R],z=this.circles[3*R+1],G=this.circles[3*R+2];k.push({key:this.circleKeys[R],x1:L-G,y1:z-G,x2:L+G,y2:z+G})}}else this._forEachCell(i,u,p,g,this._queryCell,k,{hitTest:x,overlapMode:T,seenUids:{box:{},circle:{}}},E);return k}query(i,u,p,g){return this._query(i,u,p,g,!1,null)}hitTest(i,u,p,g,x,T){return this._query(i,u,p,g,!0,x,T).length>0}hitTestCircle(i,u,p,g,x){const T=i-p,E=i+p,k=u-p,R=u+p;if(E<0||T>this.width||R<0||k>this.height)return!1;const L=[];return this._forEachCell(T,k,E,R,this._queryCellCircle,L,{hitTest:!0,overlapMode:g,circle:{x:i,y:u,radius:p},seenUids:{box:{},circle:{}}},x),L.length>0}_queryCell(i,u,p,g,x,T,E,k){const{seenUids:R,hitTest:L,overlapMode:z}=E,G=this.boxCells[x];if(G!==null){const ne=this.bboxes;for(const se of G)if(!R.box[se]){R.box[se]=!0;const ee=4*se,ve=this.boxKeys[se];if(i<=ne[ee+2]&&u<=ne[ee+3]&&p>=ne[ee+0]&&g>=ne[ee+1]&&(!k||k(ve))&&(!L||!ji(z,ve.overlapMode))&&(T.push({key:ve,x1:ne[ee],y1:ne[ee+1],x2:ne[ee+2],y2:ne[ee+3]}),L))return!0}}const re=this.circleCells[x];if(re!==null){const ne=this.circles;for(const se of re)if(!R.circle[se]){R.circle[se]=!0;const ee=3*se,ve=this.circleKeys[se];if(this._circleAndRectCollide(ne[ee],ne[ee+1],ne[ee+2],i,u,p,g)&&(!k||k(ve))&&(!L||!ji(z,ve.overlapMode))){const Ce=ne[ee],ue=ne[ee+1],xe=ne[ee+2];if(T.push({key:ve,x1:Ce-xe,y1:ue-xe,x2:Ce+xe,y2:ue+xe}),L)return!0}}}return!1}_queryCellCircle(i,u,p,g,x,T,E,k){const{circle:R,seenUids:L,overlapMode:z}=E,G=this.boxCells[x];if(G!==null){const ne=this.bboxes;for(const se of G)if(!L.box[se]){L.box[se]=!0;const ee=4*se,ve=this.boxKeys[se];if(this._circleAndRectCollide(R.x,R.y,R.radius,ne[ee+0],ne[ee+1],ne[ee+2],ne[ee+3])&&(!k||k(ve))&&!ji(z,ve.overlapMode))return T.push(!0),!0}}const re=this.circleCells[x];if(re!==null){const ne=this.circles;for(const se of re)if(!L.circle[se]){L.circle[se]=!0;const ee=3*se,ve=this.circleKeys[se];if(this._circlesCollide(ne[ee],ne[ee+1],ne[ee+2],R.x,R.y,R.radius)&&(!k||k(ve))&&!ji(z,ve.overlapMode))return T.push(!0),!0}}}_forEachCell(i,u,p,g,x,T,E,k){const R=this._convertToXCellCoord(i),L=this._convertToYCellCoord(u),z=this._convertToXCellCoord(p),G=this._convertToYCellCoord(g);for(let re=R;re<=z;re++)for(let ne=L;ne<=G;ne++)if(x.call(this,i,u,p,g,this.xCellCount*ne+re,T,E,k))return}_convertToXCellCoord(i){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(i*this.xScale)))}_convertToYCellCoord(i){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(i*this.yScale)))}_circlesCollide(i,u,p,g,x,T){const E=g-i,k=x-u,R=p+T;return R*R>E*E+k*k}_circleAndRectCollide(i,u,p,g,x,T,E){const k=(T-g)/2,R=Math.abs(i-(g+k));if(R>k+p)return!1;const L=(E-x)/2,z=Math.abs(u-(x+L));if(z>L+p)return!1;if(R<=k||z<=L)return!0;const G=R-k,re=z-L;return G*G+re*re<=p*p}}function Ke(y,i,u,p,g){const x=o.Z();return i?(o.a0(x,x,[1/g,1/g,1]),u||o.ae(x,x,p.angle)):o.a1(x,p.labelPlaneMatrix,y),x}function xi(y,i,u,p,g){if(i){const x=o.af(y);return o.a0(x,x,[g,g,1]),u||o.ae(x,x,-p.angle),x}return p.glCoordMatrix}function En(y,i,u){let p;u?(p=[y.x,y.y,u(y.x,y.y),1],o.ag(p,p,i)):(p=[y.x,y.y,0,1],ae(p,p,i));const g=p[3];return{point:new o.P(p[0]/g,p[1]/g),signedDistanceFromCamera:g}}function Ss(y,i){return .5+y/i*.5}function Hs(y,i){const u=y[0]/y[3],p=y[1]/y[3];return u>=-i[0]&&u<=i[0]&&p>=-i[1]&&p<=i[1]}function tt(y,i,u,p,g,x,T,E,k,R){const L=p?y.textSizeData:y.iconSizeData,z=o.ah(L,u.transform.zoom),G=[256/u.width*2+1,256/u.height*2+1],re=p?y.text.dynamicLayoutVertexArray:y.icon.dynamicLayoutVertexArray;re.clear();const ne=y.lineVertexArray,se=p?y.text.placedSymbolArray:y.icon.placedSymbolArray,ee=u.transform.width/u.transform.height;let ve=!1;for(let Ce=0;Ce<se.length;Ce++){const ue=se.get(Ce);if(ue.hidden||ue.writingMode===o.ai.vertical&&!ve){J(ue.numGlyphs,re);continue}let xe;if(ve=!1,R?(xe=[ue.anchorX,ue.anchorY,R(ue.anchorX,ue.anchorY),1],o.ag(xe,xe,i)):(xe=[ue.anchorX,ue.anchorY,0,1],ae(xe,xe,i)),!Hs(xe,G)){J(ue.numGlyphs,re);continue}const Ae=Ss(u.transform.cameraToCenterDistance,xe[3]),Ie=o.aj(L,z,ue),Oe=T?Ie/Ae:Ie*Ae,Ze=new o.P(ue.anchorX,ue.anchorY),$e=En(Ze,g,R).point,He={projections:{},offsets:{}},yt=Br(ue,Oe,!1,E,i,g,x,y.glyphOffsetArray,ne,re,$e,Ze,He,ee,k,R);ve=yt.useVertical,(yt.notEnoughRoom||ve||yt.needsFlipping&&Br(ue,Oe,!0,E,i,g,x,y.glyphOffsetArray,ne,re,$e,Ze,He,ee,k,R).notEnoughRoom)&&J(ue.numGlyphs,re)}p?y.text.dynamicLayoutVertexBuffer.updateData(re):y.icon.dynamicLayoutVertexBuffer.updateData(re)}function jt(y,i,u,p,g,x,T,E,k,R,L,z,G){const re=E.glyphStartIndex+E.numGlyphs,ne=E.lineStartIndex,se=E.lineStartIndex+E.lineLength,ee=i.getoffsetX(E.glyphStartIndex),ve=i.getoffsetX(re-1),Ce=$(y*ee,u,p,g,x,T,E.segment,ne,se,k,R,L,z,G);if(!Ce)return null;const ue=$(y*ve,u,p,g,x,T,E.segment,ne,se,k,R,L,z,G);return ue?{first:Ce,last:ue}:null}function Ot(y,i,u,p){return y===o.ai.horizontal&&Math.abs(u.y-i.y)>Math.abs(u.x-i.x)*p?{useVertical:!0}:(y===o.ai.vertical?i.y<u.y:i.x>u.x)?{needsFlipping:!0}:null}function Br(y,i,u,p,g,x,T,E,k,R,L,z,G,re,ne,se){const ee=i/24,ve=y.lineOffsetX*ee,Ce=y.lineOffsetY*ee;let ue;if(y.numGlyphs>1){const xe=y.glyphStartIndex+y.numGlyphs,Ae=y.lineStartIndex,Ie=y.lineStartIndex+y.lineLength,Oe=jt(ee,E,ve,Ce,u,L,z,y,k,x,G,ne,se);if(!Oe)return{notEnoughRoom:!0};const Ze=En(Oe.first.point,T,se).point,$e=En(Oe.last.point,T,se).point;if(p&&!u){const He=Ot(y.writingMode,Ze,$e,re);if(He)return He}ue=[Oe.first];for(let He=y.glyphStartIndex+1;He<xe-1;He++)ue.push($(ee*E.getoffsetX(He),ve,Ce,u,L,z,y.segment,Ae,Ie,k,x,G,ne,se));ue.push(Oe.last)}else{if(p&&!u){const Ae=En(z,g,se).point,Ie=y.lineStartIndex+y.segment+1,Oe=new o.P(k.getx(Ie),k.gety(Ie)),Ze=En(Oe,g,se),$e=Ze.signedDistanceFromCamera>0?Ze.point:Ts(z,Oe,Ae,1,g,se),He=Ot(y.writingMode,Ae,$e,re);if(He)return He}const xe=$(ee*E.getoffsetX(y.glyphStartIndex),ve,Ce,u,L,z,y.segment,y.lineStartIndex,y.lineStartIndex+y.lineLength,k,x,G,ne,se);if(!xe)return{notEnoughRoom:!0};ue=[xe]}for(const xe of ue)o.ak(R,xe.point,xe.angle);return{}}function Ts(y,i,u,p,g,x){const T=En(y.add(y.sub(i)._unit()),g,x).point,E=u.sub(T);return u.add(E._mult(p/E.mag()))}function Bt(y,i){const{projectionCache:u,lineVertexArray:p,labelPlaneMatrix:g,tileAnchorPoint:x,distanceFromAnchor:T,getElevation:E,previousVertex:k,direction:R,absOffsetX:L}=i;if(u.projections[y])return u.projections[y];const z=new o.P(p.getx(y),p.gety(y)),G=En(z,g,E);if(G.signedDistanceFromCamera>0)return u.projections[y]=G.point,G.point;const re=y-R;return Ts(T===0?x:new o.P(p.getx(re),p.gety(re)),z,k,L-T+1,g,E)}function Ks(y,i,u){return y._unit()._perp()._mult(i*u)}function ie(y,i,u,p,g,x,T,E){const{projectionCache:k,direction:R}=E;if(k.offsets[y])return k.offsets[y];const L=u.add(i);if(y+R<p||y+R>=g)return k.offsets[y]=L,L;const z=Bt(y+R,E),G=Ks(z.sub(u),T,R),re=u.add(G),ne=z.add(G);return k.offsets[y]=o.al(x,L,re,ne)||L,k.offsets[y]}function $(y,i,u,p,g,x,T,E,k,R,L,z,G,re){const ne=p?y-i:y+i;let se=ne>0?1:-1,ee=0;p&&(se*=-1,ee=Math.PI),se<0&&(ee+=Math.PI);let ve,Ce,ue=se>0?E+T:E+T+1,xe=g,Ae=g,Ie=0,Oe=0;const Ze=Math.abs(ne),$e=[];let He;for(;Ie+Oe<=Ze;){if(ue+=se,ue<E||ue>=k)return null;Ie+=Oe,Ae=xe,Ce=ve;const rt={projectionCache:z,lineVertexArray:R,labelPlaneMatrix:L,tileAnchorPoint:x,distanceFromAnchor:Ie,getElevation:re,previousVertex:Ae,direction:se,absOffsetX:Ze};if(xe=Bt(ue,rt),u===0)$e.push(Ae),He=xe.sub(Ae);else{let Rt;const xt=xe.sub(Ae);Rt=xt.mag()===0?Ks(Bt(ue+se,rt).sub(xe),u,se):Ks(xt,u,se),Ce||(Ce=Ae.add(Rt)),ve=ie(ue,Rt,xe,E,k,Ce,u,rt),$e.push(Ce),He=ve.sub(Ce)}Oe=He.mag()}const yt=He._mult((Ze-Ie)/Oe)._add(Ce||Ae),Zt=ee+Math.atan2(xe.y-Ae.y,xe.x-Ae.x);return $e.push(yt),{point:yt,angle:G?Zt:0,path:$e}}const q=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function J(y,i){for(let u=0;u<y;u++){const p=i.length;i.resize(p+4),i.float32.set(q,3*p)}}function ae(y,i,u){const p=i[0],g=i[1];return y[0]=u[0]*p+u[4]*g+u[12],y[1]=u[1]*p+u[5]*g+u[13],y[3]=u[3]*p+u[7]*g+u[15],y}const le=100;class be{constructor(i,u=new is(i.width+200,i.height+200,25),p=new is(i.width+200,i.height+200,25)){this.transform=i,this.grid=u,this.ignoredGrid=p,this.pitchfactor=Math.cos(i._pitch)*i.cameraToCenterDistance,this.screenRightBoundary=i.width+le,this.screenBottomBoundary=i.height+le,this.gridRightBoundary=i.width+200,this.gridBottomBoundary=i.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(i,u,p,g,x,T){const E=this.projectAndGetPerspectiveRatio(g,i.anchorPointX,i.anchorPointY,T),k=p*E.perspectiveRatio,R=i.x1*k+E.point.x,L=i.y1*k+E.point.y,z=i.x2*k+E.point.x,G=i.y2*k+E.point.y;return!this.isInsideGrid(R,L,z,G)||u!=="always"&&this.grid.hitTest(R,L,z,G,u,x)||E.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[R,L,z,G],offscreen:this.isOffscreen(R,L,z,G)}}placeCollisionCircles(i,u,p,g,x,T,E,k,R,L,z,G,re,ne){const se=[],ee=new o.P(u.anchorX,u.anchorY),ve=En(ee,T,ne),Ce=Ss(this.transform.cameraToCenterDistance,ve.signedDistanceFromCamera),ue=(L?x/Ce:x*Ce)/o.ap,xe=En(ee,E,ne).point,Ae=jt(ue,g,u.lineOffsetX*ue,u.lineOffsetY*ue,!1,xe,ee,u,p,E,{projections:{},offsets:{}},!1,ne);let Ie=!1,Oe=!1,Ze=!0;if(Ae){const $e=.5*G*Ce+re,He=new o.P(-100,-100),yt=new o.P(this.screenRightBoundary,this.screenBottomBoundary),Zt=new Ta,rt=Ae.first,Rt=Ae.last;let xt=[];for(let Vt=rt.path.length-1;Vt>=1;Vt--)xt.push(rt.path[Vt]);for(let Vt=1;Vt<Rt.path.length;Vt++)xt.push(Rt.path[Vt]);const hn=2.5*$e;if(k){const Vt=xt.map(Wt=>En(Wt,k,ne));xt=Vt.some(Wt=>Wt.signedDistanceFromCamera<=0)?[]:Vt.map(Wt=>Wt.point)}let qt=[];if(xt.length>0){const Vt=xt[0].clone(),Wt=xt[0].clone();for(let jn=1;jn<xt.length;jn++)Vt.x=Math.min(Vt.x,xt[jn].x),Vt.y=Math.min(Vt.y,xt[jn].y),Wt.x=Math.max(Wt.x,xt[jn].x),Wt.y=Math.max(Wt.y,xt[jn].y);qt=Vt.x>=He.x&&Wt.x<=yt.x&&Vt.y>=He.y&&Wt.y<=yt.y?[xt]:Wt.x<He.x||Vt.x>yt.x||Wt.y<He.y||Vt.y>yt.y?[]:o.am([xt],He.x,He.y,yt.x,yt.y)}for(const Vt of qt){Zt.reset(Vt,.25*$e);let Wt=0;Wt=Zt.length<=.5*$e?1:Math.ceil(Zt.paddedLength/hn)+1;for(let jn=0;jn<Wt;jn++){const mn=jn/Math.max(Wt-1,1),wr=Zt.lerp(mn),sr=wr.x+le,Wn=wr.y+le;se.push(sr,Wn,$e,0);const Ei=sr-$e,xn=Wn-$e,Cs=sr+$e,Ps=Wn+$e;if(Ze=Ze&&this.isOffscreen(Ei,xn,Cs,Ps),Oe=Oe||this.isInsideGrid(Ei,xn,Cs,Ps),i!=="always"&&this.grid.hitTestCircle(sr,Wn,$e,i,z)&&(Ie=!0,!R))return{circles:[],offscreen:!1,collisionDetected:Ie}}}}return{circles:!R&&Ie||!Oe||Ce<this.perspectiveRatioCutoff?[]:se,offscreen:Ze,collisionDetected:Ie}}queryRenderedSymbols(i){if(i.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const u=[];let p=1/0,g=1/0,x=-1/0,T=-1/0;for(const L of i){const z=new o.P(L.x+le,L.y+le);p=Math.min(p,z.x),g=Math.min(g,z.y),x=Math.max(x,z.x),T=Math.max(T,z.y),u.push(z)}const E=this.grid.query(p,g,x,T).concat(this.ignoredGrid.query(p,g,x,T)),k={},R={};for(const L of E){const z=L.key;if(k[z.bucketInstanceId]===void 0&&(k[z.bucketInstanceId]={}),k[z.bucketInstanceId][z.featureIndex])continue;const G=[new o.P(L.x1,L.y1),new o.P(L.x2,L.y1),new o.P(L.x2,L.y2),new o.P(L.x1,L.y2)];o.an(u,G)&&(k[z.bucketInstanceId][z.featureIndex]=!0,R[z.bucketInstanceId]===void 0&&(R[z.bucketInstanceId]=[]),R[z.bucketInstanceId].push(z.featureIndex))}return R}insertCollisionBox(i,u,p,g,x,T){(p?this.ignoredGrid:this.grid).insert({bucketInstanceId:g,featureIndex:x,collisionGroupID:T,overlapMode:u},i[0],i[1],i[2],i[3])}insertCollisionCircles(i,u,p,g,x,T){const E=p?this.ignoredGrid:this.grid,k={bucketInstanceId:g,featureIndex:x,collisionGroupID:T,overlapMode:u};for(let R=0;R<i.length;R+=4)E.insertCircle(k,i[R],i[R+1],i[R+2])}projectAndGetPerspectiveRatio(i,u,p,g){let x;return g?(x=[u,p,g(u,p),1],o.ag(x,x,i)):(x=[u,p,0,1],ae(x,x,i)),{point:new o.P((x[0]/x[3]+1)/2*this.transform.width+le,(-x[1]/x[3]+1)/2*this.transform.height+le),perspectiveRatio:.5+this.transform.cameraToCenterDistance/x[3]*.5}}isOffscreen(i,u,p,g){return p<le||i>=this.screenRightBoundary||g<le||u>this.screenBottomBoundary}isInsideGrid(i,u,p,g){return p>=0&&i<this.gridRightBoundary&&g>=0&&u<this.gridBottomBoundary}getViewportMatrix(){const i=o.ao([]);return o.$(i,i,[-100,-100,0]),i}}function me(y,i,u){return i*(o.N/(y.tileSize*Math.pow(2,u-y.tileID.overscaledZ)))}class de{constructor(i,u,p,g){this.opacity=i?Math.max(0,Math.min(1,i.opacity+(i.placed?u:-u))):g&&p?1:0,this.placed=p}isHidden(){return this.opacity===0&&!this.placed}}class _e{constructor(i,u,p,g,x){this.text=new de(i?i.text:null,u,p,x),this.icon=new de(i?i.icon:null,u,g,x)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Le{constructor(i,u,p){this.text=i,this.icon=u,this.skipFade=p}}class ze{constructor(){this.invProjMatrix=o.Z(),this.viewportMatrix=o.Z(),this.circles=[]}}class Be{constructor(i,u,p,g,x){this.bucketInstanceId=i,this.featureIndex=u,this.sourceLayerIndex=p,this.bucketIndex=g,this.tileID=x}}class Ct{constructor(i){this.crossSourceCollisions=i,this.maxGroupID=0,this.collisionGroups={}}get(i){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[i]){const u=++this.maxGroupID;this.collisionGroups[i]={ID:u,predicate:p=>p.collisionGroupID===u}}return this.collisionGroups[i]}}function Lt(y,i,u,p,g){const{horizontalAlign:x,verticalAlign:T}=o.au(y);return new o.P(-(x-.5)*i+p[0]*g,-(T-.5)*u+p[1]*g)}function gt(y,i,u,p,g,x){const{x1:T,x2:E,y1:k,y2:R,anchorPointX:L,anchorPointY:z}=y,G=new o.P(i,u);return p&&G._rotate(g?x:-x),{x1:T+G.x,y1:k+G.y,x2:E+G.x,y2:R+G.y,anchorPointX:L,anchorPointY:z}}class At{constructor(i,u,p,g,x){this.transform=i.clone(),this.terrain=u,this.collisionIndex=new be(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=p,this.retainedQueryData={},this.collisionGroups=new Ct(g),this.collisionCircleArrays={},this.prevPlacement=x,x&&(x.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(i,u,p,g){const x=p.getBucket(u),T=p.latestFeatureIndex;if(!x||!T||u.id!==x.layerIds[0])return;const E=p.collisionBoxArray,k=x.layers[0].layout,R=Math.pow(2,this.transform.zoom-p.tileID.overscaledZ),L=p.tileSize/o.N,z=this.transform.calculatePosMatrix(p.tileID.toUnwrapped()),G=k.get("text-pitch-alignment")==="map",re=k.get("text-rotation-alignment")==="map",ne=me(p,1,this.transform.zoom),se=Ke(z,G,re,this.transform,ne);let ee=null;if(G){const Ce=xi(z,G,re,this.transform,ne);ee=o.a1([],this.transform.labelPlaneMatrix,Ce)}this.retainedQueryData[x.bucketInstanceId]=new Be(x.bucketInstanceId,T,x.sourceLayerIndex,x.index,p.tileID);const ve={bucket:x,layout:k,posMatrix:z,textLabelPlaneMatrix:se,labelToScreenMatrix:ee,scale:R,textPixelRatio:L,holdingForFade:p.holdingForFade(),collisionBoxArray:E,partiallyEvaluatedTextSize:o.ah(x.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(x.sourceID)};if(g)for(const Ce of x.sortKeyRanges){const{sortKey:ue,symbolInstanceStart:xe,symbolInstanceEnd:Ae}=Ce;i.push({sortKey:ue,symbolInstanceStart:xe,symbolInstanceEnd:Ae,parameters:ve})}else i.push({symbolInstanceStart:0,symbolInstanceEnd:x.symbolInstances.length,parameters:ve})}attemptAnchorPlacement(i,u,p,g,x,T,E,k,R,L,z,G,re,ne,se,ee){const ve=o.aq[i.textAnchor],Ce=[i.textOffset0,i.textOffset1],ue=Lt(ve,p,g,Ce,x),xe=this.collisionIndex.placeCollisionBox(gt(u,ue.x,ue.y,T,E,this.transform.angle),z,k,R,L.predicate,ee);if((!se||this.collisionIndex.placeCollisionBox(gt(se,ue.x,ue.y,T,E,this.transform.angle),z,k,R,L.predicate,ee).box.length!==0)&&xe.box.length>0){let Ae;if(this.prevPlacement&&this.prevPlacement.variableOffsets[G.crossTileID]&&this.prevPlacement.placements[G.crossTileID]&&this.prevPlacement.placements[G.crossTileID].text&&(Ae=this.prevPlacement.variableOffsets[G.crossTileID].anchor),G.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[G.crossTileID]={textOffset:Ce,width:p,height:g,anchor:ve,textBoxScale:x,prevAnchor:Ae},this.markUsedJustification(re,ve,G,ne),re.allowVerticalPlacement&&(this.markUsedOrientation(re,ne,G),this.placedOrientations[G.crossTileID]=ne),{shift:ue,placedGlyphBoxes:xe}}}placeLayerBucketPart(i,u,p){const{bucket:g,layout:x,posMatrix:T,textLabelPlaneMatrix:E,labelToScreenMatrix:k,textPixelRatio:R,holdingForFade:L,collisionBoxArray:z,partiallyEvaluatedTextSize:G,collisionGroup:re}=i.parameters,ne=x.get("text-optional"),se=x.get("icon-optional"),ee=o.ar(x,"text-overlap","text-allow-overlap"),ve=ee==="always",Ce=o.ar(x,"icon-overlap","icon-allow-overlap"),ue=Ce==="always",xe=x.get("text-rotation-alignment")==="map",Ae=x.get("text-pitch-alignment")==="map",Ie=x.get("icon-text-fit")!=="none",Oe=x.get("symbol-z-order")==="viewport-y",Ze=ve&&(ue||!g.hasIconData()||se),$e=ue&&(ve||!g.hasTextData()||ne);!g.collisionArrays&&z&&g.deserializeCollisionBoxes(z);const He=this.retainedQueryData[g.bucketInstanceId].tileID,yt=this.terrain?(rt,Rt)=>this.terrain.getElevation(He,rt,Rt):null,Zt=(rt,Rt)=>{var xt,hn;if(u[rt.crossTileID])return;if(L)return void(this.placements[rt.crossTileID]=new Le(!1,!1,!1));let qt=!1,Vt=!1,Wt=!0,jn=null,mn={box:null,offscreen:null},wr={box:null,offscreen:null},sr=null,Wn=null,Ei=null,xn=0,Cs=0,Ps=0;Rt.textFeatureIndex?xn=Rt.textFeatureIndex:rt.useRuntimeCollisionCircles&&(xn=rt.featureIndex),Rt.verticalTextFeatureIndex&&(Cs=Rt.verticalTextFeatureIndex);const Ma=Rt.textBox;if(Ma){const Mr=$n=>{let ar=o.ai.horizontal;if(g.allowVerticalPlacement&&!$n&&this.prevPlacement){const ii=this.prevPlacement.placedOrientations[rt.crossTileID];ii&&(this.placedOrientations[rt.crossTileID]=ii,ar=ii,this.markUsedOrientation(g,ar,rt))}return ar},br=($n,ar)=>{if(g.allowVerticalPlacement&&rt.numVerticalGlyphVertices>0&&Rt.verticalTextBox){for(const ii of g.writingModes)if(ii===o.ai.vertical?(mn=ar(),wr=mn):mn=$n(),mn&&mn.box&&mn.box.length)break}else mn=$n()},jr=rt.textAnchorOffsetStartIndex,ao=rt.textAnchorOffsetEndIndex;if(ao===jr){const $n=(ar,ii)=>{const Un=this.collisionIndex.placeCollisionBox(ar,ee,R,T,re.predicate,yt);return Un&&Un.box&&Un.box.length&&(this.markUsedOrientation(g,ii,rt),this.placedOrientations[rt.crossTileID]=ii),Un};br(()=>$n(Ma,o.ai.horizontal),()=>{const ar=Rt.verticalTextBox;return g.allowVerticalPlacement&&rt.numVerticalGlyphVertices>0&&ar?$n(ar,o.ai.vertical):{box:null,offscreen:null}}),Mr(mn&&mn.box&&mn.box.length)}else{let $n=o.aq[(hn=(xt=this.prevPlacement)===null||xt===void 0?void 0:xt.variableOffsets[rt.crossTileID])===null||hn===void 0?void 0:hn.anchor];const ar=(Un,oo,Gu)=>{const Jm=Un.x2-Un.x1,eg=Un.y2-Un.y1,qx=rt.textBoxScale,lf=Ie&&Ce==="never"?oo:null;let As={box:[],offscreen:!1},lo=ee==="never"?1:2,ks="never";$n&&lo++;for(let Hi=0;Hi<lo;Hi++){for(let Is=jr;Is<ao;Is++){const cf=g.textAnchorOffsets.get(Is);if($n&&cf.textAnchor!==$n)continue;const ta=this.attemptAnchorPlacement(cf,Un,Jm,eg,qx,xe,Ae,R,T,re,ks,rt,g,Gu,lf,yt);if(ta&&(As=ta.placedGlyphBoxes,As&&As.box&&As.box.length))return qt=!0,jn=ta.shift,As}$n?$n=null:ks=ee}return As};br(()=>ar(Ma,Rt.iconBox,o.ai.horizontal),()=>{const Un=Rt.verticalTextBox;return g.allowVerticalPlacement&&!(mn&&mn.box&&mn.box.length)&&rt.numVerticalGlyphVertices>0&&Un?ar(Un,Rt.verticalIconBox,o.ai.vertical):{box:null,offscreen:null}}),mn&&(qt=mn.box,Wt=mn.offscreen);const ii=Mr(mn&&mn.box);if(!qt&&this.prevPlacement){const Un=this.prevPlacement.variableOffsets[rt.crossTileID];Un&&(this.variableOffsets[rt.crossTileID]=Un,this.markUsedJustification(g,Un.anchor,rt,ii))}}}if(sr=mn,qt=sr&&sr.box&&sr.box.length>0,Wt=sr&&sr.offscreen,rt.useRuntimeCollisionCircles){const Mr=g.text.placedSymbolArray.get(rt.centerJustifiedTextSymbolIndex),br=o.aj(g.textSizeData,G,Mr),jr=x.get("text-padding");Wn=this.collisionIndex.placeCollisionCircles(ee,Mr,g.lineVertexArray,g.glyphOffsetArray,br,T,E,k,p,Ae,re.predicate,rt.collisionCircleDiameter,jr,yt),Wn.circles.length&&Wn.collisionDetected&&!p&&o.w("Collisions detected, but collision boxes are not shown"),qt=ve||Wn.circles.length>0&&!Wn.collisionDetected,Wt=Wt&&Wn.offscreen}if(Rt.iconFeatureIndex&&(Ps=Rt.iconFeatureIndex),Rt.iconBox){const Mr=br=>{const jr=Ie&&jn?gt(br,jn.x,jn.y,xe,Ae,this.transform.angle):br;return this.collisionIndex.placeCollisionBox(jr,Ce,R,T,re.predicate,yt)};wr&&wr.box&&wr.box.length&&Rt.verticalIconBox?(Ei=Mr(Rt.verticalIconBox),Vt=Ei.box.length>0):(Ei=Mr(Rt.iconBox),Vt=Ei.box.length>0),Wt=Wt&&Ei.offscreen}const so=ne||rt.numHorizontalGlyphVertices===0&&rt.numVerticalGlyphVertices===0,il=se||rt.numIconVertices===0;if(so||il?il?so||(Vt=Vt&&qt):qt=Vt&&qt:Vt=qt=Vt&&qt,qt&&sr&&sr.box&&this.collisionIndex.insertCollisionBox(sr.box,ee,x.get("text-ignore-placement"),g.bucketInstanceId,wr&&wr.box&&Cs?Cs:xn,re.ID),Vt&&Ei&&this.collisionIndex.insertCollisionBox(Ei.box,Ce,x.get("icon-ignore-placement"),g.bucketInstanceId,Ps,re.ID),Wn&&(qt&&this.collisionIndex.insertCollisionCircles(Wn.circles,ee,x.get("text-ignore-placement"),g.bucketInstanceId,xn,re.ID),p)){const Mr=g.bucketInstanceId;let br=this.collisionCircleArrays[Mr];br===void 0&&(br=this.collisionCircleArrays[Mr]=new ze);for(let jr=0;jr<Wn.circles.length;jr+=4)br.circles.push(Wn.circles[jr+0]),br.circles.push(Wn.circles[jr+1]),br.circles.push(Wn.circles[jr+2]),br.circles.push(Wn.collisionDetected?1:0)}if(rt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(g.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[rt.crossTileID]=new Le(qt||Ze,Vt||$e,Wt||g.justReloaded),u[rt.crossTileID]=!0};if(Oe){if(i.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const rt=g.getSortedSymbolIndexes(this.transform.angle);for(let Rt=rt.length-1;Rt>=0;--Rt){const xt=rt[Rt];Zt(g.symbolInstances.get(xt),g.collisionArrays[xt])}}else for(let rt=i.symbolInstanceStart;rt<i.symbolInstanceEnd;rt++)Zt(g.symbolInstances.get(rt),g.collisionArrays[rt]);if(p&&g.bucketInstanceId in this.collisionCircleArrays){const rt=this.collisionCircleArrays[g.bucketInstanceId];o.as(rt.invProjMatrix,T),rt.viewportMatrix=this.collisionIndex.getViewportMatrix()}g.justReloaded=!1}markUsedJustification(i,u,p,g){let x;x=g===o.ai.vertical?p.verticalPlacedTextSymbolIndex:{left:p.leftJustifiedTextSymbolIndex,center:p.centerJustifiedTextSymbolIndex,right:p.rightJustifiedTextSymbolIndex}[o.at(u)];const T=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex,p.verticalPlacedTextSymbolIndex];for(const E of T)E>=0&&(i.text.placedSymbolArray.get(E).crossTileID=x>=0&&E!==x?0:p.crossTileID)}markUsedOrientation(i,u,p){const g=u===o.ai.horizontal||u===o.ai.horizontalOnly?u:0,x=u===o.ai.vertical?u:0,T=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex];for(const E of T)i.text.placedSymbolArray.get(E).placedOrientation=g;p.verticalPlacedTextSymbolIndex&&(i.text.placedSymbolArray.get(p.verticalPlacedTextSymbolIndex).placedOrientation=x)}commit(i){this.commitTime=i,this.zoomAtLastRecencyCheck=this.transform.zoom;const u=this.prevPlacement;let p=!1;this.prevZoomAdjustment=u?u.zoomAdjustment(this.transform.zoom):0;const g=u?u.symbolFadeChange(i):1,x=u?u.opacities:{},T=u?u.variableOffsets:{},E=u?u.placedOrientations:{};for(const k in this.placements){const R=this.placements[k],L=x[k];L?(this.opacities[k]=new _e(L,g,R.text,R.icon),p=p||R.text!==L.text.placed||R.icon!==L.icon.placed):(this.opacities[k]=new _e(null,g,R.text,R.icon,R.skipFade),p=p||R.text||R.icon)}for(const k in x){const R=x[k];if(!this.opacities[k]){const L=new _e(R,g,!1,!1);L.isHidden()||(this.opacities[k]=L,p=p||R.text.placed||R.icon.placed)}}for(const k in T)this.variableOffsets[k]||!this.opacities[k]||this.opacities[k].isHidden()||(this.variableOffsets[k]=T[k]);for(const k in E)this.placedOrientations[k]||!this.opacities[k]||this.opacities[k].isHidden()||(this.placedOrientations[k]=E[k]);if(u&&u.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");p?this.lastPlacementChangeTime=i:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=u?u.lastPlacementChangeTime:i)}updateLayerOpacities(i,u){const p={};for(const g of u){const x=g.getBucket(i);x&&g.latestFeatureIndex&&i.id===x.layerIds[0]&&this.updateBucketOpacities(x,p,g.collisionBoxArray)}}updateBucketOpacities(i,u,p){i.hasTextData()&&(i.text.opacityVertexArray.clear(),i.text.hasVisibleVertices=!1),i.hasIconData()&&(i.icon.opacityVertexArray.clear(),i.icon.hasVisibleVertices=!1),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexArray.clear(),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexArray.clear();const g=i.layers[0],x=g.layout,T=new _e(null,0,!1,!1,!0),E=x.get("text-allow-overlap"),k=x.get("icon-allow-overlap"),R=g._unevaluatedLayout.hasValue("text-variable-anchor")||g._unevaluatedLayout.hasValue("text-variable-anchor-offset"),L=x.get("text-rotation-alignment")==="map",z=x.get("text-pitch-alignment")==="map",G=x.get("icon-text-fit")!=="none",re=new _e(null,0,E&&(k||!i.hasIconData()||x.get("icon-optional")),k&&(E||!i.hasTextData()||x.get("text-optional")),!0);!i.collisionArrays&&p&&(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData())&&i.deserializeCollisionBoxes(p);const ne=(se,ee,ve)=>{for(let Ce=0;Ce<ee/4;Ce++)se.opacityVertexArray.emplaceBack(ve);se.hasVisibleVertices=se.hasVisibleVertices||ve!==$i};for(let se=0;se<i.symbolInstances.length;se++){const ee=i.symbolInstances.get(se),{numHorizontalGlyphVertices:ve,numVerticalGlyphVertices:Ce,crossTileID:ue}=ee;let xe=this.opacities[ue];u[ue]?xe=T:xe||(xe=re,this.opacities[ue]=xe),u[ue]=!0;const Ae=ee.numIconVertices>0,Ie=this.placedOrientations[ee.crossTileID],Oe=Ie===o.ai.vertical,Ze=Ie===o.ai.horizontal||Ie===o.ai.horizontalOnly;if(ve>0||Ce>0){const $e=xr(xe.text);ne(i.text,ve,Oe?$i:$e),ne(i.text,Ce,Ze?$i:$e);const He=xe.text.isHidden();[ee.rightJustifiedTextSymbolIndex,ee.centerJustifiedTextSymbolIndex,ee.leftJustifiedTextSymbolIndex].forEach(rt=>{rt>=0&&(i.text.placedSymbolArray.get(rt).hidden=He||Oe?1:0)}),ee.verticalPlacedTextSymbolIndex>=0&&(i.text.placedSymbolArray.get(ee.verticalPlacedTextSymbolIndex).hidden=He||Ze?1:0);const yt=this.variableOffsets[ee.crossTileID];yt&&this.markUsedJustification(i,yt.anchor,ee,Ie);const Zt=this.placedOrientations[ee.crossTileID];Zt&&(this.markUsedJustification(i,"left",ee,Zt),this.markUsedOrientation(i,Zt,ee))}if(Ae){const $e=xr(xe.icon),He=!(G&&ee.verticalPlacedIconSymbolIndex&&Oe);ee.placedIconSymbolIndex>=0&&(ne(i.icon,ee.numIconVertices,He?$e:$i),i.icon.placedSymbolArray.get(ee.placedIconSymbolIndex).hidden=xe.icon.isHidden()),ee.verticalPlacedIconSymbolIndex>=0&&(ne(i.icon,ee.numVerticalIconVertices,He?$i:$e),i.icon.placedSymbolArray.get(ee.verticalPlacedIconSymbolIndex).hidden=xe.icon.isHidden())}if(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData()){const $e=i.collisionArrays[se];if($e){let He=new o.P(0,0);if($e.textBox||$e.verticalTextBox){let Zt=!0;if(R){const rt=this.variableOffsets[ue];rt?(He=Lt(rt.anchor,rt.width,rt.height,rt.textOffset,rt.textBoxScale),L&&He._rotate(z?this.transform.angle:-this.transform.angle)):Zt=!1}$e.textBox&&Ft(i.textCollisionBox.collisionVertexArray,xe.text.placed,!Zt||Oe,He.x,He.y),$e.verticalTextBox&&Ft(i.textCollisionBox.collisionVertexArray,xe.text.placed,!Zt||Ze,He.x,He.y)}const yt=!!(!Ze&&$e.verticalIconBox);$e.iconBox&&Ft(i.iconCollisionBox.collisionVertexArray,xe.icon.placed,yt,G?He.x:0,G?He.y:0),$e.verticalIconBox&&Ft(i.iconCollisionBox.collisionVertexArray,xe.icon.placed,!yt,G?He.x:0,G?He.y:0)}}}if(i.sortFeatures(this.transform.angle),this.retainedQueryData[i.bucketInstanceId]&&(this.retainedQueryData[i.bucketInstanceId].featureSortOrder=i.featureSortOrder),i.hasTextData()&&i.text.opacityVertexBuffer&&i.text.opacityVertexBuffer.updateData(i.text.opacityVertexArray),i.hasIconData()&&i.icon.opacityVertexBuffer&&i.icon.opacityVertexBuffer.updateData(i.icon.opacityVertexArray),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexBuffer&&i.iconCollisionBox.collisionVertexBuffer.updateData(i.iconCollisionBox.collisionVertexArray),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexBuffer&&i.textCollisionBox.collisionVertexBuffer.updateData(i.textCollisionBox.collisionVertexArray),i.text.opacityVertexArray.length!==i.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${i.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${i.text.layoutVertexArray.length}) / 4`);if(i.icon.opacityVertexArray.length!==i.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${i.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${i.icon.layoutVertexArray.length}) / 4`);if(i.bucketInstanceId in this.collisionCircleArrays){const se=this.collisionCircleArrays[i.bucketInstanceId];i.placementInvProjMatrix=se.invProjMatrix,i.placementViewportMatrix=se.viewportMatrix,i.collisionCircleArray=se.circles,delete this.collisionCircleArrays[i.bucketInstanceId]}}symbolFadeChange(i){return this.fadeDuration===0?1:(i-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(i){return Math.max(0,(this.transform.zoom-i)/1.5)}hasTransitions(i){return this.stale||i-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(i,u){const p=this.zoomAtLastRecencyCheck===u?1-this.zoomAdjustment(u):1;return this.zoomAtLastRecencyCheck=u,this.commitTime+this.fadeDuration*p>i}setStale(){this.stale=!0}}function Ft(y,i,u,p,g){y.emplaceBack(i?1:0,u?1:0,p||0,g||0),y.emplaceBack(i?1:0,u?1:0,p||0,g||0),y.emplaceBack(i?1:0,u?1:0,p||0,g||0),y.emplaceBack(i?1:0,u?1:0,p||0,g||0)}const on=Math.pow(2,25),dn=Math.pow(2,24),Jt=Math.pow(2,17),Yt=Math.pow(2,16),kr=Math.pow(2,9),pn=Math.pow(2,8),er=Math.pow(2,1);function xr(y){if(y.opacity===0&&!y.placed)return 0;if(y.opacity===1&&y.placed)return 4294967295;const i=y.placed?1:0,u=Math.floor(127*y.opacity);return u*on+i*dn+u*Jt+i*Yt+u*kr+i*pn+u*er+i}const $i=0;class mm{constructor(i){this._sortAcrossTiles=i.layout.get("symbol-z-order")!=="viewport-y"&&!i.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(i,u,p,g,x){const T=this._bucketParts;for(;this._currentTileIndex<i.length;)if(u.getBucketParts(T,g,i[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,x())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,T.sort((E,k)=>E.sortKey-k.sortKey));this._currentPartIndex<T.length;)if(u.placeLayerBucketPart(T[this._currentPartIndex],this._seenCrossTileIDs,p),this._currentPartIndex++,x())return!0;return!1}}class Go{constructor(i,u,p,g,x,T,E,k){this.placement=new At(i,u,T,E,k),this._currentPlacementIndex=p.length-1,this._forceFullPlacement=g,this._showCollisionBoxes=x,this._done=!1}isDone(){return this._done}continuePlacement(i,u,p){const g=o.h.now(),x=()=>!this._forceFullPlacement&&o.h.now()-g>2;for(;this._currentPlacementIndex>=0;){const T=u[i[this._currentPlacementIndex]],E=this.placement.collisionIndex.transform.zoom;if(T.type==="symbol"&&(!T.minzoom||T.minzoom<=E)&&(!T.maxzoom||T.maxzoom>E)){if(this._inProgressLayer||(this._inProgressLayer=new mm(T)),this._inProgressLayer.continuePlacement(p[T.source],this.placement,this._showCollisionBoxes,T,x))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(i){return this.placement.commit(i),this.placement}}const Zo=512/o.N/2;class Px{constructor(i,u,p){this.tileID=i,this.bucketInstanceId=p,this._symbolsByKey={};const g=new Map;for(let x=0;x<u.length;x++){const T=u.get(x),E=T.key,k=g.get(E);k?k.push(T):g.set(E,[T])}for(const[x,T]of g){const E={positions:T.map(k=>({x:Math.floor(k.anchorX*Zo),y:Math.floor(k.anchorY*Zo)})),crossTileIDs:T.map(k=>k.crossTileID)};if(E.positions.length>128){const k=new o.av(E.positions.length,16,Uint16Array);for(const{x:R,y:L}of E.positions)k.add(R,L);k.finish(),delete E.positions,E.index=k}this._symbolsByKey[x]=E}}getScaledCoordinates(i,u){const{x:p,y:g,z:x}=this.tileID.canonical,{x:T,y:E,z:k}=u.canonical,R=Zo/Math.pow(2,k-x),L=(E*o.N+i.anchorY)*R,z=g*o.N*Zo;return{x:Math.floor((T*o.N+i.anchorX)*R-p*o.N*Zo),y:Math.floor(L-z)}}findMatches(i,u,p){const g=this.tileID.canonical.z<u.canonical.z?1:Math.pow(2,this.tileID.canonical.z-u.canonical.z);for(let x=0;x<i.length;x++){const T=i.get(x);if(T.crossTileID)continue;const E=this._symbolsByKey[T.key];if(!E)continue;const k=this.getScaledCoordinates(T,u);if(E.index){const R=E.index.range(k.x-g,k.y-g,k.x+g,k.y+g).sort();for(const L of R){const z=E.crossTileIDs[L];if(!p[z]){p[z]=!0,T.crossTileID=z;break}}}else if(E.positions)for(let R=0;R<E.positions.length;R++){const L=E.positions[R],z=E.crossTileIDs[R];if(Math.abs(L.x-k.x)<=g&&Math.abs(L.y-k.y)<=g&&!p[z]){p[z]=!0,T.crossTileID=z;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:i})=>i)}}class un{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class _d{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(i){const u=Math.round((i-this.lng)/360);if(u!==0)for(const p in this.indexes){const g=this.indexes[p],x={};for(const T in g){const E=g[T];E.tileID=E.tileID.unwrapTo(E.tileID.wrap+u),x[E.tileID.key]=E}this.indexes[p]=x}this.lng=i}addBucket(i,u,p){if(this.indexes[i.overscaledZ]&&this.indexes[i.overscaledZ][i.key]){if(this.indexes[i.overscaledZ][i.key].bucketInstanceId===u.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(i.overscaledZ,this.indexes[i.overscaledZ][i.key])}for(let x=0;x<u.symbolInstances.length;x++)u.symbolInstances.get(x).crossTileID=0;this.usedCrossTileIDs[i.overscaledZ]||(this.usedCrossTileIDs[i.overscaledZ]={});const g=this.usedCrossTileIDs[i.overscaledZ];for(const x in this.indexes){const T=this.indexes[x];if(Number(x)>i.overscaledZ)for(const E in T){const k=T[E];k.tileID.isChildOf(i)&&k.findMatches(u.symbolInstances,i,g)}else{const E=T[i.scaledTo(Number(x)).key];E&&E.findMatches(u.symbolInstances,i,g)}}for(let x=0;x<u.symbolInstances.length;x++){const T=u.symbolInstances.get(x);T.crossTileID||(T.crossTileID=p.generate(),g[T.crossTileID]=!0)}return this.indexes[i.overscaledZ]===void 0&&(this.indexes[i.overscaledZ]={}),this.indexes[i.overscaledZ][i.key]=new Px(i,u.symbolInstances,u.bucketInstanceId),!0}removeBucketCrossTileIDs(i,u){for(const p of u.getCrossTileIDsLists())for(const g of p)delete this.usedCrossTileIDs[i][g]}removeStaleBuckets(i){let u=!1;for(const p in this.indexes){const g=this.indexes[p];for(const x in g)i[g[x].bucketInstanceId]||(this.removeBucketCrossTileIDs(p,g[x]),delete g[x],u=!0)}return u}}class yu{constructor(){this.layerIndexes={},this.crossTileIDs=new un,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(i,u,p){let g=this.layerIndexes[i.id];g===void 0&&(g=this.layerIndexes[i.id]=new _d);let x=!1;const T={};g.handleWrapJump(p);for(const E of u){const k=E.getBucket(i);k&&i.id===k.layerIds[0]&&(k.bucketInstanceId||(k.bucketInstanceId=++this.maxBucketInstanceId),g.addBucket(E.tileID,k,this.crossTileIDs)&&(x=!0),T[k.bucketInstanceId]=!0)}return g.removeStaleBuckets(T)&&(x=!0),x}pruneUnusedLayers(i){const u={};i.forEach(p=>{u[p]=!0});for(const p in this.layerIndexes)u[p]||delete this.layerIndexes[p]}}const Ir=(y,i)=>o.x(y,i&&i.filter(u=>u.identifier!=="source.canvas")),_i=o.F(o.ax,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setGlyphs","setSprite"]),Ax=o.F(o.ax,["setCenter","setZoom","setBearing","setPitch"]),Ui=o.aw();class _r extends o.E{constructor(i,u={}){super(),this.map=i,this.dispatcher=new zt(rs(),this,i._getMapId()),this.imageManager=new je,this.imageManager.setEventedParent(this),this.glyphManager=new ht(i._requestManager,u.localIdeographFontFamily),this.lineAtlas=new mt(256,512),this.crossTileSymbolIndex=new yu,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new o.ay,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",o.az());const p=this;this._rtlTextPluginCallback=_r.registerForPluginStateChange(g=>{p.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:g.pluginStatus,pluginURL:g.pluginURL},(x,T)=>{if(o.aA(x),T&&T.every(E=>E))for(const E in p.sourceCaches){const k=p.sourceCaches[E].getSource().type;k!=="vector"&&k!=="geojson"||p.sourceCaches[E].reload()}})}),this.on("data",g=>{if(g.dataType!=="source"||g.sourceDataType!=="metadata")return;const x=this.sourceCaches[g.sourceId];if(!x)return;const T=x.getSource();if(T&&T.vectorLayerIds)for(const E in this._layers){const k=this._layers[E];k.source===T.id&&this._validateLayer(k)}})}loadURL(i,u={},p){this.fire(new o.k("dataloading",{dataType:"style"})),u.validate=typeof u.validate!="boolean"||u.validate;const g=this.map._requestManager.transformRequest(i,N.Style);this._request=o.f(g,(x,T)=>{this._request=null,x?this.fire(new o.j(x)):T&&this._load(T,u,p)})}loadJSON(i,u={},p){this.fire(new o.k("dataloading",{dataType:"style"})),this._request=o.h.frame(()=>{this._request=null,u.validate=u.validate!==!1,this._load(i,u,p)})}loadEmpty(){this.fire(new o.k("dataloading",{dataType:"style"})),this._load(Ui,{validate:!1})}_load(i,u,p){var g;const x=u.transformStyle?u.transformStyle(p,i):i;if(!u.validate||!Ir(this,o.y(x))){this._loaded=!0,this.stylesheet=x;for(const T in x.sources)this.addSource(T,x.sources[T],{validate:!1});x.sprite?this._loadSprite(x.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(x.glyphs),this._createLayers(),this.light=new Xe(this.stylesheet.light),this.map.setTerrain((g=this.stylesheet.terrain)!==null&&g!==void 0?g:null),this.fire(new o.k("data",{dataType:"style"})),this.fire(new o.k("style.load"))}}_createLayers(){const i=o.aB(this.stylesheet.layers);this.dispatcher.broadcast("setLayers",i),this._order=i.map(u=>u.id),this._layers={},this._serializedLayers=null;for(const u of i){const p=o.aC(u);p.setEventedParent(this,{layer:{id:u.id}}),this._layers[u.id]=p}}_loadSprite(i,u=!1,p=void 0){this.imageManager.setLoaded(!1),this._spriteRequest=function(g,x,T,E){const k=Te(g),R=k.length,L=T>1?"@2x":"",z={},G={},re={};for(const{id:ne,url:se}of k){const ee=x.transformRequest(x.normalizeSpriteURL(se,L,".json"),N.SpriteJSON),ve=`${ne}_${ee.url}`;z[ve]=o.f(ee,(xe,Ae)=>{delete z[ve],G[ne]=Ae,Ne(E,G,re,xe,R)});const Ce=x.transformRequest(x.normalizeSpriteURL(se,L,".png"),N.SpriteImage),ue=`${ne}_${Ce.url}`;z[ue]=Z.getImage(Ce,(xe,Ae)=>{delete z[ue],re[ne]=Ae,Ne(E,G,re,xe,R)})}return{cancel(){for(const ne of Object.values(z))ne.cancel()}}}(i,this.map._requestManager,this.map.getPixelRatio(),(g,x)=>{if(this._spriteRequest=null,g)this.fire(new o.j(g));else if(x)for(const T in x){this._spritesImagesIds[T]=[];const E=this._spritesImagesIds[T]?this._spritesImagesIds[T].filter(k=>!(k in x)):[];for(const k of E)this.imageManager.removeImage(k),this._changedImages[k]=!0;for(const k in x[T]){const R=T==="default"?k:`${T}:${k}`;this._spritesImagesIds[T].push(R),R in this.imageManager.images?this.imageManager.updateImage(R,x[T][k],!1):this.imageManager.addImage(R,x[T][k]),u&&(this._changedImages[R]=!0)}}this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),u&&(this._changed=!0),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new o.k("data",{dataType:"style"})),p&&p(g)})}_unloadSprite(){for(const i of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(i),this._changedImages[i]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new o.k("data",{dataType:"style"}))}_validateLayer(i){const u=this.sourceCaches[i.source];if(!u)return;const p=i.sourceLayer;if(!p)return;const g=u.getSource();(g.type==="geojson"||g.vectorLayerIds&&g.vectorLayerIds.indexOf(p)===-1)&&this.fire(new o.j(new Error(`Source layer "${p}" does not exist on source "${g.id}" as specified by style layer "${i.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const i in this.sourceCaches)if(!this.sourceCaches[i].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(i){const u=this._serializedAllLayers();if(!i||i.length===0)return Object.values(u);const p=[];for(const g of i)u[g]&&p.push(u[g]);return p}_serializedAllLayers(){let i=this._serializedLayers;if(i)return i;i=this._serializedLayers={};const u=Object.keys(this._layers);for(const p of u){const g=this._layers[p];g.type!=="custom"&&(i[p]=g.serialize())}return i}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const i in this.sourceCaches)if(this.sourceCaches[i].hasTransition())return!0;for(const i in this._layers)if(this._layers[i].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(i){if(!this._loaded)return;const u=this._changed;if(this._changed){const g=Object.keys(this._updatedLayers),x=Object.keys(this._removedLayers);(g.length||x.length)&&this._updateWorkerLayers(g,x);for(const T in this._updatedSources){const E=this._updatedSources[T];if(E==="reload")this._reloadSource(T);else{if(E!=="clear")throw new Error(`Invalid action ${E}`);this._clearSource(T)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const T in this._updatedPaintProps)this._layers[T].updateTransitions(i);this.light.updateTransitions(i),this._resetUpdates()}const p={};for(const g in this.sourceCaches){const x=this.sourceCaches[g];p[g]=x.used,x.used=!1}for(const g of this._order){const x=this._layers[g];x.recalculate(i,this._availableImages),!x.isHidden(i.zoom)&&x.source&&(this.sourceCaches[x.source].used=!0)}for(const g in p){const x=this.sourceCaches[g];p[g]!==x.used&&x.fire(new o.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:g}))}this.light.recalculate(i),this.z=i.zoom,u&&this.fire(new o.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const i=Object.keys(this._changedImages);if(i.length){for(const u in this.sourceCaches)this.sourceCaches[u].reloadTilesForDependencies(["icons","patterns"],i);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const i in this.sourceCaches)this.sourceCaches[i].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(i,u){this.dispatcher.broadcast("updateLayers",{layers:this._serializeByIds(i),removedIds:u})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(i,u={}){this._checkLoaded();const p=this.serialize();if(i=u.transformStyle?u.transformStyle(p,i):i,Ir(this,o.y(i)))return!1;(i=o.aD(i)).layers=o.aB(i.layers);const g=o.aE(p,i).filter(T=>!(T.command in Ax));if(g.length===0)return!1;const x=g.filter(T=>!(T.command in _i));if(x.length>0)throw new Error(`Unimplemented: ${x.map(T=>T.command).join(", ")}.`);for(const T of g)T.command!=="setTransition"&&this[T.command].apply(this,T.args);return this.stylesheet=i,this._serializedLayers=null,!0}addImage(i,u){if(this.getImage(i))return this.fire(new o.j(new Error(`An image named "${i}" already exists.`)));this.imageManager.addImage(i,u),this._afterImageUpdated(i)}updateImage(i,u){this.imageManager.updateImage(i,u)}getImage(i){return this.imageManager.getImage(i)}removeImage(i){if(!this.getImage(i))return this.fire(new o.j(new Error(`An image named "${i}" does not exist.`)));this.imageManager.removeImage(i),this._afterImageUpdated(i)}_afterImageUpdated(i){this._availableImages=this.imageManager.listImages(),this._changedImages[i]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new o.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(i,u,p={}){if(this._checkLoaded(),this.sourceCaches[i]!==void 0)throw new Error(`Source "${i}" already exists.`);if(!u.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(u).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(u.type)>=0&&this._validate(o.y.source,`sources.${i}`,u,null,p))return;this.map&&this.map._collectResourceTiming&&(u.collectResourceTiming=!0);const g=this.sourceCaches[i]=new at(i,u,this.dispatcher);g.style=this,g.setEventedParent(this,()=>({isSourceLoaded:g.loaded(),source:g.serialize(),sourceId:i})),g.onAdd(this.map),this._changed=!0}removeSource(i){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error("There is no source with this ID");for(const p in this._layers)if(this._layers[p].source===i)return this.fire(new o.j(new Error(`Source "${i}" cannot be removed while layer "${p}" is using it.`)));const u=this.sourceCaches[i];delete this.sourceCaches[i],delete this._updatedSources[i],u.fire(new o.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:i})),u.setEventedParent(null),u.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(i,u){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error(`There is no source with this ID=${i}`);const p=this.sourceCaches[i].getSource();if(p.type!=="geojson")throw new Error(`geojsonSource.type is ${p.type}, which is !== 'geojson`);p.setData(u),this._changed=!0}getSource(i){return this.sourceCaches[i]&&this.sourceCaches[i].getSource()}addLayer(i,u,p={}){this._checkLoaded();const g=i.id;if(this.getLayer(g))return void this.fire(new o.j(new Error(`Layer "${g}" already exists on this map.`)));let x;if(i.type==="custom"){if(Ir(this,o.aF(i)))return;x=o.aC(i)}else{if("source"in i&&typeof i.source=="object"&&(this.addSource(g,i.source),i=o.aD(i),i=o.e(i,{source:g})),this._validate(o.y.layer,`layers.${g}`,i,{arrayIndex:-1},p))return;x=o.aC(i),this._validateLayer(x),x.setEventedParent(this,{layer:{id:g}})}const T=u?this._order.indexOf(u):this._order.length;if(u&&T===-1)this.fire(new o.j(new Error(`Cannot add layer "${g}" before non-existing layer "${u}".`)));else{if(this._order.splice(T,0,g),this._layerOrderChanged=!0,this._layers[g]=x,this._removedLayers[g]&&x.source&&x.type!=="custom"){const E=this._removedLayers[g];delete this._removedLayers[g],E.type!==x.type?this._updatedSources[x.source]="clear":(this._updatedSources[x.source]="reload",this.sourceCaches[x.source].pause())}this._updateLayer(x),x.onAdd&&x.onAdd(this.map)}}moveLayer(i,u){if(this._checkLoaded(),this._changed=!0,!this._layers[i])return void this.fire(new o.j(new Error(`The layer '${i}' does not exist in the map's style and cannot be moved.`)));if(i===u)return;const p=this._order.indexOf(i);this._order.splice(p,1);const g=u?this._order.indexOf(u):this._order.length;u&&g===-1?this.fire(new o.j(new Error(`Cannot move layer "${i}" before non-existing layer "${u}".`))):(this._order.splice(g,0,i),this._layerOrderChanged=!0)}removeLayer(i){this._checkLoaded();const u=this._layers[i];if(!u)return void this.fire(new o.j(new Error(`Cannot remove non-existing layer "${i}".`)));u.setEventedParent(null);const p=this._order.indexOf(i);this._order.splice(p,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[i]=u,delete this._layers[i],this._serializedLayers&&delete this._serializedLayers[i],delete this._updatedLayers[i],delete this._updatedPaintProps[i],u.onRemove&&u.onRemove(this.map)}getLayer(i){return this._layers[i]}getLayersOrder(){return[...this._order]}hasLayer(i){return i in this._layers}setLayerZoomRange(i,u,p){this._checkLoaded();const g=this.getLayer(i);g?g.minzoom===u&&g.maxzoom===p||(u!=null&&(g.minzoom=u),p!=null&&(g.maxzoom=p),this._updateLayer(g)):this.fire(new o.j(new Error(`Cannot set the zoom range of non-existing layer "${i}".`)))}setFilter(i,u,p={}){this._checkLoaded();const g=this.getLayer(i);if(g){if(!o.aG(g.filter,u))return u==null?(g.filter=void 0,void this._updateLayer(g)):void(this._validate(o.y.filter,`layers.${g.id}.filter`,u,null,p)||(g.filter=o.aD(u),this._updateLayer(g)))}else this.fire(new o.j(new Error(`Cannot filter non-existing layer "${i}".`)))}getFilter(i){return o.aD(this.getLayer(i).filter)}setLayoutProperty(i,u,p,g={}){this._checkLoaded();const x=this.getLayer(i);x?o.aG(x.getLayoutProperty(u),p)||(x.setLayoutProperty(u,p,g),this._updateLayer(x)):this.fire(new o.j(new Error(`Cannot style non-existing layer "${i}".`)))}getLayoutProperty(i,u){const p=this.getLayer(i);if(p)return p.getLayoutProperty(u);this.fire(new o.j(new Error(`Cannot get style of non-existing layer "${i}".`)))}setPaintProperty(i,u,p,g={}){this._checkLoaded();const x=this.getLayer(i);x?o.aG(x.getPaintProperty(u),p)||(x.setPaintProperty(u,p,g)&&this._updateLayer(x),this._changed=!0,this._updatedPaintProps[i]=!0):this.fire(new o.j(new Error(`Cannot style non-existing layer "${i}".`)))}getPaintProperty(i,u){return this.getLayer(i).getPaintProperty(u)}setFeatureState(i,u){this._checkLoaded();const p=i.source,g=i.sourceLayer,x=this.sourceCaches[p];if(x===void 0)return void this.fire(new o.j(new Error(`The source '${p}' does not exist in the map's style.`)));const T=x.getSource().type;T==="geojson"&&g?this.fire(new o.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):T!=="vector"||g?(i.id===void 0&&this.fire(new o.j(new Error("The feature id parameter must be provided."))),x.setFeatureState(g,i.id,u)):this.fire(new o.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(i,u){this._checkLoaded();const p=i.source,g=this.sourceCaches[p];if(g===void 0)return void this.fire(new o.j(new Error(`The source '${p}' does not exist in the map's style.`)));const x=g.getSource().type,T=x==="vector"?i.sourceLayer:void 0;x!=="vector"||T?u&&typeof i.id!="string"&&typeof i.id!="number"?this.fire(new o.j(new Error("A feature id is required to remove its specific state property."))):g.removeFeatureState(T,i.id,u):this.fire(new o.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(i){this._checkLoaded();const u=i.source,p=i.sourceLayer,g=this.sourceCaches[u];if(g!==void 0)return g.getSource().type!=="vector"||p?(i.id===void 0&&this.fire(new o.j(new Error("The feature id parameter must be provided."))),g.getFeatureState(p,i.id)):void this.fire(new o.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new o.j(new Error(`The source '${u}' does not exist in the map's style.`)))}getTransition(){return o.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const i=o.aH(this.sourceCaches,x=>x.serialize()),u=this._serializeByIds(this._order),p=this.map.getTerrain()||void 0,g=this.stylesheet;return o.aI({version:g.version,name:g.name,metadata:g.metadata,light:g.light,center:g.center,zoom:g.zoom,bearing:g.bearing,pitch:g.pitch,sprite:g.sprite,glyphs:g.glyphs,transition:g.transition,sources:i,layers:u,terrain:p},x=>x!==void 0)}_updateLayer(i){this._updatedLayers[i.id]=!0,i.source&&!this._updatedSources[i.source]&&this.sourceCaches[i.source].getSource().type!=="raster"&&(this._updatedSources[i.source]="reload",this.sourceCaches[i.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(i){const u=T=>this._layers[T].type==="fill-extrusion",p={},g=[];for(let T=this._order.length-1;T>=0;T--){const E=this._order[T];if(u(E)){p[E]=T;for(const k of i){const R=k[E];if(R)for(const L of R)g.push(L)}}}g.sort((T,E)=>E.intersectionZ-T.intersectionZ);const x=[];for(let T=this._order.length-1;T>=0;T--){const E=this._order[T];if(u(E))for(let k=g.length-1;k>=0;k--){const R=g[k].feature;if(p[R.layer.id]<T)break;x.push(R),g.pop()}else for(const k of i){const R=k[E];if(R)for(const L of R)x.push(L.feature)}}return x}queryRenderedFeatures(i,u,p){u&&u.filter&&this._validate(o.y.filter,"queryRenderedFeatures.filter",u.filter,null,u);const g={};if(u&&u.layers){if(!Array.isArray(u.layers))return this.fire(new o.j(new Error("parameters.layers must be an Array."))),[];for(const E of u.layers){const k=this._layers[E];if(!k)return this.fire(new o.j(new Error(`The layer '${E}' does not exist in the map's style and cannot be queried for features.`))),[];g[k.source]=!0}}const x=[];u.availableImages=this._availableImages;const T=this._serializedAllLayers();for(const E in this.sourceCaches)u.layers&&!g[E]||x.push(Sa(this.sourceCaches[E],this._layers,T,i,u,p));return this.placement&&x.push(function(E,k,R,L,z,G,re){const ne={},se=G.queryRenderedSymbols(L),ee=[];for(const ve of Object.keys(se).map(Number))ee.push(re[ve]);ee.sort(Ws);for(const ve of ee){const Ce=ve.featureIndex.lookupSymbolFeatures(se[ve.bucketInstanceId],k,ve.bucketIndex,ve.sourceLayerIndex,z.filter,z.layers,z.availableImages,E);for(const ue in Ce){const xe=ne[ue]=ne[ue]||[],Ae=Ce[ue];Ae.sort((Ie,Oe)=>{const Ze=ve.featureSortOrder;if(Ze){const $e=Ze.indexOf(Ie.featureIndex);return Ze.indexOf(Oe.featureIndex)-$e}return Oe.featureIndex-Ie.featureIndex});for(const Ie of Ae)xe.push(Ie)}}for(const ve in ne)ne[ve].forEach(Ce=>{const ue=Ce.feature,xe=R[E[ve].source].getFeatureState(ue.layer["source-layer"],ue.id);ue.source=ue.layer.source,ue.layer["source-layer"]&&(ue.sourceLayer=ue.layer["source-layer"]),ue.state=xe});return ne}(this._layers,T,this.sourceCaches,i,u,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(x)}querySourceFeatures(i,u){u&&u.filter&&this._validate(o.y.filter,"querySourceFeatures.filter",u.filter,null,u);const p=this.sourceCaches[i];return p?function(g,x){const T=g.getRenderableIds().map(R=>g.getTileByID(R)),E=[],k={};for(let R=0;R<T.length;R++){const L=T[R],z=L.tileID.canonical.key;k[z]||(k[z]=!0,L.querySourceFeatures(E,x))}return E}(p,u):[]}addSourceType(i,u,p){return Vi(i)?p(new Error(`A source type called "${i}" already exists.`)):(((g,x)=>{ba[g]=x})(i,u),u.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:i,url:u.workerSourceURL},p):p(null,null))}getLight(){return this.light.getLight()}setLight(i,u={}){this._checkLoaded();const p=this.light.getLight();let g=!1;for(const T in i)if(!o.aG(i[T],p[T])){g=!0;break}if(!g)return;const x={now:o.h.now(),transition:o.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(i,u),this.light.updateTransitions(x)}_validate(i,u,p,g,x={}){return(!x||x.validate!==!1)&&Ir(this,i.call(o.y,o.e({key:u,style:this.serialize(),value:p,styleSpec:o.v},g)))}_remove(i=!0){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),o.aJ.off("pluginStateChange",this._rtlTextPluginCallback);for(const u in this._layers)this._layers[u].setEventedParent(null);for(const u in this.sourceCaches){const p=this.sourceCaches[u];p.setEventedParent(null),p.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove(i)}_clearSource(i){this.sourceCaches[i].clearTiles()}_reloadSource(i){this.sourceCaches[i].resume(),this.sourceCaches[i].reload()}_updateSources(i){for(const u in this.sourceCaches)this.sourceCaches[u].update(i,this.map.terrain)}_generateCollisionBoxes(){for(const i in this.sourceCaches)this._reloadSource(i)}_updatePlacement(i,u,p,g,x=!1){let T=!1,E=!1;const k={};for(const R of this._order){const L=this._layers[R];if(L.type!=="symbol")continue;if(!k[L.source]){const G=this.sourceCaches[L.source];k[L.source]=G.getRenderableIds(!0).map(re=>G.getTileByID(re)).sort((re,ne)=>ne.tileID.overscaledZ-re.tileID.overscaledZ||(re.tileID.isLessThan(ne.tileID)?-1:1))}const z=this.crossTileSymbolIndex.addLayer(L,k[L.source],i.center.lng);T=T||z}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((x=x||this._layerOrderChanged||p===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(o.h.now(),i.zoom))&&(this.pauseablePlacement=new Go(i,this.map.terrain,this._order,x,u,p,g,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,k),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(o.h.now()),E=!0),T&&this.pauseablePlacement.placement.setStale()),E||T)for(const R of this._order){const L=this._layers[R];L.type==="symbol"&&this.placement.updateLayerOpacities(L,k[L.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(o.h.now())}_releaseSymbolFadeTiles(){for(const i in this.sourceCaches)this.sourceCaches[i].releaseSymbolFadeTiles()}getImages(i,u,p){this.imageManager.getImages(u.icons,p),this._updateTilesForChangedImages();const g=this.sourceCaches[u.source];g&&g.setDependencies(u.tileID.key,u.type,u.icons)}getGlyphs(i,u,p){this.glyphManager.getGlyphs(u.stacks,p);const g=this.sourceCaches[u.source];g&&g.setDependencies(u.tileID.key,u.type,[""])}getResource(i,u,p){return o.m(u,p)}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(i,u={}){this._checkLoaded(),i&&this._validate(o.y.glyphs,"glyphs",i,null,u)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=i,this.glyphManager.entries={},this.glyphManager.setURL(i))}addSprite(i,u,p={},g){this._checkLoaded();const x=[{id:i,url:u}],T=[...Te(this.stylesheet.sprite),...x];this._validate(o.y.sprite,"sprite",T,null,p)||(this.stylesheet.sprite=T,this._loadSprite(x,!0,g))}removeSprite(i){this._checkLoaded();const u=Te(this.stylesheet.sprite);if(u.find(p=>p.id===i)){if(this._spritesImagesIds[i])for(const p of this._spritesImagesIds[i])this.imageManager.removeImage(p),this._changedImages[p]=!0;u.splice(u.findIndex(p=>p.id===i),1),this.stylesheet.sprite=u.length>0?u:void 0,delete this._spritesImagesIds[i],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new o.k("data",{dataType:"style"}))}else this.fire(new o.j(new Error(`Sprite "${i}" doesn't exists on this map.`)))}getSprite(){return Te(this.stylesheet.sprite)}setSprite(i,u={},p){this._checkLoaded(),i&&this._validate(o.y.sprite,"sprite",i,null,u)||(this.stylesheet.sprite=i,i?this._loadSprite(i,!0,p):(this._unloadSprite(),p&&p(null)))}}_r.registerForPluginStateChange=o.aK;var vu=o.Q([{name:"a_pos",type:"Int16",components:2}]),Wo="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const An={prelude:nn(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:nn(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:nn(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:nn(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:nn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:nn(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:nn(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:nn("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:nn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:nn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:nn(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:nn(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:nn(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:nn(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:nn(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:nn(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:nn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:nn(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:nn(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:nn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:nn(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:nn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:nn(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:nn(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:nn(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:nn(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:nn("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",Wo),terrainDepth:nn("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",Wo),terrainCoords:nn("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",Wo)};function nn(y,i){const u=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,p=i.match(/attribute ([\w]+) ([\w]+)/g),g=y.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),x=i.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),T=x?x.concat(g):g,E={};return{fragmentSource:y=y.replace(u,(k,R,L,z,G)=>(E[G]=!0,R==="define"?`
#ifndef HAS_UNIFORM_u_${G}
varying ${L} ${z} ${G};
#else
uniform ${L} ${z} u_${G};
#endif
`:`
#ifdef HAS_UNIFORM_u_${G}
    ${L} ${z} ${G} = u_${G};
#endif
`)),vertexSource:i=i.replace(u,(k,R,L,z,G)=>{const re=z==="float"?"vec2":"vec4",ne=G.match(/color/)?"color":re;return E[G]?R==="define"?`
#ifndef HAS_UNIFORM_u_${G}
uniform lowp float u_${G}_t;
attribute ${L} ${re} a_${G};
varying ${L} ${z} ${G};
#else
uniform ${L} ${z} u_${G};
#endif
`:ne==="vec4"?`
#ifndef HAS_UNIFORM_u_${G}
    ${G} = a_${G};
#else
    ${L} ${z} ${G} = u_${G};
#endif
`:`
#ifndef HAS_UNIFORM_u_${G}
    ${G} = unpack_mix_${ne}(a_${G}, u_${G}_t);
#else
    ${L} ${z} ${G} = u_${G};
#endif
`:R==="define"?`
#ifndef HAS_UNIFORM_u_${G}
uniform lowp float u_${G}_t;
attribute ${L} ${re} a_${G};
#else
uniform ${L} ${z} u_${G};
#endif
`:ne==="vec4"?`
#ifndef HAS_UNIFORM_u_${G}
    ${L} ${z} ${G} = a_${G};
#else
    ${L} ${z} ${G} = u_${G};
#endif
`:`
#ifndef HAS_UNIFORM_u_${G}
    ${L} ${z} ${G} = unpack_mix_${ne}(a_${G}, u_${G}_t);
#else
    ${L} ${z} ${G} = u_${G};
#endif
`}),staticAttributes:p,staticUniforms:T}}class Qa{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(i,u,p,g,x,T,E,k,R){this.context=i;let L=this.boundPaintVertexBuffers.length!==g.length;for(let z=0;!L&&z<g.length;z++)this.boundPaintVertexBuffers[z]!==g[z]&&(L=!0);!this.vao||this.boundProgram!==u||this.boundLayoutVertexBuffer!==p||L||this.boundIndexBuffer!==x||this.boundVertexOffset!==T||this.boundDynamicVertexBuffer!==E||this.boundDynamicVertexBuffer2!==k||this.boundDynamicVertexBuffer3!==R?this.freshBind(u,p,g,x,T,E,k,R):(i.bindVertexArray.set(this.vao),E&&E.bind(),x&&x.dynamicDraw&&x.bind(),k&&k.bind(),R&&R.bind())}freshBind(i,u,p,g,x,T,E,k){const R=i.numAttributes,L=this.context,z=L.gl;this.vao&&this.destroy(),this.vao=L.createVertexArray(),L.bindVertexArray.set(this.vao),this.boundProgram=i,this.boundLayoutVertexBuffer=u,this.boundPaintVertexBuffers=p,this.boundIndexBuffer=g,this.boundVertexOffset=x,this.boundDynamicVertexBuffer=T,this.boundDynamicVertexBuffer2=E,this.boundDynamicVertexBuffer3=k,u.enableAttributes(z,i);for(const G of p)G.enableAttributes(z,i);T&&T.enableAttributes(z,i),E&&E.enableAttributes(z,i),k&&k.enableAttributes(z,i),u.bind(),u.setVertexAttribPointers(z,i,x);for(const G of p)G.bind(),G.setVertexAttribPointers(z,i,x);T&&(T.bind(),T.setVertexAttribPointers(z,i,x)),g&&g.bind(),E&&(E.bind(),E.setVertexAttribPointers(z,i,x)),k&&(k.bind(),k.setVertexAttribPointers(z,i,x)),L.currentNumAttributes=R}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function Ln(y){const i=[];for(let u=0;u<y.length;u++){if(y[u]===null)continue;const p=y[u].split(" ");i.push(p.pop())}return i}class xu{constructor(i,u,p,g,x,T){const E=i.gl;this.program=E.createProgram();const k=Ln(u.staticAttributes),R=p?p.getBinderAttributes():[],L=k.concat(R),z=An.prelude.staticUniforms?Ln(An.prelude.staticUniforms):[],G=u.staticUniforms?Ln(u.staticUniforms):[],re=p?p.getBinderUniforms():[],ne=z.concat(G).concat(re),se=[];for(const Ie of ne)se.indexOf(Ie)<0&&se.push(Ie);const ee=p?p.defines():[];x&&ee.push("#define OVERDRAW_INSPECTOR;"),T&&ee.push("#define TERRAIN3D;");const ve=ee.concat(An.prelude.fragmentSource,u.fragmentSource).join(`
`),Ce=ee.concat(An.prelude.vertexSource,u.vertexSource).join(`
`),ue=E.createShader(E.FRAGMENT_SHADER);if(E.isContextLost())return void(this.failedToCreate=!0);if(E.shaderSource(ue,ve),E.compileShader(ue),!E.getShaderParameter(ue,E.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${E.getShaderInfoLog(ue)}`);E.attachShader(this.program,ue);const xe=E.createShader(E.VERTEX_SHADER);if(E.isContextLost())return void(this.failedToCreate=!0);if(E.shaderSource(xe,Ce),E.compileShader(xe),!E.getShaderParameter(xe,E.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${E.getShaderInfoLog(xe)}`);E.attachShader(this.program,xe),this.attributes={};const Ae={};this.numAttributes=L.length;for(let Ie=0;Ie<this.numAttributes;Ie++)L[Ie]&&(E.bindAttribLocation(this.program,Ie,L[Ie]),this.attributes[L[Ie]]=Ie);if(E.linkProgram(this.program),!E.getProgramParameter(this.program,E.LINK_STATUS))throw new Error(`Program failed to link: ${E.getProgramInfoLog(this.program)}`);E.deleteShader(xe),E.deleteShader(ue);for(let Ie=0;Ie<se.length;Ie++){const Oe=se[Ie];if(Oe&&!Ae[Oe]){const Ze=E.getUniformLocation(this.program,Oe);Ze&&(Ae[Oe]=Ze)}}this.fixedUniforms=g(i,Ae),this.terrainUniforms=((Ie,Oe)=>({u_depth:new o.aL(Ie,Oe.u_depth),u_terrain:new o.aL(Ie,Oe.u_terrain),u_terrain_dim:new o.aM(Ie,Oe.u_terrain_dim),u_terrain_matrix:new o.aN(Ie,Oe.u_terrain_matrix),u_terrain_unpack:new o.aO(Ie,Oe.u_terrain_unpack),u_terrain_exaggeration:new o.aM(Ie,Oe.u_terrain_exaggeration)}))(i,Ae),this.binderUniforms=p?p.getUniforms(i,Ae):[]}draw(i,u,p,g,x,T,E,k,R,L,z,G,re,ne,se,ee,ve,Ce){const ue=i.gl;if(this.failedToCreate)return;if(i.program.set(this.program),i.setDepthMode(p),i.setStencilMode(g),i.setColorMode(x),i.setCullFace(T),k){i.activeTexture.set(ue.TEXTURE2),ue.bindTexture(ue.TEXTURE_2D,k.depthTexture),i.activeTexture.set(ue.TEXTURE3),ue.bindTexture(ue.TEXTURE_2D,k.texture);for(const Ae in this.terrainUniforms)this.terrainUniforms[Ae].set(k[Ae])}for(const Ae in this.fixedUniforms)this.fixedUniforms[Ae].set(E[Ae]);se&&se.setUniforms(i,this.binderUniforms,re,{zoom:ne});let xe=0;switch(u){case ue.LINES:xe=2;break;case ue.TRIANGLES:xe=3;break;case ue.LINE_STRIP:xe=1}for(const Ae of G.get()){const Ie=Ae.vaos||(Ae.vaos={});(Ie[R]||(Ie[R]=new Qa)).bind(i,this,L,se?se.getPaintVertexBuffers():[],z,Ae.vertexOffset,ee,ve,Ce),ue.drawElements(u,Ae.primitiveLength*xe,ue.UNSIGNED_SHORT,Ae.primitiveOffset*xe*2)}}}function qi(y,i,u){const p=1/me(u,1,i.transform.tileZoom),g=Math.pow(2,u.tileID.overscaledZ),x=u.tileSize*Math.pow(2,i.transform.tileZoom)/g,T=x*(u.tileID.canonical.x+u.tileID.wrap*g),E=x*u.tileID.canonical.y;return{u_image:0,u_texsize:u.imageAtlasTexture.size,u_scale:[p,y.fromScale,y.toScale],u_fade:y.t,u_pixel_coord_upper:[T>>16,E>>16],u_pixel_coord_lower:[65535&T,65535&E]}}const wd=(y,i,u,p)=>{const g=i.style.light,x=g.properties.get("position"),T=[x.x,x.y,x.z],E=function(){var R=new o.A(9);return o.A!=Float32Array&&(R[1]=0,R[2]=0,R[3]=0,R[5]=0,R[6]=0,R[7]=0),R[0]=1,R[4]=1,R[8]=1,R}();g.properties.get("anchor")==="viewport"&&function(R,L){var z=Math.sin(L),G=Math.cos(L);R[0]=G,R[1]=z,R[2]=0,R[3]=-z,R[4]=G,R[5]=0,R[6]=0,R[7]=0,R[8]=1}(E,-i.transform.angle),function(R,L,z){var G=L[0],re=L[1],ne=L[2];R[0]=G*z[0]+re*z[3]+ne*z[6],R[1]=G*z[1]+re*z[4]+ne*z[7],R[2]=G*z[2]+re*z[5]+ne*z[8]}(T,T,E);const k=g.properties.get("color");return{u_matrix:y,u_lightpos:T,u_lightintensity:g.properties.get("intensity"),u_lightcolor:[k.r,k.g,k.b],u_vertical_gradient:+u,u_opacity:p}},Ea=(y,i,u,p,g,x,T)=>o.e(wd(y,i,u,p),qi(x,i,T),{u_height_factor:-Math.pow(2,g.overscaledZ)/T.tileSize/8}),gm=y=>({u_matrix:y}),bd=(y,i,u,p)=>o.e(gm(y),qi(u,i,p)),_u=(y,i)=>({u_matrix:y,u_world:i}),wu=(y,i,u,p,g)=>o.e(bd(y,i,u,p),{u_world:g}),Ca=(y,i,u,p)=>{const g=y.transform;let x,T;if(p.paint.get("circle-pitch-alignment")==="map"){const E=me(u,1,g.zoom);x=!0,T=[E,E]}else x=!1,T=g.pixelsToGLUnits;return{u_camera_to_center_distance:g.cameraToCenterDistance,u_scale_with_map:+(p.paint.get("circle-pitch-scale")==="map"),u_matrix:y.translatePosMatrix(i.posMatrix,u,p.paint.get("circle-translate"),p.paint.get("circle-translate-anchor")),u_pitch_with_map:+x,u_device_pixel_ratio:y.pixelRatio,u_extrude_scale:T}},Sd=(y,i,u)=>{const p=me(u,1,i.zoom),g=Math.pow(2,i.zoom-u.tileID.overscaledZ),x=u.tileID.overscaleFactor();return{u_matrix:y,u_camera_to_center_distance:i.cameraToCenterDistance,u_pixels_to_tile_units:p,u_extrude_scale:[i.pixelsToGLUnits[0]/(p*g),i.pixelsToGLUnits[1]/(p*g)],u_overscale_factor:x}},cc=(y,i,u=1)=>({u_matrix:y,u_color:i,u_overlay:0,u_overlay_scale:u}),ym=y=>({u_matrix:y}),kx=(y,i,u,p)=>({u_matrix:y,u_extrude_scale:me(i,1,u),u_intensity:p});function Td(y,i){const u=Math.pow(2,i.canonical.z),p=i.canonical.y;return[new o.U(0,p/u).toLngLat().lat,new o.U(0,(p+1)/u).toLngLat().lat]}const Ed=(y,i,u,p)=>{const g=y.transform;return{u_matrix:bu(y,i,u,p),u_ratio:1/me(i,1,g.zoom),u_device_pixel_ratio:y.pixelRatio,u_units_to_pixels:[1/g.pixelsToGLUnits[0],1/g.pixelsToGLUnits[1]]}},vm=(y,i,u,p,g)=>o.e(Ed(y,i,u,g),{u_image:0,u_image_height:p}),Ix=(y,i,u,p,g)=>{const x=y.transform,T=_m(i,x);return{u_matrix:bu(y,i,u,g),u_texsize:i.imageAtlasTexture.size,u_ratio:1/me(i,1,x.zoom),u_device_pixel_ratio:y.pixelRatio,u_image:0,u_scale:[T,p.fromScale,p.toScale],u_fade:p.t,u_units_to_pixels:[1/x.pixelsToGLUnits[0],1/x.pixelsToGLUnits[1]]}},xm=(y,i,u,p,g,x)=>{const T=y.lineAtlas,E=_m(i,y.transform),k=u.layout.get("line-cap")==="round",R=T.getDash(p.from,k),L=T.getDash(p.to,k),z=R.width*g.fromScale,G=L.width*g.toScale;return o.e(Ed(y,i,u,x),{u_patternscale_a:[E/z,-R.height/2],u_patternscale_b:[E/G,-L.height/2],u_sdfgamma:T.width/(256*Math.min(z,G)*y.pixelRatio)/2,u_image:0,u_tex_y_a:R.y,u_tex_y_b:L.y,u_mix:g.t})};function _m(y,i){return 1/me(y,1,i.tileZoom)}function bu(y,i,u,p){return y.translatePosMatrix(p?p.posMatrix:i.tileID.posMatrix,i,u.paint.get("line-translate"),u.paint.get("line-translate-anchor"))}const wm=(y,i,u,p,g)=>{return{u_matrix:y,u_tl_parent:i,u_scale_parent:u,u_buffer_scale:1,u_fade_t:p.mix,u_opacity:p.opacity*g.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:g.paint.get("raster-brightness-min"),u_brightness_high:g.paint.get("raster-brightness-max"),u_saturation_factor:(T=g.paint.get("raster-saturation"),T>0?1-1/(1.001-T):-T),u_contrast_factor:(x=g.paint.get("raster-contrast"),x>0?1/(1-x):1+x),u_spin_weights:bm(g.paint.get("raster-hue-rotate"))};var x,T};function bm(y){y*=Math.PI/180;const i=Math.sin(y),u=Math.cos(y);return[(2*u+1)/3,(-Math.sqrt(3)*i-u+1)/3,(Math.sqrt(3)*i-u+1)/3]}const Cd=(y,i,u,p,g,x,T,E,k,R)=>{const L=g.transform;return{u_is_size_zoom_constant:+(y==="constant"||y==="source"),u_is_size_feature_constant:+(y==="constant"||y==="camera"),u_size_t:i?i.uSizeT:0,u_size:i?i.uSize:0,u_camera_to_center_distance:L.cameraToCenterDistance,u_pitch:L.pitch/360*2*Math.PI,u_rotate_symbol:+u,u_aspect_ratio:L.width/L.height,u_fade_change:g.options.fadeDuration?g.symbolFadeChange:1,u_matrix:x,u_label_plane_matrix:T,u_coord_matrix:E,u_is_text:+k,u_pitch_with_map:+p,u_texsize:R,u_texture:0}},Pd=(y,i,u,p,g,x,T,E,k,R,L)=>{const z=g.transform;return o.e(Cd(y,i,u,p,g,x,T,E,k,R),{u_gamma_scale:p?Math.cos(z._pitch)*z.cameraToCenterDistance:1,u_device_pixel_ratio:g.pixelRatio,u_is_halo:+L})},Ya=(y,i,u,p,g,x,T,E,k,R)=>o.e(Pd(y,i,u,p,g,x,T,E,!0,k,!0),{u_texsize_icon:R,u_texture_icon:1}),Su=(y,i,u)=>({u_matrix:y,u_opacity:i,u_color:u}),Gi=(y,i,u,p,g,x)=>o.e(function(T,E,k,R){const L=k.imageManager.getPattern(T.from.toString()),z=k.imageManager.getPattern(T.to.toString()),{width:G,height:re}=k.imageManager.getPixelSize(),ne=Math.pow(2,R.tileID.overscaledZ),se=R.tileSize*Math.pow(2,k.transform.tileZoom)/ne,ee=se*(R.tileID.canonical.x+R.tileID.wrap*ne),ve=se*R.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:L.tl,u_pattern_br_a:L.br,u_pattern_tl_b:z.tl,u_pattern_br_b:z.br,u_texsize:[G,re],u_mix:E.t,u_pattern_size_a:L.displaySize,u_pattern_size_b:z.displaySize,u_scale_a:E.fromScale,u_scale_b:E.toScale,u_tile_units_to_pixels:1/me(R,1,k.transform.tileZoom),u_pixel_coord_upper:[ee>>16,ve>>16],u_pixel_coord_lower:[65535&ee,65535&ve]}}(p,x,u,g),{u_matrix:y,u_opacity:i}),Tu={fillExtrusion:(y,i)=>({u_matrix:new o.aN(y,i.u_matrix),u_lightpos:new o.aP(y,i.u_lightpos),u_lightintensity:new o.aM(y,i.u_lightintensity),u_lightcolor:new o.aP(y,i.u_lightcolor),u_vertical_gradient:new o.aM(y,i.u_vertical_gradient),u_opacity:new o.aM(y,i.u_opacity)}),fillExtrusionPattern:(y,i)=>({u_matrix:new o.aN(y,i.u_matrix),u_lightpos:new o.aP(y,i.u_lightpos),u_lightintensity:new o.aM(y,i.u_lightintensity),u_lightcolor:new o.aP(y,i.u_lightcolor),u_vertical_gradient:new o.aM(y,i.u_vertical_gradient),u_height_factor:new o.aM(y,i.u_height_factor),u_image:new o.aL(y,i.u_image),u_texsize:new o.aQ(y,i.u_texsize),u_pixel_coord_upper:new o.aQ(y,i.u_pixel_coord_upper),u_pixel_coord_lower:new o.aQ(y,i.u_pixel_coord_lower),u_scale:new o.aP(y,i.u_scale),u_fade:new o.aM(y,i.u_fade),u_opacity:new o.aM(y,i.u_opacity)}),fill:(y,i)=>({u_matrix:new o.aN(y,i.u_matrix)}),fillPattern:(y,i)=>({u_matrix:new o.aN(y,i.u_matrix),u_image:new o.aL(y,i.u_image),u_texsize:new o.aQ(y,i.u_texsize),u_pixel_coord_upper:new o.aQ(y,i.u_pixel_coord_upper),u_pixel_coord_lower:new o.aQ(y,i.u_pixel_coord_lower),u_scale:new o.aP(y,i.u_scale),u_fade:new o.aM(y,i.u_fade)}),fillOutline:(y,i)=>({u_matrix:new o.aN(y,i.u_matrix),u_world:new o.aQ(y,i.u_world)}),fillOutlinePattern:(y,i)=>({u_matrix:new o.aN(y,i.u_matrix),u_world:new o.aQ(y,i.u_world),u_image:new o.aL(y,i.u_image),u_texsize:new o.aQ(y,i.u_texsize),u_pixel_coord_upper:new o.aQ(y,i.u_pixel_coord_upper),u_pixel_coord_lower:new o.aQ(y,i.u_pixel_coord_lower),u_scale:new o.aP(y,i.u_scale),u_fade:new o.aM(y,i.u_fade)}),circle:(y,i)=>({u_camera_to_center_distance:new o.aM(y,i.u_camera_to_center_distance),u_scale_with_map:new o.aL(y,i.u_scale_with_map),u_pitch_with_map:new o.aL(y,i.u_pitch_with_map),u_extrude_scale:new o.aQ(y,i.u_extrude_scale),u_device_pixel_ratio:new o.aM(y,i.u_device_pixel_ratio),u_matrix:new o.aN(y,i.u_matrix)}),collisionBox:(y,i)=>({u_matrix:new o.aN(y,i.u_matrix),u_camera_to_center_distance:new o.aM(y,i.u_camera_to_center_distance),u_pixels_to_tile_units:new o.aM(y,i.u_pixels_to_tile_units),u_extrude_scale:new o.aQ(y,i.u_extrude_scale),u_overscale_factor:new o.aM(y,i.u_overscale_factor)}),collisionCircle:(y,i)=>({u_matrix:new o.aN(y,i.u_matrix),u_inv_matrix:new o.aN(y,i.u_inv_matrix),u_camera_to_center_distance:new o.aM(y,i.u_camera_to_center_distance),u_viewport_size:new o.aQ(y,i.u_viewport_size)}),debug:(y,i)=>({u_color:new o.aR(y,i.u_color),u_matrix:new o.aN(y,i.u_matrix),u_overlay:new o.aL(y,i.u_overlay),u_overlay_scale:new o.aM(y,i.u_overlay_scale)}),clippingMask:(y,i)=>({u_matrix:new o.aN(y,i.u_matrix)}),heatmap:(y,i)=>({u_extrude_scale:new o.aM(y,i.u_extrude_scale),u_intensity:new o.aM(y,i.u_intensity),u_matrix:new o.aN(y,i.u_matrix)}),heatmapTexture:(y,i)=>({u_matrix:new o.aN(y,i.u_matrix),u_world:new o.aQ(y,i.u_world),u_image:new o.aL(y,i.u_image),u_color_ramp:new o.aL(y,i.u_color_ramp),u_opacity:new o.aM(y,i.u_opacity)}),hillshade:(y,i)=>({u_matrix:new o.aN(y,i.u_matrix),u_image:new o.aL(y,i.u_image),u_latrange:new o.aQ(y,i.u_latrange),u_light:new o.aQ(y,i.u_light),u_shadow:new o.aR(y,i.u_shadow),u_highlight:new o.aR(y,i.u_highlight),u_accent:new o.aR(y,i.u_accent)}),hillshadePrepare:(y,i)=>({u_matrix:new o.aN(y,i.u_matrix),u_image:new o.aL(y,i.u_image),u_dimension:new o.aQ(y,i.u_dimension),u_zoom:new o.aM(y,i.u_zoom),u_unpack:new o.aO(y,i.u_unpack)}),line:(y,i)=>({u_matrix:new o.aN(y,i.u_matrix),u_ratio:new o.aM(y,i.u_ratio),u_device_pixel_ratio:new o.aM(y,i.u_device_pixel_ratio),u_units_to_pixels:new o.aQ(y,i.u_units_to_pixels)}),lineGradient:(y,i)=>({u_matrix:new o.aN(y,i.u_matrix),u_ratio:new o.aM(y,i.u_ratio),u_device_pixel_ratio:new o.aM(y,i.u_device_pixel_ratio),u_units_to_pixels:new o.aQ(y,i.u_units_to_pixels),u_image:new o.aL(y,i.u_image),u_image_height:new o.aM(y,i.u_image_height)}),linePattern:(y,i)=>({u_matrix:new o.aN(y,i.u_matrix),u_texsize:new o.aQ(y,i.u_texsize),u_ratio:new o.aM(y,i.u_ratio),u_device_pixel_ratio:new o.aM(y,i.u_device_pixel_ratio),u_image:new o.aL(y,i.u_image),u_units_to_pixels:new o.aQ(y,i.u_units_to_pixels),u_scale:new o.aP(y,i.u_scale),u_fade:new o.aM(y,i.u_fade)}),lineSDF:(y,i)=>({u_matrix:new o.aN(y,i.u_matrix),u_ratio:new o.aM(y,i.u_ratio),u_device_pixel_ratio:new o.aM(y,i.u_device_pixel_ratio),u_units_to_pixels:new o.aQ(y,i.u_units_to_pixels),u_patternscale_a:new o.aQ(y,i.u_patternscale_a),u_patternscale_b:new o.aQ(y,i.u_patternscale_b),u_sdfgamma:new o.aM(y,i.u_sdfgamma),u_image:new o.aL(y,i.u_image),u_tex_y_a:new o.aM(y,i.u_tex_y_a),u_tex_y_b:new o.aM(y,i.u_tex_y_b),u_mix:new o.aM(y,i.u_mix)}),raster:(y,i)=>({u_matrix:new o.aN(y,i.u_matrix),u_tl_parent:new o.aQ(y,i.u_tl_parent),u_scale_parent:new o.aM(y,i.u_scale_parent),u_buffer_scale:new o.aM(y,i.u_buffer_scale),u_fade_t:new o.aM(y,i.u_fade_t),u_opacity:new o.aM(y,i.u_opacity),u_image0:new o.aL(y,i.u_image0),u_image1:new o.aL(y,i.u_image1),u_brightness_low:new o.aM(y,i.u_brightness_low),u_brightness_high:new o.aM(y,i.u_brightness_high),u_saturation_factor:new o.aM(y,i.u_saturation_factor),u_contrast_factor:new o.aM(y,i.u_contrast_factor),u_spin_weights:new o.aP(y,i.u_spin_weights)}),symbolIcon:(y,i)=>({u_is_size_zoom_constant:new o.aL(y,i.u_is_size_zoom_constant),u_is_size_feature_constant:new o.aL(y,i.u_is_size_feature_constant),u_size_t:new o.aM(y,i.u_size_t),u_size:new o.aM(y,i.u_size),u_camera_to_center_distance:new o.aM(y,i.u_camera_to_center_distance),u_pitch:new o.aM(y,i.u_pitch),u_rotate_symbol:new o.aL(y,i.u_rotate_symbol),u_aspect_ratio:new o.aM(y,i.u_aspect_ratio),u_fade_change:new o.aM(y,i.u_fade_change),u_matrix:new o.aN(y,i.u_matrix),u_label_plane_matrix:new o.aN(y,i.u_label_plane_matrix),u_coord_matrix:new o.aN(y,i.u_coord_matrix),u_is_text:new o.aL(y,i.u_is_text),u_pitch_with_map:new o.aL(y,i.u_pitch_with_map),u_texsize:new o.aQ(y,i.u_texsize),u_texture:new o.aL(y,i.u_texture)}),symbolSDF:(y,i)=>({u_is_size_zoom_constant:new o.aL(y,i.u_is_size_zoom_constant),u_is_size_feature_constant:new o.aL(y,i.u_is_size_feature_constant),u_size_t:new o.aM(y,i.u_size_t),u_size:new o.aM(y,i.u_size),u_camera_to_center_distance:new o.aM(y,i.u_camera_to_center_distance),u_pitch:new o.aM(y,i.u_pitch),u_rotate_symbol:new o.aL(y,i.u_rotate_symbol),u_aspect_ratio:new o.aM(y,i.u_aspect_ratio),u_fade_change:new o.aM(y,i.u_fade_change),u_matrix:new o.aN(y,i.u_matrix),u_label_plane_matrix:new o.aN(y,i.u_label_plane_matrix),u_coord_matrix:new o.aN(y,i.u_coord_matrix),u_is_text:new o.aL(y,i.u_is_text),u_pitch_with_map:new o.aL(y,i.u_pitch_with_map),u_texsize:new o.aQ(y,i.u_texsize),u_texture:new o.aL(y,i.u_texture),u_gamma_scale:new o.aM(y,i.u_gamma_scale),u_device_pixel_ratio:new o.aM(y,i.u_device_pixel_ratio),u_is_halo:new o.aL(y,i.u_is_halo)}),symbolTextAndIcon:(y,i)=>({u_is_size_zoom_constant:new o.aL(y,i.u_is_size_zoom_constant),u_is_size_feature_constant:new o.aL(y,i.u_is_size_feature_constant),u_size_t:new o.aM(y,i.u_size_t),u_size:new o.aM(y,i.u_size),u_camera_to_center_distance:new o.aM(y,i.u_camera_to_center_distance),u_pitch:new o.aM(y,i.u_pitch),u_rotate_symbol:new o.aL(y,i.u_rotate_symbol),u_aspect_ratio:new o.aM(y,i.u_aspect_ratio),u_fade_change:new o.aM(y,i.u_fade_change),u_matrix:new o.aN(y,i.u_matrix),u_label_plane_matrix:new o.aN(y,i.u_label_plane_matrix),u_coord_matrix:new o.aN(y,i.u_coord_matrix),u_is_text:new o.aL(y,i.u_is_text),u_pitch_with_map:new o.aL(y,i.u_pitch_with_map),u_texsize:new o.aQ(y,i.u_texsize),u_texsize_icon:new o.aQ(y,i.u_texsize_icon),u_texture:new o.aL(y,i.u_texture),u_texture_icon:new o.aL(y,i.u_texture_icon),u_gamma_scale:new o.aM(y,i.u_gamma_scale),u_device_pixel_ratio:new o.aM(y,i.u_device_pixel_ratio),u_is_halo:new o.aL(y,i.u_is_halo)}),background:(y,i)=>({u_matrix:new o.aN(y,i.u_matrix),u_opacity:new o.aM(y,i.u_opacity),u_color:new o.aR(y,i.u_color)}),backgroundPattern:(y,i)=>({u_matrix:new o.aN(y,i.u_matrix),u_opacity:new o.aM(y,i.u_opacity),u_image:new o.aL(y,i.u_image),u_pattern_tl_a:new o.aQ(y,i.u_pattern_tl_a),u_pattern_br_a:new o.aQ(y,i.u_pattern_br_a),u_pattern_tl_b:new o.aQ(y,i.u_pattern_tl_b),u_pattern_br_b:new o.aQ(y,i.u_pattern_br_b),u_texsize:new o.aQ(y,i.u_texsize),u_mix:new o.aM(y,i.u_mix),u_pattern_size_a:new o.aQ(y,i.u_pattern_size_a),u_pattern_size_b:new o.aQ(y,i.u_pattern_size_b),u_scale_a:new o.aM(y,i.u_scale_a),u_scale_b:new o.aM(y,i.u_scale_b),u_pixel_coord_upper:new o.aQ(y,i.u_pixel_coord_upper),u_pixel_coord_lower:new o.aQ(y,i.u_pixel_coord_lower),u_tile_units_to_pixels:new o.aM(y,i.u_tile_units_to_pixels)}),terrain:(y,i)=>({u_matrix:new o.aN(y,i.u_matrix),u_texture:new o.aL(y,i.u_texture),u_ele_delta:new o.aM(y,i.u_ele_delta)}),terrainDepth:(y,i)=>({u_matrix:new o.aN(y,i.u_matrix),u_ele_delta:new o.aM(y,i.u_ele_delta)}),terrainCoords:(y,i)=>({u_matrix:new o.aN(y,i.u_matrix),u_texture:new o.aL(y,i.u_texture),u_terrain_coords_id:new o.aM(y,i.u_terrain_coords_id),u_ele_delta:new o.aM(y,i.u_ele_delta)})};class Eu{constructor(i,u,p){this.context=i;const g=i.gl;this.buffer=g.createBuffer(),this.dynamicDraw=!!p,this.context.unbindVAO(),i.bindElementBuffer.set(this.buffer),g.bufferData(g.ELEMENT_ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?g.DYNAMIC_DRAW:g.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(i){const u=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),u.bufferSubData(u.ELEMENT_ARRAY_BUFFER,0,i.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const uc={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Cu{constructor(i,u,p,g){this.length=u.length,this.attributes=p,this.itemSize=u.bytesPerElement,this.dynamicDraw=g,this.context=i;const x=i.gl;this.buffer=x.createBuffer(),i.bindVertexBuffer.set(this.buffer),x.bufferData(x.ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?x.DYNAMIC_DRAW:x.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(i){if(i.length!==this.length)throw new Error(`Length of new data is ${i.length}, which doesn't match current length of ${this.length}`);const u=this.context.gl;this.bind(),u.bufferSubData(u.ARRAY_BUFFER,0,i.arrayBuffer)}enableAttributes(i,u){for(let p=0;p<this.attributes.length;p++){const g=u.attributes[this.attributes[p].name];g!==void 0&&i.enableVertexAttribArray(g)}}setVertexAttribPointers(i,u,p){for(let g=0;g<this.attributes.length;g++){const x=this.attributes[g],T=u.attributes[x.name];T!==void 0&&i.vertexAttribPointer(T,x.components,i[uc[x.type]],!1,this.itemSize,x.offset+this.itemSize*(p||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Ho=new WeakMap;function Pa(y){var i;if(Ho.has(y))return Ho.get(y);{const u=(i=y.getParameter(y.VERSION))===null||i===void 0?void 0:i.startsWith("WebGL 2.0");return Ho.set(y,u),u}}class Kt{constructor(i){this.gl=i.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(i){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Pu extends Kt{getDefault(){return o.aT.transparent}set(i){const u=this.current;(i.r!==u.r||i.g!==u.g||i.b!==u.b||i.a!==u.a||this.dirty)&&(this.gl.clearColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class wi extends Kt{getDefault(){return 1}set(i){(i!==this.current||this.dirty)&&(this.gl.clearDepth(i),this.current=i,this.dirty=!1)}}class bi extends Kt{getDefault(){return 0}set(i){(i!==this.current||this.dirty)&&(this.gl.clearStencil(i),this.current=i,this.dirty=!1)}}class Ad extends Kt{getDefault(){return[!0,!0,!0,!0]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||i[2]!==u[2]||i[3]!==u[3]||this.dirty)&&(this.gl.colorMask(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class Au extends Kt{getDefault(){return!0}set(i){(i!==this.current||this.dirty)&&(this.gl.depthMask(i),this.current=i,this.dirty=!1)}}class ku extends Kt{getDefault(){return 255}set(i){(i!==this.current||this.dirty)&&(this.gl.stencilMask(i),this.current=i,this.dirty=!1)}}class kd extends Kt{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(i){const u=this.current;(i.func!==u.func||i.ref!==u.ref||i.mask!==u.mask||this.dirty)&&(this.gl.stencilFunc(i.func,i.ref,i.mask),this.current=i,this.dirty=!1)}}class Id extends Kt{getDefault(){const i=this.gl;return[i.KEEP,i.KEEP,i.KEEP]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||i[2]!==u[2]||this.dirty)&&(this.gl.stencilOp(i[0],i[1],i[2]),this.current=i,this.dirty=!1)}}class Iu extends Kt{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;i?u.enable(u.STENCIL_TEST):u.disable(u.STENCIL_TEST),this.current=i,this.dirty=!1}}class Md extends Kt{getDefault(){return[0,1]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||this.dirty)&&(this.gl.depthRange(i[0],i[1]),this.current=i,this.dirty=!1)}}class Rd extends Kt{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;i?u.enable(u.DEPTH_TEST):u.disable(u.DEPTH_TEST),this.current=i,this.dirty=!1}}class Mu extends Kt{getDefault(){return this.gl.LESS}set(i){(i!==this.current||this.dirty)&&(this.gl.depthFunc(i),this.current=i,this.dirty=!1)}}class Sm extends Kt{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;i?u.enable(u.BLEND):u.disable(u.BLEND),this.current=i,this.dirty=!1}}class Tm extends Kt{getDefault(){const i=this.gl;return[i.ONE,i.ZERO]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||this.dirty)&&(this.gl.blendFunc(i[0],i[1]),this.current=i,this.dirty=!1)}}class Ko extends Kt{getDefault(){return o.aT.transparent}set(i){const u=this.current;(i.r!==u.r||i.g!==u.g||i.b!==u.b||i.a!==u.a||this.dirty)&&(this.gl.blendColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class Mx extends Kt{getDefault(){return this.gl.FUNC_ADD}set(i){(i!==this.current||this.dirty)&&(this.gl.blendEquation(i),this.current=i,this.dirty=!1)}}class Rx extends Kt{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;i?u.enable(u.CULL_FACE):u.disable(u.CULL_FACE),this.current=i,this.dirty=!1}}class Dx extends Kt{getDefault(){return this.gl.BACK}set(i){(i!==this.current||this.dirty)&&(this.gl.cullFace(i),this.current=i,this.dirty=!1)}}class Lx extends Kt{getDefault(){return this.gl.CCW}set(i){(i!==this.current||this.dirty)&&(this.gl.frontFace(i),this.current=i,this.dirty=!1)}}class zx extends Kt{getDefault(){return null}set(i){(i!==this.current||this.dirty)&&(this.gl.useProgram(i),this.current=i,this.dirty=!1)}}class Ox extends Kt{getDefault(){return this.gl.TEXTURE0}set(i){(i!==this.current||this.dirty)&&(this.gl.activeTexture(i),this.current=i,this.dirty=!1)}}class Dd extends Kt{getDefault(){const i=this.gl;return[0,0,i.drawingBufferWidth,i.drawingBufferHeight]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||i[2]!==u[2]||i[3]!==u[3]||this.dirty)&&(this.gl.viewport(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class Ru extends Kt{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.bindFramebuffer(u.FRAMEBUFFER,i),this.current=i,this.dirty=!1}}class Ld extends Kt{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.bindRenderbuffer(u.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class zd extends Kt{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.bindTexture(u.TEXTURE_2D,i),this.current=i,this.dirty=!1}}class Xo extends Kt{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.bindBuffer(u.ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class Em extends Kt{getDefault(){return null}set(i){const u=this.gl;u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class Cm extends Kt{getDefault(){return null}set(i){var u;if(i===this.current&&!this.dirty)return;const p=this.gl;Pa(p)?p.bindVertexArray(i):(u=p.getExtension("OES_vertex_array_object"))===null||u===void 0||u.bindVertexArrayOES(i),this.current=i,this.dirty=!1}}class Od extends Kt{getDefault(){return 4}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_ALIGNMENT,i),this.current=i,this.dirty=!1}}class Ja extends Kt{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i),this.current=i,this.dirty=!1}}class Pm extends Kt{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,i),this.current=i,this.dirty=!1}}class Aa extends Kt{constructor(i,u){super(i),this.context=i,this.parent=u}getDefault(){return null}}class Qo extends Aa{setDirty(){this.dirty=!0}set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,i,0),this.current=i,this.dirty=!1}}class Am extends Aa{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_ATTACHMENT,u.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class Fd extends Aa{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_STENCIL_ATTACHMENT,u.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class rn{constructor(i,u,p,g,x){this.context=i,this.width=u,this.height=p;const T=i.gl,E=this.framebuffer=T.createFramebuffer();if(this.colorAttachment=new Qo(i,E),g)this.depthAttachment=x?new Fd(i,E):new Am(i,E);else if(x)throw new Error("Stencil cannot be setted without depth");if(T.checkFramebufferStatus(T.FRAMEBUFFER)!==T.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const i=this.context.gl,u=this.colorAttachment.get();if(u&&i.deleteTexture(u),this.depthAttachment){const p=this.depthAttachment.get();p&&i.deleteRenderbuffer(p)}i.deleteFramebuffer(this.framebuffer)}}class kn{constructor(i,u,p){this.blendFunction=i,this.blendColor=u,this.mask=p}}kn.Replace=[1,0],kn.disabled=new kn(kn.Replace,o.aT.transparent,[!1,!1,!1,!1]),kn.unblended=new kn(kn.Replace,o.aT.transparent,[!0,!0,!0,!0]),kn.alphaBlended=new kn([1,771],o.aT.transparent,[!0,!0,!0,!0]);class Fx{constructor(i){var u,p;if(this.gl=i,this.clearColor=new Pu(this),this.clearDepth=new wi(this),this.clearStencil=new bi(this),this.colorMask=new Ad(this),this.depthMask=new Au(this),this.stencilMask=new ku(this),this.stencilFunc=new kd(this),this.stencilOp=new Id(this),this.stencilTest=new Iu(this),this.depthRange=new Md(this),this.depthTest=new Rd(this),this.depthFunc=new Mu(this),this.blend=new Sm(this),this.blendFunc=new Tm(this),this.blendColor=new Ko(this),this.blendEquation=new Mx(this),this.cullFace=new Rx(this),this.cullFaceSide=new Dx(this),this.frontFace=new Lx(this),this.program=new zx(this),this.activeTexture=new Ox(this),this.viewport=new Dd(this),this.bindFramebuffer=new Ru(this),this.bindRenderbuffer=new Ld(this),this.bindTexture=new zd(this),this.bindVertexBuffer=new Xo(this),this.bindElementBuffer=new Em(this),this.bindVertexArray=new Cm(this),this.pixelStoreUnpack=new Od(this),this.pixelStoreUnpackPremultiplyAlpha=new Ja(this),this.pixelStoreUnpackFlipY=new Pm(this),this.extTextureFilterAnisotropic=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=i.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),Pa(i)){this.HALF_FLOAT=i.HALF_FLOAT;const g=i.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(u=i.RGBA16F)!==null&&u!==void 0?u:g==null?void 0:g.RGBA16F_EXT,this.RGB16F=(p=i.RGB16F)!==null&&p!==void 0?p:g==null?void 0:g.RGB16F_EXT,i.getExtension("EXT_color_buffer_float")}else{i.getExtension("EXT_color_buffer_half_float"),i.getExtension("OES_texture_half_float_linear");const g=i.getExtension("OES_texture_half_float");this.HALF_FLOAT=g==null?void 0:g.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(i,u){return new Eu(this,i,u)}createVertexBuffer(i,u,p){return new Cu(this,i,u,p)}createRenderbuffer(i,u,p){const g=this.gl,x=g.createRenderbuffer();return this.bindRenderbuffer.set(x),g.renderbufferStorage(g.RENDERBUFFER,i,u,p),this.bindRenderbuffer.set(null),x}createFramebuffer(i,u,p,g){return new rn(this,i,u,p,g)}clear({color:i,depth:u,stencil:p}){const g=this.gl;let x=0;i&&(x|=g.COLOR_BUFFER_BIT,this.clearColor.set(i),this.colorMask.set([!0,!0,!0,!0])),u!==void 0&&(x|=g.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(u),this.depthMask.set(!0)),p!==void 0&&(x|=g.STENCIL_BUFFER_BIT,this.clearStencil.set(p),this.stencilMask.set(255)),g.clear(x)}setCullFace(i){i.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(i.mode),this.frontFace.set(i.frontFace))}setDepthMode(i){i.func!==this.gl.ALWAYS||i.mask?(this.depthTest.set(!0),this.depthFunc.set(i.func),this.depthMask.set(i.mask),this.depthRange.set(i.range)):this.depthTest.set(!1)}setStencilMode(i){i.test.func!==this.gl.ALWAYS||i.mask?(this.stencilTest.set(!0),this.stencilMask.set(i.mask),this.stencilOp.set([i.fail,i.depthFail,i.pass]),this.stencilFunc.set({func:i.test.func,ref:i.ref,mask:i.test.mask})):this.stencilTest.set(!1)}setColorMode(i){o.aG(i.blendFunction,kn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(i.blendFunction),this.blendColor.set(i.blendColor)),this.colorMask.set(i.mask)}createVertexArray(){var i;return Pa(this.gl)?this.gl.createVertexArray():(i=this.gl.getExtension("OES_vertex_array_object"))===null||i===void 0?void 0:i.createVertexArrayOES()}deleteVertexArray(i){var u;return Pa(this.gl)?this.gl.deleteVertexArray(i):(u=this.gl.getExtension("OES_vertex_array_object"))===null||u===void 0?void 0:u.deleteVertexArrayOES(i)}unbindVAO(){this.bindVertexArray.set(null)}}class Xt{constructor(i,u,p){this.func=i,this.mask=u,this.range=p}}Xt.ReadOnly=!1,Xt.ReadWrite=!0,Xt.disabled=new Xt(519,Xt.ReadOnly,[0,1]);const eo=7680;class In{constructor(i,u,p,g,x,T){this.test=i,this.ref=u,this.mask=p,this.fail=g,this.depthFail=x,this.pass=T}}In.disabled=new In({func:519,mask:0},0,0,eo,eo,eo);class Cn{constructor(i,u,p){this.enable=i,this.mode=u,this.frontFace=p}}let hc;function km(y,i,u,p,g,x,T){const E=y.context,k=E.gl,R=y.useProgram("collisionBox"),L=[];let z=0,G=0;for(let ue=0;ue<p.length;ue++){const xe=p[ue],Ae=i.getTile(xe),Ie=Ae.getBucket(u);if(!Ie)continue;let Oe=xe.posMatrix;g[0]===0&&g[1]===0||(Oe=y.translatePosMatrix(xe.posMatrix,Ae,g,x));const Ze=T?Ie.textCollisionBox:Ie.iconCollisionBox,$e=Ie.collisionCircleArray;if($e.length>0){const He=o.Z(),yt=Oe;o.aU(He,Ie.placementInvProjMatrix,y.transform.glCoordMatrix),o.aU(He,He,Ie.placementViewportMatrix),L.push({circleArray:$e,circleOffset:G,transform:yt,invTransform:He,coord:xe}),z+=$e.length/4,G=z}Ze&&R.draw(E,k.LINES,Xt.disabled,In.disabled,y.colorModeForRenderPass(),Cn.disabled,Sd(Oe,y.transform,Ae),y.style.map.terrain&&y.style.map.terrain.getTerrainData(xe),u.id,Ze.layoutVertexBuffer,Ze.indexBuffer,Ze.segments,null,y.transform.zoom,null,null,Ze.collisionVertexBuffer)}if(!T||!L.length)return;const re=y.useProgram("collisionCircle"),ne=new o.aV;ne.resize(4*z),ne._trim();let se=0;for(const ue of L)for(let xe=0;xe<ue.circleArray.length/4;xe++){const Ae=4*xe,Ie=ue.circleArray[Ae+0],Oe=ue.circleArray[Ae+1],Ze=ue.circleArray[Ae+2],$e=ue.circleArray[Ae+3];ne.emplace(se++,Ie,Oe,Ze,$e,0),ne.emplace(se++,Ie,Oe,Ze,$e,1),ne.emplace(se++,Ie,Oe,Ze,$e,2),ne.emplace(se++,Ie,Oe,Ze,$e,3)}(!hc||hc.length<2*z)&&(hc=function(ue){const xe=2*ue,Ae=new o.aX;Ae.resize(xe),Ae._trim();for(let Ie=0;Ie<xe;Ie++){const Oe=6*Ie;Ae.uint16[Oe+0]=4*Ie+0,Ae.uint16[Oe+1]=4*Ie+1,Ae.uint16[Oe+2]=4*Ie+2,Ae.uint16[Oe+3]=4*Ie+2,Ae.uint16[Oe+4]=4*Ie+3,Ae.uint16[Oe+5]=4*Ie+0}return Ae}(z));const ee=E.createIndexBuffer(hc,!0),ve=E.createVertexBuffer(ne,o.aW.members,!0);for(const ue of L){const xe={u_matrix:ue.transform,u_inv_matrix:ue.invTransform,u_camera_to_center_distance:(Ce=y.transform).cameraToCenterDistance,u_viewport_size:[Ce.width,Ce.height]};re.draw(E,k.TRIANGLES,Xt.disabled,In.disabled,y.colorModeForRenderPass(),Cn.disabled,xe,y.style.map.terrain&&y.style.map.terrain.getTerrainData(ue.coord),u.id,ve,ee,o.S.simpleSegment(0,2*ue.circleOffset,ue.circleArray.length,ue.circleArray.length/2),null,y.transform.zoom,null,null,null)}var Ce;ve.destroy(),ee.destroy()}Cn.disabled=new Cn(!1,1029,2305),Cn.backCCW=new Cn(!0,1029,2305);const Nd=o.ao(new Float32Array(16));function Du(y,i,u,p,g,x){const{horizontalAlign:T,verticalAlign:E}=o.au(y);return new o.P((-(T-.5)*i/g+p[0])*x,(-(E-.5)*u/g+p[1])*x)}function Lu(y,i,u,p,g,x,T,E,k,R,L){const z=y.text.placedSymbolArray,G=y.text.dynamicLayoutVertexArray,re=y.icon.dynamicLayoutVertexArray,ne={};G.clear();for(let se=0;se<z.length;se++){const ee=z.get(se),ve=ee.hidden||!ee.crossTileID||y.allowVerticalPlacement&&!ee.placedOrientation?null:p[ee.crossTileID];if(ve){const Ce=new o.P(ee.anchorX,ee.anchorY),ue=En(Ce,u?T:x,L),xe=Ss(g.cameraToCenterDistance,ue.signedDistanceFromCamera);let Ae=o.aj(y.textSizeData,k,ee)*xe/o.ap;u&&(Ae*=y.tilePixelRatio/E);const{width:Ie,height:Oe,anchor:Ze,textOffset:$e,textBoxScale:He}=ve,yt=Du(Ze,Ie,Oe,$e,He,Ae),Zt=u?En(Ce.add(yt),x,L).point:ue.point.add(i?yt.rotate(-g.angle):yt),rt=y.allowVerticalPlacement&&ee.placedOrientation===o.ai.vertical?Math.PI/2:0;for(let Rt=0;Rt<ee.numGlyphs;Rt++)o.ak(G,Zt,rt);R&&ee.associatedIconIndex>=0&&(ne[ee.associatedIconIndex]={shiftedAnchor:Zt,angle:rt})}else J(ee.numGlyphs,G)}if(R){re.clear();const se=y.icon.placedSymbolArray;for(let ee=0;ee<se.length;ee++){const ve=se.get(ee);if(ve.hidden)J(ve.numGlyphs,re);else{const Ce=ne[ee];if(Ce)for(let ue=0;ue<ve.numGlyphs;ue++)o.ak(re,Ce.shiftedAnchor,Ce.angle);else J(ve.numGlyphs,re)}}y.icon.dynamicLayoutVertexBuffer.updateData(re)}y.text.dynamicLayoutVertexBuffer.updateData(G)}function Bd(y,i,u){return u.iconsInText&&i?"symbolTextAndIcon":y?"symbolSDF":"symbolIcon"}function zu(y,i,u,p,g,x,T,E,k,R,L,z){const G=y.context,re=G.gl,ne=y.transform,se=E==="map",ee=k==="map",ve=E!=="viewport"&&u.layout.get("symbol-placement")!=="point",Ce=se&&!ee&&!ve,ue=!u.layout.get("symbol-sort-key").isConstant();let xe=!1;const Ae=y.depthModeForSublayer(0,Xt.ReadOnly),Ie=u._unevaluatedLayout.hasValue("text-variable-anchor")||u._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Oe=[];for(const Ze of p){const $e=i.getTile(Ze),He=$e.getBucket(u);if(!He)continue;const yt=g?He.text:He.icon;if(!yt||!yt.segments.get().length||!yt.hasVisibleVertices)continue;const Zt=yt.programConfigurations.get(u.id),rt=g||He.sdfIcons,Rt=g?He.textSizeData:He.iconSizeData,xt=ee||ne.pitch!==0,hn=y.useProgram(Bd(rt,g,He),Zt),qt=o.ah(Rt,ne.zoom),Vt=y.style.map.terrain&&y.style.map.terrain.getTerrainData(Ze);let Wt,jn,mn,wr,sr=[0,0],Wn=null;if(g)jn=$e.glyphAtlasTexture,mn=re.LINEAR,Wt=$e.glyphAtlasTexture.size,He.iconsInText&&(sr=$e.imageAtlasTexture.size,Wn=$e.imageAtlasTexture,wr=xt||y.options.rotating||y.options.zooming||Rt.kind==="composite"||Rt.kind==="camera"?re.LINEAR:re.NEAREST);else{const $n=u.layout.get("icon-size").constantOr(0)!==1||He.iconsNeedLinear;jn=$e.imageAtlasTexture,mn=rt||y.options.rotating||y.options.zooming||$n||xt?re.LINEAR:re.NEAREST,Wt=$e.imageAtlasTexture.size}const Ei=me($e,1,y.transform.zoom),xn=Ke(Ze.posMatrix,ee,se,y.transform,Ei),Cs=xi(Ze.posMatrix,ee,se,y.transform,Ei),Ps=Ie&&He.hasTextData(),Ma=u.layout.get("icon-text-fit")!=="none"&&Ps&&He.hasIconData();if(ve){const $n=y.style.map.terrain?(ii,Un)=>y.style.map.terrain.getElevation(Ze,ii,Un):null,ar=u.layout.get("text-rotation-alignment")==="map";tt(He,Ze.posMatrix,y,g,xn,Cs,ee,R,ar,$n)}const so=y.translatePosMatrix(Ze.posMatrix,$e,x,T),il=ve||g&&Ie||Ma?Nd:xn,Mr=y.translatePosMatrix(Cs,$e,x,T,!0),br=rt&&u.paint.get(g?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let jr;jr=rt?He.iconsInText?Ya(Rt.kind,qt,Ce,ee,y,so,il,Mr,Wt,sr):Pd(Rt.kind,qt,Ce,ee,y,so,il,Mr,g,Wt,!0):Cd(Rt.kind,qt,Ce,ee,y,so,il,Mr,g,Wt);const ao={program:hn,buffers:yt,uniformValues:jr,atlasTexture:jn,atlasTextureIcon:Wn,atlasInterpolation:mn,atlasInterpolationIcon:wr,isSDF:rt,hasHalo:br};if(ue&&He.canOverlap){xe=!0;const $n=yt.segments.get();for(const ar of $n)Oe.push({segments:new o.S([ar]),sortKey:ar.sortKey,state:ao,terrainData:Vt})}else Oe.push({segments:yt.segments,sortKey:0,state:ao,terrainData:Vt})}xe&&Oe.sort((Ze,$e)=>Ze.sortKey-$e.sortKey);for(const Ze of Oe){const $e=Ze.state;if(G.activeTexture.set(re.TEXTURE0),$e.atlasTexture.bind($e.atlasInterpolation,re.CLAMP_TO_EDGE),$e.atlasTextureIcon&&(G.activeTexture.set(re.TEXTURE1),$e.atlasTextureIcon&&$e.atlasTextureIcon.bind($e.atlasInterpolationIcon,re.CLAMP_TO_EDGE)),$e.isSDF){const He=$e.uniformValues;$e.hasHalo&&(He.u_is_halo=1,Vd($e.buffers,Ze.segments,u,y,$e.program,Ae,L,z,He,Ze.terrainData)),He.u_is_halo=0}Vd($e.buffers,Ze.segments,u,y,$e.program,Ae,L,z,$e.uniformValues,Ze.terrainData)}}function Vd(y,i,u,p,g,x,T,E,k,R){const L=p.context;g.draw(L,L.gl.TRIANGLES,x,T,E,Cn.disabled,k,R,u.id,y.layoutVertexBuffer,y.indexBuffer,i,u.paint,p.transform.zoom,y.programConfigurations.get(u.id),y.dynamicLayoutVertexBuffer,y.opacityVertexBuffer)}function dc(y,i,u,p,g){if(!u||!p||!p.imageAtlas)return;const x=p.imageAtlas.patternPositions;let T=x[u.to.toString()],E=x[u.from.toString()];if(!T&&E&&(T=E),!E&&T&&(E=T),!T||!E){const k=g.getPaintProperty(i);T=x[k],E=x[k]}T&&E&&y.setConstantPatternPositions(T,E)}function fc(y,i,u,p,g,x,T){const E=y.context.gl,k="fill-pattern",R=u.paint.get(k),L=R&&R.constantOr(1),z=u.getCrossfadeParameters();let G,re,ne,se,ee;T?(re=L&&!u.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",G=E.LINES):(re=L?"fillPattern":"fill",G=E.TRIANGLES);const ve=R.constantOr(null);for(const Ce of p){const ue=i.getTile(Ce);if(L&&!ue.patternsLoaded())continue;const xe=ue.getBucket(u);if(!xe)continue;const Ae=xe.programConfigurations.get(u.id),Ie=y.useProgram(re,Ae),Oe=y.style.map.terrain&&y.style.map.terrain.getTerrainData(Ce);L&&(y.context.activeTexture.set(E.TEXTURE0),ue.imageAtlasTexture.bind(E.LINEAR,E.CLAMP_TO_EDGE),Ae.updatePaintBuffers(z)),dc(Ae,k,ve,ue,u);const Ze=Oe?Ce:null,$e=y.translatePosMatrix(Ze?Ze.posMatrix:Ce.posMatrix,ue,u.paint.get("fill-translate"),u.paint.get("fill-translate-anchor"));if(T){se=xe.indexBuffer2,ee=xe.segments2;const He=[E.drawingBufferWidth,E.drawingBufferHeight];ne=re==="fillOutlinePattern"&&L?wu($e,y,z,ue,He):_u($e,He)}else se=xe.indexBuffer,ee=xe.segments,ne=L?bd($e,y,z,ue):gm($e);Ie.draw(y.context,G,g,y.stencilModeForClipping(Ce),x,Cn.disabled,ne,Oe,u.id,xe.layoutVertexBuffer,se,ee,u.paint,y.transform.zoom,Ae)}}function pc(y,i,u,p,g,x,T){const E=y.context,k=E.gl,R="fill-extrusion-pattern",L=u.paint.get(R),z=L.constantOr(1),G=u.getCrossfadeParameters(),re=u.paint.get("fill-extrusion-opacity"),ne=L.constantOr(null);for(const se of p){const ee=i.getTile(se),ve=ee.getBucket(u);if(!ve)continue;const Ce=y.style.map.terrain&&y.style.map.terrain.getTerrainData(se),ue=ve.programConfigurations.get(u.id),xe=y.useProgram(z?"fillExtrusionPattern":"fillExtrusion",ue);z&&(y.context.activeTexture.set(k.TEXTURE0),ee.imageAtlasTexture.bind(k.LINEAR,k.CLAMP_TO_EDGE),ue.updatePaintBuffers(G)),dc(ue,R,ne,ee,u);const Ae=y.translatePosMatrix(se.posMatrix,ee,u.paint.get("fill-extrusion-translate"),u.paint.get("fill-extrusion-translate-anchor")),Ie=u.paint.get("fill-extrusion-vertical-gradient"),Oe=z?Ea(Ae,y,Ie,re,se,G,ee):wd(Ae,y,Ie,re);xe.draw(E,E.gl.TRIANGLES,g,x,T,Cn.backCCW,Oe,Ce,u.id,ve.layoutVertexBuffer,ve.indexBuffer,ve.segments,u.paint,y.transform.zoom,ue,y.style.map.terrain&&ve.centroidVertexBuffer)}}function Nx(y,i,u,p,g,x,T){const E=y.context,k=E.gl,R=u.fbo;if(!R)return;const L=y.useProgram("hillshade"),z=y.style.map.terrain&&y.style.map.terrain.getTerrainData(i);E.activeTexture.set(k.TEXTURE0),k.bindTexture(k.TEXTURE_2D,R.colorAttachment.get()),L.draw(E,k.TRIANGLES,g,x,T,Cn.disabled,((G,re,ne,se)=>{const ee=ne.paint.get("hillshade-shadow-color"),ve=ne.paint.get("hillshade-highlight-color"),Ce=ne.paint.get("hillshade-accent-color");let ue=ne.paint.get("hillshade-illumination-direction")*(Math.PI/180);ne.paint.get("hillshade-illumination-anchor")==="viewport"&&(ue-=G.transform.angle);const xe=!G.options.moving;return{u_matrix:se?se.posMatrix:G.transform.calculatePosMatrix(re.tileID.toUnwrapped(),xe),u_image:0,u_latrange:Td(0,re.tileID),u_light:[ne.paint.get("hillshade-exaggeration"),ue],u_shadow:ee,u_highlight:ve,u_accent:Ce}})(y,u,p,z?i:null),z,p.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments)}function jd(y,i,u,p,g,x){const T=y.context,E=T.gl,k=i.dem;if(k&&k.data){const R=k.dim,L=k.stride,z=k.getPixels();if(T.activeTexture.set(E.TEXTURE1),T.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||y.getTileTexture(L),i.demTexture){const re=i.demTexture;re.update(z,{premultiply:!1}),re.bind(E.NEAREST,E.CLAMP_TO_EDGE)}else i.demTexture=new ke(T,z,E.RGBA,{premultiply:!1}),i.demTexture.bind(E.NEAREST,E.CLAMP_TO_EDGE);T.activeTexture.set(E.TEXTURE0);let G=i.fbo;if(!G){const re=new ke(T,{width:R,height:R,data:null},E.RGBA);re.bind(E.LINEAR,E.CLAMP_TO_EDGE),G=i.fbo=T.createFramebuffer(R,R,!0,!1),G.colorAttachment.set(re.texture)}T.bindFramebuffer.set(G.framebuffer),T.viewport.set([0,0,R,R]),y.useProgram("hillshadePrepare").draw(T,E.TRIANGLES,p,g,x,Cn.disabled,((re,ne)=>{const se=ne.stride,ee=o.Z();return o.aS(ee,0,o.N,-o.N,0,0,1),o.$(ee,ee,[0,-o.N,0]),{u_matrix:ee,u_image:1,u_dimension:[se,se],u_zoom:re.overscaledZ,u_unpack:ne.getUnpackVector()}})(i.tileID,k),null,u.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments),i.needsHillshadePrepare=!1}}function Bx(y,i,u,p,g,x){const T=p.paint.get("raster-fade-duration");if(!x&&T>0){const E=o.h.now(),k=(E-y.timeAdded)/T,R=i?(E-i.timeAdded)/T:-1,L=u.getSource(),z=g.coveringZoomLevel({tileSize:L.tileSize,roundZoom:L.roundZoom}),G=!i||Math.abs(i.tileID.overscaledZ-z)>Math.abs(y.tileID.overscaledZ-z),re=G&&y.refreshedUponExpiration?1:o.ad(G?k:1-R,0,1);return y.refreshedUponExpiration&&k>=1&&(y.refreshedUponExpiration=!1),i?{opacity:1,mix:1-re}:{opacity:re,mix:0}}return{opacity:1,mix:0}}const Im=new o.aT(1,0,0,1),Ou=new o.aT(0,1,0,1),$d=new o.aT(0,0,1,1),Mm=new o.aT(1,0,1,1),Rm=new o.aT(0,1,1,1);function mc(y,i,u,p){Nu(y,0,i+u/2,y.transform.width,u,p)}function Fu(y,i,u,p){Nu(y,i-u/2,0,u,y.transform.height,p)}function Nu(y,i,u,p,g,x){const T=y.context,E=T.gl;E.enable(E.SCISSOR_TEST),E.scissor(i*y.pixelRatio,u*y.pixelRatio,p*y.pixelRatio,g*y.pixelRatio),T.clear({color:x}),E.disable(E.SCISSOR_TEST)}function Dm(y,i,u){const p=y.context,g=p.gl,x=u.posMatrix,T=y.useProgram("debug"),E=Xt.disabled,k=In.disabled,R=y.colorModeForRenderPass(),L="$debug",z=y.style.map.terrain&&y.style.map.terrain.getTerrainData(u);p.activeTexture.set(g.TEXTURE0);const G=i.getTileByID(u.key).latestRawTileData,re=Math.floor((G&&G.byteLength||0)/1024),ne=i.getTile(u).tileSize,se=512/Math.min(ne,512)*(u.overscaledZ/y.transform.zoom)*.5;let ee=u.canonical.toString();u.overscaledZ!==u.canonical.z&&(ee+=` => ${u.overscaledZ}`),function(ve,Ce){ve.initDebugOverlayCanvas();const ue=ve.debugOverlayCanvas,xe=ve.context.gl,Ae=ve.debugOverlayCanvas.getContext("2d");Ae.clearRect(0,0,ue.width,ue.height),Ae.shadowColor="white",Ae.shadowBlur=2,Ae.lineWidth=1.5,Ae.strokeStyle="white",Ae.textBaseline="top",Ae.font="bold 36px Open Sans, sans-serif",Ae.fillText(Ce,5,5),Ae.strokeText(Ce,5,5),ve.debugOverlayTexture.update(ue),ve.debugOverlayTexture.bind(xe.LINEAR,xe.CLAMP_TO_EDGE)}(y,`${ee} ${re}kB`),T.draw(p,g.TRIANGLES,E,k,kn.alphaBlended,Cn.disabled,cc(x,o.aT.transparent,se),null,L,y.debugBuffer,y.quadTriangleIndexBuffer,y.debugSegments),T.draw(p,g.LINE_STRIP,E,k,R,Cn.disabled,cc(x,o.aT.red),z,L,y.debugBuffer,y.tileBorderIndexBuffer,y.debugSegments)}function zn(y,i,u){const p=y.context,g=p.gl,x=y.colorModeForRenderPass(),T=new Xt(g.LEQUAL,Xt.ReadWrite,y.depthRangeFor3D),E=y.useProgram("terrain"),k=i.getTerrainMesh();p.bindFramebuffer.set(null),p.viewport.set([0,0,y.width,y.height]);for(const R of u){const L=y.renderToTexture.getTexture(R),z=i.getTerrainData(R.tileID);p.activeTexture.set(g.TEXTURE0),g.bindTexture(g.TEXTURE_2D,L.texture);const G={u_matrix:y.transform.calculatePosMatrix(R.tileID.toUnwrapped()),u_texture:0,u_ele_delta:i.getMeshFrameDelta(y.transform.zoom)};E.draw(p,g.TRIANGLES,T,In.disabled,x,Cn.backCCW,G,z,"terrain",k.vertexBuffer,k.indexBuffer,k.segments)}}class to{constructor(i,u){this.context=new Fx(i),this.transform=u,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:o.Z(),renderTime:0},this.setup(),this.numSublayers=at.maxUnderzooming+at.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new yu}resize(i,u,p){if(this.width=Math.floor(i*p),this.height=Math.floor(u*p),this.pixelRatio=p,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const g of this.style._order)this.style._layers[g].resize()}setup(){const i=this.context,u=new o.a_;u.emplaceBack(0,0),u.emplaceBack(o.N,0),u.emplaceBack(0,o.N),u.emplaceBack(o.N,o.N),this.tileExtentBuffer=i.createVertexBuffer(u,vu.members),this.tileExtentSegments=o.S.simpleSegment(0,0,4,2);const p=new o.a_;p.emplaceBack(0,0),p.emplaceBack(o.N,0),p.emplaceBack(0,o.N),p.emplaceBack(o.N,o.N),this.debugBuffer=i.createVertexBuffer(p,vu.members),this.debugSegments=o.S.simpleSegment(0,0,4,5);const g=new o.V;g.emplaceBack(0,0,0,0),g.emplaceBack(o.N,0,o.N,0),g.emplaceBack(0,o.N,0,o.N),g.emplaceBack(o.N,o.N,o.N,o.N),this.rasterBoundsBuffer=i.createVertexBuffer(g,ei.members),this.rasterBoundsSegments=o.S.simpleSegment(0,0,4,2);const x=new o.a_;x.emplaceBack(0,0),x.emplaceBack(1,0),x.emplaceBack(0,1),x.emplaceBack(1,1),this.viewportBuffer=i.createVertexBuffer(x,vu.members),this.viewportSegments=o.S.simpleSegment(0,0,4,2);const T=new o.a$;T.emplaceBack(0),T.emplaceBack(1),T.emplaceBack(3),T.emplaceBack(2),T.emplaceBack(0),this.tileBorderIndexBuffer=i.createIndexBuffer(T);const E=new o.b0;E.emplaceBack(0,1,2),E.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=i.createIndexBuffer(E);const k=this.context.gl;this.stencilClearMode=new In({func:k.ALWAYS,mask:0},0,255,k.ZERO,k.ZERO,k.ZERO)}clearStencil(){const i=this.context,u=i.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const p=o.Z();o.aS(p,0,this.width,this.height,0,0,1),o.a0(p,p,[u.drawingBufferWidth,u.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(i,u.TRIANGLES,Xt.disabled,this.stencilClearMode,kn.disabled,Cn.disabled,ym(p),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(i,u){if(this.currentStencilSource===i.source||!i.isTileClipped()||!u||!u.length)return;this.currentStencilSource=i.source;const p=this.context,g=p.gl;this.nextStencilID+u.length>256&&this.clearStencil(),p.setColorMode(kn.disabled),p.setDepthMode(Xt.disabled);const x=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const T of u){const E=this._tileClippingMaskIDs[T.key]=this.nextStencilID++,k=this.style.map.terrain&&this.style.map.terrain.getTerrainData(T);x.draw(p,g.TRIANGLES,Xt.disabled,new In({func:g.ALWAYS,mask:0},E,255,g.KEEP,g.KEEP,g.REPLACE),kn.disabled,Cn.disabled,ym(T.posMatrix),k,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const i=this.nextStencilID++,u=this.context.gl;return new In({func:u.NOTEQUAL,mask:255},i,255,u.KEEP,u.KEEP,u.REPLACE)}stencilModeForClipping(i){const u=this.context.gl;return new In({func:u.EQUAL,mask:255},this._tileClippingMaskIDs[i.key],0,u.KEEP,u.KEEP,u.REPLACE)}stencilConfigForOverlap(i){const u=this.context.gl,p=i.sort((T,E)=>E.overscaledZ-T.overscaledZ),g=p[p.length-1].overscaledZ,x=p[0].overscaledZ-g+1;if(x>1){this.currentStencilSource=void 0,this.nextStencilID+x>256&&this.clearStencil();const T={};for(let E=0;E<x;E++)T[E+g]=new In({func:u.GEQUAL,mask:255},E+this.nextStencilID,255,u.KEEP,u.KEEP,u.REPLACE);return this.nextStencilID+=x,[T,p]}return[{[g]:In.disabled},p]}colorModeForRenderPass(){const i=this.context.gl;return this._showOverdrawInspector?new kn([i.CONSTANT_COLOR,i.ONE],new o.aT(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?kn.unblended:kn.alphaBlended}depthModeForSublayer(i,u,p){if(!this.opaquePassEnabledForLayer())return Xt.disabled;const g=1-((1+this.currentLayer)*this.numSublayers+i)*this.depthEpsilon;return new Xt(p||this.context.gl.LEQUAL,u,[g,g])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(i,u){this.style=i,this.options=u,this.lineAtlas=i.lineAtlas,this.imageManager=i.imageManager,this.glyphManager=i.glyphManager,this.symbolFadeChange=i.placement.symbolFadeChange(o.h.now()),this.imageManager.beginFrame();const p=this.style._order,g=this.style.sourceCaches,x={},T={},E={};for(const k in g){const R=g[k];R.used&&R.prepare(this.context),x[k]=R.getVisibleCoordinates(),T[k]=x[k].slice().reverse(),E[k]=R.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let k=0;k<p.length;k++)if(this.style._layers[p[k]].is3D()){this.opaquePassCutoff=k;break}if(this.renderToTexture){this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0;const k=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!o.b1(this.terrainFacilitator.matrix,this.transform.projMatrix)||k.length)&&(o.b2(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(R,L){const z=R.context,G=z.gl,re=kn.unblended,ne=new Xt(G.LEQUAL,Xt.ReadWrite,[0,1]),se=L.getTerrainMesh(),ee=L.sourceCache.getRenderableTiles(),ve=R.useProgram("terrainDepth");z.bindFramebuffer.set(L.getFramebuffer("depth").framebuffer),z.viewport.set([0,0,R.width/devicePixelRatio,R.height/devicePixelRatio]),z.clear({color:o.aT.transparent,depth:1});for(const Ce of ee){const ue=L.getTerrainData(Ce.tileID),xe={u_matrix:R.transform.calculatePosMatrix(Ce.tileID.toUnwrapped()),u_ele_delta:L.getMeshFrameDelta(R.transform.zoom)};ve.draw(z,G.TRIANGLES,ne,In.disabled,re,Cn.backCCW,xe,ue,"terrain",se.vertexBuffer,se.indexBuffer,se.segments)}z.bindFramebuffer.set(null),z.viewport.set([0,0,R.width,R.height])}(this,this.style.map.terrain),function(R,L){const z=R.context,G=z.gl,re=kn.unblended,ne=new Xt(G.LEQUAL,Xt.ReadWrite,[0,1]),se=L.getTerrainMesh(),ee=L.getCoordsTexture(),ve=L.sourceCache.getRenderableTiles(),Ce=R.useProgram("terrainCoords");z.bindFramebuffer.set(L.getFramebuffer("coords").framebuffer),z.viewport.set([0,0,R.width/devicePixelRatio,R.height/devicePixelRatio]),z.clear({color:o.aT.transparent,depth:1}),L.coordsIndex=[];for(const ue of ve){const xe=L.getTerrainData(ue.tileID);z.activeTexture.set(G.TEXTURE0),G.bindTexture(G.TEXTURE_2D,ee.texture);const Ae={u_matrix:R.transform.calculatePosMatrix(ue.tileID.toUnwrapped()),u_terrain_coords_id:(255-L.coordsIndex.length)/255,u_texture:0,u_ele_delta:L.getMeshFrameDelta(R.transform.zoom)};Ce.draw(z,G.TRIANGLES,ne,In.disabled,re,Cn.backCCW,Ae,xe,"terrain",se.vertexBuffer,se.indexBuffer,se.segments),L.coordsIndex.push(ue.tileID.key)}z.bindFramebuffer.set(null),z.viewport.set([0,0,R.width,R.height])}(this,this.style.map.terrain))}this.renderPass="offscreen";for(const k of p){const R=this.style._layers[k];if(!R.hasOffscreenPass()||R.isHidden(this.transform.zoom))continue;const L=T[R.source];(R.type==="custom"||L.length)&&this.renderLayer(this,g[R.source],R,L)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:u.showOverdrawInspector?o.aT.black:o.aT.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=u.showOverdrawInspector,this.depthRangeFor3D=[0,1-(i._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=p.length-1;this.currentLayer>=0;this.currentLayer--){const k=this.style._layers[p[this.currentLayer]],R=g[k.source],L=x[k.source];this._renderTileClippingMasks(k,L),this.renderLayer(this,R,k,L)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<p.length;this.currentLayer++){const k=this.style._layers[p[this.currentLayer]],R=g[k.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(k))continue;const L=(k.type==="symbol"?E:T)[k.source];this._renderTileClippingMasks(k,x[k.source]),this.renderLayer(this,R,k,L)}if(this.options.showTileBoundaries){const k=function(R,L){let z=null;const G=Object.values(R._layers).flatMap(ee=>ee.source&&!ee.isHidden(L)?[R.sourceCaches[ee.source]]:[]),re=G.filter(ee=>ee.getSource().type==="vector"),ne=G.filter(ee=>ee.getSource().type!=="vector"),se=ee=>{(!z||z.getSource().maxzoom<ee.getSource().maxzoom)&&(z=ee)};return re.forEach(ee=>se(ee)),z||ne.forEach(ee=>se(ee)),z}(this.style,this.transform.zoom);k&&function(R,L,z){for(let G=0;G<z.length;G++)Dm(R,L,z[G])}(this,k,k.getVisibleCoordinates())}this.options.showPadding&&function(k){const R=k.transform.padding;mc(k,k.transform.height-(R.top||0),3,Im),mc(k,R.bottom||0,3,Ou),Fu(k,R.left||0,3,$d),Fu(k,k.transform.width-(R.right||0),3,Mm);const L=k.transform.centerPoint;(function(z,G,re,ne){Nu(z,G-1,re-10,2,20,ne),Nu(z,G-10,re-1,20,2,ne)})(k,L.x,k.transform.height-L.y,Rm)}(this),this.context.setDefault()}renderLayer(i,u,p,g){if(!p.isHidden(this.transform.zoom)&&(p.type==="background"||p.type==="custom"||(g||[]).length))switch(this.id=p.id,p.type){case"symbol":(function(x,T,E,k,R){if(x.renderPass!=="translucent")return;const L=In.disabled,z=x.colorModeForRenderPass();(E._unevaluatedLayout.hasValue("text-variable-anchor")||E._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(G,re,ne,se,ee,ve,Ce){const ue=re.transform,xe=ee==="map",Ae=ve==="map";for(const Ie of G){const Oe=se.getTile(Ie),Ze=Oe.getBucket(ne);if(!Ze||!Ze.text||!Ze.text.segments.get().length)continue;const $e=o.ah(Ze.textSizeData,ue.zoom),He=me(Oe,1,re.transform.zoom),yt=Ke(Ie.posMatrix,Ae,xe,re.transform,He),Zt=ne.layout.get("icon-text-fit")!=="none"&&Ze.hasIconData();if($e){const rt=Math.pow(2,ue.zoom-Oe.tileID.overscaledZ);Lu(Ze,xe,Ae,Ce,ue,yt,Ie.posMatrix,rt,$e,Zt,re.style.map.terrain?(Rt,xt)=>re.style.map.terrain.getElevation(Ie,Rt,xt):null)}}}(k,x,E,T,E.layout.get("text-rotation-alignment"),E.layout.get("text-pitch-alignment"),R),E.paint.get("icon-opacity").constantOr(1)!==0&&zu(x,T,E,k,!1,E.paint.get("icon-translate"),E.paint.get("icon-translate-anchor"),E.layout.get("icon-rotation-alignment"),E.layout.get("icon-pitch-alignment"),E.layout.get("icon-keep-upright"),L,z),E.paint.get("text-opacity").constantOr(1)!==0&&zu(x,T,E,k,!0,E.paint.get("text-translate"),E.paint.get("text-translate-anchor"),E.layout.get("text-rotation-alignment"),E.layout.get("text-pitch-alignment"),E.layout.get("text-keep-upright"),L,z),T.map.showCollisionBoxes&&(km(x,T,E,k,E.paint.get("text-translate"),E.paint.get("text-translate-anchor"),!0),km(x,T,E,k,E.paint.get("icon-translate"),E.paint.get("icon-translate-anchor"),!1))})(i,u,p,g,this.style.placement.variableOffsets);break;case"circle":(function(x,T,E,k){if(x.renderPass!=="translucent")return;const R=E.paint.get("circle-opacity"),L=E.paint.get("circle-stroke-width"),z=E.paint.get("circle-stroke-opacity"),G=!E.layout.get("circle-sort-key").isConstant();if(R.constantOr(1)===0&&(L.constantOr(1)===0||z.constantOr(1)===0))return;const re=x.context,ne=re.gl,se=x.depthModeForSublayer(0,Xt.ReadOnly),ee=In.disabled,ve=x.colorModeForRenderPass(),Ce=[];for(let ue=0;ue<k.length;ue++){const xe=k[ue],Ae=T.getTile(xe),Ie=Ae.getBucket(E);if(!Ie)continue;const Oe=Ie.programConfigurations.get(E.id),Ze=x.useProgram("circle",Oe),$e=Ie.layoutVertexBuffer,He=Ie.indexBuffer,yt=x.style.map.terrain&&x.style.map.terrain.getTerrainData(xe),Zt={programConfiguration:Oe,program:Ze,layoutVertexBuffer:$e,indexBuffer:He,uniformValues:Ca(x,xe,Ae,E),terrainData:yt};if(G){const rt=Ie.segments.get();for(const Rt of rt)Ce.push({segments:new o.S([Rt]),sortKey:Rt.sortKey,state:Zt})}else Ce.push({segments:Ie.segments,sortKey:0,state:Zt})}G&&Ce.sort((ue,xe)=>ue.sortKey-xe.sortKey);for(const ue of Ce){const{programConfiguration:xe,program:Ae,layoutVertexBuffer:Ie,indexBuffer:Oe,uniformValues:Ze,terrainData:$e}=ue.state;Ae.draw(re,ne.TRIANGLES,se,ee,ve,Cn.disabled,Ze,$e,E.id,Ie,Oe,ue.segments,E.paint,x.transform.zoom,xe)}})(i,u,p,g);break;case"heatmap":(function(x,T,E,k){if(E.paint.get("heatmap-opacity")!==0)if(x.renderPass==="offscreen"){const R=x.context,L=R.gl,z=In.disabled,G=new kn([L.ONE,L.ONE],o.aT.transparent,[!0,!0,!0,!0]);(function(re,ne,se){const ee=re.gl;re.activeTexture.set(ee.TEXTURE1),re.viewport.set([0,0,ne.width/4,ne.height/4]);let ve=se.heatmapFbo;if(ve)ee.bindTexture(ee.TEXTURE_2D,ve.colorAttachment.get()),re.bindFramebuffer.set(ve.framebuffer);else{const Ce=ee.createTexture();ee.bindTexture(ee.TEXTURE_2D,Ce),ee.texParameteri(ee.TEXTURE_2D,ee.TEXTURE_WRAP_S,ee.CLAMP_TO_EDGE),ee.texParameteri(ee.TEXTURE_2D,ee.TEXTURE_WRAP_T,ee.CLAMP_TO_EDGE),ee.texParameteri(ee.TEXTURE_2D,ee.TEXTURE_MIN_FILTER,ee.LINEAR),ee.texParameteri(ee.TEXTURE_2D,ee.TEXTURE_MAG_FILTER,ee.LINEAR),ve=se.heatmapFbo=re.createFramebuffer(ne.width/4,ne.height/4,!1,!1),function(ue,xe,Ae,Ie){var Oe,Ze;const $e=ue.gl,He=(Oe=ue.HALF_FLOAT)!==null&&Oe!==void 0?Oe:$e.UNSIGNED_BYTE,yt=(Ze=ue.RGBA16F)!==null&&Ze!==void 0?Ze:$e.RGBA;$e.texImage2D($e.TEXTURE_2D,0,yt,xe.width/4,xe.height/4,0,$e.RGBA,He,null),Ie.colorAttachment.set(Ae)}(re,ne,Ce,ve)}})(R,x,E),R.clear({color:o.aT.transparent});for(let re=0;re<k.length;re++){const ne=k[re];if(T.hasRenderableParent(ne))continue;const se=T.getTile(ne),ee=se.getBucket(E);if(!ee)continue;const ve=ee.programConfigurations.get(E.id),Ce=x.useProgram("heatmap",ve),{zoom:ue}=x.transform;Ce.draw(R,L.TRIANGLES,Xt.disabled,z,G,Cn.disabled,kx(ne.posMatrix,se,ue,E.paint.get("heatmap-intensity")),null,E.id,ee.layoutVertexBuffer,ee.indexBuffer,ee.segments,E.paint,x.transform.zoom,ve)}R.viewport.set([0,0,x.width,x.height])}else x.renderPass==="translucent"&&(x.context.setColorMode(x.colorModeForRenderPass()),function(R,L){const z=R.context,G=z.gl,re=L.heatmapFbo;if(!re)return;z.activeTexture.set(G.TEXTURE0),G.bindTexture(G.TEXTURE_2D,re.colorAttachment.get()),z.activeTexture.set(G.TEXTURE1);let ne=L.colorRampTexture;ne||(ne=L.colorRampTexture=new ke(z,L.colorRamp,G.RGBA)),ne.bind(G.LINEAR,G.CLAMP_TO_EDGE),R.useProgram("heatmapTexture").draw(z,G.TRIANGLES,Xt.disabled,In.disabled,R.colorModeForRenderPass(),Cn.disabled,((se,ee,ve,Ce)=>{const ue=o.Z();o.aS(ue,0,se.width,se.height,0,0,1);const xe=se.context.gl;return{u_matrix:ue,u_world:[xe.drawingBufferWidth,xe.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:ee.paint.get("heatmap-opacity")}})(R,L),null,L.id,R.viewportBuffer,R.quadTriangleIndexBuffer,R.viewportSegments,L.paint,R.transform.zoom)}(x,E))})(i,u,p,g);break;case"line":(function(x,T,E,k){if(x.renderPass!=="translucent")return;const R=E.paint.get("line-opacity"),L=E.paint.get("line-width");if(R.constantOr(1)===0||L.constantOr(1)===0)return;const z=x.depthModeForSublayer(0,Xt.ReadOnly),G=x.colorModeForRenderPass(),re=E.paint.get("line-dasharray"),ne=E.paint.get("line-pattern"),se=ne.constantOr(1),ee=E.paint.get("line-gradient"),ve=E.getCrossfadeParameters(),Ce=se?"linePattern":re?"lineSDF":ee?"lineGradient":"line",ue=x.context,xe=ue.gl;let Ae=!0;for(const Ie of k){const Oe=T.getTile(Ie);if(se&&!Oe.patternsLoaded())continue;const Ze=Oe.getBucket(E);if(!Ze)continue;const $e=Ze.programConfigurations.get(E.id),He=x.context.program.get(),yt=x.useProgram(Ce,$e),Zt=Ae||yt.program!==He,rt=x.style.map.terrain&&x.style.map.terrain.getTerrainData(Ie),Rt=ne.constantOr(null);if(Rt&&Oe.imageAtlas){const qt=Oe.imageAtlas,Vt=qt.patternPositions[Rt.to.toString()],Wt=qt.patternPositions[Rt.from.toString()];Vt&&Wt&&$e.setConstantPatternPositions(Vt,Wt)}const xt=rt?Ie:null,hn=se?Ix(x,Oe,E,ve,xt):re?xm(x,Oe,E,re,ve,xt):ee?vm(x,Oe,E,Ze.lineClipsArray.length,xt):Ed(x,Oe,E,xt);if(se)ue.activeTexture.set(xe.TEXTURE0),Oe.imageAtlasTexture.bind(xe.LINEAR,xe.CLAMP_TO_EDGE),$e.updatePaintBuffers(ve);else if(re&&(Zt||x.lineAtlas.dirty))ue.activeTexture.set(xe.TEXTURE0),x.lineAtlas.bind(ue);else if(ee){const qt=Ze.gradients[E.id];let Vt=qt.texture;if(E.gradientVersion!==qt.version){let Wt=256;if(E.stepInterpolant){const jn=T.getSource().maxzoom,mn=Ie.canonical.z===jn?Math.ceil(1<<x.transform.maxZoom-Ie.canonical.z):1;Wt=o.ad(o.aY(Ze.maxLineLength/o.N*1024*mn),256,ue.maxTextureSize)}qt.gradient=o.aZ({expression:E.gradientExpression(),evaluationKey:"lineProgress",resolution:Wt,image:qt.gradient||void 0,clips:Ze.lineClipsArray}),qt.texture?qt.texture.update(qt.gradient):qt.texture=new ke(ue,qt.gradient,xe.RGBA),qt.version=E.gradientVersion,Vt=qt.texture}ue.activeTexture.set(xe.TEXTURE0),Vt.bind(E.stepInterpolant?xe.NEAREST:xe.LINEAR,xe.CLAMP_TO_EDGE)}yt.draw(ue,xe.TRIANGLES,z,x.stencilModeForClipping(Ie),G,Cn.disabled,hn,rt,E.id,Ze.layoutVertexBuffer,Ze.indexBuffer,Ze.segments,E.paint,x.transform.zoom,$e,Ze.layoutVertexBuffer2),Ae=!1}})(i,u,p,g);break;case"fill":(function(x,T,E,k){const R=E.paint.get("fill-color"),L=E.paint.get("fill-opacity");if(L.constantOr(1)===0)return;const z=x.colorModeForRenderPass(),G=E.paint.get("fill-pattern"),re=x.opaquePassEnabledForLayer()&&!G.constantOr(1)&&R.constantOr(o.aT.transparent).a===1&&L.constantOr(0)===1?"opaque":"translucent";if(x.renderPass===re){const ne=x.depthModeForSublayer(1,x.renderPass==="opaque"?Xt.ReadWrite:Xt.ReadOnly);fc(x,T,E,k,ne,z,!1)}if(x.renderPass==="translucent"&&E.paint.get("fill-antialias")){const ne=x.depthModeForSublayer(E.getPaintProperty("fill-outline-color")?2:0,Xt.ReadOnly);fc(x,T,E,k,ne,z,!0)}})(i,u,p,g);break;case"fill-extrusion":(function(x,T,E,k){const R=E.paint.get("fill-extrusion-opacity");if(R!==0&&x.renderPass==="translucent"){const L=new Xt(x.context.gl.LEQUAL,Xt.ReadWrite,x.depthRangeFor3D);if(R!==1||E.paint.get("fill-extrusion-pattern").constantOr(1))pc(x,T,E,k,L,In.disabled,kn.disabled),pc(x,T,E,k,L,x.stencilModeFor3D(),x.colorModeForRenderPass());else{const z=x.colorModeForRenderPass();pc(x,T,E,k,L,In.disabled,z)}}})(i,u,p,g);break;case"hillshade":(function(x,T,E,k){if(x.renderPass!=="offscreen"&&x.renderPass!=="translucent")return;const R=x.context,L=x.depthModeForSublayer(0,Xt.ReadOnly),z=x.colorModeForRenderPass(),[G,re]=x.renderPass==="translucent"?x.stencilConfigForOverlap(k):[{},k];for(const ne of re){const se=T.getTile(ne);se.needsHillshadePrepare!==void 0&&se.needsHillshadePrepare&&x.renderPass==="offscreen"?jd(x,se,E,L,In.disabled,z):x.renderPass==="translucent"&&Nx(x,ne,se,E,L,G[ne.overscaledZ],z)}R.viewport.set([0,0,x.width,x.height])})(i,u,p,g);break;case"raster":(function(x,T,E,k){if(x.renderPass!=="translucent"||E.paint.get("raster-opacity")===0||!k.length)return;const R=x.context,L=R.gl,z=T.getSource(),G=x.useProgram("raster"),re=x.colorModeForRenderPass(),[ne,se]=z instanceof ti?[{},k]:x.stencilConfigForOverlap(k),ee=se[se.length-1].overscaledZ,ve=!x.options.moving;for(const Ce of se){const ue=x.depthModeForSublayer(Ce.overscaledZ-ee,E.paint.get("raster-opacity")===1?Xt.ReadWrite:Xt.ReadOnly,L.LESS),xe=T.getTile(Ce);xe.registerFadeDuration(E.paint.get("raster-fade-duration"));const Ae=T.findLoadedParent(Ce,0),Ie=Bx(xe,Ae,T,E,x.transform,x.style.map.terrain);let Oe,Ze;const $e=E.paint.get("raster-resampling")==="nearest"?L.NEAREST:L.LINEAR;R.activeTexture.set(L.TEXTURE0),xe.texture.bind($e,L.CLAMP_TO_EDGE,L.LINEAR_MIPMAP_NEAREST),R.activeTexture.set(L.TEXTURE1),Ae?(Ae.texture.bind($e,L.CLAMP_TO_EDGE,L.LINEAR_MIPMAP_NEAREST),Oe=Math.pow(2,Ae.tileID.overscaledZ-xe.tileID.overscaledZ),Ze=[xe.tileID.canonical.x*Oe%1,xe.tileID.canonical.y*Oe%1]):xe.texture.bind($e,L.CLAMP_TO_EDGE,L.LINEAR_MIPMAP_NEAREST);const He=x.style.map.terrain&&x.style.map.terrain.getTerrainData(Ce),yt=He?Ce:null,Zt=yt?yt.posMatrix:x.transform.calculatePosMatrix(Ce.toUnwrapped(),ve),rt=wm(Zt,Ze||[0,0],Oe||1,Ie,E);z instanceof ti?G.draw(R,L.TRIANGLES,ue,In.disabled,re,Cn.disabled,rt,He,E.id,z.boundsBuffer,x.quadTriangleIndexBuffer,z.boundsSegments):G.draw(R,L.TRIANGLES,ue,ne[Ce.overscaledZ],re,Cn.disabled,rt,He,E.id,x.rasterBoundsBuffer,x.quadTriangleIndexBuffer,x.rasterBoundsSegments)}})(i,u,p,g);break;case"background":(function(x,T,E,k){const R=E.paint.get("background-color"),L=E.paint.get("background-opacity");if(L===0)return;const z=x.context,G=z.gl,re=x.transform,ne=re.tileSize,se=E.paint.get("background-pattern");if(x.isPatternMissing(se))return;const ee=!se&&R.a===1&&L===1&&x.opaquePassEnabledForLayer()?"opaque":"translucent";if(x.renderPass!==ee)return;const ve=In.disabled,Ce=x.depthModeForSublayer(0,ee==="opaque"?Xt.ReadWrite:Xt.ReadOnly),ue=x.colorModeForRenderPass(),xe=x.useProgram(se?"backgroundPattern":"background"),Ae=k||re.coveringTiles({tileSize:ne,terrain:x.style.map.terrain});se&&(z.activeTexture.set(G.TEXTURE0),x.imageManager.bind(x.context));const Ie=E.getCrossfadeParameters();for(const Oe of Ae){const Ze=k?Oe.posMatrix:x.transform.calculatePosMatrix(Oe.toUnwrapped()),$e=se?Gi(Ze,L,x,se,{tileID:Oe,tileSize:ne},Ie):Su(Ze,L,R),He=x.style.map.terrain&&x.style.map.terrain.getTerrainData(Oe);xe.draw(z,G.TRIANGLES,Ce,ve,ue,Cn.disabled,$e,He,E.id,x.tileExtentBuffer,x.quadTriangleIndexBuffer,x.tileExtentSegments)}})(i,0,p,g);break;case"custom":(function(x,T,E){const k=x.context,R=E.implementation;if(x.renderPass==="offscreen"){const L=R.prerender;L&&(x.setCustomLayerDefaults(),k.setColorMode(x.colorModeForRenderPass()),L.call(R,k.gl,x.transform.customLayerMatrix()),k.setDirty(),x.setBaseState())}else if(x.renderPass==="translucent"){x.setCustomLayerDefaults(),k.setColorMode(x.colorModeForRenderPass()),k.setStencilMode(In.disabled);const L=R.renderingMode==="3d"?new Xt(x.context.gl.LEQUAL,Xt.ReadWrite,x.depthRangeFor3D):x.depthModeForSublayer(0,Xt.ReadOnly);k.setDepthMode(L),R.render(k.gl,x.transform.customLayerMatrix()),k.setDirty(),x.setBaseState(),k.bindFramebuffer.set(null)}})(i,0,p)}}translatePosMatrix(i,u,p,g,x){if(!p[0]&&!p[1])return i;const T=x?g==="map"?this.transform.angle:0:g==="viewport"?-this.transform.angle:0;if(T){const R=Math.sin(T),L=Math.cos(T);p=[p[0]*L-p[1]*R,p[0]*R+p[1]*L]}const E=[x?p[0]:me(u,p[0],this.transform.zoom),x?p[1]:me(u,p[1],this.transform.zoom),0],k=new Float32Array(16);return o.$(k,i,E),k}saveTileTexture(i){const u=this._tileTextures[i.size[0]];u?u.push(i):this._tileTextures[i.size[0]]=[i]}getTileTexture(i){const u=this._tileTextures[i];return u&&u.length>0?u.pop():null}isPatternMissing(i){if(!i)return!1;if(!i.from||!i.to)return!0;const u=this.imageManager.getPattern(i.from.toString()),p=this.imageManager.getPattern(i.to.toString());return!u||!p}useProgram(i,u){this.cache=this.cache||{};const p=i+(u?u.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[p]||(this.cache[p]=new xu(this.context,An[i],u,Tu[i],this._showOverdrawInspector,this.style.map.terrain)),this.cache[p]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const i=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(i.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new ke(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:i,drawingBufferHeight:u}=this.context.gl;return this.width!==i||this.height!==u}}class ni{constructor(i,u){this.points=i,this.planes=u}static fromInvProjectionMatrix(i,u,p){const g=Math.pow(2,p),x=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(E=>{const k=1/(E=o.ag([],E,i))[3]/u*g;return o.b3(E,E,[k,k,1/E[3],k])}),T=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(E=>{const k=function(G,re){var ne=re[0],se=re[1],ee=re[2],ve=ne*ne+se*se+ee*ee;return ve>0&&(ve=1/Math.sqrt(ve)),G[0]=re[0]*ve,G[1]=re[1]*ve,G[2]=re[2]*ve,G}([],function(G,re,ne){var se=re[0],ee=re[1],ve=re[2],Ce=ne[0],ue=ne[1],xe=ne[2];return G[0]=ee*xe-ve*ue,G[1]=ve*Ce-se*xe,G[2]=se*ue-ee*Ce,G}([],Ee([],x[E[0]],x[E[1]]),Ee([],x[E[2]],x[E[1]]))),R=-((L=k)[0]*(z=x[E[1]])[0]+L[1]*z[1]+L[2]*z[2]);var L,z;return k.concat(R)});return new ni(x,T)}}class Yo{constructor(i,u){this.min=i,this.max=u,this.center=function(p,g,x){return p[0]=.5*g[0],p[1]=.5*g[1],p[2]=.5*g[2],p}([],function(p,g,x){return p[0]=g[0]+x[0],p[1]=g[1]+x[1],p[2]=g[2]+x[2],p}([],this.min,this.max))}quadrant(i){const u=[i%2==0,i<2],p=Q(this.min),g=Q(this.max);for(let x=0;x<u.length;x++)p[x]=u[x]?this.min[x]:this.center[x],g[x]=u[x]?this.center[x]:this.max[x];return g[2]=this.max[2],new Yo(p,g)}distanceX(i){return Math.max(Math.min(this.max[0],i[0]),this.min[0])-i[0]}distanceY(i){return Math.max(Math.min(this.max[1],i[1]),this.min[1])-i[1]}intersects(i){const u=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let p=!0;for(let g=0;g<i.planes.length;g++){const x=i.planes[g];let T=0;for(let E=0;E<u.length;E++)o.b4(x,u[E])>=0&&T++;if(T===0)return 0;T!==u.length&&(p=!1)}if(p)return 2;for(let g=0;g<3;g++){let x=Number.MAX_VALUE,T=-Number.MAX_VALUE;for(let E=0;E<i.points.length;E++){const k=i.points[E][g]-this.min[g];x=Math.min(x,k),T=Math.max(T,k)}if(T<0||x>this.max[g]-this.min[g])return 0}return 1}}class gc{constructor(i=0,u=0,p=0,g=0){if(isNaN(i)||i<0||isNaN(u)||u<0||isNaN(p)||p<0||isNaN(g)||g<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=i,this.bottom=u,this.left=p,this.right=g}interpolate(i,u,p){return u.top!=null&&i.top!=null&&(this.top=o.B.number(i.top,u.top,p)),u.bottom!=null&&i.bottom!=null&&(this.bottom=o.B.number(i.bottom,u.bottom,p)),u.left!=null&&i.left!=null&&(this.left=o.B.number(i.left,u.left,p)),u.right!=null&&i.right!=null&&(this.right=o.B.number(i.right,u.right,p)),this}getCenter(i,u){const p=o.ad((this.left+i-this.right)/2,0,i),g=o.ad((this.top+u-this.bottom)/2,0,u);return new o.P(p,g)}equals(i){return this.top===i.top&&this.bottom===i.bottom&&this.left===i.left&&this.right===i.right}clone(){return new gc(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class Bu{constructor(i,u,p,g,x){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=x===void 0||!!x,this._minZoom=i||0,this._maxZoom=u||22,this._minPitch=p??0,this._maxPitch=g??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new o.L(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new gc,this._posMatrixCache={},this._alignedPosMatrixCache={},this._minEleveationForCurrentTile=0}clone(){const i=new Bu(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return i.apply(this),i}apply(i){this.tileSize=i.tileSize,this.latRange=i.latRange,this.width=i.width,this.height=i.height,this._center=i._center,this._elevation=i._elevation,this._minEleveationForCurrentTile=i._minEleveationForCurrentTile,this.zoom=i.zoom,this.angle=i.angle,this._fov=i._fov,this._pitch=i._pitch,this._unmodified=i._unmodified,this._edgeInsets=i._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(i){this._minZoom!==i&&(this._minZoom=i,this.zoom=Math.max(this.zoom,i))}get maxZoom(){return this._maxZoom}set maxZoom(i){this._maxZoom!==i&&(this._maxZoom=i,this.zoom=Math.min(this.zoom,i))}get minPitch(){return this._minPitch}set minPitch(i){this._minPitch!==i&&(this._minPitch=i,this.pitch=Math.max(this.pitch,i))}get maxPitch(){return this._maxPitch}set maxPitch(i){this._maxPitch!==i&&(this._maxPitch=i,this.pitch=Math.min(this.pitch,i))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(i){i===void 0?i=!0:i===null&&(i=!1),this._renderWorldCopies=i}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new o.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(i){const u=-o.b5(i,-180,180)*Math.PI/180;this.angle!==u&&(this._unmodified=!1,this.angle=u,this._calcMatrices(),this.rotationMatrix=function(){var p=new o.A(4);return o.A!=Float32Array&&(p[1]=0,p[2]=0),p[0]=1,p[3]=1,p}(),function(p,g,x){var T=g[0],E=g[1],k=g[2],R=g[3],L=Math.sin(x),z=Math.cos(x);p[0]=T*z+k*L,p[1]=E*z+R*L,p[2]=T*-L+k*z,p[3]=E*-L+R*z}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(i){const u=o.ad(i,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==u&&(this._unmodified=!1,this._pitch=u,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(i){i=Math.max(.01,Math.min(60,i)),this._fov!==i&&(this._unmodified=!1,this._fov=i/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(i){const u=Math.min(Math.max(i,this.minZoom),this.maxZoom);this._zoom!==u&&(this._unmodified=!1,this._zoom=u,this.tileZoom=Math.max(0,Math.floor(u)),this.scale=this.zoomScale(u),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(i){i.lat===this._center.lat&&i.lng===this._center.lng||(this._unmodified=!1,this._center=i,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(i){i!==this._elevation&&(this._elevation=i,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(i){this._edgeInsets.equals(i)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,i,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(i){return this._edgeInsets.equals(i)}interpolatePadding(i,u,p){this._unmodified=!1,this._edgeInsets.interpolate(i,u,p),this._constrain(),this._calcMatrices()}coveringZoomLevel(i){const u=(i.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/i.tileSize));return Math.max(0,u)}getVisibleUnwrappedCoordinates(i){const u=[new o.b6(0,i)];if(this._renderWorldCopies){const p=this.pointCoordinate(new o.P(0,0)),g=this.pointCoordinate(new o.P(this.width,0)),x=this.pointCoordinate(new o.P(this.width,this.height)),T=this.pointCoordinate(new o.P(0,this.height)),E=Math.floor(Math.min(p.x,g.x,x.x,T.x)),k=Math.floor(Math.max(p.x,g.x,x.x,T.x)),R=1;for(let L=E-R;L<=k+R;L++)L!==0&&u.push(new o.b6(L,i))}return u}coveringTiles(i){var u,p;let g=this.coveringZoomLevel(i);const x=g;if(i.minzoom!==void 0&&g<i.minzoom)return[];i.maxzoom!==void 0&&g>i.maxzoom&&(g=i.maxzoom);const T=this.pointCoordinate(this.getCameraPoint()),E=o.U.fromLngLat(this.center),k=Math.pow(2,g),R=[k*T.x,k*T.y,0],L=[k*E.x,k*E.y,0],z=ni.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,g);let G=i.minzoom||0;!i.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(G=g);const re=i.terrain?2/Math.min(this.tileSize,i.tileSize)*this.tileSize:3,ne=ue=>({aabb:new Yo([ue*k,0,0],[(ue+1)*k,k,0]),zoom:0,x:0,y:0,wrap:ue,fullyVisible:!1}),se=[],ee=[],ve=g,Ce=i.reparseOverscaled?x:g;if(this._renderWorldCopies)for(let ue=1;ue<=3;ue++)se.push(ne(-ue)),se.push(ne(ue));for(se.push(ne(0));se.length>0;){const ue=se.pop(),xe=ue.x,Ae=ue.y;let Ie=ue.fullyVisible;if(!Ie){const yt=ue.aabb.intersects(z);if(yt===0)continue;Ie=yt===2}const Oe=i.terrain?R:L,Ze=ue.aabb.distanceX(Oe),$e=ue.aabb.distanceY(Oe),He=Math.max(Math.abs(Ze),Math.abs($e));if(ue.zoom===ve||He>re+(1<<ve-ue.zoom)-2&&ue.zoom>=G){const yt=ve-ue.zoom,Zt=R[0]-.5-(xe<<yt),rt=R[1]-.5-(Ae<<yt);ee.push({tileID:new o.O(ue.zoom===ve?Ce:ue.zoom,ue.wrap,ue.zoom,xe,Ae),distanceSq:Re([L[0]-.5-xe,L[1]-.5-Ae]),tileDistanceToCamera:Math.sqrt(Zt*Zt+rt*rt)})}else for(let yt=0;yt<4;yt++){const Zt=(xe<<1)+yt%2,rt=(Ae<<1)+(yt>>1),Rt=ue.zoom+1;let xt=ue.aabb.quadrant(yt);if(i.terrain){const hn=new o.O(Rt,ue.wrap,Rt,Zt,rt),qt=i.terrain.getMinMaxElevation(hn),Vt=(u=qt.minElevation)!==null&&u!==void 0?u:this.elevation,Wt=(p=qt.maxElevation)!==null&&p!==void 0?p:this.elevation;xt=new Yo([xt.min[0],xt.min[1],Vt],[xt.max[0],xt.max[1],Wt])}se.push({aabb:xt,zoom:Rt,x:Zt,y:rt,wrap:ue.wrap,fullyVisible:Ie})}}return ee.sort((ue,xe)=>ue.distanceSq-xe.distanceSq).map(ue=>ue.tileID)}resize(i,u){this.width=i,this.height=u,this.pixelsToGLUnits=[2/i,-2/u],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(i){return Math.pow(2,i)}scaleZoom(i){return Math.log(i)/Math.LN2}project(i){const u=o.ad(i.lat,-this.maxValidLatitude,this.maxValidLatitude);return new o.P(o.G(i.lng)*this.worldSize,o.H(u)*this.worldSize)}unproject(i){return new o.U(i.x/this.worldSize,i.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(i){const u=this.pointLocation(this.centerPoint,i),p=i.getElevationForLngLatZoom(u,this.tileZoom);if(!(this.elevation-p))return;const g=this.getCameraPosition(),x=o.U.fromLngLat(g.lngLat,g.altitude),T=o.U.fromLngLat(u,p),E=x.x-T.x,k=x.y-T.y,R=x.z-T.z,L=Math.sqrt(E*E+k*k+R*R),z=this.scaleZoom(this.cameraToCenterDistance/L/this.tileSize);this._elevation=p,this._center=u,this.zoom=z}setLocationAtPoint(i,u){const p=this.pointCoordinate(u),g=this.pointCoordinate(this.centerPoint),x=this.locationCoordinate(i),T=new o.U(x.x-(p.x-g.x),x.y-(p.y-g.y));this.center=this.coordinateLocation(T),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(i,u){return u?this.coordinatePoint(this.locationCoordinate(i),u.getElevationForLngLatZoom(i,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(i))}pointLocation(i,u){return this.coordinateLocation(this.pointCoordinate(i,u))}locationCoordinate(i){return o.U.fromLngLat(i)}coordinateLocation(i){return i&&i.toLngLat()}pointCoordinate(i,u){if(u){const G=u.pointCoordinate(i);if(G!=null)return G}const p=[i.x,i.y,0,1],g=[i.x,i.y,1,1];o.ag(p,p,this.pixelMatrixInverse),o.ag(g,g,this.pixelMatrixInverse);const x=p[3],T=g[3],E=p[1]/x,k=g[1]/T,R=p[2]/x,L=g[2]/T,z=R===L?0:(0-R)/(L-R);return new o.U(o.B.number(p[0]/x,g[0]/T,z)/this.worldSize,o.B.number(E,k,z)/this.worldSize)}coordinatePoint(i,u=0,p=this.pixelMatrix){const g=[i.x*this.worldSize,i.y*this.worldSize,u,1];return o.ag(g,g,p),new o.P(g[0]/g[3],g[1]/g[3])}getBounds(){const i=Math.max(0,this.height/2-this.getHorizon());return new Dt().extend(this.pointLocation(new o.P(0,i))).extend(this.pointLocation(new o.P(this.width,i))).extend(this.pointLocation(new o.P(this.width,this.height))).extend(this.pointLocation(new o.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new Dt([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(i){i?(this.lngRange=[i.getWest(),i.getEast()],this.latRange=[i.getSouth(),i.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(i,u=!1){const p=i.key,g=u?this._alignedPosMatrixCache:this._posMatrixCache;if(g[p])return g[p];const x=i.canonical,T=this.worldSize/this.zoomScale(x.z),E=x.x+Math.pow(2,x.z)*i.wrap,k=o.ao(new Float64Array(16));return o.$(k,k,[E*T,x.y*T,0]),o.a0(k,k,[T/o.N,T/o.N,1]),o.a1(k,u?this.alignedProjMatrix:this.projMatrix,k),g[p]=new Float32Array(k),g[p]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let i,u,p,g,x=-90,T=90,E=-180,k=180;const R=this.size,L=this._unmodified;if(this.latRange){const re=this.latRange;x=o.H(re[1])*this.worldSize,T=o.H(re[0])*this.worldSize,i=T-x<R.y?R.y/(T-x):0}if(this.lngRange){const re=this.lngRange;E=o.b5(o.G(re[0])*this.worldSize,0,this.worldSize),k=o.b5(o.G(re[1])*this.worldSize,0,this.worldSize),k<E&&(k+=this.worldSize),u=k-E<R.x?R.x/(k-E):0}const z=this.point,G=Math.max(u||0,i||0);if(G)return this.center=this.unproject(new o.P(u?(k+E)/2:z.x,i?(T+x)/2:z.y)),this.zoom+=this.scaleZoom(G),this._unmodified=L,void(this._constraining=!1);if(this.latRange){const re=z.y,ne=R.y/2;re-ne<x&&(g=x+ne),re+ne>T&&(g=T-ne)}if(this.lngRange){const re=(E+k)/2,ne=o.b5(z.x,re-this.worldSize/2,re+this.worldSize/2),se=R.x/2;ne-se<E&&(p=E+se),ne+se>k&&(p=k-se)}p===void 0&&g===void 0||(this.center=this.unproject(new o.P(p!==void 0?p:z.x,g!==void 0?g:z.y)).wrap()),this._unmodified=L,this._constraining=!1}_calcMatrices(){if(!this.height)return;const i=this.centerOffset,u=this.point.x,p=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=o.b7(1,this.center.lat)*this.worldSize;let g=o.ao(new Float64Array(16));o.a0(g,g,[this.width/2,-this.height/2,1]),o.$(g,g,[1,-1,0]),this.labelPlaneMatrix=g,g=o.ao(new Float64Array(16)),o.a0(g,g,[1,-1,1]),o.$(g,g,[-1,-1,0]),o.a0(g,g,[2/this.width,2/this.height,1]),this.glCoordMatrix=g;const x=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),T=Math.min(this.elevation,this._minEleveationForCurrentTile),E=x-T*this._pixelPerMeter/Math.cos(this._pitch),k=T<0?E:x,R=Math.PI/2+this._pitch,L=this._fov*(.5+i.y/this.height),z=Math.sin(L)*k/Math.sin(o.ad(Math.PI-R-L,.01,Math.PI-.01)),G=this.getHorizon(),re=2*Math.atan(G/this.cameraToCenterDistance)*(.5+i.y/(2*G)),ne=Math.sin(re)*k/Math.sin(o.ad(Math.PI-R-re,.01,Math.PI-.01)),se=Math.min(z,ne),ee=1.01*(Math.cos(Math.PI/2-this._pitch)*se+k),ve=this.height/50;g=new Float64Array(16),o.b8(g,this._fov,this.width/this.height,ve,ee),g[8]=2*-i.x/this.width,g[9]=2*i.y/this.height,o.a0(g,g,[1,-1,1]),o.$(g,g,[0,0,-this.cameraToCenterDistance]),o.b9(g,g,this._pitch),o.ae(g,g,this.angle),o.$(g,g,[-u,-p,0]),this.mercatorMatrix=o.a0([],g,[this.worldSize,this.worldSize,this.worldSize]),o.a0(g,g,[1,1,this._pixelPerMeter]),this.pixelMatrix=o.a1(new Float64Array(16),this.labelPlaneMatrix,g),o.$(g,g,[0,0,-this.elevation]),this.projMatrix=g,this.invProjMatrix=o.as([],g),this.pixelMatrix3D=o.a1(new Float64Array(16),this.labelPlaneMatrix,g);const Ce=this.width%2/2,ue=this.height%2/2,xe=Math.cos(this.angle),Ae=Math.sin(this.angle),Ie=u-Math.round(u)+xe*Ce+Ae*ue,Oe=p-Math.round(p)+xe*ue+Ae*Ce,Ze=new Float64Array(g);if(o.$(Ze,Ze,[Ie>.5?Ie-1:Ie,Oe>.5?Oe-1:Oe,0]),this.alignedProjMatrix=Ze,g=o.as(new Float64Array(16),this.pixelMatrix),!g)throw new Error("failed to invert matrix");this.pixelMatrixInverse=g,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const i=this.pointCoordinate(new o.P(0,0)),u=[i.x*this.worldSize,i.y*this.worldSize,0,1];return o.ag(u,u,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const i=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new o.P(0,i))}getCameraQueryGeometry(i){const u=this.getCameraPoint();if(i.length===1)return[i[0],u];{let p=u.x,g=u.y,x=u.x,T=u.y;for(const E of i)p=Math.min(p,E.x),g=Math.min(g,E.y),x=Math.max(x,E.x),T=Math.max(T,E.y);return[new o.P(p,g),new o.P(x,g),new o.P(x,T),new o.P(p,T),new o.P(p,g)]}}}function no(y,i){let u,p=!1,g=null,x=null;const T=()=>{g=null,p&&(y.apply(x,u),g=setTimeout(T,i),p=!1)};return(...E)=>(p=!0,x=this,u=E,g||T(),g)}class yc{constructor(i){this._getCurrentHash=()=>{const u=window.location.hash.replace("#","");if(this._hashName){let p;return u.split("&").map(g=>g.split("=")).forEach(g=>{g[0]===this._hashName&&(p=g)}),(p&&p[1]||"").split("/")}return u.split("/")},this._onHashChange=()=>{const u=this._getCurrentHash();if(u.length>=3&&!u.some(p=>isNaN(p))){const p=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(u[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+u[2],+u[1]],zoom:+u[0],bearing:p,pitch:+(u[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const u=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,u)}catch{}},this._updateHash=no(this._updateHashUnthrottled,300),this._hashName=i&&encodeURIComponent(i)}addTo(i){return this._map=i,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(i){const u=this._map.getCenter(),p=Math.round(100*this._map.getZoom())/100,g=Math.ceil((p*Math.LN2+Math.log(512/360/.5))/Math.LN10),x=Math.pow(10,g),T=Math.round(u.lng*x)/x,E=Math.round(u.lat*x)/x,k=this._map.getBearing(),R=this._map.getPitch();let L="";if(L+=i?`/${T}/${E}/${p}`:`${p}/${E}/${T}`,(k||R)&&(L+="/"+Math.round(10*k)/10),R&&(L+=`/${Math.round(R)}`),this._hashName){const z=this._hashName;let G=!1;const re=window.location.hash.slice(1).split("&").map(ne=>{const se=ne.split("=")[0];return se===z?(G=!0,`${se}=${L}`):ne}).filter(ne=>ne);return G||re.push(`${z}=${L}`),`#${re.join("&")}`}return`#${L}`}}const Jo={linearity:.3,easing:o.ba(0,0,.3,1)},Lm=o.e({deceleration:2500,maxSpeed:1400},Jo),zm=o.e({deceleration:20,maxSpeed:1400},Jo),Om=o.e({deceleration:1e3,maxSpeed:360},Jo),Fm=o.e({deceleration:1e3,maxSpeed:90},Jo);class Nm{constructor(i){this._map=i,this.clear()}clear(){this._inertiaBuffer=[]}record(i){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:o.h.now(),settings:i})}_drainInertiaBuffer(){const i=this._inertiaBuffer,u=o.h.now();for(;i.length>0&&u-i[0].time>160;)i.shift()}_onMoveEnd(i){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const u={zoom:0,bearing:0,pitch:0,pan:new o.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:x}of this._inertiaBuffer)u.zoom+=x.zoomDelta||0,u.bearing+=x.bearingDelta||0,u.pitch+=x.pitchDelta||0,x.panDelta&&u.pan._add(x.panDelta),x.around&&(u.around=x.around),x.pinchAround&&(u.pinchAround=x.pinchAround);const p=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,g={};if(u.pan.mag()){const x=vc(u.pan.mag(),p,o.e({},Lm,i||{}));g.offset=u.pan.mult(x.amount/u.pan.mag()),g.center=this._map.transform.center,Es(g,x)}if(u.zoom){const x=vc(u.zoom,p,zm);g.zoom=this._map.transform.zoom+x.amount,Es(g,x)}if(u.bearing){const x=vc(u.bearing,p,Om);g.bearing=this._map.transform.bearing+o.ad(x.amount,-179,179),Es(g,x)}if(u.pitch){const x=vc(u.pitch,p,Fm);g.pitch=this._map.transform.pitch+x.amount,Es(g,x)}if(g.zoom||g.bearing){const x=u.pinchAround===void 0?u.around:u.pinchAround;g.around=x?this._map.unproject(x):this._map.getCenter()}return this.clear(),o.e(g,{noMoveStart:!0})}}function Es(y,i){(!y.duration||y.duration<i.duration)&&(y.duration=i.duration,y.easing=i.easing)}function vc(y,i,u){const{maxSpeed:p,linearity:g,deceleration:x}=u,T=o.ad(y*g/(i/1e3),-p,p),E=Math.abs(T)/(x*g);return{easing:u.easing,duration:1e3*E,amount:T*(E/2)}}class Si extends o.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,u,p,g={}){const x=b.mousePos(u.getCanvasContainer(),p),T=u.unproject(x);super(i,o.e({point:x,lngLat:T,originalEvent:p},g)),this._defaultPrevented=!1,this.target=u}}class xc extends o.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,u,p){const g=i==="touchend"?p.changedTouches:p.touches,x=b.touchPos(u.getCanvasContainer(),g),T=x.map(k=>u.unproject(k)),E=x.reduce((k,R,L,z)=>k.add(R.div(z.length)),new o.P(0,0));super(i,{points:x,point:E,lngLats:T,lngLat:u.unproject(E),originalEvent:p}),this._defaultPrevented=!1}}class Bm extends o.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,u,p){super(i,{originalEvent:p}),this._defaultPrevented=!1}}class Vm{constructor(i,u){this._map=i,this._clickTolerance=u.clickTolerance}reset(){delete this._mousedownPos}wheel(i){return this._firePreventable(new Bm(i.type,this._map,i))}mousedown(i,u){return this._mousedownPos=u,this._firePreventable(new Si(i.type,this._map,i))}mouseup(i){this._map.fire(new Si(i.type,this._map,i))}click(i,u){this._mousedownPos&&this._mousedownPos.dist(u)>=this._clickTolerance||this._map.fire(new Si(i.type,this._map,i))}dblclick(i){return this._firePreventable(new Si(i.type,this._map,i))}mouseover(i){this._map.fire(new Si(i.type,this._map,i))}mouseout(i){this._map.fire(new Si(i.type,this._map,i))}touchstart(i){return this._firePreventable(new xc(i.type,this._map,i))}touchmove(i){this._map.fire(new xc(i.type,this._map,i))}touchend(i){this._map.fire(new xc(i.type,this._map,i))}touchcancel(i){this._map.fire(new xc(i.type,this._map,i))}_firePreventable(i){if(this._map.fire(i),i.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class jm{constructor(i){this._map=i}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(i){this._map.fire(new Si(i.type,this._map,i))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Si("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(i){this._delayContextMenu?this._contextMenuEvent=i:this._ignoreContextMenu||this._map.fire(new Si(i.type,this._map,i)),this._map.listens("contextmenu")&&i.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Xs{constructor(i){this._map=i}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(i){return this.transform.pointLocation(o.P.convert(i),this._map.terrain)}}class $m{constructor(i,u){this._map=i,this._tr=new Xs(i),this._el=i.getCanvasContainer(),this._container=i.getContainer(),this._clickTolerance=u.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(i,u){this.isEnabled()&&i.shiftKey&&i.button===0&&(b.disableDrag(),this._startPos=this._lastPos=u,this._active=!0)}mousemoveWindow(i,u){if(!this._active)return;const p=u;if(this._lastPos.equals(p)||!this._box&&p.dist(this._startPos)<this._clickTolerance)return;const g=this._startPos;this._lastPos=p,this._box||(this._box=b.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",i));const x=Math.min(g.x,p.x),T=Math.max(g.x,p.x),E=Math.min(g.y,p.y),k=Math.max(g.y,p.y);b.setTransform(this._box,`translate(${x}px,${E}px)`),this._box.style.width=T-x+"px",this._box.style.height=k-E+"px"}mouseupWindow(i,u){if(!this._active||i.button!==0)return;const p=this._startPos,g=u;if(this.reset(),b.suppressClick(),p.x!==g.x||p.y!==g.y)return this._map.fire(new o.k("boxzoomend",{originalEvent:i})),{cameraAnimation:x=>x.fitScreenCoordinates(p,g,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",i)}keydown(i){this._active&&i.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",i))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(b.remove(this._box),this._box=null),b.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(i,u){return this._map.fire(new o.k(i,{originalEvent:u}))}}function Zi(y,i){if(y.length!==i.length)throw new Error(`The number of touches and points are not equal - touches ${y.length}, points ${i.length}`);const u={};for(let p=0;p<y.length;p++)u[y[p].identifier]=i[p];return u}class Qs{constructor(i){this.reset(),this.numTouches=i.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(i,u,p){(this.centroid||p.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=i.timeStamp),p.length===this.numTouches&&(this.centroid=function(g){const x=new o.P(0,0);for(const T of g)x._add(T);return x.div(g.length)}(u),this.touches=Zi(p,u)))}touchmove(i,u,p){if(this.aborted||!this.centroid)return;const g=Zi(p,u);for(const x in this.touches){const T=g[x];(!T||T.dist(this.touches[x])>30)&&(this.aborted=!0)}}touchend(i,u,p){if((!this.centroid||i.timeStamp-this.startTime>500)&&(this.aborted=!0),p.length===0){const g=!this.aborted&&this.centroid;if(this.reset(),g)return g}}}class Vu{constructor(i){this.singleTap=new Qs(i),this.numTaps=i.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(i,u,p){this.singleTap.touchstart(i,u,p)}touchmove(i,u,p){this.singleTap.touchmove(i,u,p)}touchend(i,u,p){const g=this.singleTap.touchend(i,u,p);if(g){const x=i.timeStamp-this.lastTime<500,T=!this.lastTap||this.lastTap.dist(g)<30;if(x&&T||this.reset(),this.count++,this.lastTime=i.timeStamp,this.lastTap=g,this.count===this.numTaps)return this.reset(),g}}}class Ys{constructor(i){this._tr=new Xs(i),this._zoomIn=new Vu({numTouches:1,numTaps:2}),this._zoomOut=new Vu({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(i,u,p){this._zoomIn.touchstart(i,u,p),this._zoomOut.touchstart(i,u,p)}touchmove(i,u,p){this._zoomIn.touchmove(i,u,p),this._zoomOut.touchmove(i,u,p)}touchend(i,u,p){const g=this._zoomIn.touchend(i,u,p),x=this._zoomOut.touchend(i,u,p),T=this._tr;return g?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:E=>E.easeTo({duration:300,zoom:T.zoom+1,around:T.unproject(g)},{originalEvent:i})}):x?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:E=>E.easeTo({duration:300,zoom:T.zoom-1,around:T.unproject(x)},{originalEvent:i})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Js{constructor(i){this._enabled=!!i.enable,this._moveStateManager=i.moveStateManager,this._clickTolerance=i.clickTolerance||1,this._moveFunction=i.move,this._activateOnStart=!!i.activateOnStart,i.assignEvents(this),this.reset()}reset(i){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(i)}_move(...i){const u=this._moveFunction(...i);if(u.bearingDelta||u.pitchDelta||u.around||u.panDelta)return this._active=!0,u}dragStart(i,u){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(i)&&(this._moveStateManager.startMove(i),this._lastPoint=u.length?u[0]:u,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(i,u){if(!this.isEnabled())return;const p=this._lastPoint;if(!p)return;if(i.preventDefault(),!this._moveStateManager.isValidMoveEvent(i))return void this.reset(i);const g=u.length?u[0]:u;return!this._moved&&g.dist(p)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=g,this._move(p,g))}dragEnd(i){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(i)&&(this._moved&&b.suppressClick(),this.reset(i))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Vx={0:1,2:2};class Ud{constructor(i){this._correctEvent=i.checkCorrectEvent}startMove(i){const u=b.mouseButton(i);this._eventButton=u}endMove(i){delete this._eventButton}isValidStartEvent(i){return this._correctEvent(i)}isValidMoveEvent(i){return!function(u,p){const g=Vx[p];return u.buttons===void 0||(u.buttons&g)!==g}(i,this._eventButton)}isValidEndEvent(i){return b.mouseButton(i)===this._eventButton}}class Um{constructor(){this._firstTouch=void 0}_isOneFingerTouch(i){return i.targetTouches.length===1}_isSameTouchEvent(i){return i.targetTouches[0].identifier===this._firstTouch}startMove(i){this._firstTouch=i.targetTouches[0].identifier}endMove(i){delete this._firstTouch}isValidStartEvent(i){return this._isOneFingerTouch(i)}isValidMoveEvent(i){return this._isOneFingerTouch(i)&&this._isSameTouchEvent(i)}isValidEndEvent(i){return this._isOneFingerTouch(i)&&this._isSameTouchEvent(i)}}const ju=y=>{y.mousedown=y.dragStart,y.mousemoveWindow=y.dragMove,y.mouseup=y.dragEnd,y.contextmenu=function(i){i.preventDefault()}},el=({enable:y,clickTolerance:i,bearingDegreesPerPixelMoved:u=.8})=>{const p=new Ud({checkCorrectEvent:g=>b.mouseButton(g)===0&&g.ctrlKey||b.mouseButton(g)===2});return new Js({clickTolerance:i,move:(g,x)=>({bearingDelta:(x.x-g.x)*u}),moveStateManager:p,enable:y,assignEvents:ju})},ea=({enable:y,clickTolerance:i,pitchDegreesPerPixelMoved:u=-.5})=>{const p=new Ud({checkCorrectEvent:g=>b.mouseButton(g)===0&&g.ctrlKey||b.mouseButton(g)===2});return new Js({clickTolerance:i,move:(g,x)=>({pitchDelta:(x.y-g.y)*u}),moveStateManager:p,enable:y,assignEvents:ju})};class dt{constructor(i,u){this._minTouches=i.cooperativeGestures?2:1,this._clickTolerance=i.clickTolerance||1,this._map=u,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new o.P(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(i,u,p){return this._calculateTransform(i,u,p)}touchmove(i,u,p){if(this._map._cooperativeGestures&&(this._minTouches===2&&p.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(i,!1,p.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(p.length<this._minTouches))return i.preventDefault(),this._calculateTransform(i,u,p)}touchend(i,u,p){this._calculateTransform(i,u,p),this._active&&p.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(i,u,p){p.length>0&&(this._active=!0);const g=Zi(p,u),x=new o.P(0,0),T=new o.P(0,0);let E=0;for(const R in g){const L=g[R],z=this._touches[R];z&&(x._add(L),T._add(L.sub(z)),E++,g[R]=L)}if(this._touches=g,E<this._minTouches||!T.mag())return;const k=T.div(E);return this._sum._add(k),this._sum.mag()<this._clickTolerance?void 0:{around:x.div(E),panDelta:k}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class $u{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(i,u,p){this._firstTwoTouches||p.length<2||(this._firstTwoTouches=[p[0].identifier,p[1].identifier],this._start([u[0],u[1]]))}touchmove(i,u,p){if(!this._firstTwoTouches)return;i.preventDefault();const[g,x]=this._firstTwoTouches,T=ka(p,u,g),E=ka(p,u,x);if(!T||!E)return;const k=this._aroundCenter?null:T.add(E).div(2);return this._move([T,E],k,i)}touchend(i,u,p){if(!this._firstTwoTouches)return;const[g,x]=this._firstTwoTouches,T=ka(p,u,g),E=ka(p,u,x);T&&E||(this._active&&b.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(i){this._enabled=!0,this._aroundCenter=!!i&&i.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function ka(y,i,u){for(let p=0;p<y.length;p++)if(y[p].identifier===u)return i[p]}function tl(y,i){return Math.log(y/i)/Math.LN2}class qm extends $u{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(i){this._startDistance=this._distance=i[0].dist(i[1])}_move(i,u){const p=this._distance;if(this._distance=i[0].dist(i[1]),this._active||!(Math.abs(tl(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:tl(this._distance,p),pinchAround:u}}}function lt(y,i){return 180*y.angleWith(i)/Math.PI}class qd extends $u{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(i){this._startVector=this._vector=i[0].sub(i[1]),this._minDiameter=i[0].dist(i[1])}_move(i,u){const p=this._vector;if(this._vector=i[0].sub(i[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:lt(this._vector,p),pinchAround:u}}_isBelowThreshold(i){this._minDiameter=Math.min(this._minDiameter,i.mag());const u=25/(Math.PI*this._minDiameter)*360,p=lt(i,this._startVector);return Math.abs(p)<u}}function Gd(y){return Math.abs(y.y)>Math.abs(y.x)}class jx extends $u{constructor(i){super(),this._map=i}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(i,u,p){super.touchstart(i,u,p),this._currentTouchCount=p.length}_start(i){this._lastPoints=i,Gd(i[0].sub(i[1]))&&(this._valid=!1)}_move(i,u,p){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const g=i[0].sub(this._lastPoints[0]),x=i[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(g,x,p.timeStamp),this._valid?(this._lastPoints=i,this._active=!0,{pitchDelta:(g.y+x.y)/2*-.5}):void 0}gestureBeginsVertically(i,u,p){if(this._valid!==void 0)return this._valid;const g=i.mag()>=2,x=u.mag()>=2;if(!g&&!x)return;if(!g||!x)return this._firstMove===void 0&&(this._firstMove=p),p-this._firstMove<100&&void 0;const T=i.y>0==u.y>0;return Gd(i)&&Gd(u)&&T}}const Zd={panStep:100,bearingStep:15,pitchStep:10};class Gm{constructor(i){this._tr=new Xs(i);const u=Zd;this._panStep=u.panStep,this._bearingStep=u.bearingStep,this._pitchStep=u.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(i){if(i.altKey||i.ctrlKey||i.metaKey)return;let u=0,p=0,g=0,x=0,T=0;switch(i.keyCode){case 61:case 107:case 171:case 187:u=1;break;case 189:case 109:case 173:u=-1;break;case 37:i.shiftKey?p=-1:(i.preventDefault(),x=-1);break;case 39:i.shiftKey?p=1:(i.preventDefault(),x=1);break;case 38:i.shiftKey?g=1:(i.preventDefault(),T=-1);break;case 40:i.shiftKey?g=-1:(i.preventDefault(),T=1);break;default:return}return this._rotationDisabled&&(p=0,g=0),{cameraAnimation:E=>{const k=this._tr;E.easeTo({duration:300,easeId:"keyboardHandler",easing:Zm,zoom:u?Math.round(k.zoom)+u*(i.shiftKey?2:1):k.zoom,bearing:k.bearing+p*this._bearingStep,pitch:k.pitch+g*this._pitchStep,offset:[-x*this._panStep,-T*this._panStep],center:k.center},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Zm(y){return y*(2-y)}const Wm=4.000244140625;class $x{constructor(i,u){this._onTimeout=p=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(p)},this._map=i,this._tr=new Xs(i),this._el=i.getCanvasContainer(),this._triggerRenderFrame=u,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(i){this._defaultZoomRate=i}setWheelZoomRate(i){this._wheelZoomRate=i}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(i){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!i&&i.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(i){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!i[this._map._metaKey])return;i.preventDefault()}let u=i.deltaMode===WheelEvent.DOM_DELTA_LINE?40*i.deltaY:i.deltaY;const p=o.h.now(),g=p-(this._lastWheelEventTime||0);this._lastWheelEventTime=p,u!==0&&u%Wm==0?this._type="wheel":u!==0&&Math.abs(u)<4?this._type="trackpad":g>400?(this._type=null,this._lastValue=u,this._timeout=setTimeout(this._onTimeout,40,i)):this._type||(this._type=Math.abs(g*u)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,u+=this._lastValue)),i.shiftKey&&u&&(u/=4),this._type&&(this._lastWheelEvent=i,this._delta-=u,this._active||this._start(i)),i.preventDefault()}_start(i){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const u=b.mousePos(this._el,i),p=this._tr;this._around=o.L.convert(this._aroundCenter?p.center:p.unproject(u)),this._aroundPoint=p.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const i=this._tr.transform;if(this._delta!==0){const E=this._type==="wheel"&&Math.abs(this._delta)>Wm?this._wheelZoomRate:this._defaultZoomRate;let k=2/(1+Math.exp(-Math.abs(this._delta*E)));this._delta<0&&k!==0&&(k=1/k);const R=typeof this._targetZoom=="number"?i.zoomScale(this._targetZoom):i.scale;this._targetZoom=Math.min(i.maxZoom,Math.max(i.minZoom,i.scaleZoom(R*k))),this._type==="wheel"&&(this._startZoom=i.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const u=typeof this._targetZoom=="number"?this._targetZoom:i.zoom,p=this._startZoom,g=this._easing;let x,T=!1;if(this._type==="wheel"&&p&&g){const E=Math.min((o.h.now()-this._lastWheelEventTime)/200,1),k=g(E);x=o.B.number(p,u,k),E<1?this._frameId||(this._frameId=!0):T=!0}else x=u,T=!0;return this._active=!0,T&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!T,zoomDelta:x-i.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(i){let u=o.bb;if(this._prevEase){const p=this._prevEase,g=(o.h.now()-p.start)/p.duration,x=p.easing(g+.01)-p.easing(g),T=.27/Math.sqrt(x*x+1e-4)*.01,E=Math.sqrt(.0729-T*T);u=o.ba(T,E,.25,1)}return this._prevEase={start:o.h.now(),duration:i,easing:u},u}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Wd{constructor(i,u){this._clickZoom=i,this._tapZoom=u}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Hd{constructor(i){this._tr=new Xs(i),this.reset()}reset(){this._active=!1}dblclick(i,u){return i.preventDefault(),{cameraAnimation:p=>{p.easeTo({duration:300,zoom:this._tr.zoom+(i.shiftKey?-1:1),around:this._tr.unproject(u)},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Kd{constructor(){this._tap=new Vu({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(i,u,p){if(!this._swipePoint)if(this._tapTime){const g=u[0],x=i.timeStamp-this._tapTime<500,T=this._tapPoint.dist(g)<30;x&&T?p.length>0&&(this._swipePoint=g,this._swipeTouch=p[0].identifier):this.reset()}else this._tap.touchstart(i,u,p)}touchmove(i,u,p){if(this._tapTime){if(this._swipePoint){if(p[0].identifier!==this._swipeTouch)return;const g=u[0],x=g.y-this._swipePoint.y;return this._swipePoint=g,i.preventDefault(),this._active=!0,{zoomDelta:x/128}}}else this._tap.touchmove(i,u,p)}touchend(i,u,p){if(this._tapTime)this._swipePoint&&p.length===0&&this.reset();else{const g=this._tap.touchend(i,u,p);g&&(this._tapTime=i.timeStamp,this._tapPoint=g)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Xd{constructor(i,u,p){this._el=i,this._mousePan=u,this._touchPan=p}enable(i){this._inertiaOptions=i||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class ri{constructor(i,u,p){this._pitchWithRotate=i.pitchWithRotate,this._mouseRotate=u,this._mousePitch=p}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Ia{constructor(i,u,p,g){this._el=i,this._touchZoom=u,this._touchRotate=p,this._tapDragZoom=g,this._rotationDisabled=!1,this._enabled=!0}enable(i){this._touchZoom.enable(i),this._rotationDisabled||this._touchRotate.enable(i),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const _c=y=>y.zoom||y.drag||y.pitch||y.rotate;class Qd extends o.k{}function wc(y){return y.panDelta&&y.panDelta.mag()||y.zoomDelta||y.bearingDelta||y.pitchDelta}class Yd{constructor(i,u){this.handleWindowEvent=g=>{this.handleEvent(g,`${g.type}Window`)},this.handleEvent=(g,x)=>{if(g.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const T=g.type==="renderFrame"?void 0:g,E={needsRenderFrame:!1},k={},R={},L=g.touches,z=L?this._getMapTouches(L):void 0,G=z?b.touchPos(this._el,z):b.mousePos(this._el,g);for(const{handlerName:se,handler:ee,allowed:ve}of this._handlers){if(!ee.isEnabled())continue;let Ce;this._blockedByActive(R,ve,se)?ee.reset():ee[x||g.type]&&(Ce=ee[x||g.type](g,G,z),this.mergeHandlerResult(E,k,Ce,se,T),Ce&&Ce.needsRenderFrame&&this._triggerRenderFrame()),(Ce||ee.isActive())&&(R[se]=ee)}const re={};for(const se in this._previousActiveHandlers)R[se]||(re[se]=T);this._previousActiveHandlers=R,(Object.keys(re).length||wc(E))&&(this._changes.push([E,k,re]),this._triggerRenderFrame()),(Object.keys(R).length||wc(E))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:ne}=E;ne&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ne(this._map))},this._map=i,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Nm(i),this._bearingSnap=u.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(u);const p=this._el;this._listeners=[[p,"touchstart",{passive:!0}],[p,"touchmove",{passive:!1}],[p,"touchend",void 0],[p,"touchcancel",void 0],[p,"mousedown",void 0],[p,"mousemove",void 0],[p,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[p,"mouseover",void 0],[p,"mouseout",void 0],[p,"dblclick",void 0],[p,"click",void 0],[p,"keydown",{capture:!1}],[p,"keyup",void 0],[p,"wheel",{passive:!1}],[p,"contextmenu",void 0],[window,"blur",void 0]];for(const[g,x,T]of this._listeners)b.addEventListener(g,x,g===document?this.handleWindowEvent:this.handleEvent,T)}destroy(){for(const[i,u,p]of this._listeners)b.removeEventListener(i,u,i===document?this.handleWindowEvent:this.handleEvent,p)}_addDefaultHandlers(i){const u=this._map,p=u.getCanvasContainer();this._add("mapEvent",new Vm(u,i));const g=u.boxZoom=new $m(u,i);this._add("boxZoom",g),i.interactive&&i.boxZoom&&g.enable();const x=new Ys(u),T=new Hd(u);u.doubleClickZoom=new Wd(T,x),this._add("tapZoom",x),this._add("clickZoom",T),i.interactive&&i.doubleClickZoom&&u.doubleClickZoom.enable();const E=new Kd;this._add("tapDragZoom",E);const k=u.touchPitch=new jx(u);this._add("touchPitch",k),i.interactive&&i.touchPitch&&u.touchPitch.enable(i.touchPitch);const R=el(i),L=ea(i);u.dragRotate=new ri(i,R,L),this._add("mouseRotate",R,["mousePitch"]),this._add("mousePitch",L,["mouseRotate"]),i.interactive&&i.dragRotate&&u.dragRotate.enable();const z=(({enable:ve,clickTolerance:Ce})=>{const ue=new Ud({checkCorrectEvent:xe=>b.mouseButton(xe)===0&&!xe.ctrlKey});return new Js({clickTolerance:Ce,move:(xe,Ae)=>({around:Ae,panDelta:Ae.sub(xe)}),activateOnStart:!0,moveStateManager:ue,enable:ve,assignEvents:ju})})(i),G=new dt(i,u);u.dragPan=new Xd(p,z,G),this._add("mousePan",z),this._add("touchPan",G,["touchZoom","touchRotate"]),i.interactive&&i.dragPan&&u.dragPan.enable(i.dragPan);const re=new qd,ne=new qm;u.touchZoomRotate=new Ia(p,ne,re,E),this._add("touchRotate",re,["touchPan","touchZoom"]),this._add("touchZoom",ne,["touchPan","touchRotate"]),i.interactive&&i.touchZoomRotate&&u.touchZoomRotate.enable(i.touchZoomRotate);const se=u.scrollZoom=new $x(u,()=>this._triggerRenderFrame());this._add("scrollZoom",se,["mousePan"]),i.interactive&&i.scrollZoom&&u.scrollZoom.enable(i.scrollZoom);const ee=u.keyboard=new Gm(u);this._add("keyboard",ee),i.interactive&&i.keyboard&&u.keyboard.enable(),this._add("blockableMapEvent",new jm(u))}_add(i,u,p){this._handlers.push({handlerName:i,handler:u,allowed:p}),this._handlersById[i]=u}stop(i){if(!this._updatingCamera){for(const{handler:u}of this._handlers)u.reset();this._inertia.clear(),this._fireEvents({},{},i),this._changes=[]}}isActive(){for(const{handler:i}of this._handlers)if(i.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!_c(this._eventsInProgress)||this.isZooming()}_blockedByActive(i,u,p){for(const g in i)if(g!==p&&(!u||u.indexOf(g)<0))return!0;return!1}_getMapTouches(i){const u=[];for(const p of i)this._el.contains(p.target)&&u.push(p);return u}mergeHandlerResult(i,u,p,g,x){if(!p)return;o.e(i,p);const T={handlerName:g,originalEvent:p.originalEvent||x};p.zoomDelta!==void 0&&(u.zoom=T),p.panDelta!==void 0&&(u.drag=T),p.pitchDelta!==void 0&&(u.pitch=T),p.bearingDelta!==void 0&&(u.rotate=T)}_applyChanges(){const i={},u={},p={};for(const[g,x,T]of this._changes)g.panDelta&&(i.panDelta=(i.panDelta||new o.P(0,0))._add(g.panDelta)),g.zoomDelta&&(i.zoomDelta=(i.zoomDelta||0)+g.zoomDelta),g.bearingDelta&&(i.bearingDelta=(i.bearingDelta||0)+g.bearingDelta),g.pitchDelta&&(i.pitchDelta=(i.pitchDelta||0)+g.pitchDelta),g.around!==void 0&&(i.around=g.around),g.pinchAround!==void 0&&(i.pinchAround=g.pinchAround),g.noInertia&&(i.noInertia=g.noInertia),o.e(u,x),o.e(p,T);this._updateMapTransform(i,u,p),this._changes=[]}_updateMapTransform(i,u,p){const g=this._map,x=g._getTransformForUpdate(),T=g.terrain;if(!(wc(i)||T&&this._terrainMovement))return this._fireEvents(u,p,!0);let{panDelta:E,zoomDelta:k,bearingDelta:R,pitchDelta:L,around:z,pinchAround:G}=i;G!==void 0&&(z=G),g._stop(!0),z=z||g.transform.centerPoint;const re=x.pointLocation(E?z.sub(E):z);R&&(x.bearing+=R),L&&(x.pitch+=L),k&&(x.zoom+=k),T?this._terrainMovement||!u.drag&&!u.zoom?u.drag&&this._terrainMovement?x.center=x.pointLocation(x.centerPoint.sub(E)):x.setLocationAtPoint(re,z):(this._terrainMovement=!0,this._map._elevationFreeze=!0,x.setLocationAtPoint(re,z),this._map.once("moveend",()=>{this._map._elevationFreeze=!1,this._terrainMovement=!1,x.recalculateZoom(g.terrain)})):x.setLocationAtPoint(re,z),g._applyUpdatedTransform(x),this._map._update(),i.noInertia||this._inertia.record(i),this._fireEvents(u,p,!0)}_fireEvents(i,u,p){const g=_c(this._eventsInProgress),x=_c(i),T={};for(const L in i){const{originalEvent:z}=i[L];this._eventsInProgress[L]||(T[`${L}start`]=z),this._eventsInProgress[L]=i[L]}!g&&x&&this._fireEvent("movestart",x.originalEvent);for(const L in T)this._fireEvent(L,T[L]);x&&this._fireEvent("move",x.originalEvent);for(const L in i){const{originalEvent:z}=i[L];this._fireEvent(L,z)}const E={};let k;for(const L in this._eventsInProgress){const{handlerName:z,originalEvent:G}=this._eventsInProgress[L];this._handlersById[z].isActive()||(delete this._eventsInProgress[L],k=u[z]||G,E[`${L}end`]=k)}for(const L in E)this._fireEvent(L,E[L]);const R=_c(this._eventsInProgress);if(p&&(g||x)&&!R){this._updatingCamera=!0;const L=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),z=G=>G!==0&&-this._bearingSnap<G&&G<this._bearingSnap;!L||!L.essential&&o.h.prefersReducedMotion?(this._map.fire(new o.k("moveend",{originalEvent:k})),z(this._map.getBearing())&&this._map.resetNorth()):(z(L.bearing||this._map.getBearing())&&(L.bearing=0),L.freezeElevation=!0,this._map.easeTo(L,{originalEvent:k})),this._updatingCamera=!1}}_fireEvent(i,u){this._map.fire(new o.k(i,u?{originalEvent:u}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(i=>{delete this._frameId,this.handleEvent(new Qd("renderFrame",{timeStamp:i})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Hm extends o.E{constructor(i,u){super(),this._renderFrameCallback=()=>{const p=Math.min((o.h.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(p)),p<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=i,this._bearingSnap=u.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new o.L(this.transform.center.lng,this.transform.center.lat)}setCenter(i,u){return this.jumpTo({center:i},u)}panBy(i,u,p){return i=o.P.convert(i).mult(-1),this.panTo(this.transform.center,o.e({offset:i},u),p)}panTo(i,u,p){return this.easeTo(o.e({center:i},u),p)}getZoom(){return this.transform.zoom}setZoom(i,u){return this.jumpTo({zoom:i},u),this}zoomTo(i,u,p){return this.easeTo(o.e({zoom:i},u),p)}zoomIn(i,u){return this.zoomTo(this.getZoom()+1,i,u),this}zoomOut(i,u){return this.zoomTo(this.getZoom()-1,i,u),this}getBearing(){return this.transform.bearing}setBearing(i,u){return this.jumpTo({bearing:i},u),this}getPadding(){return this.transform.padding}setPadding(i,u){return this.jumpTo({padding:i},u),this}rotateTo(i,u,p){return this.easeTo(o.e({bearing:i},u),p)}resetNorth(i,u){return this.rotateTo(0,o.e({duration:1e3},i),u),this}resetNorthPitch(i,u){return this.easeTo(o.e({bearing:0,pitch:0,duration:1e3},i),u),this}snapToNorth(i,u){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(i,u):this}getPitch(){return this.transform.pitch}setPitch(i,u){return this.jumpTo({pitch:i},u),this}cameraForBounds(i,u){i=Dt.convert(i);const p=u&&u.bearing||0;return this._cameraForBoxAndBearing(i.getNorthWest(),i.getSouthEast(),p,u)}_cameraForBoxAndBearing(i,u,p,g){const x={top:0,bottom:0,right:0,left:0};if(typeof(g=o.e({padding:x,offset:[0,0],maxZoom:this.transform.maxZoom},g)).padding=="number"){const Ae=g.padding;g.padding={top:Ae,bottom:Ae,right:Ae,left:Ae}}g.padding=o.e(x,g.padding);const T=this.transform,E=T.padding,k=T.project(o.L.convert(i)),R=T.project(o.L.convert(u)),L=k.rotate(-p*Math.PI/180),z=R.rotate(-p*Math.PI/180),G=new o.P(Math.max(L.x,z.x),Math.max(L.y,z.y)),re=new o.P(Math.min(L.x,z.x),Math.min(L.y,z.y)),ne=G.sub(re),se=(T.width-(E.left+E.right+g.padding.left+g.padding.right))/ne.x,ee=(T.height-(E.top+E.bottom+g.padding.top+g.padding.bottom))/ne.y;if(ee<0||se<0)return void o.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const ve=Math.min(T.scaleZoom(T.scale*Math.min(se,ee)),g.maxZoom),Ce=o.P.convert(g.offset),ue=new o.P((g.padding.left-g.padding.right)/2,(g.padding.top-g.padding.bottom)/2).rotate(p*Math.PI/180),xe=Ce.add(ue).mult(T.scale/T.zoomScale(ve));return{center:T.unproject(k.add(R).div(2).sub(xe)),zoom:ve,bearing:p}}fitBounds(i,u,p){return this._fitInternal(this.cameraForBounds(i,u),u,p)}fitScreenCoordinates(i,u,p,g,x){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(o.P.convert(i)),this.transform.pointLocation(o.P.convert(u)),p,g),g,x)}_fitInternal(i,u,p){return i?(delete(u=o.e(i,u)).padding,u.linear?this.easeTo(u,p):this.flyTo(u,p)):this}jumpTo(i,u){this.stop();const p=this._getTransformForUpdate();let g=!1,x=!1,T=!1;return"zoom"in i&&p.zoom!==+i.zoom&&(g=!0,p.zoom=+i.zoom),i.center!==void 0&&(p.center=o.L.convert(i.center)),"bearing"in i&&p.bearing!==+i.bearing&&(x=!0,p.bearing=+i.bearing),"pitch"in i&&p.pitch!==+i.pitch&&(T=!0,p.pitch=+i.pitch),i.padding==null||p.isPaddingEqual(i.padding)||(p.padding=i.padding),this._applyUpdatedTransform(p),this.fire(new o.k("movestart",u)).fire(new o.k("move",u)),g&&this.fire(new o.k("zoomstart",u)).fire(new o.k("zoom",u)).fire(new o.k("zoomend",u)),x&&this.fire(new o.k("rotatestart",u)).fire(new o.k("rotate",u)).fire(new o.k("rotateend",u)),T&&this.fire(new o.k("pitchstart",u)).fire(new o.k("pitch",u)).fire(new o.k("pitchend",u)),this.fire(new o.k("moveend",u))}calculateCameraOptionsFromTo(i,u,p,g=0){const x=o.U.fromLngLat(i,u),T=o.U.fromLngLat(p,g),E=T.x-x.x,k=T.y-x.y,R=T.z-x.z,L=Math.hypot(E,k,R);if(L===0)throw new Error("Can't calculate camera options with same From and To");const z=Math.hypot(E,k),G=this.transform.scaleZoom(this.transform.cameraToCenterDistance/L/this.transform.tileSize),re=180*Math.atan2(E,-k)/Math.PI;let ne=180*Math.acos(z/L)/Math.PI;return ne=R<0?90-ne:90+ne,{center:T.toLngLat(),zoom:G,pitch:ne,bearing:re}}easeTo(i,u){this._stop(!1,i.easeId),((i=o.e({offset:[0,0],duration:500,easing:o.bb},i)).animate===!1||!i.essential&&o.h.prefersReducedMotion)&&(i.duration=0);const p=this._getTransformForUpdate(),g=this.getZoom(),x=this.getBearing(),T=this.getPitch(),E=this.getPadding(),k="zoom"in i?+i.zoom:g,R="bearing"in i?this._normalizeBearing(i.bearing,x):x,L="pitch"in i?+i.pitch:T,z="padding"in i?i.padding:p.padding,G=o.P.convert(i.offset);let re=p.centerPoint.add(G);const ne=p.pointLocation(re),se=o.L.convert(i.center||ne);this._normalizeCenter(se);const ee=p.project(ne),ve=p.project(se).sub(ee),Ce=p.zoomScale(k-g);let ue,xe;i.around&&(ue=o.L.convert(i.around),xe=p.locationPoint(ue));const Ae={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||k!==g,this._rotating=this._rotating||x!==R,this._pitching=this._pitching||L!==T,this._padding=!p.isPaddingEqual(z),this._easeId=i.easeId,this._prepareEase(u,i.noMoveStart,Ae),this.terrain&&this._prepareElevation(se),this._ease(Ie=>{if(this._zooming&&(p.zoom=o.B.number(g,k,Ie)),this._rotating&&(p.bearing=o.B.number(x,R,Ie)),this._pitching&&(p.pitch=o.B.number(T,L,Ie)),this._padding&&(p.interpolatePadding(E,z,Ie),re=p.centerPoint.add(G)),this.terrain&&!i.freezeElevation&&this._updateElevation(Ie),ue)p.setLocationAtPoint(ue,xe);else{const Oe=p.zoomScale(p.zoom-g),Ze=k>g?Math.min(2,Ce):Math.max(.5,Ce),$e=Math.pow(Ze,1-Ie),He=p.unproject(ee.add(ve.mult(Ie*$e)).mult(Oe));p.setLocationAtPoint(p.renderWorldCopies?He.wrap():He,re)}this._applyUpdatedTransform(p),this._fireMoveEvents(u)},Ie=>{this.terrain&&this._finalizeElevation(),this._afterEase(u,Ie)},i),this}_prepareEase(i,u,p={}){this._moving=!0,u||p.moving||this.fire(new o.k("movestart",i)),this._zooming&&!p.zooming&&this.fire(new o.k("zoomstart",i)),this._rotating&&!p.rotating&&this.fire(new o.k("rotatestart",i)),this._pitching&&!p.pitching&&this.fire(new o.k("pitchstart",i))}_prepareElevation(i){this._elevationCenter=i,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(i,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(i){this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const u=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(i<1&&u!==this._elevationTarget){const p=this._elevationTarget-this._elevationStart;this._elevationStart+=i*(p-(u-(p*i+this._elevationStart))/(1-i)),this._elevationTarget=u}this.transform.elevation=o.B.number(this._elevationStart,this._elevationTarget,i)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(i){if(!this.transformCameraUpdate)return;const u=i.clone(),{center:p,zoom:g,pitch:x,bearing:T,elevation:E}=this.transformCameraUpdate(u);p&&(u.center=p),g!==void 0&&(u.zoom=g),x!==void 0&&(u.pitch=x),T!==void 0&&(u.bearing=T),E!==void 0&&(u.elevation=E),this.transform.apply(u)}_fireMoveEvents(i){this.fire(new o.k("move",i)),this._zooming&&this.fire(new o.k("zoom",i)),this._rotating&&this.fire(new o.k("rotate",i)),this._pitching&&this.fire(new o.k("pitch",i))}_afterEase(i,u){if(this._easeId&&u&&this._easeId===u)return;delete this._easeId;const p=this._zooming,g=this._rotating,x=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,p&&this.fire(new o.k("zoomend",i)),g&&this.fire(new o.k("rotateend",i)),x&&this.fire(new o.k("pitchend",i)),this.fire(new o.k("moveend",i))}flyTo(i,u){if(!i.essential&&o.h.prefersReducedMotion){const xt=o.F(i,["center","zoom","bearing","pitch","around"]);return this.jumpTo(xt,u)}this.stop(),i=o.e({offset:[0,0],speed:1.2,curve:1.42,easing:o.bb},i);const p=this._getTransformForUpdate(),g=this.getZoom(),x=this.getBearing(),T=this.getPitch(),E=this.getPadding(),k="zoom"in i?o.ad(+i.zoom,p.minZoom,p.maxZoom):g,R="bearing"in i?this._normalizeBearing(i.bearing,x):x,L="pitch"in i?+i.pitch:T,z="padding"in i?i.padding:p.padding,G=p.zoomScale(k-g),re=o.P.convert(i.offset);let ne=p.centerPoint.add(re);const se=p.pointLocation(ne),ee=o.L.convert(i.center||se);this._normalizeCenter(ee);const ve=p.project(se),Ce=p.project(ee).sub(ve);let ue=i.curve;const xe=Math.max(p.width,p.height),Ae=xe/G,Ie=Ce.mag();if("minZoom"in i){const xt=o.ad(Math.min(i.minZoom,g,k),p.minZoom,p.maxZoom),hn=xe/p.zoomScale(xt-g);ue=Math.sqrt(hn/Ie*2)}const Oe=ue*ue;function Ze(xt){const hn=(Ae*Ae-xe*xe+(xt?-1:1)*Oe*Oe*Ie*Ie)/(2*(xt?Ae:xe)*Oe*Ie);return Math.log(Math.sqrt(hn*hn+1)-hn)}function $e(xt){return(Math.exp(xt)-Math.exp(-xt))/2}function He(xt){return(Math.exp(xt)+Math.exp(-xt))/2}const yt=Ze(!1);let Zt=function(xt){return He(yt)/He(yt+ue*xt)},rt=function(xt){return xe*((He(yt)*($e(hn=yt+ue*xt)/He(hn))-$e(yt))/Oe)/Ie;var hn},Rt=(Ze(!0)-yt)/ue;if(Math.abs(Ie)<1e-6||!isFinite(Rt)){if(Math.abs(xe-Ae)<1e-6)return this.easeTo(i,u);const xt=Ae<xe?-1:1;Rt=Math.abs(Math.log(Ae/xe))/ue,rt=function(){return 0},Zt=function(hn){return Math.exp(xt*ue*hn)}}return i.duration="duration"in i?+i.duration:1e3*Rt/("screenSpeed"in i?+i.screenSpeed/ue:+i.speed),i.maxDuration&&i.duration>i.maxDuration&&(i.duration=0),this._zooming=!0,this._rotating=x!==R,this._pitching=L!==T,this._padding=!p.isPaddingEqual(z),this._prepareEase(u,!1),this.terrain&&this._prepareElevation(ee),this._ease(xt=>{const hn=xt*Rt,qt=1/Zt(hn);p.zoom=xt===1?k:g+p.scaleZoom(qt),this._rotating&&(p.bearing=o.B.number(x,R,xt)),this._pitching&&(p.pitch=o.B.number(T,L,xt)),this._padding&&(p.interpolatePadding(E,z,xt),ne=p.centerPoint.add(re)),this.terrain&&!i.freezeElevation&&this._updateElevation(xt);const Vt=xt===1?ee:p.unproject(ve.add(Ce.mult(rt(hn))).mult(qt));p.setLocationAtPoint(p.renderWorldCopies?Vt.wrap():Vt,ne),this._applyUpdatedTransform(p),this._fireMoveEvents(u)},()=>{this.terrain&&this._finalizeElevation(),this._afterEase(u)},i),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(i,u){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const p=this._onEaseEnd;delete this._onEaseEnd,p.call(this,u)}if(!i){const p=this.handlers;p&&p.stop(!1)}return this}_ease(i,u,p){p.animate===!1||p.duration===0?(i(1),u()):(this._easeStart=o.h.now(),this._easeOptions=p,this._onEaseFrame=i,this._onEaseEnd=u,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(i,u){i=o.b5(i,-180,180);const p=Math.abs(i-u);return Math.abs(i-360-u)<p&&(i-=360),Math.abs(i+360-u)<p&&(i+=360),i}_normalizeCenter(i){const u=this.transform;if(!u.renderWorldCopies||u.lngRange)return;const p=i.lng-u.center.lng;i.lng+=p>180?-360:p<-180?360:0}queryTerrainElevation(i){return this.terrain?this.terrain.getElevationForLngLatZoom(o.L.convert(i),this.transform.tileZoom)-this.transform.elevation:null}}class Ti{constructor(i={}){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=u=>{!u||u.sourceDataType!=="metadata"&&u.sourceDataType!=="visibility"&&u.dataType!=="style"&&u.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=i}getDefaultPosition(){return"bottom-right"}onAdd(i){return this._map=i,this._compact=this.options&&this.options.compact,this._container=b.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=b.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=b.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){b.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(i,u){const p=this._map._getUIString(`AttributionControl.${u}`);i.title=p,i.setAttribute("aria-label",p)}_updateAttributions(){if(!this._map.style)return;let i=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?i=i.concat(this.options.customAttribution.map(g=>typeof g!="string"?"":g)):typeof this.options.customAttribution=="string"&&i.push(this.options.customAttribution)),this._map.style.stylesheet){const g=this._map.style.stylesheet;this.styleOwner=g.owner,this.styleId=g.id}const u=this._map.style.sourceCaches;for(const g in u){const x=u[g];if(x.used||x.usedForTerrain){const T=x.getSource();T.attribution&&i.indexOf(T.attribution)<0&&i.push(T.attribution)}}i=i.filter(g=>String(g).trim()),i.sort((g,x)=>g.length-x.length),i=i.filter((g,x)=>{for(let T=x+1;T<i.length;T++)if(i[T].indexOf(g)>=0)return!1;return!0});const p=i.join(" | ");p!==this._attribHTML&&(this._attribHTML=p,i.length?(this._innerContainer.innerHTML=p,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class vn{constructor(i={}){this._updateCompact=()=>{const u=this._container.children;if(u.length){const p=u[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&p.classList.add("maplibregl-compact"):p.classList.remove("maplibregl-compact")}},this.options=i}getDefaultPosition(){return"bottom-left"}onAdd(i){this._map=i,this._compact=this.options&&this.options.compact,this._container=b.create("div","maplibregl-ctrl");const u=b.create("a","maplibregl-ctrl-logo");return u.target="_blank",u.rel="noopener nofollow",u.href="https://maplibre.org/",u.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),u.setAttribute("rel","noopener nofollow"),this._container.appendChild(u),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){b.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Uu{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(i){const u=++this._id;return this._queue.push({callback:i,id:u,cancelled:!1}),u}remove(i){const u=this._currentlyRunning,p=u?this._queue.concat(u):this._queue;for(const g of p)if(g.id===i)return void(g.cancelled=!0)}run(i=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const u=this._currentlyRunning=this._queue;this._queue=[];for(const p of u)if(!p.cancelled&&(p.callback(i),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const Jd={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"};var Km=o.Q([{name:"a_pos3d",type:"Int16",components:3}]);class Xm extends o.E{constructor(i){super(),this.sourceCache=i,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,i.usedForTerrain=!0,i.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(i,u){this.sourceCache.update(i,u),this._renderableTilesKeys=[];const p={};for(const g of i.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:u}))p[g.key]=!0,this._renderableTilesKeys.push(g.key),this._tiles[g.key]||(g.posMatrix=new Float64Array(16),o.aS(g.posMatrix,0,o.N,0,o.N,0,1),this._tiles[g.key]=new ye(g,this.tileSize));for(const g in this._tiles)p[g]||delete this._tiles[g]}freeRtt(i){for(const u in this._tiles){const p=this._tiles[u];(!i||p.tileID.equals(i)||p.tileID.isChildOf(i)||i.isChildOf(p.tileID))&&(p.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(i=>this.getTileByID(i))}getTileByID(i){return this._tiles[i]}getTerrainCoords(i){const u={};for(const p of this._renderableTilesKeys){const g=this._tiles[p].tileID;if(g.canonical.equals(i.canonical)){const x=i.clone();x.posMatrix=new Float64Array(16),o.aS(x.posMatrix,0,o.N,0,o.N,0,1),u[p]=x}else if(g.canonical.isChildOf(i.canonical)){const x=i.clone();x.posMatrix=new Float64Array(16);const T=g.canonical.z-i.canonical.z,E=g.canonical.x-(g.canonical.x>>T<<T),k=g.canonical.y-(g.canonical.y>>T<<T),R=o.N>>T;o.aS(x.posMatrix,0,R,0,R,0,1),o.$(x.posMatrix,x.posMatrix,[-E*R,-k*R,0]),u[p]=x}else if(i.canonical.isChildOf(g.canonical)){const x=i.clone();x.posMatrix=new Float64Array(16);const T=i.canonical.z-g.canonical.z,E=i.canonical.x-(i.canonical.x>>T<<T),k=i.canonical.y-(i.canonical.y>>T<<T),R=o.N>>T;o.aS(x.posMatrix,0,o.N,0,o.N,0,1),o.$(x.posMatrix,x.posMatrix,[E*R,k*R,0]),o.a0(x.posMatrix,x.posMatrix,[1/2**T,1/2**T,0]),u[p]=x}}return u}getSourceTile(i,u){const p=this.sourceCache._source;let g=i.overscaledZ-this.deltaZoom;if(g>p.maxzoom&&(g=p.maxzoom),g<p.minzoom)return null;this._sourceTileCache[i.key]||(this._sourceTileCache[i.key]=i.scaledTo(g).key);let x=this.sourceCache.getTileByID(this._sourceTileCache[i.key]);if((!x||!x.dem)&&u)for(;g>=p.minzoom&&(!x||!x.dem);)x=this.sourceCache.getTileByID(i.scaledTo(g--).key);return x}tilesAfterTime(i=Date.now()){return Object.values(this._tiles).filter(u=>u.timeAdded>=i)}}class Qm{constructor(i,u,p){this.painter=i,this.sourceCache=new Xm(u),this.options=p,this.exaggeration=typeof p.exaggeration=="number"?p.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(i,u,p,g=o.N){var x;if(!(u>=0&&u<g&&p>=0&&p<g))return 0;const T=this.getTerrainData(i),E=(x=T.tile)===null||x===void 0?void 0:x.dem;if(!E)return 0;const k=function(ne,se,ee){var ve=se[0],Ce=se[1];return ne[0]=ee[0]*ve+ee[4]*Ce+ee[12],ne[1]=ee[1]*ve+ee[5]*Ce+ee[13],ne}([],[u/g*o.N,p/g*o.N],T.u_terrain_matrix),R=[k[0]*E.dim,k[1]*E.dim],L=Math.floor(R[0]),z=Math.floor(R[1]),G=R[0]-L,re=R[1]-z;return E.get(L,z)*(1-G)*(1-re)+E.get(L+1,z)*G*(1-re)+E.get(L,z+1)*(1-G)*re+E.get(L+1,z+1)*G*re}getElevationForLngLatZoom(i,u){const{tileID:p,mercatorX:g,mercatorY:x}=this._getOverscaledTileIDFromLngLatZoom(i,u);return this.getElevation(p,g%o.N,x%o.N,o.N)}getElevation(i,u,p,g=o.N){return this.getDEMElevation(i,u,p,g)*this.exaggeration}getTerrainData(i){if(!this._emptyDemTexture){const g=this.painter.context,x=new o.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new ke(g,x,g.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new ke(g,new o.R({width:1,height:1}),g.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(g.gl.NEAREST,g.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=o.ao([])}const u=this.sourceCache.getSourceTile(i,!0);if(u&&u.dem&&(!u.demTexture||u.needsTerrainPrepare)){const g=this.painter.context;u.demTexture=this.painter.getTileTexture(u.dem.stride),u.demTexture?u.demTexture.update(u.dem.getPixels(),{premultiply:!1}):u.demTexture=new ke(g,u.dem.getPixels(),g.gl.RGBA,{premultiply:!1}),u.demTexture.bind(g.gl.NEAREST,g.gl.CLAMP_TO_EDGE),u.needsTerrainPrepare=!1}const p=u&&u+u.tileID.key+i.key;if(p&&!this._demMatrixCache[p]){const g=this.sourceCache.sourceCache._source.maxzoom;let x=i.canonical.z-u.tileID.canonical.z;i.overscaledZ>i.canonical.z&&(i.canonical.z>=g?x=i.canonical.z-g:o.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const T=i.canonical.x-(i.canonical.x>>x<<x),E=i.canonical.y-(i.canonical.y>>x<<x),k=o.bc(new Float64Array(16),[1/(o.N<<x),1/(o.N<<x),0]);o.$(k,k,[T*o.N,E*o.N,0]),this._demMatrixCache[i.key]={matrix:k,coord:i}}return{u_depth:2,u_terrain:3,u_terrain_dim:u&&u.dem&&u.dem.dim||1,u_terrain_matrix:p?this._demMatrixCache[i.key].matrix:this._emptyDemMatrix,u_terrain_unpack:u&&u.dem&&u.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(u&&u.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:u}}getFramebuffer(i){const u=this.painter,p=u.width/devicePixelRatio,g=u.height/devicePixelRatio;return!this._fbo||this._fbo.width===p&&this._fbo.height===g||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new ke(u.context,{width:p,height:g,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new ke(u.context,{width:p,height:g,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=u.context.createFramebuffer(p,g,!0,!1),this._fbo.depthAttachment.set(u.context.createRenderbuffer(u.context.gl.DEPTH_COMPONENT16,p,g))),this._fbo.colorAttachment.set(i==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const i=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const u=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let x=0,T=0;x<this._coordsTextureSize;x++)for(let E=0;E<this._coordsTextureSize;E++,T+=4)u[T+0]=255&E,u[T+1]=255&x,u[T+2]=E>>8<<4|x>>8,u[T+3]=0;const p=new o.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(u.buffer)),g=new ke(i,p,i.gl.RGBA,{premultiply:!1});return g.bind(i.gl.NEAREST,i.gl.CLAMP_TO_EDGE),this._coordsTexture=g,g}pointCoordinate(i){const u=new Uint8Array(4),p=this.painter.context,g=p.gl;p.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),g.readPixels(i.x,this.painter.height/devicePixelRatio-i.y-1,1,1,g.RGBA,g.UNSIGNED_BYTE,u),p.bindFramebuffer.set(null);const x=u[0]+(u[2]>>4<<8),T=u[1]+((15&u[2])<<8),E=this.coordsIndex[255-u[3]],k=E&&this.sourceCache.getTileByID(E);if(!k)return null;const R=this._coordsTextureSize,L=(1<<k.tileID.canonical.z)*R;return new o.U(this._allowMercatorOverflow(i,(k.tileID.canonical.x*R+x)/L),(k.tileID.canonical.y*R+T)/L,this.getElevation(k.tileID,x,T,R))}getTerrainMesh(){if(this._mesh)return this._mesh;const i=this.painter.context,u=new o.bd,p=new o.b0,g=this.meshSize,x=o.N/g,T=g*g;for(let z=0;z<=g;z++)for(let G=0;G<=g;G++)u.emplaceBack(G*x,z*x,0);for(let z=0;z<T;z+=g+1)for(let G=0;G<g;G++)p.emplaceBack(G+z,g+G+z+1,g+G+z+2),p.emplaceBack(G+z,g+G+z+2,G+z+1);const E=u.length,k=E+2*(g+1);for(const z of[0,1])for(let G=0;G<=g;G++)for(const re of[0,1])u.emplaceBack(G*x,z*o.N,re);for(let z=0;z<2*g;z+=2)p.emplaceBack(k+z,k+z+1,k+z+3),p.emplaceBack(k+z,k+z+3,k+z+2),p.emplaceBack(E+z,E+z+3,E+z+1),p.emplaceBack(E+z,E+z+2,E+z+3);const R=u.length,L=R+2*(g+1);for(const z of[0,1])for(let G=0;G<=g;G++)for(const re of[0,1])u.emplaceBack(z*o.N,G*x,re);for(let z=0;z<2*g;z+=2)p.emplaceBack(R+z,R+z+1,R+z+3),p.emplaceBack(R+z,R+z+3,R+z+2),p.emplaceBack(L+z,L+z+3,L+z+1),p.emplaceBack(L+z,L+z+2,L+z+3);return this._mesh={indexBuffer:i.createIndexBuffer(p),vertexBuffer:i.createVertexBuffer(u,Km.members),segments:o.S.simpleSegment(0,0,u.length,p.length)},this._mesh}getMeshFrameDelta(i){return 2*Math.PI*o.be/Math.pow(2,i)/5}getMinTileElevationForLngLatZoom(i,u){var p;const{tileID:g}=this._getOverscaledTileIDFromLngLatZoom(i,u);return(p=this.getMinMaxElevation(g).minElevation)!==null&&p!==void 0?p:0}getMinMaxElevation(i){const u=this.getTerrainData(i).tile,p={minElevation:null,maxElevation:null};return u&&u.dem&&(p.minElevation=u.dem.min*this.exaggeration,p.maxElevation=u.dem.max*this.exaggeration),p}_getOverscaledTileIDFromLngLatZoom(i,u){const p=o.U.fromLngLat(i.wrap()),g=(1<<u)*o.N,x=p.x*g,T=p.y*g,E=Math.floor(x/o.N),k=Math.floor(T/o.N);return{tileID:new o.O(u,0,u,E,k),mercatorX:x,mercatorY:T}}_allowMercatorOverflow(i,u){const p=i.x<this.painter.width/2;let g=o.bf(u);const x=this.painter.transform.center.lng;return p&&Math.sign(g)>0&&Math.sign(x)<0||!p&&Math.sign(g)<0&&Math.sign(x)>0?(g=360*Math.sign(x)+g,o.G(g)):u}}class Ux{constructor(i,u,p){this._context=i,this._size=u,this._tileSize=p,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const i of this._objects)i.texture.destroy(),i.fbo.destroy()}_createObject(i){const u=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),p=new ke(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return p.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),u.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),u.colorAttachment.set(p.texture),{id:i,fbo:u,texture:p,stamp:-1,inUse:!1}}getObjectForId(i){return this._objects[i]}useObject(i){i.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(u=>i.id!==u),this._recentlyUsed.push(i.id)}stampObject(i){i.stamp=++this._stamp}getOrCreateFreeObject(){for(const u of this._recentlyUsed)if(!this._objects[u].inUse)return this._objects[u];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const i=this._createObject(this._objects.length);return this._objects.push(i),i}freeObject(i){i.inUse=!1}freeAllObjects(){for(const i of this._objects)this.freeObject(i)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(i=>!i.inUse)===!1}}const Vr={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class qu{constructor(i,u){this.painter=i,this.terrain=u,this.pool=new Ux(i.context,30,u.sourceCache.tileSize*u.qualityFactor)}destruct(){this.pool.destruct()}getTexture(i){return this.pool.getObjectForId(i.rtt[this._stacks.length-1].id).texture}prepareForRender(i,u){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=i._order.filter(p=>!i._layers[p].isHidden(u)),this._coordsDescendingInv={};for(const p in i.sourceCaches){this._coordsDescendingInv[p]={};const g=i.sourceCaches[p].getVisibleCoordinates();for(const x of g){const T=this.terrain.sourceCache.getTerrainCoords(x);for(const E in T)this._coordsDescendingInv[p][E]||(this._coordsDescendingInv[p][E]=[]),this._coordsDescendingInv[p][E].push(T[E])}}this._coordsDescendingInvStr={};for(const p of i._order){const g=i._layers[p],x=g.source;if(Vr[g.type]&&!this._coordsDescendingInvStr[x]){this._coordsDescendingInvStr[x]={};for(const T in this._coordsDescendingInv[x])this._coordsDescendingInvStr[x][T]=this._coordsDescendingInv[x][T].map(E=>E.key).sort().join()}}for(const p of this._renderableTiles)for(const g in this._coordsDescendingInvStr){const x=this._coordsDescendingInvStr[g][p.tileID.key];x&&x!==p.rttCoords[g]&&(p.rtt=[])}}renderLayer(i){if(i.isHidden(this.painter.transform.zoom))return!1;const u=i.type,p=this.painter,g=this._renderableLayerIds[this._renderableLayerIds.length-1]===i.id;if(Vr[u]&&(this._prevType&&Vr[this._prevType]||this._stacks.push([]),this._prevType=u,this._stacks[this._stacks.length-1].push(i.id),!g))return!0;if(Vr[this._prevType]||Vr[u]&&g){this._prevType=u;const x=this._stacks.length-1,T=this._stacks[x]||[];for(const E of this._renderableTiles){if(this.pool.isFull()&&(zn(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(E),E.rtt[x]){const R=this.pool.getObjectForId(E.rtt[x].id);if(R.stamp===E.rtt[x].stamp){this.pool.useObject(R);continue}}const k=this.pool.getOrCreateFreeObject();this.pool.useObject(k),this.pool.stampObject(k),E.rtt[x]={id:k.id,stamp:k.stamp},p.context.bindFramebuffer.set(k.fbo.framebuffer),p.context.clear({color:o.aT.transparent,stencil:0}),p.currentStencilSource=void 0;for(let R=0;R<T.length;R++){const L=p.style._layers[T[R]],z=L.source?this._coordsDescendingInv[L.source][E.tileID.key]:[E.tileID];p.context.viewport.set([0,0,k.fbo.width,k.fbo.height]),p._renderTileClippingMasks(L,z),p.renderLayer(p,p.style.sourceCaches[L.source],L,z),L.source&&(E.rttCoords[L.source]=this._coordsDescendingInvStr[L.source][E.tileID.key])}}return zn(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),Vr[u]}return!1}}const St=w,Mt={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:o.c.MAX_TILE_CACHE_ZOOM_LEVELS,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0,maxCanvasSize:[4096,4096]},bc=y=>{y.touchstart=y.dragStart,y.touchmoveWindow=y.dragMove,y.touchend=y.dragEnd},ef={showCompass:!0,showZoom:!0,visualizePitch:!1};class tf{constructor(i,u,p=!1){this.mousedown=T=>{this.startMouse(o.e({},T,{ctrlKey:!0,preventDefault:()=>T.preventDefault()}),b.mousePos(this.element,T)),b.addEventListener(window,"mousemove",this.mousemove),b.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=T=>{this.moveMouse(T,b.mousePos(this.element,T))},this.mouseup=T=>{this.mouseRotate.dragEnd(T),this.mousePitch&&this.mousePitch.dragEnd(T),this.offTemp()},this.touchstart=T=>{T.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=b.touchPos(this.element,T.targetTouches)[0],this.startTouch(T,this._startPos),b.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),b.addEventListener(window,"touchend",this.touchend))},this.touchmove=T=>{T.targetTouches.length!==1?this.reset():(this._lastPos=b.touchPos(this.element,T.targetTouches)[0],this.moveTouch(T,this._lastPos))},this.touchend=T=>{T.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const g=i.dragRotate._mouseRotate.getClickTolerance(),x=i.dragRotate._mousePitch.getClickTolerance();this.element=u,this.mouseRotate=el({clickTolerance:g,enable:!0}),this.touchRotate=(({enable:T,clickTolerance:E,bearingDegreesPerPixelMoved:k=.8})=>{const R=new Um;return new Js({clickTolerance:E,move:(L,z)=>({bearingDelta:(z.x-L.x)*k}),moveStateManager:R,enable:T,assignEvents:bc})})({clickTolerance:g,enable:!0}),this.map=i,p&&(this.mousePitch=ea({clickTolerance:x,enable:!0}),this.touchPitch=(({enable:T,clickTolerance:E,pitchDegreesPerPixelMoved:k=-.5})=>{const R=new Um;return new Js({clickTolerance:E,move:(L,z)=>({pitchDelta:(z.y-L.y)*k}),moveStateManager:R,enable:T,assignEvents:bc})})({clickTolerance:x,enable:!0})),b.addEventListener(u,"mousedown",this.mousedown),b.addEventListener(u,"touchstart",this.touchstart,{passive:!1}),b.addEventListener(u,"touchcancel",this.reset)}startMouse(i,u){this.mouseRotate.dragStart(i,u),this.mousePitch&&this.mousePitch.dragStart(i,u),b.disableDrag()}startTouch(i,u){this.touchRotate.dragStart(i,u),this.touchPitch&&this.touchPitch.dragStart(i,u),b.disableDrag()}moveMouse(i,u){const p=this.map,{bearingDelta:g}=this.mouseRotate.dragMove(i,u)||{};if(g&&p.setBearing(p.getBearing()+g),this.mousePitch){const{pitchDelta:x}=this.mousePitch.dragMove(i,u)||{};x&&p.setPitch(p.getPitch()+x)}}moveTouch(i,u){const p=this.map,{bearingDelta:g}=this.touchRotate.dragMove(i,u)||{};if(g&&p.setBearing(p.getBearing()+g),this.touchPitch){const{pitchDelta:x}=this.touchPitch.dragMove(i,u)||{};x&&p.setPitch(p.getPitch()+x)}}off(){const i=this.element;b.removeEventListener(i,"mousedown",this.mousedown),b.removeEventListener(i,"touchstart",this.touchstart,{passive:!1}),b.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),b.removeEventListener(window,"touchend",this.touchend),b.removeEventListener(i,"touchcancel",this.reset),this.offTemp()}offTemp(){b.enableDrag(),b.removeEventListener(window,"mousemove",this.mousemove),b.removeEventListener(window,"mouseup",this.mouseup),b.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),b.removeEventListener(window,"touchend",this.touchend)}}let Zn;function nf(y,i,u){if(y=new o.L(y.lng,y.lat),i){const p=new o.L(y.lng-360,y.lat),g=new o.L(y.lng+360,y.lat),x=u.locationPoint(y).distSqr(i);u.locationPoint(p).distSqr(i)<x?y=p:u.locationPoint(g).distSqr(i)<x&&(y=g)}for(;Math.abs(y.lng-u.center.lng)>180;){const p=u.locationPoint(y);if(p.x>=0&&p.y>=0&&p.x<=u.width&&p.y<=u.height)break;y.lng>u.center.lng?y.lng-=360:y.lng+=360}return y}const Wi={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Ym(y,i,u){const p=y.classList;for(const g in Wi)p.remove(`maplibregl-${u}-anchor-${g}`);p.add(`maplibregl-${u}-anchor-${i}`)}class ro extends o.E{constructor(i){if(super(),this._onKeyPress=u=>{const p=u.code,g=u.charCode||u.keyCode;p!=="Space"&&p!=="Enter"&&g!==32&&g!==13||this.togglePopup()},this._onMapClick=u=>{const p=u.originalEvent.target,g=this._element;this._popup&&(p===g||g.contains(p))&&this.togglePopup()},this._update=u=>{if(!this._map)return;const p=this._map.loaded()&&!this._map.isMoving();((u==null?void 0:u.type)==="terrain"||(u==null?void 0:u.type)==="render"&&!p)&&this._map.once("render",this._update),this._map.transform.renderWorldCopies&&(this._lngLat=nf(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let g="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?g=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(g=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let x="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?x="rotateX(0deg)":this._pitchAlignment==="map"&&(x=`rotateX(${this._map.getPitch()}deg)`),u&&u.type!=="moveend"||(this._pos=this._pos.round()),b.setTransform(this._element,`${Wi[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${x} ${g}`),this._map.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const T=this._map.unproject(this._pos),E=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=T.distanceTo(this._lngLat)>20*E?"0.2":"1.0",this._opacityTimeout=null},100))},this._onMove=u=>{if(!this._isDragging){const p=this._clickTolerance||this._map._clickTolerance;this._isDragging=u.point.dist(this._pointerdownPos)>=p}this._isDragging&&(this._pos=u.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new o.k("dragstart"))),this.fire(new o.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new o.k("dragend")),this._state="inactive"},this._addDragHandler=u=>{this._element.contains(u.originalEvent.target)&&(u.preventDefault(),this._positionDelta=u.point.sub(this._pos).add(this._offset),this._pointerdownPos=u.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=i&&i.anchor||"center",this._color=i&&i.color||"#3FB1CE",this._scale=i&&i.scale||1,this._draggable=i&&i.draggable||!1,this._clickTolerance=i&&i.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=i&&i.rotation||0,this._rotationAlignment=i&&i.rotationAlignment||"auto",this._pitchAlignment=i&&i.pitchAlignment&&i.pitchAlignment!=="auto"?i.pitchAlignment:this._rotationAlignment,i&&i.element)this._element=i.element,this._offset=o.P.convert(i&&i.offset||[0,0]);else{this._defaultMarker=!0,this._element=b.create("div"),this._element.setAttribute("aria-label","Map marker");const u=b.createNS("http://www.w3.org/2000/svg","svg"),p=41,g=27;u.setAttributeNS(null,"display","block"),u.setAttributeNS(null,"height",`${p}px`),u.setAttributeNS(null,"width",`${g}px`),u.setAttributeNS(null,"viewBox",`0 0 ${g} ${p}`);const x=b.createNS("http://www.w3.org/2000/svg","g");x.setAttributeNS(null,"stroke","none"),x.setAttributeNS(null,"stroke-width","1"),x.setAttributeNS(null,"fill","none"),x.setAttributeNS(null,"fill-rule","evenodd");const T=b.createNS("http://www.w3.org/2000/svg","g");T.setAttributeNS(null,"fill-rule","nonzero");const E=b.createNS("http://www.w3.org/2000/svg","g");E.setAttributeNS(null,"transform","translate(3.0, 29.0)"),E.setAttributeNS(null,"fill","#000000");const k=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const ve of k){const Ce=b.createNS("http://www.w3.org/2000/svg","ellipse");Ce.setAttributeNS(null,"opacity","0.04"),Ce.setAttributeNS(null,"cx","10.5"),Ce.setAttributeNS(null,"cy","5.80029008"),Ce.setAttributeNS(null,"rx",ve.rx),Ce.setAttributeNS(null,"ry",ve.ry),E.appendChild(Ce)}const R=b.createNS("http://www.w3.org/2000/svg","g");R.setAttributeNS(null,"fill",this._color);const L=b.createNS("http://www.w3.org/2000/svg","path");L.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),R.appendChild(L);const z=b.createNS("http://www.w3.org/2000/svg","g");z.setAttributeNS(null,"opacity","0.25"),z.setAttributeNS(null,"fill","#000000");const G=b.createNS("http://www.w3.org/2000/svg","path");G.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),z.appendChild(G);const re=b.createNS("http://www.w3.org/2000/svg","g");re.setAttributeNS(null,"transform","translate(6.0, 7.0)"),re.setAttributeNS(null,"fill","#FFFFFF");const ne=b.createNS("http://www.w3.org/2000/svg","g");ne.setAttributeNS(null,"transform","translate(8.0, 8.0)");const se=b.createNS("http://www.w3.org/2000/svg","circle");se.setAttributeNS(null,"fill","#000000"),se.setAttributeNS(null,"opacity","0.25"),se.setAttributeNS(null,"cx","5.5"),se.setAttributeNS(null,"cy","5.5"),se.setAttributeNS(null,"r","5.4999962");const ee=b.createNS("http://www.w3.org/2000/svg","circle");ee.setAttributeNS(null,"fill","#FFFFFF"),ee.setAttributeNS(null,"cx","5.5"),ee.setAttributeNS(null,"cy","5.5"),ee.setAttributeNS(null,"r","5.4999962"),ne.appendChild(se),ne.appendChild(ee),T.appendChild(E),T.appendChild(R),T.appendChild(z),T.appendChild(re),T.appendChild(ne),u.appendChild(T),u.setAttributeNS(null,"height",p*this._scale+"px"),u.setAttributeNS(null,"width",g*this._scale+"px"),this._element.appendChild(u),this._offset=o.P.convert(i&&i.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",u=>{u.preventDefault()}),this._element.addEventListener("mousedown",u=>{u.preventDefault()}),Ym(this._element,this._anchor,"marker"),i&&i.className)for(const u of i.className.split(" "))this._element.classList.add(u);this._popup=null}addTo(i){return this.remove(),this._map=i,i.getCanvasContainer().appendChild(this._element),i.on("move",this._update),i.on("moveend",this._update),i.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),b.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(i){return this._lngLat=o.L.convert(i),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(i){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),i){if(!("offset"in i.options)){const g=Math.abs(13.5)/Math.SQRT2;i.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[g,-1*(38.1-13.5+g)],"bottom-right":[-g,-1*(38.1-13.5+g)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=i,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){const i=this._popup;return i?(i.isOpen()?i.remove():i.addTo(this._map),this):this}getOffset(){return this._offset}setOffset(i){return this._offset=o.P.convert(i),this._update(),this}addClassName(i){this._element.classList.add(i)}removeClassName(i){this._element.classList.remove(i)}toggleClassName(i){return this._element.classList.toggle(i)}setDraggable(i){return this._draggable=!!i,this._map&&(i?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(i){return this._rotation=i||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(i){return this._rotationAlignment=i||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(i){return this._pitchAlignment=i&&i!=="auto"?i:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const On={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Mn=0,nl=!1;const Sc={maxWidth:100,unit:"metric"};function Tc(y,i,u){const p=u&&u.maxWidth||100,g=y._container.clientHeight/2,x=y.unproject([0,g]),T=y.unproject([p,g]),E=x.distanceTo(T);if(u&&u.unit==="imperial"){const k=3.2808*E;k>5280?io(i,p,k/5280,y._getUIString("ScaleControl.Miles")):io(i,p,k,y._getUIString("ScaleControl.Feet"))}else u&&u.unit==="nautical"?io(i,p,E/1852,y._getUIString("ScaleControl.NauticalMiles")):E>=1e3?io(i,p,E/1e3,y._getUIString("ScaleControl.Kilometers")):io(i,p,E,y._getUIString("ScaleControl.Meters"))}function io(y,i,u,p){const g=function(x){const T=Math.pow(10,`${Math.floor(x)}`.length-1);let E=x/T;return E=E>=10?10:E>=5?5:E>=3?3:E>=2?2:E>=1?1:function(k){const R=Math.pow(10,Math.ceil(-Math.log(k)/Math.LN10));return Math.round(k*R)/R}(E),T*E}(u);y.style.width=i*(g/u)+"px",y.innerHTML=`${g}&nbsp;${p}`}const rf={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},sf=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function rl(y){if(y){if(typeof y=="number"){const i=Math.round(Math.abs(y)/Math.SQRT2);return{center:new o.P(0,0),top:new o.P(0,y),"top-left":new o.P(i,i),"top-right":new o.P(-i,i),bottom:new o.P(0,-y),"bottom-left":new o.P(i,-i),"bottom-right":new o.P(-i,-i),left:new o.P(y,0),right:new o.P(-y,0)}}if(y instanceof o.P||Array.isArray(y)){const i=o.P.convert(y);return{center:i,top:i,"top-left":i,"top-right":i,bottom:i,"bottom-left":i,"bottom-right":i,left:i,right:i}}return{center:o.P.convert(y.center||[0,0]),top:o.P.convert(y.top||[0,0]),"top-left":o.P.convert(y["top-left"]||[0,0]),"top-right":o.P.convert(y["top-right"]||[0,0]),bottom:o.P.convert(y.bottom||[0,0]),"bottom-left":o.P.convert(y["bottom-left"]||[0,0]),"bottom-right":o.P.convert(y["bottom-right"]||[0,0]),left:o.P.convert(y.left||[0,0]),right:o.P.convert(y.right||[0,0])}}return rl(new o.P(0,0))}const af={extend:(y,...i)=>o.e(y,...i),run(y){y()},logToElement(y,i=!1,u="log"){const p=window.document.getElementById(u);p&&(i&&(p.innerHTML=""),p.innerHTML+=`<br>${y}`)}},of=w;class sn{static get version(){return of}static get workerCount(){return Gt.workerCount}static set workerCount(i){Gt.workerCount=i}static get maxParallelImageRequests(){return o.c.MAX_PARALLEL_IMAGE_REQUESTS}static set maxParallelImageRequests(i){o.c.MAX_PARALLEL_IMAGE_REQUESTS=i}static get workerUrl(){return o.c.WORKER_URL}static set workerUrl(i){o.c.WORKER_URL=i}static addProtocol(i,u){o.c.REGISTERED_PROTOCOLS[i]=u}static removeProtocol(i){delete o.c.REGISTERED_PROTOCOLS[i]}}return sn.Map=class extends Hm{constructor(y){if(o.bg.mark(o.bh.create),(y=o.e({},Mt,y)).minZoom!=null&&y.maxZoom!=null&&y.minZoom>y.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(y.minPitch!=null&&y.maxPitch!=null&&y.minPitch>y.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(y.minPitch!=null&&y.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(y.maxPitch!=null&&y.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Bu(y.minZoom,y.maxZoom,y.minPitch,y.maxPitch,y.renderWorldCopies),{bearingSnap:y.bearingSnap}),this._cooperativeGesturesOnWheel=i=>{this._onCooperativeGesture(i,i[this._metaKey],1)},this._contextLost=i=>{i.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new o.k("webglcontextlost",{originalEvent:i}))},this._contextRestored=i=>{this._setupPainter(),this.resize(),this._update(),this.fire(new o.k("webglcontextrestored",{originalEvent:i}))},this._onMapScroll=i=>{if(i.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=y.interactive,this._cooperativeGestures=y.cooperativeGestures,this._metaKey=navigator.platform.indexOf("Mac")===0?"metaKey":"ctrlKey",this._maxTileCacheSize=y.maxTileCacheSize,this._maxTileCacheZoomLevels=y.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=y.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=y.preserveDrawingBuffer,this._antialias=y.antialias,this._trackResize=y.trackResize,this._bearingSnap=y.bearingSnap,this._refreshExpiredTiles=y.refreshExpiredTiles,this._fadeDuration=y.fadeDuration,this._crossSourceCollisions=y.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=y.collectResourceTiming,this._renderTaskQueue=new Uu,this._controls=[],this._mapId=o.a2(),this._locale=o.e({},Jd,y.locale),this._clickTolerance=y.clickTolerance,this._overridePixelRatio=y.pixelRatio,this._maxCanvasSize=y.maxCanvasSize,this.transformCameraUpdate=y.transformCameraUpdate,this._imageQueueHandle=Z.addThrottleControl(()=>this.isMoving()),this._requestManager=new F(y.transformRequest),typeof y.container=="string"){if(this._container=document.getElementById(y.container),!this._container)throw new Error(`Container '${y.container}' not found.`)}else{if(!(y.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=y.container}if(y.maxBounds&&this.setMaxBounds(y.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let i=!1;const u=no(p=>{this._trackResize&&!this._removed&&this.resize(p)._update()},50);this._resizeObserver=new ResizeObserver(p=>{i?u(p):i=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Yd(this,y),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=y.hash&&new yc(typeof y.hash=="string"&&y.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:y.center,zoom:y.zoom,bearing:y.bearing,pitch:y.pitch}),y.bounds&&(this.resize(),this.fitBounds(y.bounds,o.e({},y.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=y.localIdeographFontFamily,this._validateStyle=y.validateStyle,y.style&&this.setStyle(y.style,{localIdeographFontFamily:y.localIdeographFontFamily}),y.attributionControl&&this.addControl(new Ti({customAttribution:y.customAttribution})),y.maplibreLogo&&this.addControl(new vn,y.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",i=>{this._update(i.dataType==="style"),this.fire(new o.k(`${i.dataType}data`,i))}),this.on("dataloading",i=>{this.fire(new o.k(`${i.dataType}dataloading`,i))}),this.on("dataabort",i=>{this.fire(new o.k("sourcedataabort",i))})}_getMapId(){return this._mapId}addControl(y,i){if(i===void 0&&(i=y.getDefaultPosition?y.getDefaultPosition():"top-right"),!y||!y.onAdd)return this.fire(new o.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const u=y.onAdd(this);this._controls.push(y);const p=this._controlPositions[i];return i.indexOf("bottom")!==-1?p.insertBefore(u,p.firstChild):p.appendChild(u),this}removeControl(y){if(!y||!y.onRemove)return this.fire(new o.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const i=this._controls.indexOf(y);return i>-1&&this._controls.splice(i,1),y.onRemove(this),this}hasControl(y){return this._controls.indexOf(y)>-1}calculateCameraOptionsFromTo(y,i,u,p){return p==null&&this.terrain&&(p=this.terrain.getElevationForLngLatZoom(u,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(y,i,u,p)}resize(y){var i;const u=this._containerDimensions(),p=u[0],g=u[1],x=this._getClampedPixelRatio(p,g);if(this._resizeCanvas(p,g,x),this.painter.resize(p,g,x),this.painter.overLimit()){const E=this.painter.context.gl;this._maxCanvasSize=[E.drawingBufferWidth,E.drawingBufferHeight];const k=this._getClampedPixelRatio(p,g);this._resizeCanvas(p,g,k),this.painter.resize(p,g,k)}this.transform.resize(p,g),(i=this._requestedCameraState)===null||i===void 0||i.resize(p,g);const T=!this._moving;return T&&(this.stop(),this.fire(new o.k("movestart",y)).fire(new o.k("move",y))),this.fire(new o.k("resize",y)),T&&this.fire(new o.k("moveend",y)),this}_getClampedPixelRatio(y,i){const{0:u,1:p}=this._maxCanvasSize,g=this.getPixelRatio(),x=y*g,T=i*g;return Math.min(x>u?u/x:1,T>p?p/T:1)*g}getPixelRatio(){var y;return(y=this._overridePixelRatio)!==null&&y!==void 0?y:devicePixelRatio}setPixelRatio(y){this._overridePixelRatio=y,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(y){return this.transform.setMaxBounds(Dt.convert(y)),this._update()}setMinZoom(y){if((y=y??-2)>=-2&&y<=this.transform.maxZoom)return this.transform.minZoom=y,this._update(),this.getZoom()<y&&this.setZoom(y),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(y){if((y=y??22)>=this.transform.minZoom)return this.transform.maxZoom=y,this._update(),this.getZoom()>y&&this.setZoom(y),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(y){if((y=y??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(y>=0&&y<=this.transform.maxPitch)return this.transform.minPitch=y,this._update(),this.getPitch()<y&&this.setPitch(y),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(y){if((y=y??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(y>=this.transform.minPitch)return this.transform.maxPitch=y,this._update(),this.getPitch()>y&&this.setPitch(y),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(y){return this.transform.renderWorldCopies=y,this._update()}getCooperativeGestures(){return this._cooperativeGestures}setCooperativeGestures(y){return this._cooperativeGestures=y,this._cooperativeGestures?this._setupCooperativeGestures():this._destroyCooperativeGestures(),this}project(y){return this.transform.locationPoint(o.L.convert(y),this.style&&this.terrain)}unproject(y){return this.transform.pointLocation(o.P.convert(y),this.terrain)}isMoving(){var y;return this._moving||((y=this.handlers)===null||y===void 0?void 0:y.isMoving())}isZooming(){var y;return this._zooming||((y=this.handlers)===null||y===void 0?void 0:y.isZooming())}isRotating(){var y;return this._rotating||((y=this.handlers)===null||y===void 0?void 0:y.isRotating())}_createDelegatedListener(y,i,u){if(y==="mouseenter"||y==="mouseover"){let p=!1;return{layer:i,listener:u,delegates:{mousemove:x=>{const T=this.getLayer(i)?this.queryRenderedFeatures(x.point,{layers:[i]}):[];T.length?p||(p=!0,u.call(this,new Si(y,this,x.originalEvent,{features:T}))):p=!1},mouseout:()=>{p=!1}}}}if(y==="mouseleave"||y==="mouseout"){let p=!1;return{layer:i,listener:u,delegates:{mousemove:T=>{(this.getLayer(i)?this.queryRenderedFeatures(T.point,{layers:[i]}):[]).length?p=!0:p&&(p=!1,u.call(this,new Si(y,this,T.originalEvent)))},mouseout:T=>{p&&(p=!1,u.call(this,new Si(y,this,T.originalEvent)))}}}}{const p=g=>{const x=this.getLayer(i)?this.queryRenderedFeatures(g.point,{layers:[i]}):[];x.length&&(g.features=x,u.call(this,g),delete g.features)};return{layer:i,listener:u,delegates:{[y]:p}}}}on(y,i,u){if(u===void 0)return super.on(y,i);const p=this._createDelegatedListener(y,i,u);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[y]=this._delegatedListeners[y]||[],this._delegatedListeners[y].push(p);for(const g in p.delegates)this.on(g,p.delegates[g]);return this}once(y,i,u){if(u===void 0)return super.once(y,i);const p=this._createDelegatedListener(y,i,u);for(const g in p.delegates)this.once(g,p.delegates[g]);return this}off(y,i,u){return u===void 0?super.off(y,i):(this._delegatedListeners&&this._delegatedListeners[y]&&(p=>{const g=this._delegatedListeners[y];for(let x=0;x<g.length;x++){const T=g[x];if(T.layer===i&&T.listener===u){for(const E in T.delegates)this.off(E,T.delegates[E]);return g.splice(x,1),this}}})(),this)}queryRenderedFeatures(y,i){if(!this.style)return[];let u;const p=y instanceof o.P||Array.isArray(y),g=p?y:[[0,0],[this.transform.width,this.transform.height]];if(i=i||(p?{}:y)||{},g instanceof o.P||typeof g[0]=="number")u=[o.P.convert(g)];else{const x=o.P.convert(g[0]),T=o.P.convert(g[1]);u=[x,new o.P(T.x,x.y),T,new o.P(x.x,T.y),x]}return this.style.queryRenderedFeatures(u,i,this.transform)}querySourceFeatures(y,i){return this.style.querySourceFeatures(y,i)}setStyle(y,i){return(i=o.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},i)).diff!==!1&&i.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&y?(this._diffStyle(y,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._updateStyle(y,i))}setTransformRequest(y){return this._requestManager.setTransformRequest(y),this}_getUIString(y){const i=this._locale[y];if(i==null)throw new Error(`Missing UI string '${y}'`);return i}_updateStyle(y,i){if(i.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(y,i));const u=this.style&&i.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!y)),y?(this.style=new _r(this,i||{}),this.style.setEventedParent(this,{style:this.style}),typeof y=="string"?this.style.loadURL(y,i,u):this.style.loadJSON(y,i,u),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new _r(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(y,i){if(typeof y=="string"){const u=this._requestManager.transformRequest(y,N.Style);o.f(u,(p,g)=>{p?this.fire(new o.j(p)):g&&this._updateDiff(g,i)})}else typeof y=="object"&&this._updateDiff(y,i)}_updateDiff(y,i){try{this.style.setState(y,i)&&this._update(!0)}catch(u){o.w(`Unable to perform style diff: ${u.message||u.error||u}.  Rebuilding the style from scratch.`),this._updateStyle(y,i)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():o.w("There is no style added to the map.")}addSource(y,i){return this._lazyInitEmptyStyle(),this.style.addSource(y,i),this._update(!0)}isSourceLoaded(y){const i=this.style&&this.style.sourceCaches[y];if(i!==void 0)return i.loaded();this.fire(new o.j(new Error(`There is no source with ID '${y}'`)))}setTerrain(y){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),y){const i=this.style.sourceCaches[y.source];if(!i)throw new Error(`cannot load terrain, because there exists no source with ID: ${y.source}`);for(const u in this.style._layers){const p=this.style._layers[u];p.type==="hillshade"&&p.source===y.source&&o.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Qm(this.painter,i,y),this.painter.renderToTexture=new qu(this.painter,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=u=>{u.dataType==="style"?this.terrain.sourceCache.freeRtt():u.dataType==="source"&&u.tile&&(u.sourceId!==y.source||this._elevationFreeze||(this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(u.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0;return this.fire(new o.k("terrain",{terrain:y})),this}getTerrain(){var y,i;return(i=(y=this.terrain)===null||y===void 0?void 0:y.options)!==null&&i!==void 0?i:null}areTilesLoaded(){const y=this.style&&this.style.sourceCaches;for(const i in y){const u=y[i]._tiles;for(const p in u){const g=u[p];if(g.state!=="loaded"&&g.state!=="errored")return!1}}return!0}addSourceType(y,i,u){return this._lazyInitEmptyStyle(),this.style.addSourceType(y,i,u)}removeSource(y){return this.style.removeSource(y),this._update(!0)}getSource(y){return this.style.getSource(y)}addImage(y,i,u={}){const{pixelRatio:p=1,sdf:g=!1,stretchX:x,stretchY:T,content:E}=u;if(this._lazyInitEmptyStyle(),!(i instanceof HTMLImageElement||o.a(i))){if(i.width===void 0||i.height===void 0)return this.fire(new o.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:k,height:R,data:L}=i,z=i;return this.style.addImage(y,{data:new o.R({width:k,height:R},new Uint8Array(L)),pixelRatio:p,stretchX:x,stretchY:T,content:E,sdf:g,version:0,userImage:z}),z.onAdd&&z.onAdd(this,y),this}}{const{width:k,height:R,data:L}=o.h.getImageData(i);this.style.addImage(y,{data:new o.R({width:k,height:R},L),pixelRatio:p,stretchX:x,stretchY:T,content:E,sdf:g,version:0})}}updateImage(y,i){const u=this.style.getImage(y);if(!u)return this.fire(new o.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const p=i instanceof HTMLImageElement||o.a(i)?o.h.getImageData(i):i,{width:g,height:x,data:T}=p;if(g===void 0||x===void 0)return this.fire(new o.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(g!==u.data.width||x!==u.data.height)return this.fire(new o.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const E=!(i instanceof HTMLImageElement||o.a(i));return u.data.replace(T,E),this.style.updateImage(y,u),this}getImage(y){return this.style.getImage(y)}hasImage(y){return y?!!this.style.getImage(y):(this.fire(new o.j(new Error("Missing required image id"))),!1)}removeImage(y){this.style.removeImage(y)}loadImage(y,i){Z.getImage(this._requestManager.transformRequest(y,N.Image),i)}listImages(){return this.style.listImages()}addLayer(y,i){return this._lazyInitEmptyStyle(),this.style.addLayer(y,i),this._update(!0)}moveLayer(y,i){return this.style.moveLayer(y,i),this._update(!0)}removeLayer(y){return this.style.removeLayer(y),this._update(!0)}getLayer(y){return this.style.getLayer(y)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(y,i,u){return this.style.setLayerZoomRange(y,i,u),this._update(!0)}setFilter(y,i,u={}){return this.style.setFilter(y,i,u),this._update(!0)}getFilter(y){return this.style.getFilter(y)}setPaintProperty(y,i,u,p={}){return this.style.setPaintProperty(y,i,u,p),this._update(!0)}getPaintProperty(y,i){return this.style.getPaintProperty(y,i)}setLayoutProperty(y,i,u,p={}){return this.style.setLayoutProperty(y,i,u,p),this._update(!0)}getLayoutProperty(y,i){return this.style.getLayoutProperty(y,i)}setGlyphs(y,i={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(y,i),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(y,i,u={}){return this._lazyInitEmptyStyle(),this.style.addSprite(y,i,u,p=>{p||this._update(!0)}),this}removeSprite(y){return this._lazyInitEmptyStyle(),this.style.removeSprite(y),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(y,i={}){return this._lazyInitEmptyStyle(),this.style.setSprite(y,i,u=>{u||this._update(!0)}),this}setLight(y,i={}){return this._lazyInitEmptyStyle(),this.style.setLight(y,i),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(y,i){return this.style.setFeatureState(y,i),this._update()}removeFeatureState(y,i){return this.style.removeFeatureState(y,i),this._update()}getFeatureState(y){return this.style.getFeatureState(y)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let y=0,i=0;return this._container&&(y=this._container.clientWidth||400,i=this._container.clientHeight||300),[y,i]}_setupContainer(){const y=this._container;y.classList.add("maplibregl-map");const i=this._canvasContainer=b.create("div","maplibregl-canvas-container",y);this._interactive&&i.classList.add("maplibregl-interactive"),this._canvas=b.create("canvas","maplibregl-canvas",i),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const u=this._containerDimensions(),p=this._getClampedPixelRatio(u[0],u[1]);this._resizeCanvas(u[0],u[1],p);const g=this._controlContainer=b.create("div","maplibregl-control-container",y),x=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(T=>{x[T]=b.create("div",`maplibregl-ctrl-${T} `,g)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){this._cooperativeGesturesScreen=b.create("div","maplibregl-cooperative-gesture-screen",this._container);let y=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(y=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use  + scroll to zoom the map"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${y}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,this._cooperativeGesturesScreen.setAttribute("aria-hidden","true"),this._canvasContainer.addEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.add("maplibregl-cooperative-gestures")}_destroyCooperativeGestures(){b.remove(this._cooperativeGesturesScreen),this._canvasContainer.removeEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.remove("maplibregl-cooperative-gestures")}_resizeCanvas(y,i,u){this._canvas.width=Math.floor(u*y),this._canvas.height=Math.floor(u*i),this._canvas.style.width=`${y}px`,this._canvas.style.height=`${i}px`}_setupPainter(){const y={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let i=null;this._canvas.addEventListener("webglcontextcreationerror",p=>{i={requestedAttributes:y},p&&(i.statusMessage=p.statusMessage,i.type=p.type)},{once:!0});const u=this._canvas.getContext("webgl2",y)||this._canvas.getContext("webgl",y);if(!u){const p="Failed to initialize WebGL";throw i?(i.message=p,new Error(JSON.stringify(i))):new Error(p)}this.painter=new to(u,this.transform),A.testSupport(u)}_onCooperativeGesture(y,i,u){return!i&&u<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(y){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||y,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(y){return this._update(),this._renderTaskQueue.add(y)}_cancelRenderFrame(y){this._renderTaskQueue.remove(y)}_render(y){const i=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(y),this._removed)return;let u=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const g=this.transform.zoom,x=o.h.now();this.style.zoomHistory.update(g,x);const T=new o.a8(g,{now:x,fadeDuration:i,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),E=T.crossFadingFactor();E===1&&E===this._crossFadingFactor||(u=!0,this._crossFadingFactor=E),this.style.update(T)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,i,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:i,showPadding:this.showPadding}),this.fire(new o.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,o.bg.mark(o.bh.load),this.fire(new o.k("load"))),this.style&&(this.style.hasTransitions()||u)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const p=this._sourcesDirty||this._styleDirty||this._placementDirty;return p||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new o.k("idle")),!this._loaded||this._fullyLoaded||p||(this._fullyLoaded=!0,o.bg.mark(o.bh.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){var y;this._hash&&this._hash.remove();for(const u of this._controls)u.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),Z.removeThrottleControl(this._imageQueueHandle),(y=this._resizeObserver)===null||y===void 0||y.disconnect();const i=this.painter.context.gl.getExtension("WEBGL_lose_context");i&&i.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),b.remove(this._canvasContainer),b.remove(this._controlContainer),this._cooperativeGestures&&this._destroyCooperativeGestures(),this._container.classList.remove("maplibregl-map"),o.bg.clearMetrics(),this._removed=!0,this.fire(new o.k("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=o.h.frame(y=>{o.bg.frame(y),this._frame=null,this._render(y)}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(y){this._showTileBoundaries!==y&&(this._showTileBoundaries=y,this._update())}get showPadding(){return!!this._showPadding}set showPadding(y){this._showPadding!==y&&(this._showPadding=y,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(y){this._showCollisionBoxes!==y&&(this._showCollisionBoxes=y,y?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(y){this._showOverdrawInspector!==y&&(this._showOverdrawInspector=y,this._update())}get repaint(){return!!this._repaint}set repaint(y){this._repaint!==y&&(this._repaint=y,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(y){this._vertices=y,this._update()}get version(){return St}getCameraTargetElevation(){return this.transform.elevation}},sn.NavigationControl=class{constructor(y){this._updateZoomButtons=()=>{const i=this._map.getZoom(),u=i===this._map.getMaxZoom(),p=i===this._map.getMinZoom();this._zoomInButton.disabled=u,this._zoomOutButton.disabled=p,this._zoomInButton.setAttribute("aria-disabled",u.toString()),this._zoomOutButton.setAttribute("aria-disabled",p.toString())},this._rotateCompassArrow=()=>{const i=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=i},this._setButtonTitle=(i,u)=>{const p=this._map._getUIString(`NavigationControl.${u}`);i.title=p,i.setAttribute("aria-label",p)},this.options=o.e({},ef,y),this._container=b.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",i=>i.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",i=>this._map.zoomIn({},{originalEvent:i})),b.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",i=>this._map.zoomOut({},{originalEvent:i})),b.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",i=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:i}):this._map.resetNorth({},{originalEvent:i})}),this._compassIcon=b.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(y){return this._map=y,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new tf(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){b.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(y,i){const u=b.create("button",y,this._container);return u.type="button",u.addEventListener("click",i),u}},sn.GeolocateControl=class extends o.E{constructor(y){super(),this._onSuccess=i=>{if(this._map){if(this._isOutOfMapMaxBounds(i))return this._setErrorState(),this.fire(new o.k("outofmaxbounds",i)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=i,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(i),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(i),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new o.k("geolocate",i)),this._finish()}},this._updateCamera=i=>{const u=new o.L(i.coords.longitude,i.coords.latitude),p=i.coords.accuracy,g=this._map.getBearing(),x=o.e({bearing:g},this.options.fitBoundsOptions),T=Dt.fromLngLat(u,p);this._map.fitBounds(T,x,{geolocateSource:!0})},this._updateMarker=i=>{if(i){const u=new o.L(i.coords.longitude,i.coords.latitude);this._accuracyCircleMarker.setLngLat(u).addTo(this._map),this._userLocationDotMarker.setLngLat(u).addTo(this._map),this._accuracy=i.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=i=>{if(this._map){if(this.options.trackUserLocation)if(i.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(i.code===3&&nl)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new o.k("error",i)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=i=>{if(this._map){if(this._container.addEventListener("contextmenu",u=>u.preventDefault()),this._geolocateButton=b.create("button","maplibregl-ctrl-geolocate",this._container),b.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",i===!1){o.w("Geolocation support is not available so the GeolocateControl will be disabled.");const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u)}else{const u=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=b.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new ro({element:this._dotElement}),this._circleElement=b.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new ro({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",u=>{u.geolocateSource||this._watchState!=="ACTIVE_LOCK"||u.originalEvent&&u.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new o.k("trackuserlocationend")))})}},this.options=o.e({},On,y)}onAdd(y){return this._map=y,this._container=b.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(i,u=!1){Zn===void 0||u?window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(p=>{Zn=p.state!=="denied",i(Zn)}).catch(()=>{Zn=!!window.navigator.geolocation,i(Zn)}):(Zn=!!window.navigator.geolocation,i(Zn)):i(Zn)}(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),b.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Mn=0,nl=!1}_isOutOfMapMaxBounds(y){const i=this._map.getMaxBounds(),u=y.coords;return i&&(u.longitude<i.getWest()||u.longitude>i.getEast()||u.latitude<i.getSouth()||u.latitude>i.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const y=this._map.getBounds(),i=y.getSouthEast(),u=y.getNorthEast(),p=i.distanceTo(u),g=Math.ceil(this._accuracy/(p/this._map._container.clientHeight)*2);this._circleElement.style.width=`${g}px`,this._circleElement.style.height=`${g}px`}trigger(){if(!this._setup)return o.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new o.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Mn--,nl=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new o.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new o.k("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let y;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Mn++,Mn>1?(y={maximumAge:6e5,timeout:0},nl=!0):(y=this.options.positionOptions,nl=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,y)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},sn.AttributionControl=Ti,sn.LogoControl=vn,sn.ScaleControl=class{constructor(y){this._onMove=()=>{Tc(this._map,this._container,this.options)},this.setUnit=i=>{this.options.unit=i,Tc(this._map,this._container,this.options)},this.options=o.e({},Sc,y)}getDefaultPosition(){return"bottom-left"}onAdd(y){return this._map=y,this._container=b.create("div","maplibregl-ctrl maplibregl-ctrl-scale",y.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){b.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},sn.FullscreenControl=class extends o.E{constructor(y={}){super(),this._onFullscreenChange=()=>{(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,y&&y.container&&(y.container instanceof HTMLElement?this._container=y.container:o.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(y){return this._map=y,this._container||(this._container=this._map.getContainer()),this._controlContainer=b.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){b.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const y=this._fullscreenButton=b.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);b.create("span","maplibregl-ctrl-icon",y).setAttribute("aria-hidden","true"),y.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const y=this._getTitle();this._fullscreenButton.setAttribute("aria-label",y),this._fullscreenButton.title=y}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new o.k("fullscreenstart")),this._map._cooperativeGestures&&(this._prevCooperativeGestures=this._map._cooperativeGestures,this._map.setCooperativeGestures())):(this.fire(new o.k("fullscreenend")),this._prevCooperativeGestures&&(this._map.setCooperativeGestures(this._prevCooperativeGestures),delete this._prevCooperativeGestures))}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},sn.TerrainControl=class{constructor(y){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))},this.options=y}onAdd(y){return this._map=y,this._container=b.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=b.create("button","maplibregl-ctrl-terrain",this._container),b.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){b.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},sn.Popup=class extends o.E{constructor(y){super(),this.remove=()=>(this._content&&b.remove(this._content),this._container&&(b.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new o.k("close")),this),this._onMouseUp=i=>{this._update(i.point)},this._onMouseMove=i=>{this._update(i.point)},this._onDrag=i=>{this._update(i.point)},this._update=i=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=b.create("div","maplibregl-popup",this._map.getContainer()),this._tip=b.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const T of this.options.className.split(" "))this._container.classList.add(T);this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=nf(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!i)return;const u=this._pos=this._trackPointer&&i?i:this._map.project(this._lngLat);let p=this.options.anchor;const g=rl(this.options.offset);if(!p){const T=this._container.offsetWidth,E=this._container.offsetHeight;let k;k=u.y+g.bottom.y<E?["top"]:u.y>this._map.transform.height-E?["bottom"]:[],u.x<T/2?k.push("left"):u.x>this._map.transform.width-T/2&&k.push("right"),p=k.length===0?"bottom":k.join("-")}const x=u.add(g[p]).round();b.setTransform(this._container,`${Wi[p]} translate(${x.x}px,${x.y}px)`),Ym(this._container,p,"popup")},this._onClose=()=>{this.remove()},this.options=o.e(Object.create(rf),y)}addTo(y){return this._map&&this.remove(),this._map=y,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new o.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(y){return this._lngLat=o.L.convert(y),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(y){return this.setDOMContent(document.createTextNode(y))}setHTML(y){const i=document.createDocumentFragment(),u=document.createElement("body");let p;for(u.innerHTML=y;p=u.firstChild,p;)i.appendChild(p);return this.setDOMContent(i)}getMaxWidth(){var y;return(y=this._container)===null||y===void 0?void 0:y.style.maxWidth}setMaxWidth(y){return this.options.maxWidth=y,this._update(),this}setDOMContent(y){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=b.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(y),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(y){this._container&&this._container.classList.add(y)}removeClassName(y){this._container&&this._container.classList.remove(y)}setOffset(y){return this.options.offset=y,this._update(),this}toggleClassName(y){if(this._container)return this._container.classList.toggle(y)}_createCloseButton(){this.options.closeButton&&(this._closeButton=b.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const y=this._container.querySelector(sf);y&&y.focus()}},sn.Marker=ro,sn.Style=_r,sn.LngLat=o.L,sn.LngLatBounds=Dt,sn.Point=o.P,sn.MercatorCoordinate=o.U,sn.Evented=o.E,sn.AJAXError=o.bi,sn.config=o.c,sn.CanvasSource=bs,sn.GeoJSONSource=Bi,sn.ImageSource=ti,sn.RasterDEMTileSource=Jr,sn.RasterTileSource=gr,sn.VectorTileSource=vi,sn.VideoSource=wa,sn.setRTLTextPlugin=o.bj,sn.getRTLTextPluginStatus=o.bk,sn.prewarm=function(){rs().acquire(et)},sn.clearPrewarmedResources=function(){const y=Dn;y&&(y.isPreloaded()&&y.numActive()===1?(y.release(et),Dn=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},af.extend(sn,{isSafari:o.ac,getPerformanceMetrics:o.bg.getPerformanceMetrics}),sn});var f=c;return f})})(Az);var oW=Az.exports;function lW({mapOptions:e,enable3D:t=!1,disableRotation:n=!1}){const[s,c]=Y.useState(null),[h,f]=Y.useState(!1);return Y.useEffect(()=>{const o=new oW.Map({container:"maplibre-gl-map",style:{version:8,sources:{},layers:[]},center:[0,0],zoom:1,attributionControl:!1,...e});c(o)},[]),Y.useEffect(()=>{s&&s.on("load",()=>{s.addSource("terrainSource",{type:"raster-dem",tiles:["https://vtc-cdn.maptoolkit.net/terrainrgb/{z}/{x}/{y}.webp"],encoding:"mapbox",maxzoom:14,minzoom:4}),f(!0)})},[s]),Y.useEffect(()=>{!s||!h||(t?s.setTerrain({source:"terrainSource",exaggeration:.6}):s.setTerrain())},[s,h,t]),Y.useEffect(()=>{!s||!n||(s.dragRotate.disable(),s.touchZoomRotate.disableRotation())},[s,n]),{map:s,isMapLoaded:h}}const cW={osm:{version:8,sources:{osm:{type:"raster",tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:'Map tiles by <a target="_top" rel="noopener" href="https://tile.openstreetmap.org/">OpenStreetMap tile servers</a>, under the <a target="_top" rel="noopener" href="https://operations.osmfoundation.org/policies/tiles/">tile usage policy</a>. Data by <a target="_top" rel="noopener" href="http://openstreetmap.org">OpenStreetMap</a>'}},layers:[{id:"osm",type:"raster",source:"osm"}]},"osm-light":{version:8,sources:{"osm-light":{type:"raster",tiles:["https://a.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png","https://b.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png","https://c.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png"],tileSize:256,attribution:"",maxzoom:18}},layers:[{id:"osm-light",type:"raster",source:"osm-light"}]},satellite:{version:8,sources:{satellite:{type:"raster",tiles:["https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}"],tileSize:256,attribution:"",maxzoom:18}},layers:[{id:"satellite",type:"raster",source:"satellite"}]},topo:{version:8,sources:{topo:{type:"raster",tiles:["https://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}"],maxZoom:18}},layers:[{id:"topo",type:"raster",source:"topo"}]},hybrid:{version:8,sources:{hybrid:{type:"raster",tiles:["https://mt1.google.com/vt/lyrs=p&x={x}&y={y}&z={z}"],maxZoom:18}},layers:[{id:"hybrid",type:"raster",source:"hybrid"}]}};let Bf={};function uW({map:e,baseLayers:t=cW,activeLayer:n="osm"}){const s=Y.useCallback(()=>{if(!(e!=null&&e.isStyleLoaded)||!e.getStyle())return;const{sources:c,layers:h}=e.getStyle();n in c||!(n in t)||(Bf=c,h.forEach(f=>{Bf[f.id]&&(Bf[f.id].layer=f)}),e.setStyle(t[n]),Object.keys(Bf).forEach(f=>{const{type:o,data:w,layer:b}=Bf[f];!w||!b||(e.addSource(f,{type:o,data:w}),e.addLayer({id:f,...b}),e.off("style.load",s))}))},[e,t,n]);return Y.useEffect(()=>e?(e.once("style.load",s),()=>e.off("style.load",s)):()=>{},[e,n,t,s]),Y.useEffect(()=>{!e||!e.isStyleLoaded||s()},[e,n,s]),null}function hW(){const{map:e,isMapLoaded:t}=lW({mapOptions:{zoom:4,center:[80.0711,28.994],maxZoom:19}});return K(aW,{map:e,isMapLoaded:t,style:{width:"100%",height:"560px"},children:K(uW,{})})}function dW(){return K("main",{className:"contact naxatw-w-full",children:Ve("div",{className:"naxatw-flex naxatw-flex-col md:naxatw-flex-row naxatw-container naxatw-py-6 md:naxatw-py-14 naxatw-gap-8",children:[K("div",{className:"naxatw-w-full md:naxatw-w-[55%]",children:K(iW,{})}),K("div",{className:"naxatw-w-full md:naxatw-w-[45%] naxatw-rounded-xl naxatw-overflow-hidden naxatw-border naxatw-border-primary",children:K(hW,{})})]})})}function fW(){return K(dW,{})}function ca({message:e}){return K("span",{role:"alert",className:"naxatw-px-1 naxatw-pt-2 naxatw-text-sm naxatw-text-red-500",children:e})}const pW=e=>Ka.post("user/login/",e),mW=e=>Ka.post("user/sign-up/",e),gW=e=>dm.post("https://sujanadh.pythonanywhere.com/api/user/google-login/",e),yW=e=>dm.post("https://sujanadh.pythonanywhere.com/api/user/reset-password-request/",e),vW=e=>dm.post("https://sujanadh.pythonanywhere.com/api/user/resend-verification-email/",e);function xW(){const[e,t]=Y.useState(""),[n,s]=Y.useState(""),[c,h]=Y.useState(!1),[f,o]=Y.useState(!1),w=localStorage.getItem("signup_email");return w||t("No email found. Please sign up again."),Ve(fx,{gap:4,className:"naxatw-w-full naxatw-flex-col naxatw-items-center naxatw-justify-center naxatw-pb-4 naxatw-mt-[60px]",children:[K("h3",{className:"naxatw-text-2xl naxatw-font-bold naxatw-mb-2",children:"Verify Your Email"}),K("p",{className:"naxatw-text-center naxatw-text-grey-700 naxatw-mb-4 naxatw-max-w-xs",children:"Please check your registered email for a verification link. Click the link to verify your email."}),!f&&K("button",{type:"button",className:"naxatw-text-blue-600 hover:naxatw-underline naxatw-mb-2 naxatw-bg-transparent naxatw-border-0 naxatw-cursor-pointer naxatw-text-base",onClick:async()=>{var A,C,M,B,V,j;t(""),s(""),h(!0),o(!1);try{if(!w){t("No email found. Please sign up again."),h(!1);return}await vW({email:w}),s("Verification email resent successfully. Please check your inbox.")}catch(Z){const N=((C=(A=Z==null?void 0:Z.response)==null?void 0:A.data)==null?void 0:C.detail)||((B=(M=Z==null?void 0:Z.response)==null?void 0:M.data)==null?void 0:B.message)||(typeof((V=Z==null?void 0:Z.response)==null?void 0:V.data)=="string"?(j=Z==null?void 0:Z.response)==null?void 0:j.data:"Failed to resend verification email.");t(N),typeof N=="string"&&N.toLowerCase().includes("already verified")&&o(!0)}finally{h(!1)}},disabled:c,children:c?"Resending...":"Resend verification email"}),f&&K("span",{className:"naxatw-text-green-600 naxatw-text-sm naxatw-pt-2",children:e}),!f&&e&&K(ca,{message:e}),n&&K("span",{className:"naxatw-text-green-600 naxatw-text-sm naxatw-pt-2",children:n})]})}const _W=[{path:"/",name:"Home ",component:fG,authenticated:!1},{path:"/notes",name:"Notes ",component:mG,authenticated:!1},{path:"/exam",name:"Exam ",component:rW,authenticated:!1},{path:"/contact",name:"Contact ",component:fW,authenticated:!1},{path:"/verify-email",name:"Verify Email",component:xW,authenticated:!1}];function z1(e,t){return z1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,c){return s.__proto__=c,s},z1(e,t)}function Iz(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,z1(e,t)}function wW(e,t){return e.classList?!!t&&e.classList.contains(t):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")!==-1}function bW(e,t){e.classList?e.classList.add(t):wW(e,t)||(typeof e.className=="string"?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}function kA(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function SW(e,t){e.classList?e.classList.remove(t):typeof e.className=="string"?e.className=kA(e.className,t):e.setAttribute("class",kA(e.className&&e.className.baseVal||"",t))}const IA={disabled:!1},Mz=bt.createContext(null);var Rz=function(t){return t.scrollTop},Kf="unmounted",Oc="exited",Fc="entering",sh="entered",O1="exiting",qo=function(e){Iz(t,e);function t(s,c){var h;h=e.call(this,s,c)||this;var f=c,o=f&&!f.isMounting?s.enter:s.appear,w;return h.appearStatus=null,s.in?o?(w=Oc,h.appearStatus=Fc):w=sh:s.unmountOnExit||s.mountOnEnter?w=Kf:w=Oc,h.state={status:w},h.nextCallback=null,h}t.getDerivedStateFromProps=function(c,h){var f=c.in;return f&&h.status===Kf?{status:Oc}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(c){var h=null;if(c!==this.props){var f=this.state.status;this.props.in?f!==Fc&&f!==sh&&(h=Fc):(f===Fc||f===sh)&&(h=O1)}this.updateStatus(!1,h)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var c=this.props.timeout,h,f,o;return h=f=o=c,c!=null&&typeof c!="number"&&(h=c.exit,f=c.enter,o=c.appear!==void 0?c.appear:f),{exit:h,enter:f,appear:o}},n.updateStatus=function(c,h){if(c===void 0&&(c=!1),h!==null)if(this.cancelNextCallback(),h===Fc){if(this.props.unmountOnExit||this.props.mountOnEnter){var f=this.props.nodeRef?this.props.nodeRef.current:Vg.findDOMNode(this);f&&Rz(f)}this.performEnter(c)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Oc&&this.setState({status:Kf})},n.performEnter=function(c){var h=this,f=this.props.enter,o=this.context?this.context.isMounting:c,w=this.props.nodeRef?[o]:[Vg.findDOMNode(this),o],b=w[0],A=w[1],C=this.getTimeouts(),M=o?C.appear:C.enter;if(!c&&!f||IA.disabled){this.safeSetState({status:sh},function(){h.props.onEntered(b)});return}this.props.onEnter(b,A),this.safeSetState({status:Fc},function(){h.props.onEntering(b,A),h.onTransitionEnd(M,function(){h.safeSetState({status:sh},function(){h.props.onEntered(b,A)})})})},n.performExit=function(){var c=this,h=this.props.exit,f=this.getTimeouts(),o=this.props.nodeRef?void 0:Vg.findDOMNode(this);if(!h||IA.disabled){this.safeSetState({status:Oc},function(){c.props.onExited(o)});return}this.props.onExit(o),this.safeSetState({status:O1},function(){c.props.onExiting(o),c.onTransitionEnd(f.exit,function(){c.safeSetState({status:Oc},function(){c.props.onExited(o)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(c,h){h=this.setNextCallback(h),this.setState(c,h)},n.setNextCallback=function(c){var h=this,f=!0;return this.nextCallback=function(o){f&&(f=!1,h.nextCallback=null,c(o))},this.nextCallback.cancel=function(){f=!1},this.nextCallback},n.onTransitionEnd=function(c,h){this.setNextCallback(h);var f=this.props.nodeRef?this.props.nodeRef.current:Vg.findDOMNode(this),o=c==null&&!this.props.addEndListener;if(!f||o){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var w=this.props.nodeRef?[this.nextCallback]:[f,this.nextCallback],b=w[0],A=w[1];this.props.addEndListener(b,A)}c!=null&&setTimeout(this.nextCallback,c)},n.render=function(){var c=this.state.status;if(c===Kf)return null;var h=this.props,f=h.children;h.in,h.mountOnEnter,h.unmountOnExit,h.appear,h.enter,h.exit,h.timeout,h.addEndListener,h.onEnter,h.onEntering,h.onEntered,h.onExit,h.onExiting,h.onExited,h.nodeRef;var o=Lb(h,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return bt.createElement(Mz.Provider,{value:null},typeof f=="function"?f(c,o):bt.cloneElement(bt.Children.only(f),o))},t}(bt.Component);qo.contextType=Mz;qo.propTypes={};function rh(){}qo.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:rh,onEntering:rh,onEntered:rh,onExit:rh,onExiting:rh,onExited:rh};qo.UNMOUNTED=Kf;qo.EXITED=Oc;qo.ENTERING=Fc;qo.ENTERED=sh;qo.EXITING=O1;const TW=qo;var EW=function(t,n){return t&&n&&n.split(" ").forEach(function(s){return bW(t,s)})},N0=function(t,n){return t&&n&&n.split(" ").forEach(function(s){return SW(t,s)})},s2=function(e){Iz(t,e);function t(){for(var s,c=arguments.length,h=new Array(c),f=0;f<c;f++)h[f]=arguments[f];return s=e.call.apply(e,[this].concat(h))||this,s.appliedClasses={appear:{},enter:{},exit:{}},s.onEnter=function(o,w){var b=s.resolveArguments(o,w),A=b[0],C=b[1];s.removeClasses(A,"exit"),s.addClass(A,C?"appear":"enter","base"),s.props.onEnter&&s.props.onEnter(o,w)},s.onEntering=function(o,w){var b=s.resolveArguments(o,w),A=b[0],C=b[1],M=C?"appear":"enter";s.addClass(A,M,"active"),s.props.onEntering&&s.props.onEntering(o,w)},s.onEntered=function(o,w){var b=s.resolveArguments(o,w),A=b[0],C=b[1],M=C?"appear":"enter";s.removeClasses(A,M),s.addClass(A,M,"done"),s.props.onEntered&&s.props.onEntered(o,w)},s.onExit=function(o){var w=s.resolveArguments(o),b=w[0];s.removeClasses(b,"appear"),s.removeClasses(b,"enter"),s.addClass(b,"exit","base"),s.props.onExit&&s.props.onExit(o)},s.onExiting=function(o){var w=s.resolveArguments(o),b=w[0];s.addClass(b,"exit","active"),s.props.onExiting&&s.props.onExiting(o)},s.onExited=function(o){var w=s.resolveArguments(o),b=w[0];s.removeClasses(b,"exit"),s.addClass(b,"exit","done"),s.props.onExited&&s.props.onExited(o)},s.resolveArguments=function(o,w){return s.props.nodeRef?[s.props.nodeRef.current,o]:[o,w]},s.getClassNames=function(o){var w=s.props.classNames,b=typeof w=="string",A=b&&w?w+"-":"",C=b?""+A+o:w[o],M=b?C+"-active":w[o+"Active"],B=b?C+"-done":w[o+"Done"];return{baseClassName:C,activeClassName:M,doneClassName:B}},s}var n=t.prototype;return n.addClass=function(c,h,f){var o=this.getClassNames(h)[f+"ClassName"],w=this.getClassNames("enter"),b=w.doneClassName;h==="appear"&&f==="done"&&b&&(o+=" "+b),f==="active"&&c&&Rz(c),o&&(this.appliedClasses[h][f]=o,EW(c,o))},n.removeClasses=function(c,h){var f=this.appliedClasses[h],o=f.base,w=f.active,b=f.done;this.appliedClasses[h]={},o&&N0(c,o),w&&N0(c,w),b&&N0(c,b)},n.render=function(){var c=this.props;c.classNames;var h=Lb(c,["classNames"]);return bt.createElement(TW,uu({},h,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(bt.Component);s2.defaultProps={classNames:""};s2.propTypes={};const CW=s2;function Dz({title:e,subtitle:t,show:n,onClose:s,children:c,className:h,headerContent:f,zIndex:o=1111,hideCloseButton:w}){const b=Y.useRef(null);return K(CW,{nodeRef:b,in:n,timeout:150,unmountOnExit:!0,classNames:{enter:"naxatw-opacity-0 naxatw-scale-95",enterActive:"naxatw-opacity-100 naxatw-scale-100 naxatw-transition-all naxatw-ease-in naxatw-duration-150",enterDone:"naxatw-opacity-100 naxatw-scale-100",exit:"naxatw-opacity-50 naxatw-scale-75 naxatw-transition-all naxatw-ease-out naxatw-duration-150",exitActive:"naxatw-opacity-0 naxatw-scale-50"},children:K("div",{tabIndex:-1,className:` naxatw-h-modal naxatw-fixed naxatw-inset-0 naxatw-z-[11111] naxatw-flex 
          naxatw-h-screen naxatw-w-screen naxatw-justify-center naxatw-overflow-y-auto naxatw-overflow-x-hidden
          naxatw-bg-black naxatw-bg-opacity-30 naxatw-p-4 md:naxatw-inset-0 md:naxatw-h-full
      `,style:{zIndex:o},children:K("div",{ref:b,className:"naxatw-fixed naxatw-inset-0 naxatw-overflow-y-auto",children:K("div",{className:`naxatw-flex naxatw-min-h-full naxatw-items-center \r
            naxatw-justify-center naxatw-p-4`,children:K("div",{className:`naxatw-relative naxatw-flex naxatw-h-full naxatw-w-full\r
              naxatw-max-w-2xl naxatw-flex-col naxatw-items-center naxatw-justify-center md:naxatw-h-auto`,children:Ve("div",{className:`naxatw-relative naxatw-max-h-[calc(100vh-4rem)] naxatw-w-[42rem] naxatw-overflow-hidden
                   naxatw-rounded-[20px] naxatw-bg-white naxatw-shadow ${h}`,children:[Ve("div",{className:`naxatw-flex naxatw-items-start naxatw-justify-between
                    naxatw-rounded-t-[20px] naxatw-px-7 naxatw-py-5`,children:[f||Ve("div",{className:"naxatw-space-y-1",children:[K("h3",{className:"naxatw-font-bold ",children:e}),K("p",{className:"naxatw-text-body-lg",children:t})]}),!w&&Ve("button",{type:"button",className:`naxatw-ml-auto naxatw-inline-flex naxatw-items-center \r
                      naxatw-rounded-lg naxatw-bg-transparent naxatw-p-1.5 naxatw-text-sm\r
                      naxatw-text-grey-800 hover:naxatw-bg-grey-200 hover:naxatw-text-grey-900`,onClick:s,children:[K("i",{className:"material-icons",children:"close"}),K("span",{className:"naxatw-sr-only",children:"Close modal"})]})]}),K("div",{className:"naxatw-flex",children:K("div",{className:`scrollbar naxatw-max-h-[calc(100vh-10rem)] naxatw-grow naxatw-overflow-y-auto\r
                      naxatw-px-10 naxatw-pb-5`,children:c})})]})})})})})})}function Lz({title:e="",show:t=!1,onClose:n=()=>{},children:s}){return K(Dz,{show:t,title:e,onClose:n,zIndex:111111,children:s})}const MA=[{label:"Home",path:"/"},{label:"Notes",path:"/notes"},{label:"Exams",path:"/exam"},{label:"Contact",path:"/contact"}],PW=({subLinks:e})=>{var s;const[t,n]=Y.useState(!1);return Ve("div",{className:"naxatw-border-b naxatw-border-solid naxatw-border-b-[#D9D9D9]",children:[Ve("div",{className:"naxatw-flex naxatw-items-center naxatw-justify-between naxatw-gap-1",onClick:()=>n(!t),children:[K("p",{className:"naxatw-py-3 naxatw-text-2xl naxatw-font-medium naxatw-capitalize",children:e.label}),K(Yr,{name:t?"keyboard_arrow_up":"keyboard_arrow_down",className:"custom-btn-transition naxatw-h-4 !naxatw-text-2xl naxatw-text-[#131417]"})]}),K("div",{className:`common-btn-transition naxatw-flex naxatw-flex-col naxatw-gap-4 naxatw-overflow-hidden naxatw-px-4  ${t?"naxatw-pointer-events-auto naxatw-h-[245px]  naxatw-pt-3":"naxatw-pointer-events-none naxatw-h-0"} `,children:(s=e==null?void 0:e.children)==null?void 0:s.map(c=>Ve($b,{to:c.link,className:"naxatw-flex naxatw-cursor-pointer naxatw-items-center naxatw-gap-5",children:[K("div",{className:"icon-container naxatw-h-9 naxatw-w-9 naxatw-rounded-lg naxatw-bg-[#cde5fd80] naxatw-p-2",children:K("img",{src:c.icon,alt:c.label})}),K("p",{className:"naxatw-text-lg naxatw-font-medium naxatw-leading-6 naxatw-tracking-[-0.0225rem]",children:c.label})]},c.id))})]})},AW=({navItems:e,mobileViewNavRef:t})=>{const n=CM(),s=Po(h=>h.common.navbarToggled);return Ve("div",{className:"mobile-view-navbar",children:[K("button",{type:"button",onClick:()=>{var h,f,o,w;s?(document.body.style.overflow="auto",(f=(h=t==null?void 0:t.current)==null?void 0:h.classList)==null||f.remove("nav-open")):(document.body.style.overflow="hidden",(w=(o=t==null?void 0:t.current)==null?void 0:o.classList)==null||w.add("nav-open")),n(hA(!s))},className:"md:naxatw-hidden",children:s?K("div",{className:"close-btn naxatw-mt-2 naxatw-flex naxatw-cursor-pointer naxatw-items-center",children:K(Yr,{name:"close",className:"naxatw-text-white naxatw-text-2xl"})}):K("div",{className:"naxatw-flex naxatw-mt-2 naxatw-cursor-pointer naxatw-items-center",children:K(Yr,{name:"menu",className:"naxatw-text-white naxatw-text-2xl"})})}),s&&K("nav",{className:"primary-navigation naxatw-fixed naxatw-inset-x-0 naxatw-bottom-0 naxatw-top-[70px] naxatw-z-[99] naxatw-block naxatw-bg-[#FBF8F3] md:naxatw-hidden",ref:t,children:Ve("div",{className:"naxatw-flex naxatw-h-full naxatw-flex-col",children:[K("div",{className:"naxatw-flex naxatw-flex-1 naxatw-flex-col naxatw-px-4 naxatw-pt-5",children:e==null?void 0:e.map(h=>h!=null&&h.children?K(PW,{subLinks:h},h.id):K($b,{to:h.path,onClick:()=>n(hA(!1)),children:K("p",{className:"naxatw-border-b naxatw-border-solid naxatw-border-b-[#D9D9D9] naxatw-py-3 naxatw-text-2xl naxatw-font-medium naxatw-capitalize",children:h.label})},h.path))}),Ve("p",{className:"naxatw-border-t naxatw-border-solid naxatw-border-t-[#EDEDED] naxatw-py-6 naxatw-text-center naxatw-text-base naxatw-leading-[1.575rem] naxatw-tracking-[-0.00563rem] naxatw-text-[#000]",children:[" GeoSewa ",new Date().getFullYear(),". All Rights Reserved."]})]})})]})},zz="/assets/person-778a1af1.svg";function kW(){const e=sc(),t=sx(),n=Y.useRef(null),{isAuthenticated:s}=qR(),c=localStorage.getItem("username"),h=()=>{localStorage.removeItem("token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("username"),window.location.reload()};return K("nav",{className:"naxatw-bg-primary naxatw-sticky naxatw-top-0 naxatw-z-10",children:K("nav",{className:"naxatw-container naxatw-py-3",children:Ve(hs,{className:"naxatw-items-center naxatw-justify-between",children:[Ve(hs,{className:"naxatw-text-white naxatw-items-center",gap:2,children:[K(Yr,{name:"public"}),K("div",{className:"naxatw-cursor-pointer",role:"presentation",onClick:()=>t("/"),children:K("h3",{className:"naxatw-text-white naxatw-font-medium",children:"GeoSewa"})})]}),K(hs,{className:"naxatw-hidden md:naxatw-flex naxatw-gap-4 naxatw-mt-1 naxatw-text-white",children:MA.map(f=>K($b,{to:f.path,className:({isActive:o})=>`${o&&"naxatw-text-red-500"} naxatw-px-3 naxatw-py-2 naxatw-tracking-wide naxatw-text-[1rem] hover:naxatw-text-red-500`,children:f.label},f.path))}),K(hs,{className:"naxatw-hidden md:naxatw-flex naxatw-items-center",gap:2,children:s?Ve(hs,{className:"naxatw-items-center naxatw-gap-2",children:[K("img",{src:zz,alt:"user",width:32,height:32,style:{borderRadius:"50%"}}),K("span",{className:"naxatw-text-white naxatw-font-medium",children:c}),K("button",{onClick:h,className:"naxatw-ml-2 naxatw-bg-red-500 naxatw-text-white naxatw-px-3 naxatw-py-1 naxatw-rounded hover:naxatw-bg-red-600",children:"Logout"})]}):Ve(ms,{children:[K(Vs,{variant:"outline",className:"naxatw-w-24 naxatw-text-body-lg",onClick:()=>e(od("login")),children:"Login"}),K(Vs,{variant:"default",className:"naxatw-w-24 naxatw-border !naxatw-border-white naxatw-text-body-lg hover:naxatw-bg-white hover:naxatw-text-primary",onClick:()=>e(od("sign-up")),children:"Sign Up"})]})}),K(AW,{navItems:MA,mobileViewNavRef:n})]})})})}const IW="/assets/google-icon-849e85b0.svg";var fm=e=>e.type==="checkbox",Sh=e=>e instanceof Date,Li=e=>e==null;const Oz=e=>typeof e=="object";var Ar=e=>!Li(e)&&!Array.isArray(e)&&Oz(e)&&!Sh(e),MW=e=>Ar(e)&&e.target?fm(e.target)?e.target.checked:e.target.value:e,RW=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,DW=(e,t)=>e.has(RW(t)),LW=e=>{const t=e.constructor&&e.constructor.prototype;return Ar(t)&&t.hasOwnProperty("isPrototypeOf")},a2=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Ls(e){let t;const n=Array.isArray(e);if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(!(a2&&(e instanceof Blob||e instanceof FileList))&&(n||Ar(e)))if(t=n?[]:{},!n&&!LW(e))t=e;else for(const s in e)e.hasOwnProperty(s)&&(t[s]=Ls(e[s]));else return e;return t}var pm=e=>Array.isArray(e)?e.filter(Boolean):[],pr=e=>e===void 0,It=(e,t,n)=>{if(!t||!Ar(e))return n;const s=pm(t.split(/[,[\].]+?/)).reduce((c,h)=>Li(c)?c:c[h],e);return pr(s)||s===e?pr(e[t])?n:e[t]:s},_o=e=>typeof e=="boolean";const RA={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},ga={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},mo={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"};bt.createContext(null);var zW=(e,t,n,s=!0)=>{const c={defaultValues:t._defaultValues};for(const h in e)Object.defineProperty(c,h,{get:()=>{const f=h;return t._proxyFormState[f]!==ga.all&&(t._proxyFormState[f]=!s||ga.all),n&&(n[f]=!0),e[f]}});return c},cs=e=>Ar(e)&&!Object.keys(e).length,OW=(e,t,n,s)=>{n(e);const{name:c,...h}=e;return cs(h)||Object.keys(h).length>=Object.keys(t).length||Object.keys(h).find(f=>t[f]===(!s||ga.all))},B0=e=>Array.isArray(e)?e:[e];function FW(e){const t=bt.useRef(e);t.current=e,bt.useEffect(()=>{const n=!e.disabled&&t.current.subject&&t.current.subject.subscribe({next:t.current.next});return()=>{n&&n.unsubscribe()}},[e.disabled])}var ja=e=>typeof e=="string",NW=(e,t,n,s,c)=>ja(e)?(s&&t.watch.add(e),It(n,e,c)):Array.isArray(e)?e.map(h=>(s&&t.watch.add(h),It(n,h))):(s&&(t.watchAll=!0),n),o2=e=>/^\w*$/.test(e),Fz=e=>pm(e.replace(/["|']|\]/g,"").split(/\.|\[/)),Bn=(e,t,n)=>{let s=-1;const c=o2(t)?[t]:Fz(t),h=c.length,f=h-1;for(;++s<h;){const o=c[s];let w=n;if(s!==f){const b=e[o];w=Ar(b)||Array.isArray(b)?b:isNaN(+c[s+1])?{}:[]}e[o]=w,e=e[o]}return e},BW=(e,t,n,s,c)=>t?{...n[e],types:{...n[e]&&n[e].types?n[e].types:{},[s]:c||!0}}:{},DA=e=>({isOnSubmit:!e||e===ga.onSubmit,isOnBlur:e===ga.onBlur,isOnChange:e===ga.onChange,isOnAll:e===ga.all,isOnTouch:e===ga.onTouched}),LA=(e,t,n)=>!n&&(t.watchAll||t.watch.has(e)||[...t.watch].some(s=>e.startsWith(s)&&/^\.\w+/.test(e.slice(s.length))));const up=(e,t,n,s)=>{for(const c of n||Object.keys(e)){const h=It(e,c);if(h){const{_f:f,...o}=h;if(f){if(f.refs&&f.refs[0]&&t(f.refs[0],c)&&!s)break;if(f.ref&&t(f.ref,f.name)&&!s)break;up(o,t)}else Ar(o)&&up(o,t)}}};var VW=(e,t,n)=>{const s=pm(It(e,n));return Bn(s,"root",t[n]),Bn(e,n,s),e},l2=e=>e.type==="file",zl=e=>typeof e=="function",mv=e=>{if(!a2)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},Sy=e=>ja(e),c2=e=>e.type==="radio",gv=e=>e instanceof RegExp;const zA={value:!1,isValid:!1},OA={value:!0,isValid:!0};var Nz=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!pr(e[0].attributes.value)?pr(e[0].value)||e[0].value===""?OA:{value:e[0].value,isValid:!0}:OA:zA}return zA};const FA={isValid:!1,value:null};var Bz=e=>Array.isArray(e)?e.reduce((t,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:t,FA):FA;function NA(e,t,n="validate"){if(Sy(e)||Array.isArray(e)&&e.every(Sy)||_o(e)&&!e)return{type:n,message:Sy(e)?e:"",ref:t}}var ih=e=>Ar(e)&&!gv(e)?e:{value:e,message:""},BA=async(e,t,n,s,c)=>{const{ref:h,refs:f,required:o,maxLength:w,minLength:b,min:A,max:C,pattern:M,validate:B,name:V,valueAsNumber:j,mount:Z,disabled:N}=e._f,F=It(t,V);if(!Z||N)return{};const W=f?f[0]:h,Q=je=>{s&&W.reportValidity&&(W.setCustomValidity(_o(je)?"":je||""),W.reportValidity())},fe={},Ee=c2(h),Re=fm(h),Te=Ee||Re,Ne=(j||l2(h))&&pr(h.value)&&pr(F)||mv(h)&&h.value===""||F===""||Array.isArray(F)&&!F.length,ke=BW.bind(null,V,n,fe),ft=(je,st,ut,Tt=mo.maxLength,ht=mo.minLength)=>{const Ue=je?st:ut;fe[V]={type:je?Tt:ht,message:Ue,ref:h,...ke(je?Tt:ht,Ue)}};if(c?!Array.isArray(F)||!F.length:o&&(!Te&&(Ne||Li(F))||_o(F)&&!F||Re&&!Nz(f).isValid||Ee&&!Bz(f).isValid)){const{value:je,message:st}=Sy(o)?{value:!!o,message:o}:ih(o);if(je&&(fe[V]={type:mo.required,message:st,ref:W,...ke(mo.required,st)},!n))return Q(st),fe}if(!Ne&&(!Li(A)||!Li(C))){let je,st;const ut=ih(C),Tt=ih(A);if(!Li(F)&&!isNaN(F)){const ht=h.valueAsNumber||F&&+F;Li(ut.value)||(je=ht>ut.value),Li(Tt.value)||(st=ht<Tt.value)}else{const ht=h.valueAsDate||new Date(F),Ue=mt=>new Date(new Date().toDateString()+" "+mt),De=h.type=="time",Xe=h.type=="week";ja(ut.value)&&F&&(je=De?Ue(F)>Ue(ut.value):Xe?F>ut.value:ht>new Date(ut.value)),ja(Tt.value)&&F&&(st=De?Ue(F)<Ue(Tt.value):Xe?F<Tt.value:ht<new Date(Tt.value))}if((je||st)&&(ft(!!je,ut.message,Tt.message,mo.max,mo.min),!n))return Q(fe[V].message),fe}if((w||b)&&!Ne&&(ja(F)||c&&Array.isArray(F))){const je=ih(w),st=ih(b),ut=!Li(je.value)&&F.length>+je.value,Tt=!Li(st.value)&&F.length<+st.value;if((ut||Tt)&&(ft(ut,je.message,st.message),!n))return Q(fe[V].message),fe}if(M&&!Ne&&ja(F)){const{value:je,message:st}=ih(M);if(gv(je)&&!F.match(je)&&(fe[V]={type:mo.pattern,message:st,ref:h,...ke(mo.pattern,st)},!n))return Q(st),fe}if(B){if(zl(B)){const je=await B(F,t),st=NA(je,W);if(st&&(fe[V]={...st,...ke(mo.validate,st.message)},!n))return Q(st.message),fe}else if(Ar(B)){let je={};for(const st in B){if(!cs(je)&&!n)break;const ut=NA(await B[st](F,t),W,st);ut&&(je={...ut,...ke(st,ut.message)},Q(ut.message),n&&(fe[V]=je))}if(!cs(je)&&(fe[V]={ref:W,...je},!n))return fe}}return Q(!0),fe};function jW(e,t){const n=t.slice(0,-1).length;let s=0;for(;s<n;)e=pr(e)?s++:e[t[s++]];return e}function $W(e){for(const t in e)if(e.hasOwnProperty(t)&&!pr(e[t]))return!1;return!0}function Tr(e,t){const n=Array.isArray(t)?t:o2(t)?[t]:Fz(t),s=n.length===1?e:jW(e,n),c=n.length-1,h=n[c];return s&&delete s[h],c!==0&&(Ar(s)&&cs(s)||Array.isArray(s)&&$W(s))&&Tr(e,n.slice(0,-1)),e}var V0=()=>{let e=[];return{get observers(){return e},next:c=>{for(const h of e)h.next&&h.next(c)},subscribe:c=>(e.push(c),{unsubscribe:()=>{e=e.filter(h=>h!==c)}}),unsubscribe:()=>{e=[]}}},yv=e=>Li(e)||!Oz(e);function Zc(e,t){if(yv(e)||yv(t))return e===t;if(Sh(e)&&Sh(t))return e.getTime()===t.getTime();const n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(const c of n){const h=e[c];if(!s.includes(c))return!1;if(c!=="ref"){const f=t[c];if(Sh(h)&&Sh(f)||Ar(h)&&Ar(f)||Array.isArray(h)&&Array.isArray(f)?!Zc(h,f):h!==f)return!1}}return!0}var Vz=e=>e.type==="select-multiple",UW=e=>c2(e)||fm(e),j0=e=>mv(e)&&e.isConnected,jz=e=>{for(const t in e)if(zl(e[t]))return!0;return!1};function vv(e,t={}){const n=Array.isArray(e);if(Ar(e)||n)for(const s in e)Array.isArray(e[s])||Ar(e[s])&&!jz(e[s])?(t[s]=Array.isArray(e[s])?[]:{},vv(e[s],t[s])):Li(e[s])||(t[s]=!0);return t}function $z(e,t,n){const s=Array.isArray(e);if(Ar(e)||s)for(const c in e)Array.isArray(e[c])||Ar(e[c])&&!jz(e[c])?pr(t)||yv(n[c])?n[c]=Array.isArray(e[c])?vv(e[c],[]):{...vv(e[c])}:$z(e[c],Li(t)?{}:t[c],n[c]):n[c]=!Zc(e[c],t[c]);return n}var Hg=(e,t)=>$z(e,t,vv(t)),Uz=(e,{valueAsNumber:t,valueAsDate:n,setValueAs:s})=>pr(e)?e:t?e===""?NaN:e&&+e:n&&ja(e)?new Date(e):s?s(e):e;function $0(e){const t=e.ref;if(!(e.refs?e.refs.every(n=>n.disabled):t.disabled))return l2(t)?t.files:c2(t)?Bz(e.refs).value:Vz(t)?[...t.selectedOptions].map(({value:n})=>n):fm(t)?Nz(e.refs).value:Uz(pr(t.value)?e.ref.value:t.value,e)}var qW=(e,t,n,s)=>{const c={};for(const h of e){const f=It(t,h);f&&Bn(c,h,f._f)}return{criteriaMode:n,names:[...e],fields:c,shouldUseNativeValidation:s}},Vf=e=>pr(e)?e:gv(e)?e.source:Ar(e)?gv(e.value)?e.value.source:e.value:e,GW=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function VA(e,t,n){const s=It(e,n);if(s||o2(n))return{error:s,name:n};const c=n.split(".");for(;c.length;){const h=c.join("."),f=It(t,h),o=It(e,h);if(f&&!Array.isArray(f)&&n!==h)return{name:n};if(o&&o.type)return{name:h,error:o};c.pop()}return{name:n}}var ZW=(e,t,n,s,c)=>c.isOnAll?!1:!n&&c.isOnTouch?!(t||e):(n?s.isOnBlur:c.isOnBlur)?!e:(n?s.isOnChange:c.isOnChange)?e:!0,WW=(e,t)=>!pm(It(e,t)).length&&Tr(e,t);const HW={mode:ga.onSubmit,reValidateMode:ga.onChange,shouldFocusError:!0};function KW(e={}){let t={...HW,...e},n={submitCount:0,isDirty:!1,isLoading:zl(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},s={},c=Ar(t.defaultValues)||Ar(t.values)?Ls(t.defaultValues||t.values)||{}:{},h=t.shouldUnregister?{}:Ls(c),f={action:!1,mount:!1,watch:!1},o={mount:new Set,unMount:new Set,array:new Set,watch:new Set},w,b=0;const A={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},C={values:V0(),array:V0(),state:V0()},M=DA(t.mode),B=DA(t.reValidateMode),V=t.criteriaMode===ga.all,j=ye=>Me=>{clearTimeout(b),b=setTimeout(ye,Me)},Z=async ye=>{if(A.isValid||ye){const Me=t.resolver?cs((await Te()).errors):await ke(s,!0);Me!==n.isValid&&C.state.next({isValid:Me})}},N=(ye,Me)=>{(A.isValidating||A.validatingFields)&&((ye||Array.from(o.mount)).forEach(ce=>{ce&&(Me?Bn(n.validatingFields,ce,Me):Tr(n.validatingFields,ce))}),C.state.next({validatingFields:n.validatingFields,isValidating:!cs(n.validatingFields)}))},F=(ye,Me=[],ce,at,nt=!0,qe=!0)=>{if(at&&ce){if(f.action=!0,qe&&Array.isArray(It(s,ye))){const et=ce(It(s,ye),at.argA,at.argB);nt&&Bn(s,ye,et)}if(qe&&Array.isArray(It(n.errors,ye))){const et=ce(It(n.errors,ye),at.argA,at.argB);nt&&Bn(n.errors,ye,et),WW(n.errors,ye)}if(A.touchedFields&&qe&&Array.isArray(It(n.touchedFields,ye))){const et=ce(It(n.touchedFields,ye),at.argA,at.argB);nt&&Bn(n.touchedFields,ye,et)}A.dirtyFields&&(n.dirtyFields=Hg(c,h)),C.state.next({name:ye,isDirty:je(ye,Me),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else Bn(h,ye,Me)},W=(ye,Me)=>{Bn(n.errors,ye,Me),C.state.next({errors:n.errors})},Q=ye=>{n.errors=ye,C.state.next({errors:n.errors,isValid:!1})},fe=(ye,Me,ce,at)=>{const nt=It(s,ye);if(nt){const qe=It(h,ye,pr(ce)?It(c,ye):ce);pr(qe)||at&&at.defaultChecked||Me?Bn(h,ye,Me?qe:$0(nt._f)):Tt(ye,qe),f.mount&&Z()}},Ee=(ye,Me,ce,at,nt)=>{let qe=!1,et=!1;const Gt={name:ye},Tn=!!(It(s,ye)&&It(s,ye)._f.disabled);if(!ce||at){A.isDirty&&(et=n.isDirty,n.isDirty=Gt.isDirty=je(),qe=et!==Gt.isDirty);const Dn=Tn||Zc(It(c,ye),Me);et=!!(!Tn&&It(n.dirtyFields,ye)),Dn||Tn?Tr(n.dirtyFields,ye):Bn(n.dirtyFields,ye,!0),Gt.dirtyFields=n.dirtyFields,qe=qe||A.dirtyFields&&et!==!Dn}if(ce){const Dn=It(n.touchedFields,ye);Dn||(Bn(n.touchedFields,ye,ce),Gt.touchedFields=n.touchedFields,qe=qe||A.touchedFields&&Dn!==ce)}return qe&&nt&&C.state.next(Gt),qe?Gt:{}},Re=(ye,Me,ce,at)=>{const nt=It(n.errors,ye),qe=A.isValid&&_o(Me)&&n.isValid!==Me;if(e.delayError&&ce?(w=j(()=>W(ye,ce)),w(e.delayError)):(clearTimeout(b),w=null,ce?Bn(n.errors,ye,ce):Tr(n.errors,ye)),(ce?!Zc(nt,ce):nt)||!cs(at)||qe){const et={...at,...qe&&_o(Me)?{isValid:Me}:{},errors:n.errors,name:ye};n={...n,...et},C.state.next(et)}},Te=async ye=>{N(ye,!0);const Me=await t.resolver(h,t.context,qW(ye||o.mount,s,t.criteriaMode,t.shouldUseNativeValidation));return N(ye),Me},Ne=async ye=>{const{errors:Me}=await Te(ye);if(ye)for(const ce of ye){const at=It(Me,ce);at?Bn(n.errors,ce,at):Tr(n.errors,ce)}else n.errors=Me;return Me},ke=async(ye,Me,ce={valid:!0})=>{for(const at in ye){const nt=ye[at];if(nt){const{_f:qe,...et}=nt;if(qe){const Gt=o.array.has(qe.name);N([at],!0);const Tn=await BA(nt,h,V,t.shouldUseNativeValidation&&!Me,Gt);if(N([at]),Tn[qe.name]&&(ce.valid=!1,Me))break;!Me&&(It(Tn,qe.name)?Gt?VW(n.errors,Tn,qe.name):Bn(n.errors,qe.name,Tn[qe.name]):Tr(n.errors,qe.name))}et&&await ke(et,Me,ce)}}return ce.valid},ft=()=>{for(const ye of o.unMount){const Me=It(s,ye);Me&&(Me._f.refs?Me._f.refs.every(ce=>!j0(ce)):!j0(Me._f.ref))&&gr(ye)}o.unMount=new Set},je=(ye,Me)=>(ye&&Me&&Bn(h,ye,Me),!Zc(zt(),c)),st=(ye,Me,ce)=>NW(ye,o,{...f.mount?h:pr(Me)?c:ja(ye)?{[ye]:Me}:Me},ce,Me),ut=ye=>pm(It(f.mount?h:c,ye,e.shouldUnregister?It(c,ye,[]):[])),Tt=(ye,Me,ce={})=>{const at=It(s,ye);let nt=Me;if(at){const qe=at._f;qe&&(!qe.disabled&&Bn(h,ye,Uz(Me,qe)),nt=mv(qe.ref)&&Li(Me)?"":Me,Vz(qe.ref)?[...qe.ref.options].forEach(et=>et.selected=nt.includes(et.value)):qe.refs?fm(qe.ref)?qe.refs.length>1?qe.refs.forEach(et=>(!et.defaultChecked||!et.disabled)&&(et.checked=Array.isArray(nt)?!!nt.find(Gt=>Gt===et.value):nt===et.value)):qe.refs[0]&&(qe.refs[0].checked=!!nt):qe.refs.forEach(et=>et.checked=et.value===nt):l2(qe.ref)?qe.ref.value="":(qe.ref.value=nt,qe.ref.type||C.values.next({name:ye,values:{...h}})))}(ce.shouldDirty||ce.shouldTouch)&&Ee(ye,nt,ce.shouldTouch,ce.shouldDirty,!0),ce.shouldValidate&&mt(ye)},ht=(ye,Me,ce)=>{for(const at in Me){const nt=Me[at],qe=`${ye}.${at}`,et=It(s,qe);(o.array.has(ye)||!yv(nt)||et&&!et._f)&&!Sh(nt)?ht(qe,nt,ce):Tt(qe,nt,ce)}},Ue=(ye,Me,ce={})=>{const at=It(s,ye),nt=o.array.has(ye),qe=Ls(Me);Bn(h,ye,qe),nt?(C.array.next({name:ye,values:{...h}}),(A.isDirty||A.dirtyFields)&&ce.shouldDirty&&C.state.next({name:ye,dirtyFields:Hg(c,h),isDirty:je(ye,qe)})):at&&!at._f&&!Li(qe)?ht(ye,qe,ce):Tt(ye,qe,ce),LA(ye,o)&&C.state.next({...n}),C.values.next({name:f.mount?ye:void 0,values:{...h}})},De=async ye=>{const Me=ye.target;let ce=Me.name,at=!0;const nt=It(s,ce),qe=()=>Me.type?$0(nt._f):MW(ye),et=Gt=>{at=Number.isNaN(Gt)||Gt===It(h,ce,Gt)};if(nt){let Gt,Tn;const Dn=qe(),rs=ye.type===RA.BLUR||ye.type===RA.FOCUS_OUT,Ta=!GW(nt._f)&&!t.resolver&&!It(n.errors,ce)&&!nt._f.deps||ZW(rs,It(n.touchedFields,ce),n.isSubmitted,B,M),ji=LA(ce,o,rs);Bn(h,ce,Dn),rs?(nt._f.onBlur&&nt._f.onBlur(ye),w&&w(0)):nt._f.onChange&&nt._f.onChange(ye);const is=Ee(ce,Dn,rs,!1),Ke=!cs(is)||ji;if(!rs&&C.values.next({name:ce,type:ye.type,values:{...h}}),Ta)return A.isValid&&Z(),Ke&&C.state.next({name:ce,...ji?{}:is});if(!rs&&ji&&C.state.next({...n}),t.resolver){const{errors:xi}=await Te([ce]);if(et(Dn),at){const En=VA(n.errors,s,ce),Ss=VA(xi,s,En.name||ce);Gt=Ss.error,ce=Ss.name,Tn=cs(xi)}}else N([ce],!0),Gt=(await BA(nt,h,V,t.shouldUseNativeValidation))[ce],N([ce]),et(Dn),at&&(Gt?Tn=!1:A.isValid&&(Tn=await ke(s,!0)));at&&(nt._f.deps&&mt(nt._f.deps),Re(ce,Tn,Gt,is))}},Xe=(ye,Me)=>{if(It(n.errors,Me)&&ye.focus)return ye.focus(),1},mt=async(ye,Me={})=>{let ce,at;const nt=B0(ye);if(t.resolver){const qe=await Ne(pr(ye)?ye:nt);ce=cs(qe),at=ye?!nt.some(et=>It(qe,et)):ce}else ye?(at=(await Promise.all(nt.map(async qe=>{const et=It(s,qe);return await ke(et&&et._f?{[qe]:et}:et)}))).every(Boolean),!(!at&&!n.isValid)&&Z()):at=ce=await ke(s);return C.state.next({...!ja(ye)||A.isValid&&ce!==n.isValid?{}:{name:ye},...t.resolver||!ye?{isValid:ce}:{},errors:n.errors}),Me.shouldFocus&&!at&&up(s,Xe,ye?nt:o.mount),at},zt=ye=>{const Me={...c,...f.mount?h:{}};return pr(ye)?Me:ja(ye)?It(Me,ye):ye.map(ce=>It(Me,ce))},$t=(ye,Me)=>({invalid:!!It((Me||n).errors,ye),isDirty:!!It((Me||n).dirtyFields,ye),isTouched:!!It((Me||n).touchedFields,ye),isValidating:!!It((Me||n).validatingFields,ye),error:It((Me||n).errors,ye)}),Dt=ye=>{ye&&B0(ye).forEach(Me=>Tr(n.errors,Me)),C.state.next({errors:ye?n.errors:{}})},Sn=(ye,Me,ce)=>{const at=(It(s,ye,{_f:{}})._f||{}).ref;Bn(n.errors,ye,{...Me,ref:at}),C.state.next({name:ye,errors:n.errors,isValid:!1}),ce&&ce.shouldFocus&&at&&at.focus&&at.focus()},vi=(ye,Me)=>zl(ye)?C.values.subscribe({next:ce=>ye(st(void 0,Me),ce)}):st(ye,Me,!0),gr=(ye,Me={})=>{for(const ce of ye?B0(ye):o.mount)o.mount.delete(ce),o.array.delete(ce),Me.keepValue||(Tr(s,ce),Tr(h,ce)),!Me.keepError&&Tr(n.errors,ce),!Me.keepDirty&&Tr(n.dirtyFields,ce),!Me.keepTouched&&Tr(n.touchedFields,ce),!Me.keepIsValidating&&Tr(n.validatingFields,ce),!t.shouldUnregister&&!Me.keepDefaultValue&&Tr(c,ce);C.values.next({values:{...h}}),C.state.next({...n,...Me.keepDirty?{isDirty:je()}:{}}),!Me.keepIsValid&&Z()},Jr=({disabled:ye,name:Me,field:ce,fields:at,value:nt})=>{if(_o(ye)){const qe=ye?void 0:pr(nt)?$0(ce?ce._f:It(at,Me)._f):nt;Bn(h,Me,qe),Ee(Me,qe,!1,!1,!0)}},Bi=(ye,Me={})=>{let ce=It(s,ye);const at=_o(Me.disabled);return Bn(s,ye,{...ce||{},_f:{...ce&&ce._f?ce._f:{ref:{name:ye}},name:ye,mount:!0,...Me}}),o.mount.add(ye),ce?Jr({field:ce,disabled:Me.disabled,name:ye,value:Me.value}):fe(ye,!0,Me.value),{...at?{disabled:Me.disabled}:{},...t.progressive?{required:!!Me.required,min:Vf(Me.min),max:Vf(Me.max),minLength:Vf(Me.minLength),maxLength:Vf(Me.maxLength),pattern:Vf(Me.pattern)}:{},name:ye,onChange:De,onBlur:De,ref:nt=>{if(nt){Bi(ye,Me),ce=It(s,ye);const qe=pr(nt.value)&&nt.querySelectorAll&&nt.querySelectorAll("input,select,textarea")[0]||nt,et=UW(qe),Gt=ce._f.refs||[];if(et?Gt.find(Tn=>Tn===qe):qe===ce._f.ref)return;Bn(s,ye,{_f:{...ce._f,...et?{refs:[...Gt.filter(j0),qe,...Array.isArray(It(c,ye))?[{}]:[]],ref:{type:qe.type,name:ye}}:{ref:qe}}}),fe(ye,!1,void 0,qe)}else ce=It(s,ye,{}),ce._f&&(ce._f.mount=!1),(t.shouldUnregister||Me.shouldUnregister)&&!(DW(o.array,ye)&&f.action)&&o.unMount.add(ye)}}},ei=()=>t.shouldFocusError&&up(s,Xe,o.mount),ti=ye=>{_o(ye)&&(C.state.next({disabled:ye}),up(s,(Me,ce)=>{let at=ye;const nt=It(s,ce);nt&&_o(nt._f.disabled)&&(at||(at=nt._f.disabled)),Me.disabled=at},0,!1))},wa=(ye,Me)=>async ce=>{let at;ce&&(ce.preventDefault&&ce.preventDefault(),ce.persist&&ce.persist());let nt=Ls(h);if(C.state.next({isSubmitting:!0}),t.resolver){const{errors:qe,values:et}=await Te();n.errors=qe,nt=et}else await ke(s);if(Tr(n.errors,"root"),cs(n.errors)){C.state.next({errors:{}});try{await ye(nt,ce)}catch(qe){at=qe}}else Me&&await Me({...n.errors},ce),ei(),setTimeout(ei);if(C.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:cs(n.errors)&&!at,submitCount:n.submitCount+1,errors:n.errors}),at)throw at},bs=(ye,Me={})=>{It(s,ye)&&(pr(Me.defaultValue)?Ue(ye,Ls(It(c,ye))):(Ue(ye,Me.defaultValue),Bn(c,ye,Ls(Me.defaultValue))),Me.keepTouched||Tr(n.touchedFields,ye),Me.keepDirty||(Tr(n.dirtyFields,ye),n.isDirty=Me.defaultValue?je(ye,Ls(It(c,ye))):je()),Me.keepError||(Tr(n.errors,ye),A.isValid&&Z()),C.state.next({...n}))},ba=(ye,Me={})=>{const ce=ye?Ls(ye):c,at=Ls(ce),nt=cs(ye),qe=nt?c:at;if(Me.keepDefaultValues||(c=ce),!Me.keepValues){if(Me.keepDirtyValues)for(const et of o.mount)It(n.dirtyFields,et)?Bn(qe,et,It(h,et)):Ue(et,It(qe,et));else{if(a2&&pr(ye))for(const et of o.mount){const Gt=It(s,et);if(Gt&&Gt._f){const Tn=Array.isArray(Gt._f.refs)?Gt._f.refs[0]:Gt._f.ref;if(mv(Tn)){const Dn=Tn.closest("form");if(Dn){Dn.reset();break}}}}s={}}h=e.shouldUnregister?Me.keepDefaultValues?Ls(c):{}:Ls(qe),C.array.next({values:{...qe}}),C.values.next({values:{...qe}})}o={mount:Me.keepDirtyValues?o.mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},f.mount=!A.isValid||!!Me.keepIsValid||!!Me.keepDirtyValues,f.watch=!!e.shouldUnregister,C.state.next({submitCount:Me.keepSubmitCount?n.submitCount:0,isDirty:nt?!1:Me.keepDirty?n.isDirty:!!(Me.keepDefaultValues&&!Zc(ye,c)),isSubmitted:Me.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:nt?[]:Me.keepDirtyValues?Me.keepDefaultValues&&h?Hg(c,h):n.dirtyFields:Me.keepDefaultValues&&ye?Hg(c,ye):{},touchedFields:Me.keepTouched?n.touchedFields:{},errors:Me.keepErrors?n.errors:{},isSubmitSuccessful:Me.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},Vi=(ye,Me)=>ba(zl(ye)?ye(h):ye,Me);return{control:{register:Bi,unregister:gr,getFieldState:$t,handleSubmit:wa,setError:Sn,_executeSchema:Te,_getWatch:st,_getDirty:je,_updateValid:Z,_removeUnmounted:ft,_updateFieldArray:F,_updateDisabledField:Jr,_getFieldArray:ut,_reset:ba,_resetDefaultValues:()=>zl(t.defaultValues)&&t.defaultValues().then(ye=>{Vi(ye,t.resetOptions),C.state.next({isLoading:!1})}),_updateFormState:ye=>{n={...n,...ye}},_disableForm:ti,_subjects:C,_proxyFormState:A,_setErrors:Q,get _fields(){return s},get _formValues(){return h},get _state(){return f},set _state(ye){f=ye},get _defaultValues(){return c},get _names(){return o},set _names(ye){o=ye},get _formState(){return n},set _formState(ye){n=ye},get _options(){return t},set _options(ye){t={...t,...ye}}},trigger:mt,register:Bi,handleSubmit:wa,watch:vi,setValue:Ue,getValues:zt,reset:Vi,resetField:bs,clearErrors:Dt,unregister:gr,setError:Sn,setFocus:(ye,Me={})=>{const ce=It(s,ye),at=ce&&ce._f;if(at){const nt=at.refs?at.refs[0]:at.ref;nt.focus&&(nt.focus(),Me.shouldSelect&&nt.select())}},getFieldState:$t}}function qz(e={}){const t=bt.useRef(),n=bt.useRef(),[s,c]=bt.useState({isDirty:!1,isValidating:!1,isLoading:zl(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,defaultValues:zl(e.defaultValues)?void 0:e.defaultValues});t.current||(t.current={...KW(e),formState:s});const h=t.current.control;return h._options=e,FW({subject:h._subjects.state,next:f=>{OW(f,h._proxyFormState,h._updateFormState,!0)&&c({...h._formState})}}),bt.useEffect(()=>h._disableForm(e.disabled),[h,e.disabled]),bt.useEffect(()=>{if(h._proxyFormState.isDirty){const f=h._getDirty();f!==s.isDirty&&h._subjects.state.next({isDirty:f})}},[h,s.isDirty]),bt.useEffect(()=>{e.values&&!Zc(e.values,n.current)?(h._reset(e.values,h._options.resetOptions),n.current=e.values,c(f=>({...f}))):h._resetDefaultValues()},[e.values,h]),bt.useEffect(()=>{e.errors&&h._setErrors(e.errors)},[e.errors,h]),bt.useEffect(()=>{h._state.mount||(h._updateValid(),h._state.mount=!0),h._state.watch&&(h._state.watch=!1,h._subjects.state.next({...h._formState})),h._removeUnmounted()}),bt.useEffect(()=>{e.shouldUnregister&&h._subjects.values.next({values:h._getWatch()})},[e.shouldUnregister,h]),t.current.formState=zW(s,h),t.current}const XW={email:"",password:""};function QW(){const[e,t]=Y.useState(!1),[n,s]=Y.useState(""),[c,h]=Y.useState(""),[f,o]=Y.useState(!1),[w,b]=Y.useState(!1),[A,C]=Y.useState(!1),[M,B]=Y.useState(!1),[V,j]=Y.useState(""),Z=sc(),N=()=>t(Te=>!Te),{register:F,handleSubmit:W}=qz({defaultValues:XW}),Q=async Te=>{var Ne,ke,ft,je,st,ut,Tt,ht;s(""),h(""),o(!0);try{const Ue={...Te,recaptcha_response:"dummy-recaptcha"},De=await pW(Ue);console.log("Login API Response:",De),h("Login successful!"),(ke=(Ne=De==null?void 0:De.data)==null?void 0:Ne.user)!=null&&ke.username&&(localStorage.setItem("username",De.data.user.username),Z(dA({isAuthenticated:!0,username:De.data.user.username})),console.log("Username saved to localStorage and Redux:",De.data.user.username)),(ft=De==null?void 0:De.data)!=null&&ft.access&&(localStorage.setItem("token",De.data.access),console.log("Token saved to localStorage:",De.data.access)),(je=De==null?void 0:De.data)!=null&&je.refresh&&(localStorage.setItem("refresh_token",De.data.refresh),console.log("Refresh token saved to localStorage:",De.data.refresh)),Z(od()),window.dispatchEvent(new Event("authChanged")),console.log("Modal toggled off.")}catch(Ue){s(((ut=(st=Ue==null?void 0:Ue.response)==null?void 0:st.data)==null?void 0:ut.detail)||((ht=(Tt=Ue==null?void 0:Ue.response)==null?void 0:Tt.data)==null?void 0:ht.message)||"Login failed.")}finally{o(!1)}},fe=async()=>{var Te,Ne,ke,ft,je,st,ut,Tt;s(""),h(""),b(!0);try{const ht=await gW({});h("Login successful!"),(Ne=(Te=ht==null?void 0:ht.data)==null?void 0:Te.user)!=null&&Ne.username&&(localStorage.setItem("username",ht.data.user.username),Z(dA({isAuthenticated:!0,username:ht.data.user.username}))),(ke=ht==null?void 0:ht.data)!=null&&ke.access&&localStorage.setItem("token",ht.data.access),(ft=ht==null?void 0:ht.data)!=null&&ft.refresh&&localStorage.setItem("refresh_token",ht.data.refresh),Z(od()),window.dispatchEvent(new Event("authChanged"))}catch(ht){s(((st=(je=ht==null?void 0:ht.response)==null?void 0:je.data)==null?void 0:st.detail)||((Tt=(ut=ht==null?void 0:ht.response)==null?void 0:ut.data)==null?void 0:Tt.message)||"Google login failed.")}finally{b(!1)}},Ee=()=>{s(""),h(""),j(""),B(!0)},Re=async Te=>{var Ne,ke,ft,je;Te.preventDefault(),s(""),h(""),C(!0);try{if(!V){s("Please enter your registered email address."),C(!1);return}await yW({email:V}),h("Password reset email sent successfully, please check your email."),B(!1)}catch(st){s(((ke=(Ne=st==null?void 0:st.response)==null?void 0:Ne.data)==null?void 0:ke.detail)||((je=(ft=st==null?void 0:st.response)==null?void 0:ft.data)==null?void 0:je.message)||"Failed to send password reset email.")}finally{C(!1)}};return Ve(ms,{children:[Ve(fx,{gap:4,className:"naxatw-w-full naxatw-flex-col naxatw-items-center naxatw-justify-center naxatw-pb-4",children:[K(Ao,{src:zz,width:60}),K("h3",{children:"Login"}),Ve("div",{className:"naxatw-flex naxatw-w-[60%] naxatw-cursor-pointer naxatw-items-center naxatw-justify-center naxatw-gap-2 naxatw-rounded-lg naxatw-border naxatw-border-grey-800 naxatw-px-5 naxatw-py-2 hover:naxatw-shadow-md",onClick:fe,children:[K(Ao,{src:IW}),K("span",{className:"naxatw-text-body-btn",children:w?"Loading...":"Continue with Google"})]}),Ve(hs,{className:"naxatw-w-full naxatw-items-center naxatw-justify-center",gap:3,children:[K("hr",{className:"naxatw-w-[26%]"}),K("span",{children:"or"}),K("hr",{className:"naxatw-w-[26%]"})]}),Ve("form",{onSubmit:W(Q),className:"naxatw-flex naxatw-w-full naxatw-flex-col naxatw-gap-4",children:[n&&K(ca,{message:n}),c&&K("span",{className:"naxatw-text-green-600 naxatw-text-sm naxatw-pt-2",children:c}),Ve(vo,{children:[K(fa,{htmlFor:"username",required:!0,children:"Email"}),K(pi,{id:"username",type:"text",placeholder:"Username",className:"naxatw-mt-1 !naxatw-rounded-lg !naxatw-border-grey-400 !naxatw-p-3",...F("email",{required:!0})})]}),Ve(vo,{className:"naxatw-relative",children:[K(fa,{htmlFor:"password",required:!0,children:"Password"}),K(pi,{id:"password",placeholder:"*******",className:"naxatw-mt-1 !naxatw-rounded-lg !naxatw-border-grey-400 !naxatw-p-3",type:e?"text":"password",...F("password",{required:!0})}),K(Yr,{name:e?"visibility":"visibility_off",className:"naxatw-absolute naxatw-right-2 naxatw-top-[55%] naxatw-cursor-pointer naxatw-text-sm naxatw-text-grey-600",onClick:()=>N()})]}),Ve(hs,{className:"naxatw-items-center naxatw-justify-between",children:[Ve(hs,{className:"naxatw-items-center naxatw-gap-2 naxatw-pl-3",children:[K(pi,{type:"checkbox",id:"check"}),K(fa,{htmlFor:"check",children:"Remember Me"})]}),K(Vs,{variant:"ghost",className:"naxatw-text-body-btn !naxatw-text-red",onClick:Ee,type:"button",children:A?"Sending...":"Forgot Your Password?"})]}),K(Vs,{className:"!naxatw-bg-red naxatw-py-5",type:"submit",withLoader:!0,isLoading:f,children:"Log In"})]})]}),K(Lz,{title:"Reset Password",show:M,onClose:()=>B(!1),children:Ve("form",{onSubmit:Re,className:"naxatw-flex naxatw-flex-col naxatw-gap-4 naxatw-py-4",children:[K(fa,{htmlFor:"forgot-email",children:"Enter your registered email address"}),K(pi,{id:"forgot-email",type:"email",value:V,onChange:Te=>j(Te.target.value),placeholder:"Email",required:!0}),n&&K(ca,{message:n}),c&&K("span",{className:"naxatw-text-green-600 naxatw-text-sm naxatw-pt-2",children:c}),K(Vs,{type:"submit",withLoader:!0,isLoading:A,className:"!naxatw-bg-red",children:"Send Reset Email"})]})})]})}const YW={first_name:"",last_name:"",username:"",email:"",password:"",password_confirm:"",phone:"",gender:"male"};function JW(){var Z,N,F,W,Q,fe,Ee,Re,Te,Ne,ke,ft,je,st;const[e,t]=Y.useState(!1),[n,s]=Y.useState(""),[c,h]=Y.useState(""),f=sx(),o=sc(),w=()=>t(ut=>!ut),b=()=>{o(od()),setTimeout(()=>{o(nz(null))},150)},{mutate:A,isPending:C}=VB({mutationFn:mW,onSuccess:(ut,Tt)=>{localStorage.setItem("signup_email",Tt.email||Tt.get("email")),f("/verify-email"),b()},onError:ut=>{var Ue;const Tt=(Ue=ut==null?void 0:ut.response)==null?void 0:Ue.data,ht=(Tt==null?void 0:Tt.detail)||(typeof Tt=="string"?Tt:"")||JSON.stringify(Tt)||"Signup failed.";if(ht.includes("already exists")||ht.toLowerCase().includes("already registered")){localStorage.setItem("signup_email",n),f("/verify-email"),b();return}h(ht)}}),{register:M,handleSubmit:B,formState:V}=qz({defaultValues:YW});return K(ms,{children:K(fx,{gap:4,className:"naxatw-w-full naxatw-flex-col naxatw-items-center naxatw-justify-center naxatw-pb-4",children:Ve("form",{onSubmit:B(ut=>{h("");const Tt={...ut,password_confirm:ut.password_confirm,is_delete:!1};A(Tt)}),className:"naxatw-flex naxatw-w-full naxatw-flex-col naxatw-gap-4",children:[c&&K(ca,{message:c}),Ve(vo,{children:[K(fa,{htmlFor:"first_name",required:!0,children:"First Name"}),K(pi,{id:"first_name",type:"text",placeholder:"First Name",className:"naxatw-mt-1 !naxatw-rounded-lg !naxatw-border-grey-400 !naxatw-p-3",...M("first_name",{required:"First Name is required"})}),K(ca,{message:((N=(Z=V==null?void 0:V.errors)==null?void 0:Z.first_name)==null?void 0:N.message)||""})]}),Ve(vo,{children:[K(fa,{htmlFor:"username",required:!0,children:"Last Name"}),K(pi,{id:"last_name",type:"text",placeholder:"Last Name",className:"naxatw-mt-1 !naxatw-rounded-lg !naxatw-border-grey-400 !naxatw-p-3",...M("last_name",{required:"Last Name is required"})}),K(ca,{message:((W=(F=V==null?void 0:V.errors)==null?void 0:F.last_name)==null?void 0:W.message)||""})]}),Ve(vo,{children:[K(fa,{htmlFor:"username",required:!0,children:"Email"}),K(pi,{id:"email",type:"text",placeholder:"something@mail.com",className:"naxatw-mt-1 !naxatw-rounded-lg !naxatw-border-grey-400 !naxatw-p-3",...M("email",{required:"Email is required"})}),K(ca,{message:((fe=(Q=V==null?void 0:V.errors)==null?void 0:Q.email)==null?void 0:fe.message)||""})]}),Ve(vo,{children:[K(fa,{htmlFor:"username",required:!0,children:"Phone Number"}),K(pi,{id:"phone",type:"text",placeholder:"something@mail.com",className:"naxatw-mt-1 !naxatw-rounded-lg !naxatw-border-grey-400 !naxatw-p-3",...M("phone",{required:"Phone is required"})}),K(ca,{message:((Re=(Ee=V==null?void 0:V.errors)==null?void 0:Ee.email)==null?void 0:Re.message)||""})]}),Ve(vo,{children:[K(fa,{htmlFor:"username",required:!0,children:"Username"}),K(pi,{id:"username",type:"text",placeholder:"Username",className:"naxatw-mt-1 !naxatw-rounded-lg !naxatw-border-grey-400 !naxatw-p-3",...M("username",{required:"Username is required"})}),K(ca,{message:((Ne=(Te=V==null?void 0:V.errors)==null?void 0:Te.username)==null?void 0:Ne.message)||""})]}),Ve(vo,{className:"naxatw-relative",children:[K(fa,{htmlFor:"password",required:!0,children:"Password"}),K(pi,{placeholder:"*******",className:"naxatw-mt-1 !naxatw-rounded-lg !naxatw-border-grey-400 !naxatw-p-3",type:e?"text":"password",...M("password",{required:"Password is required",onChange:ut=>s(ut.target.value)})}),K(Yr,{name:e?"visibility":"visibility_off",className:"naxatw-absolute naxatw-right-2 naxatw-top-[55%] naxatw-cursor-pointer naxatw-text-sm naxatw-text-grey-600",onClick:()=>w()}),K(ca,{message:((ft=(ke=V==null?void 0:V.errors)==null?void 0:ke.password)==null?void 0:ft.message)||""})]}),Ve(vo,{className:"naxatw-relative",children:[K(fa,{htmlFor:"password_confirm",required:!0,children:"Confirm Password"}),K(pi,{id:"password_confirm",placeholder:"*******",className:"naxatw-mt-1 !naxatw-rounded-lg !naxatw-border-grey-400 !naxatw-p-3",type:e?"text":"password",...M("password_confirm",{required:"Confirm Password is required"})}),K(Yr,{name:e?"visibility":"visibility_off",className:"naxatw-absolute naxatw-right-2 naxatw-top-[55%] naxatw-cursor-pointer naxatw-text-sm naxatw-text-grey-600",onClick:()=>w()}),K(ca,{message:((st=(je=V==null?void 0:V.errors)==null?void 0:je.password_confirm)==null?void 0:st.message)||""})]}),K(Vs,{className:"!naxatw-bg-red naxatw-py-5",type:"submit",withLoader:!0,isLoading:C,children:"Sign Up"})]})})})}function Kg(e){switch(e){case"login":return{title:"",content:K(QW,{}),className:"!naxatw-w-[28rem]"};case"sign-up":return{title:"Sign Up",content:K(JW,{}),className:"!naxatw-w-[30rem]"};default:return{title:"",content:K(ms,{})}}}function jA(e){switch(e){case"delete-layer":return{title:"",content:K(ms,{})};default:return{title:"",content:K(ms,{})}}}const eH=()=>{const[e,t]=Y.useState(!1),n=()=>{document.documentElement.scrollTop>300?t(!0):t(!1)},s=()=>{window.scrollTo({top:0,behavior:"smooth"})};return Y.useEffect(()=>{window.addEventListener("scroll",n)},[]),K("div",{className:`scroll-to-top-wrapper naxatw-fixed naxatw-bottom-4 naxatw-right-4 ${e?"naxatw-opacity-full naxatw-pointer-events-auto":"naxatw-pointer-events-none naxatw-opacity-0"} common-btn-transition`,children:K("button",{className:"naxatw-relative naxatw-cursor-pointer",type:"button",onClick:s,children:K("div",{className:"naxatw-bg-primary hover:naxatw-bg-opacity-100 hover:naxatw-animate-none -naxatw-z-10 naxatw-bg-opacity-50 naxatw-w-12 naxatw-animate-pulse naxatw-h-12 naxatw-rounded-full naxatw-flex naxatw-items-center naxatw-justify-center",children:K("div",{className:"button-circle naxatw-bg-primary naxatw-z-20 naxatw-bg-opacity-90 naxatw-rounded-full naxatw-relative naxatw-flex naxatw-h-10 naxatw-w-10 -naxatw-rotate-90 naxatw-items-center naxatw-justify-end naxatw-overflow-hidden before:naxatw-absolute before:naxatw-h-full before:naxatw-w-full before:naxatw-scale-100  before:naxatw-rounded-full before:naxatw-bg-main before:naxatw-transition-transform  before:naxatw-duration-500 before:naxatw-ease-out before:naxatw-content-[''] hover:before:naxatw-scale-[0.85]",children:Ve("div",{className:"button-cirlce-svgs naxatw-absolute naxatw-z-[2] naxatw-inline-flex naxatw-w-[200%] naxatw-translate-x-0 naxatw-justify-center naxatw-overflow-hidden naxatw-transition-transform naxatw-duration-500 naxatw-ease-out hover:naxatw-translate-x-[50%]",children:[K(Yr,{name:"east",className:"!naxatw-w-1/2 !naxatw-overflow-hidden naxatw-align-middle !naxatw-text-[1.25rem] !naxatw-text-[#fbf8f3] "}),K(Yr,{name:"east",className:"!naxatw-w-1/2 !naxatw-overflow-hidden naxatw-align-middle !naxatw-text-[1.25rem] !naxatw-text-[#fbf8f3] "})]})})})})})};function tH(){var o,w,b,A,C,M;const e=sc(),t=Po(B=>B.common.showModal),n=Po(B=>B.common.modalContent),s=Po(B=>B.common.showPromptDialog),c=Po(B=>B.common.promptDialogContent),h=()=>{e(od()),setTimeout(()=>{e(nz(null))},150)},f=()=>{e(vG()),setTimeout(()=>{e(xG(null))},150)};return Ve(ms,{children:[!1,Ve("div",{className:"app-root naxatw-flex naxatw-flex-col",children:[K(kW,{}),K(o1,{}),K(Dz,{show:t,className:((o=Kg(n))==null?void 0:o.className)||"",title:(w=Kg(n))==null?void 0:w.title,onClose:h,hideCloseButton:!!((b=Kg(n))!=null&&b.hideCloseButton),children:(A=Kg(n))==null?void 0:A.content}),K(Lz,{show:s,title:(C=jA(c))==null?void 0:C.title,onClose:f,children:(M=jA(c))==null?void 0:M.content}),t$({routes:_W}),K(eH,{})]})]})}const nH=new bB({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:!1}}});U0.createRoot(document.getElementById("root")).render(K(PB,{client:nH,children:K(J5,{store:jR,children:K(QM,{loading:K("h1",{children:"hello"}),persistor:Gj,children:K(eB,{children:K(tH,{})})})})}));
